[{"repo": "deployer", "type": "elite", "title": "", "number of text": 1100, "text": "  Please show more about your case?\n  Some time, i am used it for many servers. :smile: \n  @rayman-v \nDefault Deployer not support your case, but you can make a task for it.\n\n``` php\n// file deploy.php\n\noption('released-version', null, \\Symfony\\Component\\Console\\Input\\InputOption::VALUE_OPTIONAL, 'A released version.');\n\ntask('deploy:set_version', function() {\n    $version = input()->getOption('released-version');\n    $releases = env('releases_list');\n    if (!in_array($version, $releases)){\n        throw new \\RuntimeException('Released version not found!');\n    }\n\n    run(\"cd {{deploy_path}} && ln -sfn {{deploy_path}}/releases/$version current\"); // Atomic override symlink.\n});\n```\n\nAnd run \n\n``` shell\n$ dep deploy:set_version --released-version=20160729140001\n```\n  Please using public key instead enter password.\n  You can found document from https://deployer.org\nOr getting start with steps:\n1. Install Deployer\n2. Make a deploy.php and require recipe for Yii framework\n3. Change server config to correct with your enviroment\n4. Run deploy command \n\nAny question, you can post here or http://deployer.org/discuss\nGoodluck!\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\n> Starting from Symfony 2.8, Assetic is no longer included by default in the Symfony Standard\n> Edition. Refer to this article to learn how to install and enable Assetic in your Symfony application.\n\nhttps://symfony.com/doc/current/cookbook/assetic/index.html\nhttps://symfony.com/doc/current/cookbook/assetic/asset_management.html\n  Please check shell of your server.\n\n```\necho $0\n```\n  Thank @veloxy . I fixed\n  @RicardoJ I think you should make a custom task for this feature.\nBecasue, sometime, deployers want deploy a develop version for test of build CI. They will have many tag version is created by Deployer.\n\nWhat are you thing if we will log deploy versions in to a file?\n @RicardoJ \nI see you implemented feature using deployer.lock file.\nWhat are you thing if we will log deploy versions in to a file? Can you help us this feature?\n  Is directory `/var/www/html/website` existed on your server?\n I think error by directory `/var/www/html/website` not exist, and command `cd` failure.\n  Thank @cjsewell !\nNice job. We need time for testing before merge it.\n I am not sure but can you need share `_ss_environment.php` file\nhttps://www.silverstripe.org/learn/lessons/up-and-running-setting-up-a-local-silverstripe-dev-environment?ref=hub\n @cjsewell Thank you!\nNow, can you help me test and confirm this recipe?\n  @elfet This seems like an ssh2 extension bug\n @bilougit https://bugs.php.net/bug.php?id=60436\n  @alexdevid \nYou can try:\n\n```\ngit clone https://username:password@bitbucket.org/team/repo.git\n```\n\nBut it is bad ideal :-1: \n  What do you think about \n\n```\n\u27a4 Executing task deploy:start\n\u21b3 on [test-svr]\n> cd ~ && if [ ! -d /app/source ]; then mkdir -p /app/source; fi\n\u2022 done on [test-svr]\n\u2714 Ok [3s 824ms]\n\u27a4 Executing task deploy:prepare\n\u21b3 on [test-svr]\n> echo $0\n< bash\n< \n> if [ ! -d /app/source ]; then mkdir -p /app/source; fi\n> if [ ! -L /app/source/current ] && [ -d /app/source/current ]; then echo true; fi\n> cd /app/source && if [ ! -d releases ]; then mkdir releases; fi\n> cd /app/source && if [ ! -d shared ]; then mkdir shared; fi\n\u2022 done on [test-svr]\n\u2714 Ok [6s 483ms]\n\u27a4 Executing task deploy:release\n\u21b3 on [test-svr]\n> if [ -d /app/source/releases/20160614010641 ]; then echo 'true'; fi\n> mkdir /app/source/releases/20160614010641\n> cd /app/source && if [ -h release ]; then rm release; fi\n> ln -s /app/source/releases/20160614010641 /app/source/release\n\u2022 done on [test-svr]\n\u2714 Ok [2s 773ms]\n```\n\nPlease try run with `-vvv` option and see output.\n  Fixed with commit 897205a\n  Can you check agent on your machine (Windows)?\nI suggest you should use **git-bash** and run some commands before deploy.\n\n```\n$ eval `ssh-agent -s`\n$ ssh-add /path/to/key\n$ ssh-add -l\n$ dep deploy prod -vvv\n```\n @fede91it \nPlease run commands as my suggestion.\nYour error is you haven't  authentication agent. And command\n\n```\n$ eval `ssh-agent -s`\n```\n\nto start a ssh agent. :smile: \n @fede91it \nAre you have any other question?\n  This feature is implemented but it is out of date.\nCan you make a PR?\n  You can `dep init`.\nDocuments is not updated. Can you make a PR for document?\n  I think this idea is good, but also other options arguments? What would you do with them?\n  Can you show more info?\nEg: an example task, deploy.php\n  I don't think using composer update is good action.\nIt will update your vendors and composer.lock file when deploying.\nIf you want update vendors, i think you should run update on your dev server, test all features and make a commit changed composer.lock file.\n @robfrawley \nIf you want using `composer update`, you can make a custom task.\n\n> If you want update vendors, i think you should use flow:\n> **Step 1:** run `composer update` on your working machine (may be by hand)\n> **Step 2:** test all features (run unit test)\n> **Step 3:** make a commit changed `composer.lock` file.\n> **Step 4:** deploy to server\n\nhttps://blog.engineyard.com/2014/composer-its-all-about-the-lock-file\n\n**Other point**\n\n```\nserver('dev-svr','192.168.1.234')\n    ->stage('dev')\n    ->env('prod')  // WTF ???\n;\n```\n\nI think it makes users puzzled :scream:\n Currently, only symfony recipe using `env('env')`. But after merge this PR, all recipe will have to set `env('env')`. Variable name makes users puzzled.\n What do you think about this code?\n\n```\nenv('composer_action', 'install');\nenv('composer_options', 'install --no-dev --verbose --prefer-dist --optimize-autoloader --no-progress --no-interaction');\nenv('env_vars', ''); // For Composer installation. Like SYMFONY_ENV=prod\n```\n @robfrawley \n\n```\nenv('composer_action', 'install');\nenv('composer_options', 'install --no-dev --verbose --prefer-dist --optimize-autoloader --no-progress --no-interaction');\nenv('env_vars', ''); // For Composer installation. Like SYMFONY_ENV=prod\n```\n\nWhy?\n- No break BC, \n- Don't need change for old used projects\n- Allow change action of composer (`install` or `update`) very flexible and simple\n- Don't need `env('env')` of `env('build_env')` for all recipe\n\n@elfet  I am agree with you. Users can use `composer update` by hand or custom task\n  Thank you for PR.\nBut i think you should make only pull request for all problem **corrected bug appointed by scrutinizer**\n Thank you!\nThis PR is merged by commit 897205a0825de442eb1c862fef07c253063f192a\n  Thank you!\nThis PR is merged by commit 897205a0825de442eb1c862fef07c253063f192a\n  Thank you!\nThis PR is merged by commit 897205a0825de442eb1c862fef07c253063f192a\n  I think this is problem of `phpseclib`. You should report for `phpseclib` projects\n Deployer using a stable version of phpseclib. But this change of phpseclib only exist on master branch and not include any stable version >= 2.0.\nThis problem will be resolved after phpseclib release a new version 2.x\n Close this issue. Please follow #712 \n  Your problem:\n\n```\nYour machine     ==SSH==>    Proxy server    ==SSH==>       Deploy Server\n```\n\nWith:\n\n| Proxy Server | Deploy Server |\n| --- | --- |\n| xxx.xxx.xxx.xxx:8080 | yyy.yyy.yyy.yyy:22 |\n @picks44 I want confirm your problem to find solution.\nI am not sure but you should try add ssh proxy to a ssh config file and using config file method for authentication with `ext-ssh2`\n\n|  | Proxy Server | Deploy Server |\n| --- | --- | --- |\n| IP | xxx.xxx.xxx.xxx | yyy.yyy.yyy.yyy |\n| Port | 22 | 22 |\n| User | user1 | user2 |\n| Key | key/id_rsa | key/id_rsa |\n\n```\n# ssh config file on your machine\nHost yyy.yyy.yyy.yyy\n    Hostname yyy.yyy.yyy.yyy\n    IdentityFile ~/.ssh/id_rsa\n    ProxyCommand ssh -q -W %h:%p user1@xxx.xxx.xxx.xxx\n    ForwardAgent yes\n```\n\n```\n# deploy.php\n<?php\nrequire 'recipe/symfony.php';\nset('ssh_type', 'ext-ssh2');\nserver('preprod', 'XX.XX.XX.XXX')\n    ->user('user2')\n    ->configFile('path/to/.ssh/config')\n    ->stage('production')\n    ->env('deploy_path', '/var/www/XXX/www');\n\n// Specify the repository from which to download your project's code.\nset('repository', 'https://bitbucket.org/XXX/XXX.git');\n```\n\n```\n$ ssh-add key/id_rsa\n$ bin/dep deploy production -vvv\n```\n @picks44 \nYou have use `ext-ssh2`. Please install php extention ssh2 and add a line to deploy.php\n\n```\nrequire 'recipe/symfony.php';\nset('ssh_type', 'ext-ssh2'); // <= add this line\nserver('preprod', 'XX.XX.XX.XXX')\n    ->user('user2')\n    ->configFile('path/to/.ssh/config')\n    ->stage('production')\n    ->env('deploy_path', '/var/www/XXX/www');\n\n// Specify the repository from which to download your project's code.\nset('repository', 'https://bitbucket.org/XXX/XXX.git');\n```\n @picks44 Please check your ssh proxy command\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | #675 |\n @elfet \nStyleCI check and don't allow a blank line in before and after function body. \nCurrent in master branch, this error is exist. This PR is merged from master, so it have error.\nWhat are you think about an other  PR to fix StyleCI ?\n @elfet This PR is refactored \n Ping @elfet @Baltazardoung  \n  Thank for reporting bug.\nIt will fixed with #676 \n Yes. It wil be fixed in branch 4.x\n I merged to 4.x\n  Yes. This is compare between using `.php` and `.yml` file:\n\n| Feature | Using php file | Using yaml file |\n| --- | --- | --- |\n| Simple | No (Like code) | Yes |\n| Static environment value | Yes | Yes |\n| Dynamic environment value | Yes | No |\n\nI like using php file, and each file is a stage  \nAs that, i can commit a example stage and ignore my production stage. :smile: \n  Please try:\n\n```\nrequire 'recipe/laravel.php';\n```\n\nAnd run with option `-vvv`\n  Yes, you can.\nSee example [oanhnn/deployer-example](https://github.com/oanhnn/deployer/example)\nEdit `deploy.php` file (end of file) like:\n\n```\nforeach (glob(__DIR__ . '/stage/*.php') as $filename) {\n    include $filename;\n}\n//serverList(__DIR__ . '/stage/servers.yml');\n```\n  Your problem like #316 \nIt will be fixed in Deployer v4.x . But now, you can fix it with commit https://github.com/ceesvanegmond/deployer/commit/3ccbb2ce1a1d99d6c4f1fab9f1c3531a3e329e99\n  @eva-xuyen \nCan you show output of command \n\n```\n$ ssh-add -l\n$ ssh -v ssh xxxxx@xxxxx.com.br\n```\n\n@nhp \nCan you set `NULL` value to password or passphrase? :smile: \nDeployer will pause and require input a password\n  @dimoniet I think you should make a PR with logging feature only.\nUsers can send email by a custom `success` task.\n  Thankyou. But:\n1. I think this case only useful when you commited `composer.phar` to repo or having a task copy `composer.phar` to here before it check. Because, release directory is created new.\n2. Please check my comment.\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | #649 |\n\n~~This PR have a BC break~~\n\n**The BC break is reverted**\n @elfet Please add label **bugfix**\n  Are you missing password parameter?\nIn [Deployer document](http://deployer.org/docs/servers):\n\n```\ntesting.vendor:\n  host: myhost.de\n  port: 22\n  user: xxxxxx\n  identity_file:\n    public_key: ~/.ssh/id_rsa.pub\n    private_key: ~/.ssh/id_rsa\n    password: null\n  deploy_path: /var/www/project\n  branch: master\n```\n  @khromov \nThank you for your idea. It is good, but it can have use root privilege. We will think about it.\n  Please check you key. Compare 2 commands output\n\n```\n$ ssh -i /path/to/you/key -v root@server1\n```\n\nand \n\n```\n$ ssh -A -v root@server1\n```\n\nOut put will show what key you used.\n Compare to 2 log files\n\n```\n$ diff log2.txt log1.txt \n1c1\n< \u279c  tedx git:(master) \u2717 ssh -A -v root@s1.site.com\n---\n> \u279c  tedx git:(master) \u2717 ssh -i /Users/stakhr/.ssh/id_rsa -v root@s1.site.com\n9,10d8\n< debug1: identity file /Users/stakhr/.ssh/id_dsa type -1\n< debug1: identity file /Users/stakhr/.ssh/id_dsa-cert type -1\n41d38\n< debug1: Requesting authentication agent forwarding.\n```\n\nI will research more. \n  Please update you `deploy.php` file like:\n\n```\n<?php\nrequire 'recipe/common.php';\n// require 'vendor/autoload.php'; <== comment or remove ########################\n\n// Set configurations\nset('repository', 'git@domain.com:username/repository.git');\nset('shared_files', ['drupal/sites/geem.t4dos.com/settings.php']);\nset('shared_dirs', ['drupal/sites/geem.t4dos.com/files']);\nset('writable_dirs', ['drupal/sites/geem.t4dos.com/files']);\nset('repository', 'git@github.com:oskarcalvo/FSW-GEMM.git');\nset('ssh_type', 'ext-ssh2');\n\n// Configure servers\nserver('production', 'xx.xxx.xx.xx', 22)\n//    ->forwardAgent() <== comment or remove  #################################\n    ->user('deployer')\n//   ->password(null)   <== comment or remove #################################\n    ->forwardAgent()\n    ->stage('production')\n    ->env('branch', 'master')\n    ->env('deploy_path', '/var/www/html/geem');\n\n/**\n * Restart Apache2 on success deploy.\n */\ntask('apache:restart', function () {\n    // Attention: The user must have rights for restart service\n    // Attention: the command \"sudo /bin/systemctl restart php-fpm.service\" used only on CentOS system\n    // /etc/sudoers: username ALL=NOPASSWD:/bin/systemctl restart php-fpm.service\n    run('sudo service apache2 restart');\n})->desc('Restart Apache2 service');\n\nafter('success', 'apache:restart');\n\n/**\n * Main task\n */\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:symlink',\n    'cleanup',\n])->desc('Deploy your project');\n\nafter('deploy', 'success');\n\n// Add test task #########################################################\ntask('test', function() {\n     run('ssh -vT git@github.com');\n});\n```\n\nAnd run task `test`.\n I see you remote git@github.com by key\n\n```\ndebug1: Offering RSA public key: oskarcalvo\n```\n\nBut when using deployer, this key is not found?\nCan you modify task test and run:\n\n```\n// Add test task #########################################################\ntask('test', function() {\n     runLocally('ssh-add -l');\n     run('ssh-add -l');\n});\n```\n @oskarcalvo \nWith issue about using `identityFile()`, it may be is a problem of key.\nhttp://stackoverflow.com/questions/3407503/trying-to-connect-using-ssh2-auth-pubkey-file\n\nI will research about problem using `forwardAgent()`\n  You can try login remote server with -A option\n\n```\n$ ssh-add -l\n$ ssh -A deployer@xx.xxx.xx.xx\n[remote]$ ssh-add -l\n```\n  Thank you for your PR.\nPlease see #338 #357 #585\n\nBut i think why not break BC?\n\n```\nenv('release_name', function () {\n    // Set the deployment timezone\n    if (!date_default_timezone_set(env('timezone'))) {\n        date_default_timezone_set('UTC');\n    }\n    return date('YmdHis');\n}); // name of folder in releases\n```\n\nIf break BC, i suggest:\n\n```\nset('timezone', 'UTC');\nenv('release_name', function () {\n    // Set the deployment timezone\n    if (!date_default_timezone_set(get('timezone'))) {\n        date_default_timezone_set('UTC');\n    }\n    return date('YmdHis');\n});\n```\n @coox \nI created PR #656 , you can review and confirm \"Is bug fixed ?\"\n @coox This feature may be available in Deployer 4.x .\n@elfet Can you make a feature issue about this feature.\nI think it may be:\n\n```\n$bin/dep releases\nRealease       | Time                        | Reversion\n---------------|-----------------------------|-----------\n20160501100000 | 10:00:00 May 01, 2016 (UTC) | 56abc52\n20160501100513 | 10:05:13 May 01, 2016 (UTC) | dde123f\n\n```\n  @tchapi I fixed this bug with #656 , please confirm\n  PHPUnit 5.4 require PHP 5.6+ and current it is beta\n PHPUnit 5.0+ require PHP5.6+\n  @cmodijk Thank you for the report, i created an issue, #720 \nAbout your problem, i think you should check running flow of tasks\n  Why not 2016-04-25_12:05:00?\n Easy read but not good for computer :smile: \n You can make a Datetime object from string `20160501200000` by `preg_match` .\nBut when you access folder `2016-05-01_20:00:00` via **ftp** or **http**, what is url you type? It not friendly.\nString `20160501200000` is easy for compare, it very important wit a version label.\n If you want easy for create a date time object, why you make a custom task `deploy:release` to make timestamp as version label :smile:\n @ju1ius \n\n## One\n\n```\n// If you're using\nDateTime::createFromFormat('Y-m-d_H:i:s.u', '2016-05-01_20:00:00.123456');\n\n// Why not?\nDateTime::createFromFormat('YmdHis', '20160501200000');\n```\n\n## Two\n\nUrl `http://example.com/2016-05-01_20:00:00/` is not friendly.\nTherefore, we often created **slug** by replacing `:` by `-`\n\n## Three\n\nCompare `20160501200000` as string faster `2016-05-01_20:00:00` \nCompare `20160501200000` as number (big integer) is good, but `2016-05-01_20:00:00` is not\n\n| Feature | Y-m-d_H:i:s | YmdHis |\n| --- | --- | --- |\n| Datetime::createFromFormat | true | true |\n| URL Slugged | false | true |\n| Compare as string | true | true, faster |\n| Compare as number | false | true |\n | Feature | Y-m-d_H:i:s | YmdHis | Ref |\n| --- | --- | --- | --- |\n| Human friendly | true | false |  |\n| Break BC | true | false |  |\n| Safe for other OS | false | true | [ref1](https://support.apple.com/en-us/HT202808) [ref2](http://xahlee.info/mswin/allowed_chars_in_file_names.html) [ref3](https://msdn.microsoft.com/en-us/library/aa365247) |\n| Safe for ZIP | false | true | [ref4](http://www.info-zip.org/FAQ.html#backslashes) |\n| Datetime::createFromFormat | true | true |  |\n| URL Slugged | false | true |  |\n| Compare as string | true | true, faster |  |\n| Compare as number | false | true |  |\n| Vote | :+1: | :-1: |  |\n\n:-1: \n  Cool. Does it working? :)\n  Cool, can yo\u0443 add some docs too?\nAnd what about php-ssh2 ext?\n  I think this can go to new Hot-To.\n  Yes. no nested calls. It's against deployer way. If you need it. Simple separate it to function.\n rsync?\n  I think if user ask to create release, it better to do it. \nThis functionality your can create your self for you.\n  We need to add comment right in bash to avoid this issue came again)\n  How are you trying to override task?\n To not display in console help.\n  \ud83d\udc4d \n  Try run this by hand: `git clone  --depth 1 --recursive -q git@bitbucket.org:ME/foo.git /srv/www/test/releases/20160417234518`\n  Hi,\n\nI'm really want to do this stuff. And https will be soon. \n\nBut what best way to work with checksums? md5? PGP?\n  ```php\r\ntask('deploy:writable')->onlyOn(['dev', 'staging']);\r\n```\r\n\r\nThis does not supported. %)\r\n  @elfet Please review and merge it (by button \"Squash and merge\")\n @garygreen \nYou can make `deploy.php`\n\n```\n<?php\n# deploy/php\n\nrequire 'recipe/common.php';\n\ntask('artisan:route:cache', function () {\n    $output = run('{{bin/php}} {{deploy_path}}/current/artisan route:cache');\n    writeln('<info>' . $output . '</info>');\n})->desc('Execute artisan route:cache');\n\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:shared',\n    'deploy:vendors',\n    'deploy:writable',\n    'deploy:symlink',\n    'cleanup',\n    'artisan:cache:clear',\n   'artisan:migrate',\n    'artisan:config:cache',\n    'artisan:config:cache',\n])->desc('Deploy your project');\nafter('deploy', 'success');\n\n// Your custom task and servers\n\n```\n  :+1:\n  It's looks like some one killing php exec on prod. Users are same?\n  Does it will be working without  `--force` at all?\n If `--force` is stand only for _non-interactive_, i think it's ok to force all the time (Better DX). \n `askConfirmation` it's always bad pattern in automation tools :(\n  What version of symfony?\n  Can you show an example? \n What's why:\n![](http://capistranorb.com/images/BashStartupFiles1.png)\n So you need ruby only on one command? `export PATH=$PATH:/usr/local/foo && ?`\n What is your solution?\n  True. Can you make PR?\n`curl -sS https://getcomposer.org/installer`  also this need to be fixed. \n  Yes, this command was copied from symphony docs, if they updated it, so can we. \n  Will look at this.\n Updated, try now.\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nWe need to fork https://github.com/kherge-abandoned/php-phar-update and related projects into deployer org. This projects does not supported any more. But we need to add support for Symfony 3.0 there.\n\nCan any body take this?\n @oanhnn what do you think?\n Yes :+1:\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | Yes `composer_command` |\n| Fixed tickets | #548 #607 #586 #606 |\n\nThis is my version of custom bins. Here an example:\n\n``` php\ntask('default', function () {\n    run('{{bin/php}} -v');\n    run('{{bin/git}} --version');\n    run('{{bin/composer}} --version');\n});\n```\n\nWhat do you think, guys? \n For now composer automatically downloaded too. If we remove this, may broke BC.\n Also it's downloaded via `https`, so risks a minimal. I think this behavior is good for developer experience, and we should keep it. You can always install composer manually to prevent downloading it.  \n :+1:\n @deployphp/maintainer merge? :)\n I think merge master to 4.x too :)\n  Agree. Maybe allow only to modify PATH?\n  Please show your output with debug mode (add option `-vvv` when run deployer).\nAnd i think you try:\n\n```\n$ ssh root@x.x.x.x 'git clone git@bitbucket.org:username/projetct.git /tmp/project'\n```\n > I can clone my project manually in remote server via git clone\n\nYour problem is ssh by password and git clone by key. When you ssh by deployer, your ssh agent may be not start and add your key. So that, i want you run below command:\n\n```\n$ ssh root@x.x.x.x 'git clone git@bitbucket.org:username/projetct.git /tmp/project'\n```\n Other option, you can switch to using private-public key or foward agent to ssh by deployer.\n > @oanhnn do want me to run \n> \n> ```\n> $ ssh root@x.x.x.x 'git clone git@bitbucket.org:username/projetct.git /tmp/project'\n> ```\n> \n> on my remote server?\n\n@mehrdaad Please run on your local machine (where you run deployer on).\n\n> Don't know so much about deployer. I would really appreciate if you could show me how to do that.\n\nDeployer document available on https://deployer.org and a example in [here](https://github.com/oanhnn/deployer-example.git)\n\n> @oanhnn when using deployer, directories are created so I conclude that ssh password for remote server is correct. \n> But I don't know how to configure git clone key on my remote server or on deployer. Would you give a hint about it.Tnx\n\nYes, i see. Deployer did ssh to remote server and create directory success. But when deployer run git to clone your project, it have error. This error is problem authenticate with github. You can't input username and password of github in this case. Because that, you have to [set deploy key for you project](https://developer.github.com/guides/managing-deploy-keys/) \n @mehrdaad Are you using?\n\n| Q | A |\n| --- | --- |\n| Local OS | Ubuntu OS 14.04 (Homestead) |\n| Remote OS | Ubuntu OS 14.04 |\n\nI will make a exmaple for you in tonight if i free.\n Okay, will create it today\n  This is a useful feature, but not it need be flexible. Eg:\n- If deployment script and source code are different repos.\n- Deploy from other machine, that is different with develop machine.\n\nI think it better if you write a tutorial post on http://deployer.org .\nLike http://www.slimframework.com/docs/tutorial/first-app.html\nWhat are you thing? @travisdoherty @elfet \n  @aschelch In my project:\n\n``` php\n/**\n * Clear cake_core_file_map in redis\n * Reload service\n */\ntask('deploy:end', function () {\n\n    within('{{deploy_path}}/current', function () {\n        // Stop resque workers\n        run('./Console/cake CakeResque.CakeResque stop -a 1');\n        $host   = env('redis.host');\n        $port   = env('redis.port');\n        $db     = env('redis.db');\n        $prefix = env('app.prefix');\n        // Clear cake_core_file_map in Redis\n        run(sprintf('redis-cli -h %s -p %s -n %s --raw keys \"%scake_core_file_map\" | xargs redis-cli -h %s -p %s -n %s del', $host, $port, $db, $prefix, $host, $port, $db));\n        // Clear app cache\n        run('./Console/cake cache clear -f 1');\n\n        // Start resque workers\n        run('Console/cake CakeResque.CakeResque start -q send_email -n 5 >> /dev/null 2>&1 &');\n\n        // Check status of serives\n        sleep(5);\n        run('Console/cake CakeResque.CakeResque stats');\n    });\n})->desc('Clear cache and restart services');\n```\n @aschelch In CakePHP v2.x, all paths of loaded files will saved in cache with key `<prefix>cake_core_file_map`. After your deploy, you may be need:\n1. stop PHP-FPM, CakeResque, ...\n2. clear cache in key `<prefix>cake_core_file_map`\n3. start PHP-FPM, CakeResque, ...\n\nIf not do that, your app may be run with old code (See content of this cache key).\n @aschelch I think this problem is when we run command start workers, it will fork to child progresses, and this workers will delay. If you not using background job (adding `&`) and using function `sleep()` to pause this progress, it will kill by this task finished.\n:smile: \n  I see, need more time for testing. \n What about creating new mechanizm for bins? Like PATH or something?\n `run('php ...');` Maybe some replace('php', '/...')?\n @nemoinho take a look at #608\n  :+1:  I agree merge this feature. It is OK.\n  @oisvidi Why not use `DEPLOYER_BIN` ?\n\n```\nif (defined(\"DEPLOYER_BIN\")) return;\n```\n @oisvidi If using constant `DEPLOYER` always is TRUE, it mean deployer alway loaded success?\nI think deployer only is loaded success when constant `DEPLOYER_BIN` is defined.\n\nIf you using a constant `DEPLOYER` only for your customized autoloader, i think we will merge this PR.\n > it just means DEPLOYER is the application running. The value is irrelevant for that purpose.\n\nIf not loaded `autoload.php`, DEPLOYER = true but DEPLOYER_BIN is undefined and application not running. So that, what is you want check?\n > I think some legacy code may load at this point:\n> \n> ```\n> require $file;\n> ```\n\n@elfet  Is your mean?\n\n```\nif (!defined('DEPLOYER')) {\n    require '/path/to/vendor/bin/dep';\n}\n```\n\nIf that, why not using `require_one` ?\n  :+1: Can you make issue template ?\n Thank!\n  @mehrdaad \nYou can follow steps:\n1. Make your local machine to git server, it is may be access from your remote machine\n2. `set('repository', 'git@your-local-machine:org/app.git')`\n3. run deployer\n\nhttps://git-scm.com/book/en/v2/Git-on-the-Server-Setting-Up-the-Server\nhttps://www.linux.com/learn/tutorials/824358-how-to-run-your-own-git-server\n  :+1:  \nThis is great way to resolve this problem. But deploy user not always has group www-data.\nI think it is a special case, you should write a blog or Wiki. We will insert link in document of Deployer.\nWhat are you think? @elfet \n Thank @nemoinho , I will check it.\n  @dexbarrett @philbates35 \nPlease show a part of your `deploy.php` file. It may be help me to reproduce this issue.\n @dexbarrett Thank for your `deploy.php` file\nI think it may be one of the following cases:\n1. You using `chmod` to set permissions writable, after that, `www-data` user (`apache` user) make log  and cache files with its ownership. If that, you need sudo to change permissions. This way is not recommaned.\n2. When task `deploy:shared` run, it make symlinks. After that, task `deploy:writable` run, it only change permission of symlink. If that, you should change setting `shared_dirs` and `writable_dirs` . Eg.\n   \n   ```\n   // Laravel shared dirs\n   set('shared_dirs', ['storage', 'public/images', 'public/game', 'public/api']);\n   // Laravel writable dirs\n   set('writable_dirs', ['storage', 'bootstrap/cache']);\n   ```\n > give the write permissions to the folder the symlinks point to (in this case, the shared folder that Deployer creates)\n\nRight\nBut in my server (using `setfacl`), it running with script:\n\n``` php\n// Laravel shared dirs\nset('shared_dirs', ['storage', 'public/images', 'public/game', 'public/api']);\n// Laravel writable dirs\nset('writable_dirs', ['storage', 'bootstrap/cache']);\n```\n\nI will debug this issue when i have more time.\n  Thank for your report!\n  Like #556 \n  You muck config `sudo passwordless` for deploy user.\nAfter that, make a task like restart php_fpm and run it after deploy finished.\nhttps://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=sudo+passwordless\n  Thankyou!\n\n> Make PR follow [Contributing document](https://github.com/deployphp/deployer#contributing)\n  Sorry, Deployer haven't this feature yet.\n  Currently, version 4.x is developing and never release.\nWe will publish download link when release a version 4.x.\nNow, you can build 4.x phar file yourself.\nhttps://github.com/deployphp/deployer#building\n  I think it is ok and will be better if you can rebase it :smile: \nI will merge it after @elfet confirm.\n  I am agree with @cronfy :+1: \n  Task may be a callable\n\n```\ntask('task1', function() {});\ntask('task2', 'functionname');\ntask('task3', 'NameSpace\\\\ClassName');\ntask('task4', new Object());\ntask('task5', [$object, 'methodName']);\n```\n I implemented this feature in https://github.com/oanhnn/deployer/tree/feature-task-may-be-callable\nChanged:\n- Task may be defined from a callable\n- Task group be defined by function `taskGroup`\n I will add more test cases before make a PR. :smile: \n Merged!\n  You should using file deployer.phar and shouldn't require deployer in composer.json.\n  :+1: Thank @alaczi \n@mbrodala , please try:\n\n```\n<?php\n\nrequire 'recipe/common.php';\n\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:symlink',\n    'cleanup'\n]);\n```\n  @seanw Sorry, current task `deploy:update_code` in `recipe/common` not support commit hash.\nPlease custom this task or create a branch for your commit hash.\n  @elfet What are you think about \"Task may be object\"?\nIt will be extended easily !\n  Because we found better solution: custom bin. Will be in next release.\n  This is test for `chmod` command only. It is not error.\n  Did you try?\n\n```\nset('repository', 'file://repo/site.git'); \n```\n  Please edit comment and prepend table \n\n| Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | n/a |\n\nMigartion should be executed without option `--force`\n It's possible, but what happens if you run `php artisan migrate --force` if there no migrations?\n Do we need `deploy:migrate` in `deploy` task?\n  What's different?\n\n```\n$ setfacl -R -m u:\"www-data\":rwX -m u:`whoami`:rwX tmp\n$ setfacl -dR -m u:\"www-data\":rwX -m u:`whoami`:rwX tmp\n```\n\nVs\n\n```\n$ setfacl -R -m u:\"www-data\":rwX g:deployers:rwX u:`whoami`:rwX tmp\n$ setfacl -dR -m u:\"www-data\":rwX  g:deployers:rwX u:`whoami`:rwX tmp\n```\n\nWe need document and more test cases.\n\n```\n$hasfacl = run(\"getfacl -p $dir | grep \\\"^user:$httpUser:.*w\\\" | wc -l\")->toString();\n```\n  @ihsanudin In a lot of cases, users installed `composer` global with root user ( using sudo ), this PR will be error. I think the update `composer` is customized by individual. \n @ihsanudin Using `sudo` to update `composer` and make writable dirs are two problem different. You can't using same config. I think **the updating composer task have do manually**.\n@elfet I think this PR should be closed.\n  Deployer really supported Git tags.\nPlease try:\n\n```\nserver('dev-svr', '192.168.1.3', 22)\n    ->user('dev')\n    ->stage(['dev'])\n    ->env('deploy_path', '/var/www/apps/slim')\n    ->env('branch', '1.0.2');   // for tag 1.0.2 \n```\n This feature make `-b` option. And on git clone help:\n\n```\n--branch <name>, -b <name>\n           Instead of pointing the newly created HEAD to the branch pointed to by the cloned repository\u2019s HEAD, point to <name> branch instead. In\n           a non-bare repository, this is the branch that will be checked out.  --branch can also take tags and detaches the HEAD at that commit\n           in the resulting repository.\n```\n  `.env` is configure file in laravel 5.0+. It like `parameters.yml` in symfony 2.\nI think it should be shared between deployed versions.\n In a lot of cases, you can't modified environments (sharing host). .env is solution.\nIf you don't want use it, you can using an empty `.env` file.\n  In a lot of cases, you can't modified environments (sharing host). `.env` is solution.\nIf you don't want use it, you can using an empty `.env` file.\n @badconker Using `.env` file is safe for other applications. If set environment variables in `/etc/environment` or `~/.bashrc`, ... then other applications (other Laravel app, bash or a progam, ..) can parse it as environment variables for them. You will more difficult to control that.\n\nOther option, use `SetEnv` in apache and `fastcgi_param` in NGINX to set environment variables in virtual host configure. You can search on Google.\n  I think comment of @elfet is answer for you.\n Yes, It is implemented.\nYou can try:\n\n```\nphp deploy.phar deploy dev -vvv\n```\n\nSee more in end of page http://deployer.org/docs\n\n> If you want to see exactly what deployer does on you server, then just run it in a more verbose mode: $ dep deploy -vvv.\n Uhm, Do you mean like `gulp`, output show duration of task?\n\n```\n$ gulp\n[09:10:06] Using gulpfile /var/projects/oanhnn/slim-skeleton/gulpfile.js\n[09:10:06] Starting 'build'...\n[09:10:06] Starting 'clean'...\n[09:10:07] Finished 'clean' after 813 ms\n[09:10:07] Starting 'jshint'...\n[09:10:10] Finished 'jshint' after 2.44 s\n[09:10:10] Starting 'create:dir'...\n[09:10:10] Finished 'create:dir' after 553 \u03bcs\n[09:10:10] Starting 'build:sass'...\n[09:10:13] Starting 'build:css'...\n[09:10:13] Starting 'build:js'...\n[09:10:14] Finished 'build:js' after 819 ms\n[09:10:14] Finished 'build:css' after 824 ms\n[09:10:14] Finished 'build:sass' after 4.51 s\n[09:10:14] Finished 'build' after 7.77 s\n[09:10:14] Starting 'default'...\n[09:10:14] Finished 'default' after 4.58 \u03bcs\n```\n\nAnd we will have output:\n\n```\n$ dep deploy dev\n[09:10:06] Using deploy file /var/projects/oanhnn/deployer-example/deploy.php\n[09:10:06] Starting 'deploy'...\n[09:10:06] Starting 'deploy:prepare'...\n[09:10:07] Finished 'deploy:prepare' after 813 ms\n[09:10:07] Starting 'deploy:release'...\n[09:10:07] Finished 'deploy:release' after 553 \u03bcs\n[09:10:07] Starting 'deploy:update_code'...\n[09:10:14] Finished 'deploy:update_code' after 7.77 s\n[09:10:14] Starting 'deploy:shared'...\n[09:10:14] Finished 'deploy:shared' after 4.58 \u03bcs\n```\n  See more #322 & #506 \n  Yes. Sorry, it is tmp class. I am committed incorrect. I will removed it.\n  @nadar \ncomposer global install and global require package is running once time. I think you should create a custom task do it yourseft.\nGood luck. \n  Thank you!\n  Please eidt message like\n\n| Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n We have 2 ways:\n1. Only a recipe for framework and using `set('symfony_version', 3.0)` or `set('laravel_version', 5.1)` to switcth configure options. Default version variable is LTS version or last stable version. With this way, recipe have to cover more cases.\n2. Using framework+version to save recipe (Eg: `symfony_2`, `symfony_3`, `laravel_5.1`). With this way, recipe is simple but number of recipe is more (Eg: `laravel_4`, `laravel_5.0`, `laravel_5.1`, ...)\n\nI think we can use configure resolver by version of framework.\n > What to do if framework very different? Like symfony 1 and 2?\n\nTwo version are very different but i think deployment are same, only different about: shared_dir, shared_file, wriable_dirs and migration command.\n\n> Note: old version of frameworks (not support composer) are very different. Should we support them?\n  Current, Deployer support symfony 2.x as default.\nIf you want switch to symfony 3.0, you can modify recipe follow http://deployer.org/docs/recipes\n\n```\nset('shared_dirs', ['var/logs']);\nset('writable_dirs', ['var/cache', 'var/logs']);\nset('bin_dir', 'bin');\nset('var_dir', 'var');\nafter('deploy:vendors', 'database:migrate');\n```\n @pierredup \nCurently, Deployer had supported Symfony 3.0 yet, but it not default (because at that time, symfony 3.0 is not stable).\nPlease see docs before make issue.\nhttp://deployer.org/docs/recipes\nWe can make it to default.\n @elfet What are you think about making recipes with framework and version?\n  Your can try run `whereis npm` and show path to npm ?\nAfter that, use it instead 'npm' command.\n\n```\nrun(\"cd {{release_path}}/app && /usr/bin/npm install\");\n```\n I think this problem are:\nhttp://capistranorb.com/documentation/faq/why-does-something-work-in-my-ssh-session-but-not-in-capistrano/#\nhttps://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html\n  1. Apache user (www-data) haven't environment variable `SSH_AUTH_SOCK`.\n   You can check by command\n   \n   ```\n   $ echo mysecretpass | sudo -u www-data -S ssh deploy_user@hostname\n   ```\n2. I see your command `dep magento` is missing stage arguments.\n   \n   ```\n   $ dep magento <stage>\n   ```\n3. Please show your configure `deploy.php`, version of Deployer and output of command:\n   \n   ```\n   $ dep magento <stage> -vvv\n   ```\n As i think, your `www-data` user can't ssh to server as forward agent.\nCan you try command:\n\n```\n$ sudo -u www-data -S \"ssh-add -l\"\n```\n\nPlease setting up your `www-data` follow this document:\nhttps://github.com/oanhnn/deployer-example/blob/master/docs/setting-up-and-add-a-deployer-user-to-ec2.md\nhttps://github.com/oanhnn/deployer-example/blob/master/docs/enable-feature-ssh-forward-agent.md\n ```\neval \"$(ssh-agent -s)\"\nssh-add /home/user/.ssh/key.pem\n```\n\n:+1: \n  why are we need this feature?\n Yes. Can you add a PR to [document](https://github.com/deployphp/docs) about this feature ?\n Thank you!\n  You try by your terminal and show result to here?\n\n```\n$ ssh -T deploy-user@hostname\n```\n Yes. Deployer supported this feature.\nIf using password failure, you can try with public key or forward agent.\nGoodluck!\n  This issue is discussed in #245 \n  Thank you! Please edit your comment for this PR follow this format!\n\n| Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | no |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n Thank you!\nNow deployer support Laravel 5.1+ :beers: \n I think we should follow Laravel 5.1, because it is LTS. :smile: \nThis means Laravel team recommend users using this version. And we should support it.\n  You can use:\n\n```\n   server('dev-svr', '192.168.11.3', 22)\n       ->user('dev')\n       ->env('branch', 'master');\n```\n\nI am using mobile, please see more in [here](https://github.com/oanhnn/deployer-example)\n  You can try:\n\n```\ntask('task1', function(){\n    run('something you want to do');\n});\ntask('task2', function(){\n    run('another thing I want to do');\n});\ntask('my_task', [\n    'deploy:prepare',\n    'deploy:release',\n]);\nafter('deploy:prepare', 'task1');\nafter('deploy:release', 'task2');\n```\n\nGood luck!\n  Thank you!\n  Thank for feedback.\nBut, current absolute symlinks are working with me and more people. I don't think problem is absolute or relative. Your apache config may be have a incorrect. Can you post a example to here?\nWhen change from absolute to relative, it may be have other problem. Did you test that enviroments ? (NGINX, APACHE share host or not, ... )\n @nakashu \nCan you try:\n\n```\n/path/to/home/my.domain.com/web/.htaccess         <== file htaccess 1\n/path/to/home/my.domain.com/web/current/.htaccess <== file htaccess 2\n```\n\n```\n# file htaccess 1\nOptions +FollowSymLinks\nRewriteEngine on\n\nRewriteRule ^(.*)$ /current/$1 [L]\n```\n\n```\n# file htaccess 2\nOptions +FollowSymLinks\nRewriteEngine on\n\nRewriteBase /\n```\n Ok. You can make PR and we will make discussion about it. I think this is a problem of config apache.\n  | Q | A |\n| --- | --- |\n| Bug fix? | yes |\n| New feature? | no |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | #490 |\n\nThis PR fixed Travis CI build fails follow @MaartenStaa suggestion in #490 \n  Thank you!\n  Thank you!\n  Currently, deployer only support only authentication method at the same time.\nIn your case, when call `->forwardAgent()`, authentication method is set to `Configuration::AUTH_BY_AGENT` and it wont using password method.\n\nNow, you should use public key method and forward agent. Good luck!\n  Thank you! Please edit your comment for this PR follow this format!\n\n| Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | no |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n  @bengitiger  Please try with `deploy.php` file:\n\n```\n<?php\nrequire 'recipe/symfony.php';\n\nserver('prod', '192.168.10.193', 22)\n        ->user('bengi2')\n        ->password('******')\n        ->env('deploy_path', '/home/bengi2/www')\n         ->stage(['dep', 'prod', 'stage', 'dev']);\n\ntask('my_task', function () {\n    upload('.', '/home/bengi2/www');\n    write('Deploy done!');\n})->desc('Doing my stuff');\n```\n  Thank you for report issue.\nYou can use `deployer.phar` to work with symfony 3.x\nWe will fix this issue as soon as possible.\n 1. This problem only user add Deployer to Symfony project. Current Deployer don't support this work (maybe have conflict function name). We waiting Deployer v4.0\n2. I will testing and release new version on this weekend. Now, i haven't free time. If any @deployphp/maintainer have free time, please do it. ;)\n You can use deployer.phar to work with symfony 3.x\n  You can find it in [here](http://deployer.org/docs/tasks)\nOr using `bin/dep --help`\nIf you have any more question, you can join [gitter.im](https://gitter.im/deployphp/deployer?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge) to be supported\n  Fixed with #501 \n  :+1: \n  Why not using `alias php='/opt/php54/bin/php'`?\n Then try `env('php', '/path/php')` and then use: `run('{{ php }} ...')`.\n  Hi! \nYes, it's true. PhpSecLib does not support this method for now. But it's really easy to implement. Any body can implement this? @obstschale I can't to implement myself it right now, i need to make money for living now) \n  Why?\n You can simple override needed tasks, like deploy:***\n  Try to ask on gitter - may be some can help you there. \n  @deployphp/maintainer can any one update this? Really need help at this.\n Yes! Send PR. It is really cool!\n\n> 18 \u043d\u043e\u044f\u0431. 2015 \u0433., \u0432 10:03, Maxime Pelletier notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> That Laravel recipe has a few bugs, like a missing 'deploy:writable' task in the main deploy task and I disagree with the shared dirs. It's also lacking many features to run migrations, refresh the caches, etc. I will probably send a PR if nobody beats me to it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n  Can you create PR for docs?\n  Same as branch?\n  Hi,\n\nI'm planning to create functionality like this in Deployer v4. It will be using event system. \n\nBut now i haven't mach time to work on Deployer v4.\n  I think we does not nee\u0432 another tool which will copy composer functionality. \n But you can do all this staff with composer right now! `--global` option.\n  Bug in PhpSecLib?\n  This is good idea! We need API for removing  tasks.\n  That's was in Deployer v1. A long time ago. \ud83d\uddff\n  Hmm. May be as alternative syntax? We need simple API.\n What the interface?\n ? What the interface?\n\n``` php\ninterface Recipe {\n  ???\n}\n```\n First example it\u2019s looks more like Server.\nSecond, obviously bad idea. \n  Yes!\n  You can combine them in one common stage.\n  I don't this what it is save. What do you think?\n Do you ask password on sudo?\n So every body can delete files from sudo as root?\n  Yes.\n Yes, via custom tasks.\n  Yes! Absolute! Use env vars.\n ```\nserver('myServer', 'example.com', 22)\n    ->stage('production')\n    ->env('branch', 'master');\n\nserver('myServer2', 'example.com', 22)\n    ->stage('staging')\n    ->env('branch', 'develop');\n```\n\nLike this?\n You can do all of this things right now. But you need to copy server.\n ``` php\nserver('myServer', 'example.com', 22)\n    ->forwardAgent()\n    ->user('myUser')\n    ->stage('production')\n        ->env('branch', 'master')\n        ->env('deploy_path', 'var/www/production')\n\nserver('myServer2', 'example.com', 22)\n    ->forwardAgent()\n    ->user('myUser')\n    ->stage('staging')\n        ->env('branch', 'develop')\n        ->env('deploy_path', 'var/www/staging');\n\nserver('mySecondServer', 'example.com', 22)\n    ->forwardAgent()\n    ->user('mySecondUser')\n    ->stage('production')\n        ->env('branch', 'master')\n        ->env('deploy_path', 'srv/www');\n```\n  Nice!\n  Great! I'll merge. @deployphp/maintainer ?\n Any contributions are welcome \n\n> 6 \u043e\u043a\u0442. 2015 \u0433., \u0432 2:29, Jad Bitar notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> Thanks! Were you pinging the rest of the team or inviting me to join the maintainers (to take care of this one only)? Sorry if I misunderstood and thanks again for merging!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n  Please review the guidelines for contributing to this repository.\n  I think users will install Phalcon like this: https://docs.phalconphp.com/en/latest/reference/install.html#linux-solaris\nAfter that `common.php` or `composer.php` will be good start.\n  With FTP you can only upload and download files. You can not execute commands on remote server. \n\nYou can run Deployer locally, and do not execute commands on remote server with `run`, and only describe tasks for local execution (FTP upload, rsync, etc). \n\nBut main purpose on Deployer is to run on remote servers.\n  What about create a task for invalidating OPCache? \nI think this is will be killer feature! \nTake a look:\nhttp://php.net/manual/ru/function.opcache-reset.php\nhttp://ihaveabackup.net/2013/10/19/invalidating-the-opcache-in-php-5-5/\n\nHow want to implement this awesome stuff? \n True!\n  Hmm, does work with standard Laravel? \n Great!!! I think merge? But with docs it will be 200% more cooler!\n  @elfet Please merge :smile: \n  We really need to implement native ssh client for Deployer 4.0. I can do it by myself, but it needs time....\n  Cool! Thanks!\n  Cool! Thanks! \n\n:heart: this:\n![2015-09-07 18 16 08](https://cloud.githubusercontent.com/assets/141232/9715648/90ab23aa-558c-11e5-909b-bc2e42e2f041.png)\nEvery one should you it. \n  Please, show your deploy script and output of command with `-vvv` options.\n Looks like bash does not available. Try manually run this command and check ssh user.\n Ok  Ok, i'll merge this :)\n @oanhnn may be it's time for new release? :eyes: \n  Thankyou!\n  Agree.\n PR?\n  Please show your version of Deployer, PHP and log from deploy command with debug option `-vvv`\n  This PR has some issues:\n- This code dose not care `user:www-data:r--` or `user:www-data:rwx`. It alway return a number greater than 0.\n- This code dose not care user `www-data` (apache user) and user `www-data2` (other user)\n- If `setfacl` is exist with group ??? \n\nAnd one issue of Deployer:\n- Check deployer user and apache user is same user :smile: \n Thank you!\n  What is Deployer version?\nPlease try with last version (3.0.9).\n  Sorry @torinaki ,\nThis is an important issue, it introduces error in version 3.0.7 and 3.0.8.\nI want to merge this PR without adding tests (all tests will be reviewed by @elfet or other maintainer).\nPlease split this PR to two PR:\n- fixed default timeout value\n- adding tests\n  Thank you!\n  @amsolucionesweb We need more information to reproduction this error.\nI think connection was lost by timeout, it same problem of @AlexStansfield in #429 \n  I created a new release. @torinaki @AlexStansfield , Please test again!\n  Thank you! :+1: \n  You can using `shared_dirs`:\n\n```\nset('shared_dirs', [\n    'web/upload',\n]);\n```\n\nhttp://deployer.org/docs/recipes\n  @jakenoble \nCan you show your `composer.json` file?\n  :+1: This is bug\n  Try to use phpseclib ssh client instead. Or support Deployer 4 development which will have native ssh support.\n  @dima-stefantsov this issue is out of date.\nYou can make a new issue if you have problem.\nPlease show me your enviroment.\nCurrent i am using forward agent success on windows (git bash + ssh-agent).\n  I think we need to investigate how to do it best.\nping @deployphp/maintainer\n symfony.php has it\u2019s own setting list. May be add it there?\n  Eaahh. It is... I know... Can anyone with Windows make PR with just text instead of emoji and utf-8 (\u267b\ufe0f)? \n  Cool!\n  Cool! Need to code review and test it. \n@deployphp/maintainer please, help!\n I dont think what is good to setup this server wide. Its better to specify timeout on run:\n\n``` php\nrun(\u2018\u2026\u2019, 360);\n```\n I think global config here is bad decision.\n I think yes :)\n Ok, i'll test this PR to merge. Need some time.\n  @deployphp/maintainer lets tests and discuss this :)\n Pleas fix code style. @ZhukV #407 \n Cool! Can you write a doc about it feature?\n Ping @elfet  @deployphp/maintainer \n  This is really disputable feature. We need really discuss this before merging. (and test parallel execution)\n@deployphp/maintainer do we need a vote on this feature?\n  You can specify `onlyOn`.\n  Agree with @oanhnn. \n But that PR is hang out. May be you can fork this PR, fix suggestion and create your own PR baser on that? @davidkudera?\n Cool!\n  I think it's better to allow strings. \nI vote to merge!\n@deployphp/maintainer what do you think?\n I think it can prevent some developers from errors:  `->onlyOn('dev');` \nEven it will complicate it a little bit. \n@davidkudera you not agree? I'm thinking to merge it. \n  You can set dumping by onlyOn on prod server.\n `runAt` pretty much `onlyOn`.\n What do you mean? Can you show example?\n You need understand what task you running on which server. What you suggest to avoid this?\n I understand, but this is really complicate Deployer itself =) \nIt's better to configure your scripts to avoid this problems. \n  Add `dep init` command which generate `deploy.php` file from template. \n\n```\ndep init [template=symfony|composer|common]\n```\n Please, create a separate branch on this repo.\n Hmmm. My deploy script:\n\n``` php\n<?php\nrequire 'recipe/symfony.php';\n\nserverList('app/config/servers.yml');\n\nset('repository', 'git@github.com...git');\n\ntask('reload:php-fpm', function () {\n    run('sudo /usr/sbin/service php5-fpm reload');\n});\n\nafter('deploy', 'reload:php-fpm');\n```\n  Cool feature! Can you add some tests?\n  This is good idea! Add `dep init` command.\n  Cool stuff! Really awesome improvement! @deployphp/maintainer what do you think? \n\n``` php\n $formatter = \\Deployer\\Deployer::get()->getHelper('formatter');\n\n                $errorMessage = [\n                    \"Unable to setup correct permissions for writable dirs.                  \",\n                    \"Server not configured for chmod ACL or setfacl.                         \",\n                    \"You can set permission_method to chmod_777 but we advise only as a last \",\n                    \"resort as it gives read/write permissions to every user.                \"\n                ];\n                write($formatter->formatBlock($errorMessage, 'error', true));\n```\n\nYou can simple throw an exception. This will stop deployment process. I think we need put in docs, can anybody do this?\n  Can you make PR for this?\n Cool, thanks!\n  Awesome! Can you add docs for this too?\n  Cool, thanks!\n  Please run deployer with `-vvv` option.\n  Great, but you need to get rid of entire `drupal7` dir. yaml? Use Symfony Yaml Component.\n @sergiocarracedo I think task `drupal:setings` should be instead of task `deploy:configure` in `deployphp/recipes`. And we will write a manual for users.\n  Can anyone add docs about `-f`? :sunglasses: \n  Copy `common.php` recipe and rename current to what you want)\n  Yes! This is cool feature. Must have!\n Monolog is a great idea!\n  Which ssh implementation do you use? \nTry to use \"deploy keys\".\n Here is my working configurations with [oanhnn/deploy-example](https://github.com/oanhnn/deployer-example.git):\n\n```\n#####\n# Local: Ubuntu 14.04\n# OpenSSH_6.6.1p1 Ubuntu-2ubuntu2, OpenSSL 1.0.1f 6 Jan 2014\n# PHP 5.5.9-1ubuntu4.11 (cli) (built: Jul  2 2015 15:23:08)\n# file ~/.ssh/config on my PC\n#####\nHost github.com\n  PreferredAuthentications publickey\n  ForwardAgent yes\nHost 192.168.1.3\n  ForwardAgent yes\n```\n\n```\n#####\n# Remote: CentOS 6.5\n# OpenSSH_5.3p1, OpenSSL 1.0.1e-fips 11 Feb 2013\n# PHP 5.5.19 (cli) (built: Nov 16 2014 09:53:48)\n# file /etc/ssh/sshd_config on my server\n#####\nProtocol 2\n\nSyslogFacility AUTHPRIV\n\nPubkeyAuthentication yes\nAuthorizedKeysFile      .ssh/authorized_keys\n\nPasswordAuthentication yes\n\nChallengeResponseAuthentication no\n\nGSSAPIAuthentication yes\nGSSAPICleanupCredentials yes\n\nUsePAM yes\n\n# Accept locale-related environment variables\nAcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES\nAcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT\nAcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE\nAcceptEnv XMODIFIERS\n\nAllowAgentForwarding yes\nX11Forwarding yes\nClientAliveInterval 120\nClientAliveCountMax 5\n\nSubsystem       sftp    /usr/libexec/openssh/sftp-server\n```\n  What about users who using 5.0?\n  Look like bash does not available on your remove server. %)\n  Cool! Thanks! Can you update docs too?\n@deployphp/maintainer check this out!\n  Does `ext-ssh2` support it?\n  @deployphp/maintainer this is really requested feature. We need to think how is better to bring it.\n  Cool! But why you need it?\n @piotrekkr what about using `option` func instead of `getopt`?\n Cool! :)\n  Cool! Can you add docs?\n  @deployphp/maintainer what you thinks about this PR? Can anybody test it?\n One issue: https://scrutinizer-ci.com/g/deployphp/deployer/inspections/e0dc283a-1aac-48e5-b007-68b349f9bdb1/issues/files/recipe/common.php?status=new&orderField=path&order=asc\n  Hi!\nA lot changed since v2.\nEither you should use deployer v2.0.2, or you should update your configurations for v3.\n Each. It's a bug with file names on Windows.  Need replace all `\\` to `/`.\n@deployphp/maintainer can anyone take care of this?\n  What of version was supporting this? :)\n  `working_path` for `cd` and `run` functions. \n`deploy_path` for common.php recipe.\n Please provide you deploy.php file/\n  This is a way of bugs %) \nWhy you need this functionality? \n  You can specify password to `null`:\n\n``` php\nserver('prod', 'HOST', 22)\n     ->user('USER')\n     ->password(null);\n```\n\nAnd you will be asked for password.\n\n@ZhukV can you add docs about this functionality?\n  Why we need this? :smiley:  \n This is more readable:\n\n``` php\n     /**\n      * Input definition for user specific arguments and options.\n      *\n      * @var InputDefinition\n      */\n```\n\nwhen this:\n\n``` php\n     /**\n      * Input definition for user specific arguments and options.\n      *\n      * @var \\Symfony\\Component\\Console\\Input\\InputDefinition\n      */\n```\n It could not be **anything**!  In you code you use `InputDefinition`, and not expect this to be anything? Same in phpdocs. \nPhpStorm fully supports this, by the way.\n This isn't about IDEs (which may or may not use static code analysis especially because PHP is not strongly typed), it's about reading and writing code, it's for humans.\n\nIMHO if you are `use`'ing a class or a namespace you should be able to use it on the doc block (without a FQN), if you do not `use` it the, you should definitely use the FQCN in the doc block.\n\nLets get a vote (or @elfet decides for all of us) to this and get this over with, there's no point in arguing, because humans tend to have different opinions, and that's ok. That's why PSR1&2 were done, to have a common way to write and style code so that we humans can interact with it better, faster and less annoyed.\n @gordalina lets do a little vote :+1: \n Vote for:\n\n1) Use FQCN in doc block if class isn't `use`d, or just class name if it is `use`d\n2) Always use FQCN in doc block\n\nI vote for 1.\n I did some google-ing before answering the question.\n- First of all, when I'm in doubt about standards / best practices, I always consult the Symfony github repo, where I found that the Symfony code [seems to use FQCNs](https://github.com/symfony/HttpFoundation/blob/master/Request.php#L203).\n  I think this weighs a lot here, since Deployer uses a lot of Symfony Components.\n- Another answer I found quite convincing: https://github.com/squizlabs/PHP_CodeSniffer/issues/325#issuecomment-63166037\n- Also: I do agree with @GrahamCampbell, [IDEs should not factor in the decision at all](https://github.com/deployphp/deployer/pull/370#issuecomment-113225127).\n  (I usually just use Sublime Text, Atom or Vim, for example.)\n- And I also agree with @lucasmichot here: https://github.com/deployphp/deployer/pull/370#issuecomment-113213742\n\nHence, due to the reasons above, I'm voting for **option 2**.\n  :+1: \n Again: why we need this? \n I would vote for a cs fixer, see why: https://github.com/deployphp/deployer/pull/370#issuecomment-113318748 (3rd paragraph)\n isn't there any CI that validates a PR with cs fixer? \nthat would force correctness for all new code :smile: \n @GrahamCampbell does it notify the PR that its valid/invalid?\nFor example, this PR has no info from StyleCI\n Awesome then!\nThen ignore all my comments, as everything was setup before i've opened my mouth.\n  :+1: \n :+1: \n  :+1: \n  :+1: \n :+1: \n Maybe remove HHVM?\n Reasons?\n Does Deployer can be run on HHVM? \nTake a look to Travis-CI - all hhvm build are failing.\n Well, it's hard to tell whether it would be easy to fix it or not.\nBut there's no harm in leaving it there, so I would leave it as it is for now, someone could always fix it. :)\n exactly\n  Cool\n  cool :+1: \n Added it to the readme, thanks for the PR :)\n sh1t\n\n**Edit**: fixed ><\n  :+1: Editorconfig ftw\n So cool! \n @GrahamCampbell got 500 error on styleCI =)\n I tried this myself, and I got 500 error too.\nThere's a default setup though, so having the config file should not be mandatory, it shouldn't cause a 500 error.\n\nFor me the solution was, to first visit the \"account\" page, where I could enable the service for one of my repos, and after I got at least one, the /repo page rendered properly.\n\nThat aside, I also think we should add the `.styleci.yml` file added in #362.\n  @uran1980 raised this question on the recipes repo.\n\nIt is an important step having a migration from an accepted and widespread tool to deployer, this will allow deployer to gain new users with the least amount of friction.\n\nI'm not versed in capistrano, it would be nice if someone with experience with capistrano can write a migration process.\n I have experience with [Capifony](http://capifony.org/), so I might be able to write something, but it would took some time, since there would be a lot of testing involved.\n @ZeeCoder what's will be awesome! I think we need how-to's for than on deployer.org.\n Even though I agree, that Deployer is easier and migrations is very easy, I still think, that the more such tutorials we have, the better.\nIf I'm a developer that never used Deployer before, I could be intimidated by the task, since I don't know the tool well enough.\n\nAlso, if I'm searching for a deployment tool as a developer, and I see that Deployer supports a myriad of frameworks with detailed explanations of the recipes, **and** it has tutorials about migrating from other tools, I would certainly be chosing Deployer over others.\n @ihsanudin @johnny-bit Those are both good ideas, I think we don't have to chose between these, we could just start writing all kinds of documentation. :)\nOf course, the website has to be updated then slightly, so that it would stay clean, but at the same time the user should be able to navigate between the documentations easily.\n Great documentation is a major contribution for the popularity and adoption of open source software.\nIt's one of those things that more you have, the more advantages you have.\n @johnny-bit tutorials for 3rd party recipes, especially for custom workflows are really important!\n  Let's define a clear release process for deployer!\n\nHere are some questions that were raised:\n1. Avoid breaking BC in minor or patch releases\n2. Introduce a UPGRADE file for end-users to see what was updated and how can they migrate their deploy scripts easily. This should contain NON BC-BREAKING changes for minor and BC-BREAKING changes in major version upgrade (3.x -> 3.x+1 and 3.x -> 4.0).\n3. Introduce a CHANGELOG file for documenting patch releases. This can be done with a script that reads the `git log` output (this means that PR's should be [squashed](https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History#Squashing-Commits) into one commit only).\n4. Require PR's to have a matching documentation PR\n5. Process to merge fixes for the lowest supported release (merge fixes to 3.0, merge new features to 3.1) when a fix is merged to 3.0, the 3.0 branch can be merged to 3.1.\n\nPing @deployphp/maintainer \n :+1: for pretty much everything\n Just leaving here Symfony's BC Promise http://symfony.com/doc/current/contributing/code/bc.html\nWe should adopt something like this\n @gordalina :+1: \nCan you write this to https://github.com/deployphp/deployer/blob/master/CONTRIBUTING.md\n  :+1: But I think PR's like this should come with a PR for docs as well.\n Once again I agree @gordalina, there are so much changes it's hard to keep track.\nDocumentation should be as up-to-date as possible.\n  Should Deployer use namespace for functions in `functions.php`?\nTo protect from overriding when installed via Composer with Laravel.\nIn recipe can be used in two ways:\n\n``` php\nuse function Deployer/task;\n```\n\nor\n\n``` php\nnamespace Deployer;\n```\n\n@deployphp/maintainer what do you think?\n If you use `use function` you'd have to import all functions (not only `task`). So i'd go for `namespace Deployer`.\n\nAlso, if this is to be implemented, i'd suggest in 4.0, per [semver](http://semver.org/) compliance. Lets not break API in minor updates.\n I already wrote a couple of times how I'm a bit troubled by the \"global\" way Deployer sometimes handles things, so I'd back any solution.\nOn another note: I agree with @gordalina here, the idea is good, but it's hard to see whether it could be achieved in a non-BC-breaking fashion.\n @ZeeCoder I don't think it's achievable in a non-BC-breaking fashion, and I'm ok with that, **if and only if**, there's a proper versioning scheme (such as semver) and documentation for it.\n My thoughts exactly\n So you think go for v4.0?\n For certain features, like this one, yes imho.\n Well, lets release 4.0! Also i have 100% awesome feature for this release. :fork_and_knife:  :fork_and_knife:   :fork_and_knife:   :fork_and_knife: \n Is there any other way to fix deployment of laravel apps?\nOn qua, 17/06/2015 at 15:36 Anton Medvedev notifications@github.com wrote:\n\n> Well, lets release 4.0! Also i ha\u043c\u0443 100% awesome feature for this release. [image:\n> :fork_and_knife:] [image: :fork_and_knife:] [image: :fork_and_knife:] [image:\n> :fork_and_knife:]\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/deployphp/deployer/issues/356#issuecomment-112826244.\n  Yes, try to use `onlyOn`. :wink: \n\n``` php\ntask(...)->onlyOn('server 1');\ntask(...)->onlyOn('server 2');\ntask(...)->onlyOn('server 1');\n```\n  We really need to implement this feature. \n- `deploy:release`  \n  Then new release dir created, `LOCK` file created within it.  \n  If prev release contains `LOCK` file, error throws.\n- `deploy:symlink`  \n  After symlink `LOCK` file deleted.\n- `rollback`  \n  Skip all release what contains `LOCK` file.\n- `cleanup`  \n  Delete all release what contains `LOCK` file (check if current not linked to it).\n\n![](http://cdn.ebaumsworld.com/mediaFiles/picture/1989829/83031891.gif)\n :+1: \n acquire_lock and release_lock - :+1: \n  Try switch to phpseclib. Still error?\n Your error:\n\n```\nPermission denied (publickey).\nfatal: Could not read from remote repository.\n```\n\nAdd deploy key to repo.\n  Ref https://github.com/reactphp/http-client/issues/23\n  Web-based client for deploy by button. @nepsdotin Please fork this repo, create a branch base branch 4.x and make pull request after you finished\n  As in capistrano.\n  And also maybe upgrade of phpseclib fork.\n Can you make PR to docs?\n phpseclib support this too.\n  Using git:\n- \"git clone --reference=<over there>\" learned the \"--dissociate\"\n  option to go with it; it borrows objects from the reference object\n  store while cloning only to reduce network traffic and then\n  dissociates the resulting clone from the reference by performing\n  local copies of borrowed objects.\n Yes, sure. But it's better to detect git version and if git support it - use it.\n    Main feature to Deployer v3.1.0\n Where will this be implemented exactly, and what will we store in it?\n Creation of Deployer deps i think. Like StageStrategy and Server impl. All what as an interface i think.\n\nPimple?\n +1 for pimple.\nCould we also store global configurations in pimple?\nIs there a way to make a parameter protected?\n I think pretty much everything can be stored in pimple containers: https://github.com/silexphp/Pimple/blob/master/src/Pimple/Container.php#L73\n +1 for Pimple, it's simple & straightforward. \nAs far as I see it, there's no need for complex DI implementations (like Symfony's).\n  Thanks!\n  Try the 1.0.0-alpha10 version.\nIt seems the `^` got support there: https://github.com/composer/composer/releases/tag/1.0.0-alpha10\n\"Added support for npm-style semver operators (^ and - ranges,  (space) = AND, || = OR)\"\n  Thanks.\n  Wow! Thanks you for PR!\n It's good to use UTC as default timezone, it's good that it is configurable. Although it should be added to the documentation.\nAlso, this might fail when deploying to multiple servers with different timezones, but does someone have this use case?\n Maybe separate this thing to local task?\n  Hello! \n\n> It should be set('ssh_type', 'ext-ssh2')\n\nYes, correct. Can you create PR to fix docs?\n\nAnd you also need to require `herzult/php-ssh` with composer.\n I figured why. Because of phar. Phar does not contains `php-ssh`. So it will be working for Deployer installed with Composer. \nCan any one update docs?\n Hmm, need to check deps. Looks like one on deps use old deps. Can you create issue?\n You can build phar youself. I'm also will think about namespace for Deployer func.\n  Based on PR #332\nBug from #331 \n @deployphp/maintainer lets test this and discuss!\n Do we really need tasks ids?\n @ZhukV i think it's a little bit complicated. I'd fixed this myself without introduction tasks ids. \nCheck this out:  9667b4c7\n  @ihsanudin do you tests your PR?\n @deployphp/maintainer that do you think about this PR, guys?\n Maybe separate `deploy:writable:files` task to custom recipe (3rd party)? And just merge `chmod -R`/`chown` changes?\n  @ZhukV great work! Awesome! \n\nCan you move your PR from `ZhukV:master` to `deployphp:fix-same-tasks-execution` branch and create new PR from it? (to other people deployphp org be able to push to it)\n  Hmmm, look like a bug, but i not sure =0 \n@deployphp/maintainer guys, can anybody check this? :smile: \n @ZhukV thanks!\n Fixed!\n  Why we need sudo for cleanup?\n  If you deploy with same user, no problem will be.\n Hmm, I don't quite get this one either, what happened exactly?\nTell us more detail about the server, and how you configured Deployer.\n You need set correct permissions. Try to install `setfacl` and do deploy again.\n  And also allow to specify `0` as unlimited timeout.\n ping @TheRatG \n  I don't think this is good solution to have two same tasks:\n\n``` php\ntask('deploy', [\n     'deploy:prepare',\n     'deploy:release',\n     'deploy:update_code',\n     'deploy:create_cache_dir',\n     'deploy:shared',\n     'deploy:writable',  // HERE\n     'deploy:assets',\n     'deploy:vendors',\n     'deploy:assetic:dump',\n     'deploy:cache:warmup',\n    'deploy:writable', // AND HERE\n     'deploy:symlink',\n     'cleanup',\n ])->desc('Deploy your project');\n```\n\nIf you want you can do you own check with `after`:\n\n``` php\nafter('deploy:cache:warmup', 'check_wtitable_dirs');\n```\n Yes, you are right, thats is done by `deploy:writable` task before this tasks. So we don't need to run it twice.\n I think I get where this could be a problem.\n\nPlease correct me if you thought of something else @ihsanudin.\n\nImagine the following: you have the web-server user `www-data` and you use another: `deployer` for deployment.\nNow imagine that for some reason only a basic `chmod` is usable on the server.\n(So neither `chmod +a` nor `setfacl` is available.)\n\nThis means that for the first time, the following line will run: `run(\"$sudo chmod 777 $dirs\");`\nThen warmup happens, which creates files with the `deployer` user's permissions, which means that the `www-data` webserver-user won't have access to these files, unless `deploy:writable` runs once again.\n\nDo I understand the situation correctly?\n\nAlthough running the task a second time in this case wouldn't help, since `chmod` is not in recursive mode.\n Hmm, there was a discussion about this, which is closed now, have a look at this: https://github.com/deployphp/deployer/issues/323\n\n@elfet is there any problems that could arise from using `chmod -R 777` instead of `chmod 777`?\n\nThis is the second issue regarding this exact problem, so I think we need to think about it.\n Well i think we can change `chmod` to `chmod -R`. But note, it's better to use `setfacl`.\n As @oanhnn pointed out, simple using `chmod -R` might still not be enough.\nIf we change that, and the developer doesn't allow sudo-ing, then silent errors could potentially occur. -> terrible developer experience.\n\nAnd there's something else that still bugs me.\nSuppose we change this, so that deployment from now on uses the `chmod -R` command.\nNow suppose I have an application, where during deployment I:\n 1) create a folder,\n 2) generate some files in it, for which specific permissions are set up for whatever reason,\n 3) make above mentioned folder \"writable\" by setting the `writable_dirs` global parameter.\n\nNow every file's permissions would be overwritten silently.\n\nI know it's an unlikely edge-case, but I'm still afraid of such side-effects.\n This is really edge-case) If we try to solve all cases, we endup only solving them. \nDevelopers need to understand what they are doing. If some one does not have setfacl, runs command not from www user, and wants to create writable dirs without sudo, we has nothing to do this that. \n Hmm I'm still opposed to this.\nWhy not just introduce another task which could be used in cases like this:\n\n``` php\n<?php\n\n// in common.php\nset('writable_files', []);\n\ntask('deploy:writable:files', function () {\n    $files = join(' ', get('writable_files'));\n    if (empty($files)) {\n        return;\n    }\n\n    run(\"$sudo chmod -R 777 $files\");\n});\n\n// in the project's deployer.php\nset('writable_files', [\n    'cache/*',\n    // ...\n]);\n\nafter('deploy:cache:warmup', 'deploy:writable:files');\n```\n Opinions @oanhnn @elfet?\n Why not just add '-R' option to 'deploy:writable'?\n `chmod -R 777`?\n I'll summarise my reasoning:\n- The global parameter's name `writable_dirs` would be misleading, since it implies that only directories will be affected, while in reality it would affect everything and rewrite the permissions to exactly 777, which might not be what I want.\n- It could potentially cause side-effect we can't foresee. Developers can be using this task any number of ways, not just the way it was meant to be used. Examples could be: https://github.com/deployphp/deployer/pull/327#issuecomment-110641573 and https://github.com/deployphp/deployer/pull/327#issuecomment-110647200. And those are just the ones we came up with spontaneously.\n- Providing a separate task for this would be a more reusable solution imho, and it could be added easily to the docs too. It would be similar to the `database:migrate` solution, which recently got documented.\n\nAdmittedly, just writing in `-R` would a be much easier change, but the more I think about it, the less I like that solution.\n\nAnyway, if you think my reasons are not good enough, we can just roll with the `-R` switch. :)\n Where are do you think to add this new task? \n common.php\nIn a way, this is an addition to the `deploy:writable` task, that's why I named it `deploy:writable:files`.\n Well I rest my case, I summed up what I think already. :)\n@elfet it's up to you what's it gonna be.\n Guys, i can understand the problem we are trying to solve? :smiley: If developers uses setfacl - everything ok (permission sets for both current user and http user). \nIf user does not setfacl, when Deployer fallback to use `chmod 777`. May be just se `chown www-data` too?\n @ZeeCoder what about user who do not want to run this tasks? \n\n``` php\nrun(\"$sudo chmod -R 777 $files\");\n```\n Running the `deploy:writable:files` would be totally optional, that's why it would be documented how to use it.\nMy example (https://github.com/deployphp/deployer/pull/327#issuecomment-110657598) is showing changes in two files: `common.php` and the dev's `deployer.php`.\n\nBasically nothing would change in the current behaviour, but there would be a solution for cases like this, which would be highlighted in the documentation.\n @ZeeCoder well, your solution seem to be good. Can you create PR?\n Absolutely :+1: \n  Does the user you're ssh-ing in is also associated with the web server?\nIf so, there's no need for you to set up the permissions, and you can remove that task from your deployment process safely.\n\nIf it's not the case, then please share how did you set up permissions with Capifony, so that we may help.\n No problem\n I think this is not documented on the site, am I wrong about this?\n Opened up an issue about this: https://github.com/deployphp/deployer.org/issues/16\n  Hmm, looking at the current implementation that would be hard to achieve.\n\nInstead I propose another solution.\n\n``` php\nset('writable_dirs', [\n    'data/cache'\n]);\nset('writable_dirs_recursive', true);\n```\n\nThe second parameter could be checked inside the `deploy:writable` task, and it would behave accordingly.\n\nOn second thoughts there's an issue with this though, that now all the `writable_dirs` will be rewritten in a recursive fashion, so I can't do something like the folowing:\n\n``` php\nset('writable_dirs', [\n    'data/*', // recursive\n    'data/log', // non-recursive\n]);\n```\n\nMaybe we should just check for the existence of a trailing \"*\"?\n\nAny thoughts @elfet ?\n Why do not do something like this?\n\n``` php\nset('writable_dirs', ['data']);\n```\n\nNow every of your data is writeable. \nI think adding settings like `writable_dirs_recursive` will confuse users and complicate writable tasks. It's better to keep it as possible as simple(but not simpler). \n\nIf you need to add write permissions recursively - override writable task:\n\n``` php\n// deploy.php\ntask('writable', function () {\n    run('chmod -R 777 {{writable_dir}}');\n});\n```\n Fair points, this could be easily achieved through a custom task.\n That would still conflict with the task's name.\n\"writable_dirs\" makes the given _directories_ writable.\nIt has nothing to do with the possible files inside them.\n\nAnother problem is that you are thinking with the `chmod` command, when in reality the \"deploy:writable\" task does more than that.\nPlease look at the code here: https://github.com/deployphp/deployer/blob/master/recipe/common.php#L175\n\nEven if this were to be implemented, it would have to be another task imho.\n  This is functionality is in contradiction with Deployer philosophy. \nDeployer runs each task, on each server, if everything is ok, then next task is executed. That's helps keep server states consistency, if something broke during executing task on on server, thats stop execution on all servers. \n\nHowether, you can still execute your code(you need separate code body from tasks):\n\n``` php\n$subtask_1 = function () {...};\n$subtask_2 = function () {...};\n\ntask('subtask_1', $subtask_1):\ntask('subtask_2', $subtask_2);\n\ntask ('task', function () {\n    if ($condition) {\n        $subtask_1();\n    } else {\n        $subtask_2();\n    }\n});\n```\n\nBut i do not recommend to do this. Try refactor you deploy strategy to separate independent tasks.\nTake a look at [common.php](https://github.com/deployphp/deployer/blob/master/recipe/common.php) recipe tasks for an example.   \n I think correct solution for #206 is to use new git option `--dissociate/--reference`, this will be implemented in Deployer 3.1.\n\n```\n$ git clone --reference ../oldclone --dissociate https://github.com/gitster/git.git\n```\n Composer cache vendors while installing too. \n\n> 8 \u0438\u044e\u043d\u044f 2015 \u0433., \u0432 3:42, Marco Perone notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> Cool stuff! This will be nice to speed up the clone operation.\n> I didn't try it, but I think that the result will be the same of a simple clone, so, for example, you would not get a copy of the vendor directory and so you would not solve the use case the was raised in the beginning of #206.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n But if you want this feature - you have to upgrade git, all simple :smile: \n  Big thanks!\n  What version of Laravel?\n Show full `deploy.php` file here, please.\n Do your require your `autoload.php` file? You shoud not to do this.\n Yeah, seems like that. Can you use phar?\n @andreascreten you can implement Lumen recipe by yourself.\n Working on that! :)\n This issue will be resolved with Deployer v4.x (namespace function)\n  Nice! Thanks!\n  Works good!\n Can you test it there?\n  I think its better to have something like this:\n\n``` php\nset('composer_options', '--no-dev --no-interaction ...');\n```\n @Danielss89 will implement myself.\n Done.\n @Danielss89 you can specify this option server specified (for one, or for all servers):\n\n``` php\nserver(...)\n    ->env('composer_options', '...');\n```\n  Yeah, it's kind of deprecated. \n Hmm, then it should be removed, and the docs should be updated.\nBut since this is removed, the `database:migrate` command must be documented properly as the alternative solution.\n\nBasically what needs to be done to have db migrations is this:\n\n``` php\nafter('some-task', 'database:migrate');\n```\n\nI'll create the PRs, as soon as I find the time for it.\n  Cool! :sunglasses: \n  Done.\n  Run test before `deploy` task. Specifically `deploy:release` task.\n If test fails you can run `cleanup` task.\n You can catch Exception and remove release dir, and everything you want.\n  Clone your repository manually on server to check what everything is ok.\n @ZeeCoder so what wrong with error reporting?\n I don't know ether. \n  So what's up with this PR?\n Is it for specifically Laravel5?\nBecause if it is, then deploying a Laravel4 app after this update will create a useless \".env\" shared file doesn't it?\n\nAs far as I understand the current \"laravel\" recipe is for laravel4.\nIf this is all it takes to support Laravel5 deployment, then it should be in the docs instead, like with the symfony recipe and the symfony 3 directory structure.\n\nWhat are your thoughts on that?\n So do we need to merge it?\n It depends.\n- If it doesn't hurt laravel 4 apps -> merge,\n- If it does, but this is all that's needed for laravel 5 support -> write it in the docs instead of changing the recipe.\n- If it takes more than that to support laravel 5 apps -> we should consider creating a separate laravel5 recipe.\n\nimho \n @ZeeCoder i think you can merge it :+1: \n I'll wait for @oanhnn's answer just to be sure, no need to rush. :)\n Okay, I'm convinced dear @oanhnn. :)\n  @nWidart so it's turn out?\nHere is my `sudoers` on debian:\n\n```\nelfet   ALL=(ALL) NOPASSWD: /usr/sbin/service php5-fpm reload\n```\n  Try to remove this line:\n\n``` php\n \\Deployer\\Task\\Context::get()->getServer()->connect();\n```\n Feel free to ask any questions.\n  Cool! :+1: \nNeed more time to test, try to do all on weekend. \nPlease, take a look at scrutinizer report for your PR: https://scrutinizer-ci.com/g/deployphp/deployer/inspections/a5866db1-224d-46b3-ad6a-e2e3e6f00568\n\n![2015-05-27 12 33 53](https://cloud.githubusercontent.com/assets/141232/7829484/b9d81d26-046c-11e5-9dd1-beb561ce514d.png)\n Test coverage decrease\u0432 a little bit. If you can keep them on same level, it will be 100% awesome :+1: But if not, nothing terrible, leave it as it is.\n\nPS Where are a lot issue to implement too, if you want take a look at #297. \nPPS Soon Deployer Roadmap will be ready. \n Cool feature.\n Can you implement this too?\n Thats ok, pass must be \u2018\u2019 as default.\n Nice work. Need same one else too look at the PR before i'll merge it.\n I tested this feature, look good. Guys, please, test this feature too!\n @ZhukV i'm going to implement event dispatcher in Deployer. Can you rewrite your feature by using dispatcher later? \n  Now it's not possible due many reasons: security, parallel execution, ext.\n\nBut i think it will be available when implement events in Deployer.\n  Require recipe at beginning of file:\n\n``` php\nrequire 'recipe/common.php';\n```\n  Try chmod and chown phar file. Look like file has wrong permissions. \n Hmm, try to find how to fix it.\n Fixed in v3.0.4.\n  Can you run your command with `-vvv` options and show output?\n I do not know what is it. Can you find out why this is happening?\n It's work for me: \n\n``` php\nupload(__DIR__ . '/README.md', '/home/user/project/README.md');\n```\n\nHow are you uploading?\n Yes, now `cd` function has no effect on upload and download function. This is consciously to simplicity. If you want, you can create PR this `cd(deploy_path)` feature.\n Yes, your solution is correct.\n  Test fails, can you check and fix it before i merge your PR?\n Is there any progress here @Max-Might?\nDid you try to fix the issue?\n It's not the Symfony Component that's at fault here, look at the error more closely: https://travis-ci.org/deployphp/deployer/jobs/64213311#L264\nIt has something to do the way the tests work.\n\nFor some reason during that test the output you're passing to the Progress Bar by calling `output()` giving you `null`  instead of a proper `OutputFormatterInterface` object when the component calls the `getFormatter` method on it : https://github.com/symfony/Console/blob/2.6/Helper/ProgressBar.php#L545\n\nI hope this helps. :)\n Seems so.\nThe `getFormatter` method needs stubbing.\n  Global parameters is what need to be really global, such as repository, etc. \nEverything else must be a environment specified(related to server, deploy path, branch to deploy, stages, etc.)\n Also in future i plane to refactor global parameters, and will be available to set global parameters from on evn, and changes apper on all envs (talking about parallel deployment), this allow to write task which will set one release number for all envs. \n  Yes, it's a bug. On Mac OS x everything looks normal. Do you know why this happens on Ubuntu?\n Really strange behavior.\n Wow, cool! Can you create PR so i can test it?\n Fixed.\n  Awesome! This very helpful indeed. :)\n  That's purpose for this? Why contributors has to be restricted? \n @oanhnn if you have any arguments, lets us know. For now i'm closing this PR.\n  Thanks a lot! \n  You can run tests locally too:\n\n``` php\ntask('test', function () {\n    runLocally('cd project_dir && php vendor/bin/phpunit');\n});\n\nbefore('deploy', 'test');\n```\n  Feel free to ask any questions :)\n  Thanks! But why we need it?\n @gpupo i see there are a lot of bad changes (`/**`->`/*`,...) And i dont think we need them.\n @gpupo if you have arguments, let as know. For now, i'm closing this PR.\n  What about Symfony Console's progress bar? It's pretty damn good. Can you implement this?\n  Hi! You can override tasks:\n\n``` php\ntask('deploy:writable', function () {\n    run('cd {{release_path}} && chmod -R 777 storage');\n    run('cd {{release_path}} && chmod -R 777 vendor');\n});\n```\n\nCan you run `which setfacl` and show output?\nAnd this: `if hash setfacl 2>/dev/null; then echo 'true'; fi`\n So setfacl is exists. \nTry run: \n\n```\nsetfacl -R -m u:\"nginx\":rwX -m u:`whoami`:rwX storage vendor\n```\n\nAnd this sudo too.\n  Thanks!\n  Hi! You need to remove this: `require 'recipe/common.php';`\n  You can skip params, like this:\n\n```\n->identityFile();\n```\n  Sorry, can you explain in detail what you want to? \n Hmmm, you can try to catch exception somehow. But i think it\u2019s not possible now. We need to implement events in Deployer to make it possible.\n Hmm, i understand the problem. \nBut what if after failure i want to see what's broken? ssh to server and look at `20150526140000` myself? Than fix and continue deploying. \nMaybe it's better to tell user before new deployment, what there if a `release` symlink (ie deploy in process)? So user run `cleanup` task manually and understand 100% what happens on the server?  \n  Good addition. Must have feature. I suggest \u0442\u0443\u0447\u0435 syntax:\n\n``` php\n$env->setProtected('key', ...);\n```\n\nBut it has to be accessible by dot notation:\n\n``` php\n$env->setProtected(''server', [\n            'name' => $config->getName(),\n            'host' => $config->getHost(),\n            'port' => $config->getPort(),\n        ]);\n\n$env->set('server', ...); // Thrown an exception.\n\n$env->set('server.name', ...); // Thrown an exception.\n```\n I think `setProtected($key, $value)` better. \nBut `setAsProtected` is like _set as protected this key_ `setAsProtected($key)`.\n Well, you convince\u0432 me. `setAsProtect` is better.\n Awesome! Nice work! Merged! :beer:  :beers: \n Will wait for docs...\n Thanks!\n I have a new idea. That is all env vars \"private\" by default. And if you want you can override it with `$env->override(key, value)`? \n@ZeeCoder @oanhnn @gordalina what do you think?\n  Thanks!\n  Good one. Can you create PR for this?\n  It's fail down because of (BuilderTest.php#L115)[https://github.com/deployphp/deployer/blob/master/test/src/Server/BuilderTest.php#L115]\nIn this test `Deployer\\Server\\Environment` expected to be called once. And you add second call in this PR.\n Please, before i merge this PR, add docs to deployphp/docs too. Thank a lot!\n Now we need set as private here.\n  I don't see bug here. Can you create example task?\n ```\n'some/folder/with spaces/in/the/path'\n```\n\nThis is definitely wrong. You should now write like this.\n Of course.\n Or use escape func)\n  I think better place for this data is env. \n`env('host')`\n It\u2019s good approach. Env already support this. \nYou can do this:\n\n``` php\nenv(\u2018config\u2019, [\n    \u2019name\u2019 => \u2018prod\u2019,\n    ...\n]);\n```\n\nNow possible:\n\n``` php\necho env(\u2018config.name\u2019); // prod\n```\n Honestly, i don't know :sunglasses: I don't implemented this feature.\n Yes, look good for me.\n  What about automatically echo sudo password? No more sudoers needed.\nParse this commands:\n\n```\nsudo chmod ....\n```\n\nInto this:\n\n```\necho \"password\" | sudo -S chmod ...\n```\n It's possible to do after outputting to term. What about other potential vulnerability? bash_history, top processes?\n It's not possible, because `Proccess` class only for local machine. `PhpSecLib` using on remote, and it's not possible to do this it. \n\nWhat can be against echoing sudo password? \n I think using tmp file for password is good solution. \nBut i think implementing this too complicated. And this needed only for `deploy:writable` task. I think we can leave thinks as they are for now. \n  You can set stages to a few servers:\n\n```\nserver(...)\n    ->stage('prod');\n\nserver(...)\n    ->stage(['prod', 'stage']);    \n\nserver(...)\n    ->env('stages', ['stage']);    \n```\n\nI think is better to separate something like `ServerSelector` class, and implement all of this into it.\n Yes, stages is for grouping server.\n\nNow, by default will be deployed to server without specified stage.\n Oh, forgot to answer here.\n\nI think this should be explained more in-depth on the website.\n I'm missing this feature too. :+1: \n 2 months ago @elfet said it's on its way: http://deployer.org/discuss#comment-1968357574\n Yes, i'm going to implement this soon. Already decouple StageStrategy. :+1: \n  And check new issues here: https://scrutinizer-ci.com/g/deployphp/deployer/inspections/fe07aa87-2431-4754-ab40-813f64962e04\n BTW, its better to separate PR into small, independent ones. So it's simple to merge them.\n Do we really need `has` function?\n Looks good. I'm merging. \n Take a look at: https://github.com/deployphp/recipes\n Yeahh, need to create issue there.\n  Server config now are private, you should set separate env var: `->env('host', '...')`.\n\nIf you still what access config, try this:\n\n``` php\nContext::get()->getServer()-> getConfiguration();\n```\n > What were the reasons behind removing the config() function?\n> Separation of concepts. I think everything accessible and server specified should be in env vars. \n\nYou can define something like this:\n\n``` php\nserver('host1.domain.com')\n    ->env('host', 'host1.domain.com');\n\nserver('host2.domain.com')\n    ->env('host', 'host2.domain.com');\n```\n\nOr like this:\n\n``` php\nenv('host', function () {\n    return (string)run('echo $HOSTNAME');\n});\n```\n\nMaybe create a PR which will be setting this env vars from config on run?\n Take a look at: [functions.php#L54](https://github.com/deployphp/deployer/blob/master/src/functions.php#L54)\n  I think it's because of callback in release_path env. \nTry run this command with -vvv option, and show output here. \n This happens because `release_path` does not exist yet. Add to you script this:\n\n``` php\nbefore('test:test', 'deploy:release');\n```\n\nI will fix error message. \n are you want to execute some task before every others?\n  YES! It's will be so goo\u0432! English is not my primary language, so i have problems some time with. \n\nDoc located here: https://github.com/deployphp/docs\nSite located here: https://github.com/deployphp/deployer.org ([pages](https://github.com/deployphp/deployer.org/tree/master/pages))\n  Now it's possible to insert environment variable with `{{...}}`, need to think some for parameters, to refactor from this:\n\n``` php\nrun('php {{release_path}}/' . trim(get('bin_dir'), '/') . '/console assetic:dump --env={{env}} --no-debug');\n```\n\nTo this:\n\n``` php\nrun('php {{release_path}}/%bin_dir%/console assetic:dump --env={{env}} --no-debug');\n```\n\nAlso separate parse from `Environment` class to separate unit.\n\nDoes anybody wants to take care of this? :eyes: \n Available syntaxes: \n1. `%...%`\n2. `{%...%}`\n3. `{{%...%}}`\n  Nice one, thanks! :+1: I updated docs too.\nNeed to think for a some syntax for parameters, like this maybe:\n\n``` php\nrun('php {{release_path}}/%bin_dir%/console assetic:dump --env={{env}} --no-debug');\n```\n Phar will automatically will be updated in next 10 mins. \n  Hmm, yes. You are right. This is because of [common.php#L61](https://github.com/deployphp/deployer/blob/master/recipe/common.php#L61). \nWill be fixed.\n Fixed. :+1: \n  This will gone away, when phpseclib do release. Or i will implement ssh in php myself :fist:  \n I don't quite get this.\nThe phpseclib package has a lot of releases: https://packagist.org/packages/phpseclib/phpseclib\n\nWhat do you mean by \"when phpseclib do release\" @elfet ?\nAre you waiting for a 0.4.x version?\n I see.\nThen this solution should be noted on the website until it gets fixed somehow.\nNow the tool basically seems broken from an outsider's point of view, if he tries to install it via Composer.\nEven if he stumbles upon this thread, it will still leave a bad taste in his mouth, the tool loses some of it's credibility.\n I thinking about ugly hack, until phpseclib release. Include phpseclib to project. What do you think? \nping @ZeeCoder @oanhnn  @kenjis @gordalina @nspyke \n Same questions here.\n I think fork phpseclob and release it myself, until phpseclib will release.\n It's better than nothing.\nNot an elegant solution but still better than including the whole project in Deployer.\n The fork already exists, I think it will be in the next release.\n If I'm not mistaken, Deployer v3.0.6 includes the above mentioned fix.\nCould you check if it works as expected @kenjis?\n Yes! Can anyone place new release?\n\n> 2 \u043e\u043a\u0442. 2015 \u0433., \u0432 0:28, Hubert Viktor notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> Hmm, I think so, based on the commit: phpseclib/phpseclib@2c96af2\n> I think v2.0 should be the thing Deployer needs.\n> \n> Can you confirm this @elfet ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n @loranger Can you try run and show ouput to here:\n\n```\n$ composer init\n$ composer require deployer/deployer\n```\n @wesleywesley You are using symfony component >= 3.0 \nCurrent deployer has problem with symfony 3.x\nPlease #495 \n  Hi everyone!\nIs someone want to check one of new recipes:\n- Laravel \n- Zend Framework \n- Yii\n- WordPress\n @nWidart great article! If you can test and refactor `common/laravel.php` recipe, it will be 100% awesome!\n  Officially Deployer does not support Windows (But it may work).\n\nI know where is problem, in `upload` function. Need to add one `str_replace('\\\\', '/', ...)` to it. \n Fixed! Now on master branch, soon will be in Deployer 3.0.1.\n @elfet reverted by commit https://github.com/deployphp/deployer/commit/c9f3c5d\n  Yes, truly. `php-ssh` was removed from `deployer.phar` archive. You can install this package via composer. \nReason is what i'm going to drop support for `ext-ssh2` in new Deployer releases. So Deployer will be 100% php without any extra extensions. \n  Hmm, i think it's better to rename **deployphp/recipes** to **deployer/recipes**.\n But project is `Deployer`, and _deployer_ org name does not available. :fried_shrimp: There are a lot of other projects what has different org name ([silexphp/Silex](https://github.com/silexphp/Silex), ...)\n Not, did not contact Github. What i'm gona say to them? That somebody register org with name what i prefer? \n  @oanhnn  well, again. What about migrate to `DotNotation`? :smile: \n Nice work!\n![2015-05-13 18 23 54](https://cloud.githubusercontent.com/assets/141232/7609469/52e57c78-f99d-11e4-97a0-a505c793b639.png)\n  Thanks! Will be fixed. \n Fixed.\n  `{{ ... }}` available only in v3.\n  You can upgrade to v3 by this command: `dep self-update --upgrade --pre` \n Now `runLocally` you can you like this: \n\n``` php\nrunLocally('cd {{path}} && do-stuff');\n```\n\nI think we do not need `localCD`.\n  Thanks a lot!\n  Ok. Cool one :+1: I thing need to add some parameter with pre_run name or similar. \n Can you create PR with shell cheking and warning? This will be so great! :green_apple: \n Thanks you a lot! :)\n Done: https://github.com/deployphp/deployer/blob/master/recipe/common.php#L61\n  Is it a bug? Can you add some tests?\n  @pbudzon Deployer now have another API. (Docs will be ready soon.) \nTry use in:\n\n``` php\nserver(...)->env('deploy_path', ...);\n```\n  I think bringing bad practice to lib it unacceptable. You need to configure your server right, instead of using `sudo` on all of commands. \n Well, i do not see use case of this feature.\n  Thanks!\n  Fixed. Not work like `run` func.\n  Thanks!\n @Max-Might please, take a look at https://travis-ci.org/deployphp/deployer/jobs/62110591\nGo some errors with you implementation.\n  Ok, it will be great. Please, create PR for it. Also you can ad\u0432 test case for this in `test/recipe`. Thanks!\n  What about replacing `DotArray` with `DotNotation` class ([gist](https://gist.github.com/elfet/4713488)).\n Does it work with current implementation?\n\n``` php\nenv('abc', ['one' => ['two' => 1]]);\nenv('abc.one', ['other' => 3]);\n```\n But correct answer is:\n\n``` php\nenv('abc', ['one' => ['two' => 1]]);\nenv('abc.one', ['other' => 3]); // should override entire abc.one, as most intuitive way\n\n$this->assertSame(['other' => 3], env('abc.one'));\n```\n Need to wait then CI are ready to do checks. \nOn travis-ci issued some errors:\n\n```\n  [InvalidArgumentException]                                      \n  Package ext-ssh2-0.12.0.0 must have a source or dist specified  \n```\n\nCan you help with fixing it?                                                               \n Solved and merged. :rabbit: \n Test fixed.\n\n@oanhnn please, take a look at this code duplication: https://scrutinizer-ci.com/g/deployphp/deployer/indices/829672/duplications/65846246\n  You can use SSH Agent Forwarding. \n You can override task `update_code` to use your keys.\n  Which version of deployer are you trying to install? \n Try to install `2.0.5`. And v3 stable will be very soon.\n :beer: \n  Thanks a lot! :beer: \n  You can use new forward agent functionality or add your servers keys to your repositories.\n  Yes, now passwordless sudo is a must.\n  Ok, thanks! Will look at this after weekends. \n Anybody really need this feature?\n That to keep in share dir very project specified. So i leave it to user decide what to keep there. \nThis enhancement will bring more mess, than helps. So for now it's close. Sorry :)\n This is about shared files. Put your db file to shared folder.\n Have a `deploy:shared_copy` very nice idea!\n shared folders is what your want to use. How to place files there is your decision. \n  Soon will be new docs with more examples. \n New docs are ready! Please help m\u0443 check them and finish them.\n  Hmm, never seen problems like this. Need to test it myself with big reps.\n Thanks! Updated `composer.json`.\n\nReally waiting for release of `phpseclib/phpseclib` lib. A lot of problems will gone. Also working on different ssh implementation for Deployer.\n  Yeah, i'm hosting on Linode, and my VPS falls under high load.\n Must be online now.\n Solved. Was a problem with ipv6 nginx config. :smile:  \n  It's looks like Symfony Console bug.\n Yes, maybe. Let me check.\n Fixed. \n  Cool. Will try it and then merge.\n Merged.\n  SSH Forwarding will be in next release. Integration with (Bastion|Jump) Server i\u0430 some one make PR.\n Look like your a init in another way. Sorry can tell why to has this problems. I can't reproduce it. \n  `argument` function available only on master branch now. Wait for release please or use master branch :smile: \n Not all functions included in beta, them are not ready now.\n  Ok, thanks! \n  Can you make these changes to `master` branch? Not more features will be implemented in 2.x branch. \n  Ok :)\n  Good one!\n  Great! Sorry about delay. :beer: \n  Like what? Please show an example and more details. \n You can use VPN tunnel. \n Actually a simple solution would be to create an ssh tunnel from server1 to server2 (one simple ssh command), which provides socks4 & 5, and then operate on server 2 to server 3.\n  Try to use Deployer 3.\n  Yes, now order of task important. Will implement irrelevant for the definition in v3.1.\n What about task overriding? It's based on task order.  \n After little research a decided what tasks should not be independent from dependencies between them.\n  Hmmm. Well, need to use another syntax for env vars.\n\nNow\n\n``` php\nrun('cd {deploy_path}/release & ...');\n```\n\nMaybe like that:\n\n``` php\nrun('cd {{deploy_path}}/release & ...');\n```\n\nOr:\n\n``` php\nrun('cd %deploy_path%/release & ...');\n```\n I will implement it with `{{ ... }}` syntax. \n Fixed.\n  Do you know how to do it?\n Can you create PR for this?\n  Do you know application like that?\n  Cool!\n Update README.md, please.\n Will do it myself later :)\n  ``` php\nserver(...)\n    ->env('branch', 'master');\n```\n  Cool thing. Will be implemented 100%.\n > Composer uses a cache mechanism which will make reinstalling the same libraries/dependencies extremely fast since it will be similar to a folder copy, so I don't see the point of that use case.\n\nWOW! Cool think! Need more to discuss. \n What about having deploy option '--copy' which will copy entire old release to new one?\n'''\ndep deploy  --copy\n'''\n  Now deployer.org has two links: one for beta http://deployer.org/beta/deployer.phar and one for stable: http://deployer.org/deployer.phar\n Does GitHub has API for automatically upload files to releases? \n A bug :beetle: Sorry. Now fixed.\n Thanks! :beer: \n This is mistake. Version is 2.0.5, need to fix version number.\n  Check out latest on master and 2.x branch: #199 #200 \nDownload v2.0.5. It's fixed there. Now have an issue with phpseclib package version. \n Fixed. \n  Yes, this is good feature. But it will not working in parallel mode. I will implement distributed Deployer parameters, so it will be possible to implement correct solution for this in parallel deployment mode.\n Build fails.\n  Docs is outdated, sorry. Now working on rewriting it. \nCurrent version v3 is very differs from 2.x.\n Try this:\n\n``` json\n{\n    \"require\": {\n        \"deployer/deployer\": \"2.0.5\"\n    },\n    \"provide\": {\n        \"ext-ssh2\": \"*\"\n    },\n    \"minimum-stability\": \"dev\"\n}\n```\n Fixed in #201\n  I think it's because of update of Composer. Already have PR #199 \nUpdate Deployer version: `dep self-update`.\n Try to download Deployer here: http://deployer.org/deployer.phar\n Fixed.\n Does latest v2.0.5 does not working? It must be fixed via PR #199 \n Try to do this composer.json:\n\n``` json\n{\n    \"require\": {\n        \"deployer/deployer\": \"2.0.5\"\n    },\n    \"provide\": {\n        \"ext-ssh2\": \"*\"\n    },\n    \"minimum-stability\": \"dev\"\n}\n```\n Yeaah. A bug of php-ssh lib. Can you create in there?\n Cool! Thanks!\n  Cool. Thanks. Now work without errors?\n Cool! Thanks!\n  I think logging is good thing. But must be implemented very careful. \nNow logging able by simple\n\n```\ndeb deploy -vvv > deploy.log\n```\n\nBefore implementing logs to file in Deployer we need to understand use cases and for what it's will be used. I think logging feature is good for v3.1 release of Deployer. \n  Cool :+1: :smiley: \n  Cool!\n  Yes! Great! But it will be better to add `wordpress` recipe. :newspaper: \n Well, `bedrock` is ok :)\n  What command you run?\n Try to `composer self-update` first.\n ext-ssh2 is php55-ssh2 :smile: \nAre you on master branch? Please, show your `composer.json`. \next-ssh2 require only by `herzult/php-ssh`.\n Added herzult/php-ssh to require-dev.\n  What if i add `$phar->compressFiles(Phar::GZ);` to my build script? \nNow deployer.org site uses my `build` script, so we need to refactoring them too.\nWhat is the benefit \u0449\u0430 migration to `box2`?\n New size of `deployer.phar` 825KB now.\n\nI think we need to reduce number of dependencies. \n Hmmm, i'll think about it :)\n Box awesome project, but i do not what to touch what's already good working. \nAlso i do not see any cons of this.\n  Ok, will add to v3.\n Done. Now you can use it like `task(...)->setPrivate();` :beer: \n  Upgrade to latest Deployer 2: https://github.com/deployphp/deployer/releases/tag/v2.0.4\n  Why?\n  Now done. \n  Libs may not contains `composer.lock`, but i'm thinking `composer.lock` is good solution for Deployer (better for building phar).\n > I wouldn't pretend to know composer in depth, but I believe that if you require a library that has a composer.lock, it will not be considered during the dependency resolution step. Thus it shouldn't pose a problem to have one under version control.\n\n`composer.lock` considered during only when `install` appears. \n Now with composer.lock :cyclone:\n  There were several reasons for f3b8723, main is what Deployer must be available via Composer. A lot of users may include in in `require-dev` section. Otherwise instructions to install via Composer will be looking like this:\n\n```\ncomposer require phpseclib/phpseclib:dev-master@dev\ncomposer require deployer/deployer:~3.0\nIf you does not have ext-ssh2 installed, add \"provide\": [\"hezern/php-ssh\"] to composer.json.\n```\n\nAnd this is why:\n\n> Deployer require additional packages, but can not require them through Composer due next issues:\n> - PhpSecLib does not have stable enough version to require.\n> - Herzult/php-ssh requires ext-ssh2, Deployer does not.\n> \n> Resources vendors must updated manually, or if you know solution create pull request.\n Agree with phpseclib. \nBut \n\n```\n\"suggest\": {\n        \"herzult/php-ssh\": \"SSH support through ext-ssh2\"\n    }\n```\n\nlooks not so smooth. \n How to build phar with `\"herzult/php-ssh\"`?\n Done :coffee: fddc573f2897fd847c6b36fb446b0231be8c8bff\n > But why not move the herzult/php-ssh to require-dev?\n\nGreat idea! Thanks!\n  Thanks!\n  @EkAndreas please, show all backtrace. \n  @Bilge what do you propose?\n  > Package phpseclib/phpseclib#dev-master@dev is not fixed.\n\nWTF with phpseclib? Still cannot install via composer require...\n What the solution to be able to install Deployer via Composer?\n\nWe need this: `composer require deployer/deployer:*` :angry: \n Try in your terminal next command: `composer require deployer/deployer:~3.0@dev`\nGot error?\nNow we need to fix it.\n Now fixed. Hardcoded :scream: \n Now must work. Try it: `composer require deployer/deployer:dev-master@dev`\n Yes, right.\n It's because of phpseclib. Add minimum-stability `dev` to composer.json file. Will be fixed when phpseclib will release lib.\n Try this:\n\n``` json\n{\n    \"require\": {\n        \"deployer/deployer\": \"2.0.5\"\n    },\n    \"provide\": {\n        \"ext-ssh2\": \"*\"\n    },\n    \"minimum-stability\": \"dev\"\n}\n```\n  What to try waffle.io for working process.\n GitHub itself is better)\n  Done :beer: \n Hmmm.\n\nIt's not possible to write like this:\n\n```\ncd('{release_path}');\n```\n\nonly like this:\n\n```\ncd(env('release_path'));\n```\n\n@tomzx  Can you fix it?\n Hmmm, can you look at https://github.com/deployphp/deployer/blob/master/recipe/common.php#L134\nNot working there :(\n Yes. \n\n> 22 \u00f4\u00e5\u00e2\u00f0. 2015 \u00e3., \u00e2 21:32, tomzx notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> I assume you're getting this error: PHP Fatal error: Maximum function nesting level of '100' reached, aborting!?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n  Yes, it's thinks must to have.\n Cool! I think it's good to have options/strategies.\n Done! :beers: \nTo deploy specific branch:\n\n``` php\nset('branch', 'master');\n```\n\nTo deploy specific tag:\n\n```\ndep deploy --tag=\"v3.0.0\"\n```\n\nAnd even more. To deploy production stage:\n\n```\ndep deploy production\n```\n\n:gem: :gem: :gem:\n @oanhnn will implement it soon.\n Done!\n\n``` php\nserver(...)\n    ->env('branch', 'master');\n\nserver(...)\n    ->env('branch', 'develop');\n```\n  Server groups. \n\n``` php\nserverGroup(['st', 'nd']);\n```\n\nAlso i think refactor this to:\n\n``` php\nserver(...)\n    ->groups('one', 'two');\n```\n Stages are back! :back: \n  I removed `cd` function to simplify `run` function. I think `run('cd {some_path} && my_super_command')` more readable than. But if is possible to bring back `cd` function.\n Ok, will bring back `cd` func. :+1: \n `cd` is back!\n  Hi! Yes, it is possible! But now this feature now in pull request #143 and still now finished. This feature 100% will be in Deployer 3 when i or somebody else finish it. \n Done! Use `argument` and `option` functions.\n  Cool! :gem: :gem: :gem: :beers: \n Is it working correctly? Can you show example of usage? And, please fix merge conflicts :wink: \n Cool! Thanks!\n Yes, i think so. Create settings with PhpSecLib by default.\n @oanhnn ping\n  Well, why use `YmdHis` instead \u0449\u0430 number of release? You can always get the time of release by modify time of dir.\n\nAnd i think number for releases is more readable for humans:\n\n```\ncurrent \u21e2 3\nreleases \n\u251c\u2014 1\n\u251c\u2014 2\n\u251c\u2014 3\n```\n @tomzx i agree. But what if we get differences in last `s`?\n So what everybody think? @gordalina?\n Done!\n  Thanks! Will merge manually! Now have my own commits for `common.php` with some refactoring. Thanks you for your work! \n Done!\n  Cool!\n  Cool, ok.\n  Yeahhh... Deployer 3 recipes not ready now, sorry. Try to use Deployer 2: http://deployer.org/deployer.phar\n Ok. Feel free to ask any questions.\n  You can download in here: http://deployer.org/deployer.phar for 2.x and http://deployer.org/beta/deployer.phar for 3.x.\n\nTo upgrade to latest release run: `dep self-update`\n  What is your deployer version?\n  I need some time to merge it without conflicts with my new common.php.\n Done!\n  Same again. Will merge it later.\n  Nice!\n  Thanks!\n  git pull?\n Yes, i think we need to add `--deep` option. \n Done.\n  Now it does not possible to do (I think). You can only create task for a specified server:\n\n``` php\ntask(...)->onlyOn('server');\n```\n\nWhy do you need this functionality? If you can explain why this functionality needed for, I'll think about implementation.\n  Yes, it will be `->env('deploy_path', '/var/www/test-target');`.\nDoc for v3 will be latter sorry about this.\n  Yeah, sorry about that.\n Fixed.\n Thus is issue with phpseclib and packagist. I already created issue there.  \n\n> 4 \u00f4\u00e5\u00e2\u00f0. 2015 \u00e3., \u00e2 17:29, Tomas Majer notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> Hi,\n> It looks like there is still some issue with this. After i updated composer requirements to \"deployphp/deployer\": \"2.0.4\"\n> \n> it shows this error:\n> \n> Your requirements could not be resolved to an installable set of packages.\n> \n>   Problem 1\n>     - deployer/deployer v2.0.4 requires phpseclib/phpseclib 2.0._@dev -> satisfiable by phpseclib/phpseclib[2.0.x-dev].\n>     - deployer/deployer v2.0.4 requires phpseclib/phpseclib 2.0._@dev -> satisfiable by phpseclib/phpseclib[2.0.x-dev].\n>     - Removal request for phpseclib/phpseclib == 2.0.9999999.9999999-dev\n>     - Installation request for deployer/deployer 2.0.4 -> satisfiable by deployer/deployer[v2.0.4].\n> When i put this in my composer.json it works fine:\n> \"phpseclib/phpseclib\": \"2.0.*@dev\"\n> \n> Is this requirement to explicitly put phpseclib dependency to composer?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Fixed.\n Yeeahh. Fix is coming....\n I know how to hotfix...\n Will be fixed in #182 \n  Ok, is nice API. Please add tests to BuilderTest.\n HHVM tests fails today again. Reopened PR to process tests. \n Done.\n  Wow! Great work! :+1: \n Is parallel task executor work correctly? Now writing functional test for it.\n Cool!\n Will make phar for testing...\n Thanks :stuck_out_tongue_winking_eye: \n  According to [Occam's razor](https://en.wikipedia.org/wiki/Occam%27s_razor) \"_entities must not be multiplied beyond necessity_\".\nSo i think is better (and simple) to have standard PHP ways to report errors - `throw` an exception. \nAnd if you do not want to break deploy process, simple inform user about your errors: `writeln('<error>...</error>')`, creating new arguments, or functions for that is unwarranted complication.\n\nWhat do you think @gordalina?\n Yes, special exception is good solution. Can you make PR?\n  Thanks!\n I did it myself on master.\n  Hi! From what and on what version you have updated?\n Try to download stable version 2.0.2: http://deployer.org/deployer.phar \nNow unstable version will be available here: http://deployer.org/beta/deployer.phar \n  Yeah, i think it is feature good to have :) If you can create it - will be amazing! :gem:\n Agree with @gordalina. \n  Thanks a lot!\n  What Deployer version? Can you run command with `-vvv` option?\n Well, 3.0 now in dev state. Will try to do it myself. Now you can only\ninstall php ext ssh2 or use Deployer 2.0.0\n\n2015-01-26 15:58 GMT+03:00 Robin Wouters notifications@github.com:\n\n> Latest, 3.0.\n> \n> \u279c site.com git:(develop) \u2717 dep deploy -vvv\n> Preparing server for deploy\n> Run task deploy:prepare on server development-server\n> [91.238.155.135] cd /var/www/dev.site.com && cd {deploy_path} && if [ !\n> -d releases ]; then mkdir releases; fi\n> \n> [RuntimeException]\n> Could not login with PhpSecLib.\n> \n> Exception trace:\n> () at phar:///usr/local/bin/dep/src/Server/PhpSecLib.php:46\n> Deployer\\Server\\PhpSecLib->connect() at\n> phar:///usr/local/bin/dep/src/Server/PhpSecLib.php:72\n> Deployer\\Server\\PhpSecLib->checkConnection() at\n> phar:///usr/local/bin/dep/src/Server/PhpSecLib.php:81\n> Deployer\\Server\\PhpSecLib->run() at\n> phar:///usr/local/bin/dep/src/functions.php:115\n> run() at /Users/robinwouters/Development/hoe/site.com/deploy.php:33\n> {closure}() at n/a:n/a\n> call_user_func() at phar:///usr/local/bin/dep/src/Task/Runner.php:45\n> Deployer\\Task\\Runner->run() at\n> phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:168\n> Deployer\\Console\\RunTaskCommand->runSeries() at\n> phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:118\n> Deployer\\Console\\RunTaskCommand->execute() at\n> phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:253\n> Symfony\\Component\\Console\\Command\\Command->run() at\n> phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n> Symfony\\Component\\Console\\Application->doRunCommand() at\n> phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n> Symfony\\Component\\Console\\Application->doRun() at\n> phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n> Symfony\\Component\\Console\\Application->run() at\n> phar:///usr/local/bin/dep/src/Deployer.php:114\n> Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:51\n> require() at /usr/local/bin/dep:4\n> \n> deploy [--dry-run] [--server[=\"...\"]] [stage]\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/deployphp/deployer/issues/150#issuecomment-71456876.\n @robinwo sorry do not know right now. Will try to solve it!\n Done.\n  You can simple include recipes from you `deploy.php`.\n\n``` php\nrequire 'recipe/common.php';\n```\n  Please, run deploy with -vvv attr and show output. \n Can you try to update recipe and run git clone task with `2>&1` at the end?\n Yes, please!\n  Thanks! :100: \n  I think `a` is better.\n  Yes, this is good enhancement. And i already implemented it in Deployer 3. Now hard working on release of it.  \n Good luck! :dart: \n Done.\n  Great! :beer: Can you fix other commands too? \n  Also what about parallel execution? Can you implement passthru for options/arguments to worker?\nSee [ParallelExecutor](https://github.com/deployphp/deployer/blob/master/src/Executor/ParallelExecutor.php#L60) and [Worker](https://github.com/deployphp/deployer/blob/master/src/Console/WorkerCommand.php).\n Will implement it myself.\n  Yeah, sorry about that, moving repository right now. \n Sorry again! Wait until evening! :sweat: Working :sweat_drops: \n Did you run `composer install`? :smile: \n\nI builded 2.01 phar myself: [v2.0.1](https://github.com/deployphp/deployer/releases/tag/v2.0.1)\n\nNow developing Phar-channel for deployer with auto-update, stable and dev-master channels. \n\n>  I'm giving a talk to the Thailand PHP User's group next week about deployer but really could do with there being a working phar file. \n\nCool! If you could share slides or video after event will be great! \n\nAlso you can show Deployer 3, which will be 200% awesome :trophy: \nParallel deployment: \n\n```\ndep deploy --parallel\n```\n Hmmm, a think a get error, will fix it right now. (PhpSecLib :disappointed:)\n\nPS You can always install php extension ssh2 which is very cool.\n Yeah, PEM files. Also working of implementation of PEM support for php-ssh2. \n Fixed, [v2.0.1](https://github.com/deployphp/deployer/releases/tag/v2.0.1)\n Sorry, it was old one. Now must be ok.\n :sweat_smile: :dash:\n  Done.\n Thanks! Fixed.\n Error again.\n Solution: require phpseclib.\n\n```\ncomposer require phpseclib/phpseclib:2.0.*@dev\ncomposer require deployer/deployer:2.0.1\n```\n Done. \n  Now developing v3 on master. v2 is on `2.x` branch.\n\nWhy to use `~2.0-dev`?\n  Yes, of course where will be phar version of Deployer available to download from site (in progress). \n\nNow you can clone master branch and run `php bin/build` command to build phar archive yourself. \n New docs in process...\n\nExample on server configuration:\n\n``` php\nserver(...)\n    ->env('deploy_path', '/home/web');\n```\n\nStages:\n\n``` php\nserverGroup('pre', ['test', 'dev', 'production']);\n```\n  But what is wrong with current build script?\n I'll create new site with autoupdate phar script. It will be triggered automatically when new commits will be pushed or PR megred.\n\nSo it will be `dev-master` phar version available on site :)\n So i close this issue? \n\n@gordalina can you work on WordPress and/or Zend Framework recipes? :trophy: \n Yes, i'm already refactored Symfony recipe (not published yet), not writing tests for what recipe.\n  I think it well be cool to have in next v3.1 release. \n\nIf some one take it, i'll will give free PhpStorm license. :moneybag: \n ![2015-02-20 18 00 23](https://cloud.githubusercontent.com/assets/141232/6288486/6f6e116a-b92a-11e4-907e-8f23c89bb178.png)\nI am good :smile: \n @dirkluijk yes, but only for Core Developers or some one who reach this feature goal :)\n  Cool! Thanks!\n  Now PHP's ext ssh2 does not support ssh agent forwarding. And i'm thinking it will be good to implement it in pure PHP inside Deployer.\n\n![a3d175c2172bf9469483602e552e0a11 media 600x424](https://cloud.githubusercontent.com/assets/141232/5721404/645023fa-9b42-11e4-90f9-2a198e5cfd3f.png)\n\nIs there anyone willing to take for implementation of?\n Done in #175 \n  Try to login on server with same user as in `deploy.php` and run `git pull origin master`.\nAlso now what now deployer does not support ssh agent forwarding, so you need manually add your server keys to git repository.\n Do you execute it manually on you remote servers? \n Hmmm, try to solve this error first. \n\n> 13 \u00ff\u00ed\u00e2. 2015 \u00e3., \u00e2 17:01, Dirk Luijk notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> Yes. It seems the pull does work, although there is an error (still not sure why).\n> \n> [myuser@myserver public_html]$ cd ~/public_html && git pull origin master\n> remote: Counting objects: 3, done.\n> remote: Compressing objects: 100% (3/3), done.\n> remote: Total 3 (delta 2), reused 0 (delta 0)\n> Unpacking objects: 100% (3/3), done.\n> From bitbucket.org:my/repository\n> - branch            master     -> FETCH_HEAD\n>   Updating 76480be..510f4e0\n>   Fast-forward\n>   index.html |    1 +\n>   1 files changed, 1 insertions(+), 0 deletions(-)\n>   Error: spawn EACCES\n>   at errnoException (child_process.js:1001:11)\n>   at Process.ChildProcess._handle.onexit (child_process.js:792:34)\n>   I don't see how this error could possibly block Deployer, so it might have nothing to do with it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Cant say why. Need more information about.\n Yeah. It's bug in PhpSecLib. :(\n\nYou can enable PHP extension ssh2 and everything will be working smoothly. \n  No, now only for 2.x. New docs will be here shortly: https://github.com/deployphp/docs\nAnd new site for 3.x: http://deployer.org\n  Done.\n  Thanks! \n  Yes, it better to check it first. \n But how to test it?\n Done.\n  Thanks! New docs located here: https://github.com/deployphp/docs\n  It's cool feature. And i will implement it very soon in Deployer 3 release. Stay tuned.\n Yes, it's possible to implement this for Symfony2 deploy. Now Deployer runs composer with no-interaction key and this is good solution. But it's really easy to implement parameters.yml creation. \n\nPS I deploy all my Symfony apps with Deployer, and deployment of new code base was ok, even without parameters.yml (Symfony don't connect to db when warming cache).\n Did you run `migration` tasks too?\n Will try to reproduce it myself.\n  What is purpose of using this file?\n  Yeah, sorry about that. I moved `manifest.json` from repo to site deployer.org for Deployer 3. But forgot about version 2. I'll fix that later. Now you can download deployer manually: https://github.com/elfet/deployer/releases\n Fixed.\n  This two PHP 5.4 features: short array notation, $this in Closures.\n\n> Are you going to implement SSH Agent forwarding for authentication?\n\nOnly then ext ssh2 will implement it. \n  Yes, Deployer 3 break backward compatibility. Therefore appeared 3 according to [SemVer](http://semver.org). \nIf you need 2 version you can found it [here](https://github.com/elfet/deployer/tree/2.x).\n  Not now. But will be able in Deployer 3.\n  Yes, it will be possible in Deployer 3. Now you can simple implement it you\u043a self.\n Done! :beers: \nTo deploy specific branch:\n\n``` php\nset('branch', 'master');\n```\n\nTo deploy specific tag:\n\n```\ndep deploy --tag=\"v3.0.0\"\n```\n\nAnd even more. To deploy production stage:\n\n```\ndep deploy production\n```\n\n:gem: :gem: :gem:\n  Thanks!\n  Yes, i know it. Will be solved in Deployer 3.0\n @jnj-devops what do you mean?\n  Thanks! But it's already implemented in v3 9c3734488866e5ff424c8e300ba3a47d848969da\n  I will implement this functionality in Deployer 3 myself without create new functions. Also this PR can not be merged automatically.\n  Great! Can you make PR?\n Fixed.\n  Hmmm,  it is only in `master` branch.  Install it throw composer `dev-master@dev` version. It's will be solver automatically with new Deployer 3 release process.\n  Yes, repository will be transferred when achieve `2000` stars. :grinning:  :star:\n Well, may be `1000` :smile: \n Well, 652 :star: will be enough. Will migrate on this week. :laughing: \n\nWhat we need to do?\n- [x] Transfer repository\n- [x] Edit `composer.json` and publish on packagist\n- [ ] ~~Fork on `elfet/deployer` and edit `composer.json`~~\n\nWhat else @gordalina?\n  Add `/usr/local/bin` to your path.\n  @DropSQL now this does not possible (but you can implement it your self). But Deployer v3 will have `once()` method which will do exactly you want.\n Done in v3.\n  Before i can merge it, please fix tests. \n  This is really cool feature, and i was trying to implement it in older Deployer releases (see aa03eddc242f29f21d8fd9b3ecc7f845dc4d2457).\n\nThe main problem is what deploying in parallel require users to install a lot of other libs and php extensions. \n\nAlso there are problem with shared memory (task may set environment params).\n\nBut now i'm working on v3 which **will have** this feature! :gem: :gem: :gem: \nand **does not require** any of extra php extensions! :sunglasses: :sunny: \n\nIt will be working on processes and sockets. It's will me main feature of Deployer 3.\n Yes, i have started development. I push everything i do to [develop](https://github.com/elfet/deployer/tree/develop) branch.\n  Hmmm. I do not think this is good solution. Can you show use case of that?\n  Cool! Nice! :gem:\n No, phar now does not upgrades to master last push. I'll think of create autoupdating phar server for Deployer 3.\n\n> 21 \u00ed\u00ee\u00ff\u00e1. 2014 \u00e3., \u00e2 17:39, Christian notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> On dev server i am using the phar version, dep self-update should update it to last push, cause it say is already up to date?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n  It is possible to move it to `deb` file.\n So i have just implement this in v3. Looks great! \ud83c\udfb5 No more possible redefinition conflicts!\n\nBTW, that about move function to namespace? Or wait when PHP 5.6 become more popular?\n  I'm thinking to drop support for PHP 5.4 for Deployer 3. And start with 5.5.\n\nWhat do you think? :v: \n I want to use class name resolution via ::class, empty() supports arbitrary expressions, and generators in future. \n I think developer how will use Deployer already migrated to 5.5 on they local machines. But keep support for 5.4 do not difficult. \n So i decided to keep php 5.4 support.\n  Looks like error one of run commands end with error. Run debug mode `deb deploy -vvv`.\n What is server OS?\n\nTry to run next command manually on your server:\n\n```\nif [ ! -d $(echo /home/html/project/public_html/) ]; then mkdir /home/html/project/public_html; fi\n```\n  Thanks!\n  Why we need this deployer? May be it's better to have this in  `cachetool/recipes`? Or separate package? \nYou can use composer for this:\n\n``` php\nrequire 'vendor/gordalina/cachetool/recipe.php'\n```\n  Cool! Great! \n\nPS I'm working on automatic testing of recipes. :recycle: \n  ~~Ban~~ Bad solution to have `sfconsole` function.\n What purposes of this function?\n Detecting bin dir is good think. But adding a new function - it is complicated. Lets try to keep it simple as possible, but not simple.\n Now i'm working on better concept of environments for v3. It's will bring better solution for that. \n Well.. yes :smile: \n Done in v3.\n  Yes, i was thinking about release schedule. \nI follow [semantic versioning](http://semver.org/) (not too strictly, no 32+ versions #)\n\nI think to leave `master` branch for next development and beta releases. After v3 is releases, i'll drop `develop` branch and set `master` on top of it. Branch `2.x` will be fast-forwarded. And if you need new features i think it's better to specify something like this:\n\n```\n\"elfet/deployer\": \"2.*@dev\"\n```\n\nBTW, i'll separate [site](https://github.com/deployphp/deployphp.github.io) and [docs](https://github.com/deployphp/docs) from this repository.\n For phar's i will keep autoupdating pre-releases of `master` branch in `manifest.json`.\n  Cool!\n  Great! Thanks!\n  Great!\n No. Now did not. I'll think of making better docs for v3.\n  So cool! Thanks!\n  Thanks a lot!\n  Ok, i'll add this but in different way - allow to specify composer options.\n  What do you think?\n Done.\n  I'll will take your code to v3, and try to implement this without creation own Input class. Try to keep KISS. \ud83d\udc7e\n Added in 9c3734488866e5ff424c8e300ba3a47d848969da\n  Great! Thanks!\n Lets talk about that! :cactus: \n @nicodmf i'm agree. `composer install` should be with `run-scripts`. what could be the possible bugs with this?\n  Yes. Got this error too. `kherge/amend` moved repo to another user `box-project/amend`. But Deployer steel working as required. `kherge/amend` needs only for self-upgrading in phar.\n I created issue in `kherge/amend`.\n Fixed with [#8](https://github.com/box-project/amend/issues/8)\n  Great! will be merged to v3. \n  Now i do not know solution for that. I'll research this tomorrow. Provide more information. \n\n> 29 \u00ee\u00ea\u00f2. 2014 \u00e3., \u00e2 12:20, Eugeny Fomin notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> In my case I have different ssh keys on my deploy host and my git repository. For that I use \"forward_agent\" option in ruby lib \"net-ssh\".\n> \n> I have researched that and unfortunately found that libssh2 and therefore \"pecl_ssh2\" don't support forwarding agent. Only it prevents me to use \"deployer\" in my projects.\n> \n> @elfet Do you have any ideas how to bypass it?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n What about using command for cloning like this?\n\n```\nssh-agent (ssh-add /path/ssh_keys; git clone git@github.com:user/project.git)\n```\n\nAnd upload ssh keys manually to each server.\n\nDid you try to add `ForwardAgent yes` in `~/.ssh/config` file?\n Now its only way to do this. May be it is possible to use ruby lib \"net-ssh\" as ssh client for deployer... :fast_forward: \n Will be waiting for pecl ext update.\n Yes, now this is only solution. Will try to come up with something. \n\n> 29 \u00e4\u00e5\u00ea. 2014 \u00e3., \u00e2 10:59, Timur notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> Hello, do I understand it right, that at the moment only way to use deployer is the manually add ssh-keys from deployment servers to my git repository?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Will be if i will implement native ssh agent.\n  Updating instead of install it is bad practice. I do not think it is good idea including this to recipe. \n Yes, please remove update actions. And, please, update docs via separate PR, add info about this feature and why composer update it's bad. :octocat: \n > With updating the docs do you mean the README.md or the docs on deployer.in\n\nI mean deployer.in. \n  Yes, sorry for what. It's just example on options. Branches support will be in Deployer v3.\n  Hmmm, i'm thinking of better parameters organization for simple understanding recipes. \n Branch 2.x only for bugfix. All new features come to master and will be released in Deployer 3.\n\nI will manually merge this PR in my working copy to avoid conflict.\n I'll merge all your contributing features to Deployer 3 and it will be stable at 3.0.0 after one beta version. \nAnd v3 will be more stable with new tests of src and even of recipes tests. \n  Great enhancement! Deployer will have atomic symlink swap in v3. Now i'm working on Deployer 3.0.0 which will be 100% more awesome, flexible and secure. It will be able to run task in parallel and have better code coverage with tests.\n It is too early for v3 to publish. Will try to finish first parts as soon as possible. A little busy on main work. \n\nWhat is ETA? \n\n> 22 \u00ee\u00ea\u00f2. 2014 \u00e3., \u00e2 20:47, Mattia Trapani notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> Great! Can you push the v3 branch as develop on Github? Or is it too early? Do you have an ETA?\n> BTW, your package is so intuitive I managed deploying an app with atomic swapping in like 10 minutes!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Noup. :) I'm working on this at my free time. \n\n> 22 \u043e\u043a\u0442. 2014 \u0433., \u0432 21:24, Mattia Trapani notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> Estimated Time of Arrival. If you have one :) \n> \n> On Wed, Oct 22, 2014 at 7:09 PM, Anton notifications@github.com wrote: \n> \n> > It is too early for v3 to publish. Will try to finish first parts as soon \n> > as possible. A little busy on main work. \n> > \n> > What is ETA? \n> > \n> > > 22 \u00ee\u00ea\u00f2. 2014 \u00e3., \u00e2 20:47, Mattia Trapani notifications@github.com \n> > > \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0): \n> > > \n> > > Great! Can you push the v3 branch as develop on Github? Or is it too \n> > > early? Do you have an ETA? \n> > > BTW, your package is so intuitive I managed deploying an app with atomic \n> > > swapping in like 10 minutes! \n> > > \n> > > \u2014 \n> > > Reply to this email directly or view it on GitHub. \n> > \n> > \u2014 \n> > Reply to this email directly or view it on GitHub \n> > https://github.com/elfet/deployer/issues/73#issuecomment-60119680. \n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub.\n  How do you run your command? Please show all deploy.php file.\n Looks lite every this is ok. How do you run commands? Is `testit` task working?\n Cannot reproduce. :recycle: \n  Try to `git clone` on deploy server manually.\n Please show me your `deploy.php` configuration. \n You need to specify you public and private keys paths:\n\n``` php\nserver(...)\n    ...\n    ->pubKey('~/.ssh/id_rsa.pub', '~/.ssh/id_rsa', 'pass phrase');\n```\n Yes, sorry. It is for accessing web server. Now i do not know why git cannt access repo on your server. \n\n> 10 \u00ee\u00ea\u00f2. 2014 \u00e3., \u00e2 17:55, Glend Gjermeni notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> If I'm not mistaken, those keys are for accessing the server, not th erepository itself. Unfortunately, I don't have the keys and they are only generated on droplet creation at DigitalOcean? Is there another workaround?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n  Hmmm.\n  Now deployer does not try to check and correct you server permissions. It is you\u043a work to set correct permissions on your server. I can set your permissions manually or with Deployer.\n Will fix this in new version.\n Fixed. Now using `setfacl`.\n  I'm thinking about this options too. \n\nWhich name is better?\n- --files, -f\n- --include, -i\n- --config, -c\n Yes, it, will be file/f\n\n> 3 \u00ed\u00ee\u00ff\u00e1. 2014 \u00e3., \u00e2 9:15, Alex Stansfield notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> i'm happy to add this as I could do with the feature. Will it be --file and -f?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Solved in #86 \n  You could not deploy with ftp, but you can deploy via copy of your source to remote server via ssh.\n  Thanks!\n  Thanks a lot!\n  Did you create deploy.php?\n Are you run `php dep` command in directory with `deploy.php` script? \n  You are really need to override task? :octocat: \n Good reason. So, i'll implement task override. Now we needs to choose API for that. \nMay be 'overrideTask'?\n\n> 04 \u00f1\u00e5\u00ed\u00f2. 2014 \u00e3., \u00e2 19:02, Aled Bartholomew notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> I have a slightly different/custom setup, so for me it would be handy to be able to override a task e.g. deploy:update_code while keeping all other tasks unchanged.\n> \n> Currently it seems that you can add functions to a task, but that wouldn't be ideal if you want to change code being executed in a task. My workaround has been to duplicate the recipe and make changes, which is okay but isn't ideal because it may not be in keeping with your future code updates.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Done in v3.\n  It will be in docs.\n\nYou can override `deploy:update_code` task.\n Can you open PR for this? As separate recipe?\n :+1: \n @johnny-bit this is good work flow. But i think it's better to decouple rsync tasks/recipe from others. \nA lot of people will be using just rsync tasks with standard workflow (sudo, ACL, composer, bower on server) and for then will be god to has separate rsync recipe.\nOtherwise, your shared-hosting workflow it's too very common and it will be grate has separate recipe to this workflow too! \n  Thanks a lot!\n  Thanks!\n  Close as #56\n  I was working on docs online, sorry about that :)\n  Good one! Thanks!\n  I think this is better:\n\n``` php\nrun('some.sh --param=? || anything_else ?', ['foo', 'zoo']);\n```\n I'll fix it in Deployer 3.\n  I'll refactor Deployer on this weekends, so it will be match easer to implement this functionality. \n in Deployer 3 i'll fix it by my self. Thanks you any way! \n  I think it's bad decision, because may be unfamiliar to users. And this is also make incompatible API changes.\n I do not think this is good solution.\n Closing this issue as non necessary.\n  Yes, it will be good. But a lot of users will write it without `/` on end. So we need to guess it on server.\n Done.\n  Yes, it's good thing. I'm really want to move from static variables and write good tests. I'll refactor deployer on this weekends. \n Refactoring completed! Write tests! :dart: Closing. \n  Is it not too long? :smile_cat: \n I think alias is simple and good solution. Make 'deployer.php' as main and 'deploy.php' as alternative. \n Solved in #86 \n  Yes! Good enhancement! I'll do this.\n Now we have [composer.php](https://github.com/elfet/deployer/blob/master/recipe/composer.php) recipe which is can be used for simple composer based projects.\n  I'm trying to sol\u043c\u0443 this problem too. Looking for ext-ssh2 solution...\n @Mihailoff yes, i'm going to pull your changes. But i think here is another solution. Can you test it?\n\nTry replace line [28](https://github.com/elfet/deployer/blob/master/bin/dep#L28) in file `bin/dep` with:\n\n``` php\nset_include_path(__DIR__ . '/../' . PATH_SEPARATOR . get_include_path());\n```\n Yes, phpseclib old lib. I will try to convert notices to exceptions. \n This is phpseclib error reporting and it's sucks. Install on your local machine php extension ssh2, it's the better way and you will get better error reporting. \n\nPhpseclib now developing a new version on this library with better support of new php staff. Then they will finish it, i'll migrate to it. \n\nNow i'm working on Deployer 3 version which will be 100% more awesome, flexible and secure. It will be able to run task in parallel and have better code coverage with tests. \n\n> 22 \u00ee\u00ea\u00f2. 2014 \u00e3., \u00e2 8:29, Alex Stansfield notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> I was getting this because of an error in my configuration.\n> \n> I was not specifying a password for the ssh key defaults the password to a blank string rather than prompting for it. I fixed this by setting the password null and everything worked again.\n> \n> The issues I had were I didn't get an error message telling me what the problem was, just the \"No compatible server to client encryption algorithms\" notice and then it reports a successful deployment.\n> \n> This is a little scary in my opinion. We want to use deployer.in, but are stuck with capifony until we can trust it to tell us the correct outcome.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n I will continuing develop(bug fix) for v2(now it's on separate branch), but all new features will be in v3. My time frame is for Deployer is very small, but i trying to get some) \n`copy_vendors` it is cool feature and i definitely will implement this. \n Great! Thanks! :deciduous_tree: \n  Yeah, i did this for printing version on build phar. But Composer installs... Will fix.\n Fixed in 2.0.0.\n  Thanks! Forgot to release. Fixed. \n  Now Deployer support only PHP API. I do not know hot to write tasks in YAML (i need example). \n\nDeployer support diff env, you can define task and check which env is current and do some stuff. Main goal of Deployer is to consistent servers.\n I'll make loading 'loadConfig' function. \n\n> 06 \u00e0\u00e2\u00e3. 2014 \u00e3., \u00e2 22:35, George Mihailov notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> I think there is no easy way of writing tasks in YAML, but at least configuration could be done\n> \n> server('main', 'site.com')\n>     ->path('/home/user/site.com')\n>     ->user('user')\n>     ->pubKey();\n> server:\n>     main:\n>         host: site.com\n>         path: /home/user/site.com\n>         user: user\n>         pubKey: ...\n> \u2014\n> Reply to this email directly or view it on GitHub.\n I think this is complication. Deployer itself has very simple API. \n YAML for settings i think is good, so it will be nice to implement Symfony Config Component.\n @Mihailoff great news! Now Deployer support server configuration via YANL files: http://deployer.org/docs/servers\n\nAnd soon will be able to define entire `deploy.php` as `deploy.yml`.\n  Cool! :+1: But fix test and add some new :smiley: \n  So, what about finish todo's first? :) \n Great! I'll merge this PR later. Can also write tests and docs for multistage?\n I'll reorganize docs soon, and it will be easer to write them.  \n\n> 06 \u00e0\u00e2\u00e3. 2014 \u00e3., \u00e2 15:10, Jelte Steijaert notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> Added support for options per stage, so that you can define a branch per stage.\n> \n> Will write tests and docs for this\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n  Yes, thanks! \n\nI should add recipes tests for all php version. :+1:  \n Fixed.\n  Oww. Nice. that os do you use?\n So is it bug in Jelastic apache2.2 web-server or shoud i update deployer? If yes, can you create pull request? :purple_heart: \n  You can use [openssl_pkey_get_public](openssl_pkey_get_public) to extract the pub/private keys.\nI will try to implement this automatically in next release. \n Ok, i'll try to deploy on AWS by myself.\n Here it is http://deployer.in/#with-pem-file :gem: \n Use 'pemFile' instead of 'setPemFile'.\n\n> 30 \u0438\u044e\u043b\u044f 2014 \u0433., \u0432 18:21, Josh Butts notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> Cool, I looked at the code you changed and it seems fairly obvious, but it doesn't seem to work for me.\n> \n> [josh@orangeslice ~/projects/seaglass (master)]$ dep deploy\n> Preparing server for deploy.................................Password: \n> \u2714\n> Updating code...............................................\u2714\n> Installing vendors..........................................\u2714\n> Creating symlink to release.................................\u2714\n> Cleaning up old releases....................................\u2714\n> Successfully deployed on banzai.aws\n> But nothing actually happens. There is no password, not sure why it's prompting for that. I hit enter at the password prompt and everything completes without error, but nothing is copied or checked out.\n> \n> Redacted code from deploy file:\n> \n> <?php\n> require 'recipe/composer.php';\n> set('use_ssh2', false);\n> set(\"repository\", \"git@github.com:org/repo.git\");\n> \n> server(\"web\", \"server.aws\")\n>     ->user(\"ubuntu\")\n>     ->path('/www/repo-deploytest')\n>     ->setPemFile(\"~/.ssh/aws.pem\");\n> \n> I'm happy to contribute as necessary to make this work.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n I'll make all set methods private to clearly api. \n\n> 30 \u00e8\u00fe\u00eb\u00ff 2014 \u00e3., \u00e2 21:22, Josh Butts notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> Ah, a simple error on my part. Works flawlessly now. Thanks so much for adding this.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n  I created pull request to php-ssh to move ext-ssh2 to suggest. If it will be rejected, i'll will move it in deployer.\n From now Deployer will be using my [php-ssh](https://github.com/elfet/php-ssh) fork.\n  Yes. Staging is possible to be implemented. But i never use it in capistrano, so i do not know what to do and how they shoud work. You can try to implement it your-self and do a pull request (preferred) or explain to me what is multistaging and how it shoud work and i'll impement this. \n  There are a lot of way to do it. It's all relevant to what you want to do. \n\nNow you can do something like this (If you need only one server, use something like this):\n\n``` php\ntask('one', function () {\n    if (config()->getName() === 'my-server') {\n        // Do your stuff...\n    }\n});\n```\n\nI was thinking about `task(...)->onlyOnServers([...])` api, but does not sure of this.\n It is possible to create `task(...)->once()` method, but then no `env()` or `config()` function will be available in task body.\n `set` and `get` a global, so yes.\n\nWith 'once' function call stack will be looks like this:\n\n```\ntask1 on server1\ntask1 on server2\ntask1 on server3\n\ntask2 on server1\ntask2 on server2\ntask2 on server3\n\ntask3_once\n\ntask4 on server1\ntask4 on server2\ntask4 on server3\n```\n Yes, you can place it there are you want. \n\nI will implement this on next week.\n Yes, does not have roles yet, but very interesting solution. \n\n> 06 \u00f1\u00e5\u00ed\u00f2. 2014 \u00e3., \u00e2 8:42, Nikolay notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> Capistrano have roles :)\n> So you can specify roles to each server and then specify roles to tasks.\n> For example:\n> \n> server('server1')->roles(array('frontend', 'upload'));\n> server('server2')->roles(array('frontend'));\n> server('server3')->roles(array('backend'));\n> server('server4')->roles(array('backend'));\n> server('server5')->roles(array('backend'));\n> server('server6')->roles(array('backend', 'crontab', 'primary')); // crontab working here and primary means that tasks to migrate database or some other migrate task should be executed here (not on each servers)\n> Then you specify roles on task:\n> task \"Reload nginx\" have roles frontend and upload, because each of these roles uses nginx (other servers do not have nginx)\n> task \"Reload php5-fpm\" have roles backend, because this role uses php5-fpm (other servers do not have php5-fpm)\n> task \"Refresh crontab\" have roles crontab, because this role manages crontab tasks (other servers do not have crontab tasks. Only this server runs tasks periodically).\n> task \"Migrate\" have roles primary, because this role manages runs some migrate script to migrate environment (database, caches, etc.) This role do not need to be invoked on each servers.\n> task \"Warmup caches\" have roles primary, because this role do not need to be invoked on each servers\n> \n> Then we have simple deploy scenario:\n> ...\n> deply.scm...\n> ....\n> Refresh crontab\n> Migrate\n> Reload php5-fpm\n> Warmup caches\n> Reload nginx\n> \n> As I understand this project does not have \"roles\" yet?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Yes, it's very easy to implement. \n\n> 06 \u00f1\u00e5\u00ed\u00f2. 2014 \u00e3., \u00e2 20:34, Nikolay notifications@github.com \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> \n> It is very old solution and was implemented in capistrano from first dates AFAIK...\n> It is very important thing when you have more then one server for your deployment.\n> I was looking for some other product and found this one, but i can not use it because i have 10+ servers with different roles and different software :)\n> But seems like there is not difficult to implement it...\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Task with `once()` does not get info about server and env. Maybe will be better name it `local()`? \n\n`once()` feature will appears in v3.\n  Thanks a lot! Grammar is my weakness :rabbit2: \n  Thanks a lot!\n  Yes, it what i'm will do at first, i started with Symfony recipe to understand that to include in basic/common recipe.\n I create `common.php` recipe: [common.php](https://github.com/elfet/deployer/blob/master/recipe/common.php)\n  I'm working on it.\n  Ok, will add this.\n  Ok, will add.\n  How do you think to download?\n Add `download` function to 1.0 brunch.\n  It's failed.\n Can you do another pull request?\n  Yes ignore commads is just patterns to match. I will think about creating behavior like in .gitignore file.\n In 1.0 branch no more ignore function.\n  What about next chars: `\\ + * ? [ ^ ] $ ( ) { } = ! < > | : -`?\n Can you create a new tag and phar, please?\n  > Command \"prod\" is not defined.\n\nSo there are no \"prod\" command. How do you run this command? Show your `delpoy.php` script.\n Strange. It is work for me.\n Yes, it is a bug. I will fix it tomorrow.\n\n> Regarding the code if no third param is given the second should be taken\n> as the callback function.\n> I didn't go very deep in the code but that's what I assume from examples\n> and certain code parts.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/elfet/deployer/issues/8#issuecomment-35673133\n> .\n Fixed in 1.0\n  Thanks! I'll will test PHAR archive.\n 1.0 branch now support ssh2 ext.\n It looks like no compatible server to client encryption algorithms found.\n\nTry to install php ssh2 extension. It's more faster and better than phpseclib. \n Try to install ssh2 extension.\n  Thanks a lot!\n  I'll think about adding pssh support. \n Thanks! Very interesting. It will help.\n I learned **pssh** and concluded that this extension is not popular and difficult to install, so that it will not be supported.\n  I prefer to use PSR-2. I also modified your implementation to use RemoteGroup class. \n\n``` php\nconnect('host', 'user', 'passport', 'node');\n//\u2026\ngroup('node', function () {\n    upload('/from', '/to');    \n});\n```\n :ok_hand: Please, check new implementation.\n Release will be a few days later, after the check of working.\n Did you tested 0.4.0 version? Is it working properly? \n By default `cd`, `run`, `upload` execute on all connections. So you simply need to \n\n```\n cd(...);\n```\n\nonce. \n\nI also think about change implementation to something with `each`.\n Take a loot at example in my blog: http://elfet.ru/deployer-update-0.4.0/\n That is bug. RemoteGroup::execute does not return anything. Can you create pull request with fix and test for it? Or i can do this on next week. \n", "text_all_count": 22584, "text_word_token": ["Please", "show", "more", "about", "your", "case", "Some", "time", "i", "be", "use", "it", "for", "many", "servers", "NUMBER", "smile", "rayman", "v", "Default", "Deployer", "not", "support", "your", "case", "but", "you", "can", "make", "a", "task", "for", "it", "NUMBER", "php", "file", "deploy", "NUMBER", "php", "option", "release", "version", "null", "Symfony", "Component", "Console", "Input", "InputOption", "VALUE_OPTIONAL", "A", "release", "version", "NUMBER", "task", "deploy", "set_version", "function", "version", "input", "getOption", "release", "version", "release", "env", "releases_list", "if", "in_array", "version", "release", "throw", "new", "RuntimeException", "Released", "version", "not", "find", "run", "cd", "deploy_path", "ln", "sfn", "deploy_path", "release", "version", "current", "Atomic", "override", "symlink", "NUMBER", "And", "run", "shell", "dep", "deploy", "set_version", "release", "version", "NUMBER", "Please", "use", "public", "key", "instead", "enter", "password", "NUMBER", "You", "can", "find", "document", "from", "LINK", "Or", "get", "start", "with", "steps", "NUMBER", "Install", "Deployer", "NUMBER", "Make", "a", "deploy", "NUMBER", "php", "and", "require", "recipe", "for", "Yii", "framework", "NUMBER", "Change", "server", "config", "to", "correct", "with", "your", "enviroment", "NUMBER", "Run", "deploy", "command", "Any", "question", "you", "can", "post", "here", "or", "LINK", "Goodluck", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "Starting", "from", "Symfony", "NUMBER", "Assetic", "be", "no", "longer", "include", "by", "default", "in", "the", "Symfony", "Standard", "Edition", "NUMBER", "Refer", "to", "this", "article", "to", "learn", "how", "to", "install", "and", "enable", "Assetic", "in", "your", "Symfony", "application", "NUMBER", "LINK", "LINK", "_management", "NUMBER", "html", "Please", "check", "shell", "of", "your", "server", "NUMBER", "echo", "NUMBER", "Thank", "veloxy", "NUMBER", "I", "fix", "RicardoJ", "I", "think", "you", "should", "make", "a", "custom", "task", "for", "this", "feature", "NUMBER", "Becasue", "sometime", "deployers", "want", "deploy", "a", "develop", "version", "for", "test", "of", "build", "CI", "NUMBER", "They", "will", "have", "many", "tag", "version", "be", "created", "by", "Deployer", "NUMBER", "What", "be", "you", "thing", "if", "we", "will", "log", "deploy", "version", "in", "to", "a", "file", "RicardoJ", "I", "see", "you", "implement", "feature", "use", "deployer", "NUMBER", "lock", "file", "NUMBER", "What", "be", "you", "thing", "if", "we", "will", "log", "deploy", "version", "in", "to", "a", "file", "Can", "you", "help", "us", "this", "feature", "Is", "directory", "var", "www", "html", "website", "existed", "on", "your", "server", "I", "think", "error", "by", "directory", "var", "www", "html", "website", "not", "exist", "and", "command", "cd", "failure", "NUMBER", "Thank", "cjsewell", "Nice", "job", "NUMBER", "We", "need", "time", "for", "test", "before", "merge", "it", "NUMBER", "I", "be", "not", "sure", "but", "can", "you", "need", "share", "_ss_environment", "NUMBER", "php", "file", "LINK", "and", "run", "setting", "up", "a", "local", "silverstripe", "dev", "environment", "ref", "hub", "cjsewell", "Thank", "you", "Now", "can", "you", "help", "me", "test", "and", "confirm", "this", "recipe", "elfet", "This", "seems", "like", "an", "ssh", "NUMBER", "extension", "bug", "bilougit", "LINK", "NUMBER", "alexdevid", "You", "can", "try", "git", "clone", "LINK", "bitbucket", "NUMBER", "org", "team", "repo", "NUMBER", "git", "But", "it", "be", "bad", "ideal", "NUMBER", "What", "do", "you", "think", "about", "Executing", "task", "deploy", "start", "on", "test", "svr", "cd", "if", "d", "app", "source", "then", "mkdir", "p", "app", "source", "fi", "do", "on", "test", "svr", "Ok", "NUMBER", "s", "NUMBER", "ms", "Executing", "task", "deploy", "prepare", "on", "test", "svr", "echo", "NUMBER", "TAG", "if", "d", "app", "source", "then", "mkdir", "p", "app", "source", "fi", "if", "L", "app", "source", "current", "d", "app", "source", "current", "then", "echo", "true", "fi", "cd", "app", "source", "if", "d", "release", "then", "mkdir", "release", "fi", "cd", "app", "source", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "test", "svr", "Ok", "NUMBER", "s", "NUMBER", "ms", "Executing", "task", "deploy", "release", "on", "test", "svr", "if", "d", "app", "source", "release", "NUMBER", "then", "echo", "true", "fi", "mkdir", "app", "source", "release", "NUMBER", "cd", "app", "source", "if", "h", "release", "then", "rm", "release", "fi", "ln", "s", "app", "source", "release", "NUMBER", "app", "source", "release", "do", "on", "test", "svr", "Ok", "NUMBER", "s", "NUMBER", "ms", "Please", "try", "run", "with", "vvv", "option", "and", "see", "output", "NUMBER", "Fixed", "with", "commit", "NUMBER", "a", "Can", "you", "check", "agent", "on", "your", "machine", "Windows", "I", "suggest", "you", "should", "use", "git", "bash", "and", "run", "some", "commands", "before", "deploy", "NUMBER", "eval", "ssh", "agent", "s", "ssh", "add", "path", "to", "key", "ssh", "add", "l", "dep", "deploy", "prod", "vvv", "fede", "NUMBER", "it", "Please", "run", "commands", "as", "my", "suggestion", "NUMBER", "Your", "error", "be", "you", "haven", "t", "authentication", "agent", "NUMBER", "And", "command", "eval", "ssh", "agent", "s", "to", "start", "a", "ssh", "agent", "NUMBER", "smile", "fede", "NUMBER", "it", "Are", "you", "have", "any", "other", "question", "This", "feature", "be", "implement", "but", "it", "be", "out", "of", "date", "NUMBER", "Can", "you", "make", "a", "PR", "You", "can", "dep", "init", "NUMBER", "Documents", "be", "not", "update", "NUMBER", "Can", "you", "make", "a", "PR", "for", "document", "I", "think", "this", "idea", "be", "good", "but", "also", "other", "options", "argument", "What", "would", "you", "do", "with", "them", "Can", "you", "show", "more", "info", "Eg", "an", "example", "task", "deploy", "NUMBER", "php", "I", "don", "t", "think", "use", "composer", "update", "be", "good", "action", "NUMBER", "It", "will", "update", "your", "vendors", "and", "composer", "NUMBER", "lock", "file", "when", "deploying", "NUMBER", "If", "you", "want", "update", "vendors", "i", "think", "you", "should", "run", "update", "on", "your", "dev", "server", "test", "all", "features", "and", "make", "a", "commit", "change", "composer", "NUMBER", "lock", "file", "NUMBER", "robfrawley", "If", "you", "want", "use", "composer", "update", "you", "can", "make", "a", "custom", "task", "NUMBER", "If", "you", "want", "update", "vendors", "i", "think", "you", "should", "use", "flow", "Step", "NUMBER", "run", "composer", "update", "on", "your", "work", "machine", "may", "be", "by", "hand", "Step", "NUMBER", "test", "all", "features", "run", "unit", "test", "Step", "NUMBER", "make", "a", "commit", "change", "composer", "NUMBER", "lock", "file", "NUMBER", "Step", "NUMBER", "deploy", "to", "server", "LINK", "its", "all", "about", "the", "lock", "file", "Other", "point", "server", "dev", "svr", "NUMBER", "stage", "dev", "env", "prod", "WTF", "I", "think", "it", "makes", "users", "puzzled", "scream", "Currently", "only", "symfony", "recipe", "use", "env", "env", "NUMBER", "But", "after", "merge", "this", "PR", "all", "recipe", "will", "have", "to", "set", "env", "env", "NUMBER", "Variable", "name", "makes", "users", "puzzled", "NUMBER", "What", "do", "you", "think", "about", "this", "code", "env", "composer_action", "install", "env", "composer_options", "install", "no", "dev", "verbose", "prefer", "dist", "optimize", "autoloader", "no", "progress", "no", "interaction", "env", "env_vars", "For", "Composer", "installation", "NUMBER", "Like", "SYMFONY_ENV", "prod", "robfrawley", "env", "composer_action", "install", "env", "composer_options", "install", "no", "dev", "verbose", "prefer", "dist", "optimize", "autoloader", "no", "progress", "no", "interaction", "env", "env_vars", "For", "Composer", "installation", "NUMBER", "Like", "SYMFONY_ENV", "prod", "Why", "No", "break", "BC", "Don", "t", "need", "change", "for", "old", "use", "projects", "Allow", "change", "action", "of", "composer", "install", "or", "update", "very", "flexible", "and", "simple", "Don", "t", "need", "env", "env", "of", "env", "build_env", "for", "all", "recipe", "elfet", "I", "be", "agree", "with", "you", "NUMBER", "Users", "can", "use", "composer", "update", "by", "hand", "or", "custom", "task", "Thank", "you", "for", "PR", "NUMBER", "But", "i", "think", "you", "should", "make", "only", "pull", "request", "for", "all", "problem", "correct", "bug", "appointed", "by", "scrutinizer", "Thank", "you", "This", "PR", "be", "merge", "by", "commit", "NUMBER", "a", "NUMBER", "de", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "fef", "NUMBER", "c", "NUMBER", "f", "NUMBER", "a", "Thank", "you", "This", "PR", "be", "merge", "by", "commit", "NUMBER", "a", "NUMBER", "de", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "fef", "NUMBER", "c", "NUMBER", "f", "NUMBER", "a", "Thank", "you", "This", "PR", "be", "merge", "by", "commit", "NUMBER", "a", "NUMBER", "de", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "fef", "NUMBER", "c", "NUMBER", "f", "NUMBER", "a", "I", "think", "this", "be", "problem", "of", "phpseclib", "NUMBER", "You", "should", "report", "for", "phpseclib", "projects", "Deployer", "use", "a", "stable", "version", "of", "phpseclib", "NUMBER", "But", "this", "change", "of", "phpseclib", "only", "exist", "on", "master", "branch", "and", "not", "include", "any", "stable", "version", "NUMBER", "This", "problem", "will", "be", "resolve", "after", "phpseclib", "release", "a", "new", "version", "NUMBER", "x", "Close", "this", "issue", "NUMBER", "Please", "follow", "NUMBER", "Your", "problem", "Your", "machine", "SSH", "Proxy", "server", "SSH", "Deploy", "Server", "With", "Proxy", "Server", "Deploy", "Server", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "NUMBER", "pick", "NUMBER", "I", "want", "confirm", "your", "problem", "to", "find", "solution", "NUMBER", "I", "be", "not", "sure", "but", "you", "should", "try", "add", "ssh", "proxy", "to", "a", "ssh", "config", "file", "and", "use", "config", "file", "method", "for", "authentication", "with", "ext", "ssh", "NUMBER", "Proxy", "Server", "Deploy", "Server", "IP", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "Port", "NUMBER", "NUMBER", "User", "user", "NUMBER", "user", "NUMBER", "Key", "key", "id_rsa", "key", "id_rsa", "ssh", "config", "file", "on", "your", "machine", "Host", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "Hostname", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "IdentityFile", "NUMBER", "ssh", "id_rsa", "ProxyCommand", "ssh", "q", "W", "h", "p", "user", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "ForwardAgent", "yes", "deploy", "NUMBER", "php", "TAG", "user", "user", "NUMBER", "configFile", "path", "to", "NUMBER", "ssh", "config", "stage", "production", "env", "deploy_path", "var", "www", "XXX", "www", "Specify", "the", "repository", "from", "which", "to", "download", "your", "project", "s", "code", "NUMBER", "set", "repository", "LINK", "ssh", "add", "key", "id_rsa", "bin", "dep", "deploy", "production", "vvv", "pick", "NUMBER", "You", "have", "use", "ext", "ssh", "NUMBER", "NUMBER", "Please", "install", "php", "extention", "ssh", "NUMBER", "and", "add", "a", "line", "to", "deploy", "NUMBER", "php", "require", "recipe", "symfony", "NUMBER", "php", "set", "ssh_type", "ext", "ssh", "NUMBER", "TAG", "user", "user", "NUMBER", "configFile", "path", "to", "NUMBER", "ssh", "config", "stage", "production", "env", "deploy_path", "var", "www", "XXX", "www", "Specify", "the", "repository", "from", "which", "to", "download", "your", "project", "s", "code", "NUMBER", "set", "repository", "LINK", "pick", "NUMBER", "Please", "check", "your", "ssh", "proxy", "command", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "NUMBER", "elfet", "StyleCI", "check", "and", "don", "t", "allow", "a", "blank", "line", "in", "before", "and", "after", "function", "body", "NUMBER", "Current", "in", "master", "branch", "this", "error", "be", "exist", "NUMBER", "This", "PR", "be", "merge", "from", "master", "so", "it", "have", "error", "NUMBER", "What", "be", "you", "think", "about", "an", "other", "PR", "to", "fix", "StyleCI", "elfet", "This", "PR", "be", "refactored", "Ping", "elfet", "Baltazardoung", "Thank", "for", "report", "bug", "NUMBER", "It", "will", "fix", "with", "NUMBER", "Yes", "NUMBER", "It", "wil", "be", "fix", "in", "branch", "NUMBER", "x", "I", "merge", "to", "NUMBER", "x", "Yes", "NUMBER", "This", "be", "compare", "between", "use", "NUMBER", "php", "and", "NUMBER", "yml", "file", "Feature", "Using", "php", "file", "Using", "yaml", "file", "Simple", "No", "Like", "code", "Yes", "Static", "environment", "value", "Yes", "Yes", "Dynamic", "environment", "value", "Yes", "No", "I", "like", "use", "php", "file", "and", "each", "file", "be", "a", "stage", "As", "that", "i", "can", "commit", "a", "example", "stage", "and", "ignore", "my", "production", "stage", "NUMBER", "smile", "Please", "try", "require", "recipe", "laravel", "NUMBER", "php", "And", "run", "with", "option", "vvv", "Yes", "you", "can", "NUMBER", "See", "example", "oanhnn", "deployer", "example", "LINK", "Edit", "deploy", "NUMBER", "php", "file", "end", "of", "file", "like", "foreach", "glob", "__DIR__", "NUMBER", "stage", "NUMBER", "php", "as", "filename", "include", "filename", "serverList", "__DIR__", "NUMBER", "stage", "servers", "NUMBER", "yml", "Your", "problem", "like", "NUMBER", "It", "will", "be", "fix", "in", "Deployer", "v", "NUMBER", "x", "NUMBER", "But", "now", "you", "can", "fix", "it", "with", "commit", "LINK", "eva", "xuyen", "Can", "you", "show", "output", "of", "command", "ssh", "add", "l", "ssh", "v", "ssh", "xxxxx", "xxxxx", "NUMBER", "com", "NUMBER", "br", "nhp", "Can", "you", "set", "NULL", "value", "to", "password", "or", "passphrase", "smile", "Deployer", "will", "pause", "and", "require", "input", "a", "password", "dimoniet", "I", "think", "you", "should", "make", "a", "PR", "with", "logging", "feature", "only", "NUMBER", "Users", "can", "send", "email", "by", "a", "custom", "success", "task", "NUMBER", "Thankyou", "NUMBER", "But", "NUMBER", "I", "think", "this", "case", "only", "useful", "when", "you", "commit", "composer", "NUMBER", "phar", "to", "repo", "or", "having", "a", "task", "copy", "composer", "NUMBER", "phar", "to", "here", "before", "it", "check", "NUMBER", "Because", "release", "directory", "be", "created", "new", "NUMBER", "NUMBER", "Please", "check", "my", "comment", "NUMBER", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "NUMBER", "This", "PR", "have", "a", "BC", "break", "The", "BC", "break", "be", "revert", "elfet", "Please", "add", "label", "bugfix", "Are", "you", "miss", "password", "parameter", "In", "Deployer", "document", "LINK", "test", "NUMBER", "vendor", "host", "myhost", "NUMBER", "de", "port", "NUMBER", "user", "xxxxxx", "identity_file", "public_key", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "private_key", "NUMBER", "ssh", "id_rsa", "password", "null", "deploy_path", "var", "www", "project", "branch", "master", "khromov", "Thank", "you", "for", "your", "idea", "NUMBER", "It", "be", "good", "but", "it", "can", "have", "use", "root", "privilege", "NUMBER", "We", "will", "think", "about", "it", "NUMBER", "Please", "check", "you", "key", "NUMBER", "Compare", "NUMBER", "commands", "output", "ssh", "i", "path", "to", "you", "key", "v", "root", "server", "NUMBER", "and", "ssh", "A", "v", "root", "server", "NUMBER", "Out", "put", "will", "show", "what", "key", "you", "use", "NUMBER", "Compare", "to", "NUMBER", "log", "file", "diff", "log", "NUMBER", "txt", "log", "NUMBER", "txt", "NUMBER", "c", "NUMBER", "TAG", "tedx", "git", "master", "ssh", "i", "Users", "stakhr", "NUMBER", "ssh", "id_rsa", "v", "root", "s", "NUMBER", "site", "NUMBER", "com", "NUMBER", "NUMBER", "d", "NUMBER", "TAG", "forwardAgent", "TAG", "user", "deployer", "password", "null", "TAG", "forwardAgent", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "html", "geem", "Restart", "Apache", "NUMBER", "on", "success", "deploy", "NUMBER", "task", "apache", "restart", "function", "Attention", "The", "user", "must", "have", "rights", "for", "restart", "service", "Attention", "the", "command", "sudo", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "use", "only", "on", "CentOS", "system", "etc", "sudoers", "username", "ALL", "NOPASSWD", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "run", "sudo", "service", "apache", "NUMBER", "restart", "desc", "Restart", "Apache", "NUMBER", "service", "after", "success", "apache", "restart", "Main", "task", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "shared", "deploy", "writable", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "after", "deploy", "success", "Add", "test", "task", "task", "test", "function", "run", "ssh", "vT", "git", "github", "NUMBER", "com", "And", "run", "task", "test", "NUMBER", "I", "see", "you", "remote", "git", "github", "NUMBER", "com", "by", "key", "debug", "NUMBER", "Offering", "RSA", "public", "key", "oskarcalvo", "But", "when", "use", "deployer", "this", "key", "be", "not", "find", "Can", "you", "modify", "task", "test", "and", "run", "Add", "test", "task", "task", "test", "function", "runLocally", "ssh", "add", "l", "run", "ssh", "add", "l", "oskarcalvo", "With", "issue", "about", "use", "identityFile", "it", "may", "be", "be", "a", "problem", "of", "key", "NUMBER", "LINK", "to", "connect", "use", "ssh", "NUMBER", "auth", "pubkey", "file", "I", "will", "research", "about", "problem", "use", "forwardAgent", "You", "can", "try", "login", "remote", "server", "with", "A", "option", "ssh", "add", "l", "ssh", "A", "deployer", "xx", "NUMBER", "xxx", "NUMBER", "xx", "NUMBER", "xx", "remote", "ssh", "add", "l", "Thank", "you", "for", "your", "PR", "NUMBER", "Please", "see", "NUMBER", "NUMBER", "NUMBER", "But", "i", "think", "why", "not", "break", "BC", "env", "release_name", "function", "Set", "the", "deployment", "timezone", "if", "date_default_timezone_set", "env", "timezone", "date_default_timezone_set", "UTC", "return", "date", "YmdHis", "name", "of", "folder", "in", "release", "If", "break", "BC", "i", "suggest", "set", "timezone", "UTC", "env", "release_name", "function", "Set", "the", "deployment", "timezone", "if", "date_default_timezone_set", "get", "timezone", "date_default_timezone_set", "UTC", "return", "date", "YmdHis", "coox", "I", "created", "PR", "NUMBER", "you", "can", "review", "and", "confirm", "Is", "bug", "fix", "coox", "This", "feature", "may", "be", "available", "in", "Deployer", "NUMBER", "x", "NUMBER", "elfet", "Can", "you", "make", "a", "feature", "issue", "about", "this", "feature", "NUMBER", "I", "think", "it", "may", "be", "bin", "dep", "release", "Realease", "Time", "Reversion", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "May", "NUMBER", "NUMBER", "UTC", "NUMBER", "abc", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "May", "NUMBER", "NUMBER", "UTC", "dde", "NUMBER", "f", "tchapi", "I", "fix", "this", "bug", "with", "NUMBER", "please", "confirm", "PHPUnit", "NUMBER", "require", "PHP", "NUMBER", "and", "current", "it", "be", "beta", "PHPUnit", "NUMBER", "require", "PHP", "NUMBER", "cmodijk", "Thank", "you", "for", "the", "report", "i", "created", "an", "issue", "NUMBER", "About", "your", "problem", "i", "think", "you", "should", "check", "run", "flow", "of", "tasks", "Why", "not", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "Easy", "read", "but", "not", "good", "for", "computer", "smile", "You", "can", "make", "a", "Datetime", "object", "from", "string", "NUMBER", "by", "preg_match", "NUMBER", "But", "when", "you", "access", "folder", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "via", "ftp", "or", "http", "what", "be", "url", "you", "type", "It", "not", "friendly", "NUMBER", "String", "NUMBER", "be", "easy", "for", "compare", "it", "very", "important", "wit", "a", "version", "label", "NUMBER", "If", "you", "want", "easy", "for", "create", "a", "date", "time", "object", "why", "you", "make", "a", "custom", "task", "deploy", "release", "to", "make", "timestamp", "as", "version", "label", "smile", "ju", "NUMBER", "ius", "One", "If", "you", "re", "use", "DateTime", "createFromFormat", "Y", "m", "d_H", "i", "s", "NUMBER", "u", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "Why", "not", "DateTime", "createFromFormat", "YmdHis", "NUMBER", "Two", "Url", "LINK", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "be", "not", "friendly", "NUMBER", "Therefore", "we", "often", "created", "slug", "by", "replacing", "by", "Three", "Compare", "NUMBER", "as", "string", "faster", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "Compare", "NUMBER", "as", "number", "big", "integer", "be", "good", "but", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "be", "not", "Feature", "Y", "m", "d_H", "i", "s", "YmdHis", "Datetime", "createFromFormat", "true", "true", "URL", "Slugged", "false", "true", "Compare", "as", "string", "true", "true", "faster", "Compare", "as", "number", "false", "true", "Feature", "Y", "m", "d_H", "i", "s", "YmdHis", "Ref", "Human", "friendly", "true", "false", "Break", "BC", "true", "false", "Safe", "for", "other", "OS", "false", "true", "ref", "NUMBER", "LINK", "us", "HT", "NUMBER", "ref", "NUMBER", "LINK", "_chars_in_file_names", "NUMBER", "html", "ref", "NUMBER", "LINK", "us", "library", "aa", "NUMBER", "Safe", "for", "ZIP", "false", "true", "ref", "NUMBER", "LINK", "zip", "NUMBER", "org", "FAQ", "NUMBER", "html", "backslashes", "Datetime", "createFromFormat", "true", "true", "URL", "Slugged", "false", "true", "Compare", "as", "string", "true", "true", "faster", "Compare", "as", "number", "false", "true", "Vote", "NUMBER", "NUMBER", "NUMBER", "Cool", "NUMBER", "Does", "it", "work", "Cool", "can", "yo\u0443", "add", "some", "docs", "too", "And", "what", "about", "php", "ssh", "NUMBER", "ext", "I", "think", "this", "can", "go", "to", "new", "Hot", "To", "NUMBER", "Yes", "NUMBER", "no", "nested", "calls", "NUMBER", "It", "s", "against", "deployer", "way", "NUMBER", "If", "you", "need", "it", "NUMBER", "Simple", "separate", "it", "to", "function", "NUMBER", "rsync", "I", "think", "if", "user", "ask", "to", "create", "release", "it", "better", "to", "do", "it", "NUMBER", "This", "functionality", "your", "can", "create", "your", "self", "for", "you", "NUMBER", "We", "need", "to", "add", "comment", "right", "in", "bash", "to", "avoid", "this", "issue", "came", "again", "How", "be", "you", "trying", "to", "override", "task", "To", "not", "display", "in", "console", "help", "NUMBER", "Try", "run", "this", "by", "hand", "git", "clone", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "ME", "foo", "NUMBER", "git", "srv", "www", "test", "release", "NUMBER", "Hi", "I", "m", "really", "want", "to", "do", "this", "stuff", "NUMBER", "And", "https", "will", "be", "soon", "NUMBER", "But", "what", "best", "way", "to", "work", "with", "checksums", "md", "NUMBER", "PGP", "php", "task", "deploy", "writable", "onlyOn", "dev", "staging", "This", "do", "not", "support", "NUMBER", "elfet", "Please", "review", "and", "merge", "it", "by", "button", "Squash", "and", "merge", "garygreen", "You", "can", "make", "deploy", "NUMBER", "php", "TAG", "NUMBER", "output", "NUMBER", "TAG", "desc", "Execute", "artisan", "route", "cache", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "shared", "deploy", "vendors", "deploy", "writable", "deploy", "symlink", "cleanup", "artisan", "cache", "clear", "artisan", "migrate", "artisan", "config", "cache", "artisan", "config", "cache", "desc", "Deploy", "your", "project", "after", "deploy", "success", "Your", "custom", "task", "and", "servers", "NUMBER", "It", "s", "looks", "like", "some", "one", "killing", "php", "exec", "on", "prod", "NUMBER", "Users", "be", "same", "Does", "it", "will", "be", "work", "without", "force", "at", "all", "If", "force", "be", "stand", "only", "for", "_non", "interactive_", "i", "think", "it", "s", "ok", "to", "force", "all", "the", "time", "Better", "DX", "NUMBER", "askConfirmation", "it", "s", "always", "bad", "pattern", "in", "automation", "tool", "What", "version", "of", "symfony", "Can", "you", "show", "an", "example", "What", "s", "why", "LINK", "So", "you", "need", "ruby", "only", "on", "one", "command", "export", "PATH", "PATH", "usr", "local", "foo", "What", "be", "your", "solution", "True", "NUMBER", "Can", "you", "make", "PR", "curl", "sS", "LINK", "also", "this", "need", "to", "be", "fix", "NUMBER", "Yes", "this", "command", "was", "copied", "from", "symphony", "docs", "if", "they", "update", "it", "so", "can", "we", "NUMBER", "Will", "look", "at", "this", "NUMBER", "Updated", "try", "now", "NUMBER", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "We", "need", "to", "fork", "LINK", "abandoned", "php", "phar", "update", "and", "relate", "projects", "into", "deployer", "org", "NUMBER", "This", "projects", "do", "not", "support", "any", "more", "NUMBER", "But", "we", "need", "to", "add", "support", "for", "Symfony", "NUMBER", "there", "NUMBER", "Can", "any", "body", "take", "this", "oanhnn", "what", "do", "you", "think", "Yes", "NUMBER", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "Yes", "composer_command", "Fixed", "tickets", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "This", "be", "my", "version", "of", "custom", "bins", "NUMBER", "Here", "an", "example", "php", "task", "default", "function", "run", "bin", "php", "v", "run", "bin", "git", "version", "run", "bin", "composer", "version", "What", "do", "you", "think", "guys", "For", "now", "composer", "automatically", "downloaded", "too", "NUMBER", "If", "we", "remove", "this", "may", "broke", "BC", "NUMBER", "Also", "it", "s", "downloaded", "via", "https", "so", "risks", "a", "minimal", "NUMBER", "I", "think", "this", "behavior", "be", "good", "for", "developer", "experience", "and", "we", "should", "keep", "it", "NUMBER", "You", "can", "always", "install", "composer", "manually", "to", "prevent", "downloading", "it", "NUMBER", "NUMBER", "deployphp", "maintainer", "merge", "I", "think", "merge", "master", "to", "NUMBER", "x", "too", "Agree", "NUMBER", "Maybe", "allow", "only", "to", "modify", "PATH", "Please", "show", "your", "output", "with", "debug", "mode", "add", "option", "vvv", "when", "run", "deployer", "NUMBER", "And", "i", "think", "you", "try", "ssh", "root", "x", "NUMBER", "x", "NUMBER", "x", "NUMBER", "x", "git", "clone", "git", "bitbucket", "NUMBER", "org", "username", "projetct", "NUMBER", "git", "tmp", "project", "I", "can", "clone", "my", "project", "manually", "in", "remote", "server", "via", "git", "clone", "Your", "problem", "be", "ssh", "by", "password", "and", "git", "clone", "by", "key", "NUMBER", "When", "you", "ssh", "by", "deployer", "your", "ssh", "agent", "may", "be", "not", "start", "and", "add", "your", "key", "NUMBER", "So", "that", "i", "want", "you", "run", "below", "command", "ssh", "root", "x", "NUMBER", "x", "NUMBER", "x", "NUMBER", "x", "git", "clone", "git", "bitbucket", "NUMBER", "org", "username", "projetct", "NUMBER", "git", "tmp", "project", "Other", "option", "you", "can", "switch", "to", "use", "private", "public", "key", "or", "foward", "agent", "to", "ssh", "by", "deployer", "NUMBER", "oanhnn", "do", "want", "me", "to", "run", "ssh", "root", "x", "NUMBER", "x", "NUMBER", "x", "NUMBER", "x", "git", "clone", "git", "bitbucket", "NUMBER", "org", "username", "projetct", "NUMBER", "git", "tmp", "project", "on", "my", "remote", "server", "mehrdaad", "Please", "run", "on", "your", "local", "machine", "where", "you", "run", "deployer", "on", "NUMBER", "Don", "t", "know", "so", "much", "about", "deployer", "NUMBER", "I", "would", "really", "appreciate", "if", "you", "could", "show", "me", "how", "to", "do", "that", "NUMBER", "Deployer", "document", "available", "on", "LINK", "and", "a", "example", "in", "here", "LINK", "example", "NUMBER", "git", "oanhnn", "when", "use", "deployer", "directories", "be", "created", "so", "I", "conclude", "that", "ssh", "password", "for", "remote", "server", "be", "correct", "NUMBER", "But", "I", "don", "t", "know", "how", "to", "configure", "git", "clone", "key", "on", "my", "remote", "server", "or", "on", "deployer", "NUMBER", "Would", "you", "give", "a", "hint", "about", "it", "NUMBER", "Tnx", "Yes", "i", "see", "NUMBER", "Deployer", "did", "ssh", "to", "remote", "server", "and", "create", "directory", "success", "NUMBER", "But", "when", "deployer", "run", "git", "to", "clone", "your", "project", "it", "have", "error", "NUMBER", "This", "error", "be", "problem", "authenticate", "with", "github", "NUMBER", "You", "can", "t", "input", "username", "and", "password", "of", "github", "in", "this", "case", "NUMBER", "Because", "that", "you", "have", "to", "set", "deploy", "key", "for", "you", "project", "LINK", "deploy", "keys", "mehrdaad", "Are", "you", "use", "Q", "A", "Local", "OS", "Ubuntu", "OS", "NUMBER", "Homestead", "Remote", "OS", "Ubuntu", "OS", "NUMBER", "I", "will", "make", "a", "exmaple", "for", "you", "in", "tonight", "if", "i", "free", "NUMBER", "Okay", "will", "create", "it", "today", "This", "be", "a", "useful", "feature", "but", "not", "it", "need", "be", "flexible", "NUMBER", "Eg", "If", "deployment", "script", "and", "source", "code", "be", "different", "repos", "NUMBER", "Deploy", "from", "other", "machine", "that", "be", "different", "with", "develop", "machine", "NUMBER", "I", "think", "it", "better", "if", "you", "write", "a", "tutorial", "post", "on", "LINK", "NUMBER", "Like", "LINK", "app", "NUMBER", "html", "What", "be", "you", "thing", "travisdoherty", "elfet", "aschelch", "In", "my", "project", "php", "Clear", "cake_core_file_map", "in", "redis", "Reload", "service", "task", "deploy", "end", "function", "within", "deploy_path", "current", "function", "Stop", "resque", "workers", "run", "NUMBER", "Console", "cake", "CakeResque", "NUMBER", "CakeResque", "stop", "a", "NUMBER", "host", "env", "redis", "NUMBER", "host", "port", "env", "redis", "NUMBER", "port", "db", "env", "redis", "NUMBER", "db", "prefix", "env", "app", "NUMBER", "prefix", "Clear", "cake_core_file_map", "in", "Redis", "run", "sprintf", "redis", "cli", "h", "s", "p", "s", "n", "s", "raw", "keys", "scake_core_file_map", "xargs", "redis", "cli", "h", "s", "p", "s", "n", "s", "del", "host", "port", "db", "prefix", "host", "port", "db", "Clear", "app", "cache", "run", "NUMBER", "Console", "cake", "cache", "clear", "f", "NUMBER", "Start", "resque", "workers", "run", "Console", "cake", "CakeResque", "NUMBER", "CakeResque", "start", "q", "send_email", "n", "NUMBER", "dev", "null", "NUMBER", "NUMBER", "Check", "status", "of", "serives", "sleep", "NUMBER", "run", "Console", "cake", "CakeResque", "NUMBER", "CakeResque", "stats", "desc", "Clear", "cache", "and", "restart", "services", "aschelch", "In", "CakePHP", "v", "NUMBER", "x", "all", "paths", "of", "loaded", "file", "will", "saved", "in", "cache", "with", "key", "TAG", "cake_core_file_map", "NUMBER", "After", "your", "deploy", "you", "may", "be", "need", "NUMBER", "stop", "PHP", "FPM", "CakeResque", "NUMBER", "NUMBER", "clear", "cache", "in", "key", "TAG", "cake_core_file_map", "NUMBER", "start", "PHP", "FPM", "CakeResque", "NUMBER", "If", "not", "do", "that", "your", "app", "may", "be", "run", "with", "old", "code", "See", "content", "of", "this", "cache", "key", "NUMBER", "aschelch", "I", "think", "this", "problem", "be", "when", "we", "run", "command", "start", "workers", "it", "will", "fork", "to", "child", "progresses", "and", "this", "workers", "will", "delay", "NUMBER", "If", "you", "not", "use", "background", "job", "add", "and", "use", "function", "sleep", "to", "pause", "this", "progress", "it", "will", "kill", "by", "this", "task", "finished", "NUMBER", "smile", "I", "see", "need", "more", "time", "for", "test", "NUMBER", "What", "about", "creating", "new", "mechanizm", "for", "bins", "Like", "PATH", "or", "something", "run", "php", "NUMBER", "Maybe", "some", "replace", "php", "NUMBER", "nemoinho", "take", "a", "look", "at", "NUMBER", "NUMBER", "I", "agree", "merge", "this", "feature", "NUMBER", "It", "be", "OK", "NUMBER", "oisvidi", "Why", "not", "use", "DEPLOYER_BIN", "if", "defined", "DEPLOYER_BIN", "return", "oisvidi", "If", "use", "constant", "DEPLOYER", "always", "be", "TRUE", "it", "mean", "deployer", "alway", "loaded", "success", "I", "think", "deployer", "only", "be", "loaded", "success", "when", "constant", "DEPLOYER_BIN", "be", "defined", "NUMBER", "If", "you", "use", "a", "constant", "DEPLOYER", "only", "for", "your", "customized", "autoloader", "i", "think", "we", "will", "merge", "this", "PR", "NUMBER", "it", "just", "means", "DEPLOYER", "be", "the", "application", "run", "NUMBER", "The", "value", "be", "irrelevant", "for", "that", "purpose", "NUMBER", "If", "not", "loaded", "autoload", "NUMBER", "php", "DEPLOYER", "true", "but", "DEPLOYER_BIN", "be", "undefined", "and", "application", "not", "run", "NUMBER", "So", "that", "what", "be", "you", "want", "check", "I", "think", "some", "legacy", "code", "may", "load", "at", "this", "point", "require", "file", "elfet", "Is", "your", "mean", "if", "defined", "DEPLOYER", "require", "path", "to", "vendor", "bin", "dep", "If", "that", "why", "not", "use", "require_one", "NUMBER", "Can", "you", "make", "issue", "template", "Thank", "mehrdaad", "You", "can", "follow", "steps", "NUMBER", "Make", "your", "local", "machine", "to", "git", "server", "it", "be", "may", "be", "access", "from", "your", "remote", "machine", "NUMBER", "set", "repository", "git", "your", "local", "machine", "org", "app", "NUMBER", "git", "NUMBER", "run", "deployer", "LINK", "scm", "NUMBER", "com", "book", "en", "v", "NUMBER", "Git", "on", "the", "Server", "Setting", "Up", "the", "Server", "LINK", "how", "to", "run", "your", "own", "git", "server", "NUMBER", "This", "be", "great", "way", "to", "resolve", "this", "problem", "NUMBER", "But", "deploy", "user", "not", "always", "has", "group", "www", "data", "NUMBER", "I", "think", "it", "be", "a", "special", "case", "you", "should", "write", "a", "blog", "or", "Wiki", "NUMBER", "We", "will", "insert", "link", "in", "document", "of", "Deployer", "NUMBER", "What", "be", "you", "think", "elfet", "Thank", "nemoinho", "I", "will", "check", "it", "NUMBER", "dexbarrett", "philbates", "NUMBER", "Please", "show", "a", "part", "of", "your", "deploy", "NUMBER", "php", "file", "NUMBER", "It", "may", "be", "help", "me", "to", "reproduce", "this", "issue", "NUMBER", "dexbarrett", "Thank", "for", "your", "deploy", "NUMBER", "php", "file", "I", "think", "it", "may", "be", "one", "of", "the", "following", "cases", "NUMBER", "You", "use", "chmod", "to", "set", "permissions", "writable", "after", "that", "www", "data", "user", "apache", "user", "make", "log", "and", "cache", "file", "with", "its", "ownership", "NUMBER", "If", "that", "you", "need", "sudo", "to", "change", "permissions", "NUMBER", "This", "way", "be", "not", "recommaned", "NUMBER", "NUMBER", "When", "task", "deploy", "shared", "run", "it", "make", "symlinks", "NUMBER", "After", "that", "task", "deploy", "writable", "run", "it", "only", "change", "permission", "of", "symlink", "NUMBER", "If", "that", "you", "should", "change", "setting", "shared_dirs", "and", "writable_dirs", "NUMBER", "Eg", "NUMBER", "Laravel", "shared", "dirs", "set", "shared_dirs", "storage", "public", "images", "public", "game", "public", "api", "Laravel", "writable", "dirs", "set", "writable_dirs", "storage", "bootstrap", "cache", "give", "the", "write", "permissions", "to", "the", "folder", "the", "symlinks", "point", "to", "in", "this", "case", "the", "shared", "folder", "that", "Deployer", "creates", "Right", "But", "in", "my", "server", "use", "setfacl", "it", "run", "with", "script", "php", "Laravel", "shared", "dirs", "set", "shared_dirs", "storage", "public", "images", "public", "game", "public", "api", "Laravel", "writable", "dirs", "set", "writable_dirs", "storage", "bootstrap", "cache", "I", "will", "debug", "this", "issue", "when", "i", "have", "more", "time", "NUMBER", "Thank", "for", "your", "report", "Like", "NUMBER", "You", "muck", "config", "sudo", "passwordless", "for", "deploy", "user", "NUMBER", "After", "that", "make", "a", "task", "like", "restart", "php_fpm", "and", "run", "it", "after", "deploy", "finished", "NUMBER", "LINK", "chrome", "instant", "ion", "NUMBER", "espv", "NUMBER", "ie", "UTF", "NUMBER", "q", "sudo", "passwordless", "Thankyou", "Make", "PR", "follow", "Contributing", "document", "LINK", "contribute", "Sorry", "Deployer", "haven", "t", "this", "feature", "yet", "NUMBER", "Currently", "version", "NUMBER", "x", "be", "developing", "and", "never", "release", "NUMBER", "We", "will", "publish", "download", "link", "when", "release", "a", "version", "NUMBER", "x", "NUMBER", "Now", "you", "can", "build", "NUMBER", "x", "phar", "file", "yourself", "NUMBER", "LINK", "build", "I", "think", "it", "be", "ok", "and", "will", "be", "better", "if", "you", "can", "rebase", "it", "smile", "I", "will", "merge", "it", "after", "elfet", "confirm", "NUMBER", "I", "be", "agree", "with", "cronfy", "NUMBER", "Task", "may", "be", "a", "callable", "task", "task", "NUMBER", "function", "task", "task", "NUMBER", "functionname", "task", "task", "NUMBER", "NameSpace", "ClassName", "task", "task", "NUMBER", "new", "Object", "task", "task", "NUMBER", "object", "methodName", "I", "implement", "this", "feature", "in", "LINK", "task", "may", "be", "callable", "Changed", "Task", "may", "be", "defined", "from", "a", "callable", "Task", "group", "be", "defined", "by", "function", "taskGroup", "I", "will", "add", "more", "test", "cases", "before", "make", "a", "PR", "NUMBER", "smile", "Merged", "You", "should", "use", "file", "deployer", "NUMBER", "phar", "and", "shouldn", "t", "require", "deployer", "in", "composer", "NUMBER", "json", "NUMBER", "NUMBER", "Thank", "alaczi", "mbrodala", "please", "try", "TAG", "toString", "ihsanudin", "In", "a", "lot", "of", "cases", "users", "install", "composer", "global", "with", "root", "user", "use", "sudo", "this", "PR", "will", "be", "error", "NUMBER", "I", "think", "the", "update", "composer", "be", "customized", "by", "individual", "NUMBER", "ihsanudin", "Using", "sudo", "to", "update", "composer", "and", "make", "writable", "dirs", "be", "two", "problem", "different", "NUMBER", "You", "can", "t", "use", "same", "config", "NUMBER", "I", "think", "the", "update", "composer", "task", "have", "do", "manually", "NUMBER", "elfet", "I", "think", "this", "PR", "should", "be", "close", "NUMBER", "Deployer", "really", "support", "Git", "tags", "NUMBER", "Please", "try", "server", "dev", "svr", "NUMBER", "NUMBER", "user", "dev", "stage", "dev", "env", "deploy_path", "var", "www", "apps", "slim", "env", "branch", "NUMBER", "for", "tag", "NUMBER", "This", "feature", "make", "b", "option", "NUMBER", "And", "on", "git", "clone", "help", "branch", "TAG", "b", "TAG", "Instead", "of", "point", "the", "newly", "created", "HEAD", "to", "the", "branch", "point", "to", "by", "the", "cloned", "repository", "s", "HEAD", "point", "to", "TAG", "branch", "instead", "NUMBER", "In", "a", "non", "bare", "repository", "this", "be", "the", "branch", "that", "will", "be", "checked", "out", "NUMBER", "branch", "can", "also", "take", "tags", "and", "detaches", "the", "HEAD", "at", "that", "commit", "in", "the", "resulting", "repository", "NUMBER", "NUMBER", "env", "be", "configure", "file", "in", "laravel", "NUMBER", "NUMBER", "It", "like", "parameters", "NUMBER", "yml", "in", "symfony", "NUMBER", "I", "think", "it", "should", "be", "shared", "between", "deployed", "version", "NUMBER", "In", "a", "lot", "of", "cases", "you", "can", "t", "modify", "environments", "sharing", "host", "NUMBER", "NUMBER", "env", "be", "solution", "NUMBER", "If", "you", "don", "t", "want", "use", "it", "you", "can", "use", "an", "empty", "NUMBER", "env", "file", "NUMBER", "In", "a", "lot", "of", "cases", "you", "can", "t", "modify", "environments", "sharing", "host", "NUMBER", "NUMBER", "env", "be", "solution", "NUMBER", "If", "you", "don", "t", "want", "use", "it", "you", "can", "use", "an", "empty", "NUMBER", "env", "file", "NUMBER", "badconker", "Using", "NUMBER", "env", "file", "be", "safe", "for", "other", "applications", "NUMBER", "If", "set", "environment", "variables", "in", "etc", "environment", "or", "NUMBER", "bashrc", "NUMBER", "then", "other", "applications", "other", "Laravel", "app", "bash", "or", "a", "progam", "NUMBER", "can", "parse", "it", "as", "environment", "variables", "for", "them", "NUMBER", "You", "will", "more", "difficult", "to", "control", "that", "NUMBER", "Other", "option", "use", "SetEnv", "in", "apache", "and", "fastcgi_param", "in", "NGINX", "to", "set", "environment", "variables", "in", "virtual", "host", "configure", "NUMBER", "You", "can", "search", "on", "Google", "NUMBER", "I", "think", "comment", "of", "elfet", "be", "answer", "for", "you", "NUMBER", "Yes", "It", "be", "implement", "NUMBER", "You", "can", "try", "php", "deploy", "NUMBER", "phar", "deploy", "dev", "vvv", "See", "more", "in", "end", "of", "page", "LINK", "If", "you", "want", "to", "see", "exactly", "what", "deployer", "do", "on", "you", "server", "then", "just", "run", "it", "in", "a", "more", "verbose", "mode", "dep", "deploy", "vvv", "NUMBER", "Uhm", "Do", "you", "mean", "like", "gulp", "output", "show", "duration", "of", "task", "gulp", "NUMBER", "NUMBER", "NUMBER", "Using", "gulpfile", "var", "projects", "oanhnn", "slim", "skeleton", "gulpfile", "NUMBER", "js", "NUMBER", "NUMBER", "NUMBER", "Starting", "build", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Starting", "clean", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Finished", "clean", "after", "NUMBER", "ms", "NUMBER", "NUMBER", "NUMBER", "Starting", "jshint", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Finished", "jshint", "after", "NUMBER", "s", "NUMBER", "NUMBER", "NUMBER", "Starting", "create", "dir", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Finished", "create", "dir", "after", "NUMBER", "\u03bcs", "NUMBER", "NUMBER", "NUMBER", "Starting", "build", "sass", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Starting", "build", "css", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Starting", "build", "js", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Finished", "build", "js", "after", "NUMBER", "ms", "NUMBER", "NUMBER", "NUMBER", "Finished", "build", "css", "after", "NUMBER", "ms", "NUMBER", "NUMBER", "NUMBER", "Finished", "build", "sass", "after", "NUMBER", "s", "NUMBER", "NUMBER", "NUMBER", "Finished", "build", "after", "NUMBER", "s", "NUMBER", "NUMBER", "NUMBER", "Starting", "default", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Finished", "default", "after", "NUMBER", "\u03bcs", "And", "we", "will", "have", "output", "dep", "deploy", "dev", "NUMBER", "NUMBER", "NUMBER", "Using", "deploy", "file", "var", "projects", "oanhnn", "deployer", "example", "deploy", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "Starting", "deploy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Starting", "deploy", "prepare", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Finished", "deploy", "prepare", "after", "NUMBER", "ms", "NUMBER", "NUMBER", "NUMBER", "Starting", "deploy", "release", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Finished", "deploy", "release", "after", "NUMBER", "\u03bcs", "NUMBER", "NUMBER", "NUMBER", "Starting", "deploy", "update_code", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Finished", "deploy", "update_code", "after", "NUMBER", "s", "NUMBER", "NUMBER", "NUMBER", "Starting", "deploy", "shared", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Finished", "deploy", "shared", "after", "NUMBER", "\u03bcs", "See", "more", "NUMBER", "NUMBER", "Yes", "NUMBER", "Sorry", "it", "be", "tmp", "class", "NUMBER", "I", "be", "commit", "incorrect", "NUMBER", "I", "will", "remove", "it", "NUMBER", "nadar", "composer", "global", "install", "and", "global", "require", "package", "be", "run", "once", "time", "NUMBER", "I", "think", "you", "should", "create", "a", "custom", "task", "do", "it", "yourseft", "NUMBER", "Good", "luck", "NUMBER", "Thank", "you", "Please", "eidt", "message", "like", "Q", "A", "Bug", "fix", "no", "New", "feature", "yes", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "We", "have", "NUMBER", "ways", "NUMBER", "Only", "a", "recipe", "for", "framework", "and", "use", "set", "symfony_version", "NUMBER", "or", "set", "laravel_version", "NUMBER", "to", "switcth", "configure", "options", "NUMBER", "Default", "version", "variable", "be", "LTS", "version", "or", "last", "stable", "version", "NUMBER", "With", "this", "way", "recipe", "have", "to", "cover", "more", "cases", "NUMBER", "NUMBER", "Using", "framework", "version", "to", "save", "recipe", "Eg", "symfony_", "NUMBER", "symfony_", "NUMBER", "laravel_", "NUMBER", "NUMBER", "With", "this", "way", "recipe", "be", "simple", "but", "number", "of", "recipe", "be", "more", "Eg", "laravel_", "NUMBER", "laravel_", "NUMBER", "laravel_", "NUMBER", "NUMBER", "I", "think", "we", "can", "use", "configure", "resolver", "by", "version", "of", "framework", "NUMBER", "What", "to", "do", "if", "framework", "very", "different", "Like", "symfony", "NUMBER", "and", "NUMBER", "Two", "version", "be", "very", "different", "but", "i", "think", "deployment", "be", "same", "only", "different", "about", "shared_dir", "shared_file", "wriable_dirs", "and", "migration", "command", "NUMBER", "Note", "old", "version", "of", "frameworks", "not", "support", "composer", "be", "very", "different", "NUMBER", "Should", "we", "support", "them", "Current", "Deployer", "support", "symfony", "NUMBER", "x", "as", "default", "NUMBER", "If", "you", "want", "switch", "to", "symfony", "NUMBER", "you", "can", "modify", "recipe", "follow", "LINK", "set", "shared_dirs", "var", "logs", "set", "writable_dirs", "var", "cache", "var", "logs", "set", "bin_dir", "bin", "set", "var_dir", "var", "after", "deploy", "vendors", "database", "migrate", "pierredup", "Curently", "Deployer", "had", "support", "Symfony", "NUMBER", "yet", "but", "it", "not", "default", "because", "at", "that", "time", "symfony", "NUMBER", "be", "not", "stable", "NUMBER", "Please", "see", "docs", "before", "make", "issue", "NUMBER", "LINK", "We", "can", "make", "it", "to", "default", "NUMBER", "elfet", "What", "be", "you", "think", "about", "make", "recipes", "with", "framework", "and", "version", "Your", "can", "try", "run", "whereis", "npm", "and", "show", "path", "to", "npm", "After", "that", "use", "it", "instead", "npm", "command", "NUMBER", "run", "cd", "release_path", "app", "usr", "bin", "npm", "install", "I", "think", "this", "problem", "be", "LINK", "do", "something", "work", "in", "my", "ssh", "session", "but", "not", "in", "capistrano", "LINK", "_node", "Bash", "Startup", "Files", "NUMBER", "html", "NUMBER", "Apache", "user", "www", "data", "haven", "t", "environment", "variable", "SSH_AUTH_SOCK", "NUMBER", "You", "can", "check", "by", "command", "echo", "mysecretpass", "sudo", "u", "www", "data", "S", "ssh", "deploy_user", "hostname", "NUMBER", "I", "see", "your", "command", "dep", "magento", "be", "miss", "stage", "argument", "NUMBER", "dep", "magento", "TAG", "NUMBER", "Please", "show", "your", "configure", "deploy", "NUMBER", "php", "version", "of", "Deployer", "and", "output", "of", "command", "dep", "magento", "TAG", "vvv", "As", "i", "think", "your", "www", "data", "user", "can", "t", "ssh", "to", "server", "as", "forward", "agent", "NUMBER", "Can", "you", "try", "command", "sudo", "u", "www", "data", "S", "ssh", "add", "l", "Please", "setting", "up", "your", "www", "data", "follow", "this", "document", "LINK", "example", "blob", "master", "docs", "setting", "up", "and", "add", "a", "deployer", "user", "to", "ec", "NUMBER", "md", "LINK", "example", "blob", "master", "docs", "enable", "feature", "ssh", "forward", "agent", "NUMBER", "md", "eval", "ssh", "agent", "s", "ssh", "add", "home", "user", "NUMBER", "ssh", "key", "NUMBER", "pem", "NUMBER", "why", "be", "we", "need", "this", "feature", "Yes", "NUMBER", "Can", "you", "add", "a", "PR", "to", "document", "LINK", "about", "this", "feature", "Thank", "you", "You", "try", "by", "your", "terminal", "and", "show", "result", "to", "here", "ssh", "T", "deploy", "user", "hostname", "Yes", "NUMBER", "Deployer", "support", "this", "feature", "NUMBER", "If", "use", "password", "failure", "you", "can", "try", "with", "public", "key", "or", "forward", "agent", "NUMBER", "Goodluck", "This", "issue", "be", "discussed", "in", "NUMBER", "Thank", "you", "Please", "edit", "your", "comment", "for", "this", "PR", "follow", "this", "format", "Q", "A", "Bug", "fix", "no", "New", "feature", "no", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "Thank", "you", "Now", "deployer", "support", "Laravel", "NUMBER", "beers", "I", "think", "we", "should", "follow", "Laravel", "NUMBER", "because", "it", "be", "LTS", "NUMBER", "smile", "This", "means", "Laravel", "team", "recommend", "users", "use", "this", "version", "NUMBER", "And", "we", "should", "support", "it", "NUMBER", "You", "can", "use", "server", "dev", "svr", "NUMBER", "NUMBER", "user", "dev", "env", "branch", "master", "I", "be", "use", "mobile", "please", "see", "more", "in", "here", "LINK", "example", "You", "can", "try", "task", "task", "NUMBER", "function", "run", "something", "you", "want", "to", "do", "task", "task", "NUMBER", "function", "run", "another", "thing", "I", "want", "to", "do", "task", "my_task", "deploy", "prepare", "deploy", "release", "after", "deploy", "prepare", "task", "NUMBER", "after", "deploy", "release", "task", "NUMBER", "Good", "luck", "Thank", "you", "Thank", "for", "feedback", "NUMBER", "But", "current", "absolute", "symlinks", "be", "work", "with", "me", "and", "more", "people", "NUMBER", "I", "don", "t", "think", "problem", "be", "absolute", "or", "relative", "NUMBER", "Your", "apache", "config", "may", "be", "have", "a", "incorrect", "NUMBER", "Can", "you", "post", "a", "example", "to", "here", "When", "change", "from", "absolute", "to", "relative", "it", "may", "be", "have", "other", "problem", "NUMBER", "Did", "you", "test", "that", "enviroments", "NGINX", "APACHE", "share", "host", "or", "not", "NUMBER", "nakashu", "Can", "you", "try", "path", "to", "home", "my", "NUMBER", "domain", "NUMBER", "com", "web", "NUMBER", "htaccess", "TAG", "forwardAgent", "authentication", "method", "be", "set", "to", "Configuration", "AUTH_BY_AGENT", "and", "it", "wont", "use", "password", "method", "NUMBER", "Now", "you", "should", "use", "public", "key", "method", "and", "forward", "agent", "NUMBER", "Good", "luck", "Thank", "you", "Please", "edit", "your", "comment", "for", "this", "PR", "follow", "this", "format", "Q", "A", "Bug", "fix", "no", "New", "feature", "no", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "bengitiger", "Please", "try", "with", "deploy", "NUMBER", "php", "file", "TAG", "user", "bengi", "NUMBER", "password", "env", "deploy_path", "home", "bengi", "NUMBER", "www", "stage", "dep", "prod", "stage", "dev", "task", "my_task", "function", "upload", "NUMBER", "home", "bengi", "NUMBER", "www", "write", "Deploy", "do", "desc", "Doing", "my", "stuff", "Thank", "you", "for", "report", "issue", "NUMBER", "You", "can", "use", "deployer", "NUMBER", "phar", "to", "work", "with", "symfony", "NUMBER", "x", "We", "will", "fix", "this", "issue", "as", "soon", "as", "possible", "NUMBER", "NUMBER", "This", "problem", "only", "user", "add", "Deployer", "to", "Symfony", "project", "NUMBER", "Current", "Deployer", "don", "t", "support", "this", "work", "maybe", "have", "conflict", "function", "name", "NUMBER", "We", "waiting", "Deployer", "v", "NUMBER", "NUMBER", "I", "will", "test", "and", "release", "new", "version", "on", "this", "weekend", "NUMBER", "Now", "i", "haven", "t", "free", "time", "NUMBER", "If", "any", "deployphp", "maintainer", "have", "free", "time", "please", "do", "it", "NUMBER", "You", "can", "use", "deployer", "NUMBER", "phar", "to", "work", "with", "symfony", "NUMBER", "x", "You", "can", "find", "it", "in", "here", "LINK", "Or", "use", "bin", "dep", "help", "If", "you", "have", "any", "more", "question", "you", "can", "join", "gitter", "NUMBER", "im", "LINK", "_source", "badge", "utm_medium", "badge", "utm_campaign", "pr", "badge", "to", "be", "support", "Fixed", "with", "NUMBER", "NUMBER", "Why", "not", "use", "alias", "php", "opt", "php", "NUMBER", "bin", "php", "Then", "try", "env", "php", "path", "php", "and", "then", "use", "run", "php", "NUMBER", "NUMBER", "Hi", "Yes", "it", "s", "true", "NUMBER", "PhpSecLib", "do", "not", "support", "this", "method", "for", "now", "NUMBER", "But", "it", "s", "really", "easy", "to", "implement", "NUMBER", "Any", "body", "can", "implement", "this", "obstschale", "I", "can", "t", "to", "implement", "myself", "it", "right", "now", "i", "need", "to", "make", "money", "for", "living", "now", "Why", "You", "can", "simple", "override", "needed", "tasks", "like", "deploy", "Try", "to", "ask", "on", "gitter", "may", "be", "some", "can", "help", "you", "there", "NUMBER", "deployphp", "maintainer", "can", "any", "one", "update", "this", "Really", "need", "help", "at", "this", "NUMBER", "Yes", "Send", "PR", "NUMBER", "It", "be", "really", "cool", "NUMBER", "\u043d\u043e\u044f\u0431", "NUMBER", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "Maxime", "Pelletier", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "That", "Laravel", "recipe", "has", "a", "few", "bug", "like", "a", "miss", "deploy", "writable", "task", "in", "the", "main", "deploy", "task", "and", "I", "disagree", "with", "the", "shared", "dirs", "NUMBER", "It", "s", "also", "lacking", "many", "features", "to", "run", "migrations", "refresh", "the", "caches", "etc", "NUMBER", "I", "will", "probably", "send", "a", "PR", "if", "nobody", "beats", "me", "to", "it", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Can", "you", "create", "PR", "for", "docs", "Same", "as", "branch", "Hi", "I", "m", "planning", "to", "create", "functionality", "like", "this", "in", "Deployer", "v", "NUMBER", "It", "will", "be", "use", "event", "system", "NUMBER", "But", "now", "i", "haven", "t", "mach", "time", "to", "work", "on", "Deployer", "v", "NUMBER", "I", "think", "we", "do", "not", "nee\u0432", "another", "tool", "which", "will", "copy", "composer", "functionality", "NUMBER", "But", "you", "can", "do", "all", "this", "staff", "with", "composer", "right", "now", "global", "option", "NUMBER", "Bug", "in", "PhpSecLib", "This", "be", "good", "idea", "We", "need", "API", "for", "remove", "tasks", "NUMBER", "That", "s", "was", "in", "Deployer", "v", "NUMBER", "A", "long", "time", "ago", "NUMBER", "Hmm", "NUMBER", "May", "be", "as", "alternative", "syntax", "We", "need", "simple", "API", "NUMBER", "What", "the", "interface", "What", "the", "interface", "php", "interface", "Recipe", "First", "example", "it", "s", "looks", "more", "like", "Server", "NUMBER", "Second", "obviously", "bad", "idea", "NUMBER", "Yes", "You", "can", "combine", "them", "in", "one", "common", "stage", "NUMBER", "I", "don", "t", "this", "what", "it", "be", "save", "NUMBER", "What", "do", "you", "think", "Do", "you", "ask", "password", "on", "sudo", "So", "every", "body", "can", "delete", "file", "from", "sudo", "as", "root", "Yes", "NUMBER", "Yes", "via", "custom", "tasks", "NUMBER", "Yes", "Absolute", "Use", "env", "vars", "NUMBER", "server", "myServer", "example", "NUMBER", "com", "NUMBER", "stage", "production", "env", "branch", "master", "server", "myServer", "NUMBER", "example", "NUMBER", "com", "NUMBER", "stage", "staging", "env", "branch", "develop", "Like", "this", "You", "can", "do", "all", "of", "this", "things", "right", "now", "NUMBER", "But", "you", "need", "to", "copy", "server", "NUMBER", "php", "server", "myServer", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myUser", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "production", "server", "myServer", "NUMBER", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myUser", "stage", "staging", "env", "branch", "develop", "env", "deploy_path", "var", "www", "staging", "server", "mySecondServer", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "mySecondUser", "stage", "production", "env", "branch", "master", "env", "deploy_path", "srv", "www", "Nice", "Great", "I", "ll", "merge", "NUMBER", "deployphp", "maintainer", "Any", "contributions", "be", "welcome", "NUMBER", "\u043e\u043a\u0442", "NUMBER", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "Jad", "Bitar", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "Thanks", "Were", "you", "pinging", "the", "rest", "of", "the", "team", "or", "inviting", "me", "to", "join", "the", "maintainers", "to", "take", "care", "of", "this", "one", "only", "Sorry", "if", "I", "misunderstood", "and", "thanks", "again", "for", "merge", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Please", "review", "the", "guidelines", "for", "contribute", "to", "this", "repository", "NUMBER", "I", "think", "users", "will", "install", "Phalcon", "like", "this", "LINK", "linux", "solaris", "After", "that", "common", "NUMBER", "php", "or", "composer", "NUMBER", "php", "will", "be", "good", "start", "NUMBER", "With", "FTP", "you", "can", "only", "upload", "and", "download", "file", "NUMBER", "You", "can", "not", "execute", "commands", "on", "remote", "server", "NUMBER", "You", "can", "run", "Deployer", "locally", "and", "do", "not", "execute", "commands", "on", "remote", "server", "with", "run", "and", "only", "describe", "tasks", "for", "local", "execution", "FTP", "upload", "rsync", "etc", "NUMBER", "But", "main", "purpose", "on", "Deployer", "be", "to", "run", "on", "remote", "servers", "NUMBER", "What", "about", "create", "a", "task", "for", "invalidating", "OPCache", "I", "think", "this", "be", "will", "be", "killer", "feature", "Take", "a", "look", "LINK", "reset", "NUMBER", "php", "LINK", "the", "opcache", "in", "php", "NUMBER", "NUMBER", "How", "want", "to", "implement", "this", "awesome", "stuff", "True", "Hmm", "do", "work", "with", "standard", "Laravel", "Great", "I", "think", "merge", "But", "with", "docs", "it", "will", "be", "NUMBER", "more", "cooler", "elfet", "Please", "merge", "smile", "We", "really", "need", "to", "implement", "native", "ssh", "client", "for", "Deployer", "NUMBER", "I", "can", "do", "it", "by", "myself", "but", "it", "needs", "time", "NUMBER", "Cool", "Thanks", "Cool", "Thanks", "heart", "this", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "LINK", "NUMBER", "c", "NUMBER", "e", "NUMBER", "NUMBER", "b", "bc", "NUMBER", "e", "NUMBER", "e", "NUMBER", "f", "NUMBER", "png", "Every", "one", "should", "you", "it", "NUMBER", "Please", "show", "your", "deploy", "script", "and", "output", "of", "command", "with", "vvv", "options", "NUMBER", "Looks", "like", "bash", "do", "not", "available", "NUMBER", "Try", "manually", "run", "this", "command", "and", "check", "ssh", "user", "NUMBER", "Ok", "Ok", "i", "ll", "merge", "this", "oanhnn", "may", "be", "it", "s", "time", "for", "new", "release", "eyes", "Thankyou", "Agree", "NUMBER", "PR", "Please", "show", "your", "version", "of", "Deployer", "PHP", "and", "log", "from", "deploy", "command", "with", "debug", "option", "vvv", "This", "PR", "has", "some", "issue", "This", "code", "dose", "not", "care", "user", "www", "data", "r", "or", "user", "www", "data", "rwx", "NUMBER", "It", "alway", "return", "a", "number", "greater", "than", "NUMBER", "This", "code", "dose", "not", "care", "user", "www", "data", "apache", "user", "and", "user", "www", "data", "NUMBER", "other", "user", "If", "setfacl", "be", "exist", "with", "group", "And", "one", "issue", "of", "Deployer", "Check", "deployer", "user", "and", "apache", "user", "be", "same", "user", "smile", "Thank", "you", "What", "be", "Deployer", "version", "Please", "try", "with", "last", "version", "NUMBER", "NUMBER", "Sorry", "torinaki", "This", "be", "an", "important", "issue", "it", "introduces", "error", "in", "version", "NUMBER", "and", "NUMBER", "I", "want", "to", "merge", "this", "PR", "without", "add", "test", "all", "test", "will", "be", "review", "by", "elfet", "or", "other", "maintainer", "NUMBER", "Please", "split", "this", "PR", "to", "two", "PR", "fix", "default", "timeout", "value", "add", "test", "Thank", "you", "amsolucionesweb", "We", "need", "more", "information", "to", "reproduction", "this", "error", "NUMBER", "I", "think", "connection", "was", "lost", "by", "timeout", "it", "same", "problem", "of", "AlexStansfield", "in", "NUMBER", "I", "created", "a", "new", "release", "NUMBER", "torinaki", "AlexStansfield", "Please", "test", "again", "Thank", "you", "NUMBER", "You", "can", "use", "shared_dirs", "set", "shared_dirs", "web", "upload", "LINK", "jakenoble", "Can", "you", "show", "your", "composer", "NUMBER", "json", "file", "NUMBER", "This", "be", "bug", "Try", "to", "use", "phpseclib", "ssh", "client", "instead", "NUMBER", "Or", "support", "Deployer", "NUMBER", "development", "which", "will", "have", "native", "ssh", "support", "NUMBER", "dima", "stefantsov", "this", "issue", "be", "out", "of", "date", "NUMBER", "You", "can", "make", "a", "new", "issue", "if", "you", "have", "problem", "NUMBER", "Please", "show", "me", "your", "enviroment", "NUMBER", "Current", "i", "be", "use", "forward", "agent", "success", "on", "windows", "git", "bash", "ssh", "agent", "NUMBER", "I", "think", "we", "need", "to", "investigate", "how", "to", "do", "it", "best", "NUMBER", "ping", "deployphp", "maintainer", "symfony", "NUMBER", "php", "has", "it", "s", "own", "setting", "list", "NUMBER", "May", "be", "add", "it", "there", "Eaahh", "NUMBER", "It", "be", "NUMBER", "I", "know", "NUMBER", "Can", "anyone", "with", "Windows", "make", "PR", "with", "just", "text", "instead", "of", "emoji", "and", "utf", "NUMBER", "Cool", "Cool", "Need", "to", "code", "review", "and", "test", "it", "NUMBER", "deployphp", "maintainer", "please", "help", "I", "dont", "think", "what", "be", "good", "to", "setup", "this", "server", "wide", "NUMBER", "Its", "better", "to", "specify", "timeout", "on", "run", "php", "run", "NUMBER", "I", "think", "global", "config", "here", "be", "bad", "decision", "NUMBER", "I", "think", "yes", "Ok", "i", "ll", "test", "this", "PR", "to", "merge", "NUMBER", "Need", "some", "time", "NUMBER", "deployphp", "maintainer", "lets", "test", "and", "discuss", "this", "Pleas", "fix", "code", "style", "NUMBER", "ZhukV", "NUMBER", "Cool", "Can", "you", "write", "a", "doc", "about", "it", "feature", "Ping", "elfet", "deployphp", "maintainer", "This", "be", "really", "disputable", "feature", "NUMBER", "We", "need", "really", "discuss", "this", "before", "merge", "NUMBER", "and", "test", "parallel", "execution", "deployphp", "maintainer", "do", "we", "need", "a", "vote", "on", "this", "feature", "You", "can", "specify", "onlyOn", "NUMBER", "Agree", "with", "oanhnn", "NUMBER", "But", "that", "PR", "be", "hang", "out", "NUMBER", "May", "be", "you", "can", "fork", "this", "PR", "fix", "suggestion", "and", "create", "your", "own", "PR", "baser", "on", "that", "davidkudera", "Cool", "I", "think", "it", "s", "better", "to", "allow", "strings", "NUMBER", "I", "vote", "to", "merge", "deployphp", "maintainer", "what", "do", "you", "think", "I", "think", "it", "can", "prevent", "some", "developers", "from", "error", "onlyOn", "dev", "Even", "it", "will", "complicate", "it", "a", "little", "bit", "NUMBER", "davidkudera", "you", "not", "agree", "I", "m", "thinking", "to", "merge", "it", "NUMBER", "You", "can", "set", "dumping", "by", "onlyOn", "on", "prod", "server", "NUMBER", "runAt", "pretty", "much", "onlyOn", "NUMBER", "What", "do", "you", "mean", "Can", "you", "show", "example", "You", "need", "understand", "what", "task", "you", "run", "on", "which", "server", "NUMBER", "What", "you", "suggest", "to", "avoid", "this", "I", "understand", "but", "this", "be", "really", "complicate", "Deployer", "itself", "It", "s", "better", "to", "configure", "your", "scripts", "to", "avoid", "this", "problem", "NUMBER", "Add", "dep", "init", "command", "which", "generate", "deploy", "NUMBER", "php", "file", "from", "template", "NUMBER", "dep", "init", "template", "symfony", "composer", "common", "Please", "create", "a", "separate", "branch", "on", "this", "repo", "NUMBER", "Hmmm", "NUMBER", "My", "deploy", "script", "php", "TAG", "getHelper", "formatter", "errorMessage", "Unable", "to", "setup", "correct", "permissions", "for", "writable", "dirs", "NUMBER", "Server", "not", "configured", "for", "chmod", "ACL", "or", "setfacl", "NUMBER", "You", "can", "set", "permission_method", "to", "chmod_", "NUMBER", "but", "we", "advise", "only", "as", "a", "last", "resort", "as", "it", "gives", "read", "write", "permissions", "to", "every", "user", "NUMBER", "write", "formatter", "formatBlock", "errorMessage", "error", "true", "You", "can", "simple", "throw", "an", "exception", "NUMBER", "This", "will", "stop", "deployment", "process", "NUMBER", "I", "think", "we", "need", "put", "in", "docs", "can", "anybody", "do", "this", "Can", "you", "make", "PR", "for", "this", "Cool", "thanks", "Awesome", "Can", "you", "add", "docs", "for", "this", "too", "Cool", "thanks", "Please", "run", "deployer", "with", "vvv", "option", "NUMBER", "Great", "but", "you", "need", "to", "get", "rid", "of", "entire", "drupal", "NUMBER", "dir", "NUMBER", "yaml", "Use", "Symfony", "Yaml", "Component", "NUMBER", "sergiocarracedo", "I", "think", "task", "drupal", "setings", "should", "be", "instead", "of", "task", "deploy", "configure", "in", "deployphp", "recipes", "NUMBER", "And", "we", "will", "write", "a", "manual", "for", "users", "NUMBER", "Can", "anyone", "add", "docs", "about", "f", "sunglasses", "Copy", "common", "NUMBER", "php", "recipe", "and", "rename", "current", "to", "what", "you", "want", "Yes", "This", "be", "cool", "feature", "NUMBER", "Must", "have", "Monolog", "be", "a", "great", "idea", "Which", "ssh", "implementation", "do", "you", "use", "Try", "to", "use", "deploy", "keys", "NUMBER", "Here", "be", "my", "work", "configurations", "with", "oanhnn", "deploy", "example", "LINK", "example", "NUMBER", "git", "Local", "Ubuntu", "NUMBER", "OpenSSH_", "NUMBER", "p", "NUMBER", "Ubuntu", "NUMBER", "ubuntu", "NUMBER", "OpenSSL", "NUMBER", "f", "NUMBER", "Jan", "NUMBER", "PHP", "NUMBER", "NUMBER", "ubuntu", "NUMBER", "cli", "build", "Jul", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "file", "NUMBER", "ssh", "config", "on", "my", "PC", "Host", "github", "NUMBER", "com", "PreferredAuthentications", "publickey", "ForwardAgent", "yes", "Host", "NUMBER", "ForwardAgent", "yes", "Remote", "CentOS", "NUMBER", "OpenSSH_", "NUMBER", "p", "NUMBER", "OpenSSL", "NUMBER", "e", "fips", "NUMBER", "Feb", "NUMBER", "PHP", "NUMBER", "cli", "build", "Nov", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "file", "etc", "ssh", "sshd_config", "on", "my", "server", "Protocol", "NUMBER", "SyslogFacility", "AUTHPRIV", "PubkeyAuthentication", "yes", "AuthorizedKeysFile", "NUMBER", "ssh", "authorized_keys", "PasswordAuthentication", "yes", "ChallengeResponseAuthentication", "no", "GSSAPIAuthentication", "yes", "GSSAPICleanupCredentials", "yes", "UsePAM", "yes", "Accept", "locale", "relate", "environment", "variables", "AcceptEnv", "LANG", "LC_CTYPE", "LC_NUMERIC", "LC_TIME", "LC_COLLATE", "LC_MONETARY", "LC_MESSAGES", "AcceptEnv", "LC_PAPER", "LC_NAME", "LC_ADDRESS", "LC_TELEPHONE", "LC_MEASUREMENT", "AcceptEnv", "LC_IDENTIFICATION", "LC_ALL", "LANGUAGE", "AcceptEnv", "XMODIFIERS", "AllowAgentForwarding", "yes", "X", "NUMBER", "Forwarding", "yes", "ClientAliveInterval", "NUMBER", "ClientAliveCountMax", "NUMBER", "Subsystem", "sftp", "usr", "libexec", "openssh", "sftp", "server", "What", "about", "users", "who", "use", "NUMBER", "Look", "like", "bash", "do", "not", "available", "on", "your", "remove", "server", "NUMBER", "Cool", "Thanks", "Can", "you", "update", "docs", "too", "deployphp", "maintainer", "check", "this", "out", "Does", "ext", "ssh", "NUMBER", "support", "it", "deployphp", "maintainer", "this", "be", "really", "request", "feature", "NUMBER", "We", "need", "to", "think", "how", "be", "better", "to", "bring", "it", "NUMBER", "Cool", "But", "why", "you", "need", "it", "piotrekkr", "what", "about", "use", "option", "func", "instead", "of", "getopt", "Cool", "Cool", "Can", "you", "add", "docs", "deployphp", "maintainer", "what", "you", "thinks", "about", "this", "PR", "Can", "anybody", "test", "it", "One", "issue", "LINK", "ci", "NUMBER", "com", "g", "deployphp", "deployer", "inspections", "e", "NUMBER", "dc", "NUMBER", "a", "NUMBER", "aac", "NUMBER", "e", "NUMBER", "b", "NUMBER", "NUMBER", "b", "NUMBER", "f", "NUMBER", "bdb", "NUMBER", "issue", "file", "recipe", "common", "NUMBER", "php", "status", "new", "orderField", "path", "order", "asc", "Hi", "A", "lot", "change", "since", "v", "NUMBER", "Either", "you", "should", "use", "deployer", "v", "NUMBER", "or", "you", "should", "update", "your", "configurations", "for", "v", "NUMBER", "Each", "NUMBER", "It", "s", "a", "bug", "with", "file", "names", "on", "Windows", "NUMBER", "Need", "replace", "all", "to", "NUMBER", "deployphp", "maintainer", "can", "anyone", "take", "care", "of", "this", "What", "of", "version", "was", "support", "this", "working_path", "for", "cd", "and", "run", "function", "NUMBER", "deploy_path", "for", "common", "NUMBER", "php", "recipe", "NUMBER", "Please", "provide", "you", "deploy", "NUMBER", "php", "file", "This", "be", "a", "way", "of", "bug", "Why", "you", "need", "this", "functionality", "You", "can", "specify", "password", "to", "null", "php", "server", "prod", "HOST", "NUMBER", "user", "USER", "password", "null", "And", "you", "will", "be", "asked", "for", "password", "NUMBER", "ZhukV", "can", "you", "add", "docs", "about", "this", "functionality", "Why", "we", "need", "this", "smiley", "This", "be", "more", "readable", "php", "Input", "definition", "for", "user", "specific", "argument", "and", "options", "NUMBER", "var", "InputDefinition", "when", "this", "php", "Input", "definition", "for", "user", "specific", "argument", "and", "options", "NUMBER", "var", "Symfony", "Component", "Console", "Input", "InputDefinition", "It", "could", "not", "be", "anything", "In", "you", "code", "you", "use", "InputDefinition", "and", "not", "expect", "this", "to", "be", "anything", "Same", "in", "phpdocs", "NUMBER", "PhpStorm", "fully", "support", "this", "by", "the", "way", "NUMBER", "This", "isn", "t", "about", "IDEs", "which", "may", "or", "may", "not", "use", "static", "code", "analysis", "especially", "because", "PHP", "be", "not", "strongly", "typed", "it", "s", "about", "reading", "and", "write", "code", "it", "s", "for", "humans", "NUMBER", "IMHO", "if", "you", "be", "use", "ing", "a", "class", "or", "a", "namespace", "you", "should", "be", "able", "to", "use", "it", "on", "the", "doc", "block", "without", "a", "FQN", "if", "you", "do", "not", "use", "it", "the", "you", "should", "definitely", "use", "the", "FQCN", "in", "the", "doc", "block", "NUMBER", "Lets", "get", "a", "vote", "or", "elfet", "decides", "for", "all", "of", "us", "to", "this", "and", "get", "this", "over", "with", "there", "s", "no", "point", "in", "arguing", "because", "humans", "tend", "to", "have", "different", "opinions", "and", "that", "s", "ok", "NUMBER", "That", "s", "why", "PSR", "NUMBER", "NUMBER", "were", "do", "to", "have", "a", "common", "way", "to", "write", "and", "style", "code", "so", "that", "we", "humans", "can", "interact", "with", "it", "better", "faster", "and", "less", "annoyed", "NUMBER", "gordalina", "lets", "do", "a", "little", "vote", "NUMBER", "Vote", "for", "NUMBER", "Use", "FQCN", "in", "doc", "block", "if", "class", "isn", "t", "use", "d", "or", "just", "class", "name", "if", "it", "be", "use", "d", "NUMBER", "Always", "use", "FQCN", "in", "doc", "block", "I", "vote", "for", "NUMBER", "I", "did", "some", "google", "ing", "before", "answering", "the", "question", "NUMBER", "First", "of", "all", "when", "I", "m", "in", "doubt", "about", "standards", "best", "practices", "I", "always", "consult", "the", "Symfony", "github", "repo", "where", "I", "find", "that", "the", "Symfony", "code", "seems", "to", "use", "FQCNs", "LINK", "L", "NUMBER", "NUMBER", "I", "think", "this", "weighs", "a", "lot", "here", "since", "Deployer", "uses", "a", "lot", "of", "Symfony", "Components", "NUMBER", "Another", "answer", "I", "find", "quite", "convincing", "LINK", "_CodeSniffer", "issue", "NUMBER", "issuecomment", "NUMBER", "Also", "I", "do", "agree", "with", "GrahamCampbell", "IDEs", "should", "not", "factor", "in", "the", "decision", "at", "all", "LINK", "issuecomment", "NUMBER", "NUMBER", "I", "usually", "just", "use", "Sublime", "Text", "Atom", "or", "Vim", "for", "example", "NUMBER", "And", "I", "also", "agree", "with", "lucasmichot", "here", "LINK", "issuecomment", "NUMBER", "Hence", "due", "to", "the", "reasons", "above", "I", "m", "voting", "for", "option", "NUMBER", "NUMBER", "NUMBER", "Again", "why", "we", "need", "this", "I", "would", "vote", "for", "a", "cs", "fixer", "see", "why", "LINK", "issuecomment", "NUMBER", "NUMBER", "paragraph", "isn", "t", "there", "any", "CI", "that", "validates", "a", "PR", "with", "cs", "fixer", "that", "would", "force", "correctness", "for", "all", "new", "code", "smile", "GrahamCampbell", "do", "it", "notify", "the", "PR", "that", "its", "valid", "invalid", "For", "example", "this", "PR", "has", "no", "info", "from", "StyleCI", "Awesome", "then", "Then", "ignore", "all", "my", "comments", "as", "everything", "was", "setup", "before", "i", "ve", "opened", "my", "mouth", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Maybe", "remove", "HHVM", "Reasons", "Does", "Deployer", "can", "be", "run", "on", "HHVM", "Take", "a", "look", "to", "Travis", "CI", "all", "hhvm", "build", "be", "fail", "NUMBER", "Well", "it", "s", "hard", "to", "tell", "whether", "it", "would", "be", "easy", "to", "fix", "it", "or", "not", "NUMBER", "But", "there", "s", "no", "harm", "in", "leaving", "it", "there", "so", "I", "would", "leave", "it", "as", "it", "be", "for", "now", "someone", "could", "always", "fix", "it", "NUMBER", "exactly", "Cool", "cool", "NUMBER", "Added", "it", "to", "the", "readme", "thanks", "for", "the", "PR", "sh", "NUMBER", "t", "Edit", "fix", "TAG", "NUMBER", "x", "NUMBER", "and", "NUMBER", "x", "NUMBER", "NUMBER", "NUMBER", "Introduce", "a", "CHANGELOG", "file", "for", "documenting", "patch", "release", "NUMBER", "This", "can", "be", "do", "with", "a", "script", "that", "reads", "the", "git", "log", "output", "this", "means", "that", "PR", "s", "should", "be", "squashed", "LINK", "scm", "NUMBER", "com", "book", "en", "v", "NUMBER", "Git", "Tools", "Rewriting", "History", "Squashing", "Commits", "into", "one", "commit", "only", "NUMBER", "NUMBER", "Require", "PR", "s", "to", "have", "a", "matching", "documentation", "PR", "NUMBER", "Process", "to", "merge", "fix", "for", "the", "lowest", "support", "release", "merge", "fix", "to", "NUMBER", "merge", "new", "features", "to", "NUMBER", "when", "a", "fix", "be", "merge", "to", "NUMBER", "the", "NUMBER", "branch", "can", "be", "merge", "to", "NUMBER", "Ping", "deployphp", "maintainer", "NUMBER", "for", "pretty", "much", "everything", "Just", "leaving", "here", "Symfony", "s", "BC", "Promise", "LINK", "We", "should", "adopt", "something", "like", "this", "gordalina", "NUMBER", "Can", "you", "write", "this", "to", "LINK", "NUMBER", "But", "I", "think", "PR", "s", "like", "this", "should", "come", "with", "a", "PR", "for", "docs", "as", "well", "NUMBER", "Once", "again", "I", "agree", "gordalina", "there", "be", "so", "much", "change", "it", "s", "hard", "to", "keep", "track", "NUMBER", "Documentation", "should", "be", "as", "up", "to", "date", "as", "possible", "NUMBER", "Should", "Deployer", "use", "namespace", "for", "function", "in", "function", "NUMBER", "php", "To", "protect", "from", "overriding", "when", "install", "via", "Composer", "with", "Laravel", "NUMBER", "In", "recipe", "can", "be", "use", "in", "two", "ways", "php", "use", "function", "Deployer", "task", "or", "php", "namespace", "Deployer", "deployphp", "maintainer", "what", "do", "you", "think", "If", "you", "use", "use", "function", "you", "d", "have", "to", "import", "all", "function", "not", "only", "task", "NUMBER", "So", "i", "d", "go", "for", "namespace", "Deployer", "NUMBER", "Also", "if", "this", "be", "to", "be", "implement", "i", "d", "suggest", "in", "NUMBER", "per", "semver", "LINK", "compliance", "NUMBER", "Lets", "not", "break", "API", "in", "minor", "update", "NUMBER", "I", "already", "write", "a", "couple", "of", "times", "how", "I", "m", "a", "bit", "troubled", "by", "the", "global", "way", "Deployer", "sometimes", "handles", "things", "so", "I", "d", "back", "any", "solution", "NUMBER", "On", "another", "note", "I", "agree", "with", "gordalina", "here", "the", "idea", "be", "good", "but", "it", "s", "hard", "to", "see", "whether", "it", "could", "be", "achieved", "in", "a", "non", "BC", "breaking", "fashion", "NUMBER", "ZeeCoder", "I", "don", "t", "think", "it", "s", "achievable", "in", "a", "non", "BC", "breaking", "fashion", "and", "I", "m", "ok", "with", "that", "if", "and", "only", "if", "there", "s", "a", "proper", "version", "scheme", "such", "as", "semver", "and", "documentation", "for", "it", "NUMBER", "My", "thoughts", "exactly", "So", "you", "think", "go", "for", "v", "NUMBER", "For", "certain", "features", "like", "this", "one", "yes", "imho", "NUMBER", "Well", "lets", "release", "NUMBER", "Also", "i", "have", "NUMBER", "awesome", "feature", "for", "this", "release", "NUMBER", "fork_and_knife", "fork_and_knife", "fork_and_knife", "fork_and_knife", "Is", "there", "any", "other", "way", "to", "fix", "deployment", "of", "laravel", "apps", "On", "qua", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "Anton", "Medvedev", "notifications", "github", "NUMBER", "com", "write", "Well", "lets", "release", "NUMBER", "Also", "i", "ha\u043c\u0443", "NUMBER", "awesome", "feature", "for", "this", "release", "NUMBER", "image", "fork_and_knife", "image", "fork_and_knife", "image", "fork_and_knife", "image", "fork_and_knife", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Yes", "try", "to", "use", "onlyOn", "NUMBER", "wink", "php", "task", "NUMBER", "onlyOn", "server", "NUMBER", "task", "NUMBER", "onlyOn", "server", "NUMBER", "task", "NUMBER", "onlyOn", "server", "NUMBER", "We", "really", "need", "to", "implement", "this", "feature", "NUMBER", "deploy", "release", "Then", "new", "release", "dir", "created", "LOCK", "file", "created", "within", "it", "NUMBER", "If", "prev", "release", "contains", "LOCK", "file", "error", "throw", "NUMBER", "deploy", "symlink", "After", "symlink", "LOCK", "file", "delete", "NUMBER", "rollback", "Skip", "all", "release", "what", "contains", "LOCK", "file", "NUMBER", "cleanup", "Delete", "all", "release", "what", "contains", "LOCK", "file", "check", "if", "current", "not", "linked", "to", "it", "NUMBER", "LINK", "NUMBER", "acquire_lock", "and", "release_lock", "NUMBER", "Try", "switch", "to", "phpseclib", "NUMBER", "Still", "error", "Your", "error", "Permission", "denied", "publickey", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Add", "deploy", "key", "to", "repo", "NUMBER", "Ref", "LINK", "client", "issue", "NUMBER", "Web", "based", "client", "for", "deploy", "by", "button", "NUMBER", "nepsdotin", "Please", "fork", "this", "repo", "create", "a", "branch", "base", "branch", "NUMBER", "x", "and", "make", "pull", "request", "after", "you", "finished", "As", "in", "capistrano", "NUMBER", "And", "also", "maybe", "upgrade", "of", "phpseclib", "fork", "NUMBER", "Can", "you", "make", "PR", "to", "docs", "phpseclib", "support", "this", "too", "NUMBER", "Using", "git", "git", "clone", "reference", "TAG", "learned", "the", "dissociate", "option", "to", "go", "with", "it", "it", "borrows", "objects", "from", "the", "reference", "object", "store", "while", "cloning", "only", "to", "reduce", "network", "traffic", "and", "then", "dissociates", "the", "resulting", "clone", "from", "the", "reference", "by", "performing", "local", "copies", "of", "borrowed", "objects", "NUMBER", "Yes", "sure", "NUMBER", "But", "it", "s", "better", "to", "detect", "git", "version", "and", "if", "git", "support", "it", "use", "it", "NUMBER", "Main", "feature", "to", "Deployer", "v", "NUMBER", "Where", "will", "this", "be", "implement", "exactly", "and", "what", "will", "we", "store", "in", "it", "Creation", "of", "Deployer", "deps", "i", "think", "NUMBER", "Like", "StageStrategy", "and", "Server", "impl", "NUMBER", "All", "what", "as", "an", "interface", "i", "think", "NUMBER", "Pimple", "NUMBER", "for", "pimple", "NUMBER", "Could", "we", "also", "store", "global", "configurations", "in", "pimple", "Is", "there", "a", "way", "to", "make", "a", "parameter", "protected", "I", "think", "pretty", "much", "everything", "can", "be", "stored", "in", "pimple", "container", "LINK", "L", "NUMBER", "NUMBER", "for", "Pimple", "it", "s", "simple", "straightforward", "NUMBER", "As", "far", "as", "I", "see", "it", "there", "s", "no", "need", "for", "complex", "DI", "implementations", "like", "Symfony", "s", "NUMBER", "Thanks", "Try", "the", "NUMBER", "alpha", "NUMBER", "version", "NUMBER", "It", "seems", "the", "get", "support", "there", "LINK", "alpha", "NUMBER", "Added", "support", "for", "npm", "style", "semver", "operators", "and", "ranges", "space", "AND", "OR", "Thanks", "NUMBER", "Wow", "Thanks", "you", "for", "PR", "It", "s", "good", "to", "use", "UTC", "as", "default", "timezone", "it", "s", "good", "that", "it", "be", "configurable", "NUMBER", "Although", "it", "should", "be", "add", "to", "the", "documentation", "NUMBER", "Also", "this", "might", "fail", "when", "deploying", "to", "multiple", "servers", "with", "different", "timezones", "but", "do", "someone", "have", "this", "use", "case", "Maybe", "separate", "this", "thing", "to", "local", "task", "Hello", "It", "should", "be", "set", "ssh_type", "ext", "ssh", "NUMBER", "Yes", "correct", "NUMBER", "Can", "you", "create", "PR", "to", "fix", "docs", "And", "you", "also", "need", "to", "require", "herzult", "php", "ssh", "with", "composer", "NUMBER", "I", "figured", "why", "NUMBER", "Because", "of", "phar", "NUMBER", "Phar", "do", "not", "contains", "php", "ssh", "NUMBER", "So", "it", "will", "be", "work", "for", "Deployer", "install", "with", "Composer", "NUMBER", "Can", "any", "one", "update", "docs", "Hmm", "need", "to", "check", "deps", "NUMBER", "Looks", "like", "one", "on", "deps", "use", "old", "deps", "NUMBER", "Can", "you", "create", "issue", "You", "can", "build", "phar", "youself", "NUMBER", "I", "m", "also", "will", "think", "about", "namespace", "for", "Deployer", "func", "NUMBER", "Based", "on", "PR", "NUMBER", "Bug", "from", "NUMBER", "deployphp", "maintainer", "lets", "test", "this", "and", "discuss", "Do", "we", "really", "need", "tasks", "ids", "ZhukV", "i", "think", "it", "s", "a", "little", "bit", "complicated", "NUMBER", "I", "d", "fix", "this", "myself", "without", "introduction", "tasks", "ids", "NUMBER", "Check", "this", "out", "NUMBER", "b", "NUMBER", "c", "NUMBER", "ihsanudin", "do", "you", "test", "your", "PR", "deployphp", "maintainer", "that", "do", "you", "think", "about", "this", "PR", "guys", "Maybe", "separate", "deploy", "writable", "file", "task", "to", "custom", "recipe", "NUMBER", "party", "And", "just", "merge", "chmod", "R", "chown", "change", "ZhukV", "great", "work", "Awesome", "Can", "you", "move", "your", "PR", "from", "ZhukV", "master", "to", "deployphp", "fix", "same", "tasks", "execution", "branch", "and", "create", "new", "PR", "from", "it", "to", "other", "people", "deployphp", "org", "be", "able", "to", "push", "to", "it", "Hmmm", "look", "like", "a", "bug", "but", "i", "not", "sure", "NUMBER", "deployphp", "maintainer", "guys", "can", "anybody", "check", "this", "smile", "ZhukV", "thanks", "Fixed", "Why", "we", "need", "sudo", "for", "cleanup", "If", "you", "deploy", "with", "same", "user", "no", "problem", "will", "be", "NUMBER", "Hmm", "I", "don", "t", "quite", "get", "this", "one", "either", "what", "happened", "exactly", "Tell", "us", "more", "detail", "about", "the", "server", "and", "how", "you", "configured", "Deployer", "NUMBER", "You", "need", "set", "correct", "permissions", "NUMBER", "Try", "to", "install", "setfacl", "and", "do", "deploy", "again", "NUMBER", "And", "also", "allow", "to", "specify", "NUMBER", "as", "unlimited", "timeout", "NUMBER", "ping", "TheRatG", "I", "don", "t", "think", "this", "be", "good", "solution", "to", "have", "two", "same", "tasks", "php", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "create_cache_dir", "deploy", "shared", "deploy", "writable", "HERE", "deploy", "assets", "deploy", "vendors", "deploy", "assetic", "dump", "deploy", "cache", "warmup", "deploy", "writable", "AND", "HERE", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "If", "you", "want", "you", "can", "do", "you", "own", "check", "with", "after", "php", "after", "deploy", "cache", "warmup", "check_wtitable_dirs", "Yes", "you", "be", "right", "thats", "be", "do", "by", "deploy", "writable", "task", "before", "this", "tasks", "NUMBER", "So", "we", "don", "t", "need", "to", "run", "it", "twice", "NUMBER", "I", "think", "I", "get", "where", "this", "could", "be", "a", "problem", "NUMBER", "Please", "correct", "me", "if", "you", "thought", "of", "something", "else", "ihsanudin", "NUMBER", "Imagine", "the", "following", "you", "have", "the", "web", "server", "user", "www", "data", "and", "you", "use", "another", "deployer", "for", "deployment", "NUMBER", "Now", "imagine", "that", "for", "some", "reason", "only", "a", "basic", "chmod", "be", "usable", "on", "the", "server", "NUMBER", "So", "neither", "chmod", "a", "nor", "setfacl", "be", "available", "NUMBER", "This", "means", "that", "for", "the", "first", "time", "the", "following", "line", "will", "run", "run", "sudo", "chmod", "NUMBER", "dirs", "Then", "warmup", "happens", "which", "creates", "file", "with", "the", "deployer", "user", "s", "permissions", "which", "means", "that", "the", "www", "data", "webserver", "user", "won", "t", "have", "access", "to", "these", "file", "unless", "deploy", "writable", "runs", "once", "again", "NUMBER", "Do", "I", "understand", "the", "situation", "correctly", "Although", "run", "the", "task", "a", "second", "time", "in", "this", "case", "wouldn", "t", "help", "since", "chmod", "be", "not", "in", "recursive", "mode", "NUMBER", "Hmm", "there", "was", "a", "discussion", "about", "this", "which", "be", "close", "now", "have", "a", "look", "at", "this", "LINK", "elfet", "be", "there", "any", "problem", "that", "could", "arise", "from", "use", "chmod", "R", "NUMBER", "instead", "of", "chmod", "NUMBER", "This", "be", "the", "second", "issue", "regard", "this", "exact", "problem", "so", "I", "think", "we", "need", "to", "think", "about", "it", "NUMBER", "Well", "i", "think", "we", "can", "change", "chmod", "to", "chmod", "R", "NUMBER", "But", "note", "it", "s", "better", "to", "use", "setfacl", "NUMBER", "As", "oanhnn", "point", "out", "simple", "use", "chmod", "R", "might", "still", "not", "be", "enough", "NUMBER", "If", "we", "change", "that", "and", "the", "developer", "doesn", "t", "allow", "sudo", "ing", "then", "silent", "error", "could", "potentially", "occur", "NUMBER", "terrible", "developer", "experience", "NUMBER", "And", "there", "s", "something", "else", "that", "still", "bug", "me", "NUMBER", "Suppose", "we", "change", "this", "so", "that", "deployment", "from", "now", "on", "uses", "the", "chmod", "R", "command", "NUMBER", "Now", "suppose", "I", "have", "an", "application", "where", "during", "deployment", "I", "NUMBER", "create", "a", "folder", "NUMBER", "generate", "some", "file", "in", "it", "for", "which", "specific", "permissions", "be", "set", "up", "for", "whatever", "reason", "NUMBER", "make", "above", "mention", "folder", "writable", "by", "setting", "the", "writable_dirs", "global", "parameter", "NUMBER", "Now", "every", "file", "s", "permissions", "would", "be", "overwritten", "silently", "NUMBER", "I", "know", "it", "s", "an", "unlikely", "edge", "case", "but", "I", "m", "still", "afraid", "of", "such", "side", "effect", "NUMBER", "This", "be", "really", "edge", "case", "If", "we", "try", "to", "solve", "all", "cases", "we", "endup", "only", "solving", "them", "NUMBER", "Developers", "need", "to", "understand", "what", "they", "be", "doing", "NUMBER", "If", "some", "one", "do", "not", "have", "setfacl", "runs", "command", "not", "from", "www", "user", "and", "wants", "to", "create", "writable", "dirs", "without", "sudo", "we", "has", "nothing", "to", "do", "this", "that", "NUMBER", "Hmm", "I", "m", "still", "oppose", "to", "this", "NUMBER", "Why", "not", "just", "introduce", "another", "task", "which", "could", "be", "use", "in", "cases", "like", "this", "php", "TAG", "NUMBER", "\u0438\u044e\u043d\u044f", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "Marco", "Perone", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "Cool", "stuff", "This", "will", "be", "nice", "to", "speed", "up", "the", "clone", "operation", "NUMBER", "I", "didn", "t", "try", "it", "but", "I", "think", "that", "the", "result", "will", "be", "the", "same", "of", "a", "simple", "clone", "so", "for", "example", "you", "would", "not", "get", "a", "copy", "of", "the", "vendor", "directory", "and", "so", "you", "would", "not", "solve", "the", "use", "case", "the", "was", "raise", "in", "the", "beginning", "of", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "But", "if", "you", "want", "this", "feature", "you", "have", "to", "upgrade", "git", "all", "simple", "smile", "Big", "thanks", "What", "version", "of", "Laravel", "Show", "full", "deploy", "NUMBER", "php", "file", "here", "please", "NUMBER", "Do", "your", "require", "your", "autoload", "NUMBER", "php", "file", "You", "shoud", "not", "to", "do", "this", "NUMBER", "Yeah", "seems", "like", "that", "NUMBER", "Can", "you", "use", "phar", "andreascreten", "you", "can", "implement", "Lumen", "recipe", "by", "yourself", "NUMBER", "Working", "on", "that", "This", "issue", "will", "be", "resolve", "with", "Deployer", "v", "NUMBER", "x", "namespace", "function", "Nice", "Thanks", "Works", "good", "Can", "you", "test", "it", "there", "I", "think", "its", "better", "to", "have", "something", "like", "this", "php", "set", "composer_options", "no", "dev", "no", "interaction", "NUMBER", "Danielss", "NUMBER", "will", "implement", "myself", "NUMBER", "Done", "NUMBER", "Danielss", "NUMBER", "you", "can", "specify", "this", "option", "server", "specified", "for", "one", "or", "for", "all", "servers", "php", "server", "NUMBER", "env", "composer_options", "NUMBER", "Yeah", "it", "s", "kind", "of", "deprecate", "NUMBER", "Hmm", "then", "it", "should", "be", "remove", "and", "the", "docs", "should", "be", "update", "NUMBER", "But", "since", "this", "be", "remove", "the", "database", "migrate", "command", "must", "be", "documented", "properly", "as", "the", "alternative", "solution", "NUMBER", "Basically", "what", "needs", "to", "be", "do", "to", "have", "db", "migrations", "be", "this", "php", "after", "some", "task", "database", "migrate", "I", "ll", "create", "the", "PRs", "as", "soon", "as", "I", "find", "the", "time", "for", "it", "NUMBER", "Cool", "sunglasses", "Done", "NUMBER", "Run", "test", "before", "deploy", "task", "NUMBER", "Specifically", "deploy", "release", "task", "NUMBER", "If", "test", "fail", "you", "can", "run", "cleanup", "task", "NUMBER", "You", "can", "catch", "Exception", "and", "remove", "release", "dir", "and", "everything", "you", "want", "NUMBER", "Clone", "your", "repository", "manually", "on", "server", "to", "check", "what", "everything", "be", "ok", "NUMBER", "ZeeCoder", "so", "what", "wrong", "with", "error", "report", "I", "don", "t", "know", "ether", "NUMBER", "So", "what", "s", "up", "with", "this", "PR", "Is", "it", "for", "specifically", "Laravel", "NUMBER", "Because", "if", "it", "be", "then", "deploying", "a", "Laravel", "NUMBER", "app", "after", "this", "update", "will", "create", "a", "useless", "NUMBER", "env", "shared", "file", "doesn", "t", "it", "As", "far", "as", "I", "understand", "the", "current", "laravel", "recipe", "be", "for", "laravel", "NUMBER", "If", "this", "be", "all", "it", "takes", "to", "support", "Laravel", "NUMBER", "deployment", "then", "it", "should", "be", "in", "the", "docs", "instead", "like", "with", "the", "symfony", "recipe", "and", "the", "symfony", "NUMBER", "directory", "structure", "NUMBER", "What", "be", "your", "thoughts", "on", "that", "So", "do", "we", "need", "to", "merge", "it", "It", "depends", "NUMBER", "If", "it", "doesn", "t", "hurt", "laravel", "NUMBER", "apps", "merge", "If", "it", "do", "but", "this", "be", "all", "that", "s", "needed", "for", "laravel", "NUMBER", "support", "write", "it", "in", "the", "docs", "instead", "of", "change", "the", "recipe", "NUMBER", "If", "it", "takes", "more", "than", "that", "to", "support", "laravel", "NUMBER", "apps", "we", "should", "consider", "creating", "a", "separate", "laravel", "NUMBER", "recipe", "NUMBER", "imho", "ZeeCoder", "i", "think", "you", "can", "merge", "it", "NUMBER", "I", "ll", "wait", "for", "oanhnn", "s", "answer", "just", "to", "be", "sure", "no", "need", "to", "rush", "NUMBER", "Okay", "I", "m", "convinced", "dear", "oanhnn", "NUMBER", "nWidart", "so", "it", "s", "turn", "out", "Here", "be", "my", "sudoers", "on", "debian", "elfet", "ALL", "ALL", "NOPASSWD", "usr", "sbin", "service", "php", "NUMBER", "fpm", "reload", "Try", "to", "remove", "this", "line", "php", "Deployer", "Task", "Context", "get", "getServer", "connect", "Feel", "free", "to", "ask", "any", "question", "NUMBER", "Cool", "NUMBER", "Need", "more", "time", "to", "test", "try", "to", "do", "all", "on", "weekend", "NUMBER", "Please", "take", "a", "look", "at", "scrutinizer", "report", "for", "your", "PR", "LINK", "ci", "NUMBER", "com", "g", "deployphp", "deployer", "inspections", "a", "NUMBER", "db", "NUMBER", "NUMBER", "d", "NUMBER", "b", "NUMBER", "ad", "NUMBER", "a", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "f", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "LINK", "NUMBER", "c", "NUMBER", "e", "NUMBER", "NUMBER", "dd", "NUMBER", "beb", "NUMBER", "ce", "NUMBER", "d", "NUMBER", "png", "Test", "coverage", "decrease\u0432", "a", "little", "bit", "NUMBER", "If", "you", "can", "keep", "them", "on", "same", "level", "it", "will", "be", "NUMBER", "awesome", "NUMBER", "But", "if", "not", "nothing", "terrible", "leave", "it", "as", "it", "be", "NUMBER", "PS", "Where", "be", "a", "lot", "issue", "to", "implement", "too", "if", "you", "want", "take", "a", "look", "at", "NUMBER", "PPS", "Soon", "Deployer", "Roadmap", "will", "be", "ready", "NUMBER", "Cool", "feature", "NUMBER", "Can", "you", "implement", "this", "too", "Thats", "ok", "pass", "must", "be", "as", "default", "NUMBER", "Nice", "work", "NUMBER", "Need", "same", "one", "else", "too", "look", "at", "the", "PR", "before", "i", "ll", "merge", "it", "NUMBER", "I", "test", "this", "feature", "look", "good", "NUMBER", "Guys", "please", "test", "this", "feature", "too", "ZhukV", "i", "m", "going", "to", "implement", "event", "dispatcher", "in", "Deployer", "NUMBER", "Can", "you", "rewrite", "your", "feature", "by", "use", "dispatcher", "later", "Now", "it", "s", "not", "possible", "due", "many", "reasons", "security", "parallel", "execution", "ext", "NUMBER", "But", "i", "think", "it", "will", "be", "available", "when", "implement", "events", "in", "Deployer", "NUMBER", "Require", "recipe", "at", "beginning", "of", "file", "php", "require", "recipe", "common", "NUMBER", "php", "Try", "chmod", "and", "chown", "phar", "file", "NUMBER", "Look", "like", "file", "has", "wrong", "permissions", "NUMBER", "Hmm", "try", "to", "find", "how", "to", "fix", "it", "NUMBER", "Fixed", "in", "v", "NUMBER", "Can", "you", "run", "your", "command", "with", "vvv", "options", "and", "show", "output", "I", "do", "not", "know", "what", "be", "it", "NUMBER", "Can", "you", "find", "out", "why", "this", "be", "happening", "It", "s", "work", "for", "me", "php", "upload", "__DIR__", "NUMBER", "README", "NUMBER", "md", "home", "user", "project", "README", "NUMBER", "md", "How", "be", "you", "uploading", "Yes", "now", "cd", "function", "has", "no", "effect", "on", "upload", "and", "download", "function", "NUMBER", "This", "be", "consciously", "to", "simplicity", "NUMBER", "If", "you", "want", "you", "can", "create", "PR", "this", "cd", "deploy_path", "feature", "NUMBER", "Yes", "your", "solution", "be", "correct", "NUMBER", "Test", "fail", "can", "you", "check", "and", "fix", "it", "before", "i", "merge", "your", "PR", "Is", "there", "any", "progress", "here", "Max", "Might", "Did", "you", "try", "to", "fix", "the", "issue", "It", "s", "not", "the", "Symfony", "Component", "that", "s", "at", "fault", "here", "look", "at", "the", "error", "more", "closely", "LINK", "ci", "NUMBER", "org", "deployphp", "deployer", "jobs", "NUMBER", "L", "NUMBER", "It", "has", "something", "to", "do", "the", "way", "the", "test", "work", "NUMBER", "For", "some", "reason", "during", "that", "test", "the", "output", "you", "re", "passing", "to", "the", "Progress", "Bar", "by", "calling", "output", "giving", "you", "null", "instead", "of", "a", "proper", "OutputFormatterInterface", "object", "when", "the", "component", "calls", "the", "getFormatter", "method", "on", "it", "LINK", "L", "NUMBER", "I", "hope", "this", "helps", "NUMBER", "Seems", "so", "NUMBER", "The", "getFormatter", "method", "needs", "stubbing", "NUMBER", "Global", "parameters", "be", "what", "need", "to", "be", "really", "global", "such", "as", "repository", "etc", "NUMBER", "Everything", "else", "must", "be", "a", "environment", "specified", "relate", "to", "server", "deploy", "path", "branch", "to", "deploy", "stages", "etc", "NUMBER", "Also", "in", "future", "i", "plane", "to", "refactor", "global", "parameters", "and", "will", "be", "available", "to", "set", "global", "parameters", "from", "on", "evn", "and", "change", "apper", "on", "all", "envs", "talking", "about", "parallel", "deployment", "this", "allow", "to", "write", "task", "which", "will", "set", "one", "release", "number", "for", "all", "envs", "NUMBER", "Yes", "it", "s", "a", "bug", "NUMBER", "On", "Mac", "OS", "x", "everything", "looks", "normal", "NUMBER", "Do", "you", "know", "why", "this", "happens", "on", "Ubuntu", "Really", "strange", "behavior", "NUMBER", "Wow", "cool", "Can", "you", "create", "PR", "so", "i", "can", "test", "it", "Fixed", "NUMBER", "Awesome", "This", "very", "helpful", "indeed", "NUMBER", "That", "s", "purpose", "for", "this", "Why", "contributors", "has", "to", "be", "restricted", "oanhnn", "if", "you", "have", "any", "argument", "lets", "us", "know", "NUMBER", "For", "now", "i", "m", "closing", "this", "PR", "NUMBER", "Thanks", "a", "lot", "You", "can", "run", "test", "locally", "too", "php", "task", "test", "function", "runLocally", "cd", "project_dir", "php", "vendor", "bin", "phpunit", "before", "deploy", "test", "Feel", "free", "to", "ask", "any", "question", "Thanks", "But", "why", "we", "need", "it", "gpupo", "i", "see", "there", "be", "a", "lot", "of", "bad", "change", "NUMBER", "And", "i", "dont", "think", "we", "need", "them", "NUMBER", "gpupo", "if", "you", "have", "argument", "let", "as", "know", "NUMBER", "For", "now", "i", "m", "closing", "this", "PR", "NUMBER", "What", "about", "Symfony", "Console", "s", "progress", "bar", "It", "s", "pretty", "damn", "good", "NUMBER", "Can", "you", "implement", "this", "Hi", "You", "can", "override", "tasks", "php", "task", "deploy", "writable", "function", "run", "cd", "release_path", "chmod", "R", "NUMBER", "storage", "run", "cd", "release_path", "chmod", "R", "NUMBER", "vendor", "Can", "you", "run", "which", "setfacl", "and", "show", "output", "And", "this", "if", "hash", "setfacl", "NUMBER", "dev", "null", "then", "echo", "true", "fi", "So", "setfacl", "be", "exists", "NUMBER", "Try", "run", "setfacl", "R", "m", "u", "nginx", "rwX", "m", "u", "whoami", "rwX", "storage", "vendor", "And", "this", "sudo", "too", "NUMBER", "Thanks", "Hi", "You", "need", "to", "remove", "this", "require", "recipe", "common", "NUMBER", "php", "You", "can", "skip", "params", "like", "this", "identityFile", "Sorry", "can", "you", "explain", "in", "detail", "what", "you", "want", "to", "Hmmm", "you", "can", "try", "to", "catch", "exception", "somehow", "NUMBER", "But", "i", "think", "it", "s", "not", "possible", "now", "NUMBER", "We", "need", "to", "implement", "events", "in", "Deployer", "to", "make", "it", "possible", "NUMBER", "Hmm", "i", "understand", "the", "problem", "NUMBER", "But", "what", "if", "after", "failure", "i", "want", "to", "see", "what", "s", "broken", "ssh", "to", "server", "and", "look", "at", "NUMBER", "myself", "Than", "fix", "and", "continue", "deploying", "NUMBER", "Maybe", "it", "s", "better", "to", "tell", "user", "before", "new", "deployment", "what", "there", "if", "a", "release", "symlink", "ie", "deploy", "in", "process", "So", "user", "run", "cleanup", "task", "manually", "and", "understand", "NUMBER", "what", "happens", "on", "the", "server", "Good", "addition", "NUMBER", "Must", "have", "feature", "NUMBER", "I", "suggest", "\u0442\u0443\u0447\u0435", "syntax", "php", "env", "setProtected", "key", "NUMBER", "But", "it", "has", "to", "be", "accessible", "by", "dot", "notation", "php", "env", "setProtected", "server", "name", "config", "getName", "host", "config", "getHost", "port", "config", "getPort", "env", "set", "server", "NUMBER", "Thrown", "an", "exception", "NUMBER", "env", "set", "server", "NUMBER", "name", "NUMBER", "Thrown", "an", "exception", "NUMBER", "I", "think", "setProtected", "key", "value", "better", "NUMBER", "But", "setAsProtected", "be", "like", "_set", "as", "protected", "this", "key_", "setAsProtected", "key", "NUMBER", "Well", "you", "convince\u0432", "me", "NUMBER", "setAsProtect", "be", "better", "NUMBER", "Awesome", "Nice", "work", "Merged", "beer", "beers", "Will", "wait", "for", "docs", "NUMBER", "Thanks", "I", "have", "a", "new", "idea", "NUMBER", "That", "be", "all", "env", "vars", "private", "by", "default", "NUMBER", "And", "if", "you", "want", "you", "can", "override", "it", "with", "env", "override", "key", "value", "ZeeCoder", "oanhnn", "gordalina", "what", "do", "you", "think", "Thanks", "Good", "one", "NUMBER", "Can", "you", "create", "PR", "for", "this", "It", "s", "fail", "down", "because", "of", "BuilderTest", "NUMBER", "php", "L", "NUMBER", "LINK", "L", "NUMBER", "In", "this", "test", "Deployer", "Server", "Environment", "expected", "to", "be", "call", "once", "NUMBER", "And", "you", "add", "second", "call", "in", "this", "PR", "NUMBER", "Please", "before", "i", "merge", "this", "PR", "add", "docs", "to", "deployphp", "docs", "too", "NUMBER", "Thank", "a", "lot", "Now", "we", "need", "set", "as", "private", "here", "NUMBER", "I", "don", "t", "see", "bug", "here", "NUMBER", "Can", "you", "create", "example", "task", "some", "folder", "with", "spaces", "in", "the", "path", "This", "be", "definitely", "wrong", "NUMBER", "You", "should", "now", "write", "like", "this", "NUMBER", "Of", "course", "NUMBER", "Or", "use", "escape", "func", "I", "think", "better", "place", "for", "this", "data", "be", "env", "NUMBER", "env", "host", "It", "s", "good", "approach", "NUMBER", "Env", "already", "support", "this", "NUMBER", "You", "can", "do", "this", "php", "env", "config", "name", "prod", "NUMBER", "Now", "possible", "php", "echo", "env", "config", "NUMBER", "name", "prod", "Honestly", "i", "don", "t", "know", "sunglasses", "I", "don", "t", "implement", "this", "feature", "NUMBER", "Yes", "look", "good", "for", "me", "NUMBER", "What", "about", "automatically", "echo", "sudo", "password", "No", "more", "sudoers", "needed", "NUMBER", "Parse", "this", "commands", "sudo", "chmod", "NUMBER", "Into", "this", "echo", "password", "sudo", "S", "chmod", "NUMBER", "It", "s", "possible", "to", "do", "after", "outputting", "to", "term", "NUMBER", "What", "about", "other", "potential", "vulnerability", "bash_history", "top", "processes", "It", "s", "not", "possible", "because", "Proccess", "class", "only", "for", "local", "machine", "NUMBER", "PhpSecLib", "use", "on", "remote", "and", "it", "s", "not", "possible", "to", "do", "this", "it", "NUMBER", "What", "can", "be", "against", "echoing", "sudo", "password", "I", "think", "use", "tmp", "file", "for", "password", "be", "good", "solution", "NUMBER", "But", "i", "think", "implement", "this", "too", "complicated", "NUMBER", "And", "this", "needed", "only", "for", "deploy", "writable", "task", "NUMBER", "I", "think", "we", "can", "leave", "thinks", "as", "they", "be", "for", "now", "NUMBER", "You", "can", "set", "stages", "to", "a", "few", "servers", "server", "NUMBER", "stage", "prod", "server", "NUMBER", "stage", "prod", "stage", "server", "NUMBER", "env", "stages", "stage", "I", "think", "be", "better", "to", "separate", "something", "like", "ServerSelector", "class", "and", "implement", "all", "of", "this", "into", "it", "NUMBER", "Yes", "stages", "be", "for", "grouping", "server", "NUMBER", "Now", "by", "default", "will", "be", "deployed", "to", "server", "without", "specified", "stage", "NUMBER", "Oh", "forgot", "to", "answer", "here", "NUMBER", "I", "think", "this", "should", "be", "explained", "more", "in", "depth", "on", "the", "website", "NUMBER", "I", "m", "miss", "this", "feature", "too", "NUMBER", "NUMBER", "NUMBER", "months", "ago", "elfet", "said", "it", "s", "on", "its", "way", "LINK", "comment", "NUMBER", "Yes", "i", "m", "going", "to", "implement", "this", "soon", "NUMBER", "Already", "decouple", "StageStrategy", "NUMBER", "NUMBER", "And", "check", "new", "issue", "here", "LINK", "ci", "NUMBER", "com", "g", "deployphp", "deployer", "inspections", "fe", "NUMBER", "aa", "NUMBER", "NUMBER", "NUMBER", "ab", "NUMBER", "NUMBER", "f", "NUMBER", "e", "NUMBER", "BTW", "its", "better", "to", "separate", "PR", "into", "small", "independent", "ones", "NUMBER", "So", "it", "s", "simple", "to", "merge", "them", "NUMBER", "Do", "we", "really", "need", "has", "function", "Looks", "good", "NUMBER", "I", "m", "merge", "NUMBER", "Take", "a", "look", "at", "LINK", "Yeahh", "need", "to", "create", "issue", "there", "NUMBER", "Server", "config", "now", "be", "private", "you", "should", "set", "separate", "env", "var", "env", "host", "NUMBER", "NUMBER", "If", "you", "still", "what", "access", "config", "try", "this", "php", "Context", "get", "getServer", "getConfiguration", "What", "were", "the", "reasons", "behind", "remove", "the", "config", "function", "Separation", "of", "concepts", "NUMBER", "I", "think", "everything", "accessible", "and", "server", "specified", "should", "be", "in", "env", "vars", "NUMBER", "You", "can", "define", "something", "like", "this", "php", "server", "host", "NUMBER", "domain", "NUMBER", "com", "env", "host", "host", "NUMBER", "domain", "NUMBER", "com", "server", "host", "NUMBER", "domain", "NUMBER", "com", "env", "host", "host", "NUMBER", "domain", "NUMBER", "com", "Or", "like", "this", "php", "env", "host", "function", "return", "string", "run", "echo", "HOSTNAME", "Maybe", "create", "a", "PR", "which", "will", "be", "setting", "this", "env", "vars", "from", "config", "on", "run", "Take", "a", "look", "at", "function", "NUMBER", "php", "L", "NUMBER", "LINK", "L", "NUMBER", "I", "think", "it", "s", "because", "of", "callback", "in", "release_path", "env", "NUMBER", "Try", "run", "this", "command", "with", "vvv", "option", "and", "show", "output", "here", "NUMBER", "This", "happens", "because", "release_path", "do", "not", "exist", "yet", "NUMBER", "Add", "to", "you", "script", "this", "php", "before", "test", "test", "deploy", "release", "I", "will", "fix", "error", "message", "NUMBER", "be", "you", "want", "to", "execute", "some", "task", "before", "every", "others", "YES", "It", "s", "will", "be", "so", "goo\u0432", "English", "be", "not", "my", "primary", "language", "so", "i", "have", "problem", "some", "time", "with", "NUMBER", "Doc", "located", "here", "LINK", "Site", "located", "here", "LINK", "pages", "LINK", "Now", "it", "s", "possible", "to", "insert", "environment", "variable", "with", "NUMBER", "need", "to", "think", "some", "for", "parameters", "to", "refactor", "from", "this", "php", "run", "php", "release_path", "NUMBER", "trim", "get", "bin_dir", "NUMBER", "console", "assetic", "dump", "env", "env", "no", "debug", "To", "this", "php", "run", "php", "release_path", "bin_dir", "console", "assetic", "dump", "env", "env", "no", "debug", "Also", "separate", "parse", "from", "Environment", "class", "to", "separate", "unit", "NUMBER", "Does", "anybody", "wants", "to", "take", "care", "of", "this", "eyes", "Available", "syntaxes", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Nice", "one", "thanks", "NUMBER", "I", "update", "docs", "too", "NUMBER", "Need", "to", "think", "for", "a", "some", "syntax", "for", "parameters", "like", "this", "maybe", "php", "run", "php", "release_path", "bin_dir", "console", "assetic", "dump", "env", "env", "no", "debug", "Phar", "will", "automatically", "will", "be", "update", "in", "next", "NUMBER", "mins", "NUMBER", "Hmm", "yes", "NUMBER", "You", "be", "right", "NUMBER", "This", "be", "because", "of", "common", "NUMBER", "php", "L", "NUMBER", "LINK", "L", "NUMBER", "NUMBER", "Will", "be", "fix", "NUMBER", "Fixed", "NUMBER", "NUMBER", "This", "will", "gone", "away", "when", "phpseclib", "do", "release", "NUMBER", "Or", "i", "will", "implement", "ssh", "in", "php", "myself", "fist", "I", "don", "t", "quite", "get", "this", "NUMBER", "The", "phpseclib", "package", "has", "a", "lot", "of", "release", "LINK", "What", "do", "you", "mean", "by", "when", "phpseclib", "do", "release", "elfet", "Are", "you", "waiting", "for", "a", "NUMBER", "x", "version", "I", "see", "NUMBER", "Then", "this", "solution", "should", "be", "noted", "on", "the", "website", "until", "it", "gets", "fix", "somehow", "NUMBER", "Now", "the", "tool", "basically", "seems", "broken", "from", "an", "outsider", "s", "point", "of", "view", "if", "he", "try", "to", "install", "it", "via", "Composer", "NUMBER", "Even", "if", "he", "stumbles", "upon", "this", "thread", "it", "will", "still", "leave", "a", "bad", "taste", "in", "his", "mouth", "the", "tool", "loses", "some", "of", "it", "s", "credibility", "NUMBER", "I", "thinking", "about", "ugly", "hack", "until", "phpseclib", "release", "NUMBER", "Include", "phpseclib", "to", "project", "NUMBER", "What", "do", "you", "think", "ping", "ZeeCoder", "oanhnn", "kenjis", "gordalina", "nspyke", "Same", "question", "here", "NUMBER", "I", "think", "fork", "phpseclob", "and", "release", "it", "myself", "until", "phpseclib", "will", "release", "NUMBER", "It", "s", "better", "than", "nothing", "NUMBER", "Not", "an", "elegant", "solution", "but", "still", "better", "than", "including", "the", "whole", "project", "in", "Deployer", "NUMBER", "The", "fork", "already", "exists", "I", "think", "it", "will", "be", "in", "the", "next", "release", "NUMBER", "If", "I", "m", "not", "mistaken", "Deployer", "v", "NUMBER", "include", "the", "above", "mention", "fix", "NUMBER", "Could", "you", "check", "if", "it", "works", "as", "expected", "kenjis", "Yes", "Can", "anyone", "place", "new", "release", "NUMBER", "\u043e\u043a\u0442", "NUMBER", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "Hubert", "Viktor", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "Hmm", "I", "think", "so", "based", "on", "the", "commit", "phpseclib", "phpseclib", "NUMBER", "c", "NUMBER", "af", "NUMBER", "I", "think", "v", "NUMBER", "should", "be", "the", "thing", "Deployer", "needs", "NUMBER", "Can", "you", "confirm", "this", "elfet", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "loranger", "Can", "you", "try", "run", "and", "show", "ouput", "to", "here", "composer", "init", "composer", "require", "deployer", "deployer", "wesleywesley", "You", "be", "use", "symfony", "component", "NUMBER", "Current", "deployer", "has", "problem", "with", "symfony", "NUMBER", "x", "Please", "NUMBER", "Hi", "everyone", "Is", "someone", "want", "to", "check", "one", "of", "new", "recipes", "Laravel", "Zend", "Framework", "Yii", "WordPress", "nWidart", "great", "article", "If", "you", "can", "test", "and", "refactor", "common", "laravel", "NUMBER", "php", "recipe", "it", "will", "be", "NUMBER", "awesome", "Officially", "Deployer", "do", "not", "support", "Windows", "But", "it", "may", "work", "NUMBER", "I", "know", "where", "be", "problem", "in", "upload", "function", "NUMBER", "Need", "to", "add", "one", "str_replace", "NUMBER", "to", "it", "NUMBER", "Fixed", "Now", "on", "master", "branch", "soon", "will", "be", "in", "Deployer", "NUMBER", "elfet", "revert", "by", "commit", "LINK", "Yes", "truly", "NUMBER", "php", "ssh", "was", "remove", "from", "deployer", "NUMBER", "phar", "archive", "NUMBER", "You", "can", "install", "this", "package", "via", "composer", "NUMBER", "Reason", "be", "what", "i", "m", "going", "to", "drop", "support", "for", "ext", "ssh", "NUMBER", "in", "new", "Deployer", "release", "NUMBER", "So", "Deployer", "will", "be", "NUMBER", "php", "without", "any", "extra", "extensions", "NUMBER", "Hmm", "i", "think", "it", "s", "better", "to", "rename", "deployphp", "recipes", "to", "deployer", "recipes", "NUMBER", "But", "project", "be", "Deployer", "and", "_deployer_", "org", "name", "do", "not", "available", "NUMBER", "fried_shrimp", "There", "be", "a", "lot", "of", "other", "projects", "what", "has", "different", "org", "name", "silexphp", "Silex", "LINK", "NUMBER", "Not", "did", "not", "contact", "Github", "NUMBER", "What", "i", "m", "gona", "say", "to", "them", "That", "somebody", "register", "org", "with", "name", "what", "i", "prefer", "oanhnn", "well", "again", "NUMBER", "What", "about", "migrate", "to", "DotNotation", "smile", "Nice", "work", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "LINK", "f", "NUMBER", "d", "NUMBER", "e", "NUMBER", "NUMBER", "a", "NUMBER", "a", "NUMBER", "c", "NUMBER", "b", "NUMBER", "png", "Thanks", "Will", "be", "fix", "NUMBER", "Fixed", "NUMBER", "NUMBER", "available", "only", "in", "v", "NUMBER", "You", "can", "upgrade", "to", "v", "NUMBER", "by", "this", "command", "dep", "self", "update", "upgrade", "pre", "Now", "runLocally", "you", "can", "you", "like", "this", "php", "runLocally", "cd", "path", "do", "stuff", "I", "think", "we", "do", "not", "need", "localCD", "NUMBER", "Thanks", "a", "lot", "Ok", "NUMBER", "Cool", "one", "NUMBER", "I", "thing", "need", "to", "add", "some", "parameter", "with", "pre_run", "name", "or", "similar", "NUMBER", "Can", "you", "create", "PR", "with", "shell", "cheking", "and", "warning", "This", "will", "be", "so", "great", "green_apple", "Thanks", "you", "a", "lot", "Done", "LINK", "L", "NUMBER", "Is", "it", "a", "bug", "Can", "you", "add", "some", "test", "pbudzon", "Deployer", "now", "have", "another", "API", "NUMBER", "Docs", "will", "be", "ready", "soon", "NUMBER", "Try", "use", "in", "php", "server", "NUMBER", "env", "deploy_path", "NUMBER", "I", "think", "bringing", "bad", "practice", "to", "lib", "it", "unacceptable", "NUMBER", "You", "need", "to", "configure", "your", "server", "right", "instead", "of", "use", "sudo", "on", "all", "of", "commands", "NUMBER", "Well", "i", "do", "not", "see", "use", "case", "of", "this", "feature", "NUMBER", "Thanks", "Fixed", "NUMBER", "Not", "work", "like", "run", "func", "NUMBER", "Thanks", "Max", "Might", "please", "take", "a", "look", "at", "LINK", "ci", "NUMBER", "org", "deployphp", "deployer", "jobs", "NUMBER", "Go", "some", "error", "with", "you", "implementation", "NUMBER", "Ok", "it", "will", "be", "great", "NUMBER", "Please", "create", "PR", "for", "it", "NUMBER", "Also", "you", "can", "ad\u0432", "test", "case", "for", "this", "in", "test", "recipe", "NUMBER", "Thanks", "What", "about", "replacing", "DotArray", "with", "DotNotation", "class", "gist", "LINK", "NUMBER", "Does", "it", "work", "with", "current", "implementation", "php", "env", "abc", "one", "two", "NUMBER", "env", "abc", "NUMBER", "one", "other", "NUMBER", "But", "correct", "answer", "be", "php", "env", "abc", "one", "two", "NUMBER", "env", "abc", "NUMBER", "one", "other", "NUMBER", "should", "override", "entire", "abc", "NUMBER", "one", "as", "most", "intuitive", "way", "this", "assertSame", "other", "NUMBER", "env", "abc", "NUMBER", "one", "Need", "to", "wait", "then", "CI", "be", "ready", "to", "do", "checks", "NUMBER", "On", "travis", "ci", "issue", "some", "error", "InvalidArgumentException", "Package", "ext", "ssh", "NUMBER", "NUMBER", "must", "have", "a", "source", "or", "dist", "specified", "Can", "you", "help", "with", "fix", "it", "Solved", "and", "merge", "NUMBER", "rabbit", "Test", "fix", "NUMBER", "oanhnn", "please", "take", "a", "look", "at", "this", "code", "duplication", "LINK", "ci", "NUMBER", "com", "g", "deployphp", "deployer", "indices", "NUMBER", "duplications", "NUMBER", "You", "can", "use", "SSH", "Agent", "Forwarding", "NUMBER", "You", "can", "override", "task", "update_code", "to", "use", "your", "keys", "NUMBER", "Which", "version", "of", "deployer", "be", "you", "trying", "to", "install", "Try", "to", "install", "NUMBER", "NUMBER", "And", "v", "NUMBER", "stable", "will", "be", "very", "soon", "NUMBER", "beer", "Thanks", "a", "lot", "beer", "You", "can", "use", "new", "forward", "agent", "functionality", "or", "add", "your", "servers", "keys", "to", "your", "repositories", "NUMBER", "Yes", "now", "passwordless", "sudo", "be", "a", "must", "NUMBER", "Ok", "thanks", "Will", "look", "at", "this", "after", "weekends", "NUMBER", "Anybody", "really", "need", "this", "feature", "That", "to", "keep", "in", "share", "dir", "very", "project", "specified", "NUMBER", "So", "i", "leave", "it", "to", "user", "decide", "what", "to", "keep", "there", "NUMBER", "This", "enhancement", "will", "bring", "more", "mess", "than", "helps", "NUMBER", "So", "for", "now", "it", "s", "close", "NUMBER", "Sorry", "This", "be", "about", "shared", "file", "NUMBER", "Put", "your", "db", "file", "to", "shared", "folder", "NUMBER", "Have", "a", "deploy", "shared_copy", "very", "nice", "idea", "shared", "folders", "be", "what", "your", "want", "to", "use", "NUMBER", "How", "to", "place", "file", "there", "be", "your", "decision", "NUMBER", "Soon", "will", "be", "new", "docs", "with", "more", "examples", "NUMBER", "New", "docs", "be", "ready", "Please", "help", "m\u0443", "check", "them", "and", "finish", "them", "NUMBER", "Hmm", "never", "seen", "problem", "like", "this", "NUMBER", "Need", "to", "test", "it", "myself", "with", "big", "reps", "NUMBER", "Thanks", "Updated", "composer", "NUMBER", "json", "NUMBER", "Really", "waiting", "for", "release", "of", "phpseclib", "phpseclib", "lib", "NUMBER", "A", "lot", "of", "problem", "will", "gone", "NUMBER", "Also", "work", "on", "different", "ssh", "implementation", "for", "Deployer", "NUMBER", "Yeah", "i", "m", "hosting", "on", "Linode", "and", "my", "VPS", "falls", "under", "high", "load", "NUMBER", "Must", "be", "online", "now", "NUMBER", "Solved", "NUMBER", "Was", "a", "problem", "with", "ipv", "NUMBER", "nginx", "config", "NUMBER", "smile", "It", "s", "looks", "like", "Symfony", "Console", "bug", "NUMBER", "Yes", "maybe", "NUMBER", "Let", "me", "check", "NUMBER", "Fixed", "NUMBER", "Cool", "NUMBER", "Will", "try", "it", "and", "then", "merge", "NUMBER", "Merged", "NUMBER", "SSH", "Forwarding", "will", "be", "in", "next", "release", "NUMBER", "Integration", "with", "Bastion", "Jump", "Server", "i\u0430", "some", "one", "make", "PR", "NUMBER", "Look", "like", "your", "a", "init", "in", "another", "way", "NUMBER", "Sorry", "can", "tell", "why", "to", "has", "this", "problem", "NUMBER", "I", "can", "t", "reproduce", "it", "NUMBER", "argument", "function", "available", "only", "on", "master", "branch", "now", "NUMBER", "Wait", "for", "release", "please", "or", "use", "master", "branch", "smile", "Not", "all", "function", "include", "in", "beta", "them", "be", "not", "ready", "now", "NUMBER", "Ok", "thanks", "Can", "you", "make", "these", "change", "to", "master", "branch", "Not", "more", "features", "will", "be", "implement", "in", "NUMBER", "x", "branch", "NUMBER", "Ok", "Good", "one", "Great", "Sorry", "about", "delay", "NUMBER", "beer", "Like", "what", "Please", "show", "an", "example", "and", "more", "details", "NUMBER", "You", "can", "use", "VPN", "tunnel", "NUMBER", "Actually", "a", "simple", "solution", "would", "be", "to", "create", "an", "ssh", "tunnel", "from", "server", "NUMBER", "to", "server", "NUMBER", "one", "simple", "ssh", "command", "which", "provides", "socks", "NUMBER", "NUMBER", "and", "then", "operate", "on", "server", "NUMBER", "to", "server", "NUMBER", "Try", "to", "use", "Deployer", "NUMBER", "Yes", "now", "order", "of", "task", "important", "NUMBER", "Will", "implement", "irrelevant", "for", "the", "definition", "in", "v", "NUMBER", "What", "about", "task", "overriding", "It", "s", "based", "on", "task", "order", "NUMBER", "After", "little", "research", "a", "decided", "what", "tasks", "should", "not", "be", "independent", "from", "dependencies", "between", "them", "NUMBER", "Hmmm", "NUMBER", "Well", "need", "to", "use", "another", "syntax", "for", "env", "vars", "NUMBER", "Now", "php", "run", "cd", "deploy_path", "release", "NUMBER", "Maybe", "like", "that", "php", "run", "cd", "deploy_path", "release", "NUMBER", "Or", "php", "run", "cd", "deploy_path", "release", "NUMBER", "I", "will", "implement", "it", "with", "NUMBER", "syntax", "NUMBER", "Fixed", "NUMBER", "Do", "you", "know", "how", "to", "do", "it", "Can", "you", "create", "PR", "for", "this", "Do", "you", "know", "application", "like", "that", "Cool", "Update", "README", "NUMBER", "md", "please", "NUMBER", "Will", "do", "it", "myself", "later", "php", "server", "NUMBER", "env", "branch", "master", "Cool", "thing", "NUMBER", "Will", "be", "implement", "NUMBER", "NUMBER", "Composer", "uses", "a", "cache", "mechanism", "which", "will", "make", "reinstalling", "the", "same", "libraries", "dependencies", "extremely", "fast", "since", "it", "will", "be", "similar", "to", "a", "folder", "copy", "so", "I", "don", "t", "see", "the", "point", "of", "that", "use", "case", "NUMBER", "WOW", "Cool", "think", "Need", "more", "to", "discuss", "NUMBER", "What", "about", "having", "deploy", "option", "copy", "which", "will", "copy", "entire", "old", "release", "to", "new", "one", "dep", "deploy", "copy", "Now", "deployer", "NUMBER", "org", "has", "two", "links", "one", "for", "beta", "LINK", "and", "one", "for", "stable", "LINK", "Does", "GitHub", "has", "API", "for", "automatically", "upload", "file", "to", "release", "A", "bug", "beetle", "Sorry", "NUMBER", "Now", "fix", "NUMBER", "Thanks", "beer", "This", "be", "mistake", "NUMBER", "Version", "be", "NUMBER", "need", "to", "fix", "version", "number", "NUMBER", "Check", "out", "latest", "on", "master", "and", "NUMBER", "x", "branch", "NUMBER", "NUMBER", "Download", "v", "NUMBER", "It", "s", "fix", "there", "NUMBER", "Now", "have", "an", "issue", "with", "phpseclib", "package", "version", "NUMBER", "Fixed", "NUMBER", "Yes", "this", "be", "good", "feature", "NUMBER", "But", "it", "will", "not", "work", "in", "parallel", "mode", "NUMBER", "I", "will", "implement", "distributed", "Deployer", "parameters", "so", "it", "will", "be", "possible", "to", "implement", "correct", "solution", "for", "this", "in", "parallel", "deployment", "mode", "NUMBER", "Build", "fail", "NUMBER", "Docs", "be", "outdate", "sorry", "NUMBER", "Now", "work", "on", "rewriting", "it", "NUMBER", "Current", "version", "v", "NUMBER", "be", "very", "differs", "from", "NUMBER", "x", "NUMBER", "Try", "this", "json", "require", "deployer", "deployer", "NUMBER", "provide", "ext", "ssh", "NUMBER", "minimum", "stability", "dev", "Fixed", "in", "NUMBER", "I", "think", "it", "s", "because", "of", "update", "of", "Composer", "NUMBER", "Already", "have", "PR", "NUMBER", "Update", "Deployer", "version", "dep", "self", "update", "NUMBER", "Try", "to", "download", "Deployer", "here", "LINK", "Fixed", "NUMBER", "Does", "latest", "v", "NUMBER", "do", "not", "work", "It", "must", "be", "fix", "via", "PR", "NUMBER", "Try", "to", "do", "this", "composer", "NUMBER", "json", "json", "require", "deployer", "deployer", "NUMBER", "provide", "ext", "ssh", "NUMBER", "minimum", "stability", "dev", "Yeaah", "NUMBER", "A", "bug", "of", "php", "ssh", "lib", "NUMBER", "Can", "you", "create", "in", "there", "Cool", "Thanks", "Cool", "NUMBER", "Thanks", "NUMBER", "Now", "work", "without", "error", "Cool", "Thanks", "I", "think", "logging", "be", "good", "thing", "NUMBER", "But", "must", "be", "implement", "very", "careful", "NUMBER", "Now", "logging", "able", "by", "simple", "deb", "deploy", "vvv", "deploy", "NUMBER", "log", "Before", "implement", "logs", "to", "file", "in", "Deployer", "we", "need", "to", "understand", "use", "cases", "and", "for", "what", "it", "s", "will", "be", "use", "NUMBER", "I", "think", "logging", "feature", "be", "good", "for", "v", "NUMBER", "release", "of", "Deployer", "NUMBER", "Cool", "NUMBER", "smiley", "Cool", "Yes", "Great", "But", "it", "will", "be", "better", "to", "add", "wordpress", "recipe", "NUMBER", "newspaper", "Well", "bedrock", "be", "ok", "What", "command", "you", "run", "Try", "to", "composer", "self", "update", "first", "NUMBER", "ext", "ssh", "NUMBER", "be", "php", "NUMBER", "ssh", "NUMBER", "smile", "Are", "you", "on", "master", "branch", "Please", "show", "your", "composer", "NUMBER", "json", "NUMBER", "ext", "ssh", "NUMBER", "require", "only", "by", "herzult", "php", "ssh", "NUMBER", "Added", "herzult", "php", "ssh", "to", "require", "dev", "NUMBER", "What", "if", "i", "add", "phar", "compressFiles", "Phar", "GZ", "to", "my", "build", "script", "Now", "deployer", "NUMBER", "org", "site", "uses", "my", "build", "script", "so", "we", "need", "to", "refactoring", "them", "too", "NUMBER", "What", "be", "the", "benefit", "\u0449\u0430", "migration", "to", "box", "NUMBER", "New", "size", "of", "deployer", "NUMBER", "phar", "NUMBER", "KB", "now", "NUMBER", "I", "think", "we", "need", "to", "reduce", "number", "of", "dependencies", "NUMBER", "Hmmm", "i", "ll", "think", "about", "it", "Box", "awesome", "project", "but", "i", "do", "not", "what", "to", "touch", "what", "s", "already", "good", "work", "NUMBER", "Also", "i", "do", "not", "see", "any", "cons", "of", "this", "NUMBER", "Ok", "will", "add", "to", "v", "NUMBER", "Done", "NUMBER", "Now", "you", "can", "use", "it", "like", "task", "NUMBER", "setPrivate", "beer", "Upgrade", "to", "latest", "Deployer", "NUMBER", "LINK", "Why", "Now", "do", "NUMBER", "Libs", "may", "not", "contains", "composer", "NUMBER", "lock", "but", "i", "m", "thinking", "composer", "NUMBER", "lock", "be", "good", "solution", "for", "Deployer", "better", "for", "build", "phar", "NUMBER", "I", "wouldn", "t", "pretend", "to", "know", "composer", "in", "depth", "but", "I", "believe", "that", "if", "you", "require", "a", "library", "that", "has", "a", "composer", "NUMBER", "lock", "it", "will", "not", "be", "considered", "during", "the", "dependency", "resolution", "step", "NUMBER", "Thus", "it", "shouldn", "t", "pose", "a", "problem", "to", "have", "one", "under", "version", "control", "NUMBER", "composer", "NUMBER", "lock", "considered", "during", "only", "when", "install", "appears", "NUMBER", "Now", "with", "composer", "NUMBER", "lock", "cyclone", "There", "were", "several", "reasons", "for", "f", "NUMBER", "b", "NUMBER", "main", "be", "what", "Deployer", "must", "be", "available", "via", "Composer", "NUMBER", "A", "lot", "of", "users", "may", "include", "in", "in", "require", "dev", "section", "NUMBER", "Otherwise", "instructions", "to", "install", "via", "Composer", "will", "be", "looking", "like", "this", "composer", "require", "phpseclib", "phpseclib", "dev", "master", "dev", "composer", "require", "deployer", "deployer", "NUMBER", "If", "you", "do", "not", "have", "ext", "ssh", "NUMBER", "install", "add", "provide", "hezern", "php", "ssh", "to", "composer", "NUMBER", "json", "NUMBER", "And", "this", "be", "why", "Deployer", "require", "additional", "package", "but", "can", "not", "require", "them", "through", "Composer", "due", "next", "issue", "PhpSecLib", "do", "not", "have", "stable", "enough", "version", "to", "require", "NUMBER", "Herzult", "php", "ssh", "requires", "ext", "ssh", "NUMBER", "Deployer", "do", "not", "NUMBER", "Resources", "vendors", "must", "update", "manually", "or", "if", "you", "know", "solution", "create", "pull", "request", "NUMBER", "Agree", "with", "phpseclib", "NUMBER", "But", "suggest", "herzult", "php", "ssh", "SSH", "support", "through", "ext", "ssh", "NUMBER", "looks", "not", "so", "smooth", "NUMBER", "How", "to", "build", "phar", "with", "herzult", "php", "ssh", "Done", "coffee", "fddc", "NUMBER", "f", "NUMBER", "fd", "NUMBER", "c", "NUMBER", "b", "NUMBER", "fb", "NUMBER", "b", "NUMBER", "be", "NUMBER", "c", "NUMBER", "bff", "But", "why", "not", "move", "the", "herzult", "php", "ssh", "to", "require", "dev", "Great", "idea", "Thanks", "Thanks", "EkAndreas", "please", "show", "all", "backtrace", "NUMBER", "Bilge", "what", "do", "you", "propose", "Package", "phpseclib", "phpseclib", "dev", "master", "dev", "be", "not", "fix", "NUMBER", "WTF", "with", "phpseclib", "Still", "cannot", "install", "via", "composer", "require", "NUMBER", "What", "the", "solution", "to", "be", "able", "to", "install", "Deployer", "via", "Composer", "We", "need", "this", "composer", "require", "deployer", "deployer", "angry", "Try", "in", "your", "terminal", "next", "command", "composer", "require", "deployer", "deployer", "NUMBER", "dev", "Got", "error", "Now", "we", "need", "to", "fix", "it", "NUMBER", "Now", "fix", "NUMBER", "Hardcoded", "scream", "Now", "must", "work", "NUMBER", "Try", "it", "composer", "require", "deployer", "deployer", "dev", "master", "dev", "Yes", "right", "NUMBER", "It", "s", "because", "of", "phpseclib", "NUMBER", "Add", "minimum", "stability", "dev", "to", "composer", "NUMBER", "json", "file", "NUMBER", "Will", "be", "fix", "when", "phpseclib", "will", "release", "lib", "NUMBER", "Try", "this", "json", "require", "deployer", "deployer", "NUMBER", "provide", "ext", "ssh", "NUMBER", "minimum", "stability", "dev", "What", "to", "try", "waffle", "NUMBER", "io", "for", "work", "process", "NUMBER", "GitHub", "itself", "be", "better", "Done", "beer", "Hmmm", "NUMBER", "It", "s", "not", "possible", "to", "write", "like", "this", "cd", "release_path", "only", "like", "this", "cd", "env", "release_path", "tomzx", "Can", "you", "fix", "it", "Hmmm", "can", "you", "look", "at", "LINK", "L", "NUMBER", "Not", "work", "there", "Yes", "NUMBER", "NUMBER", "\u00f4\u00e5\u00e2\u00f0", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "tomzx", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "I", "assume", "you", "re", "get", "this", "error", "PHP", "Fatal", "error", "Maximum", "function", "nesting", "level", "of", "NUMBER", "reached", "aborting", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Yes", "it", "s", "thinks", "must", "to", "have", "NUMBER", "Cool", "I", "think", "it", "s", "good", "to", "have", "options", "strategies", "NUMBER", "Done", "beers", "To", "deploy", "specific", "branch", "php", "set", "branch", "master", "To", "deploy", "specific", "tag", "dep", "deploy", "tag", "v", "NUMBER", "And", "even", "more", "NUMBER", "To", "deploy", "production", "stage", "dep", "deploy", "production", "gem", "gem", "gem", "oanhnn", "will", "implement", "it", "soon", "NUMBER", "Done", "php", "server", "NUMBER", "env", "branch", "master", "server", "NUMBER", "env", "branch", "develop", "Server", "group", "NUMBER", "php", "serverGroup", "st", "nd", "Also", "i", "think", "refactor", "this", "to", "php", "server", "NUMBER", "group", "one", "two", "Stages", "be", "back", "back", "I", "remove", "cd", "function", "to", "simplify", "run", "function", "NUMBER", "I", "think", "run", "cd", "some_path", "my_super_command", "more", "readable", "than", "NUMBER", "But", "if", "be", "possible", "to", "bring", "back", "cd", "function", "NUMBER", "Ok", "will", "bring", "back", "cd", "func", "NUMBER", "NUMBER", "cd", "be", "back", "Hi", "Yes", "it", "be", "possible", "But", "now", "this", "feature", "now", "in", "pull", "request", "NUMBER", "and", "still", "now", "finished", "NUMBER", "This", "feature", "NUMBER", "will", "be", "in", "Deployer", "NUMBER", "when", "i", "or", "somebody", "else", "finish", "it", "NUMBER", "Done", "Use", "argument", "and", "option", "function", "NUMBER", "Cool", "gem", "gem", "gem", "beers", "Is", "it", "work", "correctly", "Can", "you", "show", "example", "of", "usage", "And", "please", "fix", "merge", "conflict", "wink", "Cool", "Thanks", "Yes", "i", "think", "so", "NUMBER", "Create", "settings", "with", "PhpSecLib", "by", "default", "NUMBER", "oanhnn", "ping", "Well", "why", "use", "YmdHis", "instead", "\u0449\u0430", "number", "of", "release", "You", "can", "always", "get", "the", "time", "of", "release", "by", "modify", "time", "of", "dir", "NUMBER", "And", "i", "think", "number", "for", "release", "be", "more", "readable", "for", "humans", "current", "NUMBER", "release", "NUMBER", "NUMBER", "NUMBER", "tomzx", "i", "agree", "NUMBER", "But", "what", "if", "we", "get", "differences", "in", "last", "s", "So", "what", "everybody", "think", "gordalina", "Done", "Thanks", "Will", "merge", "manually", "Now", "have", "my", "own", "commit", "for", "common", "NUMBER", "php", "with", "some", "refactoring", "NUMBER", "Thanks", "you", "for", "your", "work", "Done", "Cool", "Cool", "ok", "NUMBER", "Yeahhh", "NUMBER", "Deployer", "NUMBER", "recipes", "not", "ready", "now", "sorry", "NUMBER", "Try", "to", "use", "Deployer", "NUMBER", "LINK", "Ok", "NUMBER", "Feel", "free", "to", "ask", "any", "question", "NUMBER", "You", "can", "download", "in", "here", "LINK", "for", "NUMBER", "x", "and", "LINK", "for", "NUMBER", "x", "NUMBER", "To", "upgrade", "to", "latest", "release", "run", "dep", "self", "update", "What", "be", "your", "deployer", "version", "I", "need", "some", "time", "to", "merge", "it", "without", "conflict", "with", "my", "new", "common", "NUMBER", "php", "NUMBER", "Done", "Same", "again", "NUMBER", "Will", "merge", "it", "later", "NUMBER", "Nice", "Thanks", "git", "pull", "Yes", "i", "think", "we", "need", "to", "add", "deep", "option", "NUMBER", "Done", "NUMBER", "Now", "it", "do", "not", "possible", "to", "do", "I", "think", "NUMBER", "You", "can", "only", "create", "task", "for", "a", "specified", "server", "php", "task", "NUMBER", "onlyOn", "server", "Why", "do", "you", "need", "this", "functionality", "If", "you", "can", "explain", "why", "this", "functionality", "needed", "for", "I", "ll", "think", "about", "implementation", "NUMBER", "Yes", "it", "will", "be", "env", "deploy_path", "var", "www", "test", "target", "NUMBER", "Doc", "for", "v", "NUMBER", "will", "be", "latter", "sorry", "about", "this", "NUMBER", "Yeah", "sorry", "about", "that", "NUMBER", "Fixed", "NUMBER", "Thus", "be", "issue", "with", "phpseclib", "and", "packagist", "NUMBER", "I", "already", "created", "issue", "there", "NUMBER", "NUMBER", "\u00f4\u00e5\u00e2\u00f0", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Tomas", "Majer", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Hi", "It", "looks", "like", "there", "be", "still", "some", "issue", "with", "this", "NUMBER", "After", "i", "update", "composer", "requirements", "to", "deployphp", "deployer", "NUMBER", "it", "shows", "this", "error", "Your", "requirements", "could", "not", "be", "resolve", "to", "an", "installable", "set", "of", "package", "NUMBER", "Problem", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "NUMBER", "_", "dev", "satisfiable", "by", "phpseclib", "phpseclib", "NUMBER", "x", "dev", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "NUMBER", "_", "dev", "satisfiable", "by", "phpseclib", "phpseclib", "NUMBER", "x", "dev", "NUMBER", "Removal", "request", "for", "phpseclib", "phpseclib", "NUMBER", "dev", "Installation", "request", "for", "deployer", "deployer", "NUMBER", "satisfiable", "by", "deployer", "deployer", "v", "NUMBER", "NUMBER", "When", "i", "put", "this", "in", "my", "composer", "NUMBER", "json", "it", "works", "fine", "phpseclib", "phpseclib", "NUMBER", "dev", "Is", "this", "requirement", "to", "explicitly", "put", "phpseclib", "dependency", "to", "composer", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Fixed", "NUMBER", "Yeeahh", "NUMBER", "Fix", "be", "come", "NUMBER", "I", "know", "how", "to", "hotfix", "NUMBER", "Will", "be", "fix", "in", "NUMBER", "Ok", "be", "nice", "API", "NUMBER", "Please", "add", "test", "to", "BuilderTest", "NUMBER", "HHVM", "test", "fail", "today", "again", "NUMBER", "Reopened", "PR", "to", "process", "test", "NUMBER", "Done", "NUMBER", "Wow", "Great", "work", "NUMBER", "Is", "parallel", "task", "executor", "work", "correctly", "Now", "write", "functional", "test", "for", "it", "NUMBER", "Cool", "Will", "make", "phar", "for", "test", "NUMBER", "Thanks", "stuck_out_tongue_winking_eye", "According", "to", "Occam", "s", "razor", "LINK", "NUMBER", "s_razor", "_entities", "must", "not", "be", "multiplied", "beyond", "necessity_", "NUMBER", "So", "i", "think", "be", "better", "and", "simple", "to", "have", "standard", "PHP", "ways", "to", "report", "error", "throw", "an", "exception", "NUMBER", "And", "if", "you", "do", "not", "want", "to", "break", "deploy", "process", "simple", "inform", "user", "about", "your", "error", "writeln", "TAG", "NUMBER", "TAG", "creating", "new", "argument", "or", "function", "for", "that", "be", "unwarranted", "complication", "NUMBER", "What", "do", "you", "think", "gordalina", "Yes", "special", "exception", "be", "good", "solution", "NUMBER", "Can", "you", "make", "PR", "Thanks", "I", "did", "it", "myself", "on", "master", "NUMBER", "Hi", "From", "what", "and", "on", "what", "version", "you", "have", "update", "Try", "to", "download", "stable", "version", "NUMBER", "LINK", "Now", "unstable", "version", "will", "be", "available", "here", "LINK", "Yeah", "i", "think", "it", "be", "feature", "good", "to", "have", "If", "you", "can", "create", "it", "will", "be", "amazing", "gem", "Agree", "with", "gordalina", "NUMBER", "Thanks", "a", "lot", "What", "Deployer", "version", "Can", "you", "run", "command", "with", "vvv", "option", "Well", "NUMBER", "now", "in", "dev", "state", "NUMBER", "Will", "try", "to", "do", "it", "myself", "NUMBER", "Now", "you", "can", "only", "install", "php", "ext", "ssh", "NUMBER", "or", "use", "Deployer", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "GMT", "NUMBER", "NUMBER", "Robin", "Wouters", "notifications", "github", "NUMBER", "com", "Latest", "NUMBER", "site", "NUMBER", "com", "git", "develop", "dep", "deploy", "vvv", "Preparing", "server", "for", "deploy", "Run", "task", "deploy", "prepare", "on", "server", "development", "server", "NUMBER", "cd", "var", "www", "dev", "NUMBER", "site", "NUMBER", "com", "cd", "deploy_path", "if", "d", "release", "then", "mkdir", "release", "fi", "RuntimeException", "Could", "not", "login", "with", "PhpSecLib", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "PhpSecLib", "connect", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "PhpSecLib", "checkConnection", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "Users", "robinwouters", "Development", "hoe", "site", "NUMBER", "com", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Runner", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "runSeries", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "dry", "run", "server", "NUMBER", "stage", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "robinwo", "sorry", "do", "not", "know", "right", "now", "NUMBER", "Will", "try", "to", "solve", "it", "Done", "NUMBER", "You", "can", "simple", "include", "recipes", "from", "you", "deploy", "NUMBER", "php", "NUMBER", "php", "require", "recipe", "common", "NUMBER", "php", "Please", "run", "deploy", "with", "vvv", "attr", "and", "show", "output", "NUMBER", "Can", "you", "try", "to", "update", "recipe", "and", "run", "git", "clone", "task", "with", "NUMBER", "NUMBER", "at", "the", "end", "Yes", "please", "Thanks", "NUMBER", "I", "think", "a", "be", "better", "NUMBER", "Yes", "this", "be", "good", "enhancement", "NUMBER", "And", "i", "already", "implement", "it", "in", "Deployer", "NUMBER", "Now", "hard", "work", "on", "release", "of", "it", "NUMBER", "Good", "luck", "dart", "Done", "NUMBER", "Great", "beer", "Can", "you", "fix", "other", "commands", "too", "Also", "what", "about", "parallel", "execution", "Can", "you", "implement", "passthru", "for", "options", "argument", "to", "worker", "See", "ParallelExecutor", "LINK", "L", "NUMBER", "and", "Worker", "LINK", "NUMBER", "Will", "implement", "it", "myself", "NUMBER", "Yeah", "sorry", "about", "that", "moving", "repository", "right", "now", "NUMBER", "Sorry", "again", "Wait", "until", "evening", "sweat", "Working", "sweat_drops", "Did", "you", "run", "composer", "install", "smile", "I", "build", "NUMBER", "phar", "myself", "v", "NUMBER", "LINK", "Now", "developing", "Phar", "channel", "for", "deployer", "with", "auto", "update", "stable", "and", "dev", "master", "channels", "NUMBER", "I", "m", "giving", "a", "talk", "to", "the", "Thailand", "PHP", "User", "s", "group", "next", "week", "about", "deployer", "but", "really", "could", "do", "with", "there", "be", "a", "work", "phar", "file", "NUMBER", "Cool", "If", "you", "could", "share", "slides", "or", "video", "after", "event", "will", "be", "great", "Also", "you", "can", "show", "Deployer", "NUMBER", "which", "will", "be", "NUMBER", "awesome", "trophy", "Parallel", "deployment", "dep", "deploy", "parallel", "Hmmm", "a", "think", "a", "get", "error", "will", "fix", "it", "right", "now", "NUMBER", "PhpSecLib", "disappointed", "PS", "You", "can", "always", "install", "php", "extension", "ssh", "NUMBER", "which", "be", "very", "cool", "NUMBER", "Yeah", "PEM", "file", "NUMBER", "Also", "work", "of", "implementation", "of", "PEM", "support", "for", "php", "ssh", "NUMBER", "Fixed", "v", "NUMBER", "LINK", "Sorry", "it", "was", "old", "one", "NUMBER", "Now", "must", "be", "ok", "NUMBER", "sweat_smile", "dash", "Done", "NUMBER", "Thanks", "Fixed", "NUMBER", "Error", "again", "NUMBER", "Solution", "require", "phpseclib", "NUMBER", "composer", "require", "phpseclib", "phpseclib", "NUMBER", "dev", "composer", "require", "deployer", "deployer", "NUMBER", "Done", "NUMBER", "Now", "developing", "v", "NUMBER", "on", "master", "NUMBER", "v", "NUMBER", "be", "on", "NUMBER", "x", "branch", "NUMBER", "Why", "to", "use", "NUMBER", "dev", "Yes", "of", "course", "where", "will", "be", "phar", "version", "of", "Deployer", "available", "to", "download", "from", "site", "in", "progress", "NUMBER", "Now", "you", "can", "clone", "master", "branch", "and", "run", "php", "bin", "build", "command", "to", "build", "phar", "archive", "yourself", "NUMBER", "New", "docs", "in", "process", "NUMBER", "Example", "on", "server", "configuration", "php", "server", "NUMBER", "env", "deploy_path", "home", "web", "Stages", "php", "serverGroup", "pre", "test", "dev", "production", "But", "what", "be", "wrong", "with", "current", "build", "script", "I", "ll", "create", "new", "site", "with", "autoupdate", "phar", "script", "NUMBER", "It", "will", "be", "triggered", "automatically", "when", "new", "commit", "will", "be", "push", "or", "PR", "megred", "NUMBER", "So", "it", "will", "be", "dev", "master", "phar", "version", "available", "on", "site", "So", "i", "close", "this", "issue", "gordalina", "can", "you", "work", "on", "WordPress", "and", "or", "Zend", "Framework", "recipes", "trophy", "Yes", "i", "m", "already", "refactored", "Symfony", "recipe", "not", "publish", "yet", "not", "write", "test", "for", "what", "recipe", "NUMBER", "I", "think", "it", "well", "be", "cool", "to", "have", "in", "next", "v", "NUMBER", "release", "NUMBER", "If", "some", "one", "take", "it", "i", "ll", "will", "give", "free", "PhpStorm", "license", "NUMBER", "moneybag", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "LINK", "b", "NUMBER", "a", "NUMBER", "e", "NUMBER", "NUMBER", "e", "NUMBER", "f", "NUMBER", "c", "NUMBER", "bb", "NUMBER", "png", "I", "be", "good", "smile", "dirkluijk", "yes", "but", "only", "for", "Core", "Developers", "or", "some", "one", "who", "reach", "this", "feature", "goal", "Cool", "Thanks", "Now", "PHP", "s", "ext", "ssh", "NUMBER", "do", "not", "support", "ssh", "agent", "forwarding", "NUMBER", "And", "i", "m", "thinking", "it", "will", "be", "good", "to", "implement", "it", "in", "pure", "PHP", "inside", "Deployer", "NUMBER", "a", "NUMBER", "d", "NUMBER", "c", "NUMBER", "bf", "NUMBER", "e", "NUMBER", "e", "NUMBER", "a", "NUMBER", "media", "NUMBER", "x", "NUMBER", "LINK", "NUMBER", "b", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "f", "NUMBER", "NUMBER", "a", "NUMBER", "e", "NUMBER", "cfd", "NUMBER", "f", "NUMBER", "png", "Is", "there", "anyone", "willing", "to", "take", "for", "implementation", "of", "Done", "in", "NUMBER", "Try", "to", "login", "on", "server", "with", "same", "user", "as", "in", "deploy", "NUMBER", "php", "and", "run", "git", "pull", "origin", "master", "NUMBER", "Also", "now", "what", "now", "deployer", "do", "not", "support", "ssh", "agent", "forwarding", "so", "you", "need", "manually", "add", "your", "server", "keys", "to", "git", "repository", "NUMBER", "Do", "you", "execute", "it", "manually", "on", "you", "remote", "servers", "Hmmm", "try", "to", "solve", "this", "error", "first", "NUMBER", "NUMBER", "\u00ff\u00ed\u00e2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Dirk", "Luijk", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Yes", "NUMBER", "It", "seems", "the", "pull", "do", "work", "although", "there", "be", "an", "error", "still", "not", "sure", "why", "NUMBER", "myuser", "myserver", "public_html", "cd", "public_html", "git", "pull", "origin", "master", "remote", "Counting", "objects", "NUMBER", "do", "NUMBER", "remote", "Compressing", "objects", "NUMBER", "NUMBER", "NUMBER", "do", "NUMBER", "remote", "Total", "NUMBER", "delta", "NUMBER", "reused", "NUMBER", "delta", "NUMBER", "Unpacking", "objects", "NUMBER", "NUMBER", "NUMBER", "do", "NUMBER", "From", "bitbucket", "NUMBER", "org", "my", "repository", "branch", "master", "FETCH_HEAD", "Updating", "NUMBER", "be", "NUMBER", "f", "NUMBER", "e", "NUMBER", "Fast", "forward", "index", "NUMBER", "html", "NUMBER", "NUMBER", "file", "change", "NUMBER", "insertions", "NUMBER", "deletions", "Error", "spawn", "EACCES", "at", "errnoException", "child_process", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Process", "NUMBER", "ChildProcess", "NUMBER", "_handle", "NUMBER", "onexit", "child_process", "NUMBER", "js", "NUMBER", "NUMBER", "I", "don", "t", "see", "how", "this", "error", "could", "possibly", "block", "Deployer", "so", "it", "might", "have", "nothing", "to", "do", "with", "it", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Cant", "say", "why", "NUMBER", "Need", "more", "information", "about", "NUMBER", "Yeah", "NUMBER", "It", "s", "bug", "in", "PhpSecLib", "NUMBER", "You", "can", "enable", "PHP", "extension", "ssh", "NUMBER", "and", "everything", "will", "be", "work", "smoothly", "NUMBER", "No", "now", "only", "for", "NUMBER", "x", "NUMBER", "New", "docs", "will", "be", "here", "shortly", "LINK", "And", "new", "site", "for", "NUMBER", "x", "LINK", "Done", "NUMBER", "Thanks", "Yes", "it", "better", "to", "check", "it", "first", "NUMBER", "But", "how", "to", "test", "it", "Done", "NUMBER", "Thanks", "New", "docs", "located", "here", "LINK", "It", "s", "cool", "feature", "NUMBER", "And", "i", "will", "implement", "it", "very", "soon", "in", "Deployer", "NUMBER", "release", "NUMBER", "Stay", "tuned", "NUMBER", "Yes", "it", "s", "possible", "to", "implement", "this", "for", "Symfony", "NUMBER", "deploy", "NUMBER", "Now", "Deployer", "runs", "composer", "with", "no", "interaction", "key", "and", "this", "be", "good", "solution", "NUMBER", "But", "it", "s", "really", "easy", "to", "implement", "parameters", "NUMBER", "yml", "creation", "NUMBER", "PS", "I", "deploy", "all", "my", "Symfony", "apps", "with", "Deployer", "and", "deployment", "of", "new", "code", "base", "was", "ok", "even", "without", "parameters", "NUMBER", "yml", "Symfony", "don", "t", "connect", "to", "db", "when", "warming", "cache", "NUMBER", "Did", "you", "run", "migration", "tasks", "too", "Will", "try", "to", "reproduce", "it", "myself", "NUMBER", "What", "be", "purpose", "of", "use", "this", "file", "Yeah", "sorry", "about", "that", "NUMBER", "I", "moved", "manifest", "NUMBER", "json", "from", "repo", "to", "site", "deployer", "NUMBER", "org", "for", "Deployer", "NUMBER", "But", "forgot", "about", "version", "NUMBER", "I", "ll", "fix", "that", "later", "NUMBER", "Now", "you", "can", "download", "deployer", "manually", "LINK", "Fixed", "NUMBER", "This", "two", "PHP", "NUMBER", "features", "short", "array", "notation", "this", "in", "Closures", "NUMBER", "Are", "you", "going", "to", "implement", "SSH", "Agent", "forwarding", "for", "authentication", "Only", "then", "ext", "ssh", "NUMBER", "will", "implement", "it", "NUMBER", "Yes", "Deployer", "NUMBER", "break", "backward", "compatibility", "NUMBER", "Therefore", "appeared", "NUMBER", "according", "to", "SemVer", "LINK", "NUMBER", "If", "you", "need", "NUMBER", "version", "you", "can", "find", "it", "here", "LINK", "NUMBER", "Not", "now", "NUMBER", "But", "will", "be", "able", "in", "Deployer", "NUMBER", "Yes", "it", "will", "be", "possible", "in", "Deployer", "NUMBER", "Now", "you", "can", "simple", "implement", "it", "you\u043a", "self", "NUMBER", "Done", "beers", "To", "deploy", "specific", "branch", "php", "set", "branch", "master", "To", "deploy", "specific", "tag", "dep", "deploy", "tag", "v", "NUMBER", "And", "even", "more", "NUMBER", "To", "deploy", "production", "stage", "dep", "deploy", "production", "gem", "gem", "gem", "Thanks", "Yes", "i", "know", "it", "NUMBER", "Will", "be", "solve", "in", "Deployer", "NUMBER", "jnj", "devops", "what", "do", "you", "mean", "Thanks", "But", "it", "s", "already", "implement", "in", "v", "NUMBER", "NUMBER", "c", "NUMBER", "e", "NUMBER", "ff", "NUMBER", "c", "NUMBER", "e", "NUMBER", "ba", "NUMBER", "a", "NUMBER", "d", "NUMBER", "da", "I", "will", "implement", "this", "functionality", "in", "Deployer", "NUMBER", "myself", "without", "create", "new", "function", "NUMBER", "Also", "this", "PR", "can", "not", "be", "merge", "automatically", "NUMBER", "Great", "Can", "you", "make", "PR", "Fixed", "NUMBER", "Hmmm", "it", "be", "only", "in", "master", "branch", "NUMBER", "Install", "it", "throw", "composer", "dev", "master", "dev", "version", "NUMBER", "It", "s", "will", "be", "solver", "automatically", "with", "new", "Deployer", "NUMBER", "release", "process", "NUMBER", "Yes", "repository", "will", "be", "transferred", "when", "achieve", "NUMBER", "stars", "NUMBER", "grinning", "star", "Well", "may", "be", "NUMBER", "smile", "Well", "NUMBER", "star", "will", "be", "enough", "NUMBER", "Will", "migrate", "on", "this", "week", "NUMBER", "laughing", "What", "we", "need", "to", "do", "x", "Transfer", "repository", "x", "Edit", "composer", "NUMBER", "json", "and", "publish", "on", "packagist", "Fork", "on", "elfet", "deployer", "and", "edit", "composer", "NUMBER", "json", "What", "else", "gordalina", "Add", "usr", "local", "bin", "to", "your", "path", "NUMBER", "DropSQL", "now", "this", "do", "not", "possible", "but", "you", "can", "implement", "it", "your", "self", "NUMBER", "But", "Deployer", "v", "NUMBER", "will", "have", "once", "method", "which", "will", "do", "exactly", "you", "want", "NUMBER", "Done", "in", "v", "NUMBER", "Before", "i", "can", "merge", "it", "please", "fix", "test", "NUMBER", "This", "be", "really", "cool", "feature", "and", "i", "was", "trying", "to", "implement", "it", "in", "older", "Deployer", "release", "see", "aa", "NUMBER", "eddc", "NUMBER", "f", "NUMBER", "f", "NUMBER", "d", "NUMBER", "fd", "NUMBER", "b", "NUMBER", "ecc", "NUMBER", "f", "NUMBER", "dc", "NUMBER", "d", "NUMBER", "NUMBER", "The", "main", "problem", "be", "what", "deploying", "in", "parallel", "require", "users", "to", "install", "a", "lot", "of", "other", "libs", "and", "php", "extensions", "NUMBER", "Also", "there", "be", "problem", "with", "shared", "memory", "task", "may", "set", "environment", "params", "NUMBER", "But", "now", "i", "m", "work", "on", "v", "NUMBER", "which", "will", "have", "this", "feature", "gem", "gem", "gem", "and", "do", "not", "require", "any", "of", "extra", "php", "extensions", "sunglasses", "sunny", "It", "will", "be", "work", "on", "processes", "and", "sockets", "NUMBER", "It", "s", "will", "me", "main", "feature", "of", "Deployer", "NUMBER", "Yes", "i", "have", "start", "development", "NUMBER", "I", "push", "everything", "i", "do", "to", "develop", "LINK", "branch", "NUMBER", "Hmmm", "NUMBER", "I", "do", "not", "think", "this", "be", "good", "solution", "NUMBER", "Can", "you", "show", "use", "case", "of", "that", "Cool", "Nice", "gem", "No", "phar", "now", "do", "not", "upgrades", "to", "master", "last", "push", "NUMBER", "I", "ll", "think", "of", "create", "autoupdating", "phar", "server", "for", "Deployer", "NUMBER", "NUMBER", "\u00ed\u00ee\u00ff\u00e1", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Christian", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "On", "dev", "server", "i", "be", "use", "the", "phar", "version", "dep", "self", "update", "should", "update", "it", "to", "last", "push", "cause", "it", "say", "be", "already", "up", "to", "date", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "It", "be", "possible", "to", "move", "it", "to", "deb", "file", "NUMBER", "So", "i", "have", "just", "implement", "this", "in", "v", "NUMBER", "Looks", "great", "No", "more", "possible", "redefinition", "conflict", "BTW", "that", "about", "move", "function", "to", "namespace", "Or", "wait", "when", "PHP", "NUMBER", "become", "more", "popular", "I", "m", "thinking", "to", "drop", "support", "for", "PHP", "NUMBER", "for", "Deployer", "NUMBER", "And", "start", "with", "NUMBER", "What", "do", "you", "think", "v", "I", "want", "to", "use", "class", "name", "resolution", "via", "class", "empty", "support", "arbitrary", "expressions", "and", "generators", "in", "future", "NUMBER", "I", "think", "developer", "how", "will", "use", "Deployer", "already", "migrated", "to", "NUMBER", "on", "they", "local", "machines", "NUMBER", "But", "keep", "support", "for", "NUMBER", "do", "not", "difficult", "NUMBER", "So", "i", "decided", "to", "keep", "php", "NUMBER", "support", "NUMBER", "Looks", "like", "error", "one", "of", "run", "commands", "end", "with", "error", "NUMBER", "Run", "debug", "mode", "deb", "deploy", "vvv", "NUMBER", "What", "be", "server", "OS", "Try", "to", "run", "next", "command", "manually", "on", "your", "server", "if", "d", "echo", "home", "html", "project", "public_html", "then", "mkdir", "home", "html", "project", "public_html", "fi", "Thanks", "Why", "we", "need", "this", "deployer", "May", "be", "it", "s", "better", "to", "have", "this", "in", "cachetool", "recipes", "Or", "separate", "package", "You", "can", "use", "composer", "for", "this", "php", "require", "vendor", "gordalina", "cachetool", "recipe", "NUMBER", "php", "Cool", "Great", "PS", "I", "m", "work", "on", "automatic", "test", "of", "recipes", "NUMBER", "recycle", "Ban", "Bad", "solution", "to", "have", "sfconsole", "function", "NUMBER", "What", "purposes", "of", "this", "function", "Detecting", "bin", "dir", "be", "good", "think", "NUMBER", "But", "add", "a", "new", "function", "it", "be", "complicated", "NUMBER", "Lets", "try", "to", "keep", "it", "simple", "as", "possible", "but", "not", "simple", "NUMBER", "Now", "i", "m", "work", "on", "better", "concept", "of", "environments", "for", "v", "NUMBER", "It", "s", "will", "bring", "better", "solution", "for", "that", "NUMBER", "Well", "NUMBER", "yes", "smile", "Done", "in", "v", "NUMBER", "Yes", "i", "was", "thinking", "about", "release", "schedule", "NUMBER", "I", "follow", "semantic", "version", "LINK", "not", "too", "strictly", "no", "NUMBER", "version", "I", "think", "to", "leave", "master", "branch", "for", "next", "development", "and", "beta", "release", "NUMBER", "After", "v", "NUMBER", "be", "release", "i", "ll", "drop", "develop", "branch", "and", "set", "master", "on", "top", "of", "it", "NUMBER", "Branch", "NUMBER", "x", "will", "be", "fast", "forwarded", "NUMBER", "And", "if", "you", "need", "new", "features", "i", "think", "it", "s", "better", "to", "specify", "something", "like", "this", "elfet", "deployer", "NUMBER", "dev", "BTW", "i", "ll", "separate", "site", "LINK", "and", "docs", "LINK", "from", "this", "repository", "NUMBER", "For", "phar", "s", "i", "will", "keep", "autoupdating", "pre", "release", "of", "master", "branch", "in", "manifest", "NUMBER", "json", "NUMBER", "Cool", "Great", "Thanks", "Great", "No", "NUMBER", "Now", "did", "not", "NUMBER", "I", "ll", "think", "of", "make", "better", "docs", "for", "v", "NUMBER", "So", "cool", "Thanks", "Thanks", "a", "lot", "Ok", "i", "ll", "add", "this", "but", "in", "different", "way", "allow", "to", "specify", "composer", "options", "NUMBER", "What", "do", "you", "think", "Done", "NUMBER", "I", "ll", "will", "take", "your", "code", "to", "v", "NUMBER", "and", "try", "to", "implement", "this", "without", "creation", "own", "Input", "class", "NUMBER", "Try", "to", "keep", "KISS", "NUMBER", "Added", "in", "NUMBER", "c", "NUMBER", "e", "NUMBER", "ff", "NUMBER", "c", "NUMBER", "e", "NUMBER", "ba", "NUMBER", "a", "NUMBER", "d", "NUMBER", "da", "Great", "Thanks", "Lets", "talk", "about", "that", "cactus", "nicodmf", "i", "m", "agree", "NUMBER", "composer", "install", "should", "be", "with", "run", "scripts", "NUMBER", "what", "could", "be", "the", "possible", "bug", "with", "this", "Yes", "NUMBER", "Got", "this", "error", "too", "NUMBER", "kherge", "amend", "moved", "repo", "to", "another", "user", "box", "project", "amend", "NUMBER", "But", "Deployer", "steel", "work", "as", "required", "NUMBER", "kherge", "amend", "needs", "only", "for", "self", "upgrading", "in", "phar", "NUMBER", "I", "created", "issue", "in", "kherge", "amend", "NUMBER", "Fixed", "with", "NUMBER", "LINK", "project", "amend", "issue", "NUMBER", "Great", "will", "be", "merge", "to", "v", "NUMBER", "Now", "i", "do", "not", "know", "solution", "for", "that", "NUMBER", "I", "ll", "research", "this", "tomorrow", "NUMBER", "Provide", "more", "information", "NUMBER", "NUMBER", "\u00ee\u00ea\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Eugeny", "Fomin", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "In", "my", "case", "I", "have", "different", "ssh", "keys", "on", "my", "deploy", "host", "and", "my", "git", "repository", "NUMBER", "For", "that", "I", "use", "forward_agent", "option", "in", "ruby", "lib", "net", "ssh", "NUMBER", "I", "have", "researched", "that", "and", "unfortunately", "find", "that", "libssh", "NUMBER", "and", "therefore", "pecl_ssh", "NUMBER", "don", "t", "support", "forwarding", "agent", "NUMBER", "Only", "it", "prevents", "me", "to", "use", "deployer", "in", "my", "projects", "NUMBER", "elfet", "Do", "you", "have", "any", "ideas", "how", "to", "bypass", "it", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "What", "about", "use", "command", "for", "cloning", "like", "this", "ssh", "agent", "ssh", "add", "path", "ssh_keys", "git", "clone", "git", "github", "NUMBER", "com", "user", "project", "NUMBER", "git", "And", "upload", "ssh", "keys", "manually", "to", "each", "server", "NUMBER", "Did", "you", "try", "to", "add", "ForwardAgent", "yes", "in", "NUMBER", "ssh", "config", "file", "Now", "its", "only", "way", "to", "do", "this", "NUMBER", "May", "be", "it", "be", "possible", "to", "use", "ruby", "lib", "net", "ssh", "as", "ssh", "client", "for", "deployer", "NUMBER", "fast_forward", "Will", "be", "waiting", "for", "pecl", "ext", "update", "NUMBER", "Yes", "now", "this", "be", "only", "solution", "NUMBER", "Will", "try", "to", "come", "up", "with", "something", "NUMBER", "NUMBER", "\u00e4\u00e5\u00ea", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Timur", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Hello", "do", "I", "understand", "it", "right", "that", "at", "the", "moment", "only", "way", "to", "use", "deployer", "be", "the", "manually", "add", "ssh", "keys", "from", "deployment", "servers", "to", "my", "git", "repository", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Will", "be", "if", "i", "will", "implement", "native", "ssh", "agent", "NUMBER", "Updating", "instead", "of", "install", "it", "be", "bad", "practice", "NUMBER", "I", "do", "not", "think", "it", "be", "good", "idea", "including", "this", "to", "recipe", "NUMBER", "Yes", "please", "remove", "update", "actions", "NUMBER", "And", "please", "update", "docs", "via", "separate", "PR", "add", "info", "about", "this", "feature", "and", "why", "composer", "update", "it", "s", "bad", "NUMBER", "octocat", "With", "update", "the", "docs", "do", "you", "mean", "the", "README", "NUMBER", "md", "or", "the", "docs", "on", "deployer", "NUMBER", "in", "I", "mean", "deployer", "NUMBER", "in", "NUMBER", "Yes", "sorry", "for", "what", "NUMBER", "It", "s", "just", "example", "on", "options", "NUMBER", "Branches", "support", "will", "be", "in", "Deployer", "v", "NUMBER", "Hmmm", "i", "m", "thinking", "of", "better", "parameters", "organization", "for", "simple", "understanding", "recipes", "NUMBER", "Branch", "NUMBER", "x", "only", "for", "bugfix", "NUMBER", "All", "new", "features", "come", "to", "master", "and", "will", "be", "release", "in", "Deployer", "NUMBER", "I", "will", "manually", "merge", "this", "PR", "in", "my", "work", "copy", "to", "avoid", "conflict", "NUMBER", "I", "ll", "merge", "all", "your", "contribute", "features", "to", "Deployer", "NUMBER", "and", "it", "will", "be", "stable", "at", "NUMBER", "after", "one", "beta", "version", "NUMBER", "And", "v", "NUMBER", "will", "be", "more", "stable", "with", "new", "test", "of", "src", "and", "even", "of", "recipes", "test", "NUMBER", "Great", "enhancement", "Deployer", "will", "have", "atomic", "symlink", "swap", "in", "v", "NUMBER", "Now", "i", "m", "work", "on", "Deployer", "NUMBER", "which", "will", "be", "NUMBER", "more", "awesome", "flexible", "and", "secure", "NUMBER", "It", "will", "be", "able", "to", "run", "task", "in", "parallel", "and", "have", "better", "code", "coverage", "with", "test", "NUMBER", "It", "be", "too", "early", "for", "v", "NUMBER", "to", "publish", "NUMBER", "Will", "try", "to", "finish", "first", "parts", "as", "soon", "as", "possible", "NUMBER", "A", "little", "busy", "on", "main", "work", "NUMBER", "What", "be", "ETA", "NUMBER", "\u00ee\u00ea\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Mattia", "Trapani", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Great", "Can", "you", "push", "the", "v", "NUMBER", "branch", "as", "develop", "on", "Github", "Or", "be", "it", "too", "early", "Do", "you", "have", "an", "ETA", "BTW", "your", "package", "be", "so", "intuitive", "I", "managed", "deploying", "an", "app", "with", "atomic", "swapping", "in", "like", "NUMBER", "minutes", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Noup", "NUMBER", "I", "m", "work", "on", "this", "at", "my", "free", "time", "NUMBER", "NUMBER", "\u043e\u043a\u0442", "NUMBER", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "Mattia", "Trapani", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "Estimated", "Time", "of", "Arrival", "NUMBER", "If", "you", "have", "one", "On", "Wed", "Oct", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Anton", "notifications", "github", "NUMBER", "com", "write", "It", "be", "too", "early", "for", "v", "NUMBER", "to", "publish", "NUMBER", "Will", "try", "to", "finish", "first", "parts", "as", "soon", "as", "possible", "NUMBER", "A", "little", "busy", "on", "main", "work", "NUMBER", "What", "be", "ETA", "NUMBER", "\u00ee\u00ea\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Mattia", "Trapani", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Great", "Can", "you", "push", "the", "v", "NUMBER", "branch", "as", "develop", "on", "Github", "Or", "be", "it", "too", "early", "Do", "you", "have", "an", "ETA", "BTW", "your", "package", "be", "so", "intuitive", "I", "managed", "deploying", "an", "app", "with", "atomic", "swapping", "in", "like", "NUMBER", "minutes", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "How", "do", "you", "run", "your", "command", "Please", "show", "all", "deploy", "NUMBER", "php", "file", "NUMBER", "Looks", "lite", "every", "this", "be", "ok", "NUMBER", "How", "do", "you", "run", "commands", "Is", "testit", "task", "work", "Cannot", "reproduce", "NUMBER", "recycle", "Try", "to", "git", "clone", "on", "deploy", "server", "manually", "NUMBER", "Please", "show", "me", "your", "deploy", "NUMBER", "php", "configuration", "NUMBER", "You", "need", "to", "specify", "you", "public", "and", "private", "keys", "paths", "php", "server", "NUMBER", "NUMBER", "pubKey", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "pass", "phrase", "Yes", "sorry", "NUMBER", "It", "be", "for", "accessing", "web", "server", "NUMBER", "Now", "i", "do", "not", "know", "why", "git", "cannt", "access", "repo", "on", "your", "server", "NUMBER", "NUMBER", "\u00ee\u00ea\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Glend", "Gjermeni", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "If", "I", "m", "not", "mistaken", "those", "keys", "be", "for", "accessing", "the", "server", "not", "th", "erepository", "itself", "NUMBER", "Unfortunately", "I", "don", "t", "have", "the", "keys", "and", "they", "be", "only", "generate", "on", "droplet", "creation", "at", "DigitalOcean", "Is", "there", "another", "workaround", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Hmmm", "NUMBER", "Now", "deployer", "do", "not", "try", "to", "check", "and", "correct", "you", "server", "permissions", "NUMBER", "It", "be", "you\u043a", "work", "to", "set", "correct", "permissions", "on", "your", "server", "NUMBER", "I", "can", "set", "your", "permissions", "manually", "or", "with", "Deployer", "NUMBER", "Will", "fix", "this", "in", "new", "version", "NUMBER", "Fixed", "NUMBER", "Now", "use", "setfacl", "NUMBER", "I", "m", "thinking", "about", "this", "options", "too", "NUMBER", "Which", "name", "be", "better", "file", "f", "include", "i", "config", "c", "Yes", "it", "will", "be", "file", "f", "NUMBER", "\u00ed\u00ee\u00ff\u00e1", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Alex", "Stansfield", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "i", "m", "happy", "to", "add", "this", "as", "I", "could", "do", "with", "the", "feature", "NUMBER", "Will", "it", "be", "file", "and", "f", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Solved", "in", "NUMBER", "You", "could", "not", "deploy", "with", "ftp", "but", "you", "can", "deploy", "via", "copy", "of", "your", "source", "to", "remote", "server", "via", "ssh", "NUMBER", "Thanks", "Thanks", "a", "lot", "Did", "you", "create", "deploy", "NUMBER", "php", "Are", "you", "run", "php", "dep", "command", "in", "directory", "with", "deploy", "NUMBER", "php", "script", "You", "be", "really", "need", "to", "override", "task", "octocat", "Good", "reason", "NUMBER", "So", "i", "ll", "implement", "task", "override", "NUMBER", "Now", "we", "needs", "to", "choose", "API", "for", "that", "NUMBER", "May", "be", "overrideTask", "NUMBER", "\u00f1\u00e5\u00ed\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Aled", "Bartholomew", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "I", "have", "a", "slightly", "different", "custom", "setup", "so", "for", "me", "it", "would", "be", "handy", "to", "be", "able", "to", "override", "a", "task", "e", "NUMBER", "g", "NUMBER", "deploy", "update_code", "while", "keep", "all", "other", "tasks", "unchanged", "NUMBER", "Currently", "it", "seems", "that", "you", "can", "add", "function", "to", "a", "task", "but", "that", "wouldn", "t", "be", "ideal", "if", "you", "want", "to", "change", "code", "be", "executed", "in", "a", "task", "NUMBER", "My", "workaround", "has", "be", "to", "duplicate", "the", "recipe", "and", "make", "change", "which", "be", "okay", "but", "isn", "t", "ideal", "because", "it", "may", "not", "be", "in", "keep", "with", "your", "future", "code", "update", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Done", "in", "v", "NUMBER", "It", "will", "be", "in", "docs", "NUMBER", "You", "can", "override", "deploy", "update_code", "task", "NUMBER", "Can", "you", "open", "PR", "for", "this", "As", "separate", "recipe", "NUMBER", "johnny", "bit", "this", "be", "good", "work", "flow", "NUMBER", "But", "i", "think", "it", "s", "better", "to", "decouple", "rsync", "tasks", "recipe", "from", "others", "NUMBER", "A", "lot", "of", "people", "will", "be", "use", "just", "rsync", "tasks", "with", "standard", "workflow", "sudo", "ACL", "composer", "bower", "on", "server", "and", "for", "then", "will", "be", "god", "to", "has", "separate", "rsync", "recipe", "NUMBER", "Otherwise", "your", "shared", "hosting", "workflow", "it", "s", "too", "very", "common", "and", "it", "will", "be", "grate", "has", "separate", "recipe", "to", "this", "workflow", "too", "Thanks", "a", "lot", "Thanks", "Close", "as", "NUMBER", "I", "was", "work", "on", "docs", "online", "sorry", "about", "that", "Good", "one", "Thanks", "I", "think", "this", "be", "better", "php", "run", "some", "NUMBER", "sh", "param", "anything_else", "foo", "zoo", "I", "ll", "fix", "it", "in", "Deployer", "NUMBER", "I", "ll", "refactor", "Deployer", "on", "this", "weekends", "so", "it", "will", "be", "match", "easer", "to", "implement", "this", "functionality", "NUMBER", "in", "Deployer", "NUMBER", "i", "ll", "fix", "it", "by", "my", "self", "NUMBER", "Thanks", "you", "any", "way", "I", "think", "it", "s", "bad", "decision", "because", "may", "be", "unfamiliar", "to", "users", "NUMBER", "And", "this", "be", "also", "make", "incompatible", "API", "change", "NUMBER", "I", "do", "not", "think", "this", "be", "good", "solution", "NUMBER", "Closing", "this", "issue", "as", "non", "necessary", "NUMBER", "Yes", "it", "will", "be", "good", "NUMBER", "But", "a", "lot", "of", "users", "will", "write", "it", "without", "on", "end", "NUMBER", "So", "we", "need", "to", "guess", "it", "on", "server", "NUMBER", "Done", "NUMBER", "Yes", "it", "s", "good", "thing", "NUMBER", "I", "m", "really", "want", "to", "move", "from", "static", "variables", "and", "write", "good", "test", "NUMBER", "I", "ll", "refactor", "deployer", "on", "this", "weekends", "NUMBER", "Refactoring", "completed", "Write", "test", "dart", "Closing", "NUMBER", "Is", "it", "not", "too", "long", "smile_cat", "I", "think", "alias", "be", "simple", "and", "good", "solution", "NUMBER", "Make", "deployer", "NUMBER", "php", "as", "main", "and", "deploy", "NUMBER", "php", "as", "alternative", "NUMBER", "Solved", "in", "NUMBER", "Yes", "Good", "enhancement", "I", "ll", "do", "this", "NUMBER", "Now", "we", "have", "composer", "NUMBER", "php", "LINK", "recipe", "which", "be", "can", "be", "use", "for", "simple", "composer", "based", "projects", "NUMBER", "I", "m", "trying", "to", "sol\u043c\u0443", "this", "problem", "too", "NUMBER", "Looking", "for", "ext", "ssh", "NUMBER", "solution", "NUMBER", "Mihailoff", "yes", "i", "m", "going", "to", "pull", "your", "change", "NUMBER", "But", "i", "think", "here", "be", "another", "solution", "NUMBER", "Can", "you", "test", "it", "Try", "replace", "line", "NUMBER", "LINK", "L", "NUMBER", "in", "file", "bin", "dep", "with", "php", "set_include_path", "__DIR__", "NUMBER", "NUMBER", "NUMBER", "PATH_SEPARATOR", "NUMBER", "get_include_path", "Yes", "phpseclib", "old", "lib", "NUMBER", "I", "will", "try", "to", "convert", "notices", "to", "exception", "NUMBER", "This", "be", "phpseclib", "error", "report", "and", "it", "s", "sucks", "NUMBER", "Install", "on", "your", "local", "machine", "php", "extension", "ssh", "NUMBER", "it", "s", "the", "better", "way", "and", "you", "will", "get", "better", "error", "report", "NUMBER", "Phpseclib", "now", "developing", "a", "new", "version", "on", "this", "library", "with", "better", "support", "of", "new", "php", "staff", "NUMBER", "Then", "they", "will", "finish", "it", "i", "ll", "migrate", "to", "it", "NUMBER", "Now", "i", "m", "work", "on", "Deployer", "NUMBER", "version", "which", "will", "be", "NUMBER", "more", "awesome", "flexible", "and", "secure", "NUMBER", "It", "will", "be", "able", "to", "run", "task", "in", "parallel", "and", "have", "better", "code", "coverage", "with", "test", "NUMBER", "NUMBER", "\u00ee\u00ea\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Alex", "Stansfield", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "I", "was", "get", "this", "because", "of", "an", "error", "in", "my", "configuration", "NUMBER", "I", "was", "not", "specify", "a", "password", "for", "the", "ssh", "key", "defaults", "the", "password", "to", "a", "blank", "string", "rather", "than", "prompting", "for", "it", "NUMBER", "I", "fix", "this", "by", "setting", "the", "password", "null", "and", "everything", "worked", "again", "NUMBER", "The", "issue", "I", "had", "were", "I", "didn", "t", "get", "an", "error", "message", "telling", "me", "what", "the", "problem", "was", "just", "the", "No", "compatible", "server", "to", "client", "encryption", "algorithms", "notice", "and", "then", "it", "report", "a", "successful", "deployment", "NUMBER", "This", "be", "a", "little", "scary", "in", "my", "opinion", "NUMBER", "We", "want", "to", "use", "deployer", "NUMBER", "in", "but", "be", "stuck", "with", "capifony", "until", "we", "can", "trust", "it", "to", "tell", "us", "the", "correct", "outcome", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "I", "will", "continuing", "develop", "bug", "fix", "for", "v", "NUMBER", "now", "it", "s", "on", "separate", "branch", "but", "all", "new", "features", "will", "be", "in", "v", "NUMBER", "My", "time", "frame", "be", "for", "Deployer", "be", "very", "small", "but", "i", "trying", "to", "get", "some", "copy_vendors", "it", "be", "cool", "feature", "and", "i", "definitely", "will", "implement", "this", "NUMBER", "Great", "Thanks", "deciduous_tree", "Yeah", "i", "did", "this", "for", "printing", "version", "on", "build", "phar", "NUMBER", "But", "Composer", "installs", "NUMBER", "Will", "fix", "NUMBER", "Fixed", "in", "NUMBER", "Thanks", "Forgot", "to", "release", "NUMBER", "Fixed", "NUMBER", "Now", "Deployer", "support", "only", "PHP", "API", "NUMBER", "I", "do", "not", "know", "hot", "to", "write", "tasks", "in", "YAML", "i", "need", "example", "NUMBER", "Deployer", "support", "diff", "env", "you", "can", "define", "task", "and", "check", "which", "env", "be", "current", "and", "do", "some", "stuff", "NUMBER", "Main", "goal", "of", "Deployer", "be", "to", "consistent", "servers", "NUMBER", "I", "ll", "make", "loading", "loadConfig", "function", "NUMBER", "NUMBER", "\u00e0\u00e2\u00e3", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "George", "Mihailov", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "I", "think", "there", "be", "no", "easy", "way", "of", "write", "tasks", "in", "YAML", "but", "at", "least", "configuration", "could", "be", "do", "server", "main", "site", "NUMBER", "com", "path", "home", "user", "site", "NUMBER", "com", "user", "user", "pubKey", "server", "main", "host", "site", "NUMBER", "com", "path", "home", "user", "site", "NUMBER", "com", "user", "user", "pubKey", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "I", "think", "this", "be", "complication", "NUMBER", "Deployer", "itself", "has", "very", "simple", "API", "NUMBER", "YAML", "for", "settings", "i", "think", "be", "good", "so", "it", "will", "be", "nice", "to", "implement", "Symfony", "Config", "Component", "NUMBER", "Mihailoff", "great", "news", "Now", "Deployer", "support", "server", "configuration", "via", "YANL", "file", "LINK", "And", "soon", "will", "be", "able", "to", "define", "entire", "deploy", "NUMBER", "php", "as", "deploy", "NUMBER", "yml", "NUMBER", "Cool", "NUMBER", "But", "fix", "test", "and", "add", "some", "new", "smiley", "So", "what", "about", "finish", "todo", "s", "first", "Great", "I", "ll", "merge", "this", "PR", "later", "NUMBER", "Can", "also", "write", "test", "and", "docs", "for", "multistage", "I", "ll", "reorganize", "docs", "soon", "and", "it", "will", "be", "easer", "to", "write", "them", "NUMBER", "NUMBER", "\u00e0\u00e2\u00e3", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Jelte", "Steijaert", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Added", "support", "for", "options", "per", "stage", "so", "that", "you", "can", "define", "a", "branch", "per", "stage", "NUMBER", "Will", "write", "test", "and", "docs", "for", "this", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Yes", "thanks", "I", "should", "add", "recipes", "test", "for", "all", "php", "version", "NUMBER", "NUMBER", "Fixed", "NUMBER", "Oww", "NUMBER", "Nice", "NUMBER", "that", "os", "do", "you", "use", "So", "be", "it", "bug", "in", "Jelastic", "apache", "NUMBER", "web", "server", "or", "shoud", "i", "update", "deployer", "If", "yes", "can", "you", "create", "pull", "request", "purple_heart", "You", "can", "use", "openssl_pkey_get_public", "openssl_pkey_get_public", "to", "extract", "the", "pub", "private", "keys", "NUMBER", "I", "will", "try", "to", "implement", "this", "automatically", "in", "next", "release", "NUMBER", "Ok", "i", "ll", "try", "to", "deploy", "on", "AWS", "by", "myself", "NUMBER", "Here", "it", "be", "LINK", "with", "pem", "file", "gem", "Use", "pemFile", "instead", "of", "setPemFile", "NUMBER", "NUMBER", "\u0438\u044e\u043b\u044f", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "Josh", "Butts", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "Cool", "I", "looked", "at", "the", "code", "you", "change", "and", "it", "seems", "fairly", "obvious", "but", "it", "doesn", "t", "seem", "to", "work", "for", "me", "NUMBER", "josh", "orangeslice", "projects", "seaglass", "master", "dep", "deploy", "Preparing", "server", "for", "deploy", "NUMBER", "Password", "Updating", "code", "NUMBER", "Installing", "vendors", "NUMBER", "Creating", "symlink", "to", "release", "NUMBER", "Cleaning", "up", "old", "release", "NUMBER", "Successfully", "deployed", "on", "banzai", "NUMBER", "aws", "But", "nothing", "actually", "happens", "NUMBER", "There", "be", "no", "password", "not", "sure", "why", "it", "s", "prompting", "for", "that", "NUMBER", "I", "hit", "enter", "at", "the", "password", "prompt", "and", "everything", "completes", "without", "error", "but", "nothing", "be", "copied", "or", "checked", "out", "NUMBER", "Redacted", "code", "from", "deploy", "file", "TAG", "require", "recipe", "composer", "NUMBER", "php", "set", "use_ssh", "NUMBER", "false", "set", "repository", "git", "github", "NUMBER", "com", "org", "repo", "NUMBER", "git", "server", "web", "server", "NUMBER", "aws", "user", "ubuntu", "path", "www", "repo", "deploytest", "setPemFile", "NUMBER", "ssh", "aws", "NUMBER", "pem", "I", "m", "happy", "to", "contribute", "as", "necessary", "to", "make", "this", "work", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "I", "ll", "make", "all", "set", "methods", "private", "to", "clearly", "api", "NUMBER", "NUMBER", "\u00e8\u00fe\u00eb\u00ff", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Josh", "Butts", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Ah", "a", "simple", "error", "on", "my", "part", "NUMBER", "Works", "flawlessly", "now", "NUMBER", "Thanks", "so", "much", "for", "add", "this", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "I", "created", "pull", "request", "to", "php", "ssh", "to", "move", "ext", "ssh", "NUMBER", "to", "suggest", "NUMBER", "If", "it", "will", "be", "rejected", "i", "ll", "will", "move", "it", "in", "deployer", "NUMBER", "From", "now", "Deployer", "will", "be", "use", "my", "php", "ssh", "LINK", "ssh", "fork", "NUMBER", "Yes", "NUMBER", "Staging", "be", "possible", "to", "be", "implement", "NUMBER", "But", "i", "never", "use", "it", "in", "capistrano", "so", "i", "do", "not", "know", "what", "to", "do", "and", "how", "they", "shoud", "work", "NUMBER", "You", "can", "try", "to", "implement", "it", "your", "self", "and", "do", "a", "pull", "request", "preferred", "or", "explain", "to", "me", "what", "be", "multistaging", "and", "how", "it", "shoud", "work", "and", "i", "ll", "impement", "this", "NUMBER", "There", "be", "a", "lot", "of", "way", "to", "do", "it", "NUMBER", "It", "s", "all", "relevant", "to", "what", "you", "want", "to", "do", "NUMBER", "Now", "you", "can", "do", "something", "like", "this", "If", "you", "need", "only", "one", "server", "use", "something", "like", "this", "php", "task", "one", "function", "if", "config", "getName", "my", "server", "Do", "your", "stuff", "NUMBER", "I", "was", "thinking", "about", "task", "NUMBER", "onlyOnServers", "NUMBER", "api", "but", "do", "not", "sure", "of", "this", "NUMBER", "It", "be", "possible", "to", "create", "task", "NUMBER", "once", "method", "but", "then", "no", "env", "or", "config", "function", "will", "be", "available", "in", "task", "body", "NUMBER", "set", "and", "get", "a", "global", "so", "yes", "NUMBER", "With", "once", "function", "call", "stack", "will", "be", "looks", "like", "this", "task", "NUMBER", "on", "server", "NUMBER", "task", "NUMBER", "on", "server", "NUMBER", "task", "NUMBER", "on", "server", "NUMBER", "task", "NUMBER", "on", "server", "NUMBER", "task", "NUMBER", "on", "server", "NUMBER", "task", "NUMBER", "on", "server", "NUMBER", "task", "NUMBER", "_once", "task", "NUMBER", "on", "server", "NUMBER", "task", "NUMBER", "on", "server", "NUMBER", "task", "NUMBER", "on", "server", "NUMBER", "Yes", "you", "can", "place", "it", "there", "be", "you", "want", "NUMBER", "I", "will", "implement", "this", "on", "next", "week", "NUMBER", "Yes", "do", "not", "have", "roles", "yet", "but", "very", "interesting", "solution", "NUMBER", "NUMBER", "\u00f1\u00e5\u00ed\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Nikolay", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Capistrano", "have", "roles", "So", "you", "can", "specify", "roles", "to", "each", "server", "and", "then", "specify", "roles", "to", "tasks", "NUMBER", "For", "example", "server", "server", "NUMBER", "roles", "array", "frontend", "upload", "server", "server", "NUMBER", "roles", "array", "frontend", "server", "server", "NUMBER", "roles", "array", "backend", "server", "server", "NUMBER", "roles", "array", "backend", "server", "server", "NUMBER", "roles", "array", "backend", "server", "server", "NUMBER", "roles", "array", "backend", "crontab", "primary", "crontab", "work", "here", "and", "primary", "means", "that", "tasks", "to", "migrate", "database", "or", "some", "other", "migrate", "task", "should", "be", "executed", "here", "not", "on", "each", "servers", "Then", "you", "specify", "roles", "on", "task", "task", "Reload", "nginx", "have", "roles", "frontend", "and", "upload", "because", "each", "of", "these", "roles", "uses", "nginx", "other", "servers", "do", "not", "have", "nginx", "task", "Reload", "php", "NUMBER", "fpm", "have", "roles", "backend", "because", "this", "role", "uses", "php", "NUMBER", "fpm", "other", "servers", "do", "not", "have", "php", "NUMBER", "fpm", "task", "Refresh", "crontab", "have", "roles", "crontab", "because", "this", "role", "manages", "crontab", "tasks", "other", "servers", "do", "not", "have", "crontab", "tasks", "NUMBER", "Only", "this", "server", "runs", "tasks", "periodically", "NUMBER", "task", "Migrate", "have", "roles", "primary", "because", "this", "role", "manages", "runs", "some", "migrate", "script", "to", "migrate", "environment", "database", "caches", "etc", "NUMBER", "This", "role", "do", "not", "need", "to", "be", "invoked", "on", "each", "servers", "NUMBER", "task", "Warmup", "caches", "have", "roles", "primary", "because", "this", "role", "do", "not", "need", "to", "be", "invoked", "on", "each", "servers", "Then", "we", "have", "simple", "deploy", "scenario", "NUMBER", "deply", "NUMBER", "scm", "NUMBER", "NUMBER", "Refresh", "crontab", "Migrate", "Reload", "php", "NUMBER", "fpm", "Warmup", "caches", "Reload", "nginx", "As", "I", "understand", "this", "project", "do", "not", "have", "roles", "yet", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Yes", "it", "s", "very", "easy", "to", "implement", "NUMBER", "NUMBER", "\u00f1\u00e5\u00ed\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Nikolay", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "It", "be", "very", "old", "solution", "and", "was", "implement", "in", "capistrano", "from", "first", "dates", "AFAIK", "NUMBER", "It", "be", "very", "important", "thing", "when", "you", "have", "more", "then", "one", "server", "for", "your", "deployment", "NUMBER", "I", "was", "looking", "for", "some", "other", "product", "and", "find", "this", "one", "but", "i", "can", "not", "use", "it", "because", "i", "have", "NUMBER", "servers", "with", "different", "roles", "and", "different", "software", "But", "seems", "like", "there", "be", "not", "difficult", "to", "implement", "it", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Task", "with", "once", "do", "not", "get", "info", "about", "server", "and", "env", "NUMBER", "Maybe", "will", "be", "better", "name", "it", "local", "once", "feature", "will", "appears", "in", "v", "NUMBER", "Thanks", "a", "lot", "Grammar", "be", "my", "weakness", "rabbit", "NUMBER", "Thanks", "a", "lot", "Yes", "it", "what", "i", "m", "will", "do", "at", "first", "i", "start", "with", "Symfony", "recipe", "to", "understand", "that", "to", "include", "in", "basic", "common", "recipe", "NUMBER", "I", "create", "common", "NUMBER", "php", "recipe", "common", "NUMBER", "php", "LINK", "I", "m", "work", "on", "it", "NUMBER", "Ok", "will", "add", "this", "NUMBER", "Ok", "will", "add", "NUMBER", "How", "do", "you", "think", "to", "download", "Add", "download", "function", "to", "NUMBER", "brunch", "NUMBER", "It", "s", "fail", "NUMBER", "Can", "you", "do", "another", "pull", "request", "Yes", "ignore", "commads", "be", "just", "patterns", "to", "match", "NUMBER", "I", "will", "think", "about", "creating", "behavior", "like", "in", "NUMBER", "gitignore", "file", "NUMBER", "In", "NUMBER", "branch", "no", "more", "ignore", "function", "NUMBER", "What", "about", "next", "chars", "TAG", "Can", "you", "create", "a", "new", "tag", "and", "phar", "please", "Command", "prod", "be", "not", "defined", "NUMBER", "So", "there", "be", "no", "prod", "command", "NUMBER", "How", "do", "you", "run", "this", "command", "Show", "your", "delpoy", "NUMBER", "php", "script", "NUMBER", "Strange", "NUMBER", "It", "be", "work", "for", "me", "NUMBER", "Yes", "it", "be", "a", "bug", "NUMBER", "I", "will", "fix", "it", "tomorrow", "NUMBER", "Regarding", "the", "code", "if", "no", "third", "param", "be", "given", "the", "second", "should", "be", "taken", "as", "the", "callback", "function", "NUMBER", "I", "didn", "t", "go", "very", "deep", "in", "the", "code", "but", "that", "s", "what", "I", "assume", "from", "examples", "and", "certain", "code", "parts", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "NUMBER", "Fixed", "in", "NUMBER", "Thanks", "I", "ll", "will", "test", "PHAR", "archive", "NUMBER", "NUMBER", "branch", "now", "support", "ssh", "NUMBER", "ext", "NUMBER", "It", "looks", "like", "no", "compatible", "server", "to", "client", "encryption", "algorithms", "find", "NUMBER", "Try", "to", "install", "php", "ssh", "NUMBER", "extension", "NUMBER", "It", "s", "more", "faster", "and", "better", "than", "phpseclib", "NUMBER", "Try", "to", "install", "ssh", "NUMBER", "extension", "NUMBER", "Thanks", "a", "lot", "I", "ll", "think", "about", "add", "pssh", "support", "NUMBER", "Thanks", "Very", "interesting", "NUMBER", "It", "will", "help", "NUMBER", "I", "learned", "pssh", "and", "concluded", "that", "this", "extension", "be", "not", "popular", "and", "difficult", "to", "install", "so", "that", "it", "will", "not", "be", "support", "NUMBER", "I", "prefer", "to", "use", "PSR", "NUMBER", "I", "also", "modify", "your", "implementation", "to", "use", "RemoteGroup", "class", "NUMBER", "php", "connect", "host", "user", "passport", "node", "group", "node", "function", "upload", "from", "to", "ok_hand", "Please", "check", "new", "implementation", "NUMBER", "Release", "will", "be", "a", "few", "days", "later", "after", "the", "check", "of", "work", "NUMBER", "Did", "you", "test", "NUMBER", "version", "Is", "it", "work", "properly", "By", "default", "cd", "run", "upload", "execute", "on", "all", "connections", "NUMBER", "So", "you", "simply", "need", "to", "cd", "NUMBER", "once", "NUMBER", "I", "also", "think", "about", "change", "implementation", "to", "something", "with", "each", "NUMBER", "Take", "a", "loot", "at", "example", "in", "my", "blog", "LINK", "update", "NUMBER", "That", "be", "bug", "NUMBER", "RemoteGroup", "execute", "do", "not", "return", "anything", "NUMBER", "Can", "you", "create", "pull", "request", "with", "fix", "and", "test", "for", "it", "Or", "i", "can", "do", "this", "on", "next", "week", "NUMBER"], "text_count": [0, 8150, 2699, 1386, 772, 84, 1047, 3, 26, 1313, 455, 2033, 1419, 795, 718, 302, 0, 0, 0, 0, 2844, 829, 370, 325, 497, 343, 0, 0, 0, 0, 4381, 2618, 1796, 57, 945, 278, 0, 0, 0, 0, 4811, 7, 2065, 1784, 969, 0, 0, 0, 0, 0, 1382, 598, 914, 405, 581, 269, 600, 0, 0, 0, 4541, 302, 3711, 342, 0, 0, 0, 0, 0, 0, 3191, 375, 2214, 900, 378, 0, 0, 0, 0, 0, 5595, 2225, 508, 2531, 329, 234, 0, 0, 0, 0, 198, 2222, 307, 0, 0, 0, 0, 0, 0, 0, 5451, 1186, 3346, 1031, 0, 0, 0, 0, 0, 0, 10483, 17598, 359, 830, 188, 360, 0, 0, 0, 0, 25319, 198, 18659, 782, 4076, 5858]}, {"repo": "deployer", "type": "nonelite", "title": "", "number of text": 2047, "text": "  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nIs it possible somehow to execute symfony recipe's tasks on multiple environments?\nWe have 3 envs (www_live, admin_live, api_live) and all of them needs cache warmup,\nwritable dirs, etc...\n What should I do, I cannot upload the whole project. We have an API, admin and a public site, with the same schema and entities, but for example different authentication system, different templates, different yml configs. We handled this situation that we created a couple of environments, web, api, admin, etc... and when we deploy our symfony project, we warmup all environments' cache, shared files, etc...\n  Deployer supports parallel deployment with `-p` `--parallel` options.\nDoes anybody using it? \n I've tried it couple times and it worked fine for me\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | 3.3 |\n| Local Machine OS | OSX |\n| Remote Machine OS | Ubuntu |\n### Description\n\nFor example: \n\n```\n//releases directory has 5 version\n20160729140001\n20160729140002\n20160729140003 <- current\n20160729140004\n20160729140005\n```\n\nI want to jump to the 0001 version or 0005 version\uff0cwhat should I do?\n I get it. Thanks for you help!\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | 3.2 |\n| Local Machine OS | Debian 8.4 |\n| Remote Machine OS | N/A |\n### Description\n\nI have a private repository on the bitbucket which is Symfony bundle and localy when I run composer update it ask me about password, because entry in my composer.json is similar to (please not about https instead of ssh.):\n\n``` json\n\"repositories\": [\n        {\n            \"type\": \"vcs\",\n            \"url\":  \"https://me@bitbucket.org/me/some-bundle.git\"\n        }\n    ],\n```\n\nBut when I deploy my app the task of deploy:vendors throws:\n\n``` bash\n[RuntimeException]                                                                                                                          \n  Loading composer repositories with package information                                                                                      \n\n\n    [RuntimeException]                                                                                                                        \n\n    Failed to execute git clone --mirror 'https://me@bitbucket.org/me/some-bundle.git' '/home/acropol/  \n  .composer/cache/vcs/https---me-bitbucket.org-me-some-bundle.git/'                                     \n    Cloning into bare repository '/home/app/.composer/cache/vcs/https---me-bitbucket.org-me-permission-b  \n  undle.git'...                                                                                                                               \n    remote: Invalid username or password. If you log in via a third party service you must ensure you have an account password set in your a  \n  ccount profile.                                                                                                                             \n    fatal: Authentication failed for 'https://me@bitbucket.org/me/some-bundle.git/'                     \n\n\n\n  install [--prefer-source] [--prefer-dist] [--dry-run] [--dev] [--no-dev] [--no-custom-installers] [--no-autoloader] [--no-scripts] [--no-p  \n  rogress] [--no-suggest] [-v|vv|vvv|--verbose] [-o|--optimize-autoloader] [-a|--classmap-authoritative] [--ignore-platform-reqs] [--] [<pac  \n  kages>]...   \n```\n\nIs there any option to tell deployer to ask for credentials during deploy?\n### Content of `deploy.php`\n\n``` php\n<?php\n\n// All Deployer recipes are based on `recipe/common.php`.\nrequire __DIR__.'/vendor/deployer/deployer/recipe/symfony3.php';\n\n// dev server\nserver('dev', 'host.example.com', 18080)\n    ->user('username')\n    ->identityFile()\n    ->stage('dev')\n    ->env('deploy_path', '/var/www/html/myapp/dev')\n    ->env('branch', 'develop')\n    ->env('env_vars', 'SYMFONY_ENV=dev')\n    ->env('env', 'dev')\n    ->env('composer_options', 'install')\n;\n\n// override from symfony recipe\ntask('deploy:clear_controllers', function () {})->setPrivate();\n\nset('shared_dirs', ['var/logs', 'var/sessions', 'app/var']);\nset('writable_dirs', ['var/cache', 'var/logs', 'var/sessions', 'app/var']);\n\nset('repository', 'ssh://git@my.com/repo.git');\n\nafter('deploy:vendors', 'database:migrate');\n```\n  | Q | A |\n| --- | --- |\n| Issue Type | Question, |\n| Deployer Version | N/A |\n| Local Machine OS | Windows 7 |\n| Remote Machine OS | Ubuntu 16.04 LTS |\n\nI am start studying the Deployer. My question is the deployer can use for offline deployment. I have a yii framework developed from windows and deployed to the ubuntu 16.04 LTS\n   | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | 3.3.0 |\n| Local Machine OS | Windows 10 |\n| Remote Machine OS | Linux (WHM/cPanel) |\n### Description\n\nI've set up a new site to deploy via this script and I'm getting an error on `dep deploy production`:\n\n```\n  [RuntimeException]\n  stdin: is not a tty\n  bash: stdin:: command not found\n```\n### Steps to reproduce\n1. Set up site using the below `deploy.php` file\n2. Run `dep deploy production`\n### Content of `deploy.php`\n\n``` php\n<?php\n/*\n * This file has been generated automatically.\n * Please change the configuration for correct use deploy.\n */\n\nrequire 'recipe/wordpress.php';\n\n// Set configurations\nset('repository', 'git@domain.com:ethanclevenger91/l***k.git'); //private repo\nset('shared_files', []);\nset('shared_dirs', ['wp-content/uploads']);\nset('writable_dirs', ['wp-content/uploads']);\n\n// Configure servers\nserver('production', 'l***k.com')\n    ->user('l***k')\n    ->password('f***e')\n    ->env('deploy_path', '/home/l***k/public_html');\n\nserver('beta', 'beta.domain.com')\n    ->user('username')\n    ->password()\n    ->env('deploy_path', '/var/www/beta.domain.com');\n\n/**\n * Restart php-fpm on success deploy.\n */\ntask('php-fpm:restart', function () {\n    // Attention: The user must have rights for restart service\n    // Attention: the command \"sudo /bin/systemctl restart php-fpm.service\" used only on CentOS system\n    // /etc/sudoers: username ALL=NOPASSWD:/bin/systemctl restart php-fpm.service\n    run('sudo /bin/systemctl restart php-fpm.service');\n})->desc('Restart PHP-FPM service');\n\nafter('success', 'php-fpm:restart');\n\n/**\n * Main task\n */\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:symlink',\n    'cleanup',\n])->desc('Deploy your project');\n\nafter('deploy', 'success');\n\n```\n### Output log\n\n```\n\u27a4 Executing task deploy:prepare\n\u21b3 on [production]\n> echo $0\n< stdin: is not a tty\n< bash\n<\n> if [ ! -d /home/l***k/public_html ]; then mkdir -p /home/l***k/public_html; fi\n< stdin: is not a tty\n<\n> if [ ! -L /home/l***k/public_html/current ] && [ -d /home/l***k/public_html/current ]; then echo true; fi\n< stdin: is not a tty\n<\n> cd /home/l***k/public_html && if [ ! -d releases ]; then mkdir releases; fi\n< stdin: is not a tty\n<\n> cd /home/l***k/public_html && if [ ! -d shared ]; then mkdir shared; fi\n< stdin: is not a tty\n<\n\u2022 done on [production]\n\u2714 Ok [2s 506ms]\n\u27a4 Executing task deploy:release\n\u21b3 on [production]\n> if [ -d /home/l***k/public_html/releases/20160717032918 ]; then echo 'true'; fi\n< stdin: is not a tty\n<\n> mkdir /home/l***k/public_html/releases/20160717032918\n< stdin: is not a tty\n<\n> cd /home/l***k/public_html && if [ -h release ]; then rm release; fi\n< stdin: is not a tty\n<\n> ln -s /home/l***k/public_html/releases/20160717032918 /home/l***k/public_html/release\n< stdin: is not a tty\n<\n\u2022 done on [production]\n\u2714 Ok [1s 231ms]\n\u27a4 Executing task deploy:update_code\n\u21b3 on [production]\n> which git\n< stdin: is not a tty\n< /usr/local/bin/git\n<\n> stdin: is not a tty\n/usr/local/bin/git version\n< stdin: is not a tty\n< bash: stdin:: command not found\n< git version 2.8.2\n<\n> find /home/l***k/public_html/releases -maxdepth 1 -mindepth 1 -type d\n< stdin: is not a tty\n< /home/l***k/public_html/releases/20160717032458\n< /home/l***k/public_html/releases/20160717032918\n<\n> readlink /home/l***k/public_html/release\n< stdin: is not a tty\n< /home/l***k/public_html/releases/20160717032918\n<\n> stdin: is not a tty\n/usr/local/bin/git clone  --recursive -q --reference /home/l***k/public_html/releases/20160717032458 --dissociate git@domain.com:ethanclevenger91/l***k.git  stdin: is not a tty/home/l***k/public_html/releases/20160717032918 2>&1\n> stdin: is not a tty\n/usr/local/bin/git clone  --recursive -q git@domain.com:ethanclevenger91/l***k.git stdin: is not a tty/home/l***k/public_html/releases/20160717032918 2>&1\n\n\n  [RuntimeException]\n  stdin: is not a tty\n  bash: stdin:: command not found\n\n\nException trace:\n () at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\deployer\\deployer\\src\\Server\\Remote\\PhpSecLib.php:124\n Deployer\\Server\\Remote\\PhpSecLib->run() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\deployer\\deployer\\src\\functions.php:296\n run() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\deployer\\deployer\\recipe\\common.php:204\n {closure}() at n/a:n/a\n call_user_func() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\deployer\\deployer\\src\\Task\\Task.php:79\n Deployer\\Task\\Task->run() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\deployer\\deployer\\src\\Executor\\SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\deployer\\deployer\\src\\Console\\TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\symfony\\console\\Command\\Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\symfony\\console\\Application.php:841\n Symfony\\Component\\Console\\Application->doRunCommand() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\symfony\\console\\Application.php:189\n Symfony\\Component\\Console\\Application->doRun() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\symfony\\console\\Application.php:120\n Symfony\\Component\\Console\\Application->run() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\deployer\\deployer\\src\\Deployer.php:101\n Deployer\\Deployer->run() at C:\\Users\\ethan_000\\AppData\\Roaming\\Composer\\vendor\\deployer\\deployer\\bin\\dep:64\n\ndeploy [-p|--parallel]\n\n```\n `-bash`\n Looks like SSH inside SSH.\r\n I don't know what that means, but if I look at shell access configuration on my server (WHM), I find:\n\n> - Normal shell is currently /bin/bash.\n\nCould be I also misunderstand what was learned from `echo $0`, but it output `-bash` which implies to me it _is_ using bash.\n\nSo if those two things are inaccurate/not what you're talking about, let me know.\n And shell access _is_ enabled for that user\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | 3.3 (still present in master branch) |\n| Local Machine OS | OSX |\n| Remote Machine OS | N/A |\n### Description\n\nWhen using the `deploy:assets` task in the symfony recipe, all touched files are given an incorrect timestamp due to the following line:\n\nhttps://github.com/deployphp/deployer/blob/master/recipe/symfony.php#L63\n\nIt should be `$time = date('YmdHi.s');` (`h` should be `H`). We've noticed this because we're using rsync to sync files and due to the incorrect timestamp they never get synced.\n### Steps to reproduce\n\nJust use the `recipe/symfony(3).php`. \n### Output log\n\n```\n\u27a4 Executing task deploy:assets\n\u21b3 on [production]\n> find /<stripped>/releases/20160715133545/web/css /<stripped>/20160715133545/web/images /<stripped>/releases/20160715133545/web/js -exec touch -t 201607150137.35 {} ';' &> /dev/null || true\n\u2022 done on [production]\n```\n\nThe time (`201607150137.35`) is incorrect and is several hours behind because it is using the 12-hour format (h) instead of 24-hour format (H).\n\nWould it be okay to send a PR fixing this, or am I missing something important (could it be intended for some reason)?\n Side note: It seems that `touch -t` option expects 24-hour format and not 12-hour format. So I'm guessing the suggested change is correct.\n\n`man touch` says the following: \n\n```\n     -t      Change the access and modification times to the specified time instead of the current time of day.  The argument is of the form ``[[CC]YY]MMDDhhmm[.SS]'' where each pair of letters represents the fol-\n             lowing:\n\n                   CC      The first two digits of the year (the century).\n                   YY      The second two digits of the year.  If ``YY'' is specified, but ``CC'' is not, a value for ``YY'' between 69 and 99 results in a ``CC'' value of 19.  Otherwise, a ``CC'' value of 20 is\n                           used.\n                   MM      The month of the year, from 01 to 12.\n                   DD      the day of the month, from 01 to 31.\n                   hh      The hour of the day, from 00 to 23.\n                   mm      The minute of the hour, from 00 to 59.\n                   SS      The second of the minute, from 00 to 61.\n```\n\nMore specifically this line `hh      The hour of the day, from 00 to 23.` saying **00 to 23**.\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | 3.3.0 or above. Possible at v4? |\n| Local Machine OS | Darwin luna.local 15.4.0 Darwin Kernel Version 15.4.0 |\n| Remote Machine OS | Linux apollo 4.4.0-24-generic 43-Ubuntu SMP |\n### Description\n\nWhen you are deploying you must have a option of generating a git tag in the repository with the current release name so you can easy track your latest deployment in your git environment.\n After reading your motivation, I agree to the situation other deployers may have with CI. Thank you for the information.\n\n\u221a\n Yes, I'll add it in a PR.\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug / Question |\n| Deployer Version | 3.3.0 |\n| Local Machine OS | Ubuntu 16.04 |\n| Remote Machine OS | Debian 8.4 |\n### Description\n\nCommands don't appear to be running on the remote machine. Watching auth.log on the machine shows that Deployer _is_ connecting successfully but it hangs on the first command.\n\nI'm aware that this could be a configuration issue but as far as I can tell the connection is good and as there is no further output or logs I'm finding it really hard to debug. I've used deployer on other machines/servers with basically the same configuration and had no issues. Hoping you can give me some pointers.\n### Steps to reproduce\n\nUse the deploy.php below and run `dep test prod -vvv`.\n### Content of `deploy.php`\n\n``` php\nrequire 'recipe/laravel.php';\n\nserverList('./servers.yml');\n\nset('repository', 'https://github.com/mrchimp/chimpcom.git');\n\ntask('test', function() {\n    run('mkdir /var/www/html/test');\n    run('ls');\n});\n```\n### Output log\n\n```\n\u27a4 Executing task test\n\u21b3 on [prod]\n> cd /var/www/html/website && mkdir /var/www/html/website/test\n^C\n```\n### auth.log output\n\n```\nJun 16 20:32:00 myhost sshd[22257]: Accepted publickey for mrchimp from x.x.x.x port 52971 ssh2: RSA xxxxxxxxxxxxxxxxxxxxxxxxx\nJun 16 20:32:00 myhost sshd[22257]: pam_unix(sshd:session): session opened for user mrchimp by (uid=0)\nJun 16 20:32:00 myhost systemd-logind[3176]: New session 420 of user mrchimp.\nJun 16 20:32:01 myhost sshd[22257]: pam_unix(sshd:session): session closed for user mrchimp\nJun 16 20:32:01 myhost systemd-logind[3176]: Removed session 420.\n```\n Yes, it exists.\n\nIf I remove the `mkdir` command and only have the `ls` command, I get the same result.\n It does exist. `ls` (without the `cd`) fails, too.\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n\nThis pr adds a recipe to support the [Silverstripe CMS](http://www.silverstripe.org/software/cms/) \n- Follows the [composer recipe](https://github.com/deployphp/deployer/blob/master/recipe/composer.php)\n- Adds `assets` to `shared_dirs` and `writable_dirs`\n- Additional helper tasks for [generating the database schema](https://docs.silverstripe.org/en/3.3/developer_guides/model/data_model_and_orm/#generating-the-database-schema) and flushing the [cache/template/config manifests](https://docs.silverstripe.org/en/3.3/developer_guides/execution_pipeline/flushable/)\n I think it's ok. Does it popular CMS?\n Not sure internationally. But it is popular here in NZ at least!\n Is this able to be merged? Anything else I could do?\n It depends on how the project is configured. Settings can be either in `/mysite/config.php` or `_ss_environment.php`.\n\nIt is up to the developer to decide which method to use.\n Anything further I could do to have this merged?\n Sure, to quickly setup a Silverstripe site use the following:\n\nIn your terminal\n\n``` sh\ncomposer create-project silverstripe/installer deployer-test 3.4.0\ncd deployer-test\ncomposer require silverstripe/sqlite3:1.4 # Only required if using SQLLite.\n```\n\nCreate/edit mysite/_config.php\n\n``` php\ndefine('SS_DEFAULT_ADMIN_USERNAME', 'admin');\ndefine('SS_DEFAULT_ADMIN_PASSWORD', 'password'); //Change this of course!\nrequire_once(\"conf/ConfigureFromEnv.php\");\n\nglobal $project;\n$project = 'mysite';\n\nglobal $databaseConfig;\n$databaseConfig = array(\n    'type' => 'SQLite3Database',\n    'path' => dirname(__FILE__).'/../assets/.sqlitedb',\n    'database' => 'database.sqlite',\n    'key' => ''\n);\ni18n::set_locale('en_NZ');\n```\n\nYou should now have a working local copy of Silverstripe http://127.0.0.1/deployer-test (etc)\n\nCreate/edit deploy.php\n\n``` php\nrequire 'recipe/silverstripe.php';\n\nserver('prod', 'host', 22)\n    ->user('name')\n    ->forwardAgent() \n    ->stage('production')\n    ->env('deploy_path', '/your/project/path'); // Define the base path to deploy your project to.\n\nset('repository', 'git@github.com:org/app.git');\n```\n\nThen cross your fingers!\n\n``` sh\ndep deploy\n```\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | Using .phar version, 3.3.0 |\n| Local Machine OS | Windows 7 |\n| Remote Machine OS | Debian 8 |\n### Description\n\nI can't connect to my server with Deployer, but \"normal SSH\" connexion is working (through Git Bash, OpenSSH, Putty...). \n### Content of `deploy.php`\n\n``` php\n<?php\nrequire 'recipe/symfony.php';\nset('ssh_type','ext-ssh2');\n\nserver('preprod', 'XX.XX.XX.XXX')\n    ->user('user')\n    ->configFile('C:/Users/user/.ssh/config')\n    ->stage('production')\n    ->env('deploy_path', '/var/www/path/www');\n\nset('repository', 'https://pwd@bitbucket.org/user/repo.git');\n```\n### Output log\n\n```\n$ php deployer.phar deploy preprod -vvv\n\u00d4\u00d7\u00f1 Executing task \u2190[32mdeploy:prepare\u2190[39m\n\u00d4\u00e5\u2502 on [preprod]\n\u2190[31m>\u2190[39m echo $0\n\nWarning: ssh2_connect(): Unable to connect to XX.XX.XX.XXX on port 22 in phar://C:/wamp/www/repo/deployer.phar/vendor/herzult/php-ssh/src/Ssh/Session.php o\nn line 153\n\nWarning: ssh2_connect(): Unable to connect to XX.XX.XX.XXX in phar://C:/wamp/www/repo/deployer.phar/vendor/herzult/php-ssh/src/Ssh/Session.php on line 153\n\u2190[37;41m                                                                                      \u2190[39;49m\n\u2190[37;41m  Shell on your server is not POSIX-compliant. Please change to sh, bash or similar.  \u2190[39;49m\n\u2190[37;41m  Usually, you can change your shell to bash by running: chsh -s /bin/bash            \u2190[39;49m\n\u2190[37;41m                                                                                      \u2190[39;49m\n\u2190[37;41m                              \u2190[39;49m\n\u2190[37;41m  [RuntimeException]          \u2190[39;49m\n\u2190[37;41m  The SSH connection failed.  \u2190[39;49m\n\u2190[37;41m                              \u2190[39;49m\n\n\u2190[33mException trace:\u2190[39m\n () at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/herzult/php-ssh/src/Ssh/Session.php:134\u2190[39m\n Ssh\\Session->createResource() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/herzult/php-ssh/src/Ssh/AbstractResourceHolder.php:25\u2190[39m\n Ssh\\AbstractResourceHolder->getResource() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/herzult/php-ssh/src/Ssh/Subsystem.php:39\u2190[39m\n Ssh\\Subsystem->getSessionResource() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/herzult/php-ssh/src/Ssh/Exec.php:18\u2190[39m\n Ssh\\Exec->createResource() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/herzult/php-ssh/src/Ssh/AbstractResourceHolder.php:25\u2190[39m\n Ssh\\AbstractResourceHolder->getResource() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/herzult/php-ssh/src/Ssh/Exec.php:24\u2190[39m\n Ssh\\Exec->run() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/src/Server/Remote/SshExtension.php:116\u2190[39m\n Deployer\\Server\\Remote\\SshExtension->run() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/src/functions.php:296\u2190[39m\n run() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/recipe/common.php:110\u2190[39m\n {closure}() at \u2190[32mn/a:n/a\u2190[39m\n call_user_func() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/src/Task/Task.php:79\u2190[39m\n Deployer\\Task\\Task->run() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/src/Executor/SeriesExecutor.php:43\u2190[39m\n Deployer\\Executor\\SeriesExecutor->run() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/src/Console/TaskCommand.php:82\u2190[39m\n Deployer\\Console\\TaskCommand->execute() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/symfony/console/Command/Command.php:256\u2190[39m\n Symfony\\Component\\Console\\Command\\Command->run() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/symfony/console/Application.php:791\u2190[39m\n Symfony\\Component\\Console\\Application->doRunCommand() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/symfony/console/Application.php:186\u2190[39m\n Symfony\\Component\\Console\\Application->doRun() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/vendor/symfony/console/Application.php:117\u2190[39m\n Symfony\\Component\\Console\\Application->run() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/src/Deployer.php:101\u2190[39m\n Deployer\\Deployer->run() at \u2190[32mphar://C:/wamp/www/repo/deployer.phar/bin/dep:63\u2190[39m\n require() at \u2190[32mC:\\wamp\\www\\repo\\deployer.phar:4\u2190[39m\n\n\u2190[32mdeploy [-p|--parallel]\u2190[39m\n\n```\n @oanhnn Has this bug been reported to ssh2 developers?\n Do I have another solution to connect to my server in the meantime?\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | 3.2 |\n| Local Machine OS | Any |\n| Remote Machine OS | Any |\n### Description\n\nIs it possible to clone repository from https?\nIf so, how to do this? I have to set password somewhere.\n### Content of `deploy.php`\n\n``` php\n<?php\nrequire __DIR__ . '/vendor/deployer/deployer/recipe/symfony.php';\n\nserver('prod', 'example.com')\n    ->user('user')\n    ->password('password')\n    ->env('deploy_path', '/path/to/deploy/dir/')\n    ->stage('production');\nset('repository', 'https://username@bitbucket.org/team/repo.git');\n```\n  | Q | A |\n| --- | --- |\n| Issue Type | Question/Feature Request |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nHi!\n\nI'd like to know if I could implement some kind of timer to know how long the deployment took so that I can later include it in a slack notification.\n\nIf you're up for it, I'd like to have your opinion about how to do so. I was thinking about updating some tasks (from recipes/common.php) and adding new variables so that they can be accessed anywhere. Or maybe I could add new tasks to start/end a timer? I'm all ears :)\n @oanhnn Yes I saw the output with the `-vvv` option. Sadly you don't have access to the `Informer` in your tasks so you cannot get access to any timing information. On top of that there are no mechanism to get the overall deployment time.\n\nDo you see what I mean?\n In task?\n @elfet Yes\n Use php.\n\n> 14 \u0438\u044e\u043d\u044f 2016 \u0433., \u0432 16:08, geoffrey-brier notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> @elfet https://github.com/elfet Yes\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub https://github.com/deployphp/deployer/issues/705#issuecomment-225823082, or mute the thread https://github.com/notifications/unsubscribe/AAInsB6aWZ_SwLDmO3AUGYNQPtg-ELeUks5qLm-WgaJpZM4I0rCq.\n @elfet So you don't want the feature in deployer?\n We cann\u2019t  add all feature to deployer. In that case it\u2019s really simple to implement it yourself.\n\n> 14 \u0438\u044e\u043d\u044f 2016 \u0433., \u0432 19:03, geoffrey-brier notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> @elfet https://github.com/elfet So you don't want the feature in deployer?\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub https://github.com/deployphp/deployer/issues/705#issuecomment-225860543, or mute the thread https://github.com/notifications/unsubscribe/AAInsEPV_yiu6zkvDP5XMe0xDStYxHhxks5qLpiQgaJpZM4I0rCq.\n I understand, I'll close the issue then.\n  **[in src/Cluster/ClusterBuilder.php, line 11](https://github.com/deployphp/deployer/blob/041ae4acd270e5475499760bba43d9d040efa9c1/src/Cluster/ClusterBuilder.php#L11)**\n\n> The class `Deployer\\Cluster\\Node` is declared but never used. You should remove the `use` statement.\n\n``` php\n * Defines a node for cluster\n */\n\nnamespace Deployer\\Cluster;\n\nuse Deployer\\Cluster\\Node;\n\n/**\n * @property array | Deployer\\Cluster\\Node[] $nodes\n */\n\n```\n\n---\n\n_Posted from [SensioLabsInsight](https://insight.sensiolabs.com/projects/69072898-df4a-4dee-ab05-c2ae83d6c469/analyses/508)_\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | 3.3.0 |\n| Local Machine OS | Windows 10 x64 |\n| Remote Machine OS | Linux serv01.esm1.siteground.biz 3.12.18-clouder0 #73 SMP Wed May 18 13:32:34 EEST 2016 x86_64 |\n### Steps to reproduce\n1. Run `dep current federicoliva`\n### Content of `deploy.php`\n\n``` php\nrequire 'recipe/symfony.php';\n\nserver('federicoliva', '77.104.141.222', 18765)\n    ->user('federic9')\n    ->forwardAgent()\n    ->stage('production')\n    ->env('deploy_path', '~/public_html/deployer');\n```\n### Output log\n\n```\n\u27a4 Executing task current\n\u21b3 on [federicoliva]\n> cd ~/public_html/deployer && readlink ~/public_html/deployer/current\n\nNotice: SSH_AUTH_SOCK not found in C:\\Users\\Federico\\AppData\\Roaming\\Composer\\vendor\\phpseclib\\phpseclib\\phpseclib\\System\\SSH\\Agent.php on line 130\n```\n\nWhat is wrong?\n At the command `ssh-add /path/tp/key` I get this output:\n\n**Could not open a connection to your authentication agent.**\n These special quotes... mmm... it works now :P \n No thanks, it works fine!\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nWould be nice to be able to manually set timeout for `run` (for the `Local.php` as well) similar to how its done for `runLocally`\n Yup, i'll work on it the next week\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | 3.2 |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Question\n\nHello if you read the [Installation](http://deployer.org/docs/installation) and the [Getting started](http://deployer.org/docs/getting-started) pages you must create the deploy.php file by yourself\n\nBut there is an action \"dep init\" that create the file.\n\nI don't know if the problem is that the documentation is old or dep init is  for another thing.\n\nThanks.\n Hello oanhnn, I'm trying to undertstand the project to be able to make a good PR to update de documentation\n @oskarcalvo it's will be cool :)\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n\nsf_debug var to enable modifying whether --no-debug is appended to commands\n I am not sure at this point, the day before yesterday was my first usage of this package and so far I'm loving it. This is just a little something I couldn't get done without modifying it or doing stuff by hand on the DEV server as I needed to deploy a clean copy there as well. The way I see it at this very moment, that's the only change I'd make.\n\nProbably some function defined in the symfony.php scope (so also accessible in the main deployer.php file) such as \n\n```\nfunction runCommand($command) {\n// $command = 'doctrine:migrations:migrate --env={{env}} '.trim(get('sf_debug')).' --no-interaction';\nrun('{{bin/php}} {{release_path}}/' . trim(get('bin_dir'), '/') . '/console '.$command);\n}\n```\n\nor\n\n```\nfunction runCommand($command, $parameters = '') {\n// --env={{env}} {{sf_debug}} // assuming sf_debug is moved as an env() variable always appended to any command automatically?\n}\n```\n\nBut I still have very little experience with it and since the recipe is already there, I just used it and it did the job besides the small thing with --no-debug dumping prod assets in the dev env even if I had set env and env_vars.\n\nOther than that, I think configuring several servers that share the same directory structure and authentication would be nice, by means of simply passing an array of IPs to the host key in the yml config, but again, I don't have enough experience to know for sure what's best. Or maybe plan that for future versions? :)\n\nRegards\n See #688 which already purposed a fix for this, among other symfony-related issues.\n #688 looks pretty nice to me at first glance, I'll close this\n\nI'll reopen another one bout the servers thing at some point\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | 3.3.0 |\n| Local Machine OS | OSX |\n| Remote Machine OS | N/A |\n### Description\n\nWhen declaring a task to be executed locally and only once through the ->once() modified, it's impossible to call run() or runLocally() as it throws the following exception :\n\n`Fatal error: Uncaught Error: Call to a member function parse() on null in phar:///Users/ahfeel/Work/instant-gaming/deployer.phar/src/functions.php:316`\n\nSeems that env() returns null\n Sure, here it is :\n\n```\ntask('ig:notify_rollbar', function() {\n    $ch = curl_init('https://api.rollbar.com/api/1/deploy/');\n    curl_setopt($ch, CURLOPT_POST, true);\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query(['access_token' => 'XXXX', 'environment' => 'production', 'revision' => trim(runLocally('git log -n 1 --format=\"%h\"')), 'local_username' => runLocally('whoami')]));\n    curl_exec($ch);\n})->once();\n```\n\nThis doesn't work :)\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | Yes |\n| BC breaks? | Yes |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n- Removed overridden `deploy:assetic:dump` task in `symfony3` recipe, as it implied this command was no longer valid and should be overridden with `deploy:assets:install` command. In reality, `deploy:assets:install` should exist in all symfony versions, as should `deploy:assetic:dump` (although this is arguable, as `deploy:assetic:dump` isn't a Symfony command, it is a kriswallsmith/assetic command). \n- Changed default for `deploy:assetic:dump` to `false` (via `dump_assets`) as this is not a core Symfony package and should not be assumed to be installed. It relies on kriswallsmith/assetic and symfony/assetic-bundle.\n- Added `deploy:assets:install` task as this is a symfony-core command that is intended to be called prior to other asset compilation commands (such as `deploy:assetic:dump`). Its purpose to is to install any bundle assets (within `<bundleName>/Resource/public`) and put them in `web/bundles/<bundleName>`.\n- `composer_action` created\n- Fixed `SYMFONY_ENV` value in `env_vars` to correctly refer to the configured `env` value.\n- Created `bin/console` to cleanup calls to Symfony console command (there was a ton of duplicated lines prior)\n- created `console_options` so the options passed to `bin/console` reflect what should be passed per the configured environment (for example, the `--no-debug` options cannot be passed for any environment except for `prod` and will likely break hard when passed for `dev` environment)\n- General cleanup...\n Perhaps of consequence (is this expected behavior?): prior to fixing the travis build by adding an `env` environment variable (see https://github.com/robfrawley/deployer/blob/master/recipe/common.php#L44), it failed on php 5.5 and 5.6, but passed on 7.0.\n\n5.5: https://travis-ci.org/deployphp/deployer/jobs/135430007\n5.6: https://travis-ci.org/deployphp/deployer/jobs/135430009\n7.0: https://travis-ci.org/deployphp/deployer/jobs/135430011\n\nIt seems odd that it would pass on 7.0 without `env` defined with the new `composer_options` closure ( see https://github.com/robfrawley/deployer/blob/master/recipe/common.php#L31 )...is that possibly a bug?\n Nice work! \nIt's ok on 7.0, but not on 5.5, 5.6?\n @oanhnn The intended use-case is for someone who uses deployer to automatically build a staging environment as part of their CI chain. The default action is still to run `install` --- only when run with a non-production environment would `update` be used.\n @elfet The build works on all platforms now that I defined `env` https://github.com/robfrawley/deployer/blob/master/recipe/common.php#L44\n\nPrior to that, `env` was empty, and it would fail on 5.5 and 5.6, but passed on 7.0. I mentioned this as it may have exposed an irregularity and/or bug.\n\nAs for this pull-request, it is fixed, but you may still want to look into why it broke selectively without the `env` defined.\n @oanhnn\n\n> I think it makes users puzzled :scream:\n\nAre you implying that the value of stage should define the env programatically somehow? That seems outside the scope of this pull-request. I'm just using `env` as it has been defined, as a separate value to `stage`.\n @oanhnn what do you want to call it? `env` makes sense to me; I don't have any idea what else it would be called... what do you want to call it?\n @oanhnn That code doesn't allow for composer options based on the environment. I changed `env` to `build_type` ... is that clearer?\n @elfet Do you have any comments about this pull request and what might need changing for it to be accepted?\n `dump` part is ok.\ncomposer `update` is not.\n @oanhnn and @elfet Ok - does the current commit satisfy all the requirements, taking both your comments into account?\n FYI, I just wanted to confirm what I asserted above about Symfony versions and `assetic-bundle`, so I wrote the below quickly to do just that. For all _currently supported_ versions of Symfony:\n\n``` bash\n#!/bin/bash\n\nVERSIONS=\"2.3 2.7 2.8 3.0 3.1\"\nTMP_DIR=\"/tmp/symfony-assetic-check\"\n\nrm -fr ${TMP_DIR} && mkdir -p ${TMP_DIR}\ncurl -LsS https://symfony.com/installer -o ${TMP_DIR}/symfony-installer.phar\n\nfor version in ${VERSIONS}; do\n  echo -n \"Symfony v${version}: \"\n  php ${TMP_DIR}/symfony-installer.phar -q new ${TMP_DIR}/v${version} $version\n\n  grep assetic ${TMP_DIR}/v${version}/composer.lock > /dev/null\n  if [[ $? -eq 0 ]]; then\n    echo \"Assetic Installed\"\n  else\n    echo \"Assetic **NOT** Installed\"\n  fi\ndone\n```\n\nThe script outputs:\n\n```\nSymfony v2.3: Assetic Installed\nSymfony v2.7: Assetic Installed\nSymfony v2.8: Assetic **NOT** Installed\nSymfony v3.0: Assetic **NOT** Installed\nSymfony v3.1: Assetic **NOT** Installed\n```\n\nAgain, these are just the defaults, and assetic may or may _not_ be installed on any version.\n @elfet Give me a shout if anything needs to be changed for this to be merge-ready. Otherwise, thanks for such a great tool!\n @robfrawley still need to think and find compromise between no BC break and moving forward. May be this is good for next major v4.\n @oanhnn what you think?\n @elfet @oanhnn Where you guys at on this? Any thoughts or comments! ;-)\n This needs to also have the \"BUG\" issue label. (Deployer's Symfony recipes breaks when Symfony version 2.8 is used due to Assetic assumption, and the version 3 recipe calls unrelated commands for  \"assets:dump\" task that it should not.)\n @elfet Is this pull request particularly controversial for some reason I don't see?\n\nThe current implementation is broken on Symfony 2.8 and calls incorrect commands on versions greater than 3. The only minor BC break seems very acceptable when the full scope of what this pull requests fixes is taken into account (and I can't figure a way around that BC break that also addresses the issues here).\n\n# BC Breaks\n- User must set `dump_assets` to true for Symfony recipe if they want their assets compiled (whereas previously they did not have to). It is significant to note as well, that I would argue _this should have been the case anyway_ as more versions of Symfony (that are currently supported) **do not have Assetic** by default, and moreover, the versions that _did_ ship with Assetic by default could also not have the package due to the author cleaning up dependencies he may not be using! The assumption for an external command like this should be that it does not exist unless the user specifies that it does, IMHO.\n\n# Bug Fixes\n- Version 2.8 of Symfony now supported (prior it would fail on `assetic:dump` task due to lack of Assetic in all versions of Symfony >=2.8).\n- Version 3 of Symfony recipe now _correctly_ calls `assets:dump` instead of `assets:install` (which should never have been the case and makes no logical sense).\n- All versions of Symfony now have task `assets:install` which is always called (this needs to be called prior to Asset compilation (assetic:dump) and is applicable even if asset compilation is not enabled so that public assets from bundles are properly copied or symlinked into the public web root).\n- The `env_vars` variable now properly reflects the configured environment (`SYMFONY_ENV={{env}}`)\n- Addition of `console_options` environment variable as anonymous function to generate the options to pass for the Symfony console command depending on the defined `env` (calling the console command in prod/dev mode with/without `--no-debug` option fails if the incorrect combination is passed).\n- The `env_vars` are now added to all console commands (previously it was only added to the composer commands).\n\n# Cleanup/Improvements\n- Pulled composer action out of `composer_options` into own environment variable `composer_action`\n- Simplification of `deploy:vendors` anonymous function\n- The Symfony console command was moved into own environment variable as anonymous function to allow for cleaner task commands that can now be called simply with `{{bin/console}}` instead of having repetitious statements like `trim(get('bin_dir'), '/') . '/console'` everywhere.\n- Usage of `sprintf` instead of string/variable concatenation\n- Cleanup of file newlines to standardize it (some tasks had two spaces between their definitions, others had one)\n @elfet @oanhnn Any time to look this over and provide feedback?!\n\nI'd love to be able to use deployer directly in my projects instead of relying on my fork with these fixes, but it's not usable on some of the Symfony versions I maintain without the bug fixes here. Can we please get this merged? ;-)\n Sorry, for delay. Will look tonight or tomorrow.\n\n> 29 \u0438\u044e\u043d\u044f 2016 \u0433., \u0432 20:55, Rob Frawley 2nd notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> @elfet https://github.com/elfet @oanhnn https://github.com/oanhnn Any time to look this over and provide feedback?!\n> \n> I'd love to be able to use deployer directly in my projects instead of relying on my fork with these fixes, but it's not usable on some of the Symfony versions I maintain without the bug fixes here. Can we please get this merged? ;-)\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub https://github.com/deployphp/deployer/pull/688#issuecomment-229363001, or mute the thread https://github.com/notifications/unsubscribe/AAInsNy6cxZK1Wm5vnbnHcxcifFFG3Npks5qQnlCgaJpZM4IuZkt.\n @elfet Any progress?\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | xx |\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | xx |\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | 3.3.0 |\n### Description\n\n_\u27a4 Executing task deploy:prepare\nPHP Notice:  Undefined variable: key_comment in phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/System/SSH/Agent.php on line 180_\n strange because they changed it in head version https://github.com/phpseclib/phpseclib/blob/master/phpseclib/System/SSH/Agent.php\nbut in your composer it downloads older with that bug\n\n```\n$key->loadKey('ssh-rsa ' . base64_encode($key_blob) . ' ' . $key_comment);\n```\n Thx\n ok, phpseclib released \n- Installing phpseclib/phpseclib (2.0.2)\n\nCan you upgrade deployer.phar ?\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | 3.3.0 |\n| Local Machine OS | Windows |\n| Remote Machine OS | Debian |\n### Description\n\nI'm trying to use Deplyer, but when I use the command `php deployer.phar deploy preprod`I get a `\u00d9nable to login with the provided credentials.``error.\nI can connect in SSH with those credentials (using Putty), and I also used Capifony before, which I had to use with this config to pass through the proxy\n\n```\nrequire 'net/ssh/proxy/http'\nsshproxy = Net::SSH::Proxy::HTTP.new('YY.YY.YY.YYY', 8080)\nset :ssh_options, { :proxy => sshproxy }\nssh_options[:forward_agent] = true\n```\n\nIs it possible to do this with Deployer ?\n### Content of `deploy.php`\n\n```\n<?php\nrequire 'recipe/symfony.php';\n\nserver('preprod', 'XX.XX.XX.XXX')\n    ->user('myusername')\n    ->password('mypassword')\n    ->stage('production')\n    ->env('deploy_path', '/var/www/XXX/www');\n\n// Specify the repository from which to download your project's code.\nset('repository', 'https://bitbucket.org/XXX/XXX.git');\n```\n### Output log\n\n```\nC:\\wamp\\www\\XXX>php deployer.phar deploy preprod -vvv\n\u00d4\u00d7\u00f1 Executing task deploy:prepare\n\u00d4\u00e5\u2502 on [preprod]\n\nNotice: Cannot connect to XX.XX.XX.XXX:22. Error 10060. Une tentative de connexion a \u00dachou\u00da car le parti connect\u00da n\u00c6a pas r\u00dapondu convenablement au-del\u00d3 d\u00c6une certaine dur\u00dae ou une connexion \u00datablie\na \u00dachou\u00da car l\u00c6h\u00b6te de connexion n\u00c6a pas r\u00dapondu. in phar://C:/wamp/www/XXX/deployer.phar/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 1011\n\n  [RuntimeException]\n  Unable to login with the provided credentials.\n\nException trace:\n () at phar://C:/wamp/www/XXX/deployer.phar/src/Server/Remote/PhpSecLib.php:99\n Deployer\\Server\\Remote\\PhpSecLib->connect() at phar://C:/wamp/www/XXX/deployer.phar/recipe/common.php:105\n {closure}() at n/a:n/a\n call_user_func() at phar://C:/wamp/www/XXX/deployer.phar/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar://C:/wamp/www/XXX/deployer.phar/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar://C:/wamp/www/XXX/deployer.phar/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar://C:/wamp/www/XXX/deployer.phar/vendor/symfony/console/Command/Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at phar://C:/wamp/www/XXX/deployer.phar/vendor/symfony/console/Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at phar://C:/wamp/www/XXX/deployer.phar/vendor/symfony/console/Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at phar://C:/wamp/www/XXX/deployer.phar/vendor/symfony/console/Application.php:117\n Symfony\\Component\\Console\\Application->run() at phar://C:/wamp/www/XXX/deployer.phar/src/Deployer.php:101\n Deployer\\Deployer->run() at phar://C:/wamp/www/XXX/deployer.phar/bin/dep:63\n require() at C:\\wamp\\www\\XXX\\deployer.phar:4\n\ndeploy [-p|--parallel]\n```\n @oanhnn Is this an answer ? \n Hello @oanhnn,\n\nSo far my ssh_config looked like this\n\n```\nHost *\n    ProxyCommand connect %h %p\n    ForwardAgent yes\n\nHost yyy.yyy.yyy.yyy\n    IdentityFile ~/.ssh/key.ppk\n    ProxyCommand connect -H xxx.xxx.xxx.xxx:8080 %h 443\n```\n\nI've tried your solution, but I get this error\n\n```\nC:\\wamp\\www\\XXX>php deployer.phar deploy preprod -vvv\n\u00d4\u00d7\u00f1 Executing task deploy:prepare\n\u00d4\u00e5\u2502 on [preprod]\n\n\n  [RuntimeException]\n  You need to specify authentication method.\n\n\nException trace:\n () at phar://C:/wamp/www/XXX/deployer.phar/src/Server/Remote/PhpSecLib.php:95\n Deployer\\Server\\Remote\\PhpSecLib->connect() at phar://C:/wamp/www/XXX/deployer.phar/recipe/common.php:105\n {closure}() at n/a:n/a\n call_user_func() at phar://C:/wamp/www/XXX/deployer.phar/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar://C:/wamp/www/XXX/deployer.phar/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar://C:/wamp/www/XXX/deployer.phar/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar://C:/wamp/www/XXX/deployer.phar/vendor/symfony/console/Command/Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at phar://C:/wamp/www/XXX/deployer.phar/vendor/symfony/console/Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at phar://C:/wamp/www/XXX/deployer.phar/vendor/symfony/console/Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at phar://C:/wamp/www/XXX/deployer.phar/vendor/symfony/console/Application.php:117\n Symfony\\Component\\Console\\Application->run() at phar://C:/wamp/www/XXX/deployer.phar/src/Deployer.php:101\n Deployer\\Deployer->run() at phar://C:/wamp/www/XXX/deployer.phar/bin/dep:63\n require() at C:\\wamp\\www\\XXX\\deployer.phar:4\n\ndeploy [-p|--parallel]\n```\n @oanhnn \n\nNew error\n\n```\nWarning: ssh2_connect(): Unable to connect to XX.XX.XX.XXX on port 22 in phar://C:/wamp/www/XXX/deployer.phar/vendor/herzult/php-ssh/src/Ssh/Session.php on line 153\n\nWarning: ssh2_connect(): Unable to connect to XX.XX.XX.XXX in phar://C:/wamp/www/XXX/deployer.phar/vendor/herzult/php-ssh/src/Ssh/Session.php on line 153\n\n  Shell on your server is not POSIX-compliant. Please change to sh, bash or similar.\n  Usually, you can change your shell to bash by running: chsh -s /bin/bash\n\n  [RuntimeException]\n  The SSH connection failed.\n```\n @oanhnn any help on this ?\n > Shell on your server is not POSIX-compliant. Please change to sh, bash or similar.\n>   Usually, you can change your shell to bash by running: chsh -s /bin/bash\n @elfet I used the command above, and `echo $SHELL` on my server returns `/bin/bash` but I still have the same error.\nIf it helps, I'm using the `deployer.phar` on a Windows 7 machine. My `php_ssh2` extension is active.\n @oanhnn here it is again, I don't see what could be wrong in it.\n\n```\nHost XX.XX.XX.XXX\n    Hostname XX.XX.XX.XXX\n    IdentityFile ~/.ssh/key.ppk\n    ProxyCommand connect -H YY.YY.YY.YYY:8080 %h 443\n    ForwardAgent yes\n```\n Not cool that you closed the issue, it's not solved at all...\n  What's with styleci?\n Yeah, PH for StyleCI\n Ok!\n OK!\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug, |\n| Deployer Version | 3.3.0 |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nThe `revison` option (1fc4edc771fb660c90b8270a7ae2edaa05e92fcf)  pass to deployer script is never checked in `deploy:update_code` task because the `tag` InputOption object (`input()->hasOption('tag')`) always exists (with `null` default value).\n### Content of `deploy.php`\n\n``` php\n<?php\nrequire 'recipe/common.php';\n\ntask('hasOption', function () {\n\n    // See 1fc4edc771fb660c90b8270a7ae2edaa05e92fcf commit\n    if (input()->hasOption('tag')) {\n        $tag = input()->getOption('tag');\n    } elseif (input()->hasOption('revision')) {\n        $revision = input()->getOption('revision');\n    }\n\n    $at = '';\n    if (!empty($revision)) {\n        $at = $revision;\n    } else if (!empty($tag)) {\n        $at = $tag;\n    } elseif (!empty($branch)) {\n        $at = $branch;\n    }\n\n    writeln(\"<info>The value is \" . (empty($at)?'EMPTY':$at) . \" when it should be \" . input()->getOption('revision') . \"</info>\");\n});\n\ntask('test', [\n    'hasOption',\n]);\n```\n### Output log\n\nphp deployer.phar test --revision=1fc4edc771fb660c90b8270a7ae2edaa05e92fcf -vvv\n\u27a4 Executing task hasOption\n\u21b3 on [localhost]\nThe value is EMPTY when it should be 1fc4edc771fb660c90b8270a7ae2edaa05e92fcf\n\u2022 done on [localhost]\n\u2714 Ok [1ms]\n This bug should be also fixed in the 4.x branch, no ?\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n\nHello oanhnn, in your anwser  https://github.com/deployphp/deployer/issues/670#issuecomment-222036421  you comment the load of the *.yml file.\nThat means that in 3.x version we must use *.php files? Or it's only for my proposal of creation of dinamic values.\n\nThanks\n\nOskar\n What is ylm?\n Sorry , my mistake. I want to say  *.yml files\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug, Question |\n| Deployer Version | N/A |\n| Local Machine OS | Windows |\n| Remote Machine OS | Ubuntu 14 |\n### Description\n\nI installed deployer using composer in my windows system. I dont why this error is coming up.\n### Content of `deploy.php`\n\n``` php\nrequire 'vendor/deployer/deployer/recipe/laravel.php';\n\n\n// Define a server for deployment.\n// Let's name it \"prod\" and use port 22.\nserver('prod', '192.168.78.128', 22)\n    ->user('ubuntu')\n    ->password('pass')\n    ->stage('production')\n    ->forwardAgent()    \n    ->env('deploy_path', '/var/www/html'); // Define the base path to deploy your project to.\n```\n### Output log\n\n```\nException trace:\n () at E:\\wamp\\www\\projects\\laravel\\dev-autodeployment\\trunk\\autodeploy\\vendor\\symfony\\console\\Application.php:512\n Symfony\\Component\\Console\\Application->find() at E:\\wamp\\www\\projects\\laravel\\dev-autodeployment\\trunk\\autodeploy\\vendor\\symfony\\console\\Application.php:183\n Symfony\\Component\\Console\\Application->doRun() at E:\\wamp\\www\\projects\\laravel\\dev-autodeployment\\trunk\\autodeploy\\vendor\\symfony\\console\\Application.php:117\n Symfony\\Component\\Console\\Application->run() at E:\\wamp\\www\\projects\\laravel\\dev-autodeployment\\trunk\\autodeploy\\vendor\\deployer\\deployer\\src\\Deployer.php:101\n Deployer\\Deployer->run() at E:\\wamp\\www\\projects\\laravel\\dev-autodeployment\\trunk\\autodeploy\\vendor\\deployer\\deployer\\bin\\dep:64\n\n```\n\n_Edited by OanhNN_\n Please, see https://github.com/deployphp/deployer/blob/master/CONTRIBUTING.md\n Ohh I am sorry. \n\nPhp version 5.6\nDeployer version \nTarget os: Ubuntu 14. I am installing and using deployed from windows based system and mostly using wamp. I want to transfer my code files from repo to online server. And perform some post deploy task.\n\nSent from my iPhone\n\n> On 27-May-2016, at 6:55 PM, Anton Medvedev notifications@github.com wrote:\n> \n> Please, see https://github.com/deployphp/deployer/blob/master/CONTRIBUTING.md\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n\nHello, I'd like to konw if I can define in servers.yml values and use them in the deploy.php file.\n\nFor example.\n\nI want to have a diferent share folder for every envairoment, so I think that it can be define in the servers.yml like this:\n\n```\n# app/config/servers.yml\ndev:\n    host:          your-host.com\n    user:          release\n    identity_file:\n        public_key: \"~/.ssh/id_release.pub\"\n        private_key: \"~/.ssh/id_release\"\n        password: \"key-password\"\n    stage:         dev\n    deploy_path:   \"/var/www\"\n    branch:        dev\n    share_dir: /drupal/sites/dev.wadus.com/files\n\nprod:\n    host:          your-host.com\n    user:          release\n    identity_file:\n        public_key: \"~/.ssh/id_release.pub\"\n        private_key: \"~/.ssh/id_release\"\n        password: \"key-password\"\n    stage:         prod\n    deploy_path:   \"/var/www\"\n    branch:        master\n    share_dir: /drupal/sites/www.wadus.com/files\n\n```\n\nAnd use it like this:\n\n```\nset('shared_dirs', [env(server.share_dir)]);\n```\n ``` php\nenv('var', function () {...});\n```\n Thanks.\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | 3.3.0 |\n| Local Machine OS | Win7 x64 |\n| Remote Machine OS | N/A |\n### Description\n\nFatal error: Cannot redeclare env() (previously declared in C:\\xampp\\htdocs\\private-api\\app_information_services\\vendor\\cakephp\\cakephp\\src\\Core\\functions.php\n82) in C:\\xampp\\htdocs\\private-api\\app_information_services\\vendor\\deployer\\deployer\\src\\functions.php on line 579\n### Steps to reproduce\n\nI just ran dep command and this shows up. It seems that cakephp has also env-method defined  ( https://github.com/cakephp/cakephp/blob/master/src/Core/functions.php#L182 )\n\nComposer autoloader will cause cakephp functions.php to load.\n### Content of `deploy.php`\n\n``` php\n\nrequire 'paths.php';\nrequire ROOT . DS . 'vendor/deployer/deployer/recipe/composer.php';\n\ntry {\n    $dotenv = new \\Dotenv\\Dotenv(ROOT);\n    $dotenv->overload();\n} catch (\\Dotenv\\Exception\\InvalidPathException $e) {\n    die($e);\n}\n\nserver('test', getenv('TEST_SERVER_HOST'), 22)\n    ->user(getenv('TEST_SERVER_USERNAME'))\n    ->password(null)\n    ->stage('test')\n    ->env('deploy_path', getenv('TEST_SERVER_DEPLOY_PATH'));\n\nserver('production', getenv('PRODUCTION_SERVER_HOST'), 22)\n    ->user(getenv('PRODUCTION_SERVER_USERNAME'))\n    ->password(null)\n    ->stage('production')\n    ->env('deploy_path', getenv('PRODUCTION_SERVER_DEPLOY_PATH'));\n\nset('repository', getenv('MY_REPO'));\n\ntask('reload:httpd', function () {\n    run('sudo -S /sbin/service httpd reload');\n});\n\nafter('deploy', 'reload:httpd');\nafter('rollback', 'reload:httpd');\n```\n### Output log\n\n_With enabled option for verbose output `-vvv`._\n\nNo output available.\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | 3.3.0 |\n| Local Machine OS | Windows 10 |\n| Remote Machine OS | N/A |\n### Description\n\nI have tried all of your test methods on https://github.com/deployphp/deployer/issues/300#issuecomment-105711471.\nIt's ok to connect to remote server via ssh, but when I use `./deployer deploy -vvv stg` command, it always didn't work although used identity_file or forward_agent or both or none of both.\nI don't use password for private_key or server.\n\n```\n$ ssh xxxxx@xxxxx.com.br\nLast login: Wed May 25 11:22:26 2016 from xxxxxxxx\n[xxxxx@xxxxxxxx ~]$\n```\n### Steps to reproduce\n### Content of `~/.ssh/config`\n\n```\nHost xxxxx.com.br\n  ForwardAgent yes\n```\n### Content of `~/.profile`\n\n```\n#! /bin/bash \neval `ssh-agent -s` \nssh-add ~/.ssh/id_rsa\n```\n### Content of `servers.yml`\n\n```\nstg:\n  host: xxxxx.com.br\n  user: xxxxx\n  #identity_file: \n  #  public_key:  ~/.ssh/id_rsa.pub\n  #  private_key: ~/.ssh/id_rsa\n  forward_agent: ~\n  stage: stage\n  branch: develop\n  deploy_path: /var/www/html/xxxxxx.com.br/web\n```\n### Content of `deploy.php`\n\n``` php\n<?php\nrequire 'recipe/common.php';\n\nserverList('servers.yml');\n\nset('repository', 'xxxx@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.git');\nset('keep_releases', 5);\n\ntask('deploy:update_code_without_recursive', function () {\n  $repository = get('repository');\n  $branch = env('branch');\n  $gitCache = env('git_cache');\n  $depth = $gitCache ? '' : '--depth 1';\n  if (input()->hasOption('tag')) {\n    $tag = input()->getOption('tag');\n  }\n  $at = '';\n  if (!empty($tag)) {\n    $at = \"-b $tag\";\n  } elseif (!empty($branch)) {\n    $at = \"-b $branch\";\n  }\n  $releases = env('releases_list');\n  if ($gitCache && isset($releases[1])) {\n    try {\n      run(\"git clone $at -q --reference {{deploy_path}}/releases/{$releases[1]} --dissociate $repository  {{release_path}} 2>&1\");\n    } catch (RuntimeException $exc) {\n      run(\"git clone $at -q $repository {{release_path}} 2>&1\");\n    }\n  } else {\n    run(\"git clone $at $depth -q $repository {{release_path}} 2>&1\");\n  }\n})->desc('Updating code');\n\ntask('deploy', [\n  'deploy:prepare',\n  'deploy:release',\n  'deploy:update_code_without_recursive',\n  'deploy:vendors',\n  'deploy:symlink',\n  'cleanup',\n])->desc('Deploy your project');\nafter('deploy', 'success');\n```\n### Output log\n\n_With enabled option for verbose output `-vvv`._\n\n```\n$ ./deployer deploy -vvv stg\n\u27a4 Executing task deploy:prepare\n\u21b3 on [stg]\n\n\n  [RuntimeException]\n  Unable to login with the provided credentials.\n\n\nException trace:\n () at phar:/path_to_file/deploy/deployer/src/Server/Remote/PhpSecLib.php:99\n Deployer\\Server\\Remote\\PhpSecLib->connect() at phar:/path_to_file/deploy/deployer/recipe/common.php:105\n {closure}() at n/a:n/a\n call_user_func() at phar:/path_to_file/deploy/deployer/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar:/path_to_file/deploy/deployer/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar:/path_to_file/deploy/deployer/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar:/path_to_file/deploy/deployer/vendor/symfony/console/Command/Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at phar:/path_to_file/deploy/deployer/vendor/symfony/console/Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:/path_to_file/deploy/deployer/vendor/symfony/console/Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at phar:/path_to_file/deploy/deployer/vendor/symfony/console/Application.php:117\n Symfony\\Component\\Console\\Application->run() at phar:/path_to_file/deploy/deployer/src/Deployer.php:101\n Deployer\\Deployer->run() at phar:/path_to_file/deploy/deployer/bin/dep:63\n require() at path_to_file\\deploy\\deployer:4\n\ndeploy [-p|--parallel]\n\n```\n\nPlease help me.\n I had similar problems when using a password protected keyfile. Something like interactive password input would be super nice in that case, because if you work on a project with different team members hardcoding a password into the deployment file feels strange.\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | https://github.com/deployphp/deployer/issues/658 & https://github.com/deployphp/deployer/issues/394 ?? |\n\nI've developed a simple logging system and an email notify system, using monolog for both.\nI'm able to decide if I want one or another, or both, setting it's parameters in my deploy.php file.\n\nThe logger function expects 2 parameters, the name we want to set to the project inside the log, and the path for the log. Both are mandatory\n\nThe emailer function expects 2 parameters, the name we want to set to the project inside the log, and the email address ( or addresses in an array ) where we want to send notifications. There are 3 extra methods to configure 'from' address, the subject and the minimum logging level, based in RFC 5424, when the email will be  sent. This extra methods are optional.\n\nIt's not a big implementation, just to cover my needs.\n\n```\nlogger('project_name', 'log_path');\n\nemailer('project_name', 'email@example.com')\n    ->from('from@example.com')\n    ->subject('Error deploying!')\n    ->level(400);\n```\n\nHope this can help someone with their deploy control.\n Log functionality is very important and will be in Deployer for sure. But why do you need email? \n In fact what I needed was a notification by mail when an error occurs, because I'm deploying from cron. When I was working on it I realised that I needed some kind of logs to see what happened, and I changed from a mailing system to a log system, taking profit of Monolog's mailing feature.\n\nIf you have any improvement or change, tell me and I will try to do it.\n For Logging better to use PSR-3 interface instead of strong coupling with Monolog. Monolog implements PSR-3 and we can easy use it as logger by default,  but user also should be able to customize logger via configuration, e.g. if i want to use my own logger which implements PSR-3.\n I'm doing a new logging system, with all your requirements.\n Also there no need for separate logger function. You can use set function:\n\n``` php\nset('log', './deploy.log');\n```\n I was thinking in something like that:\n\n```\n//functions.php\nfunction logger($name, $value)\n{\n    $deployer = Deployer::get();\n\n    if ($value instanceof \\Closure) {\n        $deployer->setLogger(call_user_func($value));\n    }\n    elseif (is_string($value)) {\n        $logger = new Monolog\\Logger($name);\n        $logger->pushHandler(new \\Monolog\\Handler\\StreamHandler($value));\n        $deployer->setLogger($logger);\n    }\n    else {\n        throw new InvalidArgumentException('Log should be a logger object or the name and path for the default log.');\n    }\n}\n```\n\nHere the user has two options, the \"easy\" one where he can write only a name and a path and deployer will use Monolog, and the \"pro\" where the user can configure his own logger configuration.\n\nFor example:\n\n```\n//deploy.php\nlogger('deploy',function(){\n    $logger = new Monolog\\Logger('deploy');\n    $logger->pushHandler(new \\Monolog\\Handler\\ErrorLogHandler());\n\n    return $logger;\n});\n```\n\nWhat do you think about that? Perhaps we can set only one parameter that would be the path, or the logger object, and put a default name to the log entry.\n Using this \"configurable\" option I could use the email notiication system embedded in Monolog, that is what I need and wanted to do at first :-)\n One more question, do you want to log -vvv every deploy, or you want to log output console only?\n @dimoniet, do you finished this implementation?\nI need to log all the tasks...\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n\nIf you already have a copy of composer.phar in {{release_path}} Deployer downloads a new copy instead of using the existing file.  This pull request adds a check so it will use that local copy.  \n  This essentially fixes #649, looks \ud83d\udc4d  to me.\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | `master` |\n| Local Machine OS | Ubunut 14.04 LTS |\n| Remote Machine OS | N/A |\n### Description\n\nI'm using deployer with identity files to authenticate to the remote hosts, which works as expected. I don't get asked for a password, when deploying. Now that I want to exclude the servers configuration to a yaml file as described in the documentation, I get asked for a password when running `$ deb deploy \u2026`. The deploy process continues independent of what I type in as password. \n\nI would expect that I don't get asked for a password as I don't get ask with the default way of configuring the server.\n### Steps to reproduce\n\nSee below\n### Content of `deploy.php`\n\nThis is the basic `deploy.php` with server directly defined: \n\n``` php\n<?php\nrequire 'recipe/composer.php';\n\nset( 'repository', 'git@bitbucket.org:vendor/project.git' );\nenv( 'release_name', date( 'Y-m-d-H-i-s' ) );\nset('keep_releases', 3);\n\nset( 'shared_files', [ '.env', 'robots.txt' ] );\nset( 'shared_dirs', [ 'wp-content/uploads' ] );\n\nenv('composer_options', 'install --no-dev --verbose --prefer-dist --optimize-autoloader --no-progress --no-interaction');\n\nserver( 'testing.vendor', 'myhost.de', 22 )\n    ->user( 'xxxxxx' )\n    ->identityFile( '~/.ssh/id_rsa.pub', '~/.ssh/id_rsa' )\n    ->env( 'deploy_path', '/var/www/project' )\n    ->env( 'branch', 'master' );\n```\n\nThis is the `deploy.php` with the included `servers.yml`:\n\n``` php\n<?php\nrequire 'recipe/composer.php';\n\nset( 'repository', 'git@bitbucket.org:vendor/project.git' );\nenv( 'release_name', date( 'Y-m-d-H-i-s' ) );\nset('keep_releases', 3);\n\nset( 'shared_files', [ '.env', 'robots.txt' ] );\nset( 'shared_dirs', [ 'wp-content/uploads' ] );\n\nenv('composer_options', 'install --no-dev --verbose --prefer-dist --optimize-autoloader --no-progress --no-interaction');\n\n$server_config = __DIR__ . '/deploy-servers.yml';\n\nserverList( $server_config );\n```\n\nContent of `servers.yml`:\n\n``` yaml\ntesting.vendor:\n  host: myhost.de\n  port: 22\n  user: xxxxxx\n  identity_file:\n    public_key: ~/.ssh/id_rsa.pub\n    private_key: ~/.ssh/id_rsa\n  deploy_path: /var/www/project\n  branch: master\n```\n### Output log\n\nOutput for server defined in `deploy.php`\n\n```\n$ wp-content/vendor/bin/dep deploy testing.vendor -vvv\n\u27a4 Executing task deploy:prepare\n\u21b3 on [testing.vendor]\n> echo $0\n< bash\n< \n> if [ ! -d /var/www/... ]; then mkdir -p /var/www/...; fi\n> if [ ! -L /var/www/... ] && [ -d /var/www/... ]; then echo true; fi\n> cd /var/www/... && if [ ! -d releases ]; then mkdir releases; fi\n> cd /var/www/... && if [ ! -d shared ]; then mkdir shared; fi\n\u2022 done on [testing.vendor]\n\u2714 Ok [784ms]\n```\n\nOutput for server defined in `servers.yml`:\n\n```\n$ wp-content/vendor/bin/dep deploy testing.vendor -vvv\n\u27a4 Executing task deploy:prepare\n\u21b3 on [testing.vendor]\n[xxxxx@myhost.de] Password:\n> echo $0\n< bash\n< \n> if [ ! -d /var/www/... ]; then mkdir -p /var/www/...; fi\n> if [ ! -L /var/www/... ] && [ -d /var/www... ]; then echo true; fi\n> cd /var/www/... && if [ ! -d releases ]; then mkdir releases; fi\n> cd /home/www/... && if [ ! -d shared ]; then mkdir shared; fi\n\u2022 done on [testing.vendor]\n\u2714 Ok [3s 390ms]\n...\n```\n I tested both, with (an empty) and without password:\n\n```\ntesting.vendor:\n  host: myhost.de\n  port: 22\n  user: xxxxxx\n  identity_file:\n    public_key: ~/.ssh/id_rsa_vendor.pub\n    private_key: ~/.ssh/id_rsa_vendor\n    password:\n  deploy_path: /var/www/...\n  branch: master\n```\n\nI think that when I'm using the `servers.yml` the behavior is always to ask for the key passphrase whether the key is already unlocked in the current user session or not.\n\nIf I start direct with the `servers.yml` as config, I always have to use the correct pass-phrase for the key to work.\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nI noticed files are created under the account you use for authentication, but I need the files to have specific user/group, not same as SSH account. What is the best way to do this with Deployer?\n If someone else gets stuck a quick workaround for this is to write a custom task, for example:\n\n``` php\ntask('deploy:owner', function () {\n  run('chown -R www-data:www-data /var/www/site');\n});\n```\n\nSomething built-in would be nice though, it's a very common feature.\n What about writable?\n @elfet I assume that chmods the files to be writable? I'm currently deploying a WordPress project and it doesn't play nice if the files are not owned by the web server process... The workaround task I have works well so you can consider adding native chown-capabilities a feature request!\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | 3.2.1 |\n| Local Machine OS | OSX Yosemite |\n| Remote Machine OS | Ubuntu 14.04 |\n### Description\n\nUsing SSH key auth. For some reason when you use `->identityFile()` you get an error when connecting about auth failing (see below).\n\n**However** if you add `->forwardAgent()` it starts working. Of course the key has been added on the remote and regular ssh command works. \n### Steps to reproduce\n\nRun any `dep` command.\n### Content of `deploy.php`\n\n``` php\n<?php\nrequire 'recipe/common.php';\n\n// Set configurations\nset('repository', 'ssh://hello@server:1234/khromov/tedx.git');\nset('shared_files', []);\nset('shared_dirs', []);\nset('writable_dirs', []);\n\n// Configure servers\nserver('production', 'server1')\n  ->user('root')\n  ->identityFile()\n  //->forwardAgent()\n  ->env('deploy_path', '/var/www/tedx/htdocs');\n\n/**\n * Main task\n */\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:symlink',\n    'cleanup',\n])->desc('Deploy your project');\n\nafter('deploy', 'success');\n```\n### Output log\n\n```\n\u279c  tedx git:(master) \u2717 ./dep current -vvv\n\u27a4 Executing task current\n\u21b3 on [production]\n> cd /var/www/tedx/htdocs && readlink /var/www/tedx/htdocs/current\n\n  [RuntimeException]                              \n  Unable to login with the provided credentials.  \n\n\nException trace:\n () at phar:///Users/stakhr/VVV/www/tedx/dep/src/Server/Remote/PhpSecLib.php:89\n Deployer\\Server\\Remote\\PhpSecLib->connect() at phar:///Users/stakhr/VVV/www/tedx/dep/src/Server/Remote/PhpSecLib.php:99\n Deployer\\Server\\Remote\\PhpSecLib->checkConnection() at phar:///Users/stakhr/VVV/www/tedx/dep/src/Server/Remote/PhpSecLib.php:108\n Deployer\\Server\\Remote\\PhpSecLib->run() at phar:///Users/stakhr/VVV/www/tedx/dep/src/functions.php:296\n run() at phar:///Users/stakhr/VVV/www/tedx/dep/recipe/common.php:397\n {closure}() at n/a:n/a\n call_user_func() at phar:///Users/stakhr/VVV/www/tedx/dep/src/Server/Environment.php:101\n Deployer\\Server\\Environment->get() at phar:///Users/stakhr/VVV/www/tedx/dep/src/functions.php:573\n env() at phar:///Users/stakhr/VVV/www/tedx/dep/recipe/common.php:404\n {closure}() at n/a:n/a\n call_user_func() at phar:///Users/stakhr/VVV/www/tedx/dep/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar:///Users/stakhr/VVV/www/tedx/dep/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar:///Users/stakhr/VVV/www/tedx/dep/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar:///Users/stakhr/VVV/www/tedx/dep/vendor/symfony/console/Command/Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///Users/stakhr/VVV/www/tedx/dep/vendor/symfony/console/Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///Users/stakhr/VVV/www/tedx/dep/vendor/symfony/console/Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at phar:///Users/stakhr/VVV/www/tedx/dep/vendor/symfony/console/Application.php:117\n Symfony\\Component\\Console\\Application->run() at phar:///Users/stakhr/VVV/www/tedx/dep/src/Deployer.php:101\n Deployer\\Deployer->run() at phar:///Users/stakhr/VVV/www/tedx/dep/bin/dep:63\n require() at /Users/stakhr/VVV/www/tedx/dep:4\n\ncurrent [-p|--parallel]\n\n```\n The output differs slightly depending on the command but it looks like the same key is used? @oanhnn Does the debug log below give any insight into the problem?\n\nWithout agent forwarding:  \n\n```\n\u279c  tedx git:(master) \u2717 ssh -i /Users/stakhr/.ssh/id_rsa -v root@s1.site.com\nOpenSSH_6.2p2, OSSLShim 0.9.8r 8 Dec 2011\ndebug1: Reading configuration data /etc/ssh_config\ndebug1: /etc/ssh_config line 20: Applying options for *\ndebug1: Connecting to s1.site.com [1.2.3.4] port 22.\ndebug1: Connection established.\ndebug1: identity file /Users/stakhr/.ssh/id_rsa type 1\ndebug1: identity file /Users/stakhr/.ssh/id_rsa-cert type -1\ndebug1: Enabling compatibility mode for protocol 2.0\ndebug1: Local version string SSH-2.0-OpenSSH_6.2\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_6.6.1p1 Ubuntu-2ubuntu2.7\ndebug1: match: OpenSSH_6.6.1p1 Ubuntu-2ubuntu2.7 pat OpenSSH*\ndebug1: SSH2_MSG_KEXINIT sent\ndebug1: SSH2_MSG_KEXINIT received\ndebug1: kex: server->client aes128-ctr hmac-md5-etm@openssh.com none\ndebug1: kex: client->server aes128-ctr hmac-md5-etm@openssh.com none\ndebug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent\ndebug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP\ndebug1: SSH2_MSG_KEX_DH_GEX_INIT sent\ndebug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY\ndebug1: Server host key: RSA 35:f8:d1:b0:6e:be:1e:6c:90:ec:fe:6c:49:5d:14:e8\ndebug1: Host 's1.site.com' is known and matches the RSA host key.\ndebug1: Found key in /Users/stakhr/.ssh/known_hosts:53\ndebug1: ssh_rsa_verify: signature correct\ndebug1: SSH2_MSG_NEWKEYS sent\ndebug1: expecting SSH2_MSG_NEWKEYS\ndebug1: SSH2_MSG_NEWKEYS received\ndebug1: SSH2_MSG_SERVICE_REQUEST sent\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\ndebug1: Authentications that can continue: publickey,password\ndebug1: Next authentication method: publickey\ndebug1: Offering RSA public key: /Users/stakhr/.ssh/id_rsa\ndebug1: Server accepts key: pkalg ssh-rsa blen 279\ndebug1: Authentication succeeded (publickey).\nAuthenticated to s1.site.com ([1.2.3.4]:22).\ndebug1: channel 0: new [client-session]\ndebug1: Requesting no-more-sessions@openssh.com\ndebug1: Entering interactive session.\ndebug1: Sending environment.\ndebug1: Sending env LC_CTYPE = UTF-8\n```\n\nWith agent forwarding:  \n\n```\n\u279c  tedx git:(master) \u2717 ssh -A -v root@s1.site.com\nOpenSSH_6.2p2, OSSLShim 0.9.8r 8 Dec 2011\ndebug1: Reading configuration data /etc/ssh_config\ndebug1: /etc/ssh_config line 20: Applying options for *\ndebug1: Connecting to s1.site.com [1.2.3.4] port 22.\ndebug1: Connection established.\ndebug1: identity file /Users/stakhr/.ssh/id_rsa type 1\ndebug1: identity file /Users/stakhr/.ssh/id_rsa-cert type -1\ndebug1: identity file /Users/stakhr/.ssh/id_dsa type -1\ndebug1: identity file /Users/stakhr/.ssh/id_dsa-cert type -1\ndebug1: Enabling compatibility mode for protocol 2.0\ndebug1: Local version string SSH-2.0-OpenSSH_6.2\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_6.6.1p1 Ubuntu-2ubuntu2.7\ndebug1: match: OpenSSH_6.6.1p1 Ubuntu-2ubuntu2.7 pat OpenSSH*\ndebug1: SSH2_MSG_KEXINIT sent\ndebug1: SSH2_MSG_KEXINIT received\ndebug1: kex: server->client aes128-ctr hmac-md5-etm@openssh.com none\ndebug1: kex: client->server aes128-ctr hmac-md5-etm@openssh.com none\ndebug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent\ndebug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP\ndebug1: SSH2_MSG_KEX_DH_GEX_INIT sent\ndebug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY\ndebug1: Server host key: RSA 35:f8:d1:b0:6e:be:1e:6c:90:ec:fe:6c:49:5d:14:e8\ndebug1: Host 's1.site.com' is known and matches the RSA host key.\ndebug1: Found key in /Users/stakhr/.ssh/known_hosts:53\ndebug1: ssh_rsa_verify: signature correct\ndebug1: SSH2_MSG_NEWKEYS sent\ndebug1: expecting SSH2_MSG_NEWKEYS\ndebug1: SSH2_MSG_NEWKEYS received\ndebug1: SSH2_MSG_SERVICE_REQUEST sent\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\ndebug1: Authentications that can continue: publickey,password\ndebug1: Next authentication method: publickey\ndebug1: Offering RSA public key: /Users/stakhr/.ssh/id_rsa\ndebug1: Server accepts key: pkalg ssh-rsa blen 279\ndebug1: Authentication succeeded (publickey).\nAuthenticated to s1.site.com ([1.2.3.4]:22).\ndebug1: channel 0: new [client-session]\ndebug1: Requesting no-more-sessions@openssh.com\ndebug1: Entering interactive session.\ndebug1: Requesting authentication agent forwarding.\ndebug1: Sending environment.\ndebug1: Sending env LC_CTYPE = UTF-8\n\n```\n Any news on this?\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | Deployer version 3.2.1 |\n| Local Machine OS | linux mint 17 with PHP 5.6.21-1+donate.sury.org~trusty+4 (cli) |\n| Remote Machine OS | Debian 8 with PHP 5.6.19-0+deb8u1 (cli) (built: Mar 14 2016 10:22:33) |\n### Description\n\nWhen I try to deploy a remote repository I get a  [RuntimeException]\nThis issues come from: https://github.com/deployphp/deployer/issues/651\n### Steps to reproduce\n\nI have configured my ~/.ssh/config file:\n`\nHost xx.xxx.xx.xx\n ForwardAgent yes\n`\n\nI add my file to forward with:\n`ssh-add ~/.ssh/oskarcalvo`\n\nI add PHP SSH2 extension to deploy.php file.\nFirst I add the files to the project: `composer require deployer/deployer herzult/php-ssh`\nThem I load the new options in deploy.php\n\n``` php\nrequire 'vendor/autoload.php';\nset('ssh_type', 'ext-ssh2');\n```\n\nI don't change nothing from my remote server because Debian 8 doesn't have the line #AllowAgentForwarding yes in her file /etc/ssh/sshd_config\n### Content of `deploy.php`\n\n``` php\n<?php\n/*\n * This file has been generated automatically.\n * Please change the configuration for correct use deploy.\n */\n\nrequire 'recipe/common.php';\nrequire 'vendor/autoload.php';\n\n// Set configurations\nset('repository', 'git@domain.com:username/repository.git');\nset('shared_files', ['drupal/sites/geem.t4dos.com/settings.php']);\nset('shared_dirs', ['drupal/sites/geem.t4dos.com/files']);\nset('writable_dirs', ['drupal/sites/geem.t4dos.com/files']);\nset('ssh_type', 'ext-ssh2');\n\n// Configure servers\nserver('production', 'xx.xxx.xx.xx', 22)\n    ->forwardAgent()\n    ->user('deployer')\n    ->password(null)\n    ->forwardAgent()\n    ->stage('production')\n    ->env('branch', 'master')\n    ->env('deploy_path', '/var/www/html/geem');\n/*\nserver('beta', 'beta.domain.com')\n    ->user('username')\n    ->password()\n    ->env('deploy_path', '/var/www/beta.domain.com');\n*/\n\n/**\n * Restart Apache2 on success deploy.\n */\ntask('apache:restart', function () {\n    // Attention: The user must have rights for restart service\n    // Attention: the command \"sudo /bin/systemctl restart php-fpm.service\" used only on CentOS system\n    // /etc/sudoers: username ALL=NOPASSWD:/bin/systemctl restart php-fpm.service\n    run('sudo service apache2 restart');\n})->desc('Restart Apache2 service');\n\nafter('success', 'apache:restart');\n\n/**\n * Main task\n */\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:symlink',\n    'cleanup',\n])->desc('Deploy your project');\n\nafter('deploy', 'success');\n```\n### Output log\n\n_With enabled option for verbose output `-vvv`._\n\n`\noem FSW-GEMM (master) $ dep deploy production -vvv\n\u27a4 Executing task deploy:prepare\n\u21b3 on [production]\n\n> echo $0\n> < bash\n> < \n> if [ ! -d /var/www/html/geem ]; then mkdir -p /var/www/html/geem; fi\n> if [ ! -L /var/www/html/geem/current ] && [ -d /var/www/html/geem/current ]; then echo true; fi\n> cd /var/www/html/geem && if [ ! -d releases ]; then mkdir releases; fi\n> cd /var/www/html/geem && if [ ! -d shared ]; then mkdir shared; fi\n> \u2022 done on [production]\n> \u2714 Ok [2s 125ms]\n> \u27a4 Executing task deploy:release\n> \u21b3 on [production]\n> mkdir /var/www/html/geem/releases/20160516193639\n> cd /var/www/html/geem && if [ -h release ]; then rm release; fi\n> ln -s /var/www/html/geem/releases/20160516193639 /var/www/html/geem/release\n> \u2022 done on [production]\n> \u2714 Ok [710ms]\n> \u27a4 Executing task deploy:update_code\n> \u21b3 on [production]\n> which git\n> < /usr/bin/git\n> < \n> git version\n> < git version 2.1.4\n> < \n> find /var/www/html/geem/releases -maxdepth 1 -mindepth 1 -type d\n> < /var/www/html/geem/releases/20160516020306\n> < /var/www/html/geem/releases/20160516193639\n> < \n> readlink /var/www/html/geem/release\n> < /var/www/html/geem/releases/20160516193639\n> < \n> /usr/bin/git clone -b master --depth 1 --recursive -q git@github.com:oskarcalvo/FSW-GEMM.git /var/www/html/geem/releases/20160516193639 2>&1\n\n  [RuntimeException]  \n\nException trace:\n () at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Exec.php:32\n Ssh\\Exec->run() at phar:///usr/local/bin/dep/src/Server/Remote/SshExtension.php:116\n Deployer\\Server\\Remote\\SshExtension->run() at phar:///usr/local/bin/dep/src/functions.php:296\n run() at phar:///usr/local/bin/dep/recipe/common.php:206\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:117\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:101\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:63\n require() at /usr/local/bin/dep:4\n\ndeploy [-p|--parallel]\n\n`\n Thanks @oanhnn.\nFirst I have try in my remote server this:\n\n```\ndeployer .ssh $ ssh -T git@github.com\nWarning: Permanently added the RSA host key for IP address '192.30.252.122' to the list of known hosts.\nHi oskarcalvo! You've successfully authenticated, but GitHub does not provide shell access.\ndeployer .ssh $\n```\n\nAlso I try:\n\n```\ndeployer .ssh $ ssh -vT git@github.com\nOpenSSH_6.7p1 Debian-5+deb8u1, OpenSSL 1.0.1k 8 Jan 2015\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\ndebug1: Connecting to github.com [192.30.252.122] port 22.\ndebug1: Connection established.\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/deployer/.ssh/id_rsa type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/deployer/.ssh/id_rsa-cert type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/deployer/.ssh/id_dsa type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/deployer/.ssh/id_dsa-cert type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/deployer/.ssh/id_ecdsa type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/deployer/.ssh/id_ecdsa-cert type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/deployer/.ssh/id_ed25519 type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/deployer/.ssh/id_ed25519-cert type -1\ndebug1: Enabling compatibility mode for protocol 2.0\ndebug1: Local version string SSH-2.0-OpenSSH_6.7p1 Debian-5+deb8u1\ndebug1: Remote protocol version 2.0, remote software version libssh-0.7.0\ndebug1: no match: libssh-0.7.0\ndebug1: SSH2_MSG_KEXINIT sent\ndebug1: SSH2_MSG_KEXINIT received\ndebug1: kex: server->client aes128-ctr hmac-sha2-256 none\ndebug1: kex: client->server aes128-ctr hmac-sha2-256 none\ndebug1: sending SSH2_MSG_KEX_ECDH_INIT\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\ndebug1: Server host key: RSA 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48\ndebug1: Host 'github.com' is known and matches the RSA host key.\ndebug1: Found key in /home/deployer/.ssh/known_hosts:1\ndebug1: SSH2_MSG_NEWKEYS sent\ndebug1: expecting SSH2_MSG_NEWKEYS\ndebug1: SSH2_MSG_NEWKEYS received\ndebug1: SSH2_MSG_SERVICE_REQUEST sent\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\ndebug1: Authentications that can continue: publickey\ndebug1: Next authentication method: publickey\ndebug1: Offering RSA public key: oskarcalvo\ndebug1: Server accepts key: pkalg ssh-rsa blen 279\ndebug1: Authentication succeeded (publickey).\nAuthenticated to github.com ([192.30.252.122]:22).\ndebug1: channel 0: new [client-session]\ndebug1: Entering interactive session.\ndebug1: Requesting authentication agent forwarding.\ndebug1: Sending environment.\ndebug1: Sending env LANG = en_US.UTF-8\ndebug1: client_input_channel_req: channel 0 rtype exit-status reply 0\nHi oskarcalvo! You've successfully authenticated, but GitHub does not provide shell access.\ndebug1: channel 0: free: client-session, nchannels 1\nTransferred: sent 3328, received 1800 bytes, in 0.2 seconds\nBytes per second: sent 18851.8, received 10196.3\ndebug1: Exit status 1\n```\n\nSo, I understand that the forward Agent works fine when I connect through ssh to the server.\n\nWhen I run test task I get this:\n\n```\noem FSW-GEMM (master) $ dep test production -vvv\n\u27a4 Executing task test\n\u21b3 on [production]\n> cd /var/www/html/geem && ssh -vT git@github.com\n\n\n  [RuntimeException]                                                            \n  OpenSSH_6.7p1 Debian-5+deb8u1, OpenSSL 1.0.1k 8 Jan 2015                      \n  debug1: Reading configuration data /etc/ssh/ssh_config                        \n  debug1: /etc/ssh/ssh_config line 19: Applying options for *                   \n  debug1: Connecting to github.com [192.30.252.122] port 22.                    \n  debug1: Connection established.                                               \n  debug1: key_load_public: No such file or directory                            \n  debug1: identity file /home/deployer/.ssh/id_rsa type -1                      \n  debug1: key_load_public: No such file or directory                            \n  debug1: identity file /home/deployer/.ssh/id_rsa-cert type -1                 \n  debug1: key_load_public: No such file or directory                            \n  debug1: identity file /home/deployer/.ssh/id_dsa type -1                      \n  debug1: key_load_public: No such file or directory                            \n  debug1: identity file /home/deployer/.ssh/id_dsa-cert type -1                 \n  debug1: key_load_public: No such file or directory                            \n  debug1: identity file /home/deployer/.ssh/id_ecdsa type -1                    \n  debug1: key_load_public: No such file or directory                            \n  debug1: identity file /home/deployer/.ssh/id_ecdsa-cert type -1               \n  debug1: key_load_public: No such file or directory                            \n  debug1: identity file /home/deployer/.ssh/id_ed25519 type -1                  \n  debug1: key_load_public: No such file or directory                            \n  debug1: identity file /home/deployer/.ssh/id_ed25519-cert type -1             \n  debug1: Enabling compatibility mode for protocol 2.0                          \n  debug1: Local version string SSH-2.0-OpenSSH_6.7p1 Debian-5+deb8u1            \n  debug1: Remote protocol version 2.0, remote software version libssh-0.7.0     \n  debug1: no match: libssh-0.7.0                                                \n  debug1: SSH2_MSG_KEXINIT sent                                                 \n  debug1: SSH2_MSG_KEXINIT received                                             \n  debug1: kex: server->client aes128-ctr hmac-sha2-256 none                     \n  debug1: kex: client->server aes128-ctr hmac-sha2-256 none                     \n  debug1: sending SSH2_MSG_KEX_ECDH_INIT                                        \n  debug1: expecting SSH2_MSG_KEX_ECDH_REPLY                                     \n  debug1: Server host key: RSA 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48  \n  debug1: Host 'github.com' is known and matches the RSA host key.              \n  debug1: Found key in /home/deployer/.ssh/known_hosts:1                        \n  debug1: SSH2_MSG_NEWKEYS sent                                                 \n  debug1: expecting SSH2_MSG_NEWKEYS                                            \n  debug1: SSH2_MSG_NEWKEYS received                                             \n  debug1: SSH2_MSG_SERVICE_REQUEST sent                                         \n  debug1: SSH2_MSG_SERVICE_ACCEPT received                                      \n  debug1: Authentications that can continue: publickey                          \n  debug1: Next authentication method: publickey                                 \n  debug1: Trying private key: /home/deployer/.ssh/id_rsa                        \n  debug1: Trying private key: /home/deployer/.ssh/id_dsa                        \n  debug1: Trying private key: /home/deployer/.ssh/id_ecdsa                      \n  debug1: Trying private key: /home/deployer/.ssh/id_ed25519                    \n  debug1: No more authentication methods to try.                                \n  Permission denied (publickey).                                                \n\n\nException trace:\n () at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Exec.php:32\n Ssh\\Exec->run() at phar:///usr/local/bin/dep/src/Server/Remote/SshExtension.php:116\n Deployer\\Server\\Remote\\SshExtension->run() at phar:///usr/local/bin/dep/src/functions.php:296\n run() at /home/oem/oskar/sources/geem/project/FSW-GEMM/deploy.php:63\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:117\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:101\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:63\n require() at /usr/local/bin/dep:4\n\ntest [-p|--parallel]\n\n```\n\nThanks.\n\nOskar\n As I dit before.\nRun it locally:\n\n```\noem FSW-GEMM (master) $ ssh-add -l\n2048 71:31:98:99:2f:80:fe:4b:f0:da:b1:99:cb:9c:e2:5b oskarcalvo (RSA)\n1024 db:5c:2a:92:e9:08:38:90:c6:90:7d:81:6f:96:d5:c6 oem@oskar (DSA)\n2048 95:55:af:fa:11:e3:68:09:1a:66:37:9f:5b:03:98:cb oscar.calvo@he-cocktail.com (RSA)\n2048 71:31:98:99:2f:80:fe:4b:f0:da:b1:99:cb:9c:e2:5b oskar@labo (RSA)\n```\n\nRun it in the remote server:\n\n```\ndeployer ~ $ ssh-add -l\n2048 71:31:98:99:2f:80:fe:4b:f0:da:b1:99:cb:9c:e2:5b oskarcalvo (RSA)\n1024 db:5c:2a:92:e9:08:38:90:c6:90:7d:81:6f:96:d5:c6 oem@oskar (DSA)\n2048 95:55:af:fa:11:e3:68:09:1a:66:37:9f:5b:03:98:cb oscar.calvo@he-cocktail.com (RSA)\n2048 71:31:98:99:2f:80:fe:4b:f0:da:b1:99:cb:9c:e2:5b oskar@labo (RSA)\ndeployer ~ $ \n```\n\nAnd run the test:\n\n```\noem FSW-GEMM (master) $ dep test production -vvv\n\u27a4 Executing task test\n\u21b3 on [production]\nRun locally: ssh-add -l\n> 2048 71:31:98:99:2f:80:fe:4b:f0:da:b1:99:cb:9c:e2:5b oskarcalvo (RSA)\n1024 db:5c:2a:92:e9:08:38:90:c6:90:7d:81:6f:96:d5:c6 oem@oskar (DSA)\n2048 95:55:af:fa:11:e3:68:09:1a:66:37:9f:5b:03:98:cb oscar.calvo@he-cocktail.com (RSA)\n2048 71:31:98:99:2f:80:fe:4b:f0:da:b1:99:cb:9c:e2:5b oskar@labo (RSA)\n> cd /var/www/html/geem && ssh-add -l\n\n\n  [RuntimeException]                                         \n  Could not open a connection to your authentication agent.  \n\n\nException trace:\n () at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Exec.php:32\n Ssh\\Exec->run() at phar:///usr/local/bin/dep/src/Server/Remote/SshExtension.php:116\n Deployer\\Server\\Remote\\SshExtension->run() at phar:///usr/local/bin/dep/src/functions.php:296\n run() at /home/oem/oskar/sources/geem/project/FSW-GEMM/deploy.php:65\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:117\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:101\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:63\n require() at /usr/local/bin/dep:4\n\ntest [-p|--parallel]\n```\n\nThere are any way to debug and see where is the problem? \nI have to check method by method until I see the problem?\nThanks\n\nOskar\n I have add this to my deploy.php\n\n``` php\n// Configure servers\nserver('production', '92.222.85.85', 22)\n    //->forwardAgent()\n    ->user('deployer')\n    //->password(null)\n    ->forwardAgent()\n    ->identityFile('~/.ssh/oskarcalvo.pub', '~/.ssh/oskarcalvo', NULL)\n    ->stage('production')\n    ->env('branch', 'master')\n    ->env('deploy_path', '/var/www/html/geem');\n```\n\nAnd when I run the test task I get these error message:\n\n```\noem FSW-GEMM (master) $ dep test production -vvv\n\u27a4 Executing task test\n\u21b3 on [production]\nRun locally: ssh-add -l\n> 2048 71:31:98:99:2f:80:fe:4b:f0:da:b1:99:cb:9c:e2:5b oskarcalvo (RSA)\n1024 db:5c:2a:92:e9:08:38:90:c6:90:7d:81:6f:96:d5:c6 oem@oskar (DSA)\n2048 95:55:af:fa:11:e3:68:09:1a:66:37:9f:5b:03:98:cb oscar.calvo@he-cocktail.com (RSA)\n2048 71:31:98:99:2f:80:fe:4b:f0:da:b1:99:cb:9c:e2:5b oskar@labo (RSA)\n> cd /var/www/html/geem && ssh-add -l\n[deployer@92.222.85.85] Password:\nPHP Warning:  ssh2_auth_pubkey_file(): Authentication failed for deployer using public key: Username/PublicKey combination invalid in phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Authentication/PublicKeyFile.php on line 46\n\n\n  [RuntimeException]                                          \n  The authentication over the current SSH connection failed.  \n\n\nException trace:\n () at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Session.php:167\n Ssh\\Session->authenticate() at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Session.php:140\n Ssh\\Session->createResource() at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/AbstractResourceHolder.php:25\n Ssh\\AbstractResourceHolder->getResource() at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Subsystem.php:39\n Ssh\\Subsystem->getSessionResource() at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Exec.php:18\n Ssh\\Exec->createResource() at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/AbstractResourceHolder.php:25\n Ssh\\AbstractResourceHolder->getResource() at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Exec.php:24\n Ssh\\Exec->run() at phar:///usr/local/bin/dep/src/Server/Remote/SshExtension.php:116\n Deployer\\Server\\Remote\\SshExtension->run() at phar:///usr/local/bin/dep/src/functions.php:296\n run() at /home/oem/oskar/sources/geem/project/FSW-GEMM/deploy.php:66\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:117\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:101\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:63\n require() at /usr/local/bin/dep:4\n\ntest [-p|--parallel]\n\n```\n OK @oanhnn , I remove then  identifyFile() method.\n\nI hope, we can fix my problem to deploy with private repository.\n\nOskar\n It's working now. I think I don't change anything.\n\nthis is my last deploy.php\n\n``` php\n\n<?php\n/*\n * This file has been generated automatically.\n * Please change the configuration for correct use deploy.\n */\n\nrequire 'recipe/common.php';\n//require 'vendor/autoload.php';\n\n// Set configurations\nset('repository', 'git@github.com:oskarcalvo/xxx.git');\nset('shared_files', ['drupal/sites/geem.t4dos.com/settings.php']);\nset('shared_dirs', ['drupal/sites/geem.t4dos.com/files']);\nset('writable_dirs', ['drupal/sites/geem.t4dos.com/files']);\nset('ssh_type', 'ext-ssh2');\n\n// Configure servers\nserver('production', '92.222.85.85', 22)\n    //->forwardAgent()\n    ->user('deployer')\n    //->password(null)\n    ->forwardAgent()\n    //->identityFile('/home/oem/.ssh/oskarcalvo.pub', '/home/oem/.ssh/oskarcalvo', NULL)\n    ->stage('production')\n    ->env('branch', 'master')\n    ->env('deploy_path', '/var/www/html/geem');\n/*\nserver('beta', 'beta.domain.com')\n    ->user('username')\n    ->password()\n    ->env('deploy_path', '/var/www/beta.domain.com');\n*/\n\n/**\n * Restart Apache2 on success deploy.\n */\ntask('apache:restart', function () {\n    // Attention: The user must have rights for restart service\n    // Attention: the command \"sudo /bin/systemctl restart php-fpm.service\" used only on CentOS system\n    // /etc/sudoers: username ALL=NOPASSWD:/bin/systemctl restart php-fpm.service\n    run('sudo service apache2 restart');\n})->desc('Restart Apache2 service');\n\nafter('success', 'apache:restart');\n\n/**\n * Main task\n */\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:symlink',\n    'cleanup',\n])->desc('Deploy your project');\n\nafter('deploy', 'success');\n\n// Add test task #########################################################\ntask('test', function() {\n    //run('ssh -vT git@github.com');\n    runLocally('ssh-add -l');\n    run('ssh-add -l');\n}); \n```\n\nOskar\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | Deployer version 3.2.1 |\n| Local Machine OS | linux mint 17 with PHP 5.6.21-1+donate.sury.org~trusty+4 (cli) |\n| Remote Machine OS | Debian 8 with PHP 5.6.19-0+deb8u1 (cli) (built: Mar 14 2016 10:22:33) |\n### Description\n\nI want to download a private repository from github.\nWhen I add the forwardAgent() method the consolo is not able to login to the server. Without the forwardAgent method I can login to the remote server, but I can not download the private repository.\n### Steps to reproduce\n\nIf I comment the forwarAgent() deployer can login into the remote server, but I can not donwload the private repository.\n### Content of `deploy.php`\n\n``` php\n<?php\n/*\n * This file has been generated automatically.\n * Please change the configuration for correct use deploy.\n */\n\nrequire 'recipe/common.php';\n//require 'vendor/autoload.php';\n\n// Set configurations\nset('repository', 'git@domain.com:username/repository.git');\nset('shared_files', ['drupal/sites/geem.t4dos.com/settings.php']);\nset('shared_dirs', ['drupal/sites/geem.t4dos.com/files']);\nset('writable_dirs', ['drupal/sites/geem.t4dos.com/files']);\nset('repository', 'git@github.com:oskarcalvo/FSW-GEMM.git');\n\n// Configure servers\n// I'm using server ip instead of domain.\nserver('production', 'xx.xxx.xx.xx', 22)\n    ->forwardAgent()\n    ->user('deployer')\n    //->password(null)\n    ->forwardAgent()\n    ->stage('production')\n    ->env('branch', 'master')\n    ->env('deploy_path', '/var/www/html/geem');\n/*\nserver('beta', 'beta.domain.com')\n    ->user('username')\n    ->password()\n    ->env('deploy_path', '/var/www/beta.domain.com');\n*/\n\n/**\n * Restart Apache2 on success deploy.\n */\ntask('apache:restart', function () {\n    // Attention: The user must have rights for restart service\n    // Attention: the command \"sudo /bin/systemctl restart php-fpm.service\" used only on CentOS system\n    // /etc/sudoers: username ALL=NOPASSWD:/bin/systemctl restart php-fpm.service\n    run('sudo service apache2 restart');\n})->desc('Restart Apache2 service');\n\nafter('success', 'apache:restart');\n\n/**\n * Main task\n */\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:symlink',\n    'cleanup',\n])->desc('Deploy your project');\n\nafter('deploy', 'success');\n```\n### Output log\n\n_With enabled option for verbose output `-vvv`._\n\n```\noem FSW-GEMM (master) $ dep deploy production -vvv\n\u27a4 Executing task deploy:prepare\n\u21b3 on [production]\n\n\n  [RuntimeException]                              \n  Unable to login with the provided credentials.  \n\n\nException trace:\n () at phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:89\n Deployer\\Server\\Remote\\PhpSecLib->connect() at phar:///usr/local/bin/dep/recipe/common.php:98\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:117\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:101\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:63\n require() at /usr/local/bin/dep:4\n\ndeploy [-p|--parallel]\n```\n Update.\n\nI have added: \n`composer require deployer/deployer herzult/php-ssh`\nand I have update my deploy.php file with \n\n``` php\nrequire 'vendor/autoload.php'; \n```\n\nAnd It seems to work now.\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | _Potentially_ |\n| Deprecations? | No |\n| Fixed tickets | [649](https://github.com/deployphp/deployer/issues/649) |\n\nThe `timezone` environment variable was not used when generating release folder name, which could cause the build to break.\n\nThis _can_ however be considered a breaking change, because users from a timezone that is ahead of UTC, who move towards consistently using UTC instead of their own timezone, _and_ who already deployed enough releases in the last few hours, might see their release folder instantly removed on deploy.\n \ud83d\udc4d \n Sorry about the first two check-breaking commits. \ud83d\ude47 \n\nAs mentioned above, this change can be considered breaking, in at least two ways:\n- users located in a timezone ahead of UTC and who deploy enough times (`keep_releases` times between their timezone and UTC) will potentially delete the folder being release during deploy (just like described in #649, in reverse). To circumvent this problem, it could be a possibility to postfix release names with a [`Z`](https://en.wikipedia.org/wiki/Coordinated_Universal_Time#Time_zones), and treat them differently in sort (this would require chiming in the discussion in #641).\n- since `timezone` becomes a global (not environment) variable, it might break deploys of users who use `env('timezone')` in their custom tasks. Not sure how to prevent this, though\u2026\n About possible breaking changes. Every think will be okay. Only order of releases may be broken. But we can add some sort of check: is new release name a last one?\n\n``` php\nis_last(env('releases'), $releaseName)\n```\n Thank you @oanhnn.\n\nIn the light of the additional context described in the issues that you mentioned, I believe that indeed, your proposed solution of moving the `date_default_timezone_set` bit inside the `release_name` function makes the most sense, I have updated the code change accordingly.\n Also, good idea @elfet. Indeed there could still be a side effect as described in #649. Let me explore this\u2026\n Actually, a check on whether the release currently being deployed is indeed the last one would fix the release order bug on deploy, but other tasks could still screw up\u2026 Which might be worse, actually (picture the effect on `rollback`).\n\nCurrently, all tasks depending on `releases_list` _assume_ that the list is ordered (from last to oldest). So this is the expected contract for this function.\n\nHowever, the list is `rsort`ed by file name, which only really works when release names are consistent, and is subject to breaking (timezone mix, releases named by git hash\u2026).\n\nWouldn't it be safer to have `release_list` sort the list by release directory create time? Concurrency issues aside, wouldn't solve all potential breakages mentioned here so far?\n @oanhnn \u2014 done, looks \ud83d\udc4d  to me.\n @oanhnn, @elfet:\nRegarding the discussion on `releases_list` order, I suppose that it goes beyond the scope of current issue: `deployer` could not entirely rely on filesystem data to ensure sorting, it would be too brittle. `deployer` would have to store releases metadata next to the releases themselves, that's quite a bit of work.\n\nIs this a feature that you have envisioned for an upcoming release? What are the plans regarding release metadata on the server? I'm asking because I noticed in #641 that there could be plans for a `dep releases` command, which I think is related, as release metadata storing would be inevitable.\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | 3.2.1 |\n| Local Machine OS | Mac OS X El Capitan |\n| Remote Machine OS | Ubuntu 16.04 PHP 7 |\n### Description\n\nWhen deploying to a remote server, the name of the release folder is determined with the `date()` function of the local machine.\n\nIf another user deploys to the same server with a machine that is not configured to use the same timezone, or any timezone at all, the folder name timestamps will not be consistent to _rsort_, which will trigger a wrong cleanup task and potentially delete the current release (being deployed).\n\nThe problem apparently lies in https://github.com/deployphp/deployer/blob/master/recipe/common.php#L38\n### Steps to reproduce\n\nTake two machines. One machine on which `php.ini` is the standard release file, and another where you added this line in `php.ini`:\n\n```\ndate.timezone = UTC\n```\n\nDeploy from the \"standard release\" machine, then deploy from the other : the current release folder will be deleted each time you try to release (see log below).\n### Content of `deploy.php`\n\n``` php\n<?php\nrequire 'recipe/symfony.php';\nserver('[redacted', '[redacted', 22)\n    ->user('deploy')\n    ->identityFile('[redacted]')\n    ->stage('production')\n    ->env('deploy_path', '/var/www/[redacted]'); // Define the base path to deploy your project to.\nset('repository', '[redacted]');\n```\n### Output log\n\n```\n\u2714 Ok [808ms]\n\u27a4 Executing task deploy:symlink\n\u21b3 on [redacted]\n> cd /var/www/[redacted] && ln -sfn /var/www/[redacted]/releases/20160512184857 current\n> cd /var/www/[redacted] && rm release\n\u2022 done on [redacted]\n\u2714 Ok [231ms]\n\u27a4 Executing task cleanup\n\u21b3 on [redacted]\n> rm -rf /var/www/[redacted]/releases/20160512184857\n```\n Yes, it's a bug. I'm thinking to using UTC for releases.\n Ok thanks to you @coox and @oanhnn ! I will confirm asap\n @tchapi Any updates?\n Sorry for the late response \u2014 to me it looks good !\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | 4.x |\n- [ ] Upgrade to PHPUnit 5.3\n Then 5.3 :)\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n\nThe `assetic:dump` command does not exist in Symfony 3. The `assetic` namespace has been replaced by `assets`. The new command to install assets is `assets:install`. \n\nThis PR overrides the `deploy:assetic:dump` command so it works in Symfony 3. Ideally, the `deploy:assetic:dump` command would be renamed to something like `deploy:assets:install` in the main deploy task. However, this would mean overriding the entire list of tasks.\n Cool!\n It does work >if< you install the assetic bundle. It's not default for symfony 2.8/3 any more but it's still something you can install and the`assetic:dump` works. The `assetic` is not `replaced` by `assets` and the `assets:install` you replaced it with is also available in symfony 2 but this is already run by default using [`post-install`](https://github.com/symfony/symfony-standard/blob/master/composer.json#L35) and `post-update` from the `composer install` command. \n\nWhat we should do is set the `set('dump_assets', false);` inside the symfony3.php to disable assetic by default.  \n\nTaken from the documentation:\n\n> Starting from Symfony 2.8, Assetic is no longer included by default in the Symfony Standard Edition. Refer to this article to learn how to install and enable Assetic in your Symfony application.\n- https://symfony.com/doc/current/cookbook/assetic/index.html\n- https://symfony.com/doc/current/cookbook/assetic/asset_management.html\n But i have an other problem with the override, If i try the following the `deploy:dump-real` task is never run. When i remove the override it works. I'm not sure why this happens with tasks which are replaced.\n\n```\ntask('deploy:dump-real', function () {\n    run('{{bin/php}} {{release_path}}/' . trim(get('bin_dir'), '/') . '/console assetic:dump --env={{env}} --no-debug');\n});\nafter('deploy:assetic:dump', 'deploy:dump-real');\n```\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | 3.2 |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nHi,\nI find the current way of naming release hard to read, especially if you have several of them during the same day/hour.\n\nCouldn't it be a bit more human friendly in future versions ?\nFor example:\n\n``` php\n// recipe/common.php\n/**\n * Release\n */\ntask('deploy:release', function () {\n    $releaseDir = env()->parse(\"{{deploy_path}}/releases\");\n\n    $guard = 42;\n    do {\n        $time = microtime();\n        list($usec, $sec) = explode(' ', $time);\n        $date = \\DateTime::createFromFormat('U.u', $sec . '.' . ($usec * 1e6));\n        $releaseName = $date->format('Y-m-d_H:i:s.u');\n        $releasePath = $releaseDir . '/' . $releaseName;\n    } while (is_dir($releasePath) && --$guard);\n\n    env('release_name', $releaseName);\n\n    run(\"mkdir $releasePath\");\n\n    run(\"cd {{deploy_path}} && if [ -h release ]; then rm release; fi\");\n\n    run(\"ln -s $releasePath {{deploy_path}}/release\");\n})->desc('Prepare release');\n```\n\nThis way you have releases that look like:\n\n```\n+ releases\n|-- 2016-04-25_12:05:00.011813\n|-- 2016-04-25_18:01:02.614783\n|-- 2016-04-26_12:00:03.314854\n|-- 2016-04-26_18:03:00.214896\n|-- 2016-04-27_12:00:12.114936\n|-- 2016-04-27_18:02:33.014975\n|-- 2016-04-28_12:04:45.015015\n|-- 2016-04-28_18:00:07.215054\n|-- 2016-04-29_12:01:18.115094\n\\-- 2016-04-29_18:00:00.415149\n```\n\nWhich is quite more readable than\n\n```\n+ releases\n|-- 20160425120500\n|-- 20160425180102\n|-- 20160426120003\n|-- 20160426180300\n|-- 20160427120012\n|-- 20160427180233\n|-- 20160428120445\n|-- 20160428180007\n|-- 20160429120118\n\\-- 20160429180000\n```\n\nDon't you think ? :wink: \n I think it not hard. \nI vote using 20160427180233\n > Why not 2016-04-25_12:05:00?\n\nYeah why not? In my example I just tried to kill two birds in one stone by adding microsecs so that all releases have the same format, even if you launch two of them in the same second.\nIn the end the exact format should be a good balance between human & machine readability (which is why there are date format RFCs btw).\n\nTo me the MySQL datetime format would be even better.\n\n> Easy read but not good for computer\n\nEh? wut about `DateTime::createFromFormat('whatever')` ???\nAnd if you're really lazy, then just replace \"`_`\" by either \"` `\" or \"`T`\"...\n @oanhnn Thanks for responding, but your points are moot...\n\n> You can make a date time object from string 20160501200000 by preg_match .\n\nSame with `2016-05-01_20:00:00`... :confused: \n\n``` php\n// If you're into parsing dates with regexps\npreg_match('/^(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})_(?<hour>\\d{2}):(?<min>\\d{2}):(?<sec>\\d{2})\\.(?<usec>\\d{6})$/', $releaseName, $matches);\n// But way better...\nDateTime::createFromFormat('Y-m-d_H:i:s.u', '2016-05-01_20:00:00.123456');\n// BTW, a REAL regexp for parsing a datetime would be IMPOSSIBLE\n```\n\n> But when you access folder 2016-05-01_20:00:00 via ftp or http, what is url you type? It not friendly.\n\nWell, `http://example.com/2016-05-01_20:00:00/` :laughing: \n\n> String 20160501200000 is easy for compare, it very important wit a version label.\n\n2016-05-01_20:00:00 is exactly as easy to compare for a machine, and easier to compare for a human eye...\n\n> If you want easy for create a date time object, why you make a custom task deploy:release to make timestamp as version label\n\nThanks for the suggestion, that's what I did, see my first comment. :wink: \nMy proposal was making the **default** format more **human friendly**, for **accessibility** reasons (while at the same time narrowing potential race conditions, but that's another story).\n @oanhnn i think it's good for DX by more friendly. What are you think? Whats cons?\n | Y-m-d_H:i:s | YmdHis |\n| --- | --- |\n| \\+ human friendly | \\- hard to read |\n| \\- break bc | \\+ no break bc |\n @oanhnn \n**One**: For accessibility.\n**Two**: we create slugs for SEO. `:` is a perfectly valid URL character. Please re-read [rfc3986](http://tools.ietf.org/html/rfc3986). (Btw I seriously hope you do not publicly expose your release paths on the web.)\n**Three**: great! seriously, you'll win a few millisecs when comparing tens of thousands of strings. When you get to that point, your IO operations will take several orders of magnitude longer than the string comparison. We're talking about a web application deployment tool here, not a game engine...\n\nSo many bikes were shed. :bicyclist:\n Really, guys. Release number needed only for developers who watching releases lists. \nI that case `Y-m-d_H:i:s` is better. \nRelease path should not be a part of URL. And how often you compare releases dates? \n Guys, vote for **Y-m-d_H:i:s** with \ud83d\udc4d\ud83c\udffb  , and for **YmdHis** with \ud83d\udc4e\n :+1: \n Please do not insert colons in auto-generated filenames. These characters will produce several problems on different systems! Especially Windows struggle with some filenames but these characters run into several problems on Unix-Systems also.\nThe following characters are reserved on Win:\n- < (less than)\n- > (greater than)\n- : (colon)\n- \" (double quote)\n- / (forward slash)\n- \\ (backslash)\n- | (vertical bar or pipe)\n- ? (question mark)\n- \\* (asterisk)\n\nAnyway the readability of the filename is learning thing at first. And I struggle more with a too human readability format in some programmatic cases.\n\nSo my vote is definitely against the new format because it will cause several problems which we can't see in a first glance, although I like readable formats. But not in cases which usually are not reviewed by humans all the time. And to bring a knockout argument, other solutions like capistrano use the current format as well.\n\n\ud83d\udc4e\n Agree, i think we can leave current **YmdHis** format, and implement something like a new command for `deb`, which will be showing releases lists in human friendly format:\n\n``` sh\n$ dep releases\n|   Path   |    Date    |    Author    |    Broken   | ... \n|   ....   |\n```\n @elfet That's a really good proposal, I like it and it fixes the problem in a much cleaner way. Furthermore it can carry some more information as you already mentioned.\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A or xx |\n Yes, it work.\ni have change \" env('typo3_webroot', 'web'); \" \n You have different ways to setup a TYPO3 project, copy the sources, put it into the git repository or install the sources via composer. But yes, this deploy.php file should cover the most setup types. \nThanks for merging.\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | 638 |\n\nThe underlying SFTP library allows for multiple authentication methods, so I've added a new setting AUTH_BY_IDENTITY_FILE_AND_PASSWORD.  I would imagine a better way to handle this would be to queue up each authentication method in an array and pass them as the arguments for the sftp->login() call, but I felt that I had too much potential to create breakage - so instead I created an additional method.\n\nTo use:\n\n``` php\nserver('staging', 'example.com', 22)\n    ->user('username')\n    ->identityFileAndPassword() // Arguments are the 3 identityFile() arguments + the password() argument.  It will assume those defaults if nothing is passed.\n    ->stage('staging')\n    ->env('branch', 'staging')\n    ->env('deploy_path', '/var/www/html/staging');\n```\n :+1: It is very cool. We need some unit test.\n I just submitted a pull request for the docs, but am unclear on how to configure the unit tests.\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | master |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nVerify the remote site before applying changes.\n### Steps to reproduce\n- Remote site has local changes\n- Deployer ignores them\n- Customer changes are gone\n### Solution\n\n```\n<?php\n\n\\Deployer\\Server\\Environment::setDefault( 'branch', 'master' );\n\ntask(\n    'git:validate',\n    function () {\n        // check if directory exists and is under GIT control\n        $result = run( 'if [ -d {{current}} ] && [ -d {{current}}/.git ]; then echo true; fi' );\n\n        if ( ! $result->toBool() ) {\n            if ( isVerbose() ) {\n                writeln( '  <comment>No GIT repository found - skipping.</comment>' );\n            }\n\n            return;\n        }\n\n        $cmd = 'git -C ' . escapeshellarg( env( 'current' ) ) . ' ';\n\n        try {\n            // update index\n            run( $cmd . 'fetch' );\n            run( $cmd . 'update-index -q --ignore-submodules --refresh' );\n        } catch ( \\RuntimeException $e ) {\n            writeln( '<error>Could not update index.</error>' );\n\n            die( 1 );\n        }\n\n        try {\n            // check unstaged\n            run( $cmd . 'diff-files --quiet --ignore-submodules --' );\n\n            // Disallow uncommitted changes in the index\n            run( $cmd . 'diff-index --cached --quiet HEAD --ignore-submodules --' );\n        } catch ( \\RuntimeException $e ) {\n            writeln( '<error>Remote site has changed files.</error>' );\n\n            die( 1 );\n        }\n\n        try {\n            // check for unpushed commits\n            $branch = env( 'branch' );\n\n            $result = run( $cmd . 'log --pretty=\"format:%h: %s\" origin/' . $branch . '..' . $branch );\n\n            $output = array_filter( $result->toArray() );\n            if ( $output ) {\n                writeln( '<error>You have ' . count( $output ) . ' unpushed commit(s).</error>' );\n                write( implode( '    ' . PHP_EOL, $output ) . PHP_EOL );\n\n                die( 1 );\n            }\n        } catch ( \\RuntimeException $e ) {\n            writeln( '<error>Could not compare branch with origin branch.</error>' );\n\n            die( 1 );\n        }\n    }\n);\n```\n\nSomething like that.\n I keep updating the code in the description from time to time.\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | master |\n| Local Machine OS | OSX 10.11.4 |\n| Remote Machine OS | Debian 6.0.7 |\n### Description\n\nIs there a way for the `download` function to handle directories ?\nIn addition to my deployment tasks, I also created two tasks in order to sync the markdown files the users created with my deployed CMS.\n`pages:upload` works perfectly, but `pages:download` does not at all.\n### Content of `deploy.php`\n\n``` php\n<?php\n\nrequire 'recipe/composer.php';\nrequire 'vendor/deployphp/recipes/recipes/rsync.php';\n\n/*\n|--------------------------------------------------------------------------\n| Server and services\n|--------------------------------------------------------------------------\n*/\n\nserver('prod', 'domain.com', 22)\n    ->user('me')\n    ->password('****')\n    ->stage('production')\n    ->env('deploy_path', '/path/to/domain/');\n\nset('repository', 'my@server:repository.git');\n\nset('shared_dirs', [\n    'user/pages',\n    'logs',\n]);\n\nset('writable_dirs', [\n    'cache',\n    'logs',\n    'images',\n    'user/pages',\n]);\n\n/*\n|--------------------------------------------------------------------------\n| Tasks\n|--------------------------------------------------------------------------\n*/\n\ntask('pages:upload', function () {\n    upload('user/pages', '{{deploy_path}}/shared/user/pages');\n});\n\ntask('pages:download', function () {\n    download('user/pages', '{{deploy_path}}/shared/user/pages');\n});\n\n```\n### Output log\n\n```\n$ ./bin/dep pages:download production -vvv                               master \u2731 \u25fc\n\u27a4 Executing task pages:download\n\u21b3 on [prod]\nPHP Warning:  fopen(user/pages): failed to open stream: Is a directory in /Users/loranger/Developer/myproject/vendor/phpseclib/phpseclib/phpseclib/Net/SFTP.php on line 2054\n\nWarning: fopen(user/pages): failed to open stream: Is a directory in /Users/loranger/Developer/myproject/vendor/phpseclib/phpseclib/phpseclib/Net/SFTP.php on line 2054\n\n\n  [RuntimeException]\n\n```\n Why not using `rsync` recipe? https://github.com/deployphp/recipes/blob/master/docs/rsync.md\n I did consider (that's the reason why the require remains on top of the file) but there is no way to call a task from another :\n\n```\ntask('pages:download', function () {\n    env('rsync_src', '{{deploy_path}}/shared/user/pages');\n    env('rsync_dest','user/pages');\n    call_task('rsync');\n});\n```\n Yes, that's an explanation I often read in the issues.\nAnyway, what about my initial request ?\n\nWhat do you think about making `download` function working seamless with files and folders, as the `upload` function does ?\n Sure, I get it, Rsync is an excellent recipe to remote sync anything.\n\nBut I do talk about two low-level methods shipped with depoyer: `download` and its opposite, `upload`.\nThey are supposed to do the same thing, but one for down stream and one for up stream.\nTheir signature are the same, but one can deal with folder when the other cannot.\nThat's why I opened this issue : May you consider to make those two functions more consistent ?\n +1 for that.\nI think the API should be consistent.\nMore to that, rsync is not easy to run on windows systems. I can manage everything else with just git bash, but rsync is not included.\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nCreate a release only if there any changes in project's VCS.\n Well, this behavior could be optional :)\nOr even default along with fallback `--force` option \u2014 user still has choice.\n\nIn my case, I've considered deployer for some kind of continuous deployment (e.g. via cron) on certain automatically provisioned nodes \u2014 it's possibly not the best practice, but it's quite reliable.\nAnother case \u2014 accidental run of `deploy` task (e.g. by different users).\n\nIn both cases `rollback` task becomes quite less usable (you should run it twice or more until the changes are really reverted) or unusable at all (in case the number of releases [created without VCS changes] reaches the number `keep_releases` value).\n\nI'll try my best to contribute this functionality, but I can't promise it due to lack of time :)\nThank you for this tool, it looks so tasty)\n I think that this is a good feature, when there are no changes, give a warning that nothing is going to be deployed, and tell the user that he could deploy anyway putting the `--force` option\n\nLet me check how to do this.\n  while trying to use deployer and while using `dep deploy -vvv dev` I noticed this error during `deploy:writeable`\n### Output of `deploy:writeable`\n\n```\n\u27a4 Executing task deploy:writable\n\u21b3 on [test_1]\n> ps axo user,comm | grep -E '[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx' | grep -v root | head -1 | cut -d\\  -f1\n< www-data\n<\n> cd /var/www/main_site/releases/20160419070428 && chmod 2>&1; true\n< chmod: missing operand\n< Try `chmod --help' for more information.\n```\n\n`ls -l` shows the latest release doesn't properly chmod\n\nUsing `common.php` and `magento.php` taken from `https://github.com/deployphp/deployer/blob/master/recipe/`\n\nDeployer version: **3.2.1**\nOS: **Debian Wheezy**\n Look your issue not like a bug. See #492 \nP/S: Please make issue follow ISSUE TEMPLATE\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nAs seen at https://github.com/deployphp/deployer/blob/cd7ec689201105c3592175c1bc10106a205f807d/recipe/symfony.php#L110 it is not possible to override `deploy:clear_controllers` and keep some specific files. This can be useful in non-production environments. \n\nIs there a way to work around this? Maybe it makes sense to make this task public?\n Override works like for any other task. Sorry for false alarm :) \n\nBTW what is purpose of `->setPrivate()`?\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | #628 |\n\nIn this PR:\n- Using `trim` function to resolved issue #628 \n- Change to using `{{bin/git}}` in checking git cache feature block\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | 3.2.1 |\n| Local Machine OS | Ubuntu 15.04 |\n| Remote Machine OS | Ubuntu 15.04 |\n### Description\n\nGIT says the directory is given but it isn't.\nThe deploy target is just new and there is no such directory.\n### Steps to reproduce\n- Complete new deployer project as suggested in your documentation.\n- No directory exists\n- Owner of the target directory is the correct user.\n### Content of `deploy.php`\n\n``` php\n<?php\n\n// All Deployer recipes are based on `recipe/common.php`.\nrequire 'recipe/symfony.php';\n\n// Define a server for deployment.\n// Let's name it \"prod\" and use port 22.\nserver( 'prod', 'the.remote', 22 )\n    ->user( 'ME' )\n    ->forwardAgent()// You can use identity key, ssh config, or username/password to auth on the server.\n    ->stage( 'production' )\n    ->env( 'deploy_path', '/srv/www/test' ); // Define the base path to deploy your project to.\n\n// Specify the repository from which to download your project's code.\n// The server needs to have git installed for this to work.\n// If you're not using a forward agent, then the server has to be able to clone\n// your project from this repository.\nset( 'repository', `git config --get -z remote.origin.url` );\n```\n### Output log\n\n```\n$ bin/dep deploy -vvv prod\n\u27a4 Executing task deploy:prepare\n\u21b3 on [prod]\n> echo $0\n< bash\n< \n> if [ ! -d /srv/www/test ]; then mkdir -p /srv/www/test; fi\n> if [ ! -L /srv/www/test/current ] && [ -d /srv/www/test/current ]; then echo true; fi\n> cd /srv/www/test && if [ ! -d releases ]; then mkdir releases; fi\n> cd /srv/www/test && if [ ! -d shared ]; then mkdir shared; fi\n\u2022 done on [prod]\n\u2714 Ok [1s 488ms]\n\u27a4 Executing task deploy:release\n\u21b3 on [prod]\n> mkdir /srv/www/test/releases/20160417234518\n> cd /srv/www/test && if [ -h release ]; then rm release; fi\n> ln -s /srv/www/test/releases/20160417234518 /srv/www/test/release\n\u2022 done on [prod]\n\u2714 Ok [428ms]\n\u27a4 Executing task deploy:update_code\n\u21b3 on [prod]\n> which git\n< /usr/bin/git\n< \n> git version\n< git version 1.9.1\n< \n> find /srv/www/test/releases -maxdepth 1 -mindepth 1 -type d\n< /srv/www/test/releases/20160417233429\n< /srv/www/test/releases/20160417234518\n< /srv/www/test/releases/20160417233800\n< /srv/www/test/releases/20160417234157\n< /srv/www/test/releases/20160417233604\n< /srv/www/test/releases/20160417233311\n< \n> readlink /srv/www/test/release\n< /srv/www/test/releases/20160417234518\n< \n> /usr/bin/git clone  --depth 1 --recursive -q git@bitbucket.org:ME/foo.git /srv/www/test/releases/20160417234518 2>&1\n\n\n  [RuntimeException]                                                          \n  fatal: destination path 'foo' already exists and is not an empty directory.  \n\n```\n Oh yeah, I forgot. This works very well when I am on the server (same user).\n\n```\nSubmodule 'srv/wp-content/plugins/wp-plugin-readme-parser' (https://github.com/markjaquith/WordPress-Plugin-Readme-Parser.git) registered for path 'srv/wp-content/plugins/wp-plugin-readme-parser'\nCloning into 'srv/wp-content/plugins/wp-plugin-readme-parser'...\nremote: Counting objects: 70, done.\nremote: Total 70 (delta 0), reused 0 (delta 0), pack-reused 70\nUnpacking objects: 100% (70/70), done.\nChecking connectivity... done.\nSubmodule path 'srv/wp-content/plugins/wp-plugin-readme-parser': checked out '69ed0bf10d79668a8e0e0f777e1c4033a0339cc4'\n```\n\nIt's correctly cloned.\nExit code is 0 (zero).\n\n```\n/srv/www/test/releases/20160418103839$ tree -L 1\n.\n\u251c\u2500\u2500 bin\n\u251c\u2500\u2500 composer.json\n\u251c\u2500\u2500 composer.lock\n\u251c\u2500\u2500 srv\n\u2514\u2500\u2500 wp-cli.yml\n```\n\nWhere can I look up the deploy task and debug it down? \nI don't find the part that sends the git clone to the server.\n Here is the problem, I reword the title later.\n\nI did this to dynamically resolve the git url: \n\n```\nset( 'repository', `git config --get -z remote.origin.url` );\n// without zero char will break this too:\n// set( 'repository', `git config --get remote.origin.url` );\n```\n\nThe command send to the server contains either a null-character or a new line like this:\n\n``` sh\n/usr/bin/git clone  --depth 1 --recursive -q git@bitbucket.org:rmp/cb.git \n /srv/www/test/releases/20160418105535 2>&1\n\n# or zero char\n/usr/bin/git clone  --depth 1 --recursive -q git@bitbucket.org:rmp/cb.git\\0 /srv/www/test/releases/20160418105535 2>&1\n```\n\nBoth make the command end after the remote URL. As a workaround I now do this:\n\n```\nset( 'repository', trim( `git config --get remote.origin.url` ) );\n```\n\nIf you like keep this issue open and move the `trim` (for the repository url) in your libs.\n Thank @sourcerer-mike ,\nIt will resolved with #629 .\n  Please consider providing the `deployer.phar`-file over HTTPS.\n\nCurrently the recommended form of installation is:\n\n```\n$ curl -L http://deployer.org/deployer.phar -o deployer.phar\n$ mv deployer.phar /usr/local/bin/dep\n$ chmod +x /usr/local/bin/dep\n```\n\nWhile this command can be vulnerable to a MITM-attack.\n\nIf you can, I would love to see the deployer.org website to provide HTTPS (which is easy and free with the Let's Encrypt project).\n\nAdditionally, providing a checksumming hash or some form of signature would be greatly appreciated.\n\nI currently cannot be certain that the pharchive I am downloading, is actually what you intended to provide.\n\nThanks!\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nI am wondering if there is possibility (like in Capistrano) to separate Deployer's config for different environments - for example on a production server I'd like to have:\n- set custom `php/bin` path (`onlyOn` method doesn't work with `env()`)\n- disable `deploy:writable` task (lacks of sudo) (I would have to rewrite whole task just to specify `onlyOn` method)\n\nIn Capistrano I would just set this in config file for specific environment and everything would just works. What about here?\n > set custom php/bin path (onlyOn method doesn't work with env())\n\nCan you try?\n\n``` php\n// set special environment variable\nserver('svr1', 'xx.xx.xx.xx', 22)\n    ->env('php/bin', '/usr/bin/php');\n\n// set special environment variable, using php7\nserver('svr2', 'xx.xx.xx.xx', 22)\n    ->env('php/bin', '/usr/local/php7/bin/php'); \n\n// don't set special environment variable, Deployer will use default environment variable \n// Using `which php`\nserver('svr3', 'xx.xx.xx.xx', 22)\n     ->env('branch', 'develop'); \n```\n Thanks! It works great. But sadly problem 2 still unresolved - about handling tasks depending on environments (let's say - different `deploy` strategy).\n\nI could define `deploy:production` and `deploy:staging` tasks but then:\n- I would duplicate myself\n- Deployment would look like `dep deploy:production production`\n `task($name, $body)` could be changed in `task($name, $body = null)` and return task reference when you call it without `$body`, so you can do:\n\n``` php\ntask('deploy:writable')->onlyOn(['dev', 'staging']);\n\n```\n @luke83 \n\nSadly this solution doesn't work. Deployer immediately stops without any output even in debug mode.\n @adriandmitroca @elfet it was a proposal, sorry for misunderstanding\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | #541 #619 |\n\nAdded helper tasks:\n- `artisan:migrate` => `artisan migrate --force`\n- `artisan:migrate:rollback` => `artisan migrate:rollback --force`\n- `artisan:migrate:status` => `artisan migrate:status`\n- `artisan:db:seed` => `artisan db:seed --force`\n- `artisan:cache:clear` => `artisan cache:clear`\n- `artisan:config:cache` => `artisan config:cache`\n- `deploy:public_disk` => Create symlink `public/storage` to `storage/app/public`\n :+1: \n\nI'm not familiar with the code, but perhaps it would be a viable option to map all artisan commands automatically? eg. `dep artisan command arg1 arg2 --option` -> `{{bin/php}} {{deploy_path}}/current/artisan command arg1 arg2 --option`. This would reduce boilerplate and people can run artisan commands on the external server easy (eg. `artisan migrate --prepend`, `artisan db:seed --class=UserSeeder` etc.)\nThe same could apply for Drupal (drush), Magento (magerun), Wordpress (wp-cli), Symfony etc.\n\nIt would also make the argument about --force invalid, as you can do just `dep artisan migrate --force`.\n I don't think that using `--force` by default is a good idea. This way you could overwrite important data by mistake.\n\nSecondly, what do you think about running `php artisan migrate` on every deployment? Application should not be deployed with outdated database scheme because it could case unnecessary exceptions.\n 1. Adding `--force` just skips the warning on production. It doesn't overwrite anything else. Running it without --force just doesn't work on production. Not ever.\n2. Either you run it automatically without --force and it doesn't have any effect, or you run it with --force and you have the potential to run unwanted migrations. So _that_ is dangerous.. Running it should be a conscious decision imho.\n @oanhnn \n\nYou have also missed `route:cache` command - could be triggered just after `config:cache`.\n @adriandmitroca \nI was try `route:cache` command but i see it has a problem.\n\n```\n [LogicException] \nUnable to prepare route [/] for serialization. Uses Closure.\n```\n\nMay be `route:cache` not support Closure. I think it will throw error when deploy.\n @barryvdh \nI can make `dep artisan <stage> <artisan:sub command> <options>`, but:\n1. The options can use for deployer or artisan, that is not clear and may be have many error. \n2. Added this task to `deploy` task will more difficult.\n\nI think everyone should using custom task by themself, that is better.\n Looks good to me.\n\nNot sure if this belongs here, but perhaps it's helpful to add a note about reloading PHP FPM, especially because a lot of Laravel sites are running on Forge, which doesn't refresh the symlinks automatically..\n\nForge recipe (which you can run on your servers in the Forge panel) to allow php7.0-fm to be run without sudo password:\n`echo \"forge ALL=NOPASSWD: /usr/sbin/service php7.0-fpm reload\" > /etc/sudoers.d/php-fpm`\n\nCommand to run after the release symlink:\n`sudo /usr/sbin/service php7.0-fpm reload`\n\nAlthough this is general (and similar for PHP5), \n Is there a nice way to 'extend' the existing laravel recipe? I would like to add route:cache as I think it should always be there (I don't use closure routes)...also I want auto migrate. Maybe those can be options somehow?\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n\nAdd header comment fixer to `.php_cs` file\n  | Q | A |\n| --- | --- |\n| Issue Type | Question |\n| Deployer Version | master |\n| Local Machine OS | Win8.1 (tested also with vagrant(ubuntu)) |\n| Remote Machine OS | ubuntu on vagrant vs ubuntu on dreamhost |\n### Description\n\nI am trying to _translate_ my old deployment script to deployer. In a specific point i need to run on deployment server:\n\n``` php\ncomposer create-project --prefer-dist cakephp/app /home/***/***/***/prod/releases/20160412233742\n```\n\n(stars are there to hide sensible informations)\n\n\u2714 Running command using **deployer** with dev _vagrant/ubuntu_ machine as remote -> **all is ok there**\n\u2714 Running command using **ssh** (PuTTY or KiTTY, copy and paste command in the terminal) connected with the production _dreamhost/ubuntu_ machine -> **all is fine**\n\u27a4 Running command using **deployer** with production _dreamhost/ubuntu_ machine as remote (the same used with pure ssh) i got a runtime exception after a few seconds (5-10 in avg), with different composer command output at each run (sometimes it install something more, sometimes something less.. this is random, not the same point every time) -> **Killed**, task not completed :(\n### Steps to reproduce\n### Content of `deploy.php`\n\n``` php\n[..]\nrun('{{bin/composer}} create-project --prefer-dist cakephp/app {{release_path}}');\n[..]\n```\n### Output log\n\n```\n [RuntimeException]\n  bash: line 1: 22614 Killed                  /usr/local/php56/bin/php /home/***/***/***/prod/composer.phar create-project --prefer-dist cakephp/app /home/***/***/***/prod/releases/20160412233742\n\nException trace:\n () at deployer\\src\\Server\\Remote\\PhpSecLib.php:114\n Deployer\\Server\\Remote\\PhpSecLib->run() at deployer\\src\\functions.php:297\n run() at deployer\\deploy.php:148\n {closure}() at n/a:n/a\n call_user_func() at deployer\\src\\Task\\Task.php:79\n Deployer\\Task\\Task->run() at deployer\\src\\Executor\\SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at deployer\\src\\Console\\TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at deployer\\vendor\\symfony\\console\\Command\\Command.php:256\n Symfony\\Component\\Console\\Command\\Command->run() at deployer\\vendor\\symfony\\console\\Application.php:791\n Symfony\\Component\\Console\\Application->doRunCommand() at deployer\\vendor\\symfony\\console\\Application.php:186\n Symfony\\Component\\Console\\Application->doRun() at deployer\\vendor\\symfony\\console\\Application.php:117\n Symfony\\Component\\Console\\Application->run() at deployer\\src\\Deployer.php:101\n Deployer\\Deployer->run() at deployer\\bin\\dep:64\n```\n### Verbose output log\n\nThis is another run with `-vvv` on composer:\n\n```\n[RuntimeException]\n  Checking CA file /etc/ssl/certs/ca-certificates.crt\n  Downloading https://packagist.org/packages.json\n  Writing /home/***/.composer/cache/repo/https---packagist.org/packages.js on into cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2013.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2014.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2015.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2015-07.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2015-10.json from cache\n  Downloading http://packagist.org/p/provider-2016-01%24f302f0bb60341aadd779369362fc11d0be29039cb0e08e79ea9e3d20ebec4ae8.json\n  Writing /home/***/.composer/cache/repo/https---packagist.org/p-provider-2016-01.json into cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2016-04.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-archived.json from cache\n  Downloading http://packagist.org/p/provider-latest%24f223b6a95bbb47526d6fb6cb7d329191f6e09c4525d0ae4223c2356513d393fc.json\n  Writing /home/***/.composer/cache/repo/https---packagist.org/p-provider-latest.json into cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/provider-cakephp$app.json from cache\n  Installing cakephp/app (3.2.4)\n    - Installing cakephp/app (3.2.4)\n  Reading /home/***/.composer/cache/files/cakephp/app/27c46c41f4005f6d37726f7e85a74d74c750204d.zip from cache\n      Loading from cache\n      Extracting archive\n  Executing command (CWD): unzip '/home/***/***/***/prod/releases/20160412225836//490d524e1e2d69fa633f2b2bf94343d9' -d '/home/***/***/***/prod/releases/20160412225836/vendor/composer/c1e8ba97' && chmod -R u+w '/home/***/***/***/prod/releases/20160412225836/vendor/composer/c1e8ba97'\n  bash: line 1:  8508 Killed                  /usr/local/php56/bin/php /home/***/***/***/prod/composer.phar create-project --prefer-dist cakephp/app /home/***/***/***/prod/releases/20160412225836 -n -vvv\n```\n\nAgain, another one:\n\n```\n [RuntimeException]\n  Checking CA file /etc/ssl/certs/ca-certificates.crt\n  Downloading https://packagist.org/packages.json\n  Writing /home/***/.composer/cache/repo/https---packagist.org/packages.js on into cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2013.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2014.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2015.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2015-07.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2015-10.json from cache\n  Downloading http://packagist.org/p/provider-2016-01%2408733b24493e1d9e452a4f1b56b07f260158e90acf494fd749adb77ea673e4f6.json\n  Writing /home/***/.composer/cache/repo/https---packagist.org/p-provider-2016-01.json into cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-2016-04.json from cache\n  Reading /home/***/.composer/cache/repo/https---packagist.org/p-provider-archived.json from cache\n  bash: line 1:  7469 Killed                  /usr/local/php56/bin/php /home/***/***/***/prod/composer.phar create-project --prefer-dist cakephp/app /home/***/***/***/prod/releases/20160412225557 -n -vvv\n```\n\nAny suggestions? \nPlease let me know if there are other infos i have to share...\n\nPS: Thanks for deployer... xD\n Can you try run a task?\n\n``` php\ntask('test_kill_php', function(){\n     run('{{bin/php}} -r \"sleep(10); echo \\\"Done\\\";\"');\n});\n```\n @elfet yes, they are the same \n\n@oanhnn i will try it in a few hours, you are thinking to some execution timeout..\n @oanhnn trying your suggestion i got:\n\n```\n$ dep test_kill_php production\n\u2714 Executing task test_kill_php\n```\n\n..and verbosely:\n\n```\n$ dep test_kill_php production -vvv\n\u27a4 Executing task test_kill_php\n\u21b3 on [dreamhost.prod]\n> cd /home/***/***/***/prod && /usr/local/php56/bin/php -r \"sleep(10); echo \\\"Done\\\";\"\n< Done\n\u2022 done on [dreamhost.prod]\n\u2714 Ok [12s 940ms]\n```\n\nIt is not a php timeout issue.. i also tested `php -i > infos.log` and `php --ini > ini.log` both with pure ssh and with deployer same parameters..\n\n**UPDATE**\nWriting the comment and looking for resource usage with `top` i found a lot of `ssh-agent` instances due to `.bash_profile`; killing that instances and all the `ssh-agent` stuff now deployer works like a charm.\nI will keep investigating on this, but i will close this issue because it seems something wrong with my configuration (even if it is wrong ONLY with deployer).\nIf a better analysis will give me a general solution/explanation i will keep you updated. Sorry for wasting your time.\n\nLong life to deployer, really a peace of mind for devs!!!\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | No |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | #527 #572 |\n\nIn this PR:\n- Replace `php` by `{{bin/php}}`\n- ~~Add helper tasks about migration and option `--force` can set by `env()`~~\n- Resolved issues about shared directories and `.env` file\n- Resolved issues about writable `storage` directory. Tested with `setfacl` on CentOS\n- Changed order task deploy:shared and deploy:vendors in laravel recipe (See #619)\n Migrate is useless without `--force` on production, it will never run.\n\nWhat about adding options to the `deploy:migrate --force` command (if that's possible), or asking confirmation before running?\n WIth this PR, users can use `--force` option or not by `env()`\n\n```\nsever('prod', 'xx.xx.xx.xx', 22)\n  ->env('allow_force_migrate', false);\n\nserver('dev', 'xx.xx.xx.xx', 22)\n   ->env('allow_force_migrate', true);\n```\n\nDefault `env('allow_force_migrate', false);`  \nAnd task `deploy:migrate` is not included `deploy` task.\n I understand, but without `--force`, it's just useless.\n I've listed some more ideas BTW, if you feel like adding more stuff ;)\nhttps://github.com/deployphp/deployer/issues/619\n @barryvdh \nOption `--force` is very dangerous. Users have to control it. We wont add it as default.\n @elfet Please review and merge and close issue refs\n I understand, but setting the force value in your config doesn't make it less dangerous (because it's set in the deploy file, so you still run it accidentally)\nWhy not do `askConfirmation('Are you sure you want to migrate')` with an option to always force?\n Didn't you put that in the functions.php? :P And it's also in drupal7 recipe. But fair enough.\nImho the `--force` flag is similar to --non-interactive. I opened and issue here to fix that: https://github.com/laravel/framework/pull/13125\n @elfet @barryvdh \nI split this PR to:\n- **Bugfix** This PR only fix bug of laravel recipe\n- **Feature** PR #625  will add helper task\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | 3.2.1 |\n| Local Machine OS | Ubuntu 14.04 |\n| Remote Machine OS | Ubuntu 14.04 |\n### Description\n\nWhen trying to deploy, I'm getting the following error:\n\n[RuntimeException]\n  Could not open input file: /var/www/motivis-assets/releases/20160411210247/app/console\n### Steps to reproduce\n\ndep deploy production\n### Content of `deploy.php`\n\n``` php\n// All Deployer recipes are based on `recipe/common.php`.\nrequire 'recipe/symfony.php';\n\n// Define a server for deployment.\n// Let's name it \"prod\" and use port 22.\nserver('ec2', '127.0.0.1')\n    ->user('my_user')\n    ->pemFile('cert.pem')\n//     ->forwardAgent() // You can use identity key, ssh config, or username/password to auth on the server.\n    ->stage('production')\n    ->env('deploy_path', '/var/www/motivis-assets'); // Define the base path to deploy your project to.\n\n// Specify the repository from which to download your project's code.\n// The server needs to have git installed for this to work.\n// If you're not using a forward agent, then the server has to be able to clone\n// your project from this repository.\nset('repository', 'git@github.com:myrepo/sass-automation.git');\n\n// set('bin_dir', 'bin');\n\nset('writable_dirs', ['build', 'stylesheets', 'app/cache', 'app/logs']);\n// set('keep_releases', 5);\n\ntask('reload:php-fpm', function () {\n    run('sudo /usr/sbin/service php5-fpm reload');\n});\n\nafter('deploy', 'reload:php-fpm');\nafter('rollback', 'reload:php-fpm');\n```\n### Output log\n\n\u27a4 Executing task deploy:prepare\n\u21b3 on [ec2]\n\n> echo $0\n> < bash\n> <\n> if [ ! -d /var/www/motivis-assets ]; then mkdir -p /var/www/motivis-assets; fi\n> if [ ! -L /var/www/motivis-assets/current ] && [ -d /var/www/motivis-assets/current ]; then echo true; fi\n> cd /var/www/motivis-assets && if [ ! -d releases ]; then mkdir releases; fi\n> cd /var/www/motivis-assets && if [ ! -d shared ]; then mkdir shared; fi\n> \u2022 done on [ec2]\n> \u2714 Ok [636ms]\n> \u27a4 Executing task deploy:release\n> \u21b3 on [ec2]\n> mkdir /var/www/motivis-assets/releases/20160411210247\n> cd /var/www/motivis-assets && if [ -h release ]; then rm release; fi\n> ln -s /var/www/motivis-assets/releases/20160411210247 /var/www/motivis-assets/release\n> \u2022 done on [ec2]\n> \u2714 Ok [132ms]\n> \u27a4 Executing task deploy:update_code\n> \u21b3 on [ec2]\n> which git\n> < /usr/bin/git\n> <\n> git version\n> < git version 1.9.1\n> <\n> find /var/www/motivis-assets/releases -maxdepth 1 -mindepth 1 -type d\n> < /var/www/motivis-assets/releases/20160411150157\n> < /var/www/motivis-assets/releases/20160411153740\n> < /var/www/motivis-assets/releases/20160411145817\n> < /var/www/motivis-assets/releases/20160411152923\n> < /var/www/motivis-assets/releases/20160411195709\n> < /var/www/motivis-assets/releases/20160411210247\n> < /var/www/motivis-assets/releases/20160411202618\n> < /var/www/motivis-assets/releases/20160411152641\n> < /var/www/motivis-assets/releases/20160411152530\n> < /var/www/motivis-assets/releases/20160411182134\n> < /var/www/motivis-assets/releases/20160411151155\n> < /var/www/motivis-assets/releases/20160411204455\n> < /var/www/motivis-assets/releases/20160411150353\n> < /var/www/motivis-assets/releases/20160411204639\n> < /var/www/motivis-assets/releases/20160411182630\n> < /var/www/motivis-assets/releases/20160411145847\n> < /var/www/motivis-assets/releases/20160411150044\n> <\n> readlink /var/www/motivis-assets/release\n> < /var/www/motivis-assets/releases/20160411210247\n> <\n> /usr/bin/git clone  --depth 1 --recursive -q git@github.com:motivislearning/sass-automation.git /var/www/motivis-assets/releases/20160411210247 2>&1\n> \u2022 done on [ec2]\n> \u2714 Ok [457ms]\n> \u27a4 Executing task deploy:clear_controllers\n> \u21b3 on [ec2]\n> rm -f /var/www/motivis-assets/releases/20160411210247/web/app_*.php\n> rm -f /var/www/motivis-assets/releases/20160411210247/web/config.php\n> \u2022 done on [ec2]\n> Ok [91ms]\n> \u27a4 Executing task deploy:create_cache_dir\n> \u21b3 on [ec2]\n> if [ -d \"/var/www/motivis-assets/releases/20160411210247/app/cache\" ]; then rm -rf /var/www/motivis-assets/releases/20160411210247/app/cache; fi\n> mkdir -p /var/www/motivis-assets/releases/20160411210247/app/cache\n> chmod -R g+w /var/www/motivis-assets/releases/20160411210247/app/cache\n> \u2022 done on [ec2]\n> \u2714 Ok [184ms]\n> \u27a4 Executing task deploy:shared\n> \u21b3 on [ec2]\n> if [ -d $(echo /var/www/motivis-assets/releases/20160411210247/app/logs) ]; then rm -rf /var/www/motivis-assets/releases/20160411210247/app/logs; fi\n> mkdir -p /var/www/motivis-assets/shared/app/logs\n> mkdir -p `dirname /var/www/motivis-assets/releases/20160411210247/app/logs`\n> ln -nfs /var/www/motivis-assets/shared/app/logs /var/www/motivis-assets/releases/20160411210247/app/logs\n> if [ -f $(echo /var/www/motivis-assets/releases/20160411210247/app/config/parameters.yml) ]; then rm -rf /var/www/motivis-assets/releases/20160411210247/app/config/parameters.yml;\n>  fi\n> if [ ! -d $(echo /var/www/motivis-assets/releases/20160411210247/app/config) ]; then mkdir -p /var/www/motivis-assets/releases/20160411210247/app/config;fi\n> mkdir -p /var/www/motivis-assets/shared/app/config\n> touch /var/www/motivis-assets/shared/app/config/parameters.yml\n> ln -nfs /var/www/motivis-assets/shared/app/config/parameters.yml /var/www/motivis-assets/releases/20160411210247/app/config/parameters.yml\n> \u2022 done on [ec2]\n> \u2714 Ok [542ms]\n> \u27a4 Executing task deploy:assets\n> \u21b3 on [ec2]\n> find /var/www/motivis-assets/releases/20160411210247/web/css /var/www/motivis-assets/releases/20160411210247/web/images /var/www/motivis-assets/releases/20160411210247/web/js -exe\n> c touch -t 201604110902.49 {} ';' &> /dev/null || true\n> \u2022 done on [ec2]\n> \u2714 Ok [47ms]\n> \u27a4 Executing task deploy:vendors\n> \u21b3 on [ec2]\n> if hash composer 2>/dev/null; then echo 'true'; fi\n> < true\n> <\n> which composer\n> < /usr/local/bin/composer\n> cd /var/www/motivis-assets/releases/20160411210247 && export SYMFONY_ENV=prod && /usr/local/bin/composer install --no-dev --verbose --prefer-dist --optimize-autoloader --no-progre\n> ss --no-interaction\n> < Loading composer repositories with package information\n> < Installing dependencies from lock file\n> < Analyzed 93 packages to resolve dependencies\n> < Analyzed 179 rules to resolve dependencies\n> <   - Installing symfony/yaml (v3.0.4)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing symfony/process (v3.0.4)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing symfony/finder (v3.0.4)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing symfony/polyfill-mbstring (v1.1.1)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing symfony/console (v3.0.4)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing phpseclib/phpseclib (2.0.1)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing symfony/expression-language (v3.0.4)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing psr/log (1.0.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing symfony/debug (v3.0.4)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing evenement/evenement (v2.0.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/stream (v0.4.3)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/promise (v2.4.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/event-loop (v0.4.2)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/socket (v0.4.3)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/cache (v0.4.1)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/dns (v0.4.2)\n> <     Loading from cache\n> <     Extracting archive\n> <<   - Installing react/socket-client (v0.4.5)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing psr/http-message (1.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing guzzlehttp/psr7 (1.2.3)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/http-client (v0.4.10)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/http (v0.4.1)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/child-process (v0.4.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing react/react (v0.4.2)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing elfet/pure (v2.0.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing herrera-io/version (1.1.1)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing seld/jsonlint (1.4.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing justinrainbow/json-schema (1.6.1)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing herrera-io/json (1.0.3)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing herrera-io/phar-update (2.0.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing deployer/phar-update (v1.0.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> <   - Installing deployer/deployer (v3.2.0)\n> <     Loading from cache\n> <     Extracting archive\n> <\n> < Generating optimized autoload files\n> <\n> \u2022 done on [ec2]\n> \u2714 Ok [1s 136ms]\n> \u27a4 Executing task deploy:assetic:dump\n> \u21b3 on [ec2]\n> which php\n> < /usr/bin/php\n> <\n> /usr/bin/php /var/www/motivis-assets/releases/20160411210247/app/console assetic:dump --env=prod --no-debug\n>   [RuntimeException]\n>   Could not open input file: /var/www/motivis-assets/releases/20160411210247/app/console\n> Exception trace:\n>  () at phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:114\n>  Deployer\\Server\\Remote\\PhpSecLib->run() at phar:///usr/local/bin/dep/src/functions.php:296\n>  run() at phar:///usr/local/bin/dep/recipe/symfony.php:77\n>  {closure}() at n/a:n/a\n>  call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:79\n>  Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:43\n>  Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\n>  Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:256\n>  Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:791\n>  Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:186\n>  Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:117\n>  Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:101\n>  Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:63\n>  require() at /usr/local/bin/dep:4\n> deploy [-p|--parallel]\n Are you checked file exist `/var/www/motivis-assets/releases/20160411210247/app/console`\n This is what is in the composer.lock file\n\n\"symfony/console\": \"~2.6|~3.0\",\n\"symfony/debug\": \"~2.6|~3.0\",\n\"symfony/expression-language\": \"~2.6|~3.0\"\n Maybe you use the wrong symfony recipe because the given information about your symfony-installation allow also symfony 3.\n\nTry `require 'recipe/symfony3.php';` (note the 3) instead of `require 'recipe/symfony.php';` at the beginning of your deploy.php\n Thanks for the suggestion @nemoinho. While that didn't work, this did.\n\nAdding set('bin_dir', '/vendor/symfony'); did work.\n\nThings are deploying perfectly now.\n\nThanks everyone.\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nability change $PATH variable per server (#608 won't fix this issue) because we need to execute commands that execute other commands that are not in $PATH for some bizarre reason\n on deployer, \n$PATH = /usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/games:/usr/local/rvm/bin\n\non ssh\n$PATH = /usr/local/rvm/gems/ruby-2.1.2@global/bin:/usr/local/rvm/rubies/ruby-2.1.2/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/usr/local/pgsql/bin:/usr/local/mysql/bin:/usr/local/nodejs/bin:/usr/local/rvm/bin:/home/<classified>/bin\n\nfor some reason there is more directories in PATH when connecting via SSH and we need some directories to be in path when deploying(for compiling JS and CSS)\ndeployer own env() doesn't cut it, because you cannot inject it inside code(and even then it doesn't work, because we need ruby, and ruby needs it's binary path to be in $PATH)\n yes, I did it\n\n``` php\n run('PATH={{path}} php5 {{release_path}}/yii asset ');\n```\n\nand on server\n\n``` php\n->env('path', '$PATH:/usr/local/rvm/gems/ruby-2.1.2@global/bin:/usr/local/rvm/rubies/ruby-2.1.2/bin')\n```\n\nbut it's quite cumblesome\n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | 3.2 |\n| Local Machine OS | OSX |\n| Remote Machine OS | Linux |\n### Description\n\nWhen using deployer 3.2 the usage of composer.phar can be corrupt.\n\nWould be necessary to add an {{release_path}}/composer.phar.\nSo it would look like this:\n\n```\nenv('bin/composer', function () {\n    if (commandExist('composer')) {\n        $composer = run('which composer')->toString();\n    }\n\n    if (empty($composer)) {\n        run(\"cd {{release_path}} && curl -sS https://getcomposer.org/installer | php\");\n        $composer = '{{bin/php}} {{release_path}}/composer.phar';\n    }\n\n    return $composer;\n});\n```\n Fixed: https://github.com/deployphp/deployer/pull/616\n Can you please add a v3.2.1 version ?\n  | Q | A |\n| --- | --- |\n| Issue Type | Feature |\n| Deployer Version | 4 |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nPlease, add an option to set which users have write permissions in the <code>writable_dirs</code>.\n\nUse case:\n    - The web server user is 'UserA'\n    - You deploy using 'userB' because is the only user with permissions to connect over ssh.\n    - You have an FTP user 'UserC'.\n\nWith the current option, you can't set permission for UserC.\n\nThis options should be per server, so every server can use different users.\n\nI also notice that deployer use:\n<code>ps **aux** | grep -E '[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx' | grep -v root | head -1 | cut -d\\  -f1</code>\n\nAnd Symfony Docs use <code>ps **axo user,comm** | grep -E '[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx' | grep -v root | head -1 | cut -d\\  -f1</code>\n\nIn my case, the first command (the deployer one) determine an incorrect user...\n I think your case, you should custom task `deploy:writable` by yourself.\nDefault task of Deployer only cover common cases\n I will make a PR tonight to fix the command and other to introduce the writable users. I not agree whit @oanhnn, other deploy tool, like capistrano fore example use this feature. WDYT?\n I think your pull request is good. But it only resolved a case. I don't want common tasks more complex.\nWe're thinking about solution using group for set writable permissions in version 4.x. It is better. \n  | Q | A |\n| --- | --- |\n| Issue Type | Bug |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nComposer packages aren't in sync\n @gperdomor Please show more information for reproduce bug.\n @oanhnn  I'm using the version \"4.x-dev\", but running <code>composer update</code> i don't get the last version from repository, i need the changes introduced in #608...\n @elfet Can your check synchronization in packgist site and follow this issue.\n Any progress here?\n @elfet solved... Thank you :D\n  :+1:  I am agree.\n @elfet Is this feature implemented by commit 5fa083c072254784c8472d2e89603419102d665f ?\n  All in all it looks good to me but would you really download composer if it's missing? I think that should only rise an exception and stop deployer. And maybe deployer should test for a few common locations of composer before doing that. I really don't like the idea, that a application loads extra software without warning or at least an info.\n Yep, unfortunately, but maybe we can keep this topic  on the agenda for a next major release.\n Users can void a download `composer.phar` by a task upload `composer.phar` to shared directory and:\n\n```\nenv('bin/composer', '{{bin/php}} {{deploy_path}}/shared/composer.phar');\n\ntask('upload_composer', function() {\n     upload('/path/to/your/composer.phar', '{{deploy_path}}/shared/');\n});\n```\n\n:smile: \n I think we will merge to both 3.1.x and 4.x\n @elfet I merged branch `custom_bin` and `master` to [`oanhnn/4.x`](https://github.com/oanhnn/deployer/tree/4.x). Now you can merge :smile: \n Yeah, I merged :smile: \n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | #586 |\n\nThis add initial support for configure a custom php for each server.\n\nSome servers, need use php-cli to install vendors. This PR use a new env var (<code>composer_require_cli</code>) to handle that too\n I think we not need env variable `composer_require_cli`\n Please see my comment in #586, and close this PR\n @elfet @oanhnn in my case i need run <code>php-cli composer.phar install</code> because <code>php composer.phar install</code> not work. I can remove the <code>php-cli</code> env and override the composer task in my <code>deploy.php</code> file but maybe someone else have this problem.\n Close for discuss in #586\n @gperdomor You are installed both `php`, `php-cli` ?\nPlease show your version `php` and `php-cli`. \n  | Q | A |\r\n| --- | --- |\r\n| Issue Type | Question |\r\n| Deployer Version | N/A |\r\n| Local Machine OS | N/A |\r\n| Remote Machine OS | N/A |\r\n### Description\r\n\r\nI've setup my project in bitucket.  \r\nI've also setup my computer ssh key and remote server ssh key in the bitbucket repo.  \r\nI can also clone my repo in from remote server.  \r\n### Output log\r\n\r\nBut when I run `dep deploy` I get error: \r\n`\r\n  [RuntimeException]\r\n  Host key verification failed.\r\n  fatal: Could not read from remote repository.\r\n  Please make sure you have the correct access rights\r\n  and the repository exists.\r\n`\r\nverbose output also is: \r\n\r\n```\r\n\u27a4 Executing task deploy:prepare\r\n\u21b3 on [production]\r\n\u2022 done on [production]\r\n\u2714 Ok [4s 651ms]\r\n\u27a4 Executing task deploy:release\r\n\u21b3 on [production]\r\n\u2022 done on [production]\r\n\u2714 Ok [1s 914ms]\r\n\u27a4 Executing task deploy:update_code\r\n\u21b3 on [production]\r\n\r\n\r\n  [RuntimeException]\r\n  Host key verification failed.\r\n  fatal: Could not read from remote repository.\r\n  Please make sure you have the correct access rights\r\n  and the repository exists.\r\n\r\n\r\nException trace:\r\n () at phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:114\r\n Deployer\\Server\\Remote\\PhpSecLib->run() at phar:///usr/local/bin/dep/src/functions.php:296\r\n run() at /home/vagrant/app/deploy/common.php:177\r\n {closure}() at n/a:n/a\r\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:79\r\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:43\r\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\r\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:259\r\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:844\r\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:192\r\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:123\r\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:101\r\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:64\r\n require() at /usr/local/bin/dep:4\r\n\r\ndeploy [-p|--parallel]\r\n```\r\n### Content of `deploy.php`\r\n\r\nI don't figure out what is the problem. My server configuration is: \r\n\r\n```\r\nset('repository', 'git@bitbucket.org:username/projetct.git');\r\nset('keep_releases', 3);\r\n// Configure servers\r\nserver('production', 'x.x.x.x')\r\n    ->user('root')\r\n    ->password(\"password\")\r\n    ->env('deploy_path', '/var/www/temp');\r\n```\r\n\r\nI have required `laravel.php` from `deploy.php`  \r\nand required `common.php` from `laravel.php`.\r\nI've also removed some `set` commands like `shared_dir` in `common.php` because it was changed in `laravel.php`\r\n\r\nDescription went too long. sorry about that.\r\n ```\r\n\u27a4 Executing task deploy:prepare\r\n\u21b3 on [production]\r\n> echo $0\r\n< bash\r\n<\r\n> if [ ! -d /var/www/temp ]; then mkdir -p /var/www/temp; fi\r\n> cd /var/www/temp && if [ ! -d releases ]; then mkdir releases; fi\r\n> cd /var/www/temp && if [ ! -d shared ]; then mkdir shared; fi\r\n\u2022 done on [production]\r\n\u2714 Ok [4s 590ms]\r\n\u27a4 Executing task deploy:release\r\n\u21b3 on [production]\r\n> mkdir /var/www/temp/releases/20160326101711\r\n> cd /var/www/temp && if [ -h release ]; then rm release; fi\r\n> ln -s /var/www/temp/releases/20160326101711 /var/www/temp/release\r\n\u2022 done on [production]\r\n\u2714 Ok [1s 864ms]\r\n\u27a4 Executing task deploy:update_code\r\n\u21b3 on [production]\r\n> git version\r\n< git version 1.9.1\r\n<\r\n> find /var/www/temp/releases -maxdepth 1 -mindepth 1 -type d\r\n< /var/www/temp/releases/20160325200044\r\n< /var/www/temp/releases/20160326101711\r\n< /var/www/temp/releases/20160325200028\r\n<\r\n> readlink /var/www/temp/release\r\n< /var/www/temp/releases/20160326101711\r\n<\r\n> git clone -b master --depth 1 --recursive -q git@bitbucket.org:username/project.git /var/www/temp/releases/20160326101711 2>&1\r\n\r\n\r\n  [RuntimeException]\r\n  Host key verification failed.\r\n  fatal: Could not read from remote repository.\r\n  Please make sure you have the correct access rights\r\n  and the repository exists.\r\n\r\n\r\nException trace:\r\n () at phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:114\r\n Deployer\\Server\\Remote\\PhpSecLib->run() at phar:///usr/local/bin/dep/src/functions.php:296\r\n run() at /home/vagrant/app/deploy/common.php:177\r\n {closure}() at n/a:n/a\r\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:79\r\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:43\r\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\r\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:259\r\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:844\r\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:192\r\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:123\r\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:101\r\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:64\r\n require() at /usr/local/bin/dep:4\r\n\r\ndeploy [-p|--parallel]\r\n```\r\n\r\nI can clone my project manually in remote server via `git clone`\r\n @oanhnn do want me to run \n`$ ssh root@x.x.x.x 'git clone git@bitbucket.org:username/projetct.git /tmp/project'`\non my remote server?\nI've run that on the remote server and cloned the project.\n\n> Other option, you can switch to using private-public key or foward agent to ssh by deployer.\n\nDon't know so much about deployer. I would really appreciate if you could show me how to do that. Tnx\n > Your problem is ssh by password and git clone by key\n\n@oanhnn when using deployer, directories are created so I conclude that ssh password for remote server is correct. \nBut I don't know how to configure git clone key on my remote server or on deployer. Would you give a hint about it.Tnx\n @oanhnn I run `dep deploy` on vagrant. I'm also Bitbucket user.\nI can run `$ ssh root@x.x.x.x 'git clone git@bitbucket.org:username/projetct.git /tmp/project'`\non vagrant machine it clones the project and doesn't ask me any password. \nI've also added 3 deploy key to bitbucket : my remote server, my host machine, and my vagrant machine key.  \nBut again I get the same issue.\nWhat should I do now?\n @oanhnn yeah that's right.\n @oanhnn you didn't provide any example? do you plan to?\n @mehrdaad \nPlease read https://github.com/oanhnn/deployer-example/blob/master/docs/run-deployer-on-homestead.md and star if it is useful :smile: \n @elfet I want add this document to https://github.com/deployphp/how-to but i don't know construct of this repo. Please create first commit. :smile: \n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | N/A |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n### Description\n\nMy Deployer process is generally:\n- checkout master\n- merge in from development\n- push\n- run `vendor/bin/deploy`.\n\nSometimes I forget to push. Then I wait for the entire deploy process before I realize my branch is still dirty.\n\nSo I use a task like this to help me out:\n\n```\n/**\n * Start by checking that the current git branch is:\n * - master\n * - fully pushed\n */\ntask('deploy:checkgit', function() {\n    if (trim($branch = `git rev-parse --abbrev-ref HEAD`) !== 'master') {\n        writeln(\"<error>You should release from master, not $branch.</error>\");\n        exit(1);\n    }\n\n    // check that there are no modified files\n    exec(\"git diff-index --quiet HEAD\", $output, $exitCode);\n    if ($exitCode) {\n        writeln(\"<error>Branch is not clean, not starting a deploy process.</error>\");\n        exit(1);\n    }\n\n    // update remotes and check git status\n    `git remote update`;\n    $local = trim(`git rev-parse @`);\n    $remote = trim(`git rev-parse @{u}`);\n\n    if ($local !== $remote) {\n        writeln(\"<error>Your `master` is not equal to `origin/master`, you should push first.</error>\");\n        exit(1);\n    }\n\n})->once()->desc('Check that git is clean.');\n```\n\nWould this be a useful feature to continue for anyone else?\n There are a lot of different work flow. Co i think this must not go into common.php recipe. \nBest solution is to write article about how to get task like this. \nHere new repo for stuff like this: https://github.com/deployphp/how-to\n Thanks for the feedback! I'll stick this into the how-to repo.\n  We are using a deployer task to reload our CakeResque workers using this code : \n\n```\ntask('resque', function () {\n    run(\"cd {{deploy_path}}/web/app && ./Console/cake CakeResque.CakeResque stop -a\");\n    run(\"cd {{deploy_path}}/web/app && ./Console/cake CakeResque.CakeResque load\");\n})->desc('Red\u00e9marrage des workers Resque du client');\n```\n\nThe first run() is ok but the second you stay stuck. Do you have any idea ? \nWe tryed to spot the blocking line : https://github.com/wa0x6e/Cake-Resque/blob/master/src/Shell/CakeResqueShell.php#L765\n\nWhen we execute these two lines directly on the server, it work like a charm.\n\nThanks in advance, \n Shouldn't this be more like: \n\n```\ntask('resque', function () {\n    run(\"cd {{deploy_path}}/web/app && ./Console/cake CakeResque.CakeResque stop -a && ./Console/cake CakeResque.CakeResque load\");\n })->desc('Red\u00e9marrage des workers Resque du client');\n```\n That is doing ./Console/cake CakeResque.CakeResque load?\n @oisvidi : I tried already but same issue\n\n@elfet : When I do CTRL + C to stop the task and check, the workers started ! So I guess it do the work but do not return anyhing ? Is that make sense ? \n try add `&`.\n We need how-to pages.\n @elfet Adding `&` did not change.\n\n@oanhnn  We added `>> /dev/null 2>&1 &` and it works ! \nI have one more question about your code. Why exactly did you delete the cake_core_file_map file ? \nI thing we may have the same issue with realpath ? \n\nThanks\n @oanhnn Thanks a lot. You saved my day ;) \n  | Q | A |\n| --- | --- |\n| Issue Type | Feature Request |\n| Deployer Version | 4.x |\n| Local Machine OS | N/A |\n| Remote Machine OS | N/A |\n#538\n\nAllow user to specify there to look for php bin.\n\n``` php\nenv('php_bin', function () {\n    return run('which php');\n});\n```\n Support for reading composers bin-dir instead of writing it multiple places? https://getcomposer.org/doc/06-config.md#bin-dir \n\nOr you mean php itself?\nI think the deployer user should be properly setup with php pointing to the intended php binary if so and deployer should ignore this issue completely. \n He meant PHP itself. I really like the idea, because than I can use deployer as well to deploy legacy code which may needs special php-versions.\n @elfet i submit a PR to handle this issue :D\n @elfet I think we allow setting up all bin path like:\n\n```\nenv('bin.php', function() {\n   return run('which php');\n});\nenv('bin.git', '/usr/local/git1.7/bin/git');\nenv('bin.composer', null); // for using local composer\n```\n\nBecause in some cases, users using vagrant, they can mount software sources (like php, git, apache, ..) and build custom.\n What are you think a bout multi version php. Fix PATH is not good solution.\n > run('php ...'); Maybe some replace('php', '/...')?\n\nUsers can custom like `env('bin.git', '/usr/local/git1.7/bin/git');`\n I don't like the idea of modify the $PATH env. But i like to have a map of bin paths, with default values and configurable by server. For example, i have a <code>deploy.yml</code> file with the deploy configuration, with the map of bin executable shoul be something like this:\n\nmmmmm having <code>env(bin.executable, path_to_executable)</code> sounds great... and can be configured by server. In my case i have a <code>deploy.yml</code> with this content:\n\n<pre><code>timezone: America/Caracas\ngit:\n  repository: url_to_repo.git\n  branch: master\nservers:\n  prod:\n    host: domain.com\n    stage: production\n    deploy_path: 'path/for/deploy'\n    port: 22\n    ssh_user: user\n    password: password\n    bin: # Alternative names: bins, exec, executables, paths?\n        php: '/usr/local/bin/php'\n        phpcli: '/usr/local/bin/php-cli' # For composer install (I need this), by default (if null) use the php path\n        git: '/usr/local/bin/git'\n  development:\n    host: other_host\n    stage: development\n    deploy_path: 'path/for/deploy'\n    port: 22\n    ssh_user: user\n    password: password\n    bin:\n        php: '/usr/bin/php'\n        git: '/usr/bin/git'\n        #php-cli is not configured so '/usr/bin/php' is used in composer install\n</code></pre>\n\nThat file should be parsed in the <code>deploy.php</code> file\n That's a great Idea to make all the executable configurable, but manipulating the $PATH only ends in rubbish and should be avoided in any way. And I would prefer the way oanhnn suggested.\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n\nAllow people to name release folders (to tag) without replacing task deploy:release .\n This is very useful feature, but with this place a lot of problems (like different timezones between developers), to it's must be refactored at all.\n @elfet This commit simply moved the $release = date(\"YmdHis\"); out of the task to an env() key. \n\nIf your developers have different timezones this change allows you to make a new env value which uses timezone. \n\nOr like me to use the git tag as release. \n Ok, i think it's ok. What do you think @oanhnn ?\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n\nUsing this to deploy Joomla. Have a few autoloading scripts for Joomla only checking if JEXEC is defined. This allows my autoloads to return if DEPLOYER is defined. \n That is this about? What you trying to check?\n @elfet Im not suggesting that this library use this constant internally. It is for projects and other libraries where deployer is included as require-dev and has a lot of autoloading libraries. \n\nMy Joomla config library (which sets up a DIC) has a check for a few constants or die since it requires the Joomla Application and Joomla classes/functions for various stuff. I can now add this line at the start of the config library: if (defined(\"DEPLOYER\")) return;\n You mean if you call it as `dep` some autoloaded staff will run?\n @elfet Yes. The vendor/bin/dep loads composer autoloader, which autoloads some library files. With this constant other autoloading libraries can (if they want to) know deployer is the application running. \n\nI can fix this problem in my libraries without this commit. But I figured it would be nice for other libraries to know which app is running. \n Ok, but please fix some code styles.\n @oanhnn That can work if we move the declaration of DEPLOYER_BIN above the foreach loading autoloaders. \n @oanhnn it just means DEPLOYER is the application running. The value is irrelevant for that purpose. \n I think it's ok to have a set on constants `DEPLOYER, DEPLOYER_*`.\n I think some legacy code may load at this point:\n\n``` php\nrequire $file;\n```\n I think its when composer load files with PSR-0.\n Composer has an autoload index which loads the specified files at all times. \n\ndeployer is in the project require-dev so it's not installed on the server but it is installed on my machine (and others when they'll work on this project again). \n\nI added these lines in the autoloaded files which throw a tantrum when JEXEC is not defined. \n\n```\nif (class_exists(\"ComposerAutoloaderInitVidi\", false)) {\n        \\error_log(\"This file was loaded by composer autoload but not in Joomla context! \" . __FILE__ . \" !\", 0);\n        return;\n    }\n```\n  | Q | A |\n| --- | --- |\n| Bug fix? | No |\n| New feature? | Yes |\n| BC breaks? | No |\n| Deprecations? | No |\n| Fixed tickets | N/A |\n\nThis PR is to make other PR has above Q&A table as default.\nRef: [Issue and Pull Request templates](https://github.com/blog/2111-issue-and-pull-request-templates) feature. \n What's issue template content?\n @oanhnn : Issue template added. Can you check it out?\n This is awesome! \n\n@oanhnn let's create section about contributors on deployer.org? :)\n  Sorry for creating a new issue but I've got a problem.\nRight now for a project I'm using git locally but that's not on any site like github.  \nI want to deploy my app directly from my machine to the vps.  \nIs it possible to deploy my app from my local master branch to vps directly?\nAnd if not how about deploying the whole directory to the vps?\n Have you attempted to install git on your VPS?\n\n`apt-get install git`\n @jakenoble yeah git is installed. What I don't figure out is how to deploy from my machine?  \nWhat configuration on my end should be done?\n What have you tried so far?\n\nYou start the deployment process from your local machine and it SSH's to your remote, uses git to download the code base and set up your app.\n `uses git to download the code base and set up your app.` this is the problem.\nThe project is not on GitHub. so `set('repository', 'git@github.com:org/app.git')` is nonsense.\nThe whole project is on my local machine. could I describe my problem?\n It doesn't need to be on github, just in a repo that Deployer supports.\n\nIf you're not using some sort of source control then you have bigger issues. Even if you're a lone developer like myself.\n @jakenoble let me say this way: my project is not on any online source control online like GitHub, bitbucket etc. But I'm using git locally. now I want to deploy my app from my machine to vps.  \nThat's all I need.\n I do not think Deployer does this.\n\nI think you need something else then or a custom solution, your case seems fairly niche.\n I don't think this is niche. There are many cases that a developer want to deploy to vps from local machine. Isn't it?\n I deploy using my local machine to a VPS, but the code is just pulled from a repo where is stored and versioned using git. Your repo is not remote and presumably cannot be accessed on any publicly available IP or domain so Deployer cannot locate it. What you need Deployer todo is export the code locally, move it to the server and then run any custom commands to set up the app, I am sure you can do that with a custom recipe in Deployer using SCP or SFTP to move the files to the VPS.\n\nI would say its niche to have code in one place and not in remote source control of some sort as at least a back up? What if your machine was stolen tonight? Or your office burnt down along with your machine and all your local git repos?\n Already tried `set('repository', 'file:///<pathtoyourlocalgit/app.git')` or `set('repository', '/<pathtoyourlocalgit/app.git')` ?\nJust a shot in the dark...\n @sr972 I am fairly sure that will fail, its run from the remote VPS, so `file:///` will not exist.\n Oh sure.. Checkout is going to proceed on remote not on local.. My fault...\nBut you can use `runLocally(string $command)` and checkout local and then rsync it to the vps. \n @sr972 Yes, thats a good idea. I have never used `runLocally` other than for tests.\n Or you can use this recipe: https://github.com/deployphp/recipes/blob/master/docs/rsync.md\n Why not use bitbucket? Unlimited free private repos for teams up to 5 people. How git basically works is you have a repo on your machine and usually a master on a remote server. \nYou push to that master repo, tag it and push tag, then use deployer to deploy to your webserver. \n\nAnything not in the master repo does not exist as far as any developers on your project are concerned. \n @oisvidi Din't know bitbucket was free for small teams.Tnx for telling! tnx\n @mehrdaad GitLab.com is also a very good choice.\nhttps://about.gitlab.com/gitlab-com/\n1. Unlimited repositories\n2. Unlimited private collaborators\n3. 10GB disk space per project (including Git LFS)\n4. Unlimited total disk space\n5. Completely free, no credit card required\n Hi @mehrdaad \n\nI was with same trouble and I fix it overriding the `deploy:update_code` task: https://github.com/deployphp/deployer/blob/master/recipe/common.php#L173\n\n``` php\n// skip git clone\ntask('deploy:update_code', function () {});\n```\n\nThen you can just copy the local directory to your deploy server via ssh.\n  I installed and configured deployer on a clean new installation and use different users for deployment and httpd.\n\nSo the directories are owned by my deployment-user. Due to the recipe of symfony and symfony3 the cache should be writable for users of the same group but after the cache warmup the prod-directory looks like this (php_deployer is my deployment-user www-data is also in group php_deployer):\n\n```\ndrwxrwxrwx 3 php_deployer php_deployer 4096 Mar  8 00:11 .\ndrwxr-xr-x 4 php_deployer php_deployer 4096 Mar  8 00:11 ..\ndrwxr-xr-x 6 php_deployer php_deployer 4096 Mar  8 00:11 prod\n```\n\nBut to run symfony it has to be \n\n```\ndrwxrwxrwx 3 php_deployer php_deployer 4096 Mar  8 00:11 .\ndrwxr-xr-x 4 php_deployer php_deployer 4096 Mar  8 00:11 ..\ndrwxrwxr-x 6 php_deployer php_deployer 4096 Mar  8 00:11 prod\n```\n\nI created a workaround for this that looks like this:\n\n```\n/**\n * Make cache writable again after warmup\n */\ntask('deploy:make_cache_writable', function () {\n    run(\"chmod -R g+w {{cache_dir}}\");\n})->desc('Make cache writable again');\n\nafter('deploy:cache:warmup', 'deploy:make_cache_writable');\n```\n Yes! I really want to create better docs, i think this is 50% success of open source libs.\nI think about section with hot-to or faq.\n I'm totally fine with that, but I have one appeal left. If you do so you should remove the lines [49-51](https://github.com/deployphp/deployer/blob/master/recipe/symfony.php#L49-L51) from the symfony-recipe because they are just confusing and have not really an effect.\n After some research I found another possible reason for this behaviour. The deploy-task of the symfony-recipe has the wrong order in my opinion:\n\n```\n/**\n * Main task\n */\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:create_cache_dir',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:assets',\n    'deploy:vendors',\n    'deploy:assetic:dump',\n    'deploy:cache:warmup',\n    'deploy:symlink',\n    'cleanup',\n])->desc('Deploy your project');\n```\n\nThe task `deploy:writable` should be called after the warmup because all previous tasks should always run with the privileges of the deploying user and after that the recipe-specific configuration should be set. In that case all the given functionality of the recipe can be used, and `set('writable_dirs', [\u2026])` works again as expected.\n\nBut the marked lines are still obsolete ;-)\n Done.\n  I'm trying out this library and everything seemed going well until I noticed some problems with the folders the Laravel framework needs to be writable. If I only set those folders as writable and not shared the permissions are set correctly, but if I set those folders as both writable and shared they won't get the writable permissions. I don't use the Laravel recipe but a custom file based on the majority of that recipe; I just added the **writable_dirs** task and some other things my app needs.\n\nAm I missing something or why could this be happening? I could leave those folders as only writable but not shared, but that wouldn't be useful because shared folders are the main point of an atomic deployment.\n\nHope I explained myself. Thank you.\n I noticed this too. I found that the writable permission was being set correctly on the `storage` directory in each release (it appears in each release because `storage` isn't a shared directory, it's the subdirectories in the `storage` directory that are shared), but the writable permission wasn't being set on the subdirectories that were shared (`storage/app` etc).\n Hi guys. Need to check if deploy:writeable task can make shared folders writable. May be this feature is missing.\n@oanhnn can you check?\n @oanhnn Sure. This is my **deploy.php** file. I'm testing it locally first, before testing on a VPS. \n\n```\nrequire_once 'recipe/common.php';\n\n//shared dirs\nset('shared_dirs', [\n    'storage/app',\n    'storage/framework/cache',\n    'storage/framework/sessions',\n    'storage/framework/views',\n    'storage/logs',\n    'public/images/book-covers',\n    'public/images/book-photos/photos',\n    'public/images/book-photos/thumbnails'\n]);\n\n\n//writable dirs\nset('writable_dirs', [\n    'bootstrap/cache',\n    'storage',\n    'public/images/book-covers',\n    'public/images/book-photos/photos',\n    'public/images/book-photos/thumbnails'\n]);\n\n//tasks\n\ntask('migration', function() {\n  run('php {{release_path}}/artisan migrate --force');\n})->desc('Artisan migrations');\n\ntask('env_file', function() {\n    upload('/home/localuser/.librosjbenv', '{{release_path}}/.env');\n})->desc('Copy environment file');\n\ntask('reload:apache', function() {\n    run('service apache2 reload');\n})->desc('Reload Apache Server');\n\n\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:symlink',\n    'env_file',\n    'migration',\n    'cleanup',\n])->desc('Deploy your project');\n\nafter('deploy', 'reload:apache');\nafter('deploy', 'success');\n\n\n\nlocalServer('local')\n->user('localuser')\n->stage('local')\n->env('deploy_path', '/var/www/librosjbprod');\n\nset('repository', 'repo_path');\n```\n @oanhnn  I made several tests doing what you suggest but it didn't work. These days I was doing some research to see how other platforms handle atomic deployments and I attempted what some of them do: give the write permissions to the folder the symlinks point to (in this case, the **shared** folder that Deployer creates). I no longer use Deployer's writable task; instead, I created a custom task that gives write permission to the shared folder. I don't know if this is the way I am supposed to use Deployer, but it's working fine for my needs. What do you think?\n Is this still an issue? I suggest to change the writeable/shared folders to shared entire `storage` and use a symlinked public storage folder, see #619 \n  Symfony 3 uses the directory var/sessions to store all sessions created. This directory is missing in der symfony3 recipe.\n\nIt should at least be added to the \"writable_dirs\" array. Additionally I think it should be also added to the \"shared_dirs\" array to ensure that the sessions are not destroyed during deployment.\n\nSource that it should be writable:\nhttp://symfony.com/doc/current/book/installation.html#checking-symfony-application-configuration-and-setup\n  Related to https://github.com/deployphp/deployer/pull/515\n  I need to restart apache after deploy because it seems symlinks are still cached for a little while (has no one noticed this?? - at least when you use .htaccess rewriting). \n\nSo, my current deploy is as the user. At the final step I need to su to root so that I can restart apache. How can I do that? (password should be typed in). thanks.\n It's the same like restart PHP FPM.\nSee https://github.com/deployphp/docs/blob/master/examples.md\n  | Q | A |\n| --- | --- |\n| Bug fix? | Yes |\n| New feature? | no |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | n/a |\n\nFixed typo errors of inline comments for Drupal 7 recipe.\n  It's possible to configure dependencies between two servers?\n\nSomething like: \n\n``` php\nserver('test', 'localhost')\n    ->user('user')\n    ->password('pass')\n    ->env('deploy_path', '/home/www'),\n    ->env('run_test', true),\n    ->stage('production');\n\nserver('prod', 'domain.com')\n    ->user('user')\n    ->password('pass')\n    ->env('deploy_path', '/home/www')\n    ->env('extra_stuff', '...')\n    ->stage('production'),\n    ->dependencies(['test'])\n```\n\nif the server test to fail then the deploy process wil be aborted\n  All is in the question.\n\nThanks for this very good soft :)\n  | Q | A |\n| --- | --- |\n| Bug fix? | yes |\n| New feature? | no |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | #558 |\n :+1: Merged!\n  If any other files/directories appear in deploy_path/releases/ dir, deployer thinks it is a release without any check. It leads to problems with keep_releases: instead of releases deployer keeps other entries.\n\nLive example:\n\n``` sh\ndeploy/releases$ ls -1\n20160216103038\n20160216105529\n20160216105529.bak\n20160216110130\nruntime\n```\n\n`runtime` is a garbage from slightly misconfigured yii. `20160216105529.bak` is a manually created backup.\n\n`dep cleanup` in this sutuation (assuming that keep_releases is 3) would remove last 2 releases, leaving only latest one along with `runtime` and `20160216105529.bak`:\n\n``` sh\n20160216105529.bak\n20160216110130\nruntime\n```\n\nThus current behaviour may lead to unwanted removal of releases. It can even remove all releases including current.\n @deployphp/maintainer what you think?>\n What about pull request I submitted? Is it ok or needs rework to be accepted?\n  Nice! way to solve task/object problem.\n Cool!.\n   @oanhnn a lot of people install it via composer. I think it's good to have both ways.\n This pull request is obsolete since i cherry-picked the relevant commit which was merged. Thank you @vpx !\n  Following the guidelines to get started gives me an error:\n\n```\n$ curl -sSO http://deployer.org/releases/v3.0.10/deployer.phar\n$ cat > deploy.php\n<?php\n\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:symlink',\n    'deploy:cleanup'\n]);\n$ php deployer.phar help\nPHP Warning:  array_map(): An error occurred while invoking the map callback in phar:///home/me/test/deployer.phar/src/functions.php on line 168\nPHP Stack trace:\nPHP   1. {main}() /home/me/test/deployer.phar:0\nPHP   2. require() /home/me/test/deployer.phar:4\nPHP   3. require() phar:///home/me/test/deployer.phar/bin/dep:58\nPHP   4. task() /home/me/test/deploy.php:9\nPHP   5. array_map() phar:///home/me/test/deployer.phar/src/functions.php:168\nPHP Fatal error:  Uncaught exception 'RuntimeException' with message 'Object `deploy:prepare` does not exist in ScenarioCollection.' in phar:///home/me/test/deployer.phar/src/Collection/Collection.php:27\nStack trace:\n#0 phar:///home/me/test/deployer.phar/src/Task/Scenario/ScenarioCollection.php(21): Deployer\\Collection\\Collection->get('deploy:prepare')\n#1 phar:///home/me/test/deployer.phar/src/functions.php(167): Deployer\\Task\\Scenario\\ScenarioCollection->get('deploy:prepare')\n#2 [internal function]: {closure}('deploy:prepare')\n#3 phar:///home/me/test/deployer.phar/src/functions.php(168): array_map(Object(Closure), Array)\n#4 /home/me/test/deploy.php(9): task('deploy', Array)\n#5 phar:///home/me/test/deployer.phar/bin/dep(58): require('/home/me/test...')\n#6 /home/me/test/deployer.phar(4): require('phar:///home/ma...')\n#7 {main}\n  thrown in phar:///home/me/test/deployer.phar/src/Collection/Collection.php on line 27\n```\n\nAdding a `require 'recipe/common.php';` at the top doesn't make any difference.\n\nHow is one supposed to use recipes, tasks etc. from within the `deployer.phar`?\n\nInstalling Deployer as Composer dependency is not an option due to conflicts with other project dependencies.\n `require 'recipe/common.php';`?\n @elfet As written in the OP this doesn't help. ;-) And I cannot imagine this to work unless Deployer adds the internal phar root path to the PHP include path at runtime.\n Here again including the `require`:\n\n```\n$ curl -sSO http://deployer.org/releases/v3.0.10/deployer.phar\n$ cat > deploy.php\n<?php\n\nrequire 'recipe/common.php';\n\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:symlink',\n    'deploy:cleanup'\n]);\n$ php deployer.phar help\nPHP Warning:  array_map(): An error occurred while invoking the map callback in phar:///tmp/test/deployer.phar/src/functions.php on line 168\nPHP Stack trace:\nPHP   1. {main}() /tmp/test/deployer.phar:0\nPHP   2. require() /tmp/test/deployer.phar:4\nPHP   3. require() phar:///tmp/test/deployer.phar/bin/dep:58\nPHP   4. task($name = 'deploy', $body = array (0 => 'deploy:prepare', 1 => 'deploy:update_code', 2 => 'deploy:vendors', 3 => 'deploy:symlink', 4 => 'deploy:cleanup')) /tmp/test/deploy.php:11\nPHP   5. array_map(class Closure { public $static = array ('deployer' => class Deployer\\Deployer { ... }); public $parameter = array ('$name' => '<required>') }, array (0 => 'deploy:prepare', 1 => 'deploy:update_code', 2 => 'deploy:vendors', 3 => 'deploy:symlink', 4 => 'deploy:cleanup')) phar:///tmp/test/deployer.phar/src/functions.php:168\n\nWarning: array_map(): An error occurred while invoking the map callback in phar:///tmp/test/deployer.phar/src/functions.php on line 168\n\nCall Stack:\n    0.0100     461200   1. {main}() /tmp/test/deployer.phar:0\n    0.0102     465232   2. require('phar:///tmp/test/deployer.phar/bin/dep') /tmp/test/deployer.phar:4\n    0.0273    2733472   3. require('/tmp/test/deploy.php') phar:///tmp/test/deployer.phar/bin/dep:58\n    0.0300    2921808   4. task($name = 'deploy', $body = array (0 => 'deploy:prepare', 1 => 'deploy:update_code', 2 => 'deploy:vendors', 3 => 'deploy:symlink', 4 => 'deploy:cleanup')) /tmp/test/deploy.php:11\n    0.0302    2940032   5. array_map(class Closure { public $static = array ('deployer' => class Deployer\\Deployer { ... }); public $parameter = array ('$name' => '<required>') }, array (0 => 'deploy:prepare', 1 => 'deploy:update_code', 2 => 'deploy:vendors', 3 => 'deploy:symlink', 4 => 'deploy:cleanup')) phar:///tmp/test/deployer.phar/src/functions.php:168\n\nPHP Fatal error:  Uncaught exception 'RuntimeException' with message 'Object `deploy:cleanup` does not exist in ScenarioCollection.' in phar:///tmp/test/deployer.phar/src/Collection/Collection.php:27\nStack trace:\n#0 phar:///tmp/test/deployer.phar/src/Task/Scenario/ScenarioCollection.php(21): Deployer\\Collection\\Collection->get('deploy:cleanup')\n#1 phar:///tmp/test/deployer.phar/src/functions.php(167): Deployer\\Task\\Scenario\\ScenarioCollection->get('deploy:cleanup')\n#2 [internal function]: {closure}('deploy:cleanup')\n#3 phar:///tmp/test/deployer.phar/src/functions.php(168): array_map(Object(Closure), Array)\n#4 /tmp/test/deploy.php(11): task('deploy', Array)\n#5 phar:///tmp/test/deployer.phar/bin/dep(58): require('/tmp/test/deplo...')\n#6 /tmp/test/deployer.phar(4): require('phar:///tmp/tes...')\n#7 {main}\n  thrown in phar:///tmp/test/deployer.phar/src/Collection/Collection.php on line 27\n\nFatal error: Uncaught exception 'RuntimeException' with message 'Object `deploy:cleanup` does not exist in ScenarioCollection.' in phar:///tmp/test/deployer.phar/src/Collection/Collection.php on line 27\n\nRuntimeException: Object `deploy:cleanup` does not exist in ScenarioCollection. in phar:///tmp/test/deployer.phar/src/Collection/Collection.php on line 27\n\nCall Stack:\n    0.0100     461200   1. {main}() /tmp/test/deployer.phar:0\n    0.0102     465232   2. require('phar:///tmp/test/deployer.phar/bin/dep') /tmp/test/deployer.phar:4\n    0.0273    2733472   3. require('/tmp/test/deploy.php') phar:///tmp/test/deployer.phar/bin/dep:58\n    0.0300    2921808   4. task($name = 'deploy', $body = array (0 => 'deploy:prepare', 1 => 'deploy:update_code', 2 => 'deploy:vendors', 3 => 'deploy:symlink', 4 => 'deploy:cleanup')) /tmp/test/deploy.php:11\n    0.0302    2940032   5. array_map(class Closure { public $static = array ('deployer' => class Deployer\\Deployer { ... }); public $parameter = array ('$name' => '<required>') }, array (0 => 'deploy:prepare', 1 => 'deploy:update_code', 2 => 'deploy:vendors', 3 => 'deploy:symlink', 4 => 'deploy:cleanup')) phar:///tmp/test/deployer.phar/src/functions.php:168\n    0.0303    2941504   6. {closure:phar:///tmp/test/deployer.phar/src/functions.php:166-168}($name = 'deploy:cleanup') phar:///tmp/test/deployer.phar/src/functions.php:168\n    0.0303    2941504   7. Deployer\\Task\\Scenario\\ScenarioCollection->get($name = 'deploy:cleanup') phar:///tmp/test/deployer.phar/src/functions.php:167\n    0.0303    2941504   8. Deployer\\Collection\\Collection->get($name = 'deploy:cleanup') phar:///tmp/test/deployer.phar/src/Task/Scenario/ScenarioCollection.php:21\n```\n Put this at the end of your deploy.php\n\n<pre>\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:symlink',\n    'deploy:cleanup'\n]);\n</pre>\n\nHad the same problem and the order of the tasks is somehow important.\n @tliegl Not sure I understand but this is what I already have in my `deploy.php`.\n I had this with my own tasks. I wrote the group task at the top of my deploy.php and added the single tasks below it - I got the same error as you. After that I moved the single tasks at the top of the deploy.php and moved the group task at the end of the file. Then the error was gone.\n @tliegl Can you post your exact `deploy.php`?\n\nThe example I posted is taken straight from the docs and ATM I don't want/need to define custom tasks; I simply want to use a selection of tasks from the recipes. Thus in the most basic case all I want is a task group like this.\n Hm, in common recipe the cleanup task has no deploy prefix:\nhttps://github.com/deployphp/deployer/blob/master/recipe/common.php#L376\n @alaczi You where absolutely right about this, this fixes the issue, thanks. I've made a [PR which fixes this error in the docs](https://github.com/deployphp/docs/pull/50).\n  I made an attempt at doing this by setting the \"tag\" and \"branch\" variables but got this:\n\nwarning: Could not find remote branch 253d2d7d26e7c8da204326009ce45c514f928c45 to clone.\nfatal: Remote branch 253d2d7d26e7c8da204326009ce45c514f928c45 not found in upstream origin\n I think it is not possible with the default `common.php` recipe.\nYou can do this by overriding the default `deploy:update_code` to run:\n`git clone $repository` (without shallow copy, in contrast to shallow clone in default task)\n`git reset --hard $branch` (where you actually supply commit hash as branch)\n  Hello,\n\nI'd like to being able to call a task from another one, but I can't find any way to achieve it.\nI did search and found other people trying to do it too (#522, #506, #322) but the answers are workaround, not real solutions.\n\nFor example, I'd like to call a recipe task conditionnaly :\n\n``` php\ntask ('notify:slack', function () {\n    if (env('slack')) {\n        call('deploy:slack');\n    }\n});\n\nafter('deploy', 'notify:slack');\n```\n\nIt would also be convient if we could use it with askConfirmation, for instance :\n\n``` php\ntask('composer:confirm', function(){\n    if(askConfirmation('Do you need to update your dependencies ?', true)){\n        call('deploy:vendors');\n    }\n});\n```\n\nAn other way to achieve it would be to being able to get env variable from outside a task, but it seem tight binded to the context :\n\n``` php\n$tasks = [\n    'deploy:prepare',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:symlink',\n    'deploy:cleanup'\n];\n\nif (env('slack')) {\n    array_push($tasks, 'deploy:slack');\n}\n\ntask('deploy', $tasks);\n```\n\nPlease could you consider this feature request ?\n Hi! This is common question. But according to Deployer structure this is does not possible (It will broke parallel deployment at all).\nBut there is a solution. `call('deploy:slack');` it's look like a function call and can be a function: `callDeploySlack();` whick can be called there it's needed.\n\n``` php\n$subtask_1 = function () {...};\n$subtask_2 = function () {...};\n\ntask('subtask_1', $subtask_1):\ntask('subtask_2', $subtask_2);\n\ntask ('task', function () {\n    if ($condition) {\n        $subtask_1();\n    } else {\n        $subtask_2();\n    }\n});\n```\n\nSee more in #522.\n It's good thing, but i do not see how it will work with current \"function\" task. May be some cool feature for Deployer 4. (two types of tasks? func and object?)\nNow Deployer offers [Task](https://github.com/deployphp/deployer/blob/master/src/Task/Task.php) class. May be it's should be abstract class? Or `TaskInterface` for Deployer 4?\n  I suggest to split `deploy:vendors` task to two separate tasks:\n- 1st will just download `composer.phar` file.\n- 2nd will install project Composer packages.\n\nThe benefit of this is we can execute custom tasks after 1st one is completed, for example: installation / update of global packages.\n\nExample with Yii2 framework - we need to install [Composer Asset Plugin](https://github.com/francoispluchino/composer-asset-plugin) _before_ installing project packages:\n\n```\ncomposer global require \"fxp/composer-asset-plugin:~1.1.1\"\n```\n\nThis is only needed on first installation, then we only need to update this plugin.\n\nSkipping installation of this plugin leads to errors and application will not be working. Currently both Yii2 recipes ([basic](https://github.com/deployphp/deployer/blob/master/recipe/yii2-app-basic.php) and [advanced](https://github.com/deployphp/deployer/blob/master/recipe/yii2-app-advanced.php)) lack this, that means users have to install it separately on their own.\n\nThis is not limited to just Yii2 of course.\n\nWriting custom task is not appropriate because there is no way to inject custom task now and we need duplicate code from `deploy:vendors`.\n\nRelated - https://github.com/deployphp/deployer/issues/518.\n :+1: \n I think this is cool thing to have. May be in next release 4.x.\n @elfet So what's the reason of closing in this case?\n OK, this sounds more clear.\n  This is the output I get: \n\n```\n\u27a4 Executing task deploy:writable\n\u2937 on [production]\nRun: cd /home/user/deploy/releases/20160131092504 && chmod 2>&1; true\n> chmod: missing operand\n> Try 'chmod --help' for more information.\n\n```\n\nfrom this: \n\n```\nset('writable_dirs', [\n    'private/bootstrap/cache',\n    'public_html/assets/img'\n]);\n```\n  My repo is set as: \n\n`set('repository', 'repo/site.git');\n`\nFirstly I run this: \n\n```\ntask('deploy:push', function() {\n    runLocally('git push site master');\n})->desc('Git push to site');\n```\n\nBut when deploy:update_code is ran, I get this: \n\n```\nRun: git clone  --depth 1 --recursive -q repo/site.git /home/user/deploy/releases/20160131092504 2>&1\n> warning: --depth is ignored in local clones; use file:// instead.\n\n```\n\nWhat's the problem here? \n Or ssh/https?\n  Adding Laravel's `artisan migration` helpers\n\n| Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | n/a |\n Agree, no `--force`.\n But  without `--force` in `production` environment, the migration command will be canceled, cause the command asks for a confirmation\n Is `--force` used only for asks for a confirmation? May be there is an not-interactive mode?\n Pretty sure all `--force` does is to automatically proceed when it asks for confirmation. @flipgame is right, without it the command would be cancelled.\n Agreed, you need `--force`.\n\nPerhaps also add `php artisan db:seed` and a `php artisan migrate:status` to check before running migrate?\n\nNot sure if it's possible to do the confirm on the Deployer side, to be safe?\n It just says \"nothing to migrate\". Force is purely just to get past the \"you're in production, are you you sure you want to do this?\" prompt.\n > Do we need deploy:migrate in deploy task?\n> I wouldn't do that by default.\n I think this problem will be resolved in #622 \nThank you @filpgame about your contribution.\n  | Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | n/a |\n\nThe new option 'writable_setgid_group' allows deployments that use a common group between web server user and project user, using the existing deploy:writable task.\n\nIt's similar to https://github.com/deployphp/deployer/issues/404#issuecomment-126986068, but it also works with default recipes.\n\nTest included.\n May be add fallback to this:\n\n``` php\nrun(\"chgrp {{common_group}} $dirs\");\nrun(\"chmod 775 $dirs\");\n```\n I do intend to get back to this update and get the docs updated, been busy with other things.\n\n0775 would be marginally better but my 2775 is better still as an option, once I get around to documenting it.\n Cool!\n I've been looking at this.  I've taken the code in the first comment for #404 and added my extra setgid method.\n\nI'd like to write a test that confirms each mode runs the expected command.  I don't think that I can write a reliable test that tries to examine the outcome of each of the commands because they depend on things such as a group the user is in, or an OSX command in a Linux environment.\n\nI don't see a simple way to set an expected flag. I've passed ['verbosity' => 999] options to `$this->exec` in the test and captured the output, so I could scan the output for Run: lines.  Eugh.\n\nAny better suggestions?\n Documentation will be very helpful.\n I've made a start on the docs:\n\nhttps://github.com/nosnickid/docs/blob/master/recipes.md#deploywritable_dirs\n  Update composer it self before updating vendors\n Are you sure to do it automatically? Maybe add some options?\n Yes, I think automatic updates whenever deploy is better. But config/options is not bad\n @elfet : this PR is same as download new composer.phar but it is downloading update\n @oanhnn : you are right, ok may be better to check if use sudo, try to update `composer` automatically\n `sudo` isn\u2019t solution. \n Agree.\n  Hello! I wonder if the Deployer supports Git Tags, passing as an argument the tag that wish to deploy or if it is possible to use or set up a task to check for tags.\nThanks,\n  #527 Remove shared file .env on laravel recipe\n\n| Q | A |\n| --- | --- |\n| Bug fix? | yes |\n| New feature? | no |\n| BC breaks? | yes? |\n| Deprecations? | no |\n| Fixed tickets | #527 |\n\nIt will break deployments that use .env for configuration, but this is really discouraged by dotenv \n @oanhnn you add `.env.`. Is it does not needed?\n So leave `.env`.\n  In the laravel recipe the `.env` file is defined as shared file on any environment and therefor is always there while it shouldn't! Dotenv loads the environment variables from `.env` into $_ENV, $_SERVER but i guess the most of the time the .env is just a empty file and hopefully not used on production environments\n\n```\n// Laravel 5 shared file\nset('shared_files', ['.env']);\n```\n\nAlso from the documentation Usage notes of dotenv  \nhttps://github.com/vlucas/phpdotenv#usage-notes\n\n`phpdotenv is made for development environments, and generally should not be used in production. In production, the actual environment variables should be set so that there is no overhead of loading the .env file on each request. This can be achieved via an automated deployment process with tools like Vagrant, chef, or Puppet, or can be set manually with cloud hosts like Pagodabox and Heroku.`\n Can you make PR for it?\n Of course, will do it somewhere today\n Ok PR is there. \n\nI noticed that there was a `test/recipe/LaravelTest.php` but couldn't find it anywhere in the source on the master branch, so I assume it was removed.\n\nhttps://github.com/deployphp/deployer/commit/6b69e8f3e43a4ba67e17e07205527c656a63b612\n I disagree with this. I think in most environments (except prod) it's helpful to automatically have a shared .env. In production you should just not create the .env file, so it won't be shared.\n I rather explicit define on which environments I want to use dotenv, than doing it implicit. \n You're right on the shared hosting part, I was actually a bit surprised to see .env files on the servers because I only use it for development environments all private configuration on staging/production is done in the environment itself, and I'm not really used anymore to shared hosting to be honest. \n\nIt's simply solved by adding `set('shared_files', []);` to the deployment script. \n\nThe only reason I don't want the .env file is because I don't want others to think they can use that .env file to fix some mis configuration on staging or whatever it's cleaner to don't have it when not used. \n How you can do `php artisan migrate` without .env file ?\n @badconker You can set your environment variables in one of the following files `~/.bashrc`, `/etc/environment` and `/etc/bash.bashrc` (use google for more info). \n\nOr you can do it manually with `export VAR=VALUE` to make the environment variables available for all sub processes in your current bash session\n @SanderSander Ok but these variables are only accessible from terminal no ? So you define your environment variables twice ? One time for php from webserver and one time for php from command line ? I can't use /etc/environment because i need different variables for each virtual host. \nSorry for the off-topic but i'm looking for 2 days how declare my environnement variables to be accessible from php from http request and  from php cli. :confused:\n What do you suggest in the case where there are multiple Laravel applications running on the same server?\n\nFor web requests, I could set them in each application's `SetEnv` directive so that's no problem, but what would I do for artisan commands?\n\nLet's say that both application require ten different environment variables to be set (DB_NAME, DB_PASS etc). How do I run `php artisan migrate` for one client? This is possible when using the `.env` file for each application in production. But without the `.env` file... the only way I can think of is execute artisan commands like `export DB_NAME=db_name && export DB_PASS=mysecretpass && ... && php artisan migrate` which clearly this isn't a good solution.\n\nAny ideas?\n @philbates35  Every laravel application could have a separated user, every user has his own environment variables. \n\nSo if you want to run an artisan command for your 7th application you just switch to user laravel-app7 and do your things.\n\nApparently using .env on production for laravel applications is an acceptable way of getting things done, so i would suggest using it if it doesn't really matter. \n So you confirm : if we don't want use .env file, we must declare variables twice ? (one in user environnement and one in apache/NGINX configuration file ? We can't get user environnement variables from PHP, no ?)\n No, you only need to set it in your Apache virtualhost config or for nginx I usually set it in the php-fpm config.\n A bit late reply, but you should cache your configuration. Imho you should still share the `.env`  file, because it's very convenient. Caching the config will load the .env contents and write it to a cache file. This doesn't use environment vars anymore. (At least in 5.2+)\n  It would be great to see how long task was running.\nI suppose \\Deployer\\Executor\\Informer::endTask can output some more data.\n Cool idea for -vvv option!\n What is the reason of closing this proposal?\n Is it implemented already? It seems like no.\n > Deployer version 3.0.10\n\nAnd I run deployer with -vvv\nHere is the output partially\n\n```\n\u27a4 Executing task database:schema:update\n\u2937 on [prod]\nRun: cd /www/releases/20160217075037 && php ./bin/console doctrine:schema:update --env=prod --force\n> No Metadata Classes to process.\n> \n\u2936 done on [prod]\n\u2714 Ok\n\u27a4 Executing task deploy:symlink\n\u2937 on [prod]\nRun: cd /www && ln -sfn /www/releases/20160217075037 current\nRun: cd /www && rm release\n\u2936 done on [prod]\n\u2714 Ok\n```\n\nI see no information on the task duration. Am I doing something wrong?\n Yes, something similar. Looks good for me. :+1: \n  Is it possible to call a task within another task?\nEg if something is missing and the process needs to prepend another task before continue.\n up\n Thank you! Sorry for double Q. \n  > Your project contains files with permissive permissions. In order to avoid opening a security breach, you should restrict execution rights on following files: \n> - src/Type/Password.php\n\n``` bash\nchmod a-x 'src/Type/Password.php'\n```\n\n---\n\n_Posted from [SensioLabsInsight](https://insight.sensiolabs.com/projects/69072898-df4a-4dee-ab05-c2ae83d6c469/analyses/407)_\n How that's possible?\n :+1: \n  As far as i could see, there is no possibility to include global composer plugins after downloading the composer.phar file (The only solution would be to write the whole composer tasks by myself)? If there is no possibility to set composer global requirments, a solution could be to split the `deploy:vendors`task in two tasks\n1. task to download phar file\n2. task to execute composer install.\n\nThis way the users could easy add a task after downloading the phar (1.) which contains the global definitions.\n\n```\ntask('deploy:afterPharDownload', function () {\n    run('php composer.phar global require \"fxp/composer-asset-plugin:~1.1.1\"');\n});\n```\n  | Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n\nLaravel script `artisan` has a lots of useful commands. Among them, there are the `down` and `up` commands.\n\nMaybe we should create a complete wrapper to run artisan commands from deployer (like migration and such).\n  Fixes #514\n It merge, we will have two recipe:\n- symfony.php\n- symfony3.php\n  Maybe it's better to add configuration for Symfony 3 in `symfony.php` recipe?\n\n``` php\nset('symfony_version', 3);\n```\n\nLike this?\n The only issue I see with this is that it will clutter the recipe with code like this\n\n```\nif (get('symfony_version') === 3) {\n    set('var_dir', 'var');\n} else {\n    set('var_dir', 'app');\n}\n```\n\nBut a config option might be a better option, since it can then be used in other areas as well (E.G a user can set custom tasks based on the Symfony version)\n\nIf you are happy with this approach, then I will update the PR\n I think we need to discus it before. Support Symfony 3 very important. What @deployphp/maintainer thinks? @oanhnn ?\n What to do if framework very different? Like symfony 1 and 2? I think better it's to have both options) Configs for same, separate recipe for diff.\n Very old we do not support for now %)\n\nI think lets merge `symfony3.php`, as no more code needed to be written to support it. :) But docs really needed.\n Now we have it! Can anybody update docs?\n Thanks @elfet. I have updated the docs here deployphp/docs#48\n  Seems like the symfony recipe doesn't support the symfony 3 directory structure yet. \n- console command moved to bin folder\n- cache & logs moved to var folder. \n\nI guess the recipe just needs to be tweaked some more to accommodate these \n IMO Deployer should support Symfony 3, it makes it easier to integrate with a project.\nIt might not be always be immediately clear for developers what they need to do to add support for Symfony 3.\n\nAlso Deployer already supports Drupal 7 & 8, Yii & Yii 2, so why not add support Symfony 3 as well?\n\nI have created a simple PR (#515) to add a new recipe for Symfony 3\n Symfony 3 is stable for a couple of months now. But I don't think the Sf3 structure should be default, since it might take a while for all projects to upgrade to version 3.\nThat is why I suggest having a recipe for both version 2 and 3. That makes it the easiest for developers to get started with Sf3.\nNot everyone will always read the docs\n I think having framework+version (symfony,symfony3 recipe) bad idea. A lot of task will be same, as a lot of configs. But for now i do not see any other solution. Maybe have a config for version? \n > I think having framework+version (symfony,symfony3 recipe) bad idea. A lot of task will be same, as a lot of configs\n\nBut you do this for Drupal (7 & 8) and Yii (1 & 2)\n Yes, maybe it's time for finding better solution. Or to keep adding version recipes. \n\nframework + version is simplest solution for now. Maybe live it as it? \n  Hi,\n\nWhen the following line runs from deployer to my VPS:\n\nrun(\"cd {{release_path}}/app && npm install\");\n\nit tells me that npm is not installed, however when I run that command directly through my terminal window it works? I'm stumped!\n I am also using the same user for SSH and Deployer\n I've had a look into the issue and the problem is that the PATH for the deploy user isn't properly initialised when SSH ing into the server using PHPSecLib. \n\nSSH using Putty the path is:\n\nPATH=/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/deploy/bin:/home/deploy/bin \n\nSSH with deployer (PHPSecLib) the path is:\n\nPATH=/usr/local/bin:/usr/bin\n\nThere are a couple of options to fix it. \n\nFirstly you can append \"source /home/deploy/.bash_profile\" to each of your deployer run() functions, which will find npm, node etc. e.g.\n\nrun('source /home/deploy/.bash_profile && npm');\n\nSecondly, you could install bower, node, npm etc in the /usr/local/bin directory of the server and this would mean that the standard PATH would still find the binaries. \n I think we need same pages %)\n  from console is working properly\nbut when I try exec(\"dep magento\") like a native php\nit returns code 1 \ntest.php\n\n``` php\n<?php\n$command = \"dep magento\";\nexec($command, $output, $return);\n//$output = shell_exec($command);\nprint_r($output);\nprint_r($return);\n```\n\nnext, I try command like a apache (www-data) user\nand got same errors\n\n``` bash\nuser@user-H87M-HD3:/var/www/deploy/demo-deployer/shell$ echo mysecretpass | sudo -u www-data -S dep magento\n  Executing task magento\nPHP Notice:  SSH_AUTH_SOCK not found in phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/System/SSH/Agent.php on line 130\nPHP Stack trace:\nPHP   1. {main}() /usr/local/bin/dep:0\nPHP   2. require() /usr/local/bin/dep:4\nPHP   3. Deployer\\Deployer->run() phar:///usr/local/bin/dep/bin/dep:62\nPHP   4. Symfony\\Component\\Console\\Application->run() phar:///usr/local/bin/dep/src/Deployer.php:99\nPHP   5. Symfony\\Component\\Console\\Application->doRun() phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:126\nPHP   6. Symfony\\Component\\Console\\Application->doRunCommand() phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:195\nPHP   7. Symfony\\Component\\Console\\Command\\Command->run() phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:878\nPHP   8. Deployer\\Console\\TaskCommand->execute() phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:259\nPHP   9. Deployer\\Executor\\SeriesExecutor->run() phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\nPHP  10. Deployer\\Task\\Task->run() phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:39\nPHP  11. call_user_func:{phar:///usr/local/bin/dep/src/Task/Task.php:73}() phar:///usr/local/bin/dep/src/Task/Task.php:73\nPHP  12. {closure:/var/www/deploy/demo-deployer/shell/recipe/flush.php:70-74}() phar:///usr/local/bin/dep/src/Task/Task.php:73\nPHP  13. env() /var/www/deploy/demo-deployer/shell/recipe/flush.php:72\nPHP  14. Deployer\\Server\\Environment->get() phar:///usr/local/bin/dep/src/functions.php:570\nPHP  15. call_user_func:{phar:///usr/local/bin/dep/src/Server/Environment.php:101}() phar:///usr/local/bin/dep/src/Server/Environment.php:101\nPHP  16. {closure:phar:///usr/local/bin/dep/recipe/common.php:316-322}() phar:///usr/local/bin/dep/src/Server/Environment.php:101\nPHP  17. run() phar:///usr/local/bin/dep/recipe/common.php:317\nPHP  18. Deployer\\Server\\Remote\\PhpSecLib->run() phar:///usr/local/bin/dep/src/functions.php:296\nPHP  19. Deployer\\Server\\Remote\\PhpSecLib->checkConnection() phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:108\nPHP  20. Deployer\\Server\\Remote\\PhpSecLib->connect() phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:99\nPHP  21. phpseclib\\System\\SSH\\Agent->__construct() phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:78\nPHP  22. user_error() phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/System/SSH/Agent.php:130\n\n  [RuntimeException]                              \n  Unable to login with the provided credentials.  \n\nmagento [-p|--parallel]\n```\n\ndo I move in the right direction? \n 1. I made small modification -oStrictHostKeyChecking=no  -i /home/user/.ssh/key.pem\n\n``` bash\n$ sudo -u www-data -S ssh -oStrictHostKeyChecking=no  -i /home/user/.ssh/key.pem  ec2-user@107.20.xx.8\nCould not create directory '/var/www/.ssh'.\nFailed to add the host to the list of known hosts (/var/www/.ssh/known_hosts).\nLast login: Fri Jan  8 09:20:03 2016 from 194.44.xx\n\n       __|  __|_  )\n       _|  (     /   Amazon Linux AMI\n      ___|\\___|___|\n\nhttps://aws.amazon.com/amazon-linux-ami/2015.09-release-notes/\n```\n\nmy deploy.php \n\n``` php\nserver('magentodemo.Xxx.com', '107.20.xx.8')\n    ->user('ec2-user')\n    ->pemFile('/home/user/.ssh/key.pem')\n    ->forwardAgent()\n    ->env('deploy_path', '/var/www/html')\n;\n```\n\n2.3. Stage in not required in my (custom) magento recipe, it works from console\n\n``` bash\n$ dep magento -h\nUsage:\n  magento [options]\n\nOptions:\n  -p, --parallel                       Run tests in parallel.\n  -h, --help                           Display this help message\n  -q, --quiet                          Do not output any message\n  -V, --version                        Display this application version\n      --ansi                           Force ANSI output\n      --no-ansi                        Disable ANSI output\n  -n, --no-interaction                 Do not ask any interactive question\n  -f, --file[=FILE]                    Specify Deployer file.\n      --tag[=TAG]                      Tag to deploy.\n      --packages[=PACKAGES]            Packages to deploy. --packages=swissup/core:*,swissup/askit:*\n      --argento-theme[=ARGENTO-THEME]  Argento theme. (default pure2)\n  -v|vv|vvv, --verbose                 Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug\n\n```\n Forget  about magento recipe. I created small task in deploy.php for simplicity. \n\n``` php\ntask('releases:list', function () {\n    $releases = implode(\"\\n\", env('releases_list'));\n    writeln(\"$releases\");\n});\n```\n\nCreate test.php \n\n``` php\n<?php\n$command = \"echo secret | sudo -u www-data -S whoami \"\n  . \" & echo uname -a | sudo -u www-data -S \"\n  . \" ssh -oStrictHostKeyChecking=no  -i /home/user/.ssh/key.pem  ec2-user@107.20.xx.8\";\nexec($command, $output1, $return1);\nprint_r($output1);\nprint_r($return1);\n\n$command = \"echo secret | sudo -u www-data -S whoami \"\n. \" & echo uname -a | sudo -u www-data dep releases:list\";\nexec($command, $output2, $return2);\nprint_r($output2);\nprint_r($return2);\n```\n\nRun from console\n\n``` bash\nuser@user-H87M-HD3:/var/www/deploy/demo-deployer/shell$ dep releases:list \n\u27a4 Executing task releases:list\n20160106082639\n20160106081749\n\u2714 Ok\n\nuser@user-H87M-HD3:/var/www/deploy/demo-deployer/shell$ php -f test.php \nPseudo-terminal will not be allocated because stdin is not a terminal.\nCould not create directory '/var/www/.ssh'.\nFailed to add the host to the list of known hosts (/var/www/.ssh/known_hosts).\nArray\n(\n    [0] => www-data\n    [1] => Linux ip-10-157-xx-130 4.1.10-17.31.amzn1.x86_64 #1 SMP Sat Oct 24 01:31:37 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n)\n0PHP Notice:  SSH_AUTH_SOCK not found in phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/System/SSH/Agent.php on line 130\nPHP Stack trace:\nPHP   1. {main}() /usr/local/bin/dep:0\n...\nPHP  22. user_error() phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/System/SSH/Agent.php:130                  \n  [RuntimeException]                              \n  Unable to login with the provided credentials. \nreleases:list [-p|--parallel]\n\nArray\n(\n    [0] => www-data\n    [1] =>   Executing task releases:list\n)\n```\n Thanks for your helps. I fixed temporary this problem I created  wwwdeploy.sh bash script.\n\n``` sh\n#!/bin/sh\neval \"$(ssh-agent -s)\"\n# echo \"$SSH_AUTH_SOCK\"\nssh-add /home/user/.ssh/key.pem\n# ssh-add -l\nphp /usr/local/bin/dep -f=[location]shell/deploy.php releases:list\n```\n\nchmod +x wwwdeploy.sh\n\nphp code looks like this\n\n``` php\n$command = \"[location]/shell/deploy.sh\";\nexec($command);\n```\n\nIt works.\n  Now we can specify a path for the composer command, avoiding the download\n\n| Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n Because sometimes we have composer on the server, but cannot be reached with a simple `composer`. On a server I use for deploy the command is `composer.phar`. With this setting we can avoid downloading composer\n Docs added!\n But you can always add it. In .bashrc:\n\n```\nalias composer='/bin/composer'\n```\n Ok, seems fair :+1: \n @elfet I checked and I already had that line in my .bashrc\nThe problem lies in the commandExist function. The `hash` command doesn't \"follow\" aliases. Maybe you should change that to `command`.\nhttp://stackoverflow.com/questions/592620/check-if-a-program-exists-from-a-bash-script\n We keep `composer.phar` in project repository to keep its version under control - there were some situations when phar file on `getcomposer.org` was broken or installation based on the same `composer.lock` gave us different results on different `composer.phar` versions (dev vs prod)...\n\n:+1: for feature\n Awesome!\n Another usecase: sometimes there are various PHP versions available for CLI and you want to ensure the correct one is used. With this change you can simply prepend it, thus :+1: \n  Hi, \n\nI configured my deploy.php file with my information about the repository. However, when running the deployer it returns me this error below. What might be happening?\n\n[RuntimeException]  \n  Host key verification failed.  \n  fatal: Could not read from remote repository.  \n  Please make sure you have the correct access rights  \n  and the repository exists.\n\nThanks!\n\nBruno Fonseca\n Hello!\n\nThe problem was because apparently my instance did not know the repository that I was trying to access, in other words, I had never accessed the repository and saved the git_cache.\n\nIn this case, I accessed remotely, and made a checkout of the repository without the deployer. It worked.\n\nIt would be interesting to add to a nearby feature the deployer this possibility if there is no git cache, the deployer request User and password. I do not know if you ever work that way and I do not know.\n\nGrateful.\n I'm still getting this issue! I'm on  an EC2 server, if that helps.\n Try and log in using the same user using terminal, ensure it works using your key then retry, it crashes if any prompt appears when first logging in.\n @jakenoble nice one. I had created an ssh key for the wrong user duhhhhh! Thanks Jake\n  Is there a way to switch to a specific user (e.g. `deploy-user`) before running all tasks on the server? In effect, SSH into the server, switch to `deploy-user`, then do all the tasks specified.\n\nTIA\n  As per https://laravel.com/docs/5.2#configuration\n\n| Q | A |\n| --- | --- |\n| Bug fix? | yes |\n| New feature? | no |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n @oanhnn did that\n BC breaks? Laravel 4/5?\n This recipe was already for Laravel 5+\nThe writable folders for Laravel 5.1+ are `bootstrap/cache` and `storage`.\nFor Laravel 5.0 the documentation says `storage` and `vendor`. But in my experience there is no need to make the `vendor` folder writable. It was briefly required when, in the beginning of the 5.0 development, the framework used to create files and put them in the `vendor` folder. If opening a pull request on the documentation to fix that\n @elfet I tried creating a new Laravel 5.0 project and it still uses the `vendor` folder. Maybe we should point out in the documentation that this recipe is for Laravel 5.1 (the LTS version) or later\n  Hello!\nI am using the Deployer in my Laravel 5.1 project, and so far had no problem in configuration and application deployment. However, I like to know how to put a branch 'production' for when you deploy using it as standard. Currently when you deploy, you're using my development branch.\n\nGrateful.\n\nBruno Fonseca.\n  It would be good to run other tasks in task definition, such as:\ntask(\"my_task\", function(){\n      run_task(\"deploy:prepare\");\n      run(\"something I want to do\");\n      run_task(\"deploy:release\");\n      run(\"another thing I want to do\");\n      ......\n});\n  Problem with tests has been appeared because Travis has changed IPv6 to IPv4 (see\n\"IPv6 no longer present\" section in https://blog.travis-ci.com/2015-11-27-moving-to-a-more-elastic-future)\n  On one shared host I found an issue with current symlinks creation.\n\nCurrently generated symlinks are absolute, and it causes problems with apache rewrite on a shared\nenvironment\n\nWhen I change the symlink cretion to relative ln -srnf ... everthing works fine.\nI can make a PR, but wanted to check if this wasn't by design.\nAlso when making the changes, should this be configurable or make it relative by default?\n @oanhnn absolute symlinks worked for me very well on my own servers.\nOn this particular shared host I dont have access to the configuraion file. I have only htaccess that I can manage, where I rewrite the path to the /current directory\n\n```\nOptions +FollowSymLinks\nRewriteEngine on\n\nRewriteRule ^(.*)$ /current/$1 [L]\n```\n\nThe problem with absolute links there is that the real path to the web dir is something like this\n\n```\n/nfs/something/more/letter/shard/random/stuff/home/my.domain.com/web/\n```\n\nApache and scripts don`t have access to anything before`/home` also those parts tend to change.\n\nI will test the relative recipe in other environments and get back with the results, but so far the recipe work on the shared host, with everything: deploy, rollback, consequent deploys, shared files and dirs.\n\nthanks.\n @oanhnn thanks tried that already, with various variations like 20 :)\n\nthe problem there is that the absolute symlink got permission problems, that I can see in logs, so it would be something like openbasedir thing.\n\nAs I said will try with different setups, and come back with results.\nSo far from the discussion I assume, that even if I will make the PR, relative symlinks should be an configurable option per enviorment.\n @oanhnn look around if capistrano got these problems in the past too, and they had.\n\nIt totaly depends on the configuration on the shared host, but problems like mine are not that uncommon.\n\nfor reference:\nhttps://discourse.roots.io/t/capistrano-symlinks-and-mediatemples-gridserver/1313/8\nhttp://poweredbycoffee.co.uk/using-capistrano-composer-deploy-mediatemple-gridservice/\n I have the same problem, but a different cause :D For me the issue with absolute symlinks is that they break in the backup, which is pretty annoying. Is there a specific reason that one would prefer absolute symlinks over relative ones?\n What's a task for next Deployer v4. :+1: \n I can confirm. \nWe have two shared hostings where absolute symlinks are not working.\n I confirm too.\n\nIt's a quite common practice to chroot sftp shells and make directories accessible using bind mounts.\nFor example your htdocs directory could be `/var/www`, but show as `/htdocs` inside the sftp shell.\nIf you then do a `ln -s /var/www/foo /var/www/bar`, then for sftp `/htdocs/bar` is a broken link, since `/var/www/foo` simply does not exists inside the chroot. \n\nNow if you have a recipe that does a `ln -sf {{deploy_path}}/current/htdocs /var/www`, your entire web root becomes inaccessible by ftp.\n\nIMO a good solution would be to make all symlinks relative to `{{deploy_path}}`, e.g:\n\n``` php\nwithin('{{deploy_path}}', function () {\n  run('ln -srfn releases/{{release_name}} current');\n});\n```\n One thing that the PR will probably need to take into consideration is that the `-r` parameter for `ln` wasn't added until rather recently, in `8.16`. Media Temple and DreamHost are both still on `8.13`, and I doubt they're the only ones.\n\nAdding `-r` in a version that doesn't support it will cause the command to fail.\n I was able to get this working for my use case [with some basic string manipulation](https://gist.github.com/iandunn/21f5e7cc20fed6bf2a237dfec4d8cbdd).\n\nThat's probably isn't robust enough to cover everyone's use cases, but it might be a good starting point for a PR, if anyone is interested.\n May be detect is -r avaiable from \u2014help command?\n > May be detect is -r avaiable from \u2014help command?\n\nThat's a good thought, but since `ln -r` isn't widely available yet, won't the solution need to accommodate environments that doesn't support it? \n\nIf that's the case, then it seems like it'd be easier to just avoid `-r` altogether, until it's widely available.\n\ni.,e., it seems like this:\n\n``` php\n// @todo migrate to ln -srnf when coreutils 8.16 is widely available on shared hosts \nrun( custom_function_to_generate_relative_symlink_command() );\n```\n\nwould be simpler than this:\n\n```\nif ( custom_function_to_detect_if_ln_supports_r_param() ) {\n  run( \"ln -srfn ...\" );\n} else {\n  run( custom_function_to_generate_relative_symlink_command() );\n}\n```\n  Awesome! :beer:  \nGreat job!\n  | Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | no |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n\nPhp 7 is stable so it should be removed from failures\n  | Q | A |\n| --- | --- |\n| Bug fix? | yes |\n| New feature? | no |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | #419 |\n\nDefault is set to true - current configuration does not need to be changed.\nIf you do not use AsseticBundle just switch flag to false:\n\n``` php\nset('dump_assets', true);\n```\n  I ran into the situation where I couldn't authenticate on a server that uses password auth, but still needs agent forwarding to be enabled to clone the repository. In other words, the following will never try to authenticate with a password:\n\n```\nserver('some server', '192.168.1.55, 22)\n    ->user('username')\n    ->password(\"strongpassword\")\n    ->forwardAgent()\n```\n\nIf this is a `wontfix` I think it should at least throw an error message when two incompatible authentication schemes are used at the same time :smile: \n\nPS: Deployer seems great so far. Thanks for making it :)\n  | Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | no |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n @oanhnn As requested ...\n Cool! Thanks!\n  I'm not english .....I'm sorry\nThanks for the great program deployer\n\n-------[ server state ]-------\n## ubuntu / laravel 5.1\n## composer.json\n\n```\n~~\n\"deployer/deployer\":\"~3.0\",\n\"phpseclib/phpseclib\": \"^2.0\",\n\"herzult/php-ssh\": \"^1.1\",\n\"react/event-loop\": \"^0.4.1\",\n\"react/react\": \"^0.4.2\"\n```\n## step-1\n\nphp ./build  ---> deployer.phar create ok\n## step-2\n\n```\n<?php\nrequire 'vendor/autoload.php';\nrequire 'vendor/deployer/deployer/recipe/symfony.php';\n\n\ntask('my_task', function () {\n\n    server('prod', '192.168.10.193', 22)\n        ->user('bengi2')\n        ->password('******')\n        ->env('deploy_path', '/home/bengi2/www')\n         ->stage(['dep', 'prod', 'stage', 'dev']);\n\n    upload('.', '/home/bengi2/www');\n\n    write('Deploy done!');\n})->desc('Doing my stuff');\n```\n## step-3\n\n```\n$ ls -al\ndrwxrwxr-x  10 vagrant vagrant     4096 Dec 13 17:36 app/\n-rwxr-xr-x   1 vagrant vagrant     1646 Dec 14 08:34 artisan*\ndrwxr-xr-x 710 vagrant vagrant    32768 Dec 11 18:00 node_modules/\ndrwxrwxr-x   2 vagrant vagrant     4096 Aug 30 20:31 tests/\ndrwxrwxr-x  59 vagrant vagrant     4096 Dec 14 07:23 vendor/\n\n$ dep my_task \n```\n## Result\n\n```\nPHP Warning:  copy(/home/bengi2/www/node_modules/browserify/test/relative_dedupe/index.js): failed to open stream: No such file or directory in phar:///usr/local/bin/dep/src/Server/Local.php on line 43\nPHP Stack trace:\nPHP   1. {main}() /usr/local/bin/dep:0\n~ ~ ~ ~ ~ ~\n```\n## Remote Server Result\n\n```\n$ pwd\n/home/bengi2/www\n$ ls -al\ndrwxrwxrwx 2 bengi2  bengi2  4096 Dec 14 08:56 ./\ndrwxr-xr-x 3 bengi2  bengi2  4096 Dec 14 08:55 ../             <------- user : bengi2 / group : bengi2\n-rw-rw-r-- 1 vagrant vagrant 1646 Dec 14 08:56 artisan     <------- user : vagrant / group : vagrant\n-rw-rw-r-- 1 vagrant vagrant  383 Dec 14 08:56 bower.json\n-rw-rw-r-- 1 vagrant vagrant  357 Dec 14 08:56 .env\n-rw-rw-r-- 1 vagrant vagrant   61 Dec 14 08:56 .gitattributes\n-rw-rw-r-- 1 vagrant vagrant  567 Dec 14 08:56 server.php\n```\n\n---\n## Question\n\ncreate not directory & sub directory file upload fail\n Check permissions for deploy user.\n  Composer log:\n\n```\nYour requirements could not be resolved to an installable set of packages.\n\n  Problem 1\n    - deployer/deployer v3.0.5 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.4 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.3 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.2 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.1 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.0 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - Conclusion: remove symfony/symfony v3.0.0\n    - deployer/deployer v3.0.10 requires symfony/finder ~2.6 -> satisfiable by symfony/finder[v2.6.0, v2.6.1, v2.6.10, v2.6.11, v2.6.12, v2.6.2, v2.6.3, v2.6.4, v2.6.5, v2.6.6, v2.6.7, v2.6.8, v2.6.9, v2.7.0, v2.7.1, v2.7.2, v2.7.3, v2.7.4, v2.7.5, v2.7.6, v2.7.7, v2.8.0].\n    - deployer/deployer v3.0.6 requires symfony/finder ~2.6 -> satisfiable by symfony/finder[v2.6.0, v2.6.1, v2.6.10, v2.6.11, v2.6.12, v2.6.2, v2.6.3, v2.6.4, v2.6.5, v2.6.6, v2.6.7, v2.6.8, v2.6.9, v2.7.0, v2.7.1, v2.7.2, v2.7.3, v2.7.4, v2.7.5, v2.7.6, v2.7.7, v2.8.0].\n    - deployer/deployer v3.0.7 requires symfony/finder ~2.6 -> satisfiable by symfony/finder[v2.6.0, v2.6.1, v2.6.10, v2.6.11, v2.6.12, v2.6.2, v2.6.3, v2.6.4, v2.6.5, v2.6.6, v2.6.7, v2.6.8, v2.6.9, v2.7.0, v2.7.1, v2.7.2, v2.7.3, v2.7.4, v2.7.5, v2.7.6, v2.7.7, v2.8.0].\n    - deployer/deployer v3.0.8 requires symfony/finder ~2.6 -> satisfiable by symfony/finder[v2.6.0, v2.6.1, v2.6.10, v2.6.11, v2.6.12, v2.6.2, v2.6.3, v2.6.4, v2.6.5, v2.6.6, v2.6.7, v2.6.8, v2.6.9, v2.7.0, v2.7.1, v2.7.2, v2.7.3, v2.7.4, v2.7.5, v2.7.6, v2.7.7, v2.8.0].\n    - deployer/deployer v3.0.9 requires symfony/finder ~2.6 -> satisfiable by symfony/finder[v2.6.0, v2.6.1, v2.6.10, v2.6.11, v2.6.12, v2.6.2, v2.6.3, v2.6.4, v2.6.5, v2.6.6, v2.6.7, v2.6.8, v2.6.9, v2.7.0, v2.7.1, v2.7.2, v2.7.3, v2.7.4, v2.7.5, v2.7.6, v2.7.7, v2.8.0].\n    - don't install symfony/finder v2.6.0|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.1|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.10|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.11|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.12|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.2|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.3|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.4|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.5|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.6|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.7|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.8|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.6.9|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.7.0|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.7.1|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.7.2|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.7.3|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.7.4|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.7.5|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.7.6|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.7.7|don't install symfony/symfony v3.0.0\n    - don't install symfony/finder v2.8.0|don't install symfony/symfony v3.0.0\n    - Installation request for symfony/symfony 3.0.* -> satisfiable by symfony/symfony[v3.0.0].\n    - Installation request for deployer/deployer ~3.0 -> satisfiable by deployer/deployer[v3.0.0, v3.0.1, v3.0.10, v3.0.2, v3.0.3, v3.0.4, v3.0.5, v3.0.6, v3.0.7, v3.0.8, v3.0.9].\n```\n Yes! We need to support Symfony 3.0.\n :+1: \n I already made a pull request that should fix the outdated dependencies in \"elfet/purephp\". This repo is still active so the outdated dependencies will be fixed in the near future.\n\nAs for \"kherge/amend\", i'm guessing this will never get fixed sees the latest activity is more than a year old. Another pull request is already open for more than 200 days, no feedback or comment from the owner or nothing.\n\nMaybe u guys should fork that repo and fix it yourself, there's only one outdated dependency to the symfony/console. Or if you're willing i will fork and fix it, than update your composer.json and PR it..\n\nIf you guys do that, you can re-open https://github.com/deployphp/deployer/pull/505. And we can all start using deployer in symfony3.0 projects!\n This makes deployer incompatible with Laravel 5.2 too\n @oanhnn the problem with the phar is that is many months old!! why no release has been tagged since?\n Try start moving 4.0 release next week.\n :+1: I'd like to use symfony/process ~3.0 but\n\n```\nProblem 1\n    - deployer/deployer v3.0.9 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.8 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.7 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.6 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.5 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.4 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.3 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.2 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.10 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.1 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.0 requires symfony/process ~2.6 -> no matching package found.\n    - deployer/deployer v3.0.10 requires symfony/process ~2.6 -> no matching package found.\n    - Installation request for deployer/deployer ~3.0 -> satisfiable by deployer/deployer[v3.0.0, v3.0.1, v3.0.10, v3.0.2, v3.0.3, v3.0.4, v3.0.5, v3.0.6, v3.0.7, v3.0.8, v3.0.9].\n```\n Bump, can you please use ~2.6 | 3.0  as a constraint?\n Has anybody managed to get this to work?\n  can't find it in docs\n ``` php\nargument('stage', InputArgument::OPTIONAL, 'Run tasks only on this server or group of servers.');\n\noption('tag', null, InputOption::VALUE_OPTIONAL, 'Tag to deploy.');\n```\n\n``` php\ninput()->getOption('tag');\n```\n thanks.I didn't see the input function.\n  Can any body figure out why?\n Seems like the [IP_REG_EXP](https://github.com/deployphp/deployer/blob/master/test/recipe/RemoteServerTest.php#L12) only accounts for IPv6. Maybe it should be something like `'#^(::1)|(127.0.0.1)$#'`?\n  I successfully deployed on the remote VPS.. and now I try to point the Apache default welcome page to `/path/to/project/CURRENT/public`.\nI changed the file \u2018000-default.conf\u2019 in **sites-enabled**,\nfrom:\n`DocumentRoot /var/www/html`\nto:\n`DocumentRoot /var/www/html/current/public`\n(http://stackoverflow.com/a/14966435/1315169),\nbut I get **server error** when I browse to the homepage.\n\nmy **deploy.php**:\n\n``` php\nrequire 'recipe/laravel.php';\nserver('prod', 'myipaddress', 2210)\n    ->user('root')\n    ->password('mypassword')\n    ->stage('production')\n    ->env('deploy_path', '/var/www/html');\nset('repository', 'https://github.com/my/repo');\n```\n###### Please anybody can help me on how to point correctly to `current/public` folder.\n It seems your Apache config is something wrong. See your Apache error.log.\n @kenjis\n\nI get the following in 'error.log' (`/var/log/apache2/`):\n\n```\n[Sun Nov 22 16:55:16.347059 2015] [:error] [pid 17593] [client 2400:cb00:29:1024::6ca2:f0b2:27597] PHP Fatal error:  Uncaught exception 'UnexpectedValueException' with message 'There is no existing directory at \"/var/www/html/releases/20151122161240/storage/logs\" and its not buildable: Permission denied' in /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php:13003\\nStack trace:\\n#0 /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php(12955): Monolog\\\\Handler\\\\StreamHandler->createDir()\\n#1 /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php(12903): Monolog\\\\Handler\\\\StreamHandler->write(Array)\\n#2 /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php(12666): Monolog\\\\Handler\\\\AbstractProcessingHandler->handle(Array)\\n#3 /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php(12762): Monolog\\\\Logger->addRecord(400, Object(UnexpectedValueException), Array)\\n#4 /var/www/html/releases/20151122161240/vendor/laravel/framework/src/Illuminate/Foundation/Exceptions/Handler.php(49): Monolog\\\\Logger->error(Object(UnexpectedValueException))\\n#5 /var/www/html/releases/20151122161240/a in /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php on line 13003\n[Sun Nov 22 16:55:16.422798 2015] [:error] [pid 17593] [client 2400:cb00:29:1024::6ca2:f0b2:27597] PHP Fatal error:  Uncaught exception 'UnexpectedValueException' with message 'There is no existing directory at \"/var/www/html/releases/20151122161240/storage/logs\" and its not buildable: Permission denied' in /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php:13003\\nStack trace:\\n#0 /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php(12955): Monolog\\\\Handler\\\\StreamHandler->createDir()\\n#1 /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php(12903): Monolog\\\\Handler\\\\StreamHandler->write(Array)\\n#2 /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php(12666): Monolog\\\\Handler\\\\AbstractProcessingHandler->handle(Array)\\n#3 /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php(12762): Monolog\\\\Logger->addRecord(400, Object(Symfony\\\\Component\\\\Debug\\\\Exception\\\\FatalErrorException), Array)\\n#4 /var/www/html/releases/20151122161240/vendor/laravel/framework/src/Illuminate/Foundation/Exceptions/Handler.php(49): Monolog\\\\Logger->error(Object(Symfony\\\\Component\\\\Debug\\\\Exception\\\\FatalE in /var/www/html/releases/20151122161240/bootstrap/cache/compiled.php on line 13003\n```\n\nDo you think that the way I perform it above in my question is correct?\n You need the folder `/var/www/html/releases/20151122161240/storage/logs` but you don't have it.\n Thanks, I see what you mean, I'll try to fix it.\n  On some virtual hosting platforms for correct deploy we need to specify php binary.\n\nFor instance:\n\n``` bash\n/opt/php54/bin/php composer.phar install\n```\n\nI suggest to create new environment var, for example \"php_bin\" with default value \"php\" \n Just \"php\" is busy with old version of php. \nI've tried to create .bashrc with alias, but It's not working for me.\n `.bashrc` is only taken into account for interactive shells.  You may check for `.profile` instead.\n @lbausch thanks! It's work!\n\n@elfet I resolved my issue by overriding tasks `deploy:vendors`, `deploy:assetic:dump`, etc.\n\nIn generally yes, users can create alias and put in `.profile`, but True-way is put this variable in configuration\n\nupd: I've tried to deploy project with alias in `.profile`, but it is not helped\n .bashrc does not work, .profile does not work, env('php', .. ) does not work. Exactly as @dmkuznetsov said, we need an environment variable to specify PHP version. Or a way to set the PATH variable and use it in all subsequent calls (better!)\n Will be in Deployer v4. #586 \n  Hi,\n\nI read the deployer documentation and on the [Server Page](http://deployer.org/docs/servers) there it is mentioned that it is possible to use a SSH config file like:\n\n``` php\nserver(...)\n    ->user('name')\n    ->configFile('/path/to/file');\n```\n\nThat sounds nice and I use it like:\n\n``` php\nserver('name', 'myserver.com')\n    ->user('user')\n    ->configFile('~/.ssh/config')\n    ->env('deploy_path', '~/html/example.com');\n```\n\nBut when I execute my task an exception in [`Server/Remote/PhpSecLib.php:85`](https://github.com/deployphp/deployer/blob/master/src/Server/Remote/PhpSecLib.php#L85) is thrown:\n\n```\n [RuntimeException]\n  You need to specify authentication method.\n```\n\nI took a deeper look at deployers source code and found out that in [`PhpSecLib.php`](https://github.com/deployphp/deployer/blob/master/src/Server/Remote/PhpSecLib.php#L51-L86) the switch statement is used to decide how to connect to the server. The switch expression `$serverConfig->getAuthenticationMethod()` outputs for my situation the integer `2` like defined in [`Configuration.php`](https://github.com/deployphp/deployer/blob/master/src/Server/Configuration.php#L19-L23).\n\nThe interesting part is now: In this particular switch statement is no case for `AUTH_BY_CONFIG` defined. So, I'm not surprised anymore it is not working.\n\nCan you please implement this case. Thank You.\n Hey @elfet - thx for your reply. No problem, get to it when you have time or I will take a look at it if I have time.\n\nBut please, don't document stuff which is not implemented yet. That is really annoying :smile: \n Will be implemented in v.4\n So we cannot use \"configFile\" at all?\nNot sure how this is closed, maybe it should be left open and assigned to a milestone?\n  When using Gitlab CI I want set server settings via options. Example:\n-h host -u user -p pass --deploy_path=/var/www\n\nI'm known about option() but it's very difficult to set server settings with it \n GitLab has CI.\nAnd i can use runners (virtual machines where my CI task executes)\nRunners may be public, or i'm don't want to share passwords with other peoples, in this case GitLab CI\nprovides feature to set in project settings variables that translated to environment system vars on runner machine. And then im run something in my CI config:\nphp dep deploy -p $PASS -u $USER -h $HOST\n\nanother case - i can create one CI config and use it between few projects, just need to change vars in project settings.\n\nUnfortunately i'm create own simple deploy php script to do it, but deployer is ofcourse more powerful and im want to use deployer cool script\n problem is deployer has two options how can i set server settings:\n1. via `server()` function\n2. by yaml server list\n\nmay be you can tell how easely set server settings via command line opttions ?\n @errogaht Can you get the environment system vars using like `getenv('PASS')`?\n yes i can, but how i set password and username to server configuration dynamically in `server()` function? \nSet username and password in each `task()` is probably not good i'm think\n  When using Gitlab CI I want set server settings via options. Example:\n-h host -u user -p pass --deploy_path=/var/www\n\nI'm known about option() but it's very difficult to set server settings with it \n What's up? No comments? I'm one in the world use both deployer and gitlab?\n  On my Ubuntu VirtualBox I use the \u2018laravel/homestead\u2019 Vagrant box, can I use the 'deployer.org' solution to deploy my app on a remote server? because I saw in your website 'Laravel Recipe' status is: TODO.    \n\nIf yes, is there any tutorial for Laravel?\n deployer has Laravel recipe: https://github.com/deployphp/deployer/blob/master/recipe/laravel.php\n @blsn Sorry by document on website is not update. \n That Laravel recipe has a few bugs, like a missing 'deploy:writable' task in the main deploy task and I disagree with the shared dirs. PR #392 fixed 2 of those bugs. It's also lacking many features to run migrations, refresh the caches, etc. I will probably send a PR if nobody beats me to it. \n I try to deploy a Laravel testing app using the following `deploy.php` link:\nhttps://gist.github.com/GesJeremie/f8c59c097b67da29e30b\n\n..but I get the following exception error:\n\n```\nvagrant@homestead:~/sites/test_app$ dep deploy prod\n\u2714 Executing task deploy:prepare\n\u2714 Executing task deploy:release\n\u2714 Executing task deploy:update_code\n\u2714 Executing task deploy:vendors\n\u2714 Executing task deploy:writable\n\u2714 Executing task deploy:shared\n\u2714 Executing task deploy:symlink\n  Executing task assets\n\n  [RuntimeException]\n  bash: line 0: cd: /home/vagrant/deployer/releases/20151121013206/front: No such file or directory\n```\n\ndebug mode:\n\n``` bash\n:\n:\n\u27a4 Executing task assets\n\u2937 on [prod]\nRun: cd /home/vagrant/deployer/releases/20151121005601/front && npm install\n\n  [RuntimeException]\n  bash: line 0: cd: /home/vagrant/deployer/releases/20151121005601/front: No such file or directory\n:\n:\n```\n\n###### Any help would be appreciated.\n\nNotification: @KennedyTedesco & @GesJeremie\n My deploy.php file fitted my project, I cleaned it just for you ;) https://gist.github.com/GesJeremie/f8c59c097b67da29e30b\n  with version 3.0.10 when the code checks the dir of the actual release symlink, the process crashes with a Runtime Exception as the release dir does not exist.\n\nA workaround to create the symlink manually before trying the first deployment.\n\nenv('release_path', function () {\n    return str_replace(\"\\n\", '', run(\"readlink {{deploy_path}}/release\"));\n});\n Ah, ok, I misinterpreted the command, I needed the deploy:release before the deploy:update_code.\nThe documentation really needs some update :D\n  I was able to deploy a specific branch, but is there any way to do same thing with a specific commit hash?\n I would overwrite the `deploy:update_code`\n\nSomething like this.\n\n```\nenv('commit', '<your sha commit>');\n\ntask('deploy:update_code', function () {\n    $repository = get('repository');\n    $branch = env('branch');\n    $gitCache = env('git_cache');\n    $depth = $gitCache ? '' : '--depth 1';\n    if (input()->hasOption('tag')) {\n        $tag = input()->getOption('tag');\n    }\n    $at = '';\n    if (!empty($tag)) {\n        $at = \"-b $tag\";\n    } elseif (!empty($branch)) {\n        $at = \"-b $branch\";\n    }\n    $releases = env('releases_list');\n    if ($gitCache && isset($releases[1])) {\n        try {\n            run(\"git clone $at --recursive -q --reference {{deploy_path}}/releases/{$releases[1]} --dissociate $repository  {{release_path}} 2>&1\");\n        } catch (RuntimeException $exc) {\n            // If {{deploy_path}}/releases/{$releases[1]} has a failed git clone, is empty, shallow etc, git would throw error and give up. So we're forcing it to act without reference in this situation\n            run(\"git clone $at --recursive -q $repository {{release_path}} 2>&1\");\n        }\n    } else {\n        // if we're using git cache this would be identical to above code in catch - full clone. If not, it would create shallow clone.\n        run(\"git clone $at $depth --recursive -q $repository {{release_path}} 2>&1\");\n    }\n\n    // Lines added\n   $commit = env('commit');\n   run(\"cd {{release_path}} && git reset --hard $commit\");\n\n})->desc('Updating code');\n```\n\nYou could also \"ignore\" everything in this and just do\n\nMaybe you could overwrite all git commands with just\n\n```\nenv('commit', '<your sha commit>');\nrun(\"git clone $repository {{release_path}} 2>&1\");\nrun(\"cd {{release_path}} && git checkout $commit\");\n```\n Will be in Deployer v4.\n  Hi,\n\nI'm looking for a new deployment tool and deployer looks awesome - thanks for the great work you have done!\n\nI have some concerns about rollbacks. \n\n_Sample scenario:_\nThe deployment process consists of several steps:\n- prepare\n- release\n- update code\n- assets\n- database migrations\n- restart cache\n\nNow lets assume the last step 'restart cache' fails. Currently deployer would only remove the release directory but it should also revert the db migrations.\n\nWe could probably add a very simple mechanism to improve rollbacks, similar to the one in Capistrano.\nThere is a simple function that allows to add rollback closures. Then the rollback command executes all registered closures [LIFO].\n\nWhat do you thin about it? Maybe you have some better ideas how to improve rollbacks?\n  Hey, i got an idea to enable a simple kind of Plugin system, especially useful for the packaged phar version of deployer.\n\nThe main idea consists of an additional command `PluginCommand` (open to suggestions about another name ;). This command would have several actions like \"install, update, remove\". These actions are basically only a \"proxy\" for `composer [require|update|remove] foo/bar` actions. That composer command gets executed in a global central location, for example under `/Users/username/.deployer/` on Mac. Additionally that path gets added to the include path, so that you can access those installed packages easily with a relative path.\n\n**Example:**\n\ninstall the existing [`deployphp/recipes`](https://github.com/deployphp/recipes) package as a plugin for deployer:\n\n```\ndep plugin install deployphp/recipes\n```\n\nthis will install that package under `/Users/username/.deployer/vendor/deployphp/recipes/`\nThe path `/Users/username/.deployer/vendor` is automatically added to the include path of deployer on every command, so you can have a `deploy.php` like this in a project: \n\n``` php\n<?php\nrequire 'deployphp/recipes/recipes/slack.php';\n...\n```\n\nThis Plugin system would enable countless modular Packages to be created for different Frameworks/Hosts/etc without the need to add deployer as a dependency to the projects you're trying to deploy. \n\nIf this is something that you guys would accept into deployer itself i'd be willing to create a proper pull-request for that :) I already did a rough prototype to test my idea, you can check it out here: \n\n[[WIP] add a plugin system](https://github.com/mneuhaus/deployer/commit/fd961f7ae74ae9fd87e55e9d43c1ea4033c90300)\n Thank for your idea. I think this feature will be available in Deployer 4.x :+1: \n So, you guys are already Wirkung in this/something similar?\nHas the 4.0 dev already started? If you like i could pitch in in this :-) \n well, i don't really mean duplicate composer functionality, that command would only provide a simple facade to install packages in that global directory that deployer would take into account through the set_include_path.\n\nif you don't like the idea of the plugin command itself, how about only including a central global directory, so you can manage those packages in that central directory \"manually\" with composer?\n well, yea now i get what you mean ^^\nyou're absolutely right, i can install `deployphp/recipes` globally through:\n\n```\ncomposer global require deployphp/recipes\n```\n\nand then use that in my `deploy.php` by extending the include path: \n\n```\nset_include_path(get_include_path() . PATH_SEPARATOR . getenv('HOME') . '/.composer/vendor/');\n```\n\ni guess than you can ignore this feature request, the only thing that could be neat to include would be to mention this possibility in the docs, and possible add that global composer path directly in deployer?\n  Deployer version: 3.0.10\nPHP version: 5.6.9\nDeployment target(s) OS - Ubuntu 12.04\n\nThe `upload` function gives some pretty cryptic errors and fails when authenticating with PEM and using PhpSecLib for uploading. I get:\n\n```\n  [RuntimeException]\n  NET_SFTP_STATUS_FAILURE: Failure\n  NET_SFTP_STATUS_FAILURE: Failure\n  NET_SFTP_STATUS_FAILURE: Failure\n```\n\nWhile the command line `scp` works just fine:\n\n```\nscp -i aws.pem file.php ubuntu@somehost.amazonaws.com:/var/www/location\n```\n It appears that way. It seems to be messing packets up in the `SFTP` class\n Is somebody have a work around ? that will realy help me.\nThx\n The isssue still exists. I get this while using `upload`:\n\n```\nNET_SFTP_STATUS_FAILURE: Failure\n...\nNET_SFTP_STATUS_FAILURE: Failure\nNET_SFTP_STATUS_FAILURE: Failure\n\nException trace:\n () at phar://D:/bin/deployer/deployer.phar/src/Server/Remote/PhpSecLib.php:136\n Deployer\\Server\\Remote\\PhpSecLib->upload() at phar://D:/bin/deployer/deployer.phar/src/functions.php:373\n upload() at D:\\xampp\\htdocs\\domizeli.ru\\deploy.php:37\n {closure}() at n/a:n/a\n call_user_func() at phar://D:/bin/deployer/deployer.phar/src/Task/Task.php:79\n Deployer\\Task\\Task->run() at phar://D:/bin/deployer/deployer.phar/src/Executor/SeriesExecutor.php:43\n Deployer\\Executor\\SeriesExecutor->run() at phar://D:/bin/deployer/deployer.phar/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar://D:/bin/deployer/deployer.phar/vendor/symfony/console/Command/Command.php:259\n Symfony\\Component\\Console\\Command\\Command->run() at phar://D:/bin/deployer/deployer.phar/vendor/symfony/console/Application.php:840\n Symfony\\Component\\Console\\Application->doRunCommand() at phar://D:/bin/deployer/deployer.phar/vendor/symfony/console/Application.php:192\n Symfony\\Component\\Console\\Application->doRun() at phar://D:/bin/deployer/deployer.phar/vendor/symfony/console/Application.php:123\n Symfony\\Component\\Console\\Application->run() at phar://D:/bin/deployer/deployer.phar/src/Deployer.php:101\n Deployer\\Deployer->run() at phar://D:/bin/deployer/deployer.phar/bin/dep:62\n require() at D:\\bin\\deployer\\deployer.phar:4\n```\n  So if Im fx using the symfony recipe, and there is 1 task I dont want to be executed, is there any method to \"unset\" this task?\n\nActually it is the assetic task I dont want to run (I dont use assetic), so this task\n\n```\ntask('deploy:assetic:dump', function () {\n\n    run('php {{release_path}}/' . trim(get('bin_dir'), '/') . '/console assetic:dump --env={{env}} --no-debug');\n\n})->desc('Dump assets');\n```\n\nI want to not run.\n\nOfcourse I could copy the whole symfony recipe and then removing this 1 task and use that instead - but it seems like over doing it.\n Hi Martin,\n\nMay be I'm wrong, but I don't think it's possible to remove a task.\nHowever, you can override it with an empty function. For example:\n\n`\ntask('deploy:assetic:dump', function () {});\n`\n\nThis line must be set _after_ 'require 'recipe/symfony.php'\n\n++\n Current `deployer` don't support removing a task, but you can override it as @tmarly 's comment.\n\n```\ntask('deploy:assetic:dump', function () {})->setPrivate();\n```\n  To use namespaces and classes everywhere we need to put all functions of `functions.php` into a class.\n\nThat because I think we should have a class named `Deployer` which has all the functions.\n\nExample:\n\n``` php\n$deployer = new Deployer(); // ignored parameters for example\n\n$deployer->server(''prod', 'host', 22)\n    ->user('name')\n    ->forwardAgent()\n    ->stage('production')\n    ->env('deploy_path', '/your/project/path');\n\n$deployer->run();\n```\n\nAnother idea:\n\n``` php\n$deployer = new Deployer(); // ignored parameters for example\n\n$deployer->setServer(''prod', 'host', 22)\n    ->setUser('name')\n    ->useForwardAgent()\n    ->setStage('production')\n    ->setEnv('deploy_path', '/your/project/path');\n\n$deployer->run();\n```\n  I think it would be good to have recipes as classes with interface \"Recipe\".\n For namespaces we need to turn all functions into classes. That because I think it is good to have recipes  as class files.\n\nYou would have two choices:\na) Load a recipe (-> class file).\nb) Do the commands directly (like the functions.php currently, just with a class around it).\n ``` php\n$deployer = new Deployer();\n$deployer->useRecipt(new SymfonyRecipt());\n$deployer->run();\n```\n\nSomething like this would be nice.\n The interface would needed to get all recipt information from the recipt object.\n\n`$deployer->useRecipt()` will require one parameter of type ReciptInterface.\n\nThe interface could be something like this:\n\n``` php\ninterface RecipeInterface {\n\npublic function getHost();\npublic function getUser();\npublic function getEnv();\n\n}\n```\n\nAnother idea would be to have one function which returns an array with all data:\n\n``` php\ninterface RecipeInterface {\n\npublic function getRecipt();\n\n}\n```\n Yes, the second one is a bad idea. Just to write down all ways how you could do it. :+1: \n  I think we should set the master branch to the branch for the newest development (currently version 4). The current master branch should be named \"v3\" or something like that.\n\nCurrently the master branch is version 3, right?\n We need this as fast as possible to add new features. :+1: \n :+1: \n Done. \n  I would like to deploy same repository content in two different environments, something like:\n\n```\n$ dep deploy prod dev\n```\n\nIs it possible? Sometimes when there are errors executing the script, the error mentions something about using -p for parallel:\n\n```\ndeploy [-p|--parallel]\n```\n\nCan you elaborate on this?\n  We faced this in the past where we needed to run the cleanup command as sudo as all our releases are owned by a different user than the one which we use for deployment.\n Sorry but what do you mean by \"I don't this what it is save.\"?\n Nope.\n  Hi there!\n\nI have a project with directory structure like this:\n- core\n- public site\n- private site\n\nEach directory is independent repository with it's own deploying strategy. I want to deploy the whole project in one \"dep deploy\" command with cloning each repository to it's own subdirectory inside release path. Is it possible?\n @elfet thanks for quick response!\nI was digging into deployer's internals and noticed that `deploy:update_code` (and other default functions) is using `cd {{release_path}}`, so there is no way to clone repository to `{{release_path}}/repo_path`. Am I missing something? Did you meant that it can be done via custom tasks?\n Okay, thanks!\n  Hi. I have a setup where I have one server and staging/production stages on it.\nI'd like to deploy the same app in these two environment. The only differences behind the two are a bunch of env vars like deploy path and git branch. Is it possible to manage this scenario? tnx.\n Please, can you go further? How can I use `master` branch on `myServer` for the `production` stage?\n\n```\nserver('myServer', 'example.com', 22)\n    ->stage('staging')\n    ->env('branch', 'develop');\n```\n\nTnx\n So I have to define two servers... This is what I've already done so far, but I think this isn't the best way.\n\nSomething like that should be better in my opinion\n\n```\nserver('myServer', 'example.com', 22)\n    ->forwardAgent()\n    ->user('myUser')\n    ->stage('production')\n        ->env('branch', 'master')\n        ->env('deploy_path', 'var/www/production')\n    ->stage('staging')\n        ->env('branch', 'develop')\n        ->env('deploy_path', 'var/www/staging');\n```\n\nAgree?\n I agree to @spescina ; would be nice to see @ version 4.\n I think it will be confusing when there are many servers in same stage (currently) and a server can act as many stages, too.\n @vanquang9387 why?\n\nI think this isn't so confusing.\n\n``` php\nserver('myServer', 'example.com', 22)\n    ->forwardAgent()\n    ->user('myUser')\n    ->stage('production')\n        ->env('branch', 'master')\n        ->env('deploy_path', 'var/www/production')\n    ->stage('staging')\n        ->env('branch', 'develop')\n        ->env('deploy_path', 'var/www/staging');\n\nserver('mySecondServer', 'example.com', 22)\n    ->forwardAgent()\n    ->user('mySecondUser')\n    ->stage('production')\n        ->env('branch', 'master')\n        ->env('deploy_path', 'srv/www');\n```\n\nIsn't it?  \nDeploy on **staging** goes on **myServer** `/var/www/staging`.\nDeploy on **production** goes on **myServer** in `/var/www/production` and on **mySecondServer** in `/srv/www`.\nDeploy on **myServer** goes on `/var/www/staging` and `/var/www/production`.\nDeploy on **mySecondServer** goes on `/srv/www`.\nDeploy on **myServer / production** goes on `/var/www/production`.\n > Deploy on staging goes on myServer /var/www/staging.\n> Deploy on production goes on myServer in /var/www/production and on mySecondServer in /srv/www\n\nYes, we are deploying by stage.\n\n> Deploy on myServer goes on /var/www/staging and /var/www/production.\n> Deploy on mySecondServer goes on /srv/www.\n> Deploy on myServer / production goes on /var/www/production.\n\nAdding option to deploy by server (and stage) brings some more confusion.\n\nIn my opinion, it should be thought that \"there are many servers in same stage\". And I currently config servers of each stage to separated files:\n- staging.php: server1, server2\n- production.php: server2, server3\n @spescina @JHGitty \nThis way is shorter but it is more confusing than current.\nAnd your code after reformat, it is not clean :-1: \n\n```\nserver('myServer', 'example.com', 22)\n    ->forwardAgent()\n    ->user('myUser')\n    ->stage('production')\n    ->env('branch', 'master')\n    ->env('deploy_path', 'var/www/production')\n    ->stage('staging')\n    ->env('branch', 'develop')\n    ->env('deploy_path', 'var/www/staging');\n```\n\n@deployphp/maintainer \nI think we should define env vars follow stage. \nAfter that, we add servers (host, port, user, ...) to stage.\nFinal, we allow deploy with stage only (not allow with server name).\nIt is very clean with users.\n > I think we should define env vars follow stage. \n\nThis is not so good because env vars of same stage maybe different from server to server, such as: deploy_path, etc.\n @vanquang9387 \n\n> In my opinion, it should be thought that \"there are many servers in same stage\"\n\nI disagree with this. It's personal, indeed, but in my day to day work I have one server and multiple stages on it, in early project days particularly. So, for me, it's rather confusing talking about multiple servers in one stage. In my use cases servers count is always less than stages count...\n\n@oanhnn \n\n> And your code after reformat, it is not clean\n\nDo you prefer this?\n\n``` php\n$myServer = server('myServer', 'example.com', 22)\n    ->forwardAgent()\n    ->user('myUser');\n\n$myServer->stage('production')\n    ->env('branch', 'master')\n    ->env('deploy_path', 'var/www/production');\n\n$myServer->stage('staging')\n    ->env('branch', 'develop')\n    ->env('deploy_path', 'var/www/staging');\n```\n\nSame as before from code perspective but different when formatted.\n Oh, hm.. I revert my opinion. Looks wrong after reformat.\n @spescina \n\n> It's personal, indeed, but in my day to day work I have one server and multiple stages on it, in early project days particularly.\n\nYes, I can understand. Sometimes, I also have a server acting as multiple stages on \"early project days\". But later, deploying by stage is more often.\n\n```\n$myServer = server('myServer', 'example.com', 22)\n    ->forwardAgent()\n    ->user('myUser');\n\n$myServer->stage('production')\n    ->env('branch', 'master')\n    ->env('deploy_path', 'var/www/production');\n\n$myServer->stage('staging')\n    ->env('branch', 'develop')\n    ->env('deploy_path', 'var/www/staging');\n```\n\nI don't know if this kind of chaining works as you expected.\n So the goal would be:\nI define servers and stages. Then I should be able to link them as I want.\nIf I have **one server** and **multiple stages** on it I should be able to write something like this\n\n``` php\n$myServer = server('myServer', 'example.com', 22)\n    ->forwardAgent()\n    ->user('myUser');\n\nstage('production')\n    ->env('branch', 'master')\n\nstage('staging')\n    ->env('branch', 'develop');\n\n// ------------------------------------\n\n$myServer->stage('production')\n    ->env('deploy_path', 'var/www/production');\n\n$myServer->stage('staging')\n    ->env('deploy_path', 'var/www/staging');\n```\n\nIf I have **multiple servers** in the **same stage**  I should be able to write something like this\n\n``` php\n$server1 = server('server1', 'example1.com', 22)\n    ->forwardAgent()\n    ->user('myFirstUser');\n\n$server2 = server('server2', 'example2.com', 22)\n    ->forwardAgent()\n    ->user('mySecondUser');\n\nstage('production')\n    ->env('branch', 'master')\n\n// ------------------------------------\n\n$server1->stage('production')\n    ->env('deploy_path', 'var/www/production');\n\n$server2->stage('production')\n    ->env('deploy_path', 'srv/www');\n```\n\nIf I have **multiple servers** and **multple stages**  I should be able to write something like this\n\n``` php\n$server1 = server('server1', 'example1.com', 22)\n    ->forwardAgent()\n    ->user('myFirstUser');\n\n$server2 = server('server2', 'example2.com', 22)\n    ->forwardAgent()\n    ->user('mySecondUser');\n\nstage('production')\n    ->env('branch', 'master')\n\nstage('staging')\n    ->env('branch', 'develop');\n\n// ------------------------------------\n\n$server1->stage('production')\n    ->env('deploy_path', 'var/www/production');\n\n$server1->stage('staging')\n    ->env('deploy_path', 'var/www/staging');\n\n$server2->stage('production')\n    ->env('deploy_path', 'srv/www');\n```\n\nThen I can deploy where exists the link behind a server and a stage\n @elfet\n\n> You can do all of this things right now. But you need to copy server.\n\nI know but I'd like to follow the DRY best practice. These copies confuse me... Why I have to redefine the server each time I add a stage on it? It's weird. I already know how to connect to that server.\n\nBut, we're talking about how deployer could be better or we're here just to fix bugs?\n I totally agree @elfet.\n\nits not about DRY principle @spescina. Think like this, you are separating all your config files depending to the stage in your framework, right? ZF/SF/Yii etc.. But some of them using same configuration like redis/memcache port etc.. But still you have to separate, because when you make any change it should not effect the other configuration.\n\nAt the end, those lines acts like configuration defination, it should be separated call.\n  | Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets |  |\n  Would be nice to have this recipe added as an example to the CakePHP folks using the library.\n\nGreat work by the way!\n There should be a task to symlink plugin asset into webroot too, using `bin/cake plugin assets symlink`.\n Thanks! Were you pinging the rest of the team or inviting me to join the maintainers (to take care of this one only)? Sorry if I misunderstood and thanks again for merging!\n  ``` php\ntask('deploy:vendors', function () {\n    if (commandExist('composer')) {\n        $composer = 'composer';\n    } else {\n        run(\"cd {{release_path}} && curl -sS https://getcomposer.org/installer | php\");\n        $composer = 'php composer.phar';\n    }\n\n    if (!empty(get('github_oauth_token'))) {\n        run(\"cd {{release_path}} && {{env_vars}} $composer config -g github-oauth.github.com $token\");\n    }\n\n    run(\"cd {{release_path}} && {{env_vars}} $composer {{composer_options}}\");\n\n})->desc('Installing vendors');\n```\n  I think many would be grateful, and I among them, if you add a recipe for Phalcon Framework\n Could you outline the general steps of deploying a Phalcon app?\n it is good idea add recipe for Phalcon. You can use this recipe\n\nhttps://github.com/SananGuliev/deployer/tree/master/recipe\n  can this project support ftp ?\n thanks\n  You could write a custom task to restart `php-fpm` after a successful deployment. This would achieve the same goal but not be viable on installations with high load.\n  This fixes a bug when laravel tries to get the full path of these directories but returns false because they don't exist.\n\nThis is caused in some cases like the [view config](https://github.com/laravel/laravel/blob/master/config/view.php#L31),  because `realpath()` is used.\n\nIf we don't create each shared folder during the deployment, realpath returns false because the dir doesn't exist and thus laravel tries to write to the root `/` directory.\n- **Deployer version:** master branch\n- **PHP version:** all php versions\n- **Deployment target(s) OS:** hmm, all\n I think this fix is correct with Laravel 5.1 (LTS version).\nAre you test for all laravel version? @dimsav \nRef #392 \n > Are you test for all laravel version?\n\nNope I tested this only for laravel 5.1.\n\n> Hmm, does work with standard Laravel?\n\n@elfet What do you mean standard Laravel?\n @dimsav \nI think this recipe should support laravel 5.1.x (long term support version) and we should add a note to support other version. Can you create a pull request to `deployphp/docs`?\n After doing a check, this change enables support for both laravel 5.0 and 5.1 versions.\n\nI could help filling the documentation but this is another totally different task :)\n Any ETA for this? Would be really helpful. Thanks :D\n > Great!!! I think merge? But with docs it will be 200% more cooler!\n\nThe docs is in another git repo.\n  | Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n\nAs comment in PR #453, in this PR:\n- Added task to clean up files and/or directories\n Can I change this setting for each server/stage indivually?\n @jverdeyen I can use environment variables instead of parameters, it is maybe change setting for each server/stage individually. But, i want create a common task same `deploy:writable` task :smile: \n Yes, writeable dirs are bounded to the application, but cleaning controllers (or files) can also change per stage/server.\n\n@elfet what's your idea about this feature?\n I think we may set both common var & env var for flexibility.\nFor example:\n\nIn common recipe:\n\n```\nset('clear_paths', [...]);\n```\n\nIn server/stage config:\n\n```\nserver(...)->env('clear_paths', [...]);\n```\n\nThen in deploy:clean:\n\n```\n    $paths = get('clear_paths');\n    // Use env var if exists\n    if (env()->has('clear_paths')) {\n        $paths = env('clear_paths');\n    }\n...\n```\n @oanhnn rebase please.\n  I can do deploy with no problems but when I try to update my code with `deploy:update_code` I get this error:\n\n```\n[RuntimeException]                              \nUnable to login with the provided credentials. \n```\n\nMy deployer version is 3.0.10\n What provided credentials is you used?\n @oanhnn SSH key for my private repo in Bitbucket.\n This error is throw from [here](https://github.com/deployphp/deployer/blob/master/src/Server/Remote/PhpSecLib.php#L89)\nIt is you can't access to your server( not Bitbucket ).\nPlease check your credentials with native `ssh` command.\n I can connect normally in my server by ssh.\n\nEdit: I use pem file, I don't know if this is a problem.\n It is maybe problem with key encryption algorithm, it is not support by [`phpseclib` 2.0](https://github.com/phpseclib/phpseclib/releases/tag/2.0.0).\nPlease try using forward agent to instead of this method.\n This looks like a duplicate of #214.\n  | Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n\nAdds an explination on how to do a proper PR.\n  | Q | A |\n| --- | --- |\n| Bug fix? | no |\n| New feature? | yes |\n| BC breaks? | no |\n| Deprecations? | no |\n| Fixed tickets | - |\n\nIn a custom deploy strategy I want to be able to re-use the release timestamp, so it's the same on all places.\n Thx! I'll do a PR with a \"copy-paste\" example in the contributing docs.\n  When I try to deploy in a vps with centos 6 runnig I get \n\n```\n [RuntimeException]                                 \n  stdin: is not a tty                                \n  mkdir: cannot create directory `is': File exists   \n  mkdir: cannot create directory `not': File exists  \n  mkdir: cannot create directory `a': File exists    \n  mkdir: cannot create directory `tty': File exists  \n  bash: line 1: 20150902125342: command not found    \n```\n This is de full log\n\n```\nuser@user-dev:~/projects/usef/code$ dep deploy prod -vvv\n\u27a4 Executing task deploy:prepare\n\u2937 on [prod]\n[user5@host.com] Password:\nRun: echo $0\n> stdin: is not a tty\n> bash\n> \nRun: if [ ! -d /home/user5/public_html ]; then mkdir -p /home/user5/public_html; fi\n> stdin: is not a tty\n> \nRun: cd /home/user5/public_html && if [ ! -d releases ]; then mkdir releases; fi\n> stdin: is not a tty\n> \nRun: cd /home/user5/public_html && if [ ! -d shared ]; then mkdir shared; fi\n> stdin: is not a tty\n> \n\u2936 done on [prod]\n\u2714 Ok\n\u27a4 Executing task deploy:release\n\u2937 on [prod]\nRun: mkdir /home/user5/public_html/releases/20150903162935\n> stdin: is not a tty\n> \nRun: cd /home/user5/public_html && if [ -h release ]; then rm release; fi\n> stdin: is not a tty\n> \nRun: ln -s /home/user5/public_html/releases/20150903162935 /home/user5/public_html/release\n> stdin: is not a tty\n> \n\u2936 done on [prod]\n\u2714 Ok\n\u27a4 Executing task deploy:update_code\n\u2937 on [prod]\nRun: git version\n> stdin: is not a tty\n> git version 1.7.1\n> \nRun: ls /home/user5/public_html/releases\n> stdin: is not a tty\n> 20150903162935\n> \nRun: readlink /home/user5/public_html/release\n> stdin: is not a tty\n> /home/user5/public_html/releases/20150903162935\n> \nRun: git clone  --depth 1 --recursive -q https://user:pass@githost.com/git/usef stdin: is not a tty/home/user5/public_html/releases/20150903162935 2>&1\n```\n\n```\n[RuntimeException]   \n  stdin: is not a tty \n```\n May be some like this -> http://unix.stackexchange.com/questions/48527/ssh-inside-ssh-fails-with-stdin-is-not-a-tty\n I'm resolving this setting this code in `~/.bashrc`\n\n```\nif [ $(expr index \"$-\" i) -eq 0 ]; then\n    return\nfi\n```\n\nThanks and sorry for the inconvenience\n How can this be solved in another way? The setting in `.bashrc` as @amsolucionesweb mentioned doesn't work in my case...\n Ok, seems my cPanel-based server was causing these headaches because cPanel adds the `mesg y` command via `/etc/bashrc`\n\nFor future reference: add the code @amsolucionesweb suggested on top of your **server's** `.bashrc` file.\n\nIn my case, my file looks like this:\n\n``` sh\n# /home/username/.bashrc\n\nif [ $(expr index \"$-\" i) -eq 0 ]; then\n    return\nfi\n\n# Source global definitions\nif [ -f /etc/bashrc ]; then\n        . /etc/bashrc\nfi\n```\n :+1: @Propaganistas \n   :+1: \n  This feature makes it possible to specify the user for `chmod` & `setfacl`. In my use case the PHP-FPM pool is using an dedicated user but Apache is served by www-data. Using `deploy:writable` all writable dirs would use the Apache user rather the pool user which causes permission issues when trying to set the file mode and owner.\n\nYou can now use the directive `set('http_user', 'username')` to set the user owning this files & directories.\n @daFish can you add docs, please?\n @elfet PR opened under deployphp/docs/pull/40\n  See #356. I think namespacing the helper functions will remove alot of problems. Especially those who's using the Laravel/Lumen framework. \n Will add this to v4.\n Hi, why not putting `functions.php` under `Deployer` namespace, instead of `Deployer\\Functions` ?\n\nSo we'll just have to put `namespace Deployer;`  in `deploy.php` and recipes files, which is sexier than `namespace Deployer\\Functions;`\n\nIt could be another cool namespace :smile: \n I think everything should be directly under `Deployer` namespace.\n ping @ceesvanegmond\nCan you fix it or should we create a new PR?\n PR = Pull Request.\n I think this PR could be closed as 5eadb57 implements namespace for functions.\n Right!\n  Here's my deployment log:\n\n\u2714 Executing task deploy:prepare\n\u2714 Executing task deploy:release\n\u2714 Executing task deploy:update_code\n\u2714 Executing task deploy:symlink\n  Executing task cleanup\n\nNotice: Unable to open channel in phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 3255\n\n\u2714otice: Connection closed prematurely in phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 3396\n\u27a4 Executing task success\n\nThis seems to be happening after several successful deployments. When I remove the releases dir on the server, it solves the problem, but as I do more and more deployments this problem always comes back.\n  When run deploy:writable_dirs WITHOUT sudo, exception maybe thrown if setfacl run on files created by http user (in directory that has been setfacl before). These directories/files should be skipped.\n\nRef: https://github.com/deployphp/deployer/issues/433#issuecomment-133388894\n Cool! I'm going to merge. Can any one to test it? @oanhnn @deployphp/maintainer ?\n ping @elfet \n @oanhnn Please check my new commit.\nI think problem that \"httpd user is the same user or same group with deployer user\" is not related to setfacl. This should be checked at the beginning of writable task if needed.\n  My deploy.php\n\n``` php\nrequire 'vendor/deployer/deployer/recipe/yii.php';\nset('repository', 'git@bitbucket.org:xxx.git');\n\nserver('qa', 'xxx.eu-west-1.compute.amazonaws.com')\n    ->user('ubuntu')\n        ->stage('staging')\n    ->pemFile('~/xx/xxx.pem');\n```\n\nError i get:\ndep deploy staging\nExecuting task deploy:prepare\nPHP Notice:  Cannot connect to xxx.compute.amazonaws.com:22. Error 110. Connection timed out in phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 1011\n\nI did try to download deployer and phpseclib via composer. Getting same error.\n Yes, should be fixed in 3.0.9.\n  It fixes wrong huge default value for timeout that was introduced in #429\n- [x] be sure that Travis tests works fine\n\nIMPORTANT! To prepare ssh tests, I have to use `sudo: required` that means that all tests will run on old Travis infrastructure not [container-base](http://docs.travis-ci.com/user/workers/container-based-infrastructure/)\n Thanks for fix! :beers: \nI think @oanhnn is right, but now we need to fix it as soon as possible. \nSo i merge this PR.\n@torinaki is it possible to implement this tests, but on new travis dockers?\n @elfet , @oanhnn here is PR https://github.com/deployphp/deployer/pull/438 . Manually tested both cases(w/o bug, with bug)\n @elfet about tests implementation on new travis docker. I was searching on github for already existing examples, but unfortunatly no luck. My current implementation was based on `phpseclib` implementation. \nCurrenlty i have few ideas where we should drip. One of them the most real is:\nTry to install SSH server on travis docker. It should listen on 127.0.0.1(it is [possible](http://docs.travis-ci.com/user/ci-environment/#Networking)). For example we can try to install binary of openssh server: https://help.ubuntu.com/lts/serverguide/openssh-server.html . \n  After update form 3.0.6 to 3.0.7 version when deploy I get \n\n``` [RuntimeException]\n  ln: failed to create symbolic link `/var/www/vhosts/site.com/httpdocs/releases/20150819144214/app/config/parameters.yml': No such file or directory \n```\n\n```\nException trace:\n () at phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:114\n Deployer\\Server\\Remote\\PhpSecLib->run() at phar:///usr/local/bin/dep/src/functions.php:296\n run() at phar:///usr/local/bin/dep/recipe/common.php:192\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:73\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:39\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:259\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:878\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:99\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:62\n require() at /usr/local/bin/dep:4\n```\n\nWhen I rollback to version 3.0.6 the deploy goes fine\n Wow! Need to investigate what happens. @oanhnn does your deploys work fine with 3.0.6 and 3.0.7?\n yeah, this is exactly what I was getting. \n Now, after run `dep self-update` and versi\u00f3n 3.0.8 is installed when run `dep deploy prod` I get\n\n```\nPHP Notice:  Cannot connect to linux.server.com.ar:22. Error 110. Connection timed out in phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 1011\nPHP Stack trace:\nPHP   1. {main}() /usr/local/bin/dep:0\nPHP   2. require() /usr/local/bin/dep:4\nPHP   3. Deployer\\Deployer->run() phar:///usr/local/bin/dep/bin/dep:62\nPHP   4. Symfony\\Component\\Console\\Application->run() phar:///usr/local/bin/dep/src/Deployer.php:99\nPHP   5. Symfony\\Component\\Console\\Application->doRun() phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:126\nPHP   6. Symfony\\Component\\Console\\Application->doRunCommand() phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:195\nPHP   7. Symfony\\Component\\Console\\Command\\Command->run() phar:///usr/local/bin/dep/vendor/symfony/console/Application.php:878\nPHP   8. Deployer\\Console\\TaskCommand->execute() phar:///usr/local/bin/dep/vendor/symfony/console/Command/Command.php:259\nPHP   9. Deployer\\Executor\\SeriesExecutor->run() phar:///usr/local/bin/dep/src/Console/TaskCommand.php:82\nPHP  10. Deployer\\Task\\Task->run() phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:39\nPHP  11. call_user_func() phar:///usr/local/bin/dep/src/Task/Task.php:73\nPHP  12. {closure:phar:///usr/local/bin/dep/recipe/common.php:67-93}() phar:///usr/local/bin/dep/src/Task/Task.php:73\nPHP  13. Deployer\\Server\\Remote\\PhpSecLib->connect() phar:///usr/local/bin/dep/recipe/common.php:68\nPHP  14. phpseclib\\Net\\SFTP->login() phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:54\nPHP  15. call_user_func_array() phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/Net/SFTP.php:392\nPHP  16. phpseclib\\Net\\SSH2->_login() phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/Net/SFTP.php:392\nPHP  17. phpseclib\\Net\\SSH2->_connect() phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php:1879\nPHP  18. user_error() phar:///usr/local/bin/dep/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php:1011\n\n\n  [RuntimeException]                              \n  Unable to login with the provided credentials.  \n\n```\n\nMy server config is:\n\n``` php\nserver('prod', 'linux.server.com.ar', 22)\n    ->env('deploy_path', '/var/www/vhosts/server.com.ar/httpdocs')\n    ->user('user')\n    ->password()\n    ->stage('prod');\n```\n\nThe credentials was not changed and I can login via ssh normally.\n This is an issue introduced in 3.0.8, it should be fixed by this #435 \n Fixed.\n  It temporary fixes problem that described in phpseclib/phpseclib#775.\nFor example `composer install` may be stoped on the middle of progress if it takes more than 10 sec.\n Cool! Thanks!\n @elfet @oanhnn it will be greate to prepare new release with this fix, because this may affect many users. \nI'm sure that was itroduced by https://github.com/deployphp/deployer/pull/428 after `phpseclib` update\n Ok! @deployphp/maintainer can anybody make new release?\n Sorry I get:\n\n```\nPHP Notice:  Cannot connect to stage.ourserver.com:22. Error 60. Operation timed out in phar:///Users/alex/Downloads/deployer (1).phar/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 1011\n```\n\nWhen it tries to connect.\n\nPutting in a number like 3600 does work though. I suggest putting a setting that can be changed but defaults to something reasonable like 10 minutes. PHP_INT_MAX on my machine is 9223372036854775807 and it seems it really messes with it.\n @AlexStansfield , @elfet , @oanhnn I was able to reproduce problem. Sorry guys it was my bad. Found that I was testing with patched `phpseclib` with few fixed issues by me.\nAdding `3600` as default timeout is proper fix in this case. I have prepared PR #435 with fix and prepared functional tests that cover timeout case. Please check PR, because I have to change Travis configurations to achieve possibility to implement these tests. In case if you will not agree to change Travis changes I will remove tests from PR.  \n The problem was as I said before was that `fsockopen` do not create socket with huge timeout, but `3600` is ok for it.\n   :+1: \n The new phpseclib has broken git clones for me. I'm using pemfiles for auth.\n\nEverything was fine with deployer/phpseclib:1.0.0 but now git clone produces empty directory.\n\nI switched to 3.0.7 and downgraded phpseclib back to 1.0.0 and everything works fine again.\n @AlexStansfield I will look at this problem ASAP. I guess problem is in phpseclib because of BC breaks. It's a pity that there are no test for this case in deployer.\n @torinaki thanks. I'm not sure what's going on I even built a version that didn't suppress git messages to see if it was at least giving me some useful output. Absolutely nothing. I'd imagine there are some pretty big changes between phpseclib 1.0.0 and 2.0.0 and something there has really messed things up for me.\n @AlexStansfield I can say, that deployer already have used 2.0.0 version of `phpseclib`. The the tag `v1.0.0` was created in deployphp/phpseclib incorrecly. So my changes was only updated the 2.0 version till lastes minor version\nAfter quick investigation I have found that your issue may be related to timeout. Can you please tell me are you using timeout in your deployment task, and what value of timeout your are using?\n @torinaki actually v1.0.0 fork on deployer is from february 22nd. There have been many changes in phpseclib since then.\n\nhttps://github.com/deployphp/phpseclib/commits/v1.0.0\nhttps://github.com/phpseclib/phpseclib/commits/master?page=9\n As for timeout. it consistently fails with v2.0.0 from phpspeclib and consistently works with v1.0.0 from deployer. And it only takes about 5 seconds to do the git clone. I'm not setting any timeout myself.\n\nAlso it's not the clone that causes the deployer to fail. It's not until it tries to create a symlink to a shared file in a directory that doesn't exist (as it wasn't cloned by git) that an error is triggered.\n @AlexStansfield  is this reproduceble with this fix:\nhttps://github.com/deployphp/deployer/commit/176ca98afbeb974c411aab78f9deea54c5161b65\nPlease try with a latest deployer.\nIf it will still exists I will prepare PR to rollback `phpseclib`\n\nActual changes here:\nhttps://github.com/phpseclib/phpseclib/compare/b061cba7fc4661e9612917aec1c18c342136bd31...2.0\nYes, I know there are a lot changes, but in actual for deployer classes(RSA and SSH2) there are not so many.\n Sorry I had left work.\n\nThat fix breaks it more. When trying to connect to the server I get:\n\n`PHP Notice:  Cannot connect to stage.ourserver.com:22. Error 60. Operation timed out in phar:///Users/alex/Dev/Source/deployer/deployer.phar/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 1011`\n\nBut replacing the timeout with with a high enough number (3600) did the trick.\n\nThanks\n @AlexStansfield does it work now with 3.0.8?\n @elfet no, same error as mentioned above. I have to replace PHP_INT_MAX with something less huge.\n\nI mentioned it on #429 \n Really strange, because exactly same error I have notice when timeout was 0. @AlexStansfield  how and where did you change that timeout? What PHP version you use? \nAnyway `3600=1h` timeout should be enough for most tasks, so if this fix your issue we can change it. I guess it may be related to `fsockopen` somehow. \nSorry, but please twice-check your version of deployer, to be sure that you are using right version.\n I took the 3.0.7 source and added PHP_INT_MAX as you suggested, it gave me that error. I then downloaded the 3.0.8 phar file and tried with no modifications and it gave me that error.\n\n```\nAlexs-MBP:~ alex$ php --version\nPHP 5.5.26 (cli) (built: Jun 12 2015 08:17:31) \nCopyright (c) 1997-2015 The PHP Group\nZend Engine v2.5.0, Copyright (c) 1998-2015 Zend Technologies\n    with Xdebug v2.3.3, Copyright (c) 2002-2015, by Derick Rethans\n```\n @AlexStansfield please upgrade till latest version 3.0.9. Fix already in master\n Yep that fixed it, cheers\n  My user uploads reside in my web dir, is there a known way of handling this data during deployment so its not overwritten and lost on each deployment?\n Ah right. Good to know I missed the line....\n\n> shared - contains shared/common files and directories between releases (logs, shared data, etc.).\n\nDoes that simply mean that those directories will be maintained and undisturbed during deployment?\n ummm... no.\n\nThat means that in directory `shared` there'll be created `web/upload` dir structure and upon deploment `web/upload` in uployed will be a symlink to `shared/web/upload'\n\nIf You're starting to use deployer instead of handling shared from get-go it would be wise to manually perform creation of `shared/web/upload` and placing files in it, because on first deploy actuall dir will get removed.\n\nthat basically means that files and directories are preserved, but outside of deployment moves, simply by symlinking to them.\n OK thanks. That makes sense and further investigation shows this to be the case.\n\nI can see how to do this migration now, copying files first to ensure they are not lost then the symlink will take care of future uploads as the symlink will be in place.\n  When attempting to run `composer install` the following error occurs\n\n> Could not open input file: app/console\n\nIn my **deployer.php** file I have set\n\n```\nset('bin_dir', 'bin);\n```\n\nBut the error still references **app/console** rather than **bin** which is where my console executable resides.\n\nHave I missed something? Or is my console executable in the wrong location?\n I think the issues are occuring because when I first set up Symfony2 I selected to use the Symfony3 directory structure.\n\nI have since managed to undo most of this and get **console** into my **app** directory. There are still issues though so I think I will figure those out before determining that the issue is with Deployer and not my set up.\n I am still having issues it seems, after reverting back to the Symfony3 dir structure.\n\nThis time its \n\n> Script Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache handling the post-install-cmd event terminated with an exception\n> [RuntimeException]\n> An error occurred when executing the \"'cache:clear --no-warmup'\" command.\n\n```\n{\n    \"name\": \"symfony/framework-standard-edition\",\n    \"license\": \"MIT\",\n    \"type\": \"project\",\n    \"description\": \"The \\\"Symfony Standard Edition\\\" distribution\",\n    \"autoload\": {\n        \"psr-0\": { \"\": \"src/\", \"SymfonyStandard\": \"app/\" }\n    },\n    \"require\": {\n        \"php\": \">=5.3.3\",\n        \"symfony/symfony\": \"2.7.*\",\n        \"doctrine/orm\": \"~2.2,>=2.2.3\",\n        \"doctrine/doctrine-bundle\": \"~1.2\",\n        \"twig/extensions\": \"~1.2\",\n        \"symfony/assetic-bundle\": \"~2.3\",\n        \"symfony/swiftmailer-bundle\": \"~2.3\",\n        \"symfony/monolog-bundle\": \"~2.4\",\n        \"sensio/distribution-bundle\": \"~3.0.12\",\n        \"sensio/framework-extra-bundle\": \"~3.0\",\n        \"incenteev/composer-parameter-handler\": \"~2.0\",\n        \"friendsofsymfony/user-bundle\": \"~2.0@dev\",\n        \"friendsofsymfony/jsrouting-bundle\": \"@stable\",\n        \"adamquaile/symfony-fieldset-bundle\": \"*\",\n        \"gregwar/image-bundle\": \"dev-master\",\n        \"salavert/time-ago-in-words\": \"1.*\",\n        \"hwi/oauth-bundle\": \"0.4.*@dev\",\n        \"jms/serializer-bundle\": \"0.13.*\",\n        \"liip/url-auto-converter-bundle\": \"dev-master\",\n        \"eko/feedbundle\": \"dev-master\",\n        \"3f/converter\": \"dev-master\",\n        \"zaachi/PHP-Instagram-effects\": \"dev-master\",\n        \"lunetics/locale-bundle\": \"2.2.*\",\n        \"friendsofsymfony/rest-bundle\": \"~1.5\"\n    },\n    \"require-dev\": {\n        \"sensio/generator-bundle\": \"~2.3\"\n    },\n    \"scripts\": {\n        \"post-root-package-install\": [\n            \"SymfonyStandard\\\\Composer::hookRootPackageInstall\"\n        ],\n        \"post-install-cmd\": [\n            \"Incenteev\\\\ParameterHandler\\\\ScriptHandler::buildParameters\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::buildBootstrap\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::clearCache\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::installAssets\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::installRequirementsFile\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::removeSymfonyStandardFiles\"\n        ],\n        \"post-update-cmd\": [\n            \"Incenteev\\\\ParameterHandler\\\\ScriptHandler::buildParameters\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::buildBootstrap\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::clearCache\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::installAssets\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::installRequirementsFile\",\n            \"Sensio\\\\Bundle\\\\DistributionBundle\\\\Composer\\\\ScriptHandler::removeSymfonyStandardFiles\"\n        ]\n    },\n    \"config\": {\n        \"bin-dir\": \"bin\"\n    },\n    \"extra\": {\n        \"symfony-app-dir\": \"app\",\n        \"symfony-bin-dir\": \"bin\",\n        \"symfony-var-dir\": \"var\",\n        \"symfony-web-dir\": \"httpdocs\",\n        \"incenteev-parameters\": {\n            \"file\": \"app/config/parameters.yml\"\n        },\n        \"branch-alias\": {\n            \"dev-master\": \"2.6-dev\"\n        }\n    }\n}\n```\n  In function from common recipe (recipe/common.php)\n\n``` php\n/**\n * Release\n */\ntask('deploy:release', function () {\n    $release = run('date +%Y%m%d%H%M%S');\n    $releasePath = \"{{deploy_path}}/releases/$release\";\n    $i = 0;\n    while (is_dir(env()->parse($releasePath)) && $i < 42) {\n        $releasePath .= '.' . ++$i;\n    }\n    run(\"mkdir $releasePath\");\n    run(\"cd {{deploy_path}} && if [ -h release ]; then rm release; fi\");\n    run(\"ln -s $releasePath {{deploy_path}}/release\");\n})->desc('Prepare release');\n```\n\nThis lines:\n\n``` php\n    while (is_dir(env()->parse($releasePath)) && $i < 42) {\n        $releasePath .= '.' . ++$i;\n    }\n```\n\nIs it local dir check when remote is needed? Or I didn't understand the meaning.\n Only if you have two deploys in less then one second. \nThis is used for phpunit tests.\n  Hi,\n\nWe try to use deployer for our projects.\nBut we have some trouble with the connection...\nI use this config :\n\n```\nserver('preprod', 'myserver.net', 22)\n    ->user('user')\n    ->identityFile()\n    ->stage('pre-production')\n    ->env('deploy_path', '/var/www/preprod')\n    ->env('branch', 'master')\n;\n```\n\nMy coworker uses the same script, but it does not work for him.\n\n```\n [RuntimeException]                              \n  Unable to login with the provided credentials. \n```\n\nSo he tried to add forwardAgent() :\n\n```\nserver('preprod', 'myserver.net', 22)\n    ->user('user')\n    ->identityFile()\n    ->forwardAgent()\n    ->stage('pre-production')\n    ->env('deploy_path', '/var/www/preprod')\n    ->env('branch', 'master')\n;\n```\n\nIt works for him but not for me...\nSo I moved the forwardAgent() :\n\n```\nserver('preprod', 'myserver.net', 22)\n    ->user('user')\n    ->forwardAgent()\n    ->identityFile()\n    ->stage('pre-production')\n    ->env('deploy_path', '/var/www/preprod')\n    ->env('branch', 'master')\n;\n```\n\nWorks for me... But not for him... :'(\n\nSomeone has an idea?\n Now `forwardAgent()` and `identityFile()` mutually exclusive due to phpseclib implementation. I'm working on new ssh agent for Deployer right now. \nCheck if your id_rsa keys in same paths in `identityFile`.\n Yes, our id_rsa keys are in same paths than `identityFile` parameter values.\n Any update on this? We are having exact same issue. We found out that we having different versions of openssh. Can that be the issue? Is there any version supported or required?\n\nI have: \n\n```\nOpenSSH_6.9p1, LibreSSL 2.1.7. \n// No need to use ForwardAgent option\n```\n\nMember has: \n\n```\nOpenSSH_6.2p2, OSSLShim 0.9.8r 8 Dec 2011. \n// Needs ForwardAgent option.\n```\n\nHere's the server definition:\n\n``` php\nserver('dev', 'dev.server.com', 22)\n    ->user('root')\n    ->env('deploy_path', '/var/www/html/')\n    ->stage('dev')\n    ->identityFile();\n```\n  Is it possible to use deployer with ssh-agent on Windows?\n\nWhen I am connecting with `identityFile('~/.ssh/id_rsa.pub', '~/.ssh/id_rsa', 'MyStrongPassword')` it's ok. Deployment is successful.\n\nBut it's not secure to store MyStrongPassword here. I am trying to use `forwardAgent()` and all I get is:\n\n```\nWarning: fsockopen(): unable to connect to unix://C:/Users/8523~1/AppData/Local/Temp/ssh-lZz6mszVrxCO/agent.2700:0 (Unable to find the socket transport \"unix\" - did you forget to enable it when you configured PHP?) in path\\to\\vendor\\deployer\\phpseclib\\phpseclib\\System\\SSH\\Agent.php on line 97\n\nNotice: Unable to connect to ssh-agent (Error 11073052: Unable to find the socket transport \"unix\" - did you forget to enable it when you configured PHP?) in path\\to\\vendor\\deployer\\phpseclib\\phpseclib\\System\\SSH\\Agent.php on line 99\n\n[RuntimeException]\n Unable to login with the provided credentials.\n```\n\nI am using https://msysgit.github.io/ and ssh-agent works great. I just typing \"ssh user@hostname\" and connection is successful. \n\nAlso I can use \"pageant\" agent (Putty). It works great too.\n > Error 11073052: Unable to find the socket transport \"unix\" - did you forget to enable it when you configured PHP?\n Couldn't find any information about unix sockets on Windows. \n1. Is it possible to use unix sockets on Windows? [I think answer is NO]\n2. Is it possible to use another socket transport to connect to ssh-agent on Windows?\n I have exact same problem on Windows.\n\n@frutality \n\n> When I am connecting with identityFile('~/.ssh/id_rsa.pub', '~/.ssh/id_rsa', 'MyStrongPassword') it's ok.\n\nI even could not deploy with identityFile().\nWhen using identityFile(), how could deployment server be authenticated by git server? Did you upload private key to deployment server?\n Why is this closed? I'm having same issue.\n- using windows\n- everything works with putty+pageant\n- everything works with ssh+ssh-agent\n- deployer doesn't work, same error as described above.\n\n`stream_get_transports()` returns     \n\n```\nstring (3) \"tcp\"\nstring (3) \"udp\"\nstring (3) \"ssl\"\nstring (5) \"sslv3\"\nstring (5) \"sslv2\"\nstring (3) \"tls\"\nstring (7) \"tlsv1.0\"\nstring (7) \"tlsv1.1\"\nstring (7) \"tlsv1.2\"\n```\n\nHow exactly do I \"enable unix:// socket transport\" in my php.ini in windows?\n\nIf unix:// transport is not available, maybe you could implement some other way of using ssh-agent (or pageant) - the way default utilites like ssh do it.\n Hi @oanhnn, thanks for your reply.\nWith stream_get_transports() I have shown that I don't have unix:// transport available/installed. That is certainly the reason it fails for me.\n\nI am using latest wamp on windows, php 5.6 or 7.0.8. Since it works for you, you must have unix:// transport. How do I get one?\n  Symfony recipe currently forces to use assetic. I think this a bit rude, since assetic is absolutely not mandatory for a Symfony project.\nIt would be nice to remove from main task, maybe adding a note in documentation suggesting to possibly enable 'deploy:assetic:dump' using `after` function.\nA possible alternate solution is setting a boolean configuration variable, so you can disable/enable assetic in Symfony (this is how capifony does)\n To be honest I build by assets by gulp on every deployment on the server-side, so I don't use assetic either.\nThe simplest solution could be to separate the assetic part into a separate recipe, but this would of course would be a BC break.\n\nAnother solution that's a non-breaking change could be achieved using global variables, so that if something like: \"sf_skip_assetic\" was set to true, then the task would do nothing.\nIt's not the nicest solution, since the task itself would still run, pretending to build assets, but in reality it would do nothing.\n Sure\n +1\n :+1: \n AsseticBundle has been removed from Symfony Standard Edition for Symfony >= 2.8 **as default**.\nI think the recipe should only contain the basics of Symfony against the newest Symfony Standard Edition.\nhttps://github.com/symfony/symfony-standard\n Symfony 2.8.0\n\n```\n  [RuntimeException]                                                  \n\n    [Symfony\\Component\\Console\\Exception\\CommandNotFoundException]    \n    There are no commands defined in the \"assetic\" namespace.         \n    Did you mean this?                                                \n        assets\n```\n Maybe you closed it too fast? There is no mention about the new option added in #499 in docs.\n Agree. Need to update docs.\n Lets turn off assetic by default.\n  The same in Powershell and in ConEmu.\nMaybe it is better to display just plain text in Windows env\n![2015-07-31 11_46_47-select administrator_ windows powershell](https://cloud.githubusercontent.com/assets/1333841/9003797/dbb1a9c2-3779-11e5-8b85-ad311fbad10b.png)\n![2015-07-31 11_45_48-administrator_ c__windows_system32_cmd exe](https://cloud.githubusercontent.com/assets/1333841/9003796/dbb1bb24-3779-11e5-9068-539d2dd7dbbb.png)\n![2015-07-31 11_46_25-administrator_ powershell](https://cloud.githubusercontent.com/assets/1333841/9003798/dbb5af2c-3779-11e5-8ee9-b4c5a369a01a.png)\n why was this closed ? The issue is still present.\n Yes, but still need to be fixed. Anyone want to contribute? \n I will probably get to it, during the holidays or sooner. But it is only one file Informer.php, that needs to be changed. \n Can be temporary fixed with `chcp 65001` before running deployer\n  Corrected comments\nRefactored default setting into builder class to match other defaults location\n  Based on #328 and #411.\n\nUnfortunately it seems that php-ssh doesn't support timeout - Herzult/php-ssh#46\n Cool!\nI think it is better if support:\n\n```\nlocalServer($name, $timeout = 300);\n// and\nserver($name, $host, $port = 22, $timeout = 300);\n```\n @oanhnn Well, I made it like this because @elfet said that it would be better (https://github.com/deployphp/deployer/pull/328#discussion_r32095173). If I understand correctly\n @elfet What do you think?\n@davidkudera Can you write docs and create a PR to https://github.com/deployphp/docs\n @oanhnn sure, I'll do that right after you'll decide which version is better (method or argument)\n @elfet Do you decide which version is better (method or argument).\n\n```\nserver(...)\n    ->timeout(300)\n```\n\nor \n\n```\nserver('dev', 192.168.1.2, 22, 300)\n```\n\nor both :smile: \n @elfet yes that is only logical since `runLocally` also has it. Actually I was thinking about it too, but I didn't want to do that in my first PR because it worked just for local server and it would mean to change implementation of `ServerInterface`. Also I made just the changes mentioned in the second PR. \n\nBut what if we'll change `ServerInterface::run()` but keep global server configuration too? If user provide second argument at `run` method, we'll use that, othervise we'll use value from server configuration. And for people using ssh we can throw some `NotImplementedException` for example.\n\nWhat do you think?\n Ok, so should I change it? @elfet @oanhnn \n @elfet ok, I'll force push these changes. Unfortunately right now I don't have time, but I should be back home maybe at sunday\n @elfet @oanhnn what do you think now guys?\n ping @elfet @oanhnn \n rebased to master\n ```\nTimeout is not supported in ssh connection.\n```\n\nWE really need to figure out how to implement this in ssh2 ext. Otherwise timeout with be really strange functionality. \n Yeah, but do we know if ssh2 is still developed? Last commit was 5 months ago..\n @elfet , @davidkudera SSH wrapper library use stream blocking. It's easy to refactor code to imlement not blocking implementation with callback:\nhttps://github.com/Herzult/php-ssh/blob/d569d15483a5f9218700313cd21c50090aa93351/src/Ssh/Exec.php#L26\n\nBut I'm still wonder about use cases of this timeout. @davidkudera can you please provide some examples of use cases? Specialy for me. I'm just curious.\n Or another idea is to wrap command with some shell timeout function.\nWindows: http://stackoverflow.com/questions/12394338/windows-batch-analogue-for-timeout-command\nLinux: http://man7.org/linux/man-pages/man1/timeout.1.html\nWithout any magic :)\n @torinaki sure, for example we were developing new version of our website for more than half of a year (without touching 1st version). My deploy process failed almost immediatelly - to be more specific at database migrations. On my PC with linux it runs for about 15 minutes and I wasn't even brave enough to try it on Windows :grinning: \n @davidkudera for what exact task you suppose to use `timeout`? Database migrations?\n Yes, for now only for database migrations, but maybe there will be some other tasks too.\n I just noticed that this PR is still open. Is there anything I can do now to make it merged?\n\nThe problem with SSH is unfortunate but I think that the solution proposed in this PR is still much better than the current state of deployer.\n Still open, @elfet When does it get merged?\n @elfet from my point of view it is important that following comment should be addressed before merge:\nhttps://github.com/deployphp/deployer/pull/415#discussion_r37126085\notherwise deployer will silently stop task in case when it wil reaches timeout.\n +1 \n  @elfet fixed\n @ZhukV the maintainers seem to like it !!! It's only missing a little doc! ;)\n Lets merge! Docs will come late i hope).\n  Adds new option `runAlwaysOn` to task, based on #408. \n\n**Configuration:**\n\n``` php\nlocalServer('production');\nlocalServer('test1');\nlocalServer('test2');\n\ntask('database:sync', function() {\n    write('syncing database from '. env('server.name'));\n})->runAlwaysOn('production');\n```\n\n**Test:**\n\n```\n$ dep test production\noutput: syncing database from production\n\n$ dep test test1\noutput: syncing database from production\n\n$ dep test test2\noutput: syncing database from production\n```\n\nNow it doesn't matter on which server you want to run some task, it will just always run on the defined one. That can be easily used for example for syncing database from production to other servers (independently). \n\n**Todo:**\n- Is `runAlwaysOn` good name?\n- Is it possible to somehow test at which server current task runs? `env('server.name')` can't be used\n- I don't know how to test `ParallelExecutor`. At least not yet\n I'll be able to test it at real application tomorow at work\n rebased to master\n @davidkudera this is cool feature, but i think its really edge case. \nI'm working on plugin system for Deployer v4 with will be able to add your functionality as plugin.\n Ok, I'll use my fork for now. Btw plugins would be really really great :wink: \n  Hi\nI have a task which need to know the current environment/stage, the one i pass through the cli.\nso `./vendor/bin/dep deploy dev` would give me `dev`.\nI've looked through documentation but can't find any mention of this.\n @Danielss89 \nCan you try this code:\n\n```\ntask('foo:bar', function() {\n    // For arguments\n    $stage = null;\n    if (input()->hasArgument('stage')) {\n        $stage = input()->getArgument('stage');\n    }\n\n    // For option\n   $tag = null;\n   if (input()->hasOption('tag')) {\n        $tag = input()->getOption('tag');\n    }\n}\n```\n\nSee more in #377 \n Thx, that worked :)\nIs it possible to deploy to more than one stage at the same time(in once cli command)?\n Somehow related - what is the preferred way to execute tasks only for some stages?\nDo I have to check it inside the task, or is there something else I can do?\n Hmm... I meant programmatically. I have a task (import database from production) which I only want to execute on stages test and staging.\nIt's set up as a before-task for database:migrate.\nI'd like to execute this conditionally based on the stage...\n @temp I think that I was trying to do something similar, but with no success.. See #408 issue and PR #413 \n  Unfortunately there is no way to change process timeout for commands running on local server. Method `runLocally` has that option.\n I think all servers (local or remote) should support timeout link pull request #328 \nAnd not using env var.\n Yep, you are of course right. Sorry I didn't noticed that pull request :wink: \n @elfet I'm thinking about it too. So I'll probably do that, because I really need it\n  Just little bit of syntactic sugar. What do you think?\n\n**String at onlyOn method**\n[That](https://github.com/deployphp/deployer/issues/408#issuecomment-125478786) example from #408 didn't work and [here](https://github.com/deployphp/deployer/issues/355#issuecomment-112614911) it was suggested to use strings too. But the method internally works with arrays, so it should either accept both arrays and strings or I think that there should be an `array` type hint.\n I think this method should internally works with arrays.\nWe should not complicate it.\n I agree about not complicating things, so what do you think about adding `array` type hint? Because now I think that many people (myself, you and owner of repo including) actually try strings, but it will [throw](http://3v4l.org/gGq4o) completely unrelated error.\n Yes, it is added `array` type hint by phpdoc\n\n```\n    /**\n     * @param array $servers\n     * @return $this\n     */\n```\n Sorry I didn't mean phpdoc, but method type hint.\n\n``` php\npublic function onlyOn(array $servers) {}\n```\n Error [http://3v4l.org/FLQhN](http://3v4l.org/FLQhN) is much better than [http://3v4l.org/gGq4o](http://3v4l.org/gGq4o).. At least I think :wink: \n Yes, i agree, we will use method type hint.\nCan you create PR?\n Sure thing. Should I also add default value? `array $servers = []`\n I simplified `onlyOn` method like @rodnover55 said\n @elfet @davidkudera \nI think it is easy using for users if param  always be array.\nDocument will be clearer and run faster!\n\n``` php\n->onlyOn('dev');\n// or\n->onlyOn(['dev']);\n```\n @elfet I agree with @oanhnn that things should not be too complicated, but than I noticed that both of you used `->onlyOn('dev')` :smile: Thats the true reason I created this PR. \n\nThe only thing that remains is if I should keep it like this:\n\n``` php\narray_flip(is_array($servers) ? $servers : [$servers]);\n```\n\nor change it to\n\n``` php\narray_flip(is_array($servers) ? $servers : func_get_args());\n```\n\nPeople than can use `->onlyOn('dev', 'test', 'production')`, but thats maybe too much of magic\n Hi, any improvement on this? Did you decide if you want this feature or if I should change it somehow?\n rebased to master\n I vote for `array_flip(is_array($servers) ? $servers : func_get_args());` if also get good docs for this. Will be awesome!\n @elfet should I wait for some other votes or do you want me to change it? I can write docs too\n @davidkudera i think do it :) If we will have great docs - everything will be ok.\n @davidkudera can you set `array_flip(is_array($servers) ? $servers : func_get_args());`?\nI want to merge it)\n Sorry, I forgot, so thanks for reminding me.. Btw done :wink: \n Cool! Thanks!\n\nPlease add some docs on this feature! \n  Hi,\n\nplease, is it possible to somehow run command on different server? I have for example task `database:sync` which I run like this\n\n```\n$ dep database:sync test\n```\n\nI have two servers defined:\n- `production`\n- `test`\n\nNow I would like to connect to `production`, create database dump, download it and then upload it to the test server.\n\nIf it is not possible (maybe yet :smile:), is there at least some workaround please?\n\nThank you\n Ou.. I just found #355 so I'll try the suggested solution. Sorry if this is a duplicate\n So I tried `onlyOn` method, but that will only run task if given server name (from command) is same\n @davidkudera \nCan you try?\n\n``` php\ntask('database:dump', function(){\n    // TODO: dump and download\n})->onlyOn('production');\n\ntask('database:restore', function(){\n    // TODO: upload and restore\n})->onlyOn('test');\n\ntask('database:sync', [\n     'database:dump',\n     'database:restore',\n]);\n\nserver('test', '192.168.1.2', 22)\n    ->user('your_user')\n    ->identityFile()\n    ->stage(['dev'])\n    ->env('deploy_path', '/var/www/apps/your_app')\n    ->env('branch', 'master');\n\nserver('production', '192.168.1.3', 22)\n    ->user('your_user')\n    ->identityFile()\n    ->stage(['dev'])\n    ->env('deploy_path', '/var/www/apps/your_app')\n    ->env('branch', 'master');\n```\n\nand run:\n\n```\ndep database:sync dev -vvv\n```\n\nGoodluck!\n @oanhnn that's what I tried :wink: \n\n``` php\ntask('database:dump', function(){\n    write('DUMPING...');\n})->onlyOn(['production']);\n\ntask('database:restore', function(){\n    write('RESTORING...');\n});\n\ntask('database:sync', [\n    'database:dump',\n    'database:restore',\n]);\n```\n\n**output:**\n\n```\n\u2714 Executing task database:dump\n\u27a4 Executing task database:restore\nRESTORING...\u2714 Ok\n```\n @davidkudera \nWith your case, please try my script.\nYour script missing `->onlyOn('test')` and settings server stage `dev`\n @oanhnn I didn't noticed your stage setup, sorry...\n\nSo with that setup:\n\n``` php\nlocalServer('production')\n    ->stage(['dev', 'david_work', 'test']);\n\nlocalServer('test')\n    ->stage(['dev', 'test']);\n\nlocalServer('david_work')\n    ->stage(['dev', 'david_work']);\n\ntask('database:dump', function() {\n    write('DUMPING...');\n})->onlyOn(['production']);\n\ntask('database:restore', function() {\n    write('RESTORING...');\n})->onlyOn(['test', 'david_work']);\n\ntask('database:sync', [\n    'database:dump',\n    'database:restore',\n]);\n```\n\nI was able to run all tasks like I needed. The only problem is, that it looks quite difficult to just run some task on different server :wink: \n\nEdit: I should also say that I need my work computer here as well\n I think it will be easy if you split it into 2 standalone works\nGood luck\n I am closing thing issue but feel free to reopen if you think there needs to be more discussion.\n What do you think about some other option? Somehing like `runAt` for example.. Because now if I'll want to add another server, I'll have to update `production` configuration which btw seems little strange to me and `database:restore` task too.\n\nAnd thats just one task. Later I'll have to add another similar task for downloading some uploaded files (like user's profile images, etc.). \n @elfet Yeah, I know sorry.. But you know what I meant, right? :smiley: \n I found another flaw. Every other task needs to have `onlyOn` options too, which is not so nice :disappointed: \n\nAlso I can't reopen this issue (but maybe it's issue just for me....)\n Sure, I just added a new task `database:migrate` to `database:sync` for running doctrine migrations, but it throw an error for this command:\n\n```\n$ dep database:migrate test\n```\n\nI just forgot to set `onlyOn` on that new command, which is my mistake. Problem is that our old deployment (also written in deployer) has about 30 tasks and the new version which is written from scratch is much more complete... So you just have to think about it every time and if you'll forgot... Well.. I can lead to unexpected results or break something completely.\n No no, I understand.. But lets see an example: \n\nYou have many servers and one of them is `production`. Now you want to be able to download database from production to any other server at any time.\n\n``` php\nlocalServer('production')\n    ->stage(['production', 'test1', 'test2', 'test3']);\n\nlocalServer('test1')\n    ->stage(['test1']);\n\nlocalServer('test2')\n    ->stage(['test2']);\n\nlocalServer('test3')\n    ->stage(['test3']);\n```\n\nNo you want to sync database at `test2`:\n\n```\n$ dep database:sync test2\n```\n\nAnd tasks are:\n\n``` php\ntask('database:dump', function() {\n    write('DUMPING...');\n})->onlyOn(['production']);\n\ntask('database:restore', function() {\n    write('RESTORING...');\n})->onlyOn(['test1', 'test2', 'test3', 'test4']);\n\ntask('database:migrate', function() {\n    write('MIGRATING...');\n});\n\ntask('database:sync', [\n    'database:dump',\n    'database:restore',\n    'database:migrate',\n]);\n```\n\nNow you want to add another task, which shouldn't run on production, so you'll set `onlyOn` (if you'll not forgot). Then you'll want to add another independent testing server = you have to update all of these tasks above with production server too (same for removing, updating, ...).\n\nI suggest something like this:\n\n``` php\ntask('database:dump', function() {\n    write('DUMPING...');\n})->runOn('production'); // with better name of course\n\ntask('database:restore', function() {\n    write('RESTORING...');\n});\n\ntask('database:migrate', function() {\n    write('MIGRATING...');\n});\n```\n\nIf I'll run `dep database:sync test2` and I'll not have any stages configured (I don't otherwise need them) it will run `database:dump` automatically and **always** on `production` server.\n\nAlso I could leave `onlyOn` configuration on `database:restore` task because I can watch myself to not run `dep database:restore` on `production`.\n\n`onlyOn` is just some kind of filter, nothing more (I think). `runOn` on other hand starts task always on given server. No matter on which server or stage you actually started your tasks.\n\nAnd finally adding new tasks or servers is simple again :wink: \n Ok, I'll try it, thanks anyway\n Sorry that I'm again reacting here... But it just seems impossible to do what I need.\n\nIn previous example when I'll run `dep database:migrate test2`, it will run on both `test2` and `production`, which is exactly what I don't want.\n\nI just can't find any combination of server names, stages and onlyOn options to make it work\n Ehm, what if I'll prepare a pull request and than you'll see? You know I'm trying so hard, because I really don't want to switch to some other tool (read worse tool). Also I don't think that it will complicate Deployer any more by looking at the code.\n @davidkudera \nI think with your case, we can using:\n\n```\ntask('database:dump', function() {\n    write('DUMPING...');\n})->onlyOn('production');\n\ntask('database:restore', function() {\n    if ('production' == input()->hasArgument('stage')) {\n    // or\n    // if ('production' == env('server.name')) {\n        return;\n    }\n    write('RESTORING...');\n});\n```\n @oanhnn sure, I can, but it is not better than some combination of stages, servers and onlyOn options. Just imagine how the code will look like if more tasks have such otherwise useless code. Like I said, our deployment is pretty complicated and I just love the simplicity of docker - compare it with for example rocketeer...\n\nAlso I tried to use all of your suggestions, but really soon (just in minutes) I run across another problem. The bigist is that any developer can forgot to put such code in tasks and that can lead to really large problems. \n\nWe can either make it little bit more dificult for developers with similar problem, or we can add new feature. So please, may I ask you to look at #413?\n  I create this feature.\n ok\n @elfet where i can see the resources of template?\n 1. Add **Initializer** system.\n2. Add **Template** system for easy create any templates.\n3. Add the command for initialize deploy configuration.\n4. Add tests for new code.\n\nNow add only **common** and **composer** templates, because i not understand how use another systems.\n\nBranch: **init-command**\n\n@elfet maybe you can adds another templates?\n :+1: \n @elfet fixed: 235de6e4c56f84dd698468292b21b3ad25f8f989\n @elfet merge to **master**?\n @ZhukV Can you fix coding style follow https://styleci.io/analyses/XZoMPq to pass StyleCI ?\n  Using `set('composer_copy_vendors', true);` the `deploy:vendors` task will check for existing vendors directory in previous release and copy to new release before running `composer install`.\n\nSee #399 and #206 \n Sure thing, will need to figure out a good way of doing that.\n Sorry for the delay, life got in the way. Hope to have this finished soon\n Hello,\n\nGreat idea.\nBut, in my opinion, this feature should be more generic.\nI mean, one should be able to configure which directories to copy between releases.\n\nLike that, node_modules and bower_componentes directories could also be copied to gain time.\n\nWhat do you think?\n So I like the idea of this setting because firstly it existed in 2.x and secondly as deployer specifically supports composer it seems to make sense to be able to have this option as a setting.\n\nHaving said that I like the idea of an array of directories that will get copied. I think we can have the best of both worlds where you have the array of directories and the setting in this PR just adds the vendor directory to that array.\n @elfet & @gquemener any thoughts on that? \n I think this is a great solution @AlexStansfield !\n\nMoreover, I would add another 'ask_before_copy' option that displays confirmation message before copying directories (default to true).\n @elfet just wondered if we could get your thoughts before I press ahead with this\n Composer it selfs cache vendors in `~/.composer` dir. So this is pretty fats evan this out this.\n  Is there a good way to create a config file from some of the settings from the servers.yml file and a template? Or any direction if anything like it has been done before?\n @erickr \nYou can use [configure recipe](https://github.com/deployphp/recipes/blob/master/docs/configure.md) from `deployphp/recipes`.\nSee an example in [here](https://github.com/oanhnn/deployer-example).\nGood luck!\n :+1: \nGreat, cant see how I could have missed this!\n  At the moment I find two issues with the current implementation of setting permissions on writable directories:\n- Can't set a particular method to use\n- Automatically fall back to `chmod 777` if `chmod +a` and `setfacl` fail\n\nThe first I think would be pretty useful to have (it was in 2.x) and the second could lead to people giving read/write permissions to all users without realising.\n\nI propose this change:\n\n```\n    $httpUser = run(\"ps aux | grep -E '[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx' | grep -v root | head -1 | cut -d\\  -f1\")->toString();\n\n    cd('{{release_path}}');\n\n    $funcPermChmod = function($httpUser, $dirs, $sudo) {\n        if (!empty($httpUser)) {\n            run(\"$sudo chmod +a \\\"$httpUser allow delete,write,append,file_inherit,directory_inherit\\\" $dirs\");\n        }\n\n        run(\"$sudo chmod +a \\\"`whoami` allow delete,write,append,file_inherit,directory_inherit\\\" $dirs\");\n    };\n\n    $funcPermAcl = function($httpUser, $dirs, $sudo) {\n        if (!empty($httpUser)) {\n            run(\"$sudo setfacl -R -m u:\\\"$httpUser\\\":rwX -m u:`whoami`:rwX $dirs\");\n            run(\"$sudo setfacl -dR -m u:\\\"$httpUser\\\":rwX -m u:`whoami`:rwX $dirs\");\n        }\n    };\n\n    $funcPermChmodBad = function($dirs, $sudo) {\n        run(\"$sudo chmod 777 $dirs\");\n    };\n\n    // Use chosen permission method if it exists\n    if (has('permission_method')) {\n        switch (get('permission_method')) {\n            case 'chmod':\n                $funcPermChmod($httpUser, $dirs, $sudo);\n                break;\n            case 'chmod_777':\n                $funcPermChmodBad($dirs, $sudo);\n                break;\n            case 'setfacl':\n                $funcPermAcl($httpUser, $dirs, $sudo);\n                break;\n            default:\n                $formatter = \\Deployer\\Deployer::get()->getHelper('formatter');\n\n                $errorMessage = [\n                    \"Unable to setup correct permissions for writable dirs.                  \",\n                    \"Chosen permission_method needs to be chmod, chmod_777 or setfacl        \"\n                ];\n                write($formatter->formatBlock($errorMessage, 'error', true));\n                break;\n        }\n    } else {\n        // No chosen permission method, try chmod then acl\n        if (strpos(run(\"chmod 2>&1; true\"), '+a') !== false) {\n            $funcPermChmod($httpUser, $dirs, $sudo);\n        } else {\n            if (commandExist('setfacl')) {\n                $funcPermAcl($httpUser, $dirs, $sudo);\n            } else {\n                $formatter = \\Deployer\\Deployer::get()->getHelper('formatter');\n\n                $errorMessage = [\n                    \"Unable to setup correct permissions for writable dirs.                  \",\n                    \"Server not configured for chmod ACL or setfacl.                         \",\n                    \"You can set permission_method to chmod_777 but we advise only as a last \",\n                    \"resort as it gives read/write permissions to every user.                \"\n                ];\n                write($formatter->formatBlock($errorMessage, 'error', true));\n            }\n        }\n    }\n```\n\nIt would only do `chmod +a` or `setfacl` automatically. If they both fail it will give an error telling the user that if they want to they can set a `permission_method` of `chmod_777` but it should only be a last resort.\n\nBefore I go to the trouble of testing it all and submitting a PR I just wanted to get some opinions on it.\n Also, I couldn't work out. What's the preferred method for exiting a deployment and cleaning up? Is there an exception I can throw? I couldn't really see it.\n Cool, will try to get this all tested from home tonight and submit a PR.\n\nI just had a thought regarding the error. This happens quite far into the deployment process. Is there any step that exists that happens early on that can do some sort of check based on what the deployment script asks for.\n\nSo for instance as soon we first login we check if `chmod_777` isn't set and if `chmod +a` or `setfacl` are available. Then bailout with the error message straight away rather than the user getting 90% of the way through deployment before realising it's an issue. Wondered if there are any other things that might also benefit from something like this.\n I'm using a different method. \nI prepare beforehand a common group for the server and user.\n\n``` bash\nsudo groupadd ggggg\nsudo usermod -a -G ggggg uuuu\nsudo usermod -a -G ggggg www-data\n```\n\nIn recipe i have task:\n\n``` php\n/**\n * Make writable dirs by using 'common_group' from env.\n * Create directories if they don't exist.\n */\ntask('deploy:writable_by_group', function () {\n    $dirs = join(' ', get('writable_dirs'));\n\n    if (!empty($dirs)) {\n        cd('{{release_path}}');\n        run(\"mkdir -p $dirs\");\n        run(\"chgrp {{common_group}} $dirs\");\n        run(\"chmod 775 $dirs\");\n    }\n})->desc('Make writable dirs by using common group');\n```\n\nIt is useful for me, because it doesn't require system wide nopasswd-sudo for deployer user. \nMaybe it will be useful to someone else.\n Cool! But also you can use setfacl as in common.php recipe. \n\n> 2 \u0430\u0432\u0433. 2015 \u0433., \u0432 10:48, agarb7 notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> I'm using a different method. \n> I prepare beforehand a common group for the server and user.\n> \n> sudo groupadd ggggg\n> sudo usermod -a -G ggggg uuuu\n> sudo usermod -a -G ggggg www-data\n> In recipe i have task:\n> \n> /**\n> - Make writable dirs by using 'common_group' from env.\n> - Create directories if they don't exist.\n>   */\n>   task('deploy:writable_by_group', function () {\n>   $dirs = join(' ', get('writable_dirs'));\n>   \n>   if (!empty($dirs)) {\n>       cd('{{release_path}}');\n>       run(\"mkdir -p $dirs\");\n>       run(\"chgrp {{common_group}} $dirs\");\n>       run(\"chmod 775 $dirs\");\n>   }\n>   })->desc('Make writable dirs by using common group');\n>   It is useful for me, because it doesn't require system wide nopasswd-sudo for deployer user. \n>   Maybe it will be useful to someone else.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n #540 \n  I noticed that I basically have to create the parent path up to the deployment path myself before deploying. Would it be bad to just add a `-p` to the mkdir command that creates the deployment path if it doesn't already exist?\n Actually I just noticed that it in the latest master it doesn't actually create the deploy path directory either.\n Sure thing. Have already made the code change as I'm deploying lots of things today to new environment. Will branch it and submit PR. \n  Added ability to set a default stage in parameters (see #345).\n\nEnable it using:\n\n```\nset('default_stage', 'staging');\n```\n\nIf it's not set then original behaviour is observed.\n Sure thing\n PR for docs submitted (https://github.com/deployphp/docs/pull/36)\n Thank you! :smile: \n    Hi, whenever I try to \"dep deploy [staging | production]\" (both servers running on a DO droplet using Ubuntu 14.04 + Nginx + Laravel 5), the whole process seems to go fine and indeed it does, except for the fact that the updates in the new release are not visible in the browser. It correctly symlinks the \"current\" directory to the one just created: \"2015xxxxxxxxxx\", but I can not anyhow manage to see in the browser the updates contained in \"2015xxxxxxxxxx\".\n\nI have \"set('keep_releases', 5);\" in my Deploy.php file and, in fact, if I deployed 4 more times, deployer would get rid of older directories and force the updates to appear in the browser, since then all 5 releases would have the updates I'd like to see.\n\nDoes anybody know if it's something related to deployer itself or to anything else? Did nobody experience such a strange behavior?\n\nFollowing is my complete Deploy.php file: https://gist.github.com/nicolamonaca/8a0b53c77db9a80cd49a \n $ dep deploy -vvv production\n\u27a4 Executing task deploy:prepare\n\u2937 on [production]\nRun: echo $0\n\n> bash\n> \n> Run: if [ ! -d /var/www/sharewood ]; then echo \"\"; fi\n> Run: cd /var/www/sharewood && if [ ! -d releases ]; then mkdir releases; fi\n> Run: cd /var/www/sharewood && if [ ! -d shared ]; then mkdir shared; fi\n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task deploy:release\n> \u2937 on [production]\n> Run: date +%Y%m%d%H%M%S\n> 20150720054545\n> \n> Run: mkdir /var/www/sharewood/releases/20150720054545\n> Run: cd /var/www/sharewood && if [ -h release ]; then rm release; fi\n> Run: ln -s /var/www/sharewood/releases/20150720054545 /var/www/sharewood/release\n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task deploy:update_code\n> \u2937 on [production]\n> Run: readlink /var/www/sharewood/release\n> /var/www/sharewood/releases/20150720054545\n> \n> Run: git clone -b master --depth 1 --recursive -q git@bitbucket.org:nicolamonaca/sharewood-do.git /var/www/sharewood/releases/20150720054545 2>&1\n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task deploy:vendors\n> \u2937 on [production]\n> Run: if hash composer 2>/dev/null; then echo 'true'; fi\n> true\n> \n> Run: cd /var/www/sharewood/releases/20150720054545 &&  composer install --no-dev --verbose --prefer-dist --optimize-autoloader --no-progress --no-interaction\n> Loading composer repositories with package information\n> Installing dependencies from lock file\n> - Installing symfony/finder (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/var-dumper (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing psr/log (1.0.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing maximebf/debugbar (v1.10.4)\n>   Loading from cache\n>   Extracting archive\n> - Installing vlucas/phpdotenv (v1.1.1)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/translation (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/security-core (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/routing (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/process (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/http-foundation (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/event-dispatcher (v2.7.2)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/debug (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/http-kernel (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/console (v2.6.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing swiftmailer/swiftmailer (v5.4.1)\n>   Loading from cache\n>   Extracting archive\n> - Installing nikic/php-parser (v1.4.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing jakub-onderka/php-console-color (0.1)\n>   Loading from cache\n>   Extracting archive\n> - Installing jakub-onderka/php-console-highlighter (v0.3.2)\n>   Loading from cache\n>   Extracting archive\n> - Installing dnoegel/php-xdg-base-dir (0.1)\n>   Loading from cache\n>   Extracting archive\n> - Installing psy/psysh (v0.4.4)\n>   Loading from cache\n>   Extracting archive\n> - Installing nesbot/carbon (1.17.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing mtdowling/cron-expression (v1.0.4)\n>   Loading from cache\n>   Extracting archive\n> - Installing monolog/monolog (1.15.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing league/flysystem (1.0.9)\n>   Loading from cache\n>   Extracting archive\n> - Installing jeremeamia/superclosure (2.1.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing ircmaxell/password-compat (v1.0.4)\n>   Loading from cache\n>   Extracting archive\n> - Installing doctrine/inflector (v1.0.1)\n>   Loading from cache\n>   Extracting archive\n> - Installing danielstjules/stringy (1.9.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing symfony/filesystem (v2.7.2)\n>   Loading from cache\n>   Extracting archive\n> - Installing classpreloader/classpreloader (1.4.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing laravel/framework (v5.0.33)\n>   Loading from cache\n>   Extracting archive\n> - Installing barryvdh/laravel-debugbar (v2.0.5)\n>   Loading from cache\n>   Extracting archive\n> - Installing cartalyst/collections (v1.1.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing react/promise (v2.2.1)\n>   Loading from cache\n>   Extracting archive\n> - Installing guzzlehttp/streams (3.0.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing guzzlehttp/ringphp (1.1.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing guzzlehttp/guzzle (5.3.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing cartalyst/stripe (v1.0.3)\n>   Loading from cache\n>   Extracting archive\n> - Installing cartalyst/stripe-laravel (v2.0.2)\n>   Loading from cache\n>   Extracting archive\n> - Installing cmgmyr/messenger (2.7)\n>   Loading from cache\n>   Extracting archive\n> - Installing mrclay/minify (2.2.1)\n>   Loading from cache\n>   Extracting archive\n> - Installing graham-campbell/htmlmin (v3.1.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing illuminate/html (v5.0.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing psr/http-message (1.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing guzzlehttp/psr7 (1.1.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing intervention/image (2.3.1)\n>   Loading from cache\n>   Extracting archive\n> - Installing jenssegers/date (v2.0.21)\n>   Loading from cache\n>   Extracting archive\n> - Installing laracasts/utilities (2.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing stripe/stripe-php (v2.3.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing laravel/cashier (v5.0.7)\n>   Loading from cache\n>   Extracting archive\n> - Installing guzzle/guzzle (v3.9.3)\n>   Loading from cache\n>   Extracting archive\n> - Installing league/oauth1-client (1.5.0)\n>   Loading from cache\n>   Extracting archive\n> - Installing laravel/socialite (v2.0.8)\n>   Loading from cache\n>   Extracting archive\n> - Installing mcamara/laravel-localization (1.0.10)\n>   Loading from cache\n>   Extracting archive\n> - Installing league/glide (0.3.5)\n>   Loading from cache\n>   Extracting archive\n> - Installing spatie/laravel-glide (2.2.4)\n>   Loading from cache\n>   Extracting archive\n> \n> Generating optimized autoload files\n> Warning: Ambiguous class resolution, \"App\\Http\\Controllers\\Admin\\FeedbackOwnerController\" was found in both \"/var/www/sharewood/releases/20150720054545/app/Http/Controllers/Admin/FeedbackUserController.php\" and \"/var/www/sharewood/releases/20150720054545/app/Http/Controllers/Admin/FeedbackOwnerController.php\", the first will be used.\n> Generating optimized class loader\n> Compiling common classes\n> \n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task deploy:shared\n> \u2937 on [production]\n> Run: if [ -d $(echo /var/www/sharewood/releases/20150720054545/storage) ]; then rm -rf /var/www/sharewood/releases/20150720054545/storage; fi\n> Run: mkdir -p /var/www/sharewood/shared/storage\n> Run: mkdir -p `dirname /var/www/sharewood/releases/20150720054545/storage`\n> Run: ln -nfs /var/www/sharewood/shared/storage /var/www/sharewood/releases/20150720054545/storage\n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task deploy:symlink\n> \u2937 on [production]\n> Run: cd /var/www/sharewood && ln -sfn /var/www/sharewood/releases/20150720054545 current\n> Run: cd /var/www/sharewood && rm release\n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task environment\n> \u2937 on [production]\n> Run: cp /var/www/sharewood/shared/.env /var/www/sharewood/releases/20150720054545/.env\n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task current:chown\n> \u2937 on [production]\n> Run: chown monaghan:www-data /var/www/sharewood/current/*\n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task composer\n> \u2937 on [production]\n> Run: cd /var/www/sharewood/current; composer install\n> Loading composer repositories with package information\n> Installing dependencies (including require-dev) from lock file\n> - Installing symfony/yaml (v2.7.2)\n>   Loading from cache\n> - Installing symfony/dom-crawler (v2.7.2)\n>   Loading from cache\n> - Installing symfony/css-selector (v2.7.2)\n>   Loading from cache\n> - Installing symfony/browser-kit (v2.7.2)\n>   Loading from cache\n> - Installing sebastian/version (1.0.6)\n>   Loading from cache\n> - Installing sebastian/global-state (1.0.0)\n>   Loading from cache\n> - Installing sebastian/recursion-context (1.0.0)\n>   Loading from cache\n> - Installing sebastian/exporter (1.2.0)\n>   Loading from cache\n> - Installing sebastian/environment (1.2.2)\n>   Loading from cache\n> - Installing sebastian/diff (1.3.0)\n>   Loading from cache\n> - Installing sebastian/comparator (1.1.1)\n>   Loading from cache\n> - Installing phpunit/php-text-template (1.2.1)\n>   Loading from cache\n> - Installing doctrine/instantiator (1.0.5)\n>   Loading from cache\n> - Installing phpunit/phpunit-mock-objects (2.3.5)\n>   Loading from cache\n> - Installing phpunit/php-timer (1.0.6)\n>   Loading from cache\n> - Installing phpunit/php-file-iterator (1.4.0)\n>   Loading from cache\n> - Installing phpunit/php-token-stream (1.4.3)\n>   Loading from cache\n> - Installing phpunit/php-code-coverage (2.1.8)\n>   Loading from cache\n> - Installing phpdocumentor/reflection-docblock (2.0.4)\n>   Loading from cache\n> - Installing phpspec/prophecy (v1.4.1)\n>   Loading from cache\n> - Installing phpunit/phpunit (4.7.7)\n>   Loading from cache\n> - Installing facebook/webdriver (1.0.1)\n>   Loading from cache\n> - Installing codeception/codeception (2.1.1)\n>   Loading from cache\n> - Installing phpspec/php-diff (v1.0.2)\n>   Loading from cache\n> - Installing phpspec/phpspec (2.2.1)\n>   Loading from cache\n> \n> sebastian/global-state suggests installing ext-uopz (_)\n> phpunit/php-code-coverage suggests installing ext-xdebug (>=2.2.1)\n> phpdocumentor/reflection-docblock suggests installing dflydev/markdown (~1.0)\n> phpdocumentor/reflection-docblock suggests installing erusev/parsedown (~1.0)\n> phpunit/phpunit suggests installing phpunit/php-invoker (~1.1)\n> facebook/webdriver suggests installing phpdocumentor/phpdocumentor (2._)\n> codeception/codeception suggests installing codeception/phpbuiltinserver (Extension to start and stop PHP built-in web server for your tests)\n> codeception/codeception suggests installing codeception/specify (BDD-style code blocks)\n> codeception/codeception suggests installing codeception/verify (BDD-style assertions)\n> codeception/codeception suggests installing phpseclib/phpseclib (Extension required to use the SFTP option in the FTP Module.)\n> phpspec/phpspec suggests installing phpspec/nyan-formatters (~1.0 \u2013 Adds Nyan formatters)\n> Generating autoload files\n> Generating optimized class loader\n> Compiling common classes\n> \n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task clean:views\n> \u2937 on [production]\n> Run: cd /var/www/sharewood/shared/storage/framework/views; rm -f *\n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task cleanup\n> \u2937 on [production]\n> Run: ls /var/www/sharewood/releases\n> 20150718212704\n> 20150718212731\n> 20150718220608\n> 20150719131442\n> 20150720054310\n> 20150720054545\n> \n> Run: rm -rf /var/www/sharewood/releases/20150718212704\n> Run: cd /var/www/sharewood && if [ -e release ]; then rm release; fi\n> Run: cd /var/www/sharewood && if [ -h release ]; then rm release; fi\n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task optimize\n> \u2937 on [production]\n> Run: cd /var/www/sharewood/current; php artisan optimize\n> Generating optimized class loader\n> Compiling common classes\n> \n> \u2936 done on [production]\n> \u2714 Ok\n> \u27a4 Executing task success\n> Successfully deployed!\n> \u2714 Ok\n\nI just deployed into production but still keep seeing the old version of the site. Had to deploy three times to see the updated code.\n It seems good.\nWhat about your config of web server? Document root is right?\n\nBy the way, you got one warning:\n\n> Warning: Ambiguous class resolution, \"App\\Http\\Controllers\\Admin\\FeedbackOwnerController\" was found in both \"/var/www/sharewood/releases/20150720054545/app/Http/Controllers/Admin/FeedbackUserController.php\" and \"/var/www/sharewood/releases/20150720054545/app/Http/Controllers/Admin/FeedbackOwnerController.php\", the first will be used.\n  My drupal 7 recipe\n\nI added drupal:upload_files for upload local site user files to server, and drupal:settings to create and upload drupal's settings.php file using variables from secrets.yml file\n\nI used the external library spyc https://github.com/mustangostang/spyc to parse yaml files\n I have some questions:\n1. Why not you use `symfony/yml` component to parse yaml file? This package is really required.\n2. Why not you create file `serverlist.yml`, it include info of servers and setting variables and using recipe https://github.com/deployphp/recipes/blob/master/recipes/configure.php to generate `settings.php` file?\n 1. it's `symfony\\yaml`, it's already present within any version of deployer :)\n2. putting secrets/yml within `recipes/drupal7` dir is very bad no good thing to do\n3. @oanhnn - can You add some examples to `conifigure.php` recipe? I feel like the docs for it are lacking some information... Maybe with examples it would be easier to guess the good way of using it :)\n Thanks, @oanhnn I dont know how get custom variables from serverlist.yml. I'll try\n\n@johnny-bit Thank for you comments. i put secrets.yml in this folter for referece, The idea is every project has his own secrets.yml (obviosly in .gitignore)\n\nI'll try to use symfony\\yaml\n ok, i'll do it this afternoon (in spain) ;)\n @sergiocarracedo @johnny-bit \nI was add an example about using configure recipe to docs.\nPlease see it in here https://github.com/deployphp/recipes/blob/master/docs/configure.md \n I removed drupal7 folder and used Symfony Yaml parser. I will try to use serverlist.yml for secrets to generate settings.php\n Move secrets values to servers.yml estructure\n\n```\nprod:\n  settings:\n    database:\n      name: \n      host: localhost\n      user: \n      pass: \n      port: \n      driver: mysql\n      prefix:\n```\n\nYou need a file called settings.php with variable where the settings values are replaced\n\n```\n$databases = array (\n  'default' => \n  array (\n    'default' => \n    array (\n      'database' => '{{database.name}}',\n      'username' => '{{database.user}}',\n      'password' => '{{database.pass}}',\n      'host' => '{{database.host}}',\n      'port' => '{{database.port}}',\n      'driver' => '{{database.driver}}',\n      'prefix' => '{{database.prefix}}',\n    ),\n  ),\n);\n```\n Sorry for delay. I was in summer holidays. I will change drupal:configure to drupal:settings this week\n I changed `drupal:settings` to `drupal:configure` and add a new servers.yml param `drupal_site : default`, for example\n\n```\nprod:\n  host: hostname\n  stage: production\n  forward_agent: true\n  user: hostuser\n  deploy_path : /path/\n  drupal_site : default\n  settings:\n    database:\n      name: db_name\n      host: localhost\n      user: db_user\n      pass: db_pass\n      port: \n      driver: mysql\n      prefix: \n```\n\nDrupal allow users to build multiple sites with one drupal core. By default drupal_site is `default` but a lot of developers change that name (and dir)\n This is the settings.php template you need to create and upload settings.php to server.\n\n```\n<?php\n\n/**\n * @file\n * Drupal site-specific configuration file.\n *\n * IMPORTANT NOTE:\n * This file may have been set to read-only by the Drupal installation program.\n * If you make changes to this file, be sure to protect it again after making\n * your modifications. Failure to remove write permissions to this file is a\n * security risk.\n *\n * The configuration file to be loaded is based upon the rules below. However\n * if the multisite aliasing file named sites/sites.php is present, it will be\n * loaded, and the aliases in the array $sites will override the default\n * directory rules below. See sites/example.sites.php for more information about\n * aliases.\n *\n * The configuration directory will be discovered by stripping the website's\n * hostname from left to right and pathname from right to left. The first\n * configuration file found will be used and any others will be ignored. If no\n * other configuration file is found then the default configuration file at\n * 'sites/default' will be used.\n *\n * For example, for a fictitious site installed at\n * http://www.drupal.org:8080/mysite/test/, the 'settings.php' file is searched\n * for in the following directories:\n *\n * - sites/8080.www.drupal.org.mysite.test\n * - sites/www.drupal.org.mysite.test\n * - sites/drupal.org.mysite.test\n * - sites/org.mysite.test\n *\n * - sites/8080.www.drupal.org.mysite\n * - sites/www.drupal.org.mysite\n * - sites/drupal.org.mysite\n * - sites/org.mysite\n *\n * - sites/8080.www.drupal.org\n * - sites/www.drupal.org\n * - sites/drupal.org\n * - sites/org\n *\n * - sites/default\n *\n * Note that if you are installing on a non-standard port number, prefix the\n * hostname with that number. For example,\n * http://www.drupal.org:8080/mysite/test/ could be loaded from\n * sites/8080.www.drupal.org.mysite.test/.\n *\n * @see example.sites.php\n * @see conf_path()\n */\n\n/**\n * Database settings:\n *\n * The $databases array specifies the database connection or\n * connections that Drupal may use.  Drupal is able to connect\n * to multiple databases, including multiple types of databases,\n * during the same request.\n *\n * Each database connection is specified as an array of settings,\n * similar to the following:\n * @code\n * array(\n *   'driver' => 'mysql',\n *   'database' => 'databasename',\n *   'username' => 'username',\n *   'password' => 'password',\n *   'host' => 'localhost',\n *   'port' => 3306,\n *   'prefix' => 'myprefix_',\n *   'collation' => 'utf8_general_ci',\n * );\n * @endcode\n *\n * The \"driver\" property indicates what Drupal database driver the\n * connection should use.  This is usually the same as the name of the\n * database type, such as mysql or sqlite, but not always.  The other\n * properties will vary depending on the driver.  For SQLite, you must\n * specify a database file name in a directory that is writable by the\n * webserver.  For most other drivers, you must specify a\n * username, password, host, and database name.\n *\n * Transaction support is enabled by default for all drivers that support it,\n * including MySQL. To explicitly disable it, set the 'transactions' key to\n * FALSE.\n * Note that some configurations of MySQL, such as the MyISAM engine, don't\n * support it and will proceed silently even if enabled. If you experience\n * transaction related crashes with such configuration, set the 'transactions'\n * key to FALSE.\n *\n * For each database, you may optionally specify multiple \"target\" databases.\n * A target database allows Drupal to try to send certain queries to a\n * different database if it can but fall back to the default connection if not.\n * That is useful for master/slave replication, as Drupal may try to connect\n * to a slave server when appropriate and if one is not available will simply\n * fall back to the single master server.\n *\n * The general format for the $databases array is as follows:\n * @code\n * $databases['default']['default'] = $info_array;\n * $databases['default']['slave'][] = $info_array;\n * $databases['default']['slave'][] = $info_array;\n * $databases['extra']['default'] = $info_array;\n * @endcode\n *\n * In the above example, $info_array is an array of settings described above.\n * The first line sets a \"default\" database that has one master database\n * (the second level default).  The second and third lines create an array\n * of potential slave databases.  Drupal will select one at random for a given\n * request as needed.  The fourth line creates a new database with a name of\n * \"extra\".\n *\n * For a single database configuration, the following is sufficient:\n * @code\n * $databases['default']['default'] = array(\n *   'driver' => 'mysql',\n *   'database' => 'databasename',\n *   'username' => 'username',\n *   'password' => 'password',\n *   'host' => 'localhost',\n *   'prefix' => 'main_',\n *   'collation' => 'utf8_general_ci',\n * );\n * @endcode\n *\n * You can optionally set prefixes for some or all database table names\n * by using the 'prefix' setting. If a prefix is specified, the table\n * name will be prepended with its value. Be sure to use valid database\n * characters only, usually alphanumeric and underscore. If no prefixes\n * are desired, leave it as an empty string ''.\n *\n * To have all database names prefixed, set 'prefix' as a string:\n * @code\n *   'prefix' => 'main_',\n * @endcode\n * To provide prefixes for specific tables, set 'prefix' as an array.\n * The array's keys are the table names and the values are the prefixes.\n * The 'default' element is mandatory and holds the prefix for any tables\n * not specified elsewhere in the array. Example:\n * @code\n *   'prefix' => array(\n *     'default'   => 'main_',\n *     'users'     => 'shared_',\n *     'sessions'  => 'shared_',\n *     'role'      => 'shared_',\n *     'authmap'   => 'shared_',\n *   ),\n * @endcode\n * You can also use a reference to a schema/database as a prefix. This may be\n * useful if your Drupal installation exists in a schema that is not the default\n * or you want to access several databases from the same code base at the same\n * time.\n * Example:\n * @code\n *   'prefix' => array(\n *     'default'   => 'main.',\n *     'users'     => 'shared.',\n *     'sessions'  => 'shared.',\n *     'role'      => 'shared.',\n *     'authmap'   => 'shared.',\n *   );\n * @endcode\n * NOTE: MySQL and SQLite's definition of a schema is a database.\n *\n * Advanced users can add or override initial commands to execute when\n * connecting to the database server, as well as PDO connection settings. For\n * example, to enable MySQL SELECT queries to exceed the max_join_size system\n * variable, and to reduce the database connection timeout to 5 seconds:\n *\n * @code\n * $databases['default']['default'] = array(\n *   'init_commands' => array(\n *     'big_selects' => 'SET SQL_BIG_SELECTS=1',\n *   ),\n *   'pdo' => array(\n *     PDO::ATTR_TIMEOUT => 5,\n *   ),\n * );\n * @endcode\n *\n * WARNING: These defaults are designed for database portability. Changing them\n * may cause unexpected behavior, including potential data loss.\n *\n * @see DatabaseConnection_mysql::__construct\n * @see DatabaseConnection_pgsql::__construct\n * @see DatabaseConnection_sqlite::__construct\n *\n * Database configuration format:\n * @code\n *   $databases['default']['default'] = array(\n *     'driver' => 'mysql',\n *     'database' => 'databasename',\n *     'username' => 'username',\n *     'password' => 'password',\n *     'host' => 'localhost',\n *     'prefix' => '',\n *   );\n *   $databases['default']['default'] = array(\n *     'driver' => 'pgsql',\n *     'database' => 'databasename',\n *     'username' => 'username',\n *     'password' => 'password',\n *     'host' => 'localhost',\n *     'prefix' => '',\n *   );\n *   $databases['default']['default'] = array(\n *     'driver' => 'sqlite',\n *     'database' => '/path/to/databasefilename',\n *   );\n * @endcode\n */\n$databases = array (\n  'default' => \n  array (\n    'default' => \n    array (\n      'database' => '{{database.name}}',\n      'username' => '{{database.user}}',\n      'password' => '{{database.pass}}',\n      'host' => '{{database.host}}',\n      'port' => '{{database.port}}',\n      'driver' => '{{database.driver}}',\n      'prefix' => '{{database.prefix}}',\n    ),\n  ),\n);\n\n/**\n * Access control for update.php script.\n *\n * If you are updating your Drupal installation using the update.php script but\n * are not logged in using either an account with the \"Administer software\n * updates\" permission or the site maintenance account (the account that was\n * created during installation), you will need to modify the access check\n * statement below. Change the FALSE to a TRUE to disable the access check.\n * After finishing the upgrade, be sure to open this file again and change the\n * TRUE back to a FALSE!\n */\n$update_free_access = FALSE;\n\n/**\n * Salt for one-time login links and cancel links, form tokens, etc.\n *\n * This variable will be set to a random value by the installer. All one-time\n * login links will be invalidated if the value is changed. Note that if your\n * site is deployed on a cluster of web servers, you must ensure that this\n * variable has the same value on each server. If this variable is empty, a hash\n * of the serialized database credentials will be used as a fallback salt.\n *\n * For enhanced security, you may set this variable to a value using the\n * contents of a file outside your docroot that is never saved together\n * with any backups of your Drupal files and database.\n *\n * Example:\n *   $drupal_hash_salt = file_get_contents('/home/example/salt.txt');\n *\n */\n$drupal_hash_salt = '_PjU3G345456bDzj4GH6U4IIW4LisDBF8qekBzl2cQEc0';\n\n/**\n * Base URL (optional).\n *\n * If Drupal is generating incorrect URLs on your site, which could\n * be in HTML headers (links to CSS and JS files) or visible links on pages\n * (such as in menus), uncomment the Base URL statement below (remove the\n * leading hash sign) and fill in the absolute URL to your Drupal installation.\n *\n * You might also want to force users to use a given domain.\n * See the .htaccess file for more information.\n *\n * Examples:\n *   $base_url = 'http://www.example.com';\n *   $base_url = 'http://www.example.com:8888';\n *   $base_url = 'http://www.example.com/drupal';\n *   $base_url = 'https://www.example.com:8888/drupal';\n *\n * It is not allowed to have a trailing slash; Drupal will add it\n * for you.\n */\n# $base_url = 'http://www.example.com';  // NO trailing slash!\n\n/**\n * PHP settings:\n *\n * To see what PHP settings are possible, including whether they can be set at\n * runtime (by using ini_set()), read the PHP documentation:\n * http://www.php.net/manual/ini.list.php\n * See drupal_environment_initialize() in includes/bootstrap.inc for required\n * runtime settings and the .htaccess file for non-runtime settings. Settings\n * defined there should not be duplicated here so as to avoid conflict issues.\n */\n\n/**\n * Some distributions of Linux (most notably Debian) ship their PHP\n * installations with garbage collection (gc) disabled. Since Drupal depends on\n * PHP's garbage collection for clearing sessions, ensure that garbage\n * collection occurs by using the most common settings.\n */\nini_set('session.gc_probability', 1);\nini_set('session.gc_divisor', 100);\n\n/**\n * Set session lifetime (in seconds), i.e. the time from the user's last visit\n * to the active session may be deleted by the session garbage collector. When\n * a session is deleted, authenticated users are logged out, and the contents\n * of the user's $_SESSION variable is discarded.\n */\nini_set('session.gc_maxlifetime', 200000);\n\n/**\n * Set session cookie lifetime (in seconds), i.e. the time from the session is\n * created to the cookie expires, i.e. when the browser is expected to discard\n * the cookie. The value 0 means \"until the browser is closed\".\n */\nini_set('session.cookie_lifetime', 2000000);\n\n/**\n * If you encounter a situation where users post a large amount of text, and\n * the result is stripped out upon viewing but can still be edited, Drupal's\n * output filter may not have sufficient memory to process it.  If you\n * experience this issue, you may wish to uncomment the following two lines\n * and increase the limits of these variables.  For more information, see\n * http://php.net/manual/pcre.configuration.php.\n */\n# ini_set('pcre.backtrack_limit', 200000);\n# ini_set('pcre.recursion_limit', 200000);\n\n/**\n * Drupal automatically generates a unique session cookie name for each site\n * based on its full domain name. If you have multiple domains pointing at the\n * same Drupal site, you can either redirect them all to a single domain (see\n * comment in .htaccess), or uncomment the line below and specify their shared\n * base domain. Doing so assures that users remain logged in as they cross\n * between your various domains. Make sure to always start the $cookie_domain\n * with a leading dot, as per RFC 2109.\n */\n# $cookie_domain = '.example.com';\n\n/**\n * Variable overrides:\n *\n * To override specific entries in the 'variable' table for this site,\n * set them here. You usually don't need to use this feature. This is\n * useful in a configuration file for a vhost or directory, rather than\n * the default settings.php. Any configuration setting from the 'variable'\n * table can be given a new value. Note that any values you provide in\n * these variable overrides will not be modifiable from the Drupal\n * administration interface.\n *\n * The following overrides are examples:\n * - site_name: Defines the site's name.\n * - theme_default: Defines the default theme for this site.\n * - anonymous: Defines the human-readable name of anonymous users.\n * Remove the leading hash signs to enable.\n */\n# $conf['site_name'] = 'My Drupal site';\n# $conf['theme_default'] = 'garland';\n# $conf['anonymous'] = 'Visitor';\n\n/**\n * A custom theme can be set for the offline page. This applies when the site\n * is explicitly set to maintenance mode through the administration page or when\n * the database is inactive due to an error. It can be set through the\n * 'maintenance_theme' key. The template file should also be copied into the\n * theme. It is located inside 'modules/system/maintenance-page.tpl.php'.\n * Note: This setting does not apply to installation and update pages.\n */\n# $conf['maintenance_theme'] = 'bartik';\n\n/**\n * Reverse Proxy Configuration:\n *\n * Reverse proxy servers are often used to enhance the performance\n * of heavily visited sites and may also provide other site caching,\n * security, or encryption benefits. In an environment where Drupal\n * is behind a reverse proxy, the real IP address of the client should\n * be determined such that the correct client IP address is available\n * to Drupal's logging, statistics, and access management systems. In\n * the most simple scenario, the proxy server will add an\n * X-Forwarded-For header to the request that contains the client IP\n * address. However, HTTP headers are vulnerable to spoofing, where a\n * malicious client could bypass restrictions by setting the\n * X-Forwarded-For header directly. Therefore, Drupal's proxy\n * configuration requires the IP addresses of all remote proxies to be\n * specified in $conf['reverse_proxy_addresses'] to work correctly.\n *\n * Enable this setting to get Drupal to determine the client IP from\n * the X-Forwarded-For header (or $conf['reverse_proxy_header'] if set).\n * If you are unsure about this setting, do not have a reverse proxy,\n * or Drupal operates in a shared hosting environment, this setting\n * should remain commented out.\n *\n * In order for this setting to be used you must specify every possible\n * reverse proxy IP address in $conf['reverse_proxy_addresses'].\n * If a complete list of reverse proxies is not available in your\n * environment (for example, if you use a CDN) you may set the\n * $_SERVER['REMOTE_ADDR'] variable directly in settings.php.\n * Be aware, however, that it is likely that this would allow IP\n * address spoofing unless more advanced precautions are taken.\n */\n# $conf['reverse_proxy'] = TRUE;\n\n/**\n * Specify every reverse proxy IP address in your environment.\n * This setting is required if $conf['reverse_proxy'] is TRUE.\n */\n# $conf['reverse_proxy_addresses'] = array('a.b.c.d', ...);\n\n/**\n * Set this value if your proxy server sends the client IP in a header\n * other than X-Forwarded-For.\n */\n# $conf['reverse_proxy_header'] = 'HTTP_X_CLUSTER_CLIENT_IP';\n\n/**\n * Page caching:\n *\n * By default, Drupal sends a \"Vary: Cookie\" HTTP header for anonymous page\n * views. This tells a HTTP proxy that it may return a page from its local\n * cache without contacting the web server, if the user sends the same Cookie\n * header as the user who originally requested the cached page. Without \"Vary:\n * Cookie\", authenticated users would also be served the anonymous page from\n * the cache. If the site has mostly anonymous users except a few known\n * editors/administrators, the Vary header can be omitted. This allows for\n * better caching in HTTP proxies (including reverse proxies), i.e. even if\n * clients send different cookies, they still get content served from the cache.\n * However, authenticated users should access the site directly (i.e. not use an\n * HTTP proxy, and bypass the reverse proxy if one is used) in order to avoid\n * getting cached pages from the proxy.\n */\n# $conf['omit_vary_cookie'] = TRUE;\n\n/**\n * CSS/JS aggregated file gzip compression:\n *\n * By default, when CSS or JS aggregation and clean URLs are enabled Drupal will\n * store a gzip compressed (.gz) copy of the aggregated files. If this file is\n * available then rewrite rules in the default .htaccess file will serve these\n * files to browsers that accept gzip encoded content. This allows pages to load\n * faster for these users and has minimal impact on server load. If you are\n * using a webserver other than Apache httpd, or a caching reverse proxy that is\n * configured to cache and compress these files itself you may want to uncomment\n * one or both of the below lines, which will prevent gzip files being stored.\n */\n# $conf['css_gzip_compression'] = FALSE;\n# $conf['js_gzip_compression'] = FALSE;\n\n/**\n * Block caching:\n *\n * Block caching may not be compatible with node access modules depending on\n * how the original block cache policy is defined by the module that provides\n * the block. By default, Drupal therefore disables block caching when one or\n * more modules implement hook_node_grants(). If you consider block caching to\n * be safe on your site and want to bypass this restriction, uncomment the line\n * below.\n */\n# $conf['block_cache_bypass_node_grants'] = TRUE;\n\n/**\n * String overrides:\n *\n * To override specific strings on your site with or without enabling the Locale\n * module, add an entry to this list. This functionality allows you to change\n * a small number of your site's default English language interface strings.\n *\n * Remove the leading hash signs to enable.\n */\n# $conf['locale_custom_strings_en'][''] = array(\n#   'forum'      => 'Discussion board',\n#   '@count min' => '@count minutes',\n# );\n\n/**\n *\n * IP blocking:\n *\n * To bypass database queries for denied IP addresses, use this setting.\n * Drupal queries the {blocked_ips} table by default on every page request\n * for both authenticated and anonymous users. This allows the system to\n * block IP addresses from within the administrative interface and before any\n * modules are loaded. However on high traffic websites you may want to avoid\n * this query, allowing you to bypass database access altogether for anonymous\n * users under certain caching configurations.\n *\n * If using this setting, you will need to add back any IP addresses which\n * you may have blocked via the administrative interface. Each element of this\n * array represents a blocked IP address. Uncommenting the array and leaving it\n * empty will have the effect of disabling IP blocking on your site.\n *\n * Remove the leading hash signs to enable.\n */\n# $conf['blocked_ips'] = array(\n#   'a.b.c.d',\n# );\n\n/**\n * Fast 404 pages:\n *\n * Drupal can generate fully themed 404 pages. However, some of these responses\n * are for images or other resource files that are not displayed to the user.\n * This can waste bandwidth, and also generate server load.\n *\n * The options below return a simple, fast 404 page for URLs matching a\n * specific pattern:\n * - 404_fast_paths_exclude: A regular expression to match paths to exclude,\n *   such as images generated by image styles, or dynamically-resized images.\n *   If you need to add more paths, you can add '|path' to the expression.\n * - 404_fast_paths: A regular expression to match paths that should return a\n *   simple 404 page, rather than the fully themed 404 page. If you don't have\n *   any aliases ending in htm or html you can add '|s?html?' to the expression.\n * - 404_fast_html: The html to return for simple 404 pages.\n *\n * Add leading hash signs if you would like to disable this functionality.\n */\n$conf['404_fast_paths_exclude'] = '/\\/(?:styles)\\//';\n$conf['404_fast_paths'] = '/\\.(?:txt|png|gif|jpe?g|css|js|ico|swf|flv|cgi|bat|pl|dll|exe|asp)$/i';\n$conf['404_fast_html'] = '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML+RDFa 1.0//EN\" \"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\"><head><title>404 Not Found</title></head><body><h1>Not Found</h1><p>The requested URL \"@path\" was not found on this server.</p></body></html>';\n\n/**\n * By default the page request process will return a fast 404 page for missing\n * files if they match the regular expression set in '404_fast_paths' and not\n * '404_fast_paths_exclude' above. 404 errors will simultaneously be logged in\n * the Drupal system log.\n *\n * You can choose to return a fast 404 page earlier for missing pages (as soon\n * as settings.php is loaded) by uncommenting the line below. This speeds up\n * server response time when loading 404 error pages and prevents the 404 error\n * from being logged in the Drupal system log. In order to prevent valid pages\n * such as image styles and other generated content that may match the\n * '404_fast_html' regular expression from returning 404 errors, it is necessary\n * to add them to the '404_fast_paths_exclude' regular expression above. Make\n * sure that you understand the effects of this feature before uncommenting the\n * line below.\n */\n# drupal_fast_404();\n\n/**\n * External access proxy settings:\n *\n * If your site must access the Internet via a web proxy then you can enter\n * the proxy settings here. Currently only basic authentication is supported\n * by using the username and password variables. The proxy_user_agent variable\n * can be set to NULL for proxies that require no User-Agent header or to a\n * non-empty string for proxies that limit requests to a specific agent. The\n * proxy_exceptions variable is an array of host names to be accessed directly,\n * not via proxy.\n */\n# $conf['proxy_server'] = '';\n# $conf['proxy_port'] = 8080;\n# $conf['proxy_username'] = '';\n# $conf['proxy_password'] = '';\n# $conf['proxy_user_agent'] = '';\n# $conf['proxy_exceptions'] = array('127.0.0.1', 'localhost');\n\n/**\n * Authorized file system operations:\n *\n * The Update manager module included with Drupal provides a mechanism for\n * site administrators to securely install missing updates for the site\n * directly through the web user interface. On securely-configured servers,\n * the Update manager will require the administrator to provide SSH or FTP\n * credentials before allowing the installation to proceed; this allows the\n * site to update the new files as the user who owns all the Drupal files,\n * instead of as the user the webserver is running as. On servers where the\n * webserver user is itself the owner of the Drupal files, the administrator\n * will not be prompted for SSH or FTP credentials (note that these server\n * setups are common on shared hosting, but are inherently insecure).\n *\n * Some sites might wish to disable the above functionality, and only update\n * the code directly via SSH or FTP themselves. This setting completely\n * disables all functionality related to these authorized file operations.\n *\n * @see http://drupal.org/node/244924\n *\n * Remove the leading hash signs to disable.\n */\n# $conf['allow_authorize_operations'] = FALSE;\n```\n :+1: \nI think it will be better if you write a blog post or document (create PR to `deployphp/docs`) to sharing.\nThank you!\n  I create a recipe for Drupal 7, this recipe is complex and use external libraries, for example, for crate the drupal settings.php file and upload it.\n\nI dont want my recibe files in the project's root dir, i move them to .deployer, but deploy.php still in root dir.\n\nis it posible move deploy.php search to this subfolder?\n\nAnd i want to share my drupal 7's recipe, how i do? Creating a fork?\n generally, I'd simply remove `deploy.php` and libraries in subdir in some task, maybe even right after `deploy:update_code`. That would actually be sane thing to do - in my `rsync` recipe, by default `deploy.php` is ignored from syncing.\n\nAnd that brings us to recipe - generally I'd recommend creating fork & PR against deployphp/recipes, however since it's framework specific, maybe @deployphp/maintainer (pinging @elfet - have I linked that correctly)  would rather suggest fork and PR against deployphp/deployer :smiling_imp: \n I don't know this is what you want or not. But I do like this:\nhttps://github.com/kenjis/codeigniter-deployer/tree/master/deploy\n\nFor your information.\n Thanks a lot @kenjis it's a great solution. I was looking for a solution like rocketter who put evey deply files in a folder. In this case, It's easy add the folder to .gitignore, but your solution es similar, i'll try it\n I think you can try:\n\n```\n$ bin/dep -f=path/to/deploy.php\n```\n\nand file `deploy.php` will be in anywhere :smile: \n  Hello,\n\nAs the title said, I want to rename symbolic link into another name, is that possible to do?\n @nntoan: Can i help me? I can support you by Vietnamese :smile: \n Why do you need to change?\n Anyone have any idea about this?\n\n``` php\nPHP Fatal error:  require(): Failed opening required 'recipe/common.php' (include_path='phar:///usr/local/bin/dep/bin/../:phar:///usr/local/bin/dep/vendor/deployer/phpseclib/phpseclib:.:/usr/local/Cellar/php56/5.6.10/lib/php') in /deploy.php on line 2\n```\n\n@kenjis : I want to controll everything.\n  It would be nice if Deployer kept a log of each deployment. The logs should contain the same as -vvv outputs.\n\nOption to enable/disable logging and choose a log directory.\n\nWDYT?\n :+1: \n Is anyone doing this? \n\nIs there a preferred way of passing information between tasks? For example, lets say you use the hipchat recipe, and want to push the deploy log to a hipchat channel, and then later make another recipe collecting the git changelog between this and previous version, and you want to post that to hipchat as well. \n What about using for example [saldaek/monolog](https://github.com/Seldaek/monolog)? Than everyone can configure where to put their logs\n +1\n If you use a DIC in v4 it would be nice if it was overwriteable before anything was run. So I could replace the container value \"logger\" with my own psr3 compatible logger. \n\nWhich is monolog but might write to a different file or greylog. \n\nWould be nice if in my deploy.php I just set a bunch of container values, then the deployer app is run. \n\ndep cli sets up basic container, loads my deployer scripts which first runs common recipe then my deploy recipe then runs the app with container as a constructor parameter (as defined in the container). \n @oanhnn @elfet @Danielss89  why this issue was closed?\n  I use:\nserver('ssss', '111.111.111.111')\n    ->user('uuuu')\n    ->forwardAgent();\n\nConnect is done, and all tasks before `deploy:update_code` is done too.\nOn `deploy:update_code` raise exception:\n\n```\n  [RuntimeException]                          \n  Permission denied (publickey).              \n  fatal: The remote end hung up unexpectedly.\n```\n\nBut if I manualy connect by `ssh uuuu@111.111.111.111` and exec `git clone -b master --depth 1 --recursive -q git@github.com:oooo/rrrr.git rrrr` - it working good.\n\nI configured local(ubuntu) and server(debian7) in accordance with https://github.com/oanhnn/deployer-example/blob/master/docs/enable-feature-ssh-forward-agent.md (but in my server no sshd service, it's name ssh). This has no effect.\n I use phpseclib. But I aslo try ssh2_ext (clone latest master branch today) and it don't work too. (Little difference is it do not show exception explanation, just `[RuntimeException]` red recatangle. - May be this is small issue.)\nI will try \"deploy keys\" a bit later.\n Hi, same issue,\n\nI'm pretty sure ssh agent forward is enabled in server. I've followed every step in https://github.com/oanhnn/deployer-example/blob/master/docs/enable-feature-ssh-forward-agent.md\n\nAnd doing:\nssh josemf@xxx.xxx.xxx.xxx \"git clone  --depth 1 --recursive -q git@bitbucket.org:vendor/project.git /var/local/apps/project/releases/20150729180636\" \n\nSuccessfully clones the repository.\n\nOfc I don't have my private key in the server, so I know this comes for SSH Agent Forwarding.\n\nAlso:\n\n> josemf@zeus:~/.ssh$ ssh -T git@bitbucket.org\n> logged in as josemf.\n> \n> You can use git or hg to connect to Bitbucket. Shell access is disabled.\n\nMy deploy.php\n\n> require 'recipe/composer.php';\n> \n> server('zeus', 'host', 22)\n>    ->user('josemf')\n>   ->identityFile('~/.ssh/id_rsa.pub', '~/.ssh/id_rsa', 'xxxxxxxxx')\n>    ->forwardAgent() // You can use identity key, ssh config, or username/password to auth on the server.\n>    ->stage('staging')\n>    ->env('deploy_path', '/var/local/apps/project'); // Define the base path to deploy your project to.\n> \n> set('repository', 'git@bitbucket.org:vendor/project.git');\n\nAnd the deploy log:\n\n> \u27a4 Executing task deploy:prepare\n> \u2937 on [zeus]\n> Run: echo $0\n> \n> > bash\n> > \n> > Run: if [ ! -d /var/local/apps/staging.rio-works.com ]; then echo \"\"; fi\n> > Run: cd /var/local/apps/staging.rio-works.com && if [ ! -d releases ]; then mkdir releases; fi\n> > Run: cd /var/local/apps/staging.rio-works.com && if [ ! -d shared ]; then mkdir shared; fi\n> > \u2936 done on [zeus]\n> > \u2714 Ok\n> > \u27a4 Executing task deploy:release\n> > \u2937 on [zeus]\n> > Run: date +%Y%m%d%H%M%S\n> > 20150729190535\n> > \n> > Run: mkdir /var/local/apps/project/releases/20150729190535\n> > Run: cd /var/local/apps/project && if [ -h release ]; then rm release; fi\n> > Run: ln -s /var/local/apps/project/releases/20150729190535 /var/local/apps/project/release\n> > \u2936 done on [zeus]\n> > \u2714 Ok\n> > \u27a4 Executing task deploy:update_code\n> > \u2937 on [zeus]\n> > Run: readlink /var/local/apps/project/release\n> > /var/local/apps/project/releases/20150729190535\n> > \n> > Run: git clone  --depth 1 --recursive -q git@bitbucket.org:vendor/project.git /var/local/apps/project/releases/20150729190535 2>&1\n> \n>  [RuntimeException]\n>  Permission denied (publickey).\n>  fatal: Could not read from remote repository.\n>  Please make sure you have the correct access rights\n>  and the repository exists.\n> \n> Exception trace:\n\nWell I think forwardAgent() function may not be working as expected. Or there's something broke with `phpseclib'.\n\ndeployer/phpseclib          v1.0.0 PHP Secure Communications Library - Pure-PHP implementations of RSA, AES, SSH2, SFTP, X.509 etc.\n\nThanks for you help!\n I think `forwradAgent()` is working but in your agent has many keys and one or some keys has made this error. Please try add key to deploy keys and run below command before run deployer.\n\n```\n$ ssh-add -D\n$ ssh-add /path/to/your_key\n$ dep deploy dev -vvv\n```\n I've only one key on this computer, but followed your instructions anyway unfortunately with no success.\n\nDo you have any other debug you want to try out? I could easily run some tests, or mess with `deployer\u00b4 or`phpseclib\u00b4 code if you would give me any guidance on that.\n\n```\n  System Version: OS X 10.9.5 (13F34)\n  Kernel Version: Darwin 13.4.0\n```\n\nThanks!\n In my case there is no solution still. I deleted all keys in remote, local, and github account and repos. I recreate key localy (ssh-keygen), add it to remote (ssh-copy-id uuuu@111.111.111.111), add it to only one needed repo to deploy keys section. When I try `dep deploy ssss`, i still get error:\n\n```\n  [RuntimeException]                          \n  Permission denied (publickey).              \n  fatal: The remote end hung up unexpectedly  \n```\n\nBut `ssh uuuu@111.111.111.111 'git clone -b master --depth 1 --recursive -q git@github.com:oooo/rrrr.git rrrr'` works well.\n\nThen i wrote task:\n\n``` php\ntask('show_keys', function () {\n    writeln(run(\"sudo ssh-add -l\"));\n});\n```\n\nand set it before `deploy:update_code`, and got:\n\n```\n\u27a4 Executing task show_keys\n\u2937 on [daikoku.ru]\nRun: ssh-add -l\n\n  [RuntimeException]                                         \n  Could not open a connection to your authentication agent.  \n```\n\nForwarding does not happen.\n _Local_: \n\n```\nKubuntu 14.10, PHP 5.6.11-1+deb.sury.org~utopic+1\nDeployers from 3.0.0 up to 3.0.6 by .phar from deployer.org\nDeployer from repo master branch (with deployer/phpseclib and phpseclib/phpseclib)\n```\n\n_Remote_:\n\n```\nOpenSSH_6.7p1 Debian-5, OpenSSL 1.0.1k 8 Jan 2015\nOpenSSH_6.0p1 Debian-4+deb7u2, OpenSSL 1.0.1e 11 Feb 2013\n```\n\nAgent forwarding does not work for me in above cases. There are people who have it work?\n Did you enable agent forwarding feature?\n @elfet Yes)) I tried enable it in YAML format and by `forwardAgent()` method of `Builder`.\nPlease, show me a working configuration: os, deployer, php (with exts), sshd.\n Would be interested in that, also. Thanks!\n I have the same problem as @agarb7 and @josemf \nTried @oanhnn 's configuration but no luck.\n\nForwardAgent works with manual ssh (notice debug2: key: key/id_rsa (0x7f70d9d7ffc0)) :\n\n> ...\n> debug1: SSH2_MSG_SERVICE_ACCEPT received\n> **debug2: key: key/id_rsa (0x7f70d9d7ffc0)**\n> debug2: key: /home/quangnv/.ssh/identity ((nil))\n> debug2: key: /home/quangnv/.ssh/id_rsa ((nil))\n> debug2: key: /home/quangnv/.ssh/id_dsa ((nil))\n> debug2: key: /home/quangnv/.ssh/id_ecdsa ((nil))\n> ...\n\nbut didn't work with deployer:\n\n> ...\n> debug1: SSH2_MSG_SERVICE_ACCEPT received\n> debug2: key: /home/quangnv/.ssh/identity ((nil))\n> debug2: key: /home/quangnv/.ssh/id_rsa ((nil))\n> debug2: key: /home/quangnv/.ssh/id_dsa ((nil))\n> debug2: key: /home/quangnv/.ssh/id_ecdsa ((nil))\n> ...\n\nTried show_keys task as @agarb7 and got same output\n\n> [RuntimeException]\n> Could not open a connection to your authentication agent.\n I have updated `phpseclib` till 2.0 version and have fixed agent forwarding implementation according to:\nhttps://github.com/phpseclib/phpseclib/blob/62fdd160e3ae2bb265a7e1f7c9426d552f55df47/tests/Functional/Net/SSH2AgentTest.php#L50\nNow it works for me.\n Thanks @torinaki \n Wow! Can you make PR with fixed phpseclib?\n Thanks @torinaki! Works for me now.\n  The current stable version of Laravel (5.1) doesn't use the `vendor` folder anymore (to write things). Also added the `deploy:writable` task.\n In that case an option is have more recipes (`laravel5`, `laravel5.1`). Or people can change the `writable_dirs` by themselves.\n :+1: \nBut we need a note for support laravel 4.x and 5.0.x. Can you do it?\n @oanhnn Are you in favor to maintain just one recipe plus note for support other versions?\n @KennedyTedesco: Yes. I think this recipe should support laravel 5.1.x (long term support version) and add a note to support other version. Can you create a pull request to `deployphp/docs`?\n@elfet: What do you think?\n @oanhnn Yes, I can do that.\n @KennedyTedesco Please create a pull request for docs to `deployphp/docs`\n @KennedyTedesco any news? :)\n  I installed deployer via composer.\nI also installed herzult/php-ssh.\n\nMy previous deploy strategy was using capifony, with a key to login on the remote server.\n\nMy deploy.php:\n\n``` php\n<?php\n\nrequire 'recipe/symfony.php';\nset('ssh_type', 'ext-ssh2');\nserver('stage1', 'full_address_of_my_server')\n    ->user('my_user')\n    ->stage('staging')\n    ->env('deploy_path', '/home/my_user/test_deployer');\nset('repository', 'git@bitbucket.org:company/repo.git');\n```\n\nWhen i try to execute `bin/dep deploy:prepare staging` I get the exception mentioned in the title (along with a strange message about POSIX compliance of my remote shell, that is a bash)\n I'm not sure to understand... I can ssh on my remote server and bash is there.\nOn my remote server:\n\n``` bash\n$ echo $0\n-bash\n```\n I have the same issue, but are using a servers.yml file with the following settings:;\n\n```\nproduction:\n  host: localhost\n  user: test-prod\n  identity_file: ~\n  stage: production\n  deploy_path: /home/test-prod/production\n```\n\nBut also get the \"  The authentication over the current SSH connection failed.  \"\nAlso using ext-ssh2\n\nAny ideas? \n @erickr \nwhat is your `ext-ssh` version?\nAre you try with `phpseclib`?\n I'm using php5-ssh2 in debian jessie, \nPackage: php5-ssh2  \nNew: yes\nState: installed\nAutomatically installed: no\nVersion: 0.12-3\nPriority: extra\nSection: php\nMaintainer: Debian PHP PECL Maintainers pkg-php-pecl@lists.alioth.debian.org\nArchitecture: i386\nUncompressed Size: 151 k\nDepends: phpapi-20131226, php5-common (>= 4.0.0), php5-common (<= 6.0.0), php-pear (>= 1.4.0), libc6 (>= 2.4), libssh2-1 (>= 1.2.9)\nBreaks: libssh2-php (< 0.12-2)\nReplaces: libssh2-php (< 0.12-2)\nDescription: Bindings for the libssh2 library\n Provides bindings to the functions of libssh2 which implements the SSH2 protocol.\nHomepage: http://pecl.php.net/package/ssh2\n\nI've tried with phpseclib as well, but it doest work either, that gives:\n\"Unable to login with the provided credentials.\"\n\nIs it required to supply the path to the ssh keys or does it automatically check in ~/.ssh/ to find them?\nUsing commandline ssh works fine without any additional arguments, like: ssh test-prod@localhost for example.\n It turned out I had added my dsa key to the authorized keys file of the target account, using an rsa key with set('ssh_type', 'ext-ssh2'); works correctly. Thanks!\n I'm using a dsa key also. What's wrong with it?\n @garak that didnt work for me at least, switching to a rsa-key made it work instantly as long as ssh_type was set to ext-ssh2.\n\nDid you try that?\n I don't know why DSA key does not work. But DSA key is 1024 bits. It is not secure today.\n Sorry, I double checked and ny key is ECDSA, not DSA. Any hint?\n @garak at least phpseclib seems to not handle dsa-keys at all if I read the code right:\nhttps://github.com/deployphp/deployer/blob/49bfff673ae49b95029831d2038b924c4cfccb43/src/Server/Remote/PhpSecLib.php#L58-L66\n\nSo try a rsa-key.\n @erickr you're right :disappointed: \nSee also https://github.com/phpseclib/phpseclib/issues/216\n  I think it is a good thing to get the local / remote to be parsed through the env parser, so its possible to do things like\n\n``` php\ntask('copy:param:file', function() {\n    upload('.deploy/parameters.{{env}}.yml', '{{release_path}}/app/config/parameters.yml');\n});\n```\n\nRight now I have created my own upload function, which \"extends\" the upload function\n\n``` php\nfunction MyUpload($local, $remote)\n{\n    $local = env()->parse($local);\n    $remote = env()->parse($remote);\n    upload($local, $remote);\n}\n```\n I have created PR 35 in docs repo which explains the upload function.\n Thank you!\n  In this PR:\n- add support forward agent feature when using `ext-ssh2`\n Ping @elfet @ZeeCoder \n I think it supported.\nhttp://php.net/manual/en/function.ssh2-auth-agent.php\n\nAnd I was try test with some my projects. It run successful. :+1: \n  see #206 \n\nIf you agree this change i update doc, tests and rebase\n I'm okay with this, but have You tried `rsync:warmup` from `deployphp/recipes/rsync.php`? I guess it does everything Your `deploy:copy_dirs` does, ony You can leverage all of rsync glory :wink: \n Rsync is a good solution for many cases (and surelly to deploy without git by exemple). \n\nCopy (cp) is installed on all system, rsync not, so i think there solutions are complementary(ies) one from other: \n- Rsync if you install it and use on the same server or on differents.\n- Copy for simpliest cases\n @ZeeCoder Have you a point of view ?\n @AlexStansfield if you think this is usefull and writed as you wait, you can add a comment here\n Just added PR #406 for copying vendors between releases. Sorry I hadn't seen this PR before I made mine.\n I think cool feature. @nicodmf can you add docs for this?\n  Usefull when redirecting Deployer output inside shell script. Since output is redirected, posix_isatty() returns false and coloring is disabled by default. This option forces deployer to color output.\n I'm using bash script when deploying new versions. It works like that:\n1. check existance of backup and log directories\n2. create log file and log everything that is on screen \n3. start timer\n4. use Deployer to deploy code on servers\n5. show deploy time\n\nI like to see colored output when I use Deployer but when I redirect Deployer output like:\n\n```\nphp vendor/bin/dep deploy prod | tee \"$log_path\"\n```\n\nor \n\n```\nexec > >( tee /dev/tty | sed $'s/\\E[^m]*m//g' > \"$log_path\" ) 2>&1\n```\n\ncolors are lost because `posix_isatty()` return `false`.\n I also do:\n\n```\nphp deployer.phar deploy -vvv production | tee $log\n```\n\nBut I can see colored output. What's the difference?\nI use Ubuntu and LXTerminal.\n @kenjis Sorry I forgot to add stderr redirection, try this:\n\n```\nphp vendor/bin/dep 2>&1 | tee test.log\n```\n\nI mostly use:\n\n```\nexec > >( tee /dev/tty | sed $'s/\\E[^m]*m//g' > \"$log_path\" ) 2>&1\n```\n\nbecause i don't want to to write `command 2>&1 | tee -a $log` to every command. I just redirect `stderr` to `stdout` and use `tee` to log everything at the begining of bash script.\n @piotrekkr I got no color output. Agree with `--force-color` option.\n @elfet Do you mean to only check `--force-color` or `-c` inside `Deployer::run()`? Your idea is really good. I'll change my PR when I'm at work.\n @elfet Ok my entire PR is going to trash :) I just looked at `\\Symfony\\Component\\Console\\Application` and there is option:\n\n```\n--ansi            Force ANSI output\n```\n\nIt is doing same thing as my `--force-color`. You can reject my PR. Thx.\n Good! I got colored output.\n  Added Magento recipe.\n  The problem: big repositories takes too long to copy, even with the --reference. This solution will not copy, fetch any git objects, but uses only one mirror, updates it and then creates an archive to the release path.\n\nThe original idea is coming from Capistrano:\nhttps://github.com/capistrano/capistrano/blob/ad61d9288a2567faa5ae37e7fa74b1c1947e592d/lib/capistrano/git.rb\n :+1:  Good ideal!\nPlease create new PR for magento recipe.\n Done.\n Sorry about the unused variable, it was fixed on the next commit which I removed accidentally when took out the Magento recipe\n Testing would be much welcomed as it's a core part of Deployer. I tested it with a few of our repositories, but maybe other users have different configurations. I'm trying to switch from Capistrano and a slow deployment with lots of io is a no go for us. This one reduced the original deployment time of a big repository from 10 minutes to 23s.\n\nOn the big repository, we have an 1G sql file, updated a few times since the initial commit, which slowed down the clone a lot. With a mirror, we don't even have to get any .git objects.\n Imo it's great thing to have, but implementation is too invasive. In capistrano strategy is configurable. When I created git cache pr, the whole thing was configurable with `use-if-possible` by default. To some this might be problematic depending on repository configuration, plus You'd have to actually keep additional dir on deployment target (and I got clients bitching about additional dirs and unneded versions since forever). And that dir would have to be there etc etc...\n\nMy position: make it configurable, just like I did with git cache. That way anybody would be able to choose strategy, be it shallow clone, reference or mirrored repo.\n It would be possible to make it configurable. However, it's more thing to maintain. Also, the previous behaviour didn't hide the .git directory, so I discovered I can access /.git/config and /.git/index from the web so in theory I could download every git objects if I'm patient enough. With directory listing enabled, it would be much easier.\n\nIn my case, the change uses much less disk space because the releases does not have the .git folder (5 folders less with the default keep-releases). It's a design change and I can't see it could practically live together with the old behaviour, but it's the maintainer's task to decide. Worst case, I have to use a private fork.\n You don't _have_ to use fork if it's so hard to maintain. If maintainer decides against it, then there's always deployphp/recipes repo in which You can add Your own recipes and in which recipe that changes 2 tasks can live happily :smiling_imp:\n\nWith `.git` present - I guess it depends on what person wants. If using shallow clones, it would actually do no harm to simply cleanup that dir post clone. In case of git cache with reference - it's simpy needed (aand securing access from outside to that is excercise to the admin/depops). With Your way - it's simply gone :)\n\nBut no need to listen to me - I am all for freedom of choice at expense of simplicity and maintainability. :joy_cat: \n Ok if this does not get to the next version, I shall move it to deployphp/recipes, much better to not have to maintain a private fork. I'm also open for improvements.\n > In capistrano strategy is configurable. \n\nI hope I can configure strategy. \n\n> It's a design change and I can't see it could practically live together with the old behaviour,\n\nYes, it can't live together. So users select one.\n\nSpeaking of `.git`, I think the directory structure is not secure. It seems you put too much files in Web document root.\n\nI mean, for example,\n\n```\nproject/        <-- not here\nproject/.git/\nproject/src/\nproject/public/ <-- this should be doc root.\nproject/public/index.php\n```\n I didn't expect so much resistance (well, 2 so far) so could you guys tell me why you need git objects in each release? Is it the case you are modifying files on the production server and committing to git from there?\n\nSome of my repositories are 1GB big, this means 5GB additional disk space when I keep only 5 releases. Also, using bare mirror in this PR is speeding up the deployment significantly without any side effects.\n\nMoving everything to a public folder except the files needed for development is not a solution, but perhaps I'm just too convenient after a few years RoR development. IDE's are not behaving like this by default, composer requires it's files and the vendor folder in the document root, and then there's the problem how the framework can support this. You have to add far more files anyway.\n I'm NOT oposing this, quite to the contrary. I just say that some CAN and\nWILL object. And those that will object are users... And if You leave them\nno choice they WILL leave. That's what We're trying to avoid here.\n\nI advise that You do same thing as I did: make it configurable. Then those\nlike You will enable it and those who need it other way will disable it and\nuse shalow clondes/referencee/local copy/whatever.\n\n2015-06-27 12:04 GMT+02:00 S\u00e1ndor Czettner notifications@github.com:\n\n> I didn't expect so much resistance (well, 2 so far) so could you guys tell\n> me why you need git objects in each release? Is it the case you are\n> modifying files on the production server and committing to git from there?\n> \n> Some of my repositories are 1GB big, this means 5GB additional disk space\n> when I keep only 5 releases. Also, using bare mirror in this PR is speeding\n> up the deployment significantly without any side effects.\n> \n> Moving everything to a public folder except the files needed for\n> development is not a solution, but perhaps I'm just too convenient after a\n> few years RoR development. IDE's are not behaving like this by default,\n> composer requires it's files and the vendor folder in the document root,\n> and then there's the problem how the framework can support this. You have\n> to add far more files anyway.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/deployphp/deployer/pull/379#issuecomment-116000760.\n\n## \n\nPozdrawiam,\nHubert Kowalski\n > could you guys tell me why you need git objects in each release? \n\nJust I like it. I can see git log and status on production server.\nBut if I had 1GB git repository, I would reconsider using git repository.\n\nSo I also do not oppose it, I may use it. But Capistrano has some strategy, so why does Deployer do also?\n\nI think it is better Deployer has functionality to have some strategies for a task.\n\n> Is it the case you are modifying files on the production server and committing to git from there?\n\nOf course not.\n Already implemented with git clone references.\n  After deploying my project I get plain file stucture (no subdirectories) and strange filenames instead of correct directory structure.\nDirectories names looks like:\ni\\1x\\logos\ni\\2x\\logos\n\nFilenames looks like:\ni\\2x\\logos\\mk_logo.png\nj\\j-d295da88.js\ns\\s-d87a8841.css\n\nIt worked well with Deployer 2.0.2.\nHow can I fix it?\n I've updated my config.\nI'am deploying from Windows 8.1 to Ubuntu 14.04 (if it is important).\n\nCurrent deploy.php:\n\n<?php \n    require 'recipe/common.php';\n\n// CONFIG\n    // local config\n    define( 'project_name',                 'app_name' );\n    define( 'local_path',                   'C:/path/to/build_production' );\n\n```\n// production server config\ndefine( 'remote_production_host',       '111.222.333.444' );\ndefine( 'remote_production_port',       '12345' );\ndefine( 'remote_production_username',   'user' );\ndefine( 'remote_production_password',   'pass123' );\ndefine( 'remote_production_path',       '/var/www/app_name/public_html' );\n```\n\n// JOBS\n    server('prod', remote_production_host, remote_production_port)\n        ->user(remote_production_username)\n        ->password(remote_production_password)\n        ->env('deploy_path', remote_production_path)\n        ->stage('production');\n\n```\ntask('upload_'.project_name, function () {\n    upload(local_path, remote_production_path);\n})->desc('Uploading '.project_name);\n\ntask(project_name, ['upload_'.project_name]);\n```\n\n ?>\n  Before to get current `stage` it was possible to do:\n\n```\ntask('xyz', function ($args) {\n   echo $args->getArgument('stage'); // prints stage where it is executed\n});\n```\n\nBut now function doesn't receive any arguments. How to get options / arguments values?\n I've had 2.0.2\n dep self-update please\n ```\n[11:21:29] (130) naquad@nq.od.ua ~/p/m/Backend \u276f\u276f\u276f deployer self-update                                                                                                                                          \u23ce\nLooking for updates...\nAlready up-to-date.\n[11:21:32] (000) naquad@nq.od.ua ~/p/m/Backend \u276f\u276f\u276f deployer --version\nDeployer version 3.0.6\n[11:21:32] (000) naquad@nq.od.ua ~/p/m/Backend \u276f\u276f\u276f deployer deploy -vvv\n\u27a4 Executing task newrelic:store_old_rev\n\u2937 on [dev]\n\u2936 done on [dev]\n\u2714 Ok\n\u27a4 Executing task deploy:prepare\n\u2937 on [dev]\nPHP Warning:  Missing argument 1 for {closure}() in /home/naquad/projects/Backend/deploy.php on line 32\nPHP Stack trace:\n```\n Any updates on this ?\n\n``` php\ntask('deploy:test', function($args) {\n    var_dump($args); // NULL\n});\n```\n\nbin/dep -V  \nDeployer version master\n\nWhich is\na569811eb74bb9152a12ab6dc727b7bfa0c40fd7\n Ohh, that is so much more simple and clean\n\n``` php\ntask('foo:bar', function() {\n    // For arguments\n    $stage = null;\n    if (input()->hasArgument('stage')) {\n        $stage = input()->getArgument('stage');\n    }\n\n    // For option\n   $tag = null;\n   if (input()->hasOption('tag')) {\n        $tag = input()->getOption('tag');\n    }\n}\n```\n Isv 's comment is correct.\nI am closing thing issue but feel free to reopen if you think there needs to be more discussion.\n added a section to the docs.\n Thank you!\n  I've downloaded recent `deployer.phar` and tried to migrate my projects. The problem I've experienced is that deployer doesn't change working directory to `deploy_path` one while documentation states it should. Setting undocumented variable `working_path` solved the issue, but I'm not sure it is a right solution. Rebuild the PHAR from master? Describe `working_path`?\n http://deployer.org/docs/functions :\nQuote:\n\n```\nrun(string $command)\nRuns a command on a remote server in the working path (server(...)->env('deploy_path', '/home/path')).\n```\n My deployer.php: https://gist.github.com/00e2e739dae4045ea809\n Wow, seems like Your code could benefit from migrating to 3.0 + using `deployphp/recipes` for new relic :smile: a lot of that is obsoleted by common.php + newrelic.php.\n  This would be a nice feature to have. For example in Zend Framework 2 you have a lot of local (meaning git ignored) configuration files. It would be nice to be able to share them using a wildcard like `*.local.php`.\n\nI realize that this goes againts the fact that the actual implementation creates the declared shared files if they are not there. Using a wildcard like the above mentioned one would create an actual `*.local.php` file.\n\nMaybe we could have some optional configuration setting to say that the shared files needs to be created or not, or we could just simply search the file name and avoid the creation of the file if we find a \\* wildcard.\n\nWhat do you think?\n As I said in Zend Framework applications you could have a lot of configuration files, all ending in `.local.php`. I would like to avoid the need to modify my `deploy.php` file everytime I add a new configuration file. It would be easier if all the `*.local.php` files were automatically shared every time.\n\nOn the other hand, I would have to create my config files in the `shared` directory, but anyhow I would have to put some content into them even I created them automatically.\n\nWhy do you think it could generate bugs?\n @marcosh maybe this will help: [environment-specific application config of zf2](http://framework.zend.com/manual/current/en/tutorials/config.advanced.html#environment-specific-application-configuration)\n  Just for secure, I can't write host password in code. So I try `ask` function.\n\nwhen I call `ask` or `askHiddenResponse` for ask password, the function throw this error:\n\n```\nFatal error: Call to a member function getOutput() on a non-object in vendor/deployer/deployer/src/functions.php on line 511\n```\n\n_example:_\n\n```\n<?php\nrequire 'recipe/symfony.php';\n$password = askHiddenResponse(\"Host password: \");\n\nserver('prod', 'HOST', 22)\n     ->user('USER')\n     ->password($password);\n```\n\nIf `ask` in `task` callback, It's success. but I can set server.password:\n\n```\ntask('auth', function(){\n    $password = askHiddenResponse(\"Host password: \");\n    env('server.password', $password);\n});\nbefore('deploy', 'auth');\n\n-- throw exception\nThe parameter `server.password` cannot be set, because `server` is protected.\n```\n Thanks\n  And make them much more readable for users\nReview appreciated\n :+1:\n So the phpdoc is human readable. That's the whole point of phpdoc. :)\n Yeh, i think the long one is way better. You know exactly what it is. The first one could be anything.\n Hello @elfet ; yes for many developers it makes much more sense get the full FQN in docblocks.\nSure the `InputDefinition` example that you gives is true, but in many other case the developer might wonder which exact type of argument the function is using.\n\nDeployer project would IMO greatly benefits from this kind of docblocks.\n Also @elfet Deployer is growing very fast.\nNo one can really predict what it will be in 2 years, will it still use Symfony components, will it provide a system of plugins, will it use Interface dependency injection ?\nYou might have a class name and an interface having the same base name.\nIn this situation short FQN would become completely unreadable in docblocks.\n > PhpStorm fully supports this, by the way.\n\nAs I said, phpdoc is not for IDEs. You could argue IDEs should run static code analysis and phpdoc isn't needed at all.\n I vote for 2. :)\n > I found that the Symfony code seems to use FQCNs\n\nLaravel does too. :)\n Well vote on number 2 as well :-)\n  As this is already the case where most FQN are imported, this PR skip the usage of FQN in the source\n It allows to have a more concise code.\nOut of the function the developer has no clue of the arguments, so why the docblocks FQN are useful\nBut within the function it does not really makes sense to repeat many times the same namespace.\n\nAlso in the current code, sometimes the namespace is imported, sometimes it is not.\n\nImporting FQN in code provide a common practice for all developer who wish to contribute to the project.\nATM, they don't have any clue what to do.\n :+1:\n BTW @elfet : https://github.com/deployphp/deployer/pull/368#discussion_r32720683\nSome framework use lots of fixers https://github.com/laravel/framework/blob/5.1/.php_cs\nSome less, it's really up to you\n Sure @gordalina and it's already implemented : https://github.com/deployphp/deployer/blob/master/.php_cs :-)\n\nBut shall we add more fixers to this .php_cs definition file ?\n > isn't there any CI that validates a PR with cs fixer? \n\nYeh. https://styleci.io. :)\n If you like the rules laravel uses, you can use the \"laravel\" preset on styleci. :)\n https://github.com/StyleCI/Config/blob/master/src/Config.php\n This PR has no info if it was sent before StyleCI was enabled. I think open/closeing this PR will trigger StyleCI to run. :)\n > does it notify the PR that its valid/invalid?\n\nYes it does. It uses github's status API.\n > This PR has no info if it was sent before StyleCI was enabled. I think open/closeing this PR will trigger StyleCI to run. :)\n\nCan anyone @gordalina @elfet @ZeeCoder try to close and re-open this PR ?\n @lucasmichot Can't you do it?\n > I think open/closeing this PR will \n\nLooking at my code, the 3rd way of doing it is just to push to this PR. :)\n A rebase and force push would do it for example.\n Rebase or forced push\n  Add the following details :\n- homepage\n- support\n  Also apply PSR-2 fixes to bin/dep\n   @ZeeCoder I agree. After all, that's why it's in `allowed_failures` section.\n  Also add shell syntax highlighting as for https://github.com/deployphp/docs/pull/31\n  So that we can use https://styleci.io\n ![screen shot 2015-06-18 at 09 38 45](https://cloud.githubusercontent.com/assets/513603/8226331/19ba436c-159e-11e5-9284-f00b4dbc5a8a.png)\nWorking nice with it, @GrahamCampbell can you maybe add a link to it ?\n Well in fact @elfet @ZeeCoder it's more for you : when you go to the result page of your style check, when clicking on the logo, you should be able to get the following URL [![StyleCI](https://styleci.io/repos/37314625/shield)](https://styleci.io/repos/37314625) or something similar to be added to the README\n No @ZeeCoder , you are linking to my fork, not the original repository !\n  - Updated reamde\n- Added an editoconfig file and php_cs file\n- formatted code - very few code changes (mainly spaces and blank lines)\n :+1:\n When it's about PSR, @GrahamCampbell is never very far :-)\n lol\n @elfet How about you guys enable [StyleCI](https://styleci.io/) on this repo to make sure you stay PSR-2 compient and contributors get noticed via github's status API on their PRs if they're not following the coding style guide you've defined.\n For a reason Travis failed but this seems related to something else : https://travis-ci.org/deployphp/deployer/jobs/67236631#L97\n The config file was probably missing @elfet \nSee https://github.com/deployphp/deployer/pull/362\n  Thanks, folks) This will be cool!\n @ZeeCoder : I use Capifony also, and it's really easy to migrate from capifony to deployer.\n\n@gordalina : i think you don't need special docs to migrate from capistrano because deployer is easier than it\n @ZeeCoder : Many people doesn't have experience with ssh, public key, ssh config and many things of technical (especially the flow of how the code will be download from the repository and why i have an error when i try to download the repository from my own server)\n\nI think will be better to write a doc for how to use deployer step by step\n\n#sorry for my bad english\n How about also have some examples for combining builtin recipes, 3rd party recipes and own code into something _nice_ Would be cool to have something like _best practices_ or _advanced sample recipes_ ;)\n There could also be something like (just writting idea):\n\n# Recipe XYZ\n\n[...]\n\n### Saples using this recipe\n- Deploy to ToiLet (recipes XYZ, Common)\n- Wordpress + Laravel + Twig (Recipes Wordpress, Laravel, Common, XYZ)\n- Local building + remote syncing(Recipes XYZ, Local, Rsync)\n- Send files by Pidgeon (Recipes XYZ, Pidgeon)\n Note: I still didn't have any time to write about the migration process, because I'm working on an API draft for Deployer v4.\n\nIf someone would like to tackle this task, feel free to do so. :+1:\n Coming from Capifony and Capistrano v2 I'm doing my first steps with Deployer.\nI tried Magallanes / MagePHP in between.\n\nMy main migration questions dealed with Symfony tasks like:\n- sharing files e.b. \"parameters.yml\" and configure in interaction mode once using \"parameters.yml.dist\" and automatically symlinking\n- not using git clone on remote but pushing copy from local machine to remote target (discussed in https://github.com/deployphp/deployer/issues/60)\n- file structure Symfony v2 vs. v3\n- assetic Symfony v2 vs. v3\n @webdevilopers : i'm a symfony developer and i just confirm, deployer use git clone instead local copy.\n\nYou can use extra param `-vvv` for more verbose\n  :+1: \n For point 3, we can use of http://keepachangelog.com/ with http://changehub.io/cases/addapp/\n  This PR aims to be a solution following various comments on https://github.com/deployphp/deployer/pull/338.\n\nA revert of https://github.com/deployphp/deployer/commit/a760a9f17bf0ad3b28b9c5dfe3a29982266b00bf would reintroduce the bug previously explained.\n\nThe following PR provides a default timezone to UTC that can be overridden in the deployment script.\nThis provides thus a consistency between releases name on different servers, as the TZ on this server might all be different.\n\nAlso some documentation on http://deployer.org would be necessary.\n I think using local time should be default and this PR should be merged. But we have to add docs for it.\n > I think using local time should be default and this PR should be merged. But we have to add docs for it.\n\n@oanhnn using the default timezone would lead to https://github.com/deployphp/deployer/pull/338#issue-87683073\nIt necessary has to be a fixed timezone that all deployment machines use\n @lucasmichot \nYes. i understand it. I mean set default timezone on `deploy.php` file and using `date()` function from deployment PC (not deployment server).\n @oanhnn - Isn't that exactly what this PR does? only default timezone is set via env, not via direct php function in deploy.php\n\nhowever IMO timezone shouldn't be in env, rather it should be in settings - after all we want to have ONE timezone across all, not per-environmant timezone, right?\n I think this is solution for now. But we want to be this is common settings which now can not be implemented and will be implemented in Deployer v4.\n Merged.\n  `use function` can be used on PHP 5.6 or lator.\n +1\n :+1: \n The global nature of deployer functions clashes also with `hamcrest-php`.\n\nI get the following error:\n\n```\nPHP Fatal error:  Cannot redeclare set() \n(previously declared in vendor/hamcrest/hamcrest-php/hamcrest/Hamcrest.php:455)\nin vendor/deployer/deployer/src/functions.php on line 417\n```\n\nDefinitely +1 for using a namespace in `functions.php`\n Same here on symfony2 project\n Need this as fast as possible for Symfony2 / Symfony3.\n I think we need #471 to complete this issue.\n  I have to write weird piece. Usually that would be 3 separate commands, but it would be great to be able to do in one:\n1. Connect to server 1, issue command to create file on server 1\n2. Dowload file locally (or upload to server2 directly if possible, then skip to point 4)\n3. Connect & upload file downloaded to server 2\n4. Issue command on server 2 to accept file\n\nReason for this: when developing long-running wordpress site (for example) it's great to have production database on staging, and vice versa - have changes applied on staging work on production witout lengtly introducing them.\n\nAny suggestions for that? \n @johnny-bit \nAre you haven't any other questions about @elfet 's suggestion?\nI am closing thing issue but feel free to reopen if you think there needs to be more discussion.\n  So... `LOCK` file is basically saying \"we're in process of deploying here\"? I quite get the concept for release, symlink & rollback (rolling to last complete release) however I don't get cleanup... If release acted like You said, then cleanup would have to be run twice - once befor release and once normally. maybe it would be better to add tasks like semaphores? `acquire_lock` and `release_lock`?\n Is it necessary to have it on a per release basis ?\n\nFor my projects, I use these tasks, and it works good:\n\n``` php\nenv('lock_path', '{{deploy_path}}/deploy.lock');\n\ntask('deploy:lock', function() {\n    $res = run('[ -f {{lock_path}} ] && echo Locked || echo OK');\n\n    if (trim($res) === \"Locked\") {\n        throw new RuntimeException(\"Deployement is locked.\");\n    }\n\n    run('touch {{lock_path}}');\n});\n\ntask('deploy:unlock', function() {\n    $res = run('[ -f {{lock_path}} ] && echo Locked || echo OK');\n\n    if (trim($res) === \"Locked\") {\n        run('rm {{lock_path}}');\n    }\n});\n\nafter('deploy:prepare', 'deploy:lock');\nafter('deploy:symlink', 'deploy:unlock');\n```\n  ## Config - deploy.php\n\n``` shell\nrequire 'vendor/deployer/deployer/recipe/yii.php';\n\nset('ssh_type', 'ext-ssh2');\nset('repository', 'git@github.com:oanhnn/deployer-example.git');\n\n// Define a server for deployment.\n// Let's name it \"prod\" and use port 22.\nserver('test', 'localhost')\n    ->user('andreybolonin')\n    ->password('xyz')\n    ->stage('prod')\n    ->env('deploy_path', '/home/andreybolonin/cporder-2-0');\n```\n## Console output:\n\n``` shell\nandreybolonin@andreybolonin-MS-7369:~/www/cporder-2-0$ vendor/bin/dep deploy prod -vvv\n\u27a4 Executing task deploy:prepare\n\u2937 on [test]\nRun: echo $0\n> bash\n> \nRun: if [ ! -d /home/andreybolonin/cporder-2-0 ]; then echo \"\"; fi\nRun: cd /home/andreybolonin/cporder-2-0 && if [ ! -d releases ]; then mkdir releases; fi\nRun: cd /home/andreybolonin/cporder-2-0 && if [ ! -d shared ]; then mkdir shared; fi\n\u2936 done on [test]\n\u2714 Ok\n\u27a4 Executing task deploy:release\n\u2937 on [test]\nRun: date +%Y%m%d%H%M%S\n> 20150616161800\n> \nRun: mkdir /home/andreybolonin/cporder-2-0/releases/20150616161800\nRun: cd /home/andreybolonin/cporder-2-0 && if [ -h release ]; then rm release; fi\nRun: ln -s /home/andreybolonin/cporder-2-0/releases/20150616161800 /home/andreybolonin/cporder-2-0/release\n\u2936 done on [test]\n\u2714 Ok\n\u27a4 Executing task deploy:update_code\n\u2937 on [test]\nRun: readlink /home/andreybolonin/cporder-2-0/release\nPHP RuntimeException:   in /home/andreybolonin/www/cporder-2-0/vendor/herzult/php-ssh/src/Ssh/Exec.php on line 32\nPHP Stack trace:\nPHP   1. {main}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/bin/dep:0\nPHP   2. Deployer\\Deployer->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/bin/dep:63\nPHP   3. Symfony\\Component\\Console\\Application->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Deployer.php:99\nPHP   4. Symfony\\Component\\Console\\Application->doRun() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:126\nPHP   5. Symfony\\Component\\Console\\Application->doRunCommand() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:195\nPHP   6. Symfony\\Component\\Console\\Command\\Command->run() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:878\nPHP   7. Deployer\\Console\\TaskCommand->execute() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Command/Command.php:259\nPHP   8. Deployer\\Executor\\SeriesExecutor->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Console/TaskCommand.php:82\nPHP   9. Deployer\\Task\\Task->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Executor/SeriesExecutor.php:40\nPHP  10. call_user_func:{/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73\nPHP  11. {closure:/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:116-132}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73\nPHP  12. Deployer\\Server\\Environment->parse() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:129\nPHP  13. preg_replace_callback() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:161\nPHP  14. Deployer\\Server\\Environment->parseCallback() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:161\nPHP  15. Deployer\\Server\\Environment->get() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:175\nPHP  16. call_user_func:{/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:101}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:101\nPHP  17. {closure:/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:88-90}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:101\nPHP  18. run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:89\nPHP  19. Deployer\\Server\\Remote\\SshExtension->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/functions.php:290\nPHP  20. Ssh\\Exec->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Remote/SshExtension.php:113\n\n\nRuntimeException:  in /home/andreybolonin/www/cporder-2-0/vendor/herzult/php-ssh/src/Ssh/Exec.php on line 32\n\nCall Stack:\n    0.0016     242472   1. {main}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/bin/dep:0\n    0.0487    2848832   2. Deployer\\Deployer->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/bin/dep:63\n    0.0520    2937952   3. Symfony\\Component\\Console\\Application->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Deployer.php:99\n    0.0521    2939264   4. Symfony\\Component\\Console\\Application->doRun() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:126\n    0.0524    2940184   5. Symfony\\Component\\Console\\Application->doRunCommand() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:195\n    0.0525    2940688   6. Symfony\\Component\\Console\\Command\\Command->run() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:878\n    0.0534    2946680   7. Deployer\\Console\\TaskCommand->execute() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Command/Command.php:259\n    0.0545    2965480   8. Deployer\\Executor\\SeriesExecutor->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Console/TaskCommand.php:82\n    0.6694    3156288   9. Deployer\\Task\\Task->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Executor/SeriesExecutor.php:40\n    0.6695    3156424  10. call_user_func:{/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73\n    0.6695    3156544  11. {closure:/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:116-132}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73\n    0.6698    3157128  12. Deployer\\Server\\Environment->parse() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:129\n    0.6698    3157664  13. preg_replace_callback() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:161\n    0.6698    3158688  14. Deployer\\Server\\Environment->parseCallback() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:161\n    0.6698    3158688  15. Deployer\\Server\\Environment->get() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:175\n    0.6699    3158784  16. call_user_func:{/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:101}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:101\n    0.6699    3158816  17. {closure:/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:88-90}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:101\n    0.6700    3158960  18. run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:89\n    0.6705    3159096  19. Deployer\\Server\\Remote\\SshExtension->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/functions.php:290\n    0.6705    3159096  20. Ssh\\Exec->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Remote/SshExtension.php:113\n\n\n\n\n  [RuntimeException]  \n\n\n\nException trace:\n () at /home/andreybolonin/www/cporder-2-0/vendor/herzult/php-ssh/src/Ssh/Exec.php:32\n Ssh\\Exec->run() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Remote/SshExtension.php:113\n Deployer\\Server\\Remote\\SshExtension->run() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/functions.php:290\n run() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:89\n {closure}() at n/a:n/a\n call_user_func() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:101\n Deployer\\Server\\Environment->get() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:175\n Deployer\\Server\\Environment->parseCallback() at n/a:n/a\n preg_replace_callback() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Environment.php:161\n Deployer\\Server\\Environment->parse() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:129\n {closure}() at n/a:n/a\n call_user_func() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73\n Deployer\\Task\\Task->run() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Executor/SeriesExecutor.php:40\n Deployer\\Executor\\SeriesExecutor->run() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Console/TaskCommand.php:82\n Deployer\\Console\\TaskCommand->execute() at /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Command/Command.php:259\n Symfony\\Component\\Console\\Command\\Command->run() at /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:878\n Symfony\\Component\\Console\\Application->doRunCommand() at /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Deployer.php:99\n Deployer\\Deployer->run() at /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/bin/dep:63\n\n\ndeploy [-p|--parallel]\n```\n\nNote: I debug with xdebug, and find that {{release_path}} in vendor/deployer/deployer/recipe/common.php:130 is Closure.\n {{release_path}} = env('release_path')\nhttps://github.com/deployphp/deployer/blob/master/recipe/common.php#L88\n ## Config:\n\n``` shell\n// All Deployer recipes are based on `recipe/common.php`.\nrequire 'vendor/deployer/deployer/recipe/yii.php';\n\n\n//set('ssh_type', 'ext-ssh2');\nset('repository', 'git@github.com:symfony/symfony.git');\n\n//task('deploy:start', function() {\n//    cd('~');\n//    run(\"if [ ! -d {{deploy_path}} ]; then mkdir -p {{deploy_path}}; fi\");\n//    cd('{{deploy_path}}');\n//})->setPrivate();\n\n//before('test:test', 'deploy:release');\n\n// Define a server for deployment.\n// Let's name it \"prod\" and use port 22.\nserver('test', 'localhost')\n    ->user('andreybolonin')\n    ->password('xyz')\n//    ->identityFile('/home/andreybolonin/.ssh/id_rsa.pub', '/home/andreybolonin/.ssh/id_rsa')\n//    ->configFile('/home/andreybolonin/.ssh/config')\n//    ->password('')\n//    ->forwardAgent() // You can use identity key, ssh config, or username/password to auth on the server.\n    ->stage('prod')\n    ->env('deploy_path', '/home/andreybolonin/cporder-2-0')\n    ->env('release_path', '/home/andreybolonin/cporder-2-0/release');\n```\n\n## Output:\n\n``` shell\nandreybolonin@andreybolonin-MS-7369:~/www/cporder-2-0$ vendor/bin/dep deploy test\n\u2714 Executing task deploy:prepare\n\u2714 Executing task deploy:release\n  Executing task deploy:update_code\nPHP RuntimeException:  Permission denied (publickey).\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists.\n in /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Remote/PhpSecLib.php on line 114\nPHP Stack trace:\nPHP   1. {main}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/bin/dep:0\nPHP   2. Deployer\\Deployer->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/bin/dep:63\nPHP   3. Symfony\\Component\\Console\\Application->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Deployer.php:99\nPHP   4. Symfony\\Component\\Console\\Application->doRun() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:126\nPHP   5. Symfony\\Component\\Console\\Application->doRunCommand() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:195\nPHP   6. Symfony\\Component\\Console\\Command\\Command->run() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:878\nPHP   7. Deployer\\Console\\TaskCommand->execute() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Command/Command.php:259\nPHP   8. Deployer\\Executor\\SeriesExecutor->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Console/TaskCommand.php:82\nPHP   9. Deployer\\Task\\Task->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Executor/SeriesExecutor.php:40\nPHP  10. call_user_func:{/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73\nPHP  11. {closure:/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:116-132}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73\nPHP  12. run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:130\nPHP  13. Deployer\\Server\\Remote\\PhpSecLib->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/functions.php:289\n\n\nRuntimeException: Permission denied (publickey).\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists.\n in /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Server/Remote/PhpSecLib.php on line 114\n\nCall Stack:\n    0.0006     242272   1. {main}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/bin/dep:0\n    0.0551    2853072   2. Deployer\\Deployer->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/bin/dep:63\n    0.0593    2942216   3. Symfony\\Component\\Console\\Application->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Deployer.php:99\n    0.0596    2943472   4. Symfony\\Component\\Console\\Application->doRun() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:126\n    0.0599    2944392   5. Symfony\\Component\\Console\\Application->doRunCommand() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:195\n    0.0599    2944896   6. Symfony\\Component\\Console\\Command\\Command->run() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Application.php:878\n    0.0605    2949648   7. Deployer\\Console\\TaskCommand->execute() /home/andreybolonin/www/cporder-2-0/vendor/symfony/console/Command/Command.php:259\n    0.0617    2968552   8. Deployer\\Executor\\SeriesExecutor->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Console/TaskCommand.php:82\n    1.0523    7668032   9. Deployer\\Task\\Task->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Executor/SeriesExecutor.php:40\n    1.0524    7668168  10. call_user_func:{/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73\n    1.0524    7668256  11. {closure:/home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:116-132}() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/Task/Task.php:73\n    1.0527    7668832  12. run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/recipe/common.php:130\n    1.0530    7669088  13. Deployer\\Server\\Remote\\PhpSecLib->run() /home/andreybolonin/www/cporder-2-0/vendor/deployer/deployer/src/functions.php:289\n\n\n\n\n  [RuntimeException]                                   \n  Permission denied (publickey).                       \n  fatal: Could not read from remote repository.        \n  Please make sure you have the correct access rights  \n  and the repository exists.                           \n```\n\nThe same problem is - https://github.com/deployphp/deployer/issues/70 ?\n  When installing deployer using composer I get:\n\n```\nPackage guzzle/parser is abandoned, you should avoid using it. Use guzzle/guzzle instead.\n```\n See https://github.com/deployphp/deployer/issues/259#issuecomment-111633652\n So... Deployer depends on elfet/pure which in turns depends on react/react, which in turn depends on react/http-client which in turn depends on guzzle/parser... Fun.\n  Would like to build up the web feature. How do i Start ? How to go about ? \n This will be really cool!\n Please use ES6, babel, webpack and monkberry.\n   Can I ask does this mean Deployer does not work with SSH public keys by default, e.g. using a public key to login via SSH with the identityFile() method?\n\nIf so, that is not clear from the documentation, but certainly doesn't appear to work when I try. \n\nIf this is the case can I suggest some changes to the docs at http://deployer.org/docs/servers\n Just to confirm is using a public key to login via SSH not supported in Deployer without the ssh2 extension? It's still not clear to me!\n OK.. it's not clear from your replies whether Deployer supports public key login to servers without installing the ssh2 extension?\n\nIf it can, looks like I'm doing something wrong since I can't get it working (I do not have ssh2 installed locally).\n  Ooh!! I can do that! I did for my `local_common`! may I PR this? And can I use \"git_cache\" env for that?\n Hmmm... That _is_ good idea... however there _are_ some drawbacks to it... But OK, will add that to my `local_common` for check and then will pr `common` :)\n PR #352 fixes this :)\n So... #352 landed, then this issue can be closed, yes?\n   Pimple :+1:\n In pimple we can not use parameters bag, and can not make protected services (parameters). \n :+1: for pimple also.\n\nTake a look at Cilex (https://github.com/Cilex/Cilex) if you like to see how pimple is combined well with Symfony console application.\n I already used some DIC for CLI projects, from my experience:\n- [Symfony DI](http://symfony.com/doc/current/components/dependency_injection/introduction.html) :+1: \n- [Pimple](http://pimple.sensiolabs.org/) :-1: \n\n## Comparison\n- [Performance](http://www.sitepoint.com/php-dependency-injection-container-performance-benchmarks/)\n- [DI containers usage comparison](https://gist.github.com/mnapoli/6159681)\n\nPimple is faster (I'm not sure is critical issue here) but functionality are limited. On  Sf DI we can use YML config file to manage DI (and this should really useful on app maintenance and improvements).\n @mavimo The performance article you link to isn't much use as Tom didn't actually review pimple as didn't realise you could use it as a DIC. He thought every instance it returned was the same which for V1.x is completely incorrect. For V3.x whilst that's what it does by default you can configure it to return you a new instance of your service each time you get it from the container.\n\nIf YML is important then there is a library for configuring Pimple with YML - https://github.com/gonzalo123/yml2pimple\n Why not [PHP-DI](http://php-di.org/)?\n Why?\n\n> 11 \u043c\u0430\u0440\u0442\u0430 2016 \u0433., \u0432 22:30, Denis Terekhov notifications@github.com \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> \n> Why not PHP-DI?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n  I found some small grammatical errors, so I thought I could help out with a patch. Fantastic tool by the way, very helpful.\n  Hi,\n\nI'm seeing this issue when trying to install Deployer via Composer:\n\n``` bash\n$ composer require deployer/deployer:~3.0\n./composer.json has been updated\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\n\n  [RuntimeException]                                                                                                                                                   \n  Could not load package deployer/deployer in http://packagist.org: [UnexpectedValueException] Could not parse version constraint ^2.6: Invalid version string \"^2.6\"  \n\n  [UnexpectedValueException]                                              \n  Could not parse version constraint ^2.6: Invalid version string \"^2.6\"  \n\nrequire [--dev] [--prefer-source] [--prefer-dist] [--no-progress] [--no-update] [--update-no-dev] [--update-with-dependencies] [--ignore-platform-reqs] [packages1] ... [packagesN]\n```\n\nI installed Composer `1.0.0-alpha9` from Homebrew on OS X Yosemite 10.10.3.\n\nDo you have any idea what the problem could be?\n\nThanks!\n Great thanks, I'll do that.\n\n## \n\nRyan Conway\n(sent from my phone)\n\n> On 15 Jun 2015, at 2:10 pm, Hubert Viktor notifications@github.com wrote:\n> \n> Try the 1.0.0-alpha10 version.\n> It seems the ^ got support there: https://github.com/composer/composer/releases/tag/1.0.0-alpha10\n> \"Added support for npm-style semver operators (^ and - ranges, (space) = AND, || = OR)\"\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n    There is an issue with the release date : it's based on the client date.\nIt should be based on the server date.\n\nHow to reproduce:\n- set your script to keep 2 releases\n- set your server on UTC\n- deploy twice from CircleCI (UTC)\n- deploy once from a Europe/Berlin machine (or any other timezone as long as you more than 1 hour offset with UTC)\n\nReleases:\n- 20150612111941 : CircleCI (1st deployment) at 11:19:41\n- 20150612113811 : CircleCI (2nd deployment) at 11:38:11\n- 20150612093922 : Deployment from my machine at 11:39:22\n\nThe symlink task will symlink the latest release (20150612093922).\nThe cleanup will then remove the oldest release (20150612093922 too).\n\nOnly outdated releases will remain on the server : 20150612111941 and 20150612113811.\n\nUsing the server date ensures this situation does not happen.\n Dear @lucasmichot , @elfet \nI don't think this solution is best when deploy to multi server with different timezone and pa\nI think we should set default timezone on top of `deploy.php` file.\n\n``` php\n// file deploy.php\ndate_default_timezone_set('UTC');\n```\n @oanhnn is right. If basing release date on server timezone and deploying for example on multiple servers across the world You could end up with messy situation when trying to get \"proper\" release date. So IMO as @oanhnn said, best bet would be to set timezone to fixed UTC and document that we're using UTC for deploy date.\n @oanhnn `date_default_timezone_set('UTC');` was my workaround before fixing this bug.\n@johnny-bit: forcing `UTC` would be a good idea, and would be consistant - but do we want to force that @elfet ?\n We don't have to force any timezone. It is okay users set timezone they want in `deploy.php`.\n Well, that's OK actually. However after a760a9f release date is based on server time. I've noticed when developing my shared hosting workflow recipe, that this can cause minor issues: My system is CEST while my test server is UTC, so release dates on both differ by ~2h.\n\nSo... @elfet - how about reverting @lucasmichot and go the route @kenjis suggest, but document it better? Something like \"Names of Release directories are based on date. We thus encourage to use UTC timezone if You're deplouing in multiple timezones by settfig timezone in Your `deploy.php` file\" ?\n @elfet I'm also voting for reverting a760a9f17bf0ad3b28b9c5dfe3a29982266b00bf , better docs and freedom to set timezone myself :+1: .\n No @gordalina it wont fails with a common timezone\n  Hi,\n\ntoday I tried using deployer with ssh2 php extension and found two things:\n1. documentation is wrong:\n   \n   ```\n   This can only be used with the ssh2 pecl extension.\n   \n   // Switch to ext-ssh2\n   set('use_ssh2', true);\n   ```\n   \n   It should be `set('ssh_type', 'ext-ssh2')`\n2. it does not work\n   - I'm using Linux Mint 17. \n   - I had aleready installed ssh2.so in package `libssh2-php: /usr/lib/php5/20121212/ssh2.so` \n   - there is `extension=ssh2.so` in /etc/php5/mods-available/ssh2.ini \n   - `php -m` shows `ssh2`\n   - I tried installing ssh2 using pecl: `sudo pear install channel://pecl.php.net/ssh2-0.12`, it was successfull and `ssh2.so` file was updated \n   - I get errors when using `set('ssh_type', 'ext-ssh2')`\n     \n     ```\n       Executing task deploy:lock_project\n     PHP Fatal error:  Class 'Ssh\\Configuration' not found in phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Server/Remote/SshExtension.php on line 47\n     PHP Stack trace:\n     PHP   1. {main}() /home/piotrek/Vhosts/deployer/deployer.phar:0\n     PHP   2. require() /home/piotrek/Vhosts/deployer/deployer.phar:3\n     PHP   3. Deployer\\Deployer->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/bin/dep:62\n     PHP   4. Symfony\\Component\\Console\\Application->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Deployer.php:91\n     PHP   5. Symfony\\Component\\Console\\Application->doRun() phar:///home/piotrek/Vhosts/deployer/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n     PHP   6. Symfony\\Component\\Console\\Application->doRunCommand() phar:///home/piotrek/Vhosts/deployer/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n     PHP   7. Symfony\\Component\\Console\\Command\\Command->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n     PHP   8. Deployer\\Console\\TaskCommand->execute() phar:///home/piotrek/Vhosts/deployer/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:257\n     PHP   9. Deployer\\Executor\\SeriesExecutor->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Console/TaskCommand.php:116\n     PHP  10. Deployer\\Task\\Task->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Executor/SeriesExecutor.php:40\n     PHP  11. call_user_func() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Task/Task.php:66\n     PHP  12. {closure:/home/piotrek/Vhosts/deployer/tasks.php:14-17}() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Task/Task.php:66\n     PHP  13. run() /home/piotrek/Vhosts/deployer/tasks.php:16\n     PHP  14. Deployer\\Server\\Remote\\SshExtension->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/functions.php:289\n     PHP  15. Deployer\\Server\\Remote\\SshExtension->checkConnection() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Server/Remote/SshExtension.php:111\n     PHP  16. Deployer\\Server\\Remote\\SshExtension->connect() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Server/Remote/SshExtension.php:102\n     ```\n\nAm I doing something wrong? Should I Install some extension other than pecl ssh2? Is it some kind of old code which was maybe valid some time ago and not now?\n Hi,\n\nI can create PR but what if this functionality doesn't work? Should it be in docs?\n Hello.\n\nPR also created - https://github.com/deployphp/docs/pull/28\n\nI try to connect via ssh config.\nSsh config writing with \"ProxyCommand ssh node01 -W %h:%p\" commands.\nAnd all of proxy-connections equal 3. And after 1st proxy-connect i have this error:\n\n\"Shell on your server is not POSIX-compliant. Please change to sh, bash or similar.  Usually, you can change your shell to bash by running: chsh -s /bin/bash\"\n\nWhat is it?\n @elfet how should I inlclude `herzult/php-ssh`? I tried:\n\n```\n$ composer require herzult/php-ssh\nUsing version ^1.1 for herzult/php-ssh\n./composer.json has been updated\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\n  - Installing herzult/php-ssh (v1.1.1)\n    Downloading: 100%         \n\nWriting lock file\nGenerating autoload files\n```\n\nInside deployer.php:\n\n``` php\n// All Deployer recipes are based on `recipe/common.php`.\nrequire 'recipe/symfony.php';\nrequire 'tasks.php';\nrequire 'vendor/autoload.php';\n\nset('ssh_type', 'ext-ssh2');\n//...\n```\n\nAnd I still get:\n\n```\n$ php deployer.phar deploy dev-open \n  Executing task deploy:lock_project\nPHP Fatal error:  Class 'Ssh\\Configuration' not found in phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Server/Remote/SshExtension.php on line 47\nPHP Stack trace:\nPHP   1. {main}() /home/piotrek/Vhosts/deployer/deployer.phar:0\nPHP   2. require() /home/piotrek/Vhosts/deployer/deployer.phar:3\nPHP   3. Deployer\\Deployer->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/bin/dep:62\nPHP   4. Symfony\\Component\\Console\\Application->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Deployer.php:91\nPHP   5. Symfony\\Component\\Console\\Application->doRun() phar:///home/piotrek/Vhosts/deployer/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:126\nPHP   6. Symfony\\Component\\Console\\Application->doRunCommand() phar:///home/piotrek/Vhosts/deployer/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:195\nPHP   7. Symfony\\Component\\Console\\Command\\Command->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:874\nPHP   8. Deployer\\Console\\TaskCommand->execute() phar:///home/piotrek/Vhosts/deployer/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:257\nPHP   9. Deployer\\Executor\\SeriesExecutor->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Console/TaskCommand.php:116\nPHP  10. Deployer\\Task\\Task->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Executor/SeriesExecutor.php:40\nPHP  11. call_user_func() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Task/Task.php:66\nPHP  12. {closure:/home/piotrek/Vhosts/deployer/tasks.php:14-17}() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Task/Task.php:66\nPHP  13. run() /home/piotrek/Vhosts/deployer/tasks.php:16\nPHP  14. Deployer\\Server\\Remote\\SshExtension->run() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/functions.php:289\nPHP  15. Deployer\\Server\\Remote\\SshExtension->checkConnection() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Server/Remote/SshExtension.php:111\nPHP  16. Deployer\\Server\\Remote\\SshExtension->connect() phar:///home/piotrek/Vhosts/deployer/deployer.phar/src/Server/Remote/SshExtension.php:102\n```\n @pilotftzi You probably have some non POSIX compliant shell or it can't be detected. Can you log in to server using ssh and write what this command shows\n\n```\necho $SHELL\n```\n\n?\n Ok, it seems to work when I'm using `composer.json` to install `deployer`. I'll make PR with instructions how to use `ext-ssh2`. \n\nBtw. there is warning when installing deployer using composer:\n\n```\nPackage guzzle/parser is abandoned, you should avoid using it. Use guzzle/guzzle instead.\n```\n This is currently a big problem for me.\n\nSince I'm using Laravel, I can't use composer (#316), and since I need to use ext-ssh2 I can't use deployer.phar.\n @phaza Can't you use deployer independently of your project? I'm currently using composer from my local laptop to install new versions on servers (I have it in independent git repo). If you must install deployer on server, why not install it in your home directory or some other directory with write access. Mingling it with actual project code is not a good thing in my opinion. You should be able to update deploy tool without updating project code. Why not create git repository just for deployer so any project developer could get it and use it wherever he wants?\n I don't install deployer on the server. I tried to add it as a development\nrequirement. IMO that makes sense since the deploy recipe is part of the\nproject too.\nAnyway, I made my own deployer.phar with the necessary package included in\nvendor.\n\nOn Tue, 16 Jun 2015 at 10:51 piotrekkr notifications@github.com wrote:\n\n> @phaza https://github.com/phaza Can't you use deployer independently of\n> your project? I'm currently using composer from my local laptop to install\n> new versions on servers (I have it in independent git repo). If you must\n> install deployer on server, why not install it in your home directory or\n> some other directory with write access. Mingling it with actual project\n> code is not a good thing in my opinion. You should be able to update deploy\n> tool without updating project code. Why not create git repository just for\n> deployer so any project developer could get it and use it wherever he wants?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/deployphp/deployer/issues/337#issuecomment-112344662.\n  Yes, for correct control in informer system.\n\nAs example: In my deploy system i rewrite informer for run any logic after fail tasks. And, if i have a two task with name `some_foo`, i can control runs with this identifier.\n  Add Writable Files and Add Chown on Writable Dirs Task to support vps based server that do not have acl\n @elfet : I edit the code directly from github editor so i don't test anything. Just make no error from travis\n I am using `deployer` with Slim framework and CakePHP framework.\nWhen project run, log files and cache file is created by `www-data`, but onwer of directory `logs`, `tmp` or `cache` is deploy-user. \nI was comment in #327 and i don't agree with this PR.\nI think `deployer` will support flow of framework and user can custom original recipe for special project or them.\n @oanhnn : This is a common task not a specific framework purpose. I just improve the behavior to dealing with vps that have not and can not set an acl\n I think this PR need to be separated. @ihsanudin can you do it?\n   @elfet moved. This pull request closed.\n  Hi,\n\nToday I tried execute same task 'deploy:permissions:fix' two times like:\n\n```\ntask('deploy', [\n    'deploy:prepare',\n    // ...\n    'deploy:permissions:fix',\n    // ...\n    'database:migrate',\n    'deploy:permissions:fix',\n    //...\n])->desc('Deploy your project');\n```\n\nBut `deploy:permissions:fix` was run only once. Is this intentional? If no, could you change your code in `\\Deployer\\Console\\TaskCommand::execute()` to:\n\n```\n$tasks = [];\nforeach ($this->deployer->scenarios->get($this->getName())->getTasks() as $taskName) {\n    $tasks[] = $this->deployer->tasks->get($taskName);\n}\n```\n\nThank you\n I will correct.\n So, fixed. BUT!!!\n\nThe task (in runtime) have a unique identifier for control many task with one name in group and execution context. The identifier create before run task for each task (`uniqueid`). And in Output we can see this identifier.\n\nAs example:\n\n``` bash\n$ ./bin/dep foo production\n\u2714 Executing task some #5579874ddfd9e\n\u2714 Executing task some_2 #5579874de003e\n\u2714 Executing task some #5579874de022c\n```\n\nThe `5579874ddfd9e`, `5579874de003e` and `5579874de022c` - is a identifiers of task.\n\nAnd, for control this identifiers in parallel executor, i adds storage `tasks_to_do_info` to `pure`. And, send the task info (id and name) (previously only send task name).\n\nI tested on series executor and parallel executor. All ok.\n   any news about this issue?\n Hi! I'm still don see any purpose for this =(. \nBut you can always override tasks. And create your own common recipe with this sudo stuff (and push it to GitHub to other can use it).\nI think we need keep common.php recipe simple ass possible. And this is complicate it.\n. \n  When lost connection during deploy, and i repeat deploy routine then the following errors occurs:\n\n``` sh\n rm: cannot remove /usr/share/nginx/html/yii2-comercial/releases/2015060410\n\n 0406/web/assets/7e1698fe/addon/fold/markdown-fold.js: Permission denied\n\n rm: cannot remove /usr/share/nginx/html/yii2-comercial/releases/2015060410\n\n 0406/web/assets/7e1698fe/addon/fold/brace-fold.js: Permission denied\n...\n```\n\ni think necessary to create the param `set('cleanup_use_sudo', true)`; \n\ni can make this PR.\n My server is `Debian GNU/Linux 8.0 (jessie)` and my deploy script is:\n\n``` php\nrequire 'recipe/composer.php';\n\nset('repository', 'git@github.com:mycompany/yii2-myrepos.git');\n\nserver('main', 'myserver.com.br')\n    ->env('deploy_path', '/usr/share/nginx/html/yii2-myrepos')\n    ->env('branch', '1.1.x')\n    ->stage('prod')\n    ->user('admin')\n    ->pemFile('~/.ssh/key.pem');\n```\n\nThis occurs when `rm` command does not was executed completely on `cleanup` task.\nIf use `sudo` the problem is solved\n Use sudo for this operation is risky ;)\nYou should correct configure permissions on you server.\n @ZhukV  The permissions are right, how i said, this occurrs when `rm` command fail\n Imho, The error **Permission denied** indicate of fail access...\n I believe there are no permission bigger than  chmod 777, and i used this (for test)\nhow i said, if occurs **ONLY** `rm` command fails and i try to repeat deploy routine.\n\nWho creates releases folder is the same user, then, Why this user desn't have permission?\n I found the problem.\nWho creates the `releases` folder is `admin` but who creates the `assets/*` is `www-data`.\nThis occurs because the application (yii2 framework) creates the folder content, but  on demand.\n\nIn this situations it's necessary to use `sudo`\n It will not work, because the subfolders into `assets` are created when a page request is executed\n @elfet :+1: \n\nAs solution (Apache): Create a group developer and add deployer user and apache user to this group.\nAs solution (Nginx + PHP-FPM): correct configure user for run phpfpm. It should equals for deployment user.\n I think, that, permission configuration, is relevant to server administrator.\nHe should know which permissions, will be used.\n This issue was closed but th PR continues opned. What was the decision?\n Can you say which PR? :)\n PR #330\n Please what was the decision? \n Can you put your users in same group? I think this is problem?\n Yes but i made pr #330 and it continues opened\n  Good day. Thanks for you library. \nAdded support timeout command execution. In my case, some command running more than 10 second and deploy is failing. \n Thanks, I will fix it.\n This pull request is closed by better pull request #415 \n  Make sure cache dir is writable after cache warmup. This helpul if you use not web server user to execute deploy\n in my deploy.php file, I did use the after function to handle this task but i think it would be better if it can be handled by default\n\nsince you use cache warmer on symfony, you need to make sure the directory under app/cache is writable and the problem is when you run cache warmer, you need to make sure the directory is writable also.\n No, you need to do it. Because before and after cache warming, you need to make sure the directory is writable\n @ZeeCoder you are right,\n\ni think the problem come from this function\n\n`https://github.com/deployphp/deployer/blob/master/recipe/common.php#L175`\n\nWe need to change mode (chmod) recursively  and run it as both task (the top line of function)\n We have a case:\n\n```\ndir_A\n |-- file_a1\n |-- flie_a2\n \\-- file_a3\n```\n\n| directory/file | owner | permission |\n| --- | --- | --- |\n| dirA | deploy_user | 777 |\n| file_a1 | deploy_user | 755 |\n| file_a2 | www_user | 755 |\n| file_a3 | www_user | 700 |\n\nwhen using command `chmod -R 777 dir_A` without `sudo`, you can have a problem.\n +1\n I think is better to use `chmod 777 -R` and add new task call `deploy:writable:files` as option.\n\nIt will be better instead add new task for this issue\n The problem is resolved so i will close this PR\n  Hi,\nI want to switch my projects on symfony from capyfony to deployer, but I run to problem with sudo command thing is on server there is no way that sudo will be available for deploy user, it's just not an option.\n\nSo when deployer setting permissions `sudo setfacl -R -m u:\"www-data\":rwX -m u:`whoami`:rwX app/cache app/logs`\n\nI get error because sudo can't be used, but this command is working perfectly fine on normal user, so why it's used? Can it be sudo forced off? During capyfony build there is no need for sudo.\n Well I'm stupid. I just copy `deploy:writable` task and change $sudo variable to '' and it's work like charm. Sorry for this.\n It is configurable: https://github.com/deployphp/deployer/blob/master/recipe/common.php#L15\n\nAdd below to your `deploy.php`\n\n```\nset('writable_use_sudo', false);\n```\n You're right. It is missing.\n  I have a data/cache folder with several folders and subfolders, and it would be nice if i could just add data/\\* to the `writable_dirs` options(with a -R param), instead of having to add each subfolder individually.\n It could easily be ahcieved through a custom task, but i still think it is something that a lot would use. What about checking if a param is array or string, if string, just chmod, if array then look for the keys:\n\n```\nset('writable_dirs', ['data/cache', ['dir' => 'data/*', 'params' => '-R'], 'another/single/dir']);\n```\n ok\n  I find that it would be useful to be able to call another task inside a task. \n\nMaybe some code can say this more clearly... I would like to be able to do something like\n\n```\ntask('subtask_1', function () {}):\ntask('subtask_2', function () {});\n\ntask ('task', function () {\n    if ($condition) {\n        task('subtask_1');\n    } else {\n        task('subtask_2');\n    }\n});\n```\n\nAt the moment this gives me an error because we I call `task` it expects two arguments. \n\nDo you think it would be interesting to have such a functionality? \n Thanks @elfet for your reply.\nAt the moment I have my code, with the `if` separating the two cases, all inside a single task.\nI would like to use the `if` to differentiate the first deploy, when there an no other releases, and the following deploys, when I can use a previous release to copy all the code to fasten the deploy, as it is discussed on [issue 206](https://github.com/deployphp/deployer/issues/206). Do you think this is a bad practice?\n Cool stuff! This will be nice to speed up the clone operation.\nI didn't try it, but I think that the result will be the same of a simple clone, so, for example, you would not get a copy of the vendor directory and so you would not solve the use case the was raised in the beginning of #206.\n @elfet I just realized that your idea of using the git `--dissociate` option for the cloning process is quite problematic, since it is available only in git version `2.3` and both Debian 8 and Ubuntu 15.04 are using git 2.1.4. I'm not sure if everybody id going to upgrade its git version to have this feature.\n @marcosh You can try having it another way - currently `dissociate/reference` is enabled only if Your git is new enough. Instead You can use `rsync:warmup`. Depending on Your settings it can copy vendors and others. Problem would only lie in the fact that cloned git copy is shalow, but You can actually (i think) do pull&ff on shallow clone.\n @johnny-bit correct me if I'm wrong, but I realized that your approach could have a drawback. Suppose that a deploy goes wrong, the release directory is created but no file is actually copied there. When you deploy then next time, `rsync:warmup` will have no file to copy. In particular the `git pull` command will not find the `.git` files and it will fail. With @elfet this will not happen because you're always doing a `git clone` and you're not assuming the presence of anything.\n Yes, that's right. It has this drawback. Plus, by default, rsync is set not\nto copy `.dir`, so You'd have to be smart about what You're doing.\n\nWith `rsync:warmup` + `git pull` I'd do same thing that I did for\nreference/dissociate: try. Then in case of failed pull, do normal clone.\nThen there's no drawbacks :D\n\nThe beauty of it is: if You do it smart then You either get same behaviour\nor advantage, no disadvantages.\n  check file by wrong flag in \"if\"\n  I'm getting this error when trying to run deployer.\n\nI installed deployer ^3.0 through composer in a laravel 5 project\n\nrunning PHP 5.6.8 or PHP 7.0.0-dev (did not test any other versions)\n Version v5.0.32 according to my composer.lock file.\n ``` php\n<?php\n\nrequire 'recipe/laravel.php';\n\nserver('prod', 'XXXX', 22)\n    ->user('ezra')\n    ->identityFile()\n    ->forwardAgent() // You can use identity key, ssh config, or username/password to auth on the server.\n    ->stage('production')\n    ->env('deploy_path', '/home/ezra/apps/'); // Define the base path to deploy your project to.\n\n// Specify the repository from which to download your project's code.\n// The server needs to have git installed for this to work.\n// If you're not using a forward agent, then the server has to be able to clone\n// your project from this repository.\nset('repository', 'XXXXXX');\n```\n I do not, I installed deployer with composer into my vendors directory and called deployer using\n\n```\n./vendor/bin/dep deploy production\n```\n\nI guess that composer is automatically loading laravel's helper file before your helper file and because they both define a global get() function they clash.\n I can and that works, but wanted to let you know of the bug anyway.\nOp 1 jun. 2015 15:13 schreef \"Anton Medvedev\" notifications@github.com:\n\n> Yeah, seems like that. Can you use phar?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/deployphp/deployer/issues/316#issuecomment-107450556.\n Are there any plans to make Deployer L5 and Lumen compatible?\n Don't worry. It is on going. See #356 \n\nAnd you can deploy now if you use `deployer.phar`.\n +1\n We do need the deployer namespace. I really want to use composer, since it is an dependency of my project, but when using Laravel 5.x, I have to use the .phar file, which is annoying me.\n\nThis means that all Laravel users cannot use the composer dependency, but have to use the phar file.\n\nI hope this is going to be fixed soon.\n +1\n +1\n    About #291 , I tried to use '\\r' to move cursor back to line head,and fix it on ubuntu. however it need test for mac.\n What about windows?\n  I'm using deployer to deploy to dev-environment too, and i need dev-dependencies from composer for that. \nMy idea is to allow for a setting, something like env(\"composer.dev\", true); which would make the composer task remove the --no-dev value. \"composer.dev\" would be false by default so there is no BC break.\n\nWhat do you think? Do you want a PR for this?\n That's a good idea too. Want me to PR that?\n ref #287\n Nice! thanks.\n  It's even in the documentation, but it seems to do nothing right now.\n    Based on https://github.com/deployphp/deployer/issues/305#issuecomment-106450979\n\nWhen the remote server is not set up properly to be able to clone the repo, there could be a smarter error message.\n\nSo instead of just dumping\n`Host key verification failed.`\n\nIt could say something like\n\n```\nHost key verification failed. It seems you forgot to add the repository's host's\nfingerprint as a 'known host'. Run `ssh -T git@bitbucket.org` on the remote\nserver to add it to the list of known hosts, then try deploying again.\n```\n\nThis could avoid the creation of new issues in this repo, when the developer using Deployer doesn't realise that it's not the tool that's wrong, but rather the remote server configuration.\n\n**Does anyone know whether this could be implemented?**\n\nOf course this could lead us to even more error-checking regarding the remote ssh key which could have different error messages:\n- Is an ssh key in use?\n- If it is, then is the git repo's host added to the known hosts?\n- If it still errors for some reason, output the default `Host key verification failed.` error message.\n\nThis could help developers instantly locate the problem.\n\n@elfet I propose a new issue label called \"DX\" which would focus on Developer Experience, and this issue could be labeled as such.\n\nFor usage of the DX label, see: [Symfony DX](https://github.com/symfony/symfony/labels/DX)\n :+1: \n  I added phpunit testing before release.\nAnd if testing fails, I get `[RuntimeException]` and deployer stops, so it won't be released.\n\nBut there is still a failed release folder in `releases`. So if I deploy new release and rollback, the failed release folder will be released. To avoid it, we have to remove failed release folder manually.\n\nIs there any good solutions?\n Before `deploy:release`, there is no source code.\n\nWe have to clone git repository twice, for testing and for releasing.\nIt is not big problem, but only once is better.\n `cleanup` removes older releases. In this case, failed release is latest.\n Thank you!\n\nThis works fine.\n\n``` php\ntask('phpunit', function () {\n    try {\n        run(\"cd {{release_path}} && sh phpunit.sh\");\n    } catch (\\RuntimeException $e) {\n        // test fails\n        run(\"cd {{deploy_path}} && if [ ! -d releases-failed ]; then mkdir releases-failed; fi\");\n        run(\"mv {{release_path}} {{deploy_path}}/releases-failed\");\n        run(\"cd {{deploy_path}} && if [ -h release ]; then rm release; fi\");\n\n        throw $e;\n    }\n})->desc('Run PHPUnit');\n```\n  How do I provide the credentails for a GIT repo that's on Bitbucket? This is what my deploy.php looks like.\n\n``` php\n<?php\n// All Deployer recipes are based on `recipe/common.php`.\nrequire 'recipe/laravel.php';\n\n// Define a server for deployment.\n// Let's name it \"prod\" and use port 22.\nserver('dev-server-1', 'dev', 22)\n    ->user('root')\n    ->forwardAgent()\n    ->stage('dev')\n    ->env('deploy_path', '/var/www/my-deploy-dir'); // Define the base path to deploy your project to.\n\n// Specify the repository from which to download your project's code.\n// The server needs to have git installed for this to work.\n// If you're not using a forward agent, then the server has to be able clone\n// your project from this repository.\nset('repository', 'git@bitbucket.org:someuser/somerepo.git');\n\n?>\n```\n\nWhe I run dep deploy dev -v, I get the following trace:\n\n```\n\u27a4 E\u27a4ecuting task deploy:prepare\n\u2937 on [dev-server-1]\n\u2936 done on [dev-server-1]\n\u2714 Ok\n\u27a4 E\u27a4ecuting task deploy:release\n\u2937 on [dev-server-1]\n\u2936 done on [dev-server-1]\n\u2714 Ok\n\u27a4 E\u27a4ecuting task deploy:update_code\n\u2937 on [dev-server-1]\n\n\n\n  [RuntimeException]                          \n  Host key verification failed.               \n  fatal: The remote end hung up unexpectedly  \n\n\n\nException trace:\n () at phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:114\n Deployer\\Server\\Remote\\PhpSecLib->run() at phar:///usr/local/bin/dep/src/functions.php:289\n run() at phar:///usr/local/bin/dep/recipe/common.php:129\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:66\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:40\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:116\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:257\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:91\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:62\n require() at /usr/local/bin/dep:4\n\n\ndeploy [-p|--parallel]\n```\n\nThanks.\n You should add public key from server to Deploy keys to bitbucket.\n\n1 Copy public key:\n\n``` sh\ncat ~/.ssh/id_rsa.pub\n```\n\n1.1 If not exist, then create:\n\n``` sh\nssh-keygen\n```\n\n2 Paste this key in Bitbucket repository deploy keys.\n\n![screenshot at 28 15-45-23](https://cloud.githubusercontent.com/assets/2256109/7860313/96aaaaf0-0550-11e5-91f2-197496215c3c.png)\n\nP.S. Before deploy, clone repository (for approve host):\n\n``` sh\ncd /tmp\ngit clone .....\n```\n @ZhukV, thanks for your reponse. But I already have the Deployment key configured in bitbucket. Any other idea?\nThanks.\n Try reset file .know_hosts\n\n``` sh\nrm ~/.ssh/known_hosts\n```\n\nand clone repository on server.\n I was able to successfully clone the bitbucket repo on the server. But, I saw the usual warning\n`The authenticity of host 'bitbucket.org (131.103.20.168)' can't be established.\nRSA key fingerprint is 97:8c:1b:f2:6f:14:6b:5c:3b:ec:aa:46:46:74:7c:40.\nAre you sure you want to continue connecting (yes/no)?`\nSo, After adding bitbucket.org to the list of know_hosts, \"Deployer\" now runs successfully.\nSo, we should probably add to the doc that the fingerprint server on which the repository resides should be in the know_hosts list of the server on which you are deploying.\nThanks everyone!\n The following was added to the docs not so long ago:\n\n``` php\n// Specify the repository from which to download your project's code.\n// The server needs to have git installed for this to work.\n// If you're not using a forward agent, then the server has to be able clone\n// your project from this repository.\nset('repository', 'git@github.com:org/app.git');\n```\n\nAnd I just noticed a typo in it: https://github.com/deployphp/docs/pull/25 xD\nMy point is: I think the doc now covers this part.\n\nA more interesting question would be: is it possible to detect this specific error during deployment?\nI encountered this issue numerous times, and it would be great to have a friendly error message like: \n\n```\nHost key verification failed. It seems you forgot to add the repository's host's\nfingerprint as a 'known host'. Run `ssh -T git@bitbucket.org` on the remote\nserver to add it to the list of known hosts, then try deploying again.\n```\n\nHere \"git@bitbucket.org\" could be extracted from the server configuration data.\n Indeed, such a friendly message would be a nice addition.\nGreat tool. Makes life much easier.\nThanks again, everybody!\n @elfet Do you think this idea about the error message could be implemented?\nHonestly I just can judge whether I should open an issue about it or not. :P\n *can't\n It's not like it's \"wrong\".\n\nIf you read my comment carefully, all I'm saying is that it could be more sophisticated by detecting this specific error and having a slightly more verbose error message for it.\n\nBut since I have no idea if something like this could be implemented or not, I thought I'd first ask you whether this worth opening a new issue or not.\n\nThis could be labeled as \"DX\" like in [Symfony](https://github.com/symfony/symfony/labels/DX).\nDeveloper Experience is very important imho.\n I too thought that ->forwardAgent() makes the ssh-agent work as it supposed to work and forwarding my SSH keys to the ssh session. This would make my life easier (Capistrano can do it) because then I don't have to create a deployment key in BitBucket, the server does not have to have an RSA keypair, eg less maintenance cost.\n  In this pull request:\n- Add `.env` into `shared_files`, to support Laravel 5.\n- Add test class for laravel recipe\n\n@elfet , you can don't merge this pull request and implement it yourself, because this test will take a long time. Sorry!\n Laravel 5 using `.env` file to save environment variables for applicaion configures, like `app/config/parameters.yml` in Symfony 2.\nIn this pull request:\n- Add .env into shared_files, to support Laravel 5.\n- Add test class for laravel recipe (but test class is not good and i was remove it)\n Dear @ZeeCoder \n1. Laravel 5 is current stable version of laravel framework. Deployer is better if it support both laravel 5 and laravel 4. Laravel 5 should be default.\n2. With laravel 4 case, file `.env` is useless, but it isn't affect with your app.\n3. With this hash, user don't need custom recipe, Both laravel 4 and 5 are supported.\n\n> Note: symfony 3 isn't current stable version.\n  Hello,\n\nI saw from the examples page a task to restart php5-fpm:\n\n``` php\ntask('reload:php-fpm', function () {\n    run('sudo /usr/sbin/service php5-fpm reload');\n});\n\nafter('deploy', 'reload:php-fpm');\nafter('rollback', 'reload:php-fpm');\n```\n\nI need to use this to refresh the php5 paths to the new current symlinked folder.\n\nThe problem I have though, is that running sudo requires entering the password, which when running from the deploy script can't happen, I'm getting this:\n\n```\nsudo: no tty present and no askpass program specified \n```\n\nI did add my user to the sudoers file like so:\n\n```\nmyUser    ALL=(ALL:ALL) NOPASSWD: ALL\n```\n\nThough this still gives the same error.\n\nIs there some sort of trick to make this work ?\n\nThank you!\n This is a problem in rights for access sudo.\nPlease check you /etc/sudoers file!\n\nAs example (my sudoers):\n\n```\ntaleforchild ALL=NOPASSWD:/bin/systemctl restart php-fpm.service\n```\n\nWhere:\n**taleforchild** - user in operation system\nWorking in CentOS 7.0\n Yes, it's something related to sudo rights, though I don't get what, hence my post here.\n\nUsing `myUser    ALL=(ALL:ALL) NOPASSWD: ALL` should have done the trick... \n\nI tried `forge ALL=NOPASSWD:/usr/sbin/service php5-fpm reload` , but in CLI this returns: \n\n``` bash\nservice php5-fpm reload\nreload: Rejected send message, 1 matched rules; type=\"method_call\", sender=\":1.305\" (uid=1000 pid=8681 comm=\"reload php5-fpm \") interface=\"com.ubuntu.Upstart0_6.Instance\" member=\"Reload\" error name=\"(unset)\" requested_reply=\"0\" destination=\"com.ubuntu.Upstart\" (uid=0 pid=1 comm=\"/sbin/init \")\n```\n If you use Ubuntu OS:\n\nCommand for restart PHP-FMP service:\n\n``` sh\n/etc/init.d/php-fpm restart\n```\n\nAnd, you should add rights for run this command without sudo password in you system.\n\nDeployer task:\n\n``` php\ntask('reload:php-fpm', function () {\n    run('sudo /etc/init.d/php-fpm restart'); // Using SysV Init scripts\n});\n```\n\nAnd you sudoers rule:\n\n```\nyou_user_name ALL=NOPASSWD: /etc/init.d/php-fpm restart\n```\n\nIf you use another operation system, please write os and version.\n\nP.S. The wrapper scripts (as example `service`) redirecting call to other executable files, then you must write a real command in `/etc/sudoers`\n Hm I can reload php5-fpm using either of those:\n\n```\nservice php5-fpm reload\n# or\n/etc/init.d/php5-fpm reload\n# or \n/usr/sbin/service php5-fpm reload\n```\n\nI tried it with your setup, logged out of the VPS to be sure, then ran `sudo /etc/init.d/php-fpm restart`, still getting asked for password. :disappointed: \n\nMy visudo file:\n\n```\nforge ALL=NOPASSWD: /etc/init.d/php5-fpm restart\n```\n\nEdit: I'm on ubuntu, indeed.\n So, the real script for reload php-fpm `/etc/init.d/php-fpm`.\nFor run this script, you should have a superadmin rights (sudo).\nIf asked password (if you called from another user), then the rule of sudoers not working.\n\nPlease try (user for available restart without password - `new_user`, as example):\n\n1 Login to system as root. (create a user, if not exists. Please check in `/etc/passwd`)\n2 Change `/etc/sudoers`. Adds:\n\n```\nnew_user ALL=NOPASSWD: /etc/init.d/php-fpm restart\n```\n\n3 Login to system as `new_user` (NOT `su`, can open new console).\n4 Try run:\n\n``` sh\nsudo /etc/init.d/php-fpm restart\n```\n\nShould work. \n\n**UPD**: The latest command (p4), should not ask the password\n That's what I did, it doesn't work. I don't understand why... :/\nAlso the script to reload php-fpm is not `/etc/init.d/php-fpm` but `/etc/init.d/php5-fpm`.\n Ok, replace `/etc/init.d/php-fpm` to `/etc/init.d/php5-fpm` in sudoers\n I did, of course, but that still makes me ask for sudo password when running the command.\n hm... interesting... in another system (debian, centos) this is a good work. \nCan file `/etc/sudoers` not reading...\n When I `cat /etc/sudoers` I do see my changes in it, so it was written correctly.\n\nIt is very strange indeed. :(\n Please try:\n\n```\nyou_user_name ALL=NOPASSWD: /etc/init.d/php5-fpm\n                           ^\n                           | no space\n```\n\nmy `sudoers` file (ubuntu 14.04)\n\n```\ndeploy_user ALL=(ALL) NOPASSWD:/etc/init.d/php5-fpm *, /etc/init.d/nginx *\n```\n Tried without a space:\n\n```\nforge ALL=NOPASSWD:/etc/init.d/php5-fpm restart\n```\n\nAnd running `sudo /etc/init.d/php5-fpm restart` as the `forge` user, still asks me for a password.\nRunning `/etc/init.d/php5-fpm restart` without sudo, doesn't though. But when I commented the line in the sudoers file, it still doesn't ask root password for it.. so I don't know...\n\nEdit:\n\nI changed the task to:\n\n``` php\ntask('reload:php-fpm', function () {\n    run('/etc/init.d/php5-fpm restart');\n});\n\n#with:\nafter('deploy', 'reload:php-fpm');\n```\n\nThough I get: `RuntimeException`, when it get's to the reload task. Nothing more in the logs file... :/\n Please try run deploy with `-vvv` option and show out to here. @nWidart \n This is the error with stacktrace, when running `-vvv`:\n\n```\n\u27a4 Executing task reload:php-fpm\n\u2937 on [staging]\nRun: /etc/init.d/php5-fpm restart\n\n\n\n  [RuntimeException]  \n\n\n\nException trace:\n () at phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:114\n Deployer\\Server\\Remote\\PhpSecLib->run() at phar:///usr/local/bin/dep/src/functions.php:289\n run() at /Users/nicolaswidart/Sites/Asguard/presentation-site/deploy.php:29\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:66\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:40\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:116\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:257\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:91\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:62\n require() at /usr/local/bin/dep:4\n\n```\n @nWidart restarting php-fpm can close connections and/or connection attempts (tcp syn).\nYou can use [cachetool](https://github.com/gordalina/cachetool) to clear opcode cache (apc or opcache). Also, there's a deployer recipe for it [deployphp/recipes](https://github.com/deployphp/recipes/blob/master/docs/cachetool.md)\n Oh ok, thanks.\n\nI've installed deployer and this recipes repository with composer , globally, do I include the file like so, or ?:\n\n``` php\nrequire 'recipes/recipes/cachetool.php';\n```\n\nOr is it recommended to install on a per project basis ?\n\nEdit:\nRequiring `require 'recipes/recipes/cachetool.php';` throws not found exception.\n\nThough `recipe/common.php` can.\n\nI've tried relative to the `deployer` package, `require '../../deployphp/recipes/recipes/cachetool.php';`, still nothing.\n You only need to require the recipes in composer, usually you won't need\ndeployer as a dependency because you use it as an app.\nAnd yes, it should be per project.\nHope it solves your problem.\nOn qua, 27/05/2015 at 21:50 Nicolas Widart notifications@github.com wrote:\n\n> Oh ok, thanks.\n> \n> I've installed deployer and this recipes repository with composer ,\n> globally, do I include the file like so, or ?:\n> \n> require 'recipes/recipes/cachetool.php';\n> \n> Or is it recommended to install on a per project basis ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/deployphp/deployer/issues/302#issuecomment-106040911.\n Still not working, no.\n\nI tried the cache tool, but that throws: `Object`cachetool`does not exist in Collection.`\n\nI required the package in the project and required: `vendor/deployphp/recipes/recipes/cachetool.php`.\n\nEdit: this is the stacktrace:\n\n```\nException trace:\n () at /Users/nicolaswidart/.composer/vendor/deployer/deployer/src/Collection/Collection.php:27\n Deployer\\Collection\\Collection->get() at /Users/nicolaswidart/.composer/vendor/deployer/deployer/src/functions.php:420\n get() at /Users/nicolaswidart/Sites/Asguard/presentation-site/deploy.php:64\n {closure}() at n/a:n/a\n call_user_func() at /Users/nicolaswidart/.composer/vendor/deployer/deployer/src/Task/Task.php:66\n Deployer\\Task\\Task->run() at /Users/nicolaswidart/.composer/vendor/deployer/deployer/src/Executor/SeriesExecutor.php:40\n Deployer\\Executor\\SeriesExecutor->run() at /Users/nicolaswidart/.composer/vendor/deployer/deployer/src/Console/TaskCommand.php:116\n Deployer\\Console\\TaskCommand->execute() at /Users/nicolaswidart/.composer/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:257\n Symfony\\Component\\Console\\Command\\Command->run() at /Users/nicolaswidart/.composer/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n Symfony\\Component\\Console\\Application->doRunCommand() at /Users/nicolaswidart/.composer/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at /Users/nicolaswidart/.composer/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at /Users/nicolaswidart/.composer/vendor/deployer/deployer/src/Deployer.php:91\n Deployer\\Deployer->run() at /Users/nicolaswidart/.composer/vendor/deployer/deployer/bin/dep:63\n\n\ndeploy [-p|--parallel]\n\n```\n My sudoer configure is\n\n```\nlynn ALL=(ALL) NOPASSWD:/usr/bin/service php5-fpm restart\n```\n\nusing `sudo service php5-fpm restart` works for me.\n If u getting error \"sorry, you must have a tty to run sudo\", just comment this line `Defaults    requiretty` in sudoers file. Work for me.\n  My task in deploy.php:\n\n``` php\nrequire 'recipe/common.php';\n\n// server(...);\n\ntask('deploy:start', function(){\n\n    \\Deployer\\Task\\Context::get()->getServer()->connect();\n\n    run(\"cd {{deploy_path}}\");\n\n})->desc('Testing...');\n```\n\nError in the console by calling: dep deploy:start -vvv production\n\n```\n\u27a4 E\u27a4ecuting task deploy:start\n\u2937 on [prod]\n\nRun: cd /var/www/html/xxxxxxxxx.com.br/web && cd /var/www/html/xxxxxxxxx.com.br/web\n> reset: standard error: Inappropriate ioctl for device\n> \n> \n\u2936 done on [prod]\n\u2714 Ok\n```\n\nIncluding deploys applications laravel, etc.\nAll commands `run();` return the same error.\n I had tried this, but the error insists on continuing.\nI believe they are the permissions of my server , not a problem deployer.\nAnyway thanks for your help, will continue trying to solve.\n  1. Add AskPasswordGetter (ask password before connecting)\n2. Add CallabackPasswordGetter (gets password with call callbacks, Closures)\n\nFor more information, please see #298 \n Ok. I not see `composer.json`. \n\n``` json\n\"symfony/console\": \"~2.6\"\n```\n\nAnd i checks the `QuestionHelper` class exists for indicate SymfonyConsole of > 2.5 version.\n I think PhpSecLib used to ask for password if it was empty, is that correct?\n @Max-Might Yes, because password prompt before connection (in configuraiton `Configuration::getPassword`). The this feature will be worked in any 'adapters' for connection.\n\nExample for ask password:\n\n``` php\nserver('production', 'domain.com')\n    ->user('user')\n    ->password() // <-- Default null (If null, the AskPasswordGetter will be created automatically)\n    ->stage('production')\n    ->env('deploy_path', '/var/www/domain.com');\n```\n Will this work for passphrase in identityFile function?\n @DirtyB, no, but this easy add.\n ok.\n Adds.\n\nAttention: by default, passphrase - '' (empty string). For use password getter automatically, you must set `null` for pass phrase.\n\n``` php\n->identityFile(null, null, null)\n```\n\nP.S. Can set the _null_ value for `$passPhrase` as default?\n ping\n :+1: No problem!\n  How i can configure stage with prompt password to server before connect?\n\nThank.\n Ok. I now write codes for ask password before connecting. 1-2 hour(s) and i create pull request.\n Now, with use PasswordGetter system you can customize logic for gets password.\nIn get password from `Configuration`, first checks `PasswordGetterInterface` instances, and if this it, then calls `getPassword($host, $user);`\n\nAs example, with use base callable (`CallablePasswordGetter`):\n\n``` php\nuse Deployer\\Server\\Password\\CallablePasswordGetter;\n\nserver('production', 'domain.com')\n    ->user('user')\n    ->password(new CallablePasswordGetter(function ($host, $user){\n        return 'some_password';\n    }))\n    ->stage('production')\n    ->env('deploy_path', '/var/www/domain.com');\n```\n\nAnd with ask password (`AskPasswordGetter`):\n\n``` php\nuse Deployer\\Server\\Password\\AskPasswordGetter;\n\nserver('production', 'domain.com')\n    ->user('user')\n    ->password(AskPasswordGetter::createLazyGetter())\n    ->stage('production')\n    ->env('deploy_path', '/var/www/domain.com');\n```\n\n**Attention:** in configure system, you must use lazy getter, because we should have a access to context for get ouput and input interfaces.\n\nAnd, if send `null` password, then `AskPasswordGetter` will be created automatically.\n\n``` php\nserver('production', 'domain.com')\n    ->user('user')\n    ->password()\n    ->stage('production')\n    ->env('deploy_path', '/var/www/domain.com');\n```\n\n**Attention:** this method not working in parallel... I used this feature only on `SeriesExecutor`.\n\nThank.\n This feature was released in #299 \n  I install the Deployer to `/usr/local/bin/dep`, and create a deploy.php in root directory with content:\n\n``` php\nserver('production', 'foo-bar.com', 22)\n    ->user('foobar')\n    ->forwardAgent()\n    ->stage('production')\n    ->env('deploy_path', '/var/www/foo-bar.com');\n\nset('repository', 'git@bitbucket.org:foo/bar.git');\n```\n\nBut, if i run `dep deploy production` i see a error:\n\n```\n  [InvalidArgumentException]        \n  Command \"deploy\" is not defined.\n```\n\nWhy? Thank.\n Thank. All ok.\n But I have added recipe file.\nHere it is : \n\n```\nrequire 'vendor/deployer/deployer/recipe/laravel.php';\n\nserver('prod', '192.112.153.124', 22)\n    ->user('ubuntu')\n    ->password('pass')\n    ->stage('production')\n    ->env('deploy_path', '/var/www/html'); // Define the base path to deploy your project to.\n\nset('svnrepo', 'https://192.112.1.156/svn/dev-autodeployment/trunk/autodeploy');\nset('svnuser', 'user');\nset('svnpass', 'pass@123');\n\ntask('deploy:update_code', function () {\n    $svn = 'C:/Program Files/TortoiseSVN/bin';\n    $repository = trim(get('svnrepo'));\n    $user = trim(get('svnuser'));\n    $pass = trim(get('svnpass'));\n    run(\"$svn export --force --username $user --password $pass $repository {{release_path}} 2>&1\");\n})->desc('Updating code');\n```\n  Hi,\n\ntoday I tried to run Deployer in parallel mode but It just hung forever. After some debug I found that workers could not be created. Deployer starts workers with command:\n\n```\n$ php phar:///home/piotrek/Vhosts/deployer/deployer.phar/bin/dep worker --master='127.0.0.1:3333' --server='dev.1' dev --tag -vvv \n```\n\nAnd I get error when issuing same command in console:\n\n```\n$ php phar:///home/piotrek/Vhosts/deployer/deployer.phar/bin/dep worker --master='127.0.0.1:3333' --server='dev.1' dev --tag -vvv\nCould not open input file: phar:///home/piotrek/Vhosts/deployer/deployer.phar/bin/dep\n```\n\nI tried:\n\n```\n$ php phar:///home/piotrek/Vhosts/deployer/deployer.phar/bin/dep\nCould not open input file: phar:///home/piotrek/Vhosts/deployer/deployer.phar/bin/dep\n\n$ cd /home/piotrek/Vhosts/deployer/\n$ php phar://deployer.phar worker --master='127.0.0.1:3333' --server='dev.1' dev --tag -vvv\nCould not open input file: phar://deployer.phar\n```\n\nAnd this works:\n\n```\n $ php -r \"echo file_get_contents('phar:///home/piotrek/Vhosts/deployer/deployer.phar/bin/dep') , PHP_EOL;\"\n.......\n```\n\nThis one also works\n\n```\n$ cd /home/piotrek/Vhosts/deployer/\n$ php deployer.phar worker --master='127.0.0.1:3333' --server='dev.1' dev --tag -vvv\n```\n\nWhat can be wrong? Could you change code a little so it won't use phar:// wrapper or some option to change it?\n\nMy PHP version:\n\n```\n    PHP 5.5.9-1ubuntu4.9 (cli) (built: Apr 17 2015 11:44:57) \nCopyright (c) 1997-2014 The PHP Group\nZend Engine v2.5.0, Copyright (c) 1998-2014 Zend Technologies\n    with Zend OPcache v7.0.3, Copyright (c) 1999-2014, by Zend Technologies\n    with Xdebug v2.2.3, Copyright (c) 2002-2013, by Derick Rethans\n```\n\nPHP config:\n\n```\n$ php -i | grep phar\nRegistered PHP Streams => https, ftps, compress.zlib, compress.bzip2, php, file, glob, data, http, ftp, phar, zip\nPhar-based phar archives => enabled\nTar-based phar archives => enabled\nZIP-based phar archives => enabled\nphar.cache_list => no value => no value\nphar.readonly => On => On\nphar.require_hash => On => On\n```\n\nMy OS: Linux Mint 17\n\nThank you for help\n I think permissions are correct:\n\n```\n$ ls -la deployer.phar \n-rwxr-xr-x 1 piotrek piotrek 2,5M maj 25 04:50 deployer.phar\n$ id\nuid=1000(piotrek) gid=1000(piotrek) groups=1000(piotrek),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),108(lpadmin),110(sambashare)\n```\n  Hello.\n\nI have downloaded the latest release from the website and I am trying to upload files to the server.\nThe procedure goes like normal, there are no errors on the screen but there are no files on the server either.\nThis recipe worked with the 2.x version of deployer. Maybe there have been some changes to PhpSecLib?\n This is the output from the upload-files task (I overrided it, it is not from the common recipe).\nThere is no error message.\n\n```\n\u27a4 E\u27a4ecuting task deploy:upload-files\n\u2937 on [staging]\nRun: ls /var/www/staging/releases\n> 20150514153014\n> 20150515104849\n> 20150515110247\n> 20150515165453\n> 20150520101732\n> 20150521102533\n> 20150521123431\n> 20150522101007\n> 20150522110908\n> 20150522174607\n> 20150525145924\n> \nUpload file composer.json to release/composer.json\nUpload file composer.lock to release/composer.lock\nUpload from public to release/public\n```\n @elfet : I had problem with upload function, too,\nMentioned here: https://github.com/deployphp/deployer/commit/4f16be0a982840e351a4a8621504c85e6f08b784\n Just tested with the reverted commit. It still does not upload anything to the server.\n This is how I am uploading:\n\n```\nupload('composer.json', 'release/composer.json');\n```\n\nAfter I changed it to this it worked:\n\n```\nupload('composer.json', '/var/www/website/release/composer.json');\n```\n\nIn 2.x the second parameter used to be relative to the {{deploy_path}} of the server.\nNow we have to specify the full path?\n\nPS: it does not seem to be related to the strreplace windows fix you reverted.\n So here is what I came up with:\n\n```\n$path = env('deploy_path');\nupload('composer.json', $path . '/release/composer.json');\n```\n\nI use `env('deploy_path')` so it uses the deploy path of the server we are connected to.\nThis is so because we can use the same task on different servers with different deploy paths.\n  As discussed in pull request #282.\n The problem seems to be in symfony/console.\nI have implemented the progress bar as per the docs:\nhttp://symfony.com/doc/current/components/console/helpers/progressbar.html\n\nThe error is:\n\n```\nThere was 1 error:\n\n1) Deployer\\FunctionsTest::testUpload\nArgument 1 passed to Symfony\\Component\\Console\\Helper\\Helper::strlenWithoutDecoration() must implement interface Symfony\\Component\\Console\\Formatter\\OutputFormatterInterface, null given, called in /home/koce/Projects/deployer/vendor/symfony/console/Symfony/Component/Console/Helper/ProgressBar.php on line 545 and defined\n```\n Yes but I can't find where the problem is :(\nI have implemented the progress bar as per the docs.\nI get the output stream from deployer and pass it to the progress bar.\nThe error is in the symfony code.\n Yes, this error happens only when we run the tests.\nIs this how we create the output stream for the test procedure?\n\nhttps://github.com/deployphp/deployer/blob/master/test/recipe/Helper/RecipeTester.php#L50\n So, this issue have a next problems:\n1. The ProgressBar should be configurable.\n\nAs example:\n\n``` php\nupload('/tmp/temporary.files', '/var/www/domain.com/tmp/temporary.files', true);\n```\n\nThe third parameter indicated for use ProgressBar.\n1. How this work in parallel?\n What about parallel?\n Looks like this needs rebasing.\n Please, rebase.\n  I wanted to contribute to the documentation about global variables, since there's almost nothing about them.\n\nBut then I realized, that even I don't really know that much, so here are some questions:\n- What is the difference between environment and global variables?\n- When should I use which?\n @elfet that sounds great. I've been struggling with sharing variables from a sanity-checking task in a parallel deployment. Currently I'm listing out the servers by role that the deploy would affect, and confirming branch/tag. Unfortunately I can't keep all the logic there because that task is isolated from the other workers.\n  ![screenshot from 2015-05-25 01 18 15](https://cloud.githubusercontent.com/assets/3679506/7790132/f9bef79a-027b-11e5-8532-c7a462e0a49e.png)\n\nIs this intentional?\n\nI think that the icons should appear before the tasks description after a task finishes, and not in the place of the letter \"x\" in \"Executing\".\n I have no idea, sorry. :/\n I can confirm it works perfectly on Mac:\n\n![screen shot 2015-05-28 at 13 54 54](https://cloud.githubusercontent.com/assets/3679506/7859442/408b25a0-0541-11e5-9663-e47c72c4c325.png)\n Hi, I just debug about this problem , it is about ascii cursor control char. based wiki:https://en.wikipedia.org/wiki/ANSI_escape_code  I found 2 way to fix this on ubuntu(no mac for test).\n'\u2714' will have 2 chars position,  so I have add \"\\033[3D\"  (means move cursor left 3 char). or  just add \"\\r\" to go back to  line start position.\n\n``` php\nDeployer\\Console\\Output\\OutputWatcher line 42\n$this->output->write(\"\\033[k\\033[1A\\033[3D\u27a4\\n\", false, $type); \nor\n$this->output->write(\"\\033[k\\033[1A\\r\u27a4\\n\", false, $type);\n\nDeployer\\Executor\\Informer line 52\n$this->output->write(\"\\033[k\\033[1A\\033[3D<info>\u2714</info>\\n\");\nor\n$this->output->write(\"\\033[k\\033[1A\\r<info>\u2714</info>\\n\");\n```\n\nany one can help to test on mac ?\n excellent :)\n    This project has many pull requests. I think it would be better if contributor squash multiple intermediate commits (while developing) before create pull request. To be best, one pull request only has one commit.\n I do agree with the one PR/feature mentality.\nI think squashing the commits should not be mandatory.\nWhether it's is necessary should be decided based on the particular PR itself I think.\n\nI'm open-minded about the issue though.\n  This pull request is fixing bug of pull request #276 .\n\n> Note: This code using \n> \n> ``` php\n> if($len < $length && '.' === $name[$len] && 0 === strpos($name, $protectedName)) {\n> ```\n> \n> it's performance better than \n> \n> ``` php\n> if(0 === strpos($name, $protectedName . '.')) {\n> ```\n  I use in my application, Is there any way for run this tests before deploy?\n\nCurrently, i run manually this tests with following script\n\n``` php\n$app = new Application('Codeception', Codecept::VERSION);\n$app->setAutoExit(false);\n$app->add(new Build('build'));\n$app->add(new Run('run'));\n$app->run(new ArrayInput( array('build') ));\n\n$test = (isset($opts['t'])) ? $opts['t'] : '';\n$coverage = (isset($opts['c'])) ? ' --coverage-html --coverage-xml' : '';\n\n$app->run(new StringInput( 'run unit ' . $test . ' ' . $coverage) );\n```\n Another problem is that composer execute with param `--no-dev`\n\nhttps://github.com/deployphp/deployer/blob/master/recipe/common.php#L235\n @leandrogehlen , I think you can override this task for your case.\nAdd this code to `deploy.php` file, after line `require 'recipe/common.php';`\n\n``` php\n/**\n * Installing vendors tasks.\n */\ntask('deploy:vendors', function () {\n    if (commandExist('composer')) {\n        $composer = 'composer';\n    } else {\n        run(\"cd {{release_path}} && curl -sS https://getcomposer.org/installer | php\");\n        $composer = 'php composer.phar';\n    }\n    run(\"cd {{release_path}} && {{env_vars}} $composer install --dev --verbose --prefer-dist --optimize-autoloader --no-progress --no-interaction\");\n})->desc('Installing vendors');\n```\n i made what @oanhnn suggested,\n\nI think it could be created stage dependencies.\nThis means, the production stage occurs after the test stage, but if test fail does not will run production\n\nThe problem of the tests run locally, that is, will not be replicated deploy routine.\nthus, it is necessary, update sources and composer manually\n I added `deploy:vendors-dev` task. Why don't you add a task like this to `common.php`?\n\n``` php\ntask('deploy:vendors-dev', function () {\n    if (commandExist('composer')) {\n        $composer = 'composer';\n    } else {\n        run(\"cd {{release_path}} && curl -sS https://getcomposer.org/installer | php\");\n        $composer = 'php composer.phar';\n    }\n\n    run(\"cd {{release_path}} && $composer install --verbose --prefer-dist --no-progress --no-interaction\");\n})->desc('Installing vendors including require-dev');\n```\n @kenjis  i think that should be used is a param like `set('composer_args', '--no-dev');`\n@elfet what do you think?\n @lasselehtinen We run the task (`composer install`) twice. One is for testing, the other is for deployment. So, I think two tasks, `deploy:vendors-dev` and `deploy:vendors` are easy to understand.\n\nIs it possible to use `set()`?\n  Hello,\n\nI'm trying to swap the database per release too.\nBy doing to the following steps.\n1. Export old database\n2. Create new database (suffixing with latest release int)\n3. Import old database into newly created one\n\nStep 1 and 2 or ok. Then on step 3:\nrun(\"mysql -pmypwd -e '$newDatabaseName < {{deploy_path}}/shared/$oldDatabaseName.sql;'\");\n\nThrows: \n\n```\n ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'asgard_staging_20150523132714 < \"/home/forge/staging.asgardcms.com/shared/asgard' at line 1`\n```\n\nThis is strange since, just before this `run` command I have the following dumps, which output the correct data:\n\n```\nwriteln(\"old db name: $oldDatabaseName\");\nwriteln(\"new db name: $newDatabaseName\");\n```\n\n![screen_shot_2015-05-23_at_12_46_11_pm](https://cloud.githubusercontent.com/assets/882397/7783817/02fe387a-0150-11e5-90a8-908bdac7d9e1.png)\n\nFor some reason it doesn't want to 'fill' in the file name to import ... I've even tried to hardcode the file to import, even that stops at `asgard_`.\n\nI can't figure out why this is happening...\n\nThank you,\n\nEdit:\n\nAfter a long stare at the code, and multiple tried...\n\n```\nrun(\"mysql -pMyPwd $newDatabaseName < {{deploy_path}}/shared/$oldDatabaseName.sql\");\n```\n\nDoesn't throw the error.\n\nThough I think the export isn't done properly, since it didn't import any data in the new database name.\nWhen checking the contents of the exported SQL:\n\n```\n\nCREATE DATABASE /*!32312 IF NOT EXISTS*/ `asgard_staging_20150523132714` /*!40100 DEFAULT CHARACTER SET latin1 */;\n\nUSE `asgard_staging_20150523132714`;\n```\n\nIt's using the old database name in the exported sql file. \nI need to figure out how to somehow export the current database **tables** with the database name.\n\nEdit 2: I can suppress the `create database` part using the `--no-create-db` flag on the export command. Though this still leaves the `USE` statement... \n\nEdit 3: Found the solution, removing the `--databases` flag removes the use statements: \n\n```\nrun(\"mysqldump --defaults-file=/etc/mysql/my.cnf --no-create-db $oldDatabaseName > {{deploy_path}}/shared/$oldDatabaseName.sql\");\n```\n\nSorry for the trouble, again. :smile: \n  Before commit, we can run `php-cs-fixer fix .` and normalize all files of the project.\nThis can help on changes on header comment, doing this only in .php_cs.\n\nSome fixers are commented because they need evaluation and testing to validate if not alter application behavior.\n\nAfter accepted the PR, just run `php-cs-fixer fix .` on project root.\n Standard code style and licence header changes\n @elfet , check https://github.com/P3PO/deployer/commit/0cebfbec8e73d98028fa3bd0b640815ae82c57c7 and see  the changes that this will\n Dear @gpupo ,\nYour idea using `php-cs-fixer` is very good, but i think we should use coding style follows [PSR-1](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md) and other rulers. I was see the changes in [P3PO@ 0cebfbe](https://github.com/P3PO/deployer/commit/0cebfbec8e73d98028fa3bd0b640815ae82c57c7), i think it had inconsequential changes.\nAnd i think @elfet  should implement himself.\n  Add progress indicator to the upload function, when uploading to a directory\n @elfet I have implemented this with the Symfony progress bar. Will submit the pull request next monday.\n #293\n  I had issues where deploy:writable is not actually changing the configured directories writable. Here is the full output with -vvv. The release is CentOS 7.1.1503. Something wrong with the chmod detection here, since it returns \"chmod: missing operand\"?\n\n```\nExecuting task deploy:writable\n\u00d4\u00f1\u00c0 on [puuhax]\nRun: ps aux | grep -E '[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx' | grep -v root | head -1 | cut -d\\  -f1\n> nginx\n>\nRun: cd /usr/share/nginx/html/project/releases/20150522010612 && chmod 2>&1; true\n> chmod: missing operand\n> Try 'chmod --help' for more information.\n>\nRun: cd /usr/share/nginx/html/project/releases/20150522010612 && if hash setfacl 2>/dev/null; then echo 'true'; fi\n> true\n>\nRun: cd /usr/share/nginx/html/project/releases/20150522010612 &&  setfacl -R -m u:\"nginx\":rwX -m u:`whoami`:rwX storage vendor\nRun: cd /usr/share/nginx/html/project/releases/20150522010612 &&  setfacl -dR -m u:\"nginx\":rwX -m u:`whoami`:rwX storage vendor\ndone on [puuhax]\nOk\n```\n\nI have circumvented this problem by running this manually for now:\n\n```\ntask('storage:writable', function () {\n    run('cd {{release_path}} && chmod -R 777 storage');\n    run('cd {{release_path}} && chmod -R 777 vendor');\n});\n```\n ```\n[root@puuhax ~]# which setfacl\n/usr/bin/setfacl\n[root@puuhax ~]# if hash setfacl 2>/dev/null; then echo 'true'; fi\ntrue\n```\n Hi,\n\nThat is the exact same command by that is run by deploy:writable? Well I run it manually anyway, the end result is the same. One of packages requires a subfolder to be writable. If run chmod -R 777 vendor it runs fine.\n\n```\n[24-May-2015 13:07:12 UTC] PHP Fatal error:  Uncaught exception 'ReflectionException' with message 'Class bugsnag does not exist' in /usr/share/nginx/html/project/releases/20150524160306/vendor/laravel/framework/src/Illuminate/Container/Container.php:776\n```\n Hmm, here the getfacl before and after running the recursive chmod.\n\n```\n[root@puuhax current]# getfacl vendor/\n# file: vendor/\n# owner: root\n# group: root\nuser::rwx\nuser:root:rwx\nuser:nginx:rwx\ngroup::r-x\nmask::rwx\nother::r-x\ndefault:user::rwx\ndefault:user:root:rwx\ndefault:user:nginx:rwx\ndefault:group::r-x\ndefault:mask::rwx\ndefault:other::r-x\n\n[root@puuhax current]# chmod -R 777 vendor/\n[root@puuhax current]# getfacl vendor/\n# file: vendor/\n# owner: root\n# group: root\nuser::rwx\nuser:root:rwx\nuser:nginx:rwx\ngroup::r-x\nmask::rwx\nother::rwx\ndefault:user::rwx\ndefault:user:root:rwx\ndefault:user:nginx:rwx\ndefault:group::r-x\ndefault:mask::rwx\ndefault:other::r-x\n```\n\nNotice how the other is now changed to 'rwx'. Then I realized that php-fpm is running on the username 'apache' instead of 'nginx'. Changing that and restarting php-fpm did the trick.\n    Hello,\n\nI'm trying to customise the deploy script, using the demo:\n\n```\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:symlink',\n    'deploy:cleanup'\n]);\n```\n\nNow, when running `dep deploy staging -vvv` I get the following error, with stacktrace:\n\n```\n[21-May-2015 20:38:41 Europe/Berlin] PHP Fatal error:  Uncaught exception 'LogicException' with message 'An argument with name \"stage\" already exists.' in phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Input/InputDefinition.php:120\nStack trace:\n#0 phar:///usr/local/bin/dep/src/functions.php(216): Symfony\\Component\\Console\\Input\\InputDefinition->addArgument(Object(Symfony\\Component\\Console\\Input\\InputArgument))\n#1 phar:///usr/local/bin/dep/recipe/common.php(26): argument('stage', 2, 'Run tasks only ...')\n#2 /Users/nicolaswidart/Sites/Asguard/presentation-site/deploy.php(4): require('phar:///usr/loc...')\n#3 phar:///usr/local/bin/dep/bin/dep(58): require('/Users/nicolasw...')\n#4 /usr/local/bin/dep(4): require('phar:///usr/loc...')\n#5 {main}\n  thrown in phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Input/InputDefinition.php on line 120\n```\n\nHere is my full `deploy.php` file:\n\n``` php\n<?php\n\nrequire 'recipe/symfony.php';\nrequire 'recipe/common.php';\n\nserver('staging', 'asgardcms.com', 22)\n    ->user('forge')\n    ->identityFile('~/.ssh/id_rsa.pub', '~/.ssh/id_rsa', '')\n    ->stage('staging')\n    ->env('deploy_path', '/home/forge/staging.asgardcms.com');\n\nset('repository', 'git@github.com:AsgardCms/Website.git');\n\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:symlink',\n    'deploy:cleanup'\n]);\n```\n\nDid I miss something ?\n\nThanks,\n Not sure if this is causing your problem, but you don't need to include the common recipe if you include one of the framework recipes like in your case. Try removing it and see if it helps?\n\nAlso one minor thing, the parameters to identityFile are required only if your ssh keys are not in their default place or private key has a password set. So you can do just ->identityFile().\n Hello, thanks for you responses.\n\nWhen removing the require line I get:\n\n```\n[22-May-2015 07:57:49 Europe/Berlin] PHP Warning:  array_map(): An error occurred while invoking the map callback in phar:///usr/local/bin/dep/src/functions.php on line 161\n[22-May-2015 07:57:49 Europe/Berlin] PHP Stack trace:\n[22-May-2015 07:57:49 Europe/Berlin] PHP   1. {main}() /usr/local/bin/dep:0\n[22-May-2015 07:57:49 Europe/Berlin] PHP   2. require() /usr/local/bin/dep:4\n[22-May-2015 07:57:49 Europe/Berlin] PHP   3. require() phar:///usr/local/bin/dep/bin/dep:58\n[22-May-2015 07:57:49 Europe/Berlin] PHP   4. task() /Users/nicolaswidart/Sites/Asguard/presentation-site/deploy.php:19\n[22-May-2015 07:57:49 Europe/Berlin] PHP   5. array_map() phar:///usr/local/bin/dep/src/functions.php:161\n[22-May-2015 07:57:49 Europe/Berlin] PHP Fatal error:  Uncaught exception 'RuntimeException' with message 'Object `deploy:cleanup` does not exist in ScenarioCollection.' in phar:///usr/local/bin/dep/src/Collection/Collection.php:27\nStack trace:\n#0 phar:///usr/local/bin/dep/src/Task/Scenario/ScenarioCollection.php(21): Deployer\\Collection\\Collection->get('deploy:cleanup')\n#1 phar:///usr/local/bin/dep/src/functions.php(160): Deployer\\Task\\Scenario\\ScenarioCollection->get('deploy:cleanup')\n#2 [internal function]: {closure}('deploy:cleanup')\n#3 phar:///usr/local/bin/dep/src/functions.php(161): array_map(Object(Closure), Array)\n#4 /Users/nicolaswidart/Sites/Asguard/presentation-site/deploy.php(19): task('deploy', Array)\n#5 phar:///usr/local/bin/dep/bin/dep(58): require('/Users/nicolasw...')\n#6 /usr/local/bin/dep(4): require('phar:///usr/loc...')\n#7 {main}\n  thrown in phar:///usr/local/bin/dep/src/Collection/Collection.php on line 27\n```\n That is because the symfony recipe the task name is 'cleanup', not 'deploy:cleanup'. Don't know about the Symfony recipe, but by default deploy runs the following tasks:\n\n```\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:create_cache_dir',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:assets',\n    'deploy:vendors',\n    'deploy:assetic:dump',\n    'deploy:cache:warmup',\n    'deploy:symlink',\n    'cleanup',\n])->desc('Deploy your project');\n\nSo you can either use that or overwrite it like you did. But anyway you need to change the deploy:cleanup to just cleanup.\n```\n Ah ok thank you. Would be nice to have to docs updated then :smile:  http://deployer.org/docs/tasks .\n\nQuick side question, how could I specify a specific branch on a git repository ?\n\n```\nset('repository', 'git@github.com:AsgardCms/Website.git');\n```\n\nThank you ! :)\n\nEdit: side question answered here: https://github.com/deployphp/deployer/issues/207 \n I agree with the docs being incomplete. I just trying out deployer but lot of the stuff is missing or is just not explained. The branch thing is one, I actually found it out by browsing through the source code.\n  Hello,\n\nI'm trying to understand how to use the `->forwardAgent()` part of the deploy script.\nI cannot seem to find any documentation about this.\n\nI'd like to use my public ssh key to log into a server, naively I tried: `->forwardAgent('~/.ssh/id_rsa.pub')`, but doesn't work.\n\nCould anyone point me in the right direction ?\n\nThanks,\n I'm sorry, I overlooked the [server part](http://deployer.org/docs/servers), I also had to provide private key and passphrase. `->identityFile('~/.ssh/id_rsa.pub', '~/.ssh/id_rsa', '')`.\n @nWidart \nSee more `forwardAgent` function in [here](https://github.com/deployphp/deployer/issues/232)\n@elfet \nI think we need more documents about `server`, `stage`, and setting up for authentication into server.\n  I want to write a post-processing of exceptions in v3.\n\nHow do I write a process corresponding to v2 of the `deploy:rollback` task?\n Thank you for your quick reply.\n\nI want to delete new release if something goes wrong:\n\n``` php\ntask('deploy:rollback', function () {\n    if (env()->get('is_new_release', false)) {\n        $server = config()->getName();\n        writeln(\"<error>Rolling back to previous release on server $server</error>\");\n        $releasePath = env()->getReleasePath();\n        // Remove release\n        run(\"rm -rf $releasePath\");\n    } else {\n        writeln(\"<comment>If you want to rollback run \\\"rollback\\\" task</comment>\");\n    }\n});\n```\n\nIn v2, the `deploy:rollback` task was called in `rollbackOnDeploy()` of `RunTaskCommand` class when an exception is thrown.\n If the new release is not deleted when something goes wrong, I think it becomes a state that can not be rollback.\n\nI use the common recipe and define the `deploy` task as following:\n\n```\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:vendors',                                                                                                                                                    \n    'deploy:symlink',\n    'cleanup',\n]);  \n```\n\nThe Initial state of the `releases` directory:\n\n```\n20150524140000\n20150525140000 <- current\n```\n\nAfter the failure by running the `deploy` task:\n\n```\n20150524140000\n20150525140000 <- current\n20150526140000 <- release\n```\n\nAgain, after the failure by running the `deploy` task:\n\n```\n20150524140000\n20150525140000 <- current\n20150526140000\n20150526140500 <- release\n```\n\nThis moment, I want to rollback to the previous release of the `current` (that is `20150524140000`).\nHowever, when I run the `rollback` task, the release will be rollback to `20150526140000` (this release does not work probably ).\n\n```\n20150524140000\n20150525140000\n20150526140000 <- current\n```\n Thank you for your reply.\n\nI think that it is safe that the new release is automatically deleted (in terms of fool-proof), but you have a point. \n\nIf the deployment fails, I decided to run the `rollback` task manually.\n  We didn't talk about this, but I think this feature is a natural addition.\n\nBasic env parameters - especially ones that could be mentioned in the docs - should be protected from future changes, since many 3rd party and custom tasks can rely on these values.\n\nConsider the env parameters set by the Builder (#272).\nIf a 3rd party task later desides to set the \"server\" env var, there's nothing to stop him in doing so.\n\nNow if a developer just include that task in his deployment process without digging in the code and checking every detail, it can cause side-effects, since after that task runs, any following task that relies on the \"server\" env var will fail in some way.\n\nAt this point, the developer can easily misjudge the situation and believe that the depoyer code itself is buggy, while in reality the 3rd party task is the one causing unwanted side-effects.\n\nIf this pull request gets accepted, I'll create another one, which sets the aforementioned \"server\" env parameter as protected.\n Were you think about this case ?\n\n``` php\n$env = new Environment();\n$env->set('protected', ['a' => 1, 'b' => 2], true);\n$env->set('protected.a', 'some-other-value');\n```\n Good point, I didn't think of the dot notation.\nI'll refactor the logic so it would handle such a situation.\n I like this, one thing though: `setProtected` should be `setAsProtected`.\nWhat are your thoughts on that?\n Well if you really want, I can implement it as `setProtected` it just sounds a bit off to me.\n\nAnyway, here's a longer explanation why I think \"setProtected\" would be slightly off.\n\n`setProtected(...)` in a proper sentence would be: \"Set this key protected.\" (or even better: \"Set this key to be protected.\")\nThis implies that there's an already existing key, which I now want to set to be protected.\n\nWhat the method really should mean, is that I want to set a new key as a protected key.\nSo the `setAsProtected(...)` would then mean: \"Set this key as protected.\" which properly implies, what I really meant.\n\nHere's some example which further illustrates what I think the difference is between the two names:\n\n``` php\n/**\n * This function sets an existing key to be protected.\n * @param string $key The key which needs to be protected\n */\nfunction setProtected($key)\n{\n    // ...\n}\n\n/**\n * Sets a new environment parameter as protected.\n * @param string $key The parameter's key\n * @param string|bool|int|array $value The key's value\n */\nfunction setAsProtected($key, $value)\n{\n    // ...\n}\n```\n\nOriginally when you proposed the `setProtected` method, and I still didn't read the code examples, I thought you meant this:\n\n``` php\n$env->set('server', [\n    'name' => $config->getName(),\n    // ...\n]);\n\n$env->setProtected('server');\n```\n\n**Then again:** I can roll with `setProtected` if you really want. :+1: \n Thanks! ^^\nI'll get to it as soon as I have some free time then. :)\n I added the modifications and tests.\n\nOne thing though:\nthe logic of the new tests is to set something as protected with the `setAsProtected` method, then check if the `set` method would work after that.\n\nNow this of course doesn't test what happens, if I set new parameters with the `setAsProtected` method, and then try to use it again instead of `set`.\n\nOf course since internally the `setAsProtected` method calls the `set` method, it shouldn't be a problem, but I thought it worth mentioning anyway.\n Note: if this gets accepted, I'll write the documentation for this and #272 the next week.\n @ZeeCoder , @elfet \nDid you test with case:\n\n``` php\n    public function testContainingProtectedParam()\n    {\n        $env = new Environment();\n        $env->set('not_protected', []);\n        $env->setAsProtected('not_protected.protected', 'value');\n\n        // throw exception => ok\n        $env->setAsProtected('not_protected', 'value');\n\n        // throw exception => error ???\n        $env->setAsProtected('not_protect', 'value');\n    }\n```\n\nCause is https://github.com/deployphp/deployer/blob/master/src/Server/Environment.php#L87\nPlease fix this problem !!!!\n hmm, I can't fix it until monday, I only have my mobile on the weekend. :/\n @ZeeCoder ,\nI fixed in PR #288 \n @elfet Are all variables can be override ? What was so different `set` function?\n I thought about that too, because it's just so easy to implement it.\nBut I think protected env vars are protected for a reason.\nImplementing an override method would let the users break things, exactly what we want tot avoid.\nI think everything can be solved easily without overriding protected env vars.\n\nAlso: I think this discussion can be closed, the only thing needs to be done is adding this to the documentation. (Which I will do.)\n  Seems like the deploy:shared was forgotten from the Laravel recipe.\n  I have the following script:\n\n``` php\nserver('main', 'myserver.com')\n    ->stage('producao')\n    ->env('deploy_path', '/usr/share/nginx/html/web-app')\n    ->user('admin')\n    ->pemFile('~/.ssh/key.pem');\n```\n\nthat results in an exception:\n\n``` php\nfile_get_contents(~/.ssh/key.pem): failed to open stream: No such file or directory in phar://C:/ProgramData/Deployer/deployer.phar/src/Server/Remote/PhpSecLib.php on line 72\n```\n\nMy solution was: \n\n``` php\n$home = (isset($_SERVER['HOMEDRIVE'])) ? $_SERVER['HOMEDRIVE'] . $_SERVER['HOMEPATH'] : $_SERVER['HOME'];\n\nserver('main', 'myserver.com')\n    ->stage('producao')\n    ->env('deploy_path', '/usr/share/nginx/html/web-app')\n    ->user('admin')\n    ->pemFile($home . '/.ssh/key.pem');\n```\n Yes, i'll do \n  I implemented the solution we aggreed upon in issue #270.\nThe problem is, that it breaks an existing test, and I can't figure out why.\n\nCan someone help me out with this?\n(If this issue is resolved I'll add tests for the new functionality too.)\n\nHere's the output of phpunit:\n\n``` bash\nPHPUnit 4.6.6 by Sebastian Bergmann and contributors.\n\nConfiguration read from /home/zeecoder/work/deployer/phpunit.xml\n\n............................................F.................... 65 / 74 ( 87%)\n.........\n\nTime: 2.13 seconds, Memory: 12.75Mb\n\nThere was 1 failure:\n\n1) Deployer\\Server\\BuilderTest::testEnv\nExpectation failed for method name is equal to <string:set> when invoked 1 time(s)\nParameter 0 for invocation Deployer\\Server\\Environment::set('server', Array (...)) does not match expected value.\nFailed asserting that two strings are equal.\n--- Expected\n+++ Actual\n@@ @@\n-'name'\n+'server'\n\n/home/zeecoder/work/deployer/src/Server/Builder.php:36\n/home/zeecoder/work/deployer/test/src/Server/BuilderTest.php:120\n/usr/share/php/PHPUnit/TextUI/Command.php:186\n/usr/share/php/PHPUnit/TextUI/Command.php:138\n\nFAILURES!\nTests: 74, Assertions: 208, Failures: 1.\n```\n I think it should be okay now.\n I had to redo this due to incompatibilities with the resent changes.\nAlso it contained 5 commits for something really simple.\n  I think the recipies should use http://php.net/manual/de/function.escapeshellarg.php for their shell command arguments. (In general, cmd arguments should be escaped somehow, if not using escapeshellarg at least use single quotes for parameters which could contain spaces or escape the spaces)\n\nAs an example which should currently break, only through looking at current code: https://github.com/deployphp/deployer/blob/master/recipe/common.php#L175\n\nBecause they are just concatenated with an space and then directly set into the cmd-line it will fail for folders with an space. Or am I wrong here? Its just an observation I did while looking at the code for an other issue, not tested though.\n I just keep myselft to the linked sourcecode with this example:\n\n```\n$dirs = join(' ', ['some/folder/with spaces/in/the/path', 'some/other/folder/without/spaces']);\necho (\"sudo chmod +a \\\"`whoami` allow delete,write,append,file_inherit,directory_inherit\\\" $dirs\");\n```\n\nwould then expand to:\n\n```\necho (\"sudo chmod +a \\\"`whoami` allow delete,write,append,file_inherit,directory_inherit\\\" some/folder/with spaces/in/the/path some/other/folder/without/spaces\");\n```\n\nwhere as it would try to chmod the folders:\n- some/folder/with \n- spaces/in/the/path\n- some/other/folder/without/spaces\n\nbut the expected behaviour would be:\n- some/folder/with spaces/in/the/path\n- some/other/folder/without/spaces\n So you say I have to escape the directory-paths for things like writable dirs myself if they contain a space?\n You can't escape `shared_files` because it uses dirname: https://github.com/deployphp/deployer/blob/de134782c36f9ffd48ba661adaee50dd522ff179/recipe/common.php#L254\n\nFor example:\n\n```\n<?php\n\nvar_dump(dirname(escapeshellarg('some dir with spaces/test.txt')));\n```\n\nYou'll get `string(30) \"'some dir with spaces\"`, which will break the shell command.\n\nBesides, I don't understand why the burden of escaping is left to the user. Why can't the common recipe do it?\n I guess because it's hard to infer what should be escaped in which way.\n\nThe one argument could be a path so you could escape spaces with `some/dir\\ with\\ spaces/` but then the next argument is a string which gets `--some-arg='some argument where I do not want escaped strings, maybe'`.\n\nThe thing is, that it's sometimes not so clear, at least to me, where I have to escape and where not. Or better where I can escape and where not... I guess the simplest approach would be to have some CommandGenerator thingy with builder pattern where the things you put in are escaped in a context sensitive manner.\n I don't think it's hard at all. For example, `shared_files` is an array of paths. Why would you not want to escape them all? It's counter-intuitive (php's functions do not need escaped paths), and all it enables the user to do is inject arbitrary arguments and commands where they should not.\n\nYou don't have to treat paths differently, you can escape them with single quotes using `escapeshellarg`.\n\nThe CommandGenerator is a good idea, but you still have to change the recipes so that `shared_files`, `shared_dirs` etc. are escaped. Whether you do that with a CommandGenerator or just string concatenation with `escapeshellarg` doesn't matter.\n  I would need information about the server I'm currently deploying to, so that I can output proper messages if I need to.\n\nI do understand why it's not ideal to give full access to the Configuration object through a global `config()` function, because then any task could - in theory - modify the server configuration values.\n\nSo in short, I think there should be a way to \"get\" the configuration values, but it should not expose \"setters\".\n\nHere's an example of a 3rd party recipe to show an actual use-case for the old `config()` function:\nhttps://github.com/deployphp/recipes/blob/master/recipes/slack.php\n Yeah, the problem was with that approach is that if we follow that naming pattern, then it can easily conflict with other env variable names.\n\nLike: `env('name')` -> this doesn't tell you much about what's name is it, and it also conflicts with some tests, where the `env('name', 'value')`.\n\nI thought about prefixing them, like:\n`env('server-name', '...')`,\nbut it starts to feel like there's just too much magic involved, that would happen under the hood.\n\nWhat do you think?\n Oh, I see, so I could implement the following code in the Builder constructor:\n\n``` php\n// ...\n$env->set('server', [\n    'name' => $config->getName(),\n    'host' => $config->getHost(),\n    // ...\n])\n// ...\n```\n\nSo that later in a task, I could access them as follows:\n\n``` php\n$serverName = env('server.name');\n$serverHost = env('server.host');\n```\n\nI would like that approach.\nOne question though: can I get the full array just by saying: `env('server')`?\n Okay, I'll check out it later then.\nBut about the Builder class: does that look okay to you?\n\nBecause if it does, I'll be sure to implement that feature, and if that's done,\nI think I'll create another pull request, to fix the 3rd party slack recipe too. :)\n I'm closing this issue in favor of the #272 pull request.\n  I'm agree, but output hasn't include `echo \"password\" |`\n Why not using the Process constructors class fourth argument ($input) to specify the input to STDIN? In this way it should be possible to input the password like a user would do or am I wrong?\n\nI think to echo an password ain't be an suitable solution... Too much possibilities of security risks. (Like the mentioned cmd shown in top, otherwise maybe stored in some way in /proc ?)\n I just did a little lookup and what may be a somehow better solution would be to run it as \n\n```\necho \"password\" | sudo -S -v\nsudo command\n```\n\nthis way, we would not have the password on a long-running proccess, but it would also mean that we need caching credentials support on the hosts site (I guess its enabled by default on most hosts). It also means we should not close the connection between several calls (which we already do I guess).\n\nThe big problem I see are \"what if\" arguments. \n- What if someone gets a grip of the sent command where the password is in (like being on the host machine loogin for processes cmd's)? \n- What if the \"administrator\" did not configure sudo to be restrictive enough (like using ALL for sudo CMDs) and through the previous leakage they may get full root rights?\n\nMaybe if we push a temp file to the machine with the password in it, pipe the content of that file as STDIN into the sudo may be a better solution. At least as far as we think about the \"attacker\" does not have the rights to read that password file, which we can achieve by only having the mode set to 0400. Then after doing the `sudo -S -v`, if we go down that path, we can maybe already delete this file again, but have sudo access for like 5 minutes or so. (depends on host auth cache configuration)\n\nEDIT:\nIf not using the file approach (phpseclib + SFTP) we should also make sure its not saved to the shell's history. As far for bash a single space before the command makes it invisible for the history, as it gets not written to it. But what if the host does not use the bash? But other shells with support for a history but don't using this ignorepattern? Maybe through disabling the HISTFILE? Defining a HISTIGNORE pattern? Again, what about maybe other shells?\n  Basically what I'm searching for is the `multistage()` function, or something similar.\nI didn't find anything regarding this in the documentation.\n\nAlso: is it possible now to declare multiple stages on a single server, then deploy to there.\nFor example:\n`dep deploy server stage`\n\nI couldn't get this information from the documentation either.\n Hmm, could you please explain to me what stages are exactly here?\nI have a feeling that I have a different idea, and I couldn't find an explanation in the docs.\n\nIt seems to me, that stages here are really a way to group servers.\nSo if I have a server cluster, which contains multiple servers for production, and some for testing purposes, then by declaring for each of them which \"stage\" they are in, I can deploy to \"production\" and \"development\" servers separately.\nDo I get this right?\n\nBecause if I do, then my second question is kind of nonsensical.\n\nI'm still curious though about how I can set which server should the deploy command deploy to by default.\nWhat I'm trying to achieve is that running `dep deploy` should deploy to the development server by default.\n Would it be possible to add a way to define a default stage? All my 2.x configs are setup with staging and production where staging is the default. I was hoping to be able to update the config files without having to update everyone's behaviour when they use the deployer\n  - Fixed the success sentence, which was outputted when a new phar build was finished,\n- Added automatic environment variable registration to the `server` function (\"host\" and \"name\" variables),\n- Added a `has` function, so that the existence of a parameter can be checked.\n\nI'm awaiting your opinions.\n Forgot to mention, if this gets merged in, then the documentation should definitely mention the automatically generated env variables. (host/name)\nSame with the `has` function, it must be listed in the \"Functions\" section of the docs.\n I'll keep that in mind next time. :)\nI'll check these issues as soon as I can.\n I refactored some things and played around the \"host\" and \"name\" environment settings.\nI discarded the latter idea because the first - naive - implementation would certainly cause issues in the future.\n\nI'll open a separate issue about the env variables.\n After 7 commits, this PR has:\n- Spelling fix. Fixed the success sentence, which was outputted when a new phar build was finished,\n- Added a `has` function, so that the existence of a parameter can be checked.\n  I think clear more if you re-base before merging code.\n I can break this PR into two separate one if you think, one for the spelling and an other for the has function.\n\nI added that global function, since I wanted to check inside a task, whether a global configuration array was set or not. I wanted to implement proper error handling, which is as informative as it can be.\nThe current `get` implementation throws an exception if the given key does not exist in the collection, which is fine, but I wanted a different error message.\nI can of course put the `get` call in a try-catch block, and throw my own exception, but then there's the chance of catching exceptions not related to the existence of the global variable I was trying to access.\n\nThe task I was trying to implement was a slack notification task, and with the `has` function I could do the following:\n\n``` php\n// Checking for the existence of the slack task configuration.\n// If it doesn't exist, I throw a custom exception with detailed information\n// (Actually it could be even more detailed, by giving the expected array keys,\n// but this is only an example.)\nif (!has('slack')) {\n    throw new \\RuntimeException('Missing \"slack\" parameter for the \"slack:push:success\" task. Please provide it using the \"set(\\'slack\\', [])\" function.');\n}\n\n// The slack global variable now surely exist. If this get call throws\n// something, that will not be related to the existence of the variable.\n$config = get('slack');\n\n// Validating the given configuration options goes here \n// ...\n```\n\nIn short: I wanted to implement proper error handling inside a given task, and I think a `has` function can make that very simple.\n Thanks. :)\nOn a related note: would you consider adding a simple \"slack\" task?\nBecause I could share what I have.\n Now that slack implementation is a perfect example why I wanted to access the \"host\" server configuration.\nDoes it work in v3?\nIt uses the `config()` function which I think does not exist anymore:\nhttps://github.com/deployphp/recipes/blob/master/recipes/slack.php\n On it. :)\nEdit: I'll create an issue there when the `config()` problem was solved.\n  I'm trying to re-implement the following:\n`$host = config()->getHost();`\n\nSince the `config()` function seems to be removed, I tried to find the current alternative, but nothing I tried so far worked.\n Okay, with the latter code snippet I can access the server configuration.\n\nSimply setting and getting an env variable wouldn't work, because I need the configuration of the server which is under deployment.\n\nWhat were the reasons behind removing the `config()` function?\n That example code would be too redundant, but setting the environment vars automatically when using the `server` function, would solve the issue.\nI'll look into it.\n Closing this, since the discussion has moved to the pull request's page.\n  I tried the following command (Migrating some tasks from v2 to v3):\n\n``` php\ntask('test:test', function () {\n    var_dump(env('release_path'));\n})->desc('test');\n```\n\nIt throws a RuntimeException without any explanation.\n\nTrying to get an 'asd' env variable do have a proper message hovewer:\n\n```\nEnvironment parameter `asd` does not exists.\n```\n I run this task separately, not as part of a deployment process:\n`dep test:test target`\nSo I think I would not be able to access the env var anyway, since no task could ran that could've set that env variable.\n\nBut even then of course I should get a proper exception message. \n\n```\n\u27a4 E\u27a4ecuting task test:test\n\u2937 on [emese-server]\nRun: cd /var/www/z_lon_heernew_dep3 && readlink /var/www/z_lon_heernew_dep3/release\n\n\n\n  [RuntimeException]  \n\n\n\nException trace:\n () at phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php:114\n Deployer\\Server\\Remote\\PhpSecLib->run() at phar:///usr/local/bin/dep/src/functions.php:289\n run() at phar:///usr/local/bin/dep/recipe/common.php:87\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Server/Environment.php:59\n Deployer\\Server\\Environment->get() at phar:///usr/local/bin/dep/src/functions.php:556\n env() at /home/zeecoder/work/z_lon_heernew/.deployer/test.php:4\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Task.php:66\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/dep/src/Executor/SeriesExecutor.php:40\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/dep/src/Console/TaskCommand.php:116\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:257\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:91\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:62\n require() at /usr/local/bin/dep:4\n```\n I just ran into a similar issue, trying to execute a task outside a deploy. I'm afraid that solution proposed by @elfet is just an ugly workaround...\nWe should be able to execute **any** task outside a deploy, think of executing only cache clearing, or only database migrations, etc.\nObviously, we cannot set a `before` for every single task\n No, I want to execute a single task.\n Add `once`.\n Can you give an example? Suppose you want to execute a single task that is already defined, like `database:migrate` (in symfony)\n ``` php\ntask(...)->once();\n```\n But the task is already defined. See the symfony recipe, there is a `database:migrate` task.\nIf I try to run `dep database:migrate foobar` I get the error above\n You can override task.\n So, your solution is to override every single task, only to add a `once`?\nAfter doing that, every task I overridden stays with `once`, so will I be able to use it without `once`?\n This will be able with Events system form next Deployer v4. Now you can use `before` and `once` combination.\n So, can you give me an example? Some code, please!\n  I think this project could be way bigger if the spelling was better on the site.\n\nExample: \"Deployer has very clean code and good tested.\"\nshould be something like: \"Deployer has a very clean, and well tested code.\"\n\nIMHO sentences like this does not help the credibility of the project.\n\nWhat do you think @elfet ?\n Excellent, I'll see what I can do there. :)\n  +1 - `%parameter_name%`\n  In deployer v2 I had to copy the whole recipe to support the new symfony dir structure.\nMigrating to v3, it feels very unprofessional, so I made some changes in it,\nwhich makes it very easy to support projects adopting the new dir structure early on.\n\nUsage example from my `deployer.php` file:\n\n``` php\nrequire 'recipe/symfony.php';\n\n// Switching to the sf3 dir structure\nset('shared_dirs', ['var/logs']);\nset('writable_dirs', ['var/cache', 'var/logs']);\nset('bin_dir', 'bin');\nset('var_dir', 'var');\n```\n\nAwaiting you opinions. :)\n A bigger issue though is that you didn't update the downloadable phar.\n(Tried it ~5-10 minutes ago.)\nSo now the documentation is out of sync with the executable. :/\n Didn't know that, it's my mistake then. :)\n  **Deployer version:** 3.0.0\n**Remote host:** Ubuntu 14.04.2 LTS\n\nThe title says it all, I tried to run `dep deploy` but I got an error, saying:\n\n```\nShell on your server is not POSIX-compliant. Please change to sh, bash or similar.  \nUsually, you can change your shell to bash by running: chsh -s /bin/bash\n```\n\nThe actual \"error\" was that the directory specified as deploy_path did not exist on the remote server.\n\nLuckily I got a proper error right after the first one:\n\n```\n[RuntimeException]\nbash: line 0: cd: /var/www/somefolder: No such file or directory\n```\n\nbut the first one shouldn't have shown up in my opinion.\n Thanks for the fast reply. :+1: \n Excellent, thanks. :)\n  ```\nYour requirements could not be resolved to an installable set of packages.\n\n  Problem 1\n    - Installation request for deployer/deployer ^3.0 -> satisfiable by deployer/deployer[v3.0.0].\n    - deployer/deployer v3.0.0 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n```\n\nEither switch the require to dev-master or the packages version tag.\n Please try with this `composer.json` file:\n\n``` json\n{\n    \"require\": {\n        \"php\": \">=5.4.0\",\n        \"phpseclib/phpseclib\": \"dev-master#2c96af214bf1b5e29b707249108504b4e0041a21\",\n        \"deployer/deployer\": \"~3.0.0\"\n    },\n}\n```\n\nAnd run `composer clear-cache` command before `composer install` command.\nGood luck !\n It worked with what was said by @oanhnn \n I don't mean to be \"that guy\" but a stable package shouldn't really be requiring an unstable dependency, even if it is a specific commit.\n See the date of the commit: https://github.com/phpseclib/phpseclib/commit/2c96af214bf1b5e29b707249108504b4e0041a21\n\nIt is  23 Feb. There is no release containing the commit: https://github.com/phpseclib/phpseclib/releases\n @ZeeCoder :+1: \n I personally wouldn't include a dependent package into this one. That's a short sighted fix for what could become a bigger issue later on.\nI tried to track down where this referenced commit was merged into, but have had no luck.\n\nWhat is in this commit's tree that is required and not in the master branch? Has anyone tried running this using the phpseclib master branch?\n I'm more curious about why Deployer needs such a recent version of phpseclib in the first place. What essential feature was added in 2c96af214bf1b5e29b707249108504b4e0041a2 that isn't available in the 0.3.10 tag?\n\nThe phpseclib repository is difficult to grasp - '1.0' and '2.0' branches that are both being merged into master, yet the latest tag is 0.3.10. Ugh.\n @elfet :+1: \n1. The next release might be next year. Until then all users using Composer have  to set the version of phpseclib to composer.json. Or might be github issue will be reported again and again.\n2. `dev-master` won't work if a bug will be introduced.\n Dear all,\nFix version of `phpseclib` as a commit is my idea. It is temporary solution for issue #228 .\nAs commit 2c96af214bf1b5e29b707249108504b4e0041a21, deployer was run good.\nI'm not sure a current stable version of `phpseclib` is good for deployer. it must be tested. I'm happy if someone can do it.\nThank you!\n Yep, better than nothing\n v3.0.5 still has this problem. I hope fixed soon.\n Good! No problem.\n\nBy the way,\n\n> Package guzzle/parser is abandoned, you should avoid using it. Use guzzle/guzzle instead.\n\nWhat's using `guzzle/parser`?\n This is it: https://github.com/reactphp/http-client/issues/23\n\n<del>This is it: https://github.com/reactphp/http/issues/24#issuecomment-96585142</del>\n There were some new releases on phpseclib/phpseclib on August 3rd. Is the code you guys wanted in any of their releases now?\n Hmm, I think so, based on the commit: https://github.com/phpseclib/phpseclib/commit/2c96af214bf1b5e29b707249108504b4e0041a21\nI think [v2.0](https://github.com/phpseclib/phpseclib/releases/tag/2.0.0) should be the thing Deployer needs.\n\nCan you confirm this @elfet ?\n This bug still occurs.\nI was not able to install deployer from composer, and the standalone phar version cannot self-update.\n ```\nUsing version ^3.0 for deployer/deployer\n./composer.json has been updated\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\nYour requirements could not be resolved to an installable set of packages.\n\n  Problem 1\n    - deployer/deployer v3.0.5 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.4 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.3 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.2 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.1 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - deployer/deployer v3.0.0 requires phpseclib/phpseclib dev-master#2c96af214bf1b5e29b707249108504b4e0041a21 -> no matching package found.\n    - Conclusion: don't install deployer/deployer v3.0.10\n    - Conclusion: don't install deployer/deployer v3.0.9\n    - Conclusion: don't install deployer/deployer v3.0.8\n    - Conclusion: don't install deployer/deployer v3.0.7\n    - Conclusion: remove symfony/yaml v3.0.2\n    - Installation request for deployer/deployer ^3.0 -> satisfiable by deployer/deployer[v3.0.0, v3.0.1, v3.0.10, v3.0.2, v3.0.3, v3.0.4, v3.0.5, v3.0.6, v3.0.7, v3.0.8, v3.0.9].\n    - Conclusion: don't install symfony/yaml v3.0.2\n    - deployer/deployer v3.0.6 requires symfony/yaml ^2.6 -> satisfiable by symfony/yaml[v2.6.0, v2.6.1, v2.6.10, v2.6.11, v2.6.12, v2.6.13, v2.6.2, v2.6.3, v2.6.4, v2.6.5, v2.6.6, v2.6.7, v2.6.8, v2.6.9, v2.7.0, v2.7.1, v2.7.2, v2.7.3, v2.7.4, v2.7.5, v2.7.6, v2.7.7, v2.7.8, v2.7.9, v2.8.0, v2.8.1, v2.8.2].\n    - Can only install one of: symfony/yaml[v2.8.0, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.8.1, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.8.2, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.0, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.1, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.10, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.11, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.12, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.13, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.2, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.3, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.4, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.5, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.6, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.7, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.8, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.6.9, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.0, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.1, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.2, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.3, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.4, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.5, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.6, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.7, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.8, v3.0.2].\n    - Can only install one of: symfony/yaml[v2.7.9, v3.0.2].\n    - Installation request for symfony/yaml == 3.0.2.0 -> satisfiable by symfony/yaml[v3.0.2].\n\nPotential causes:\n - A typo in the package name\n - The package is not available in a stable-enough version according to your minimum-stability setting\n   see <https://getcomposer.org/doc/04-schema.md#minimum-stability> for more details.\n\nRead <https://getcomposer.org/doc/articles/troubleshooting.md> for further common problems.\n\nInstallation failed, reverting ./composer.json to its original content.\n\n```\n  Dunno if you targeting to Laravel 4 or 5, but at least for Laravel 5 I probably would add:\n\nset('shared_files', ['.env']);\n\nLaravel 5 uses the [phpdotenv](https://github.com/vlucas/phpdotenv) package. Normally you don't put this in the repo, but create it once. Now with deployer you could put it in shared, so you would only have to create it once and it would be linked after deployment.\n\nOne another thing, you might want to create a Laravel spesific 'php artisan migrate' task. Also probably 'php artisan migrate:rollback' should be run if rollback is called.\n I wrote a blog post with laravel usage : https://nicolaswidart.com/blog/deploy-your-projects-with-zero-downtime \nI basically have a `.env` file in the shared folder which I copy in the current dir after deployment.\n @nWidart , you have good post by i have some comments ( i can't comment on your blog )\n1. In current version (~3.0), `deployer` use \n\n``` php\nserver('svr-dev', 'example.com', 22)\n    ->user('username')\n    ->password('pass');\n```\n\nnot use:\n\n``` php\nserver('svr-dev')\n    ->user('username', 'pass');\n```\n\nWe had a few issues with this problems.\n2. I think we can use `set('shared_files', ['.env'])` to replace your `environment` task.\n3. I think you should update your post and using `laravel` recipe for simple\n Thank you for your comments.\n1. Cool, will update. I only copied that from the docs as I use the ssh keys myself to log into the server.\n2. Not sure, since you still have to tell laravel where to look for this file.\n3. Same as `2.`, I tried the laravel recipe, but it didn't work, that's why I did it the manual way. To move the storage directory into the shared folder would require a rewrite of the laravel `Application` class to overwrite those paths.\n   In 4.2 this was just a config value to change, sadly it's not the case anymore.\n @nWidart , I will debug `laravel` recipe with Laravel 5. :sleepy: \n It basically works, it just a matter of extending the `Application` class of laravel to indicate new paths. That, I haven't figured out yet.\n\nThough I still prefer to have my own deploy script to keep fill control over it, instead of using the `laravel` recipe.\n  Hello.\n\nI have found a problem running `upload()` on windows and uploading a directory (to a linux server).\nLets say I am trying to upload a directory named `module`, which contains a subdirectory called `ApiTester`. And lets say I have a file named `Module.php` in the `ApiTester` directory.\n\nI am uploading it with `upload('module', 'module')`. When I execute the recipe on linux it runs ok but when I execute it on windows something strange happens.\n\nIt creates the `module` directory but instead of creating an `ApiTester` subdirectory and a `Module.php` file in it it creates a file named `ApiTester\\Module.php` (with a slash in its name!?) in the `module` directory.\n\nI think this happens with the PhpSecLib backend because I do not have the ssh extension installed on this machine.\n\nEdit: I just want to add that this happened on a Windows 8.1 system.\n Awesome! Thanks. :beer: \n Either still broken or is broken again in 3.0.10.\n I really think\n\n``` php\n$remote = str_replace('\\\\', '/', $remote);\n```\n\nshould be\n\n``` php\n$remote = str_replace(DIRECTORY_SEPARATOR, '/', $remote);\n```\n\nEspecially considering the comments on 4f16be0\n Agree! Can you do PR?\n @elfet, yup.\n  Hello.\n\nThere is an error running deployer 3.0 downloaded from the website.\n\n`PHP Fatal error:  Class 'Ssh\\Configuration' not found in phar:///home/koce/www/jirarepl/deployer.phar/src/Server/Remote/SshExtension.php on line 47`\n\nMaybe the php-ssh composer package is missing?\n  Current, packagist name of deployer is `deployer/deployer`, but packagist name of recipes is `deployphp/recipes`. I think you should rename packgist name to `deployphp/deployer`.\n But your organization is `deployphp`. I think `deployphp` is more suitable.\n it looks like someone tried to create `deployer` organization as ghost organization. Have you tried contacts and reporting with github? If not, name `deployer/deployer` do people think that it is `deployer` organization's\n @elfet It's against GitHub's terms to take an account and not do anything with it. They can free it up for you.\n  In this Pull Request:\n- Update class DotArray:\n  - implement contructor by `offsetSet()` method.\n  \n  ``` php\n  $d = new DotArray(['abc.xyz' => 1]);\n  var_dump($d->toArray());\n  //array (\n  //  'abc' => \n  //  array (\n  //    'xyz' => 1,\n  //  ),\n  //)\n  ```\n  - change `hasKey()` method for fixed code duplications https://scrutinizer-ci.com/g/deployphp/deployer/indices/829672/duplications/65846246\n- Add more test case for class DotArray\n  When I download the .phar from http://deployer.org/deployer.phar and run `php deployer.phar -V` I get version 2.0.2 and the last in 2.0.\\* is 2.0.5\n  I defined a custom task en my deploy.php script\n\n``` php\ntask('deploy:clear_redis', function () {\n    run(\"php {{release_path}}/app/console redis:flushall --env={{env}} --no-debug --no-interaction\");\n})->desc('Redis flushall');\n```\n\nWhen the task is executed `dep deploy -vvv` I get a RuntimeException, the command run in the server is:\n\n`cd /var/www/vhosts/site.com/httpdocs && php {{release_path}}/app/console redis:flushall --env={{env}} --no-debug --no-interaction`\n\nThe release path is not replaced by physically path.\n  Hi,\nBefore anything else, thank your for your work ! I like how easy it is to start with your tool without reading tons of documentation : )\n\nI want to use this tool to set up new project both on deploiement server and on my local machine. Therefore I would like to have a way to control local current directory. \n\nIndeed runLocally('cd my/dir'); does not work.I think I can understand why but It would be nice to supply a locallyCD. \n\nKind regards\n Perhaps you could use the local server to deploy the project on your machine?\nCheck this out: https://github.com/deployphp/deployer/blob/master/src/Server/Local.php\n\nI think the tests use it too.\n Hm even though I found a localServer() function in the repository, it throws me an error when I try to use it. (I self-updated dep)\n\n[edit] And the reason is that I had v2  because I downloaded it from the doc link http://deployer.org/docs which points to v2.\n\nIn v2 there is no local or localServer so I will try to see with v3.\n Okay so I tried to use the function localServer('myServ');  for my local workflow. \n\nMy rational was that using localServer() allows me using run and cd function because they will be run on local host. However I got the following exception :\n\n [RuntimeException]  \n  Environment parameter `deploy_path` does not exists.\n\nWhich I found to be raised because I did not set the working path. Unfortunatly the Builder class no longer has the ->path method which is sadening me :'(\n\nedit: ok  env('deploy_path', **DIR** ); did the trick.\n But you're not done with me yet ! \n\nI would be very happy if I could register tasks with the server I want. like\n\ntask('local:init, $myLocalServe, function(){\n   //etc\n}\n\nof just simply be able to call server or serverLocal inside task callbacks.\n\nI am aware that is not very useful as I can have two separate files with local tasks and remote tasks but some deploiements requires local tasks such as running tests locally before deploying.\n Dear @lce-fr \nOn deployer v3, please try:\n\n``` php\nlocalServer('localhost')\n    ->user('deployer')\n    ->stage(['local'])\n    ->env('deploy_path', '/var/www/apps/app-name')\n    ->env('branch', 'master');\n\ntask('local:init', function(){\n    //etc\n})->onlyOn(['localhost']);\n```\n\nGoodluck!!!\n  As described in issue #248 - the commands for deployment can fail with mysterious errors when remote server is running a non-POSIX shell (like tcsh, common on BSD systems). \nAdded a simple check with expression - if it fails, user will see more friendly message explaining to switch to sh/bash/similar.\n  Hi!\n\nThe deployer 2.X doesn't work when trying to deploy on server that does not use sh/bash as a default shell (like many *BSD machines). Because of that, commands like this:\n\n```\nrun(\"if [ ! -d $(echo $basePath) ]; then mkdir $basePath; fi\", true);\n```\n\ndie with errors like\n\n```\n[RuntimeException]      \n  Illegal variable name.  \n```\n\nThis can be simply prevented by adding bang (`#!/bin/sh`) before the actual command.\nFor example:\n\n```\nrun(\"#!/bin/sh \\n if [ ! -d $(echo $basePath) ]; then mkdir $basePath; fi\", true);\n```\n\nruns perfectly fine :)\n It doesn't work with version 3 though :( \n\nTo prevent this from not working for people, I'd suggest doing something like `echo $SHELL` before running the commands to make sure the shell we are connected to is compatible with the commands we run. For example `/bin/tcsh` is not (common on FreeBSD) :) \nThis while issue can be simply solved by the user by setting a default shell for the user to something compatible (sh, bash, etc). But giving people a warning would be nice.\n Will do!\n I just noticed that the exception is thrown when `{{deploy_path}}` does not exist on the server.\nThis will confuse people. Maybe we should check with `/tmp` or `/home` or something else.\n  After task `deploy:writable`, we should restore working path.\n  I tried running version 2, but the composer install doesn't work. So I switched to 3.0.0-beta.\n\nI have the following issue when trying to run `vendor/bin/dep`:\n\n`RuntimeException: Object `deploy:start` does not exist in ScenarioCollection.`\n\nHappens on `v3.0.0-beta.4` and `v3.0.0-beta.5`.\n\nI tried using all 3 scenarios (common, composer and symfony) and each of them gives this kind of issue.\n\nThis basically means that there's no version of deployer that can be install with composer and used successfully :(\n Dear @pbudzon \nVersion `v3.0.0-beta.5` is out of date, please try `dev-master`\n I get the following error when running with  `dev-master`:\n\n```\nPHP Fatal error:  Call to undefined method Deployer\\Server\\Builder::path() \n```\n\nStack trace:\n\n```\nPHP Stack trace:\nPHP   1. {main}() /Users/paulina/Sites/pgsql/vendor/deployer/deployer/bin/dep:0\nPHP   2. require() /Users/paulina/Sites/pgsql/vendor/deployer/deployer/bin/dep:59\n```\n\nTriggered by calling `server()->path()` in `deploy.php`.\n  This PR changes the run functionality a bit and allows for commands to be executed as a specific user. \nThe runAs() function, which is basically the old run() function with a few changes, allows a second parameter which is the username. It accepts the special username sudo, it will be prepend as is to the command. If a false value (null, '', false, etc.) is given, nothing will be prepended. Any other string values will be treated as usernames. A check will be performed to see if the username exists on the server (using the getent passwd <username> command). If not a RunTimeException is thrown. For a valid username, all commands will be prepended with sudo -u <username>.\nThe run() function is wrapper for the new runAs() function. It will use the environment variable run_as as a username or null if that is not set.\nThe runAsCurrent() function is a wrapper for runAs() and will force the command to be executed as the current user.\n\nVia the environment variable run_as it's possible to change the user for all run commands.\n\nPlease share your ideas about this here.\n\nReplaces #242.\n @oanhnn i agree it doesn't force this security restriction. However it's also not always possible to ssh as the user under which your webserver software runs. That could lead to permissions troubles. E.g. when wanting to delete older releases, etc.\nNext to that in your current common recipe you also allow users to run the writables command as sudo and the directories are chmodded to 777. That gave me the idea that you would allow your software to be more flexible, then to strictly enforce secure methods. \nSo this is just giving the user more options and it's still their responsibility to handle security in a good manner.\n On some servers I manage there is one user that is used to log in. This user is then able to run commands with `sudo -u username` to deploy various websites. This allows a single ssh user but simultaneously allows websites to be owned by multiple other users (for mpm.itk). So it would be very useful to be able to globally prefix commands with `sudo -u username` for me :)\n @threesquared I have the same setup on my servers. Every website have a user, sudo permission to them is a no-no.\n\nIt would be very useful to run a command or task as another user. Like [ansible become](http://docs.ansible.com/ansible/become.html).\n May be we need some more testable and safe solution. Maybe connect to server as another user to run task?\n  Proper PR replacing  #241.\n  The runLocally() function currently does not return the process result but simply writes it to the output stream.\n\nAlso it would be nice to be able to suppress it`s output if I just want to get the result in a variable but do not want to see the result in the console. Maybe adding it as a third parameter? If this is ok with you I can create a pull request for this issue.\n  This is my pull request as discussed in issue #239\n  This just happened to me.\nIn the case of a failed deploy we may have a `release` symbolic link that points to a directory that does not exist.\nNow, on the next deployment the `deploy:release` task checks if the `release` directory exists with `[ -e release ]` but it returns false because the directory the symbolic link points to does not exist. On the next step `ln` fails because the symbolic link is actually there.\n\nSo my suggestion is to check if the release directory exists with the `-h` or `-L` option instead of `-e`.\n  In this PR: Change specific requirement for environment variables follow the discussion in #218 \n1. Environment variable name will be checked and only allow a-z, A-Z, 0-9, underscore character ( `_` ) and dot character ( `.` ) .\n2. If variable name having a dot character, variables could be used in the future to be a property of an array (`env()->set()`, `env()->get()`, `Environment::setDefault()`, `Environment::getDefault()` are implemented).\n   \n   ``` php\n   env('abc.xyz', [1, 2, 3]);\n   var_export(env('abc'));\n   // output:\n   // array(\n   //     'xyz' => array(1, 2, 3)\n   // )\n   ```\n3. Environment variable parser for run command support below case:\n\n```\n{{ abcxyz }}  --> $env['abcxyz']\n{{ abc_xyz }} --> $env['abc_xyz']\n{{ abc.xyz }} --> $env['abc']['xyz']\n```\n Just some background info on this pull request: #219\n Dear @elfet ,\n`DotNotation` is better than `DotArray`, but i think:\n1. It need follow specific requirement for environment variables ( name will be checked and only allow a-z, A-Z, 0-9, underscore character ( `_` ) and dot character ( `.` ) )\n2. It should implement `ArrayAccess`\n3. Do not allow `setValues()` and `__construct()` in `DotNotation`. Users maybe have problem in below cases.\n\n``` php\n// add to class DotNotationTest\n\n    public function testContructor()\n    {\n        $a = new DotNotation(['abc.xyz1' => 1]);\n        $a->add('abc', ['xyz2' => 2]);\n\n        $this->assertSame(['xyz1' => 1, 'xyz2' => 2], $a->get('abc'));\n    }\n\n    public function testSetValues()\n    {\n        $b = new DotNotation([]);\n        $b->setValues(['abc.xyz1' => 1]);\n        $b->add('abc', ['xyz2' => 2]);\n\n        $this->assertSame(['xyz1' => 1, 'xyz2' => 2], $b->get('abc'));\n    }\n\n```\n @elfet , Yes, i does work with this PR\n\n``` php\nenv('abc', ['one' => ['two' => 1]]);\nenv('abc.one', ['other' => 3]);\n\n$this->assertSame(['two' => 1, 'other' => 3], env('abc.one'));\n// result true\n```\n Sorry @elfet , your comment is correct. Current it dose work:\n\n``` php\nenv('abc', ['one' => ['two' => 1]]);\nenv('abc.one', ['other' => 3]);\n\n$this->assertSame(['two' => 1, 'other' => 3], env('abc.one'));\n// result false\n$this->assertSame(['other' => 3], env('abc.one'));\n// result true\n```\n\nI was wrong when added to the end of the function test :shit:\n\n``` php\npublic function testEnvironment()\n    {\n        Environment::setDefault('default', 'default');\n        Environment::setDefault('callback', function () {\n            return 'callback';\n        });\n        $env = new Environment();\n\n        $env->set('int', 42);\n        $env->set('string', 'value');\n        $env->set('array', [1, 'two']);\n        $env->set('parse', 'is {{int}}');\n\n        $this->assertEquals(42, $env->get('int'));\n        $this->assertEquals('value', $env->get('string'));\n        $this->assertEquals([1, 'two'], $env->get('array'));\n        $this->assertEquals('default', $env->get('no', 'default'));\n        $this->assertEquals('default', $env->get('default'));\n        $this->assertEquals('default', Environment::getDefault('default'));\n        $this->assertEquals('callback', $env->get('callback'));\n        $this->assertEquals('is 42', $env->get('parse'));\n        $env->set('int', 11);\n        $this->assertEquals('is 11', $env->get('parse'));\n\n        $this->setExpectedException('RuntimeException', 'Environment parameter `so` does not exists.');\n        $env->get('so');\n\n        $env->set('abc', ['one' => ['two' => 1]]);\n        $env->set('abc.one', ['other' => 3]);\n\n        $this->assertSame(['two' => 1, 'other' => 3], $env->get('abc.one'));\n    }\n```\n I will try. \n  I see that you can connect to host via SSH keys, but I don't see any function or set witch you can connect to git with SSH keys without password... maybe it's a future feature, and i thin that it's really important... or maybe the libraru alredy have this and i don't see. Thanks\n If i try this, I must specify config file, I then the host connection it's refused because I use username and password. I have first connect  to host with user and password (it's a vagrant machine) and for make the code_update (git pull) I must specify the repository but for auth in the repository I must connect via SSH Keys\n I see, i will try this, but please think about add a method for specify this parameters. thanks very much !\n  when I try to install the library via composer I recive this:\n\n> - Installing elfet/php-ssh (v1.1.0)\n>   Downloading https://api.github.com/repos/elfet/php-ssh/zipball/439becf180272542cbf154df4856a49dd3c4bf04\n>   Downloading: connection...\n> \n> Failed: [Composer\\Downloader\\TransportException] 404: The \"https://api.github.com/repos/elfet/php-ssh/zipball/439becf180272542cbf154df4856a49dd3c4bf04\" file could not be downloaded (HTTP/1.1 404 Not Found)\n>    Failed to download elfet/php-ssh from dist: The \"https://api.github.com/repos/elfet/php-ssh/zipball/439becf180272542cbf154df4856a49dd3c4bf04\" file could not be downloaded (HTTP/1.1 404 Not Found)\n>    Now trying to download from source\n> - Installing elfet/php-ssh (v1.1.0)\n>   Cloning 439becf180272542cbf154df4856a49dd3c4bf04\n>   Executing command (CWD): git clone --no-checkout 'git://github.com/elfet/php-ssh.git' '/srv/www/vhosts/online-gadget.local/vendor/elfet/php-ssh' && cd '/srv/www/vhosts/online-gadget.local/vendor/elfet/php-ssh' && git remote add composer 'git://github.com/elfet/php-ssh.git' && git fetch composer\n>   Executing command (CWD): git clone --no-checkout 'https://github.com/elfet/php-ssh.git' '/srv/www/vhosts/online-gadget.local/vendor/elfet/php-ssh' && cd '/srv/www/vhosts/online-gadget.local/vendor/elfet/php-ssh' && git remote add composer 'https://github.com/elfet/php-ssh.git' && git fetch >composer\n>   Username for 'https://github.com': \n\nand in packagist :\n\n> This package is abandoned and no longer maintained. The author suggests using the herzult/php-ssh package instead. \n You need to run `composer self-update` then `composer clear-cache`. :)\n thanks, but the problem it's the same, continue try use elfet/php-ssh and request error:\n\n> [RuntimeException]\n>   Failed to clone git@github.com:elfet/php-ssh.git via git, https, ssh protocols, aborting.\n> - git://github.com/elfet/php-ssh.git\n>   Cloning into '/srv/www/vhosts/.../vendor/elfet/php-ssh'...\n>   fatal: remote error:\n>     Repository not found.\n> - https://github.com/elfet/php-ssh.git\n>   Cloning into '/srv/www/vhosts/.../vendor/elfet/php-ssh'...\n>   remote: Invalid username or password.\n>   fatal: Authentication failed for 'https://github.com/elfet/php-ssh.git/'\n> - git@github.com:elfet/php-ssh.git\n>   Cloning into '/srv/www/vhosts/.../vendor/elfet/php-ssh'...\n>   Warning: Permanently added 'github.com,192.30.252.131' (RSA) to the list of known hosts.\n>   Permission denied (publickey).\n>   fatal: Could not read from remote repository.\n>   \n>   Please make sure you have the correct access rights\n>     and the repository exists.\n> \n> Exception trace:\n>  () at phar:///usr/bin/composer/src/Composer/Util/Git.php:221\n>  Composer\\Util\\Git->throwException() at phar:///usr/bin/composer/src/Composer/Util/Git.php:80\n>  Composer\\Util\\Git->runCommand() at phar:///usr/bin/composer/src/Composer/Downloader/GitDownloader.php:54\n>  Composer\\Downloader\\GitDownloader->doDownload() at phar:///usr/bin/composer/src/Composer/Downloader/VcsDownloader.php:66\n>  Composer\\Downloader\\VcsDownloader->download() at phar:///usr/bin/composer/src/Composer/Downloader/DownloadManager.php:201\n>  Composer\\Downloader\\DownloadManager->download() at phar:///usr/bin/composer/src/Composer/Installer/LibraryInstaller.php:156\n>  Composer\\Installer\\LibraryInstaller->installCode() at phar:///usr/bin/composer/src/Composer/Installer/LibraryInstaller.php:87\n>  Composer\\Installer\\LibraryInstaller->install() at phar:///usr/bin/composer/src/Composer/Installer/InstallationManager.php:152\n>  Composer\\Installer\\InstallationManager->install() at phar:///usr/bin/composer/src/Composer/Installer/InstallationManager.php:139\n>  Composer\\Installer\\InstallationManager->execute() at phar:///usr/bin/composer/src/Composer/Installer.php:580\n>  Composer\\Installer->doInstall() at phar:///usr/bin/composer/src/Composer/Installer.php:230\n>  Composer\\Installer->run() at phar:///usr/bin/composer/src/Composer/Command/UpdateCommand.php:140\n>  Composer\\Command\\UpdateCommand->execute() at phar:///usr/bin/composer/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:257\n>  Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/bin/composer/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n>  Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/bin/composer/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n>  Symfony\\Component\\Console\\Application->doRun() at phar:///usr/bin/composer/src/Composer/Console/Application.php:146\n>  Composer\\Console\\Application->doRun() at phar:///usr/bin/composer/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n>  Symfony\\Component\\Console\\Application->run() at phar:///usr/bin/composer/src/Composer/Console/Application.php:83\n>  Composer\\Console\\Application->run() at phar:///usr/bin/composer/bin/composer:43\n>  require() at /usr/bin/composer:25\n ~2.0 ... I only can use stable versions\n nice, now works, so thanks very much ! :)\n  Hi,\n\nJust found composer have moved their composer installer location to being behind SSL.\n\nThis means currently deployment will fail.\n\nNew install command as on the composer website is now:\ncurl -sS https://getcomposer.org/installer | php\n\nCheers,\n\nAlex\n  Is there a way to make it work with private repos. I only found exemples using public repositories. I didn't tried it yet, but it seems that we can't pass public key or whatever like for \"server\" function.\n The fact is my repository already knows my server key (but the key contains a passphrase).\n\nI use \"dep deploy -vvv\" on my local machine, the connection to my server is ok, but when cloning the repository, it fails \"permission denied\". So I manually did the git clone displayed with the \"-vvv\" option on my server, it asks for my key, and the clone is a success... I'm stuck.\n Dear @creakiwi \n\nI also met a problem as you, and I have to use feature forward agent successful to solve that problem.\n\nThe first, you need to setup your system support forward agent.\nOn your local machine, content file `~/.ssh/config` : \n\n```\nHost <your-server-ip>\n  ForwardAgent yes\n```\n\nOn your server, uncomment line `#AllowAgentForwarding yes` in file `/etc/ssh/sshd_config` to allow agent forwarding feature.\n\n```\nAllowAgentForwarding yes\n#AllowTcpForwarding yes\n#GatewayPorts no\n#X11Forwarding no\n```\n\nReload sshd service on your server.\n\n``` shell\n$ sudo service sshd restart\n```\n\nTest forward agent from your local machine.\n\n``` ssh\n$ ssh-add /path/to/your-key-file\n$ ssh <username>@<server_ip>\n$ ssh-add -l\n```\n\nCheck your key really loaded.\nFinally, using `deployer` v3.0 and forward agent feature.\n\n``` php\nserver('your-server', 'xxx.xxx.xxx.xxx', 22)\n    ->user('username')\n    ->forwardAgent()\n    ->stage(['dev'])\n    ->env('deploy_path', '/var/www/apps/yourappname')\n    ->env('branch', 'master')\n```\n\nWish you success !!!\nRefs:\nhttps://developer.github.com/guides/using-ssh-agent-forwarding/\nhttps://github.com/oanhnn/deployer-example\n Thanks for you answer @oanhnn, I'll try that tonight. (I'm handling the @creakiwi account).\nYour deployer-example repo seems to be a good start, thanks for your additional informations about ssh configuration.\n  Hi,\nI'm using username/password ssh\n\n```\nserver(...)\n    ->user('username', 'password')\n```\n\nand\n\n```\nset('writable_use_sudo', true); // Using sudo in writable commands?\n```\n\nAnd there was RuntimeException with sudo commands at deployment:\n\n```\n [RuntimeException]\n  sudo: no tty present and no askpass program specified\n```\n\nIs there a solution for this or passwordless sudo is a must?\nThank you.\n Thanks @elfet \n I think it would be unsafe when deploy user can change permission of directory and files without `sudo` password.\n  Create for-Deployer-v3 PR based on following PR:\nhttps://github.com/deployphp/deployer/pull/220\n @elfet : I myself no longer need this feature :smile: \n I need it. My database file is gone and my site does not work.\n\nHow do you guys handle data files to share without feature like this?\n @kenjis \nYou can use function `upload()` to create a task for your work yoursefl\n Why woudn't you add an alternative task, say 'deploy:shared_copy'?\nFor my mind it's ridiculous to delete files stored in repository without checking if there is a local copy.\n @oanhnn `upload` uploads file every time. But in my case, the file is deployed from repository only the first deployment.\n\n@elfet Do you mean to put the db file manually? I don't like to do something manually on deployment.\n `deploy:shared_copy` :+1: \n  Can someone, please, provide an example of how to use Deployer to deploy to a server from a remote Git repo? I have gone through the documentation on the website. I understand the general principle of the tool but I still can't get going. Also, will it only update the files that need updating or will it write all the files from the repo to the server every time? Thanks.\n Dear @ksidibe \nUntil new documents is completed, you can refer to this [repo](https://github.com/oanhnn/deployer-example).\n Thanks @elfet  and @oanhnn. @oanhnn , I'm checking out the repo you suggested. Thanks again.\n Dear @ksidibe,\nI have updated the README file for the more understandable and hopes it will help you.\n @ksidibe For using Deployer, follow these steps:\n- Clone this repo to your_dir\n- cd to your_dir\n- run\n\n```\ncomposer install\n```\n- run  \n\n```\nphp ./build\n```\n\nThis will create deployer.phar file.\n- Create deploy.php file in which you will set server, stage, repository, shared_dirs, etc, define additional tasks and main task. You can refer to [oanhnn's deploy.php file](https://github.com/oanhnn/deployer-example/blob/master/deploy.php)\n  Have a look at [common recipe](https://github.com/deployphp/deployer/blob/master/recipe/common.php) to understand base tasks.\n- To exec a task, run\n\n```\nphp deployer.phar <task> <defined stage name>\n```\n\nFor example, to exec main \"deploy\" task on \"dev\" stage, run\n\n```\nphp deployer.php -vvv deploy dev\n```\n\n-vvv is for debuging\n @vanquang9387 Thanks a lot. You guys have been awesome. I'm currently going through the suggestions you guys have made. Thanks.\n Glad to be helpful :smile: \n  I'm using deployer from master branch.\nMy repo has around 4000 files.\nThis is my deploy task:\n\n```\ntask('deploy', [\n    'deploy:prepare',\n    'deploy:release',\n    'deploy:update_code',\n    'deploy:shared',\n    'deploy:writable',\n    'deploy:symlink',\n    'cleanup',\n    'backend:restart',\n])->desc('Deploy your project');\n```\n\nThis is part of log when I deploy with -vvv:\n\n```\n\u27a4 Executing task deploy:update_code\n...\n\u2936 done on [dev]\n\u2714 Ok\n\u27a4 Executing task deploy:shared\nRun: cd deploy_path && if [ -d $(echo deploy_path/releases/20150421105716/app/tmp) ]; then rm -rf deploy_path/releases/20150421105716/app/tmp; fi\nRun: cd deploy_path && mkdir -p deploy_path/shared/app/tmp\nRun: cd deploy_path && mkdir -p `dirname deploy_path/releases/20150421105716/app/tmp`\nPHP Notice:  Unable to open channel in ***/phpseclib/Net/SSH2.php on line 3032\nPHP Notice:  Connection closed prematurely in ***/phpseclib/Net/SSH2.php on line 3173\n...\n\u2936 done on [dev]\n\u2714 Ok\n\u27a4 Executing task deploy:writable\n...\n\u2936 done on [dev]\n\u2714 Ok\n...\n\u27a4 Executing task success\nSuccessfully deployed!\n\u2714 Ok\n```\n\nThough it seems to be successful. I can tell all run commands after\n\n```\nPHP Notice:  Unable to open channel in ***/phpseclib/Net/SSH2.php on line 3032\nPHP Notice:  Connection closed prematurely in ***/phpseclib/Net/SSH2.php on line 3173\n```\n\nwere unsuccessful.\n\n**How can I tell that \"clone/checkout command (update_code) has not finished but next tasks start\"?**\nAt the time of deploy:shared task running, I logged in the deploy server and saw my release folder had less than 4000 files.\n\nSome of my friends have also faced kind of this problem since yesterday.\n @elfet : For more information, I had not installed ssh2.\n After installing ssh2, there were few successful deployments along with unsuccessful ones.\n Is this problem related to these issues?\nhttps://github.com/phpseclib/phpseclib/issues/134\nhttps://github.com/phpseclib/phpseclib/issues/506\n @elfet This problem happens after \"composer update\".\nI've cloned master branch again to test and deployment was successful.\nThen, I ran \"composer update\" and this problem occured again.\nThis was the update log:\n\n```\ncomposer update\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\n  - Removing symfony/finder (v2.6.4)\n  - Installing symfony/finder (v2.6.6)\n    Loading from cache\n\n  - Removing symfony/console (v2.6.4)\n  - Installing symfony/console (v2.6.6)\n    Loading from cache\n\n  - Removing symfony/process (v2.6.4)\n  - Installing symfony/process (v2.6.6)\n    Loading from cache\n\n  - Removing sebastian/version (1.0.4)\n  - Installing sebastian/version (1.0.5)\n    Downloading: 100%\n\n  - Removing sebastian/environment (1.2.1)\n  - Installing sebastian/environment (1.2.2)\n    Downloading: 100%\n\n  - Removing sebastian/diff (1.2.0)\n  - Installing sebastian/diff (1.3.0)\n    Downloading: 100%\n\n  - Removing symfony/yaml (v2.6.4)\n  - Installing symfony/yaml (v2.6.6)\n    Downloading: 100%\n\n  - Removing phpspec/prophecy (v1.3.1)\n  - Installing phpspec/prophecy (1.4.0)\n    Downloading: 100%\n\n  - Removing phpunit/phpunit-mock-objects (2.3.0)\n  - Installing phpunit/phpunit-mock-objects (2.3.1)\n    Downloading: 100%\n\n  - Removing phpunit/php-token-stream (1.4.0)\n  - Installing phpunit/php-token-stream (1.4.1)\n    Downloading: 100%\n\n  - Removing phpunit/php-file-iterator (1.3.4)\n  - Installing phpunit/php-file-iterator (1.4.0)\n    Downloading: 100%\n\n  - Removing phpunit/php-code-coverage (2.0.15)\n  - Installing phpunit/php-code-coverage (2.0.16)\n    Downloading: 100%\n\n  - Removing phpunit/phpunit (4.5.0)\n  - Installing phpunit/phpunit (4.6.4)\n    Downloading: 100%\n\n  - Removing herzult/php-ssh (v1.1.0)\n  - Installing herzult/php-ssh (v1.1.1)\n    Downloading: 100%\n\n  - Removing symfony/debug (v2.6.4)\n  - Installing symfony/debug (v2.6.6)\n    Loading from cache\n\n  - Removing symfony/expression-language (v2.6.4)\n  - Installing symfony/expression-language (v2.6.6)\n    Loading from cache\n\n  - Removing react/socket-client (v0.4.2)\n  - Installing react/socket-client (v0.4.3)\n    Loading from cache\n\n  - Removing justinrainbow/json-schema (1.3.7)\n  - Installing justinrainbow/json-schema (1.4.1)\n    Loading from cache\n\n  - Updating phpseclib/phpseclib dev-master (2c96af2 => 1b22d52)\n    Checking out 1b22d523dce3a3134ef671f7189a8ce3a8e42044\n```\n\nMaybe there was problem with some package update. Can you have a check?\nThank you.\n This problem is resolved when i fixed version of `phpseclib`\n\n``` json\n    \"require\": {\n        \"php\": \">=5.4.0\",\n        \"phpseclib/phpseclib\": \"dev-master#2c96af214bf1b5e29b707249108504b4e0041a21\",\n        \"deployer/deployer\": \"dev-master\"\n    },\n```\n   It's not, I'm from France, and with Chrome I got this error: ERR_EMPTY_RESPONSE\n It's really slow for me in the UK too, but is working.\n It doesn't work for me at all, even if I refresh several time\n :+1: \n  while using this under Windows\n\n```\nserver(...)\n    ...\n    ->pubKey('~/.ssh/id_rsa.pub', '~/.ssh/id_rsa', null);\n```\n\nget an error\n\n```\nPassPhrase: \"D:\\OpenServer\\userdata\\tmp/hiddeninput.exe\" \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0439 \u0438\u043b\u0438 \u0432\u043d\u0435\u0448\u043d\u0435\u0439                                                                               \n\u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439, \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u043e\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043e\u0439 \u0438\u043b\u0438 \u043f\u0430\u043a\u0435\u0442\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u043e\u043c.                                                                                                                     \n\n\nWarning: unlink(D:\\OpenServer\\userdata\\tmp/hiddeninput.exe): No such file or directory in phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/vendor/symfony/console/Sy\nmfony/Component/Console/Helper/DialogHelper.php on line 280                                                                                                               \n\nCall Stack:                                                                                                                                                               \n    0.0140     219912   1. {main}() D:\\OpenServer\\modules\\php\\PHP-5.5\\deployer.phar:0                                                                                     \n    0.0140     220272   2. require('phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/bin/dep') D:\\OpenServer\\modules\\php\\PHP-5.5\\deployer.phar:4                    \n    0.0630    1759312   3. Deployer\\Deployer->run() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/bin/dep:51                                                     \n    0.0810    1829168   4. Symfony\\Component\\Console\\Application->run() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/Deployer.php:114                       \n    0.0820    1829672   5. Symfony\\Component\\Console\\Application->doRun() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/vendor/symfony/console/Symfony/Component/\nConsole/Application.php:126                                                                                                                                               \n    0.0830    1830112   6. Symfony\\Component\\Console\\Application->doRunCommand() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/vendor/symfony/console/Symfony/Com\nponent/Console/Application.php:195                                                                                                                                        \n    0.0830    1830320   7. Symfony\\Component\\Console\\Command\\Command->run() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/vendor/symfony/console/Symfony/Componen\nt/Console/Application.php:874                                                                                                                                             \n    0.0850    1832112   8. Deployer\\Console\\RunTaskCommand->execute() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/vendor/symfony/console/Symfony/Component/Cons\nole/Command/Command.php:253                                                                                                                                               \n    0.0900    1841128   9. Deployer\\Console\\RunTaskCommand->runSeries() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/Console/RunTaskCommand.php:118         \n    0.0900    1841352  10. Deployer\\Task\\Runner->run() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/Console/RunTaskCommand.php:168                          \n    0.0900    1841384  11. call_user_func:{phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/Task/Runner.php:45}() phar://D:/OpenServer/modules/php/PHP-5.5/deplo\nyer.phar/src/Task/Runner.php:45                                                                                                                                           \n    0.0900    1841432  12. {closure:phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/recipe/common.php:33-44}() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.ph\nar/src/Task/Runner.php:45                                                                                                                                                 \n    0.0900    1841752  13. run() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/recipe/common.php:37                                                              \n    0.0900    1841928  14. Deployer\\Server\\Ssh2->run() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/functions.php:115                                       \n    0.0900    1841960  15. Deployer\\Server\\Ssh2->checkConnection() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/Server/Ssh2.php:92                          \n    0.0900    1842272  16. Deployer\\Server\\Ssh2->connect() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/Server/Ssh2.php:83                                  \n    0.0910    1860608  17. Deployer\\Server\\Configuration->getPassPhrase() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/Server/Ssh2.php:61                   \n    0.0910    1860712  18. askHiddenResponse() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/Server/Configuration.php:235                                    \n    0.0920    1861016  19. Symfony\\Component\\Console\\Helper\\DialogHelper->askHiddenResponse() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/src/functions.php:305\n\n    0.2130    1862288  20. unlink() phar://D:/OpenServer/modules/php/PHP-5.5/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Helper/DialogHelper.php:280   \n```\n\nwhat can be done to avoid it?\n\ndeployer version 2.0.2 (self-update made, why it's not newer?)\nphp version PHP 5.5.13 (cli) (built: May 28 2014 09:50:06)\nwindows 7 pro\n managed to make this by installing deployer from sources.\n maybe exe file is not included into phar archive? or it cannot be executed from there?\n  Creating symlink to release, the symlink swap is now a **non-atomic** operation.\nTo use \"ln -fsn\" is not bad, good enough. But '-n' option is non-standard and so is not recommended. Above all, it's not sure \"ln -f\" is atomic.\nIt's sure \"mv\" is an **atomic** operation.\n**\"mv -Tf\"** - with '-T' option - may be the best bet.\n Thanks a lot.\nI'm looking forward to 3.0 :)\n  ## What?\n\nBe able to access a remote server in a VPN throw a (Bastion|Jump) Server\n## Why ?\n\nTo access the target servers from my local machine. \n_In my case_, I access a jump server with \n\n> ssh -A user@jump-host \n\nThen access all my instances like: ssh host01, ssh host02 , ssh hots03 to make the deployer flow i want. \n\n**Note**: -A  enable forwarding of the authentication agent connection, that means i don't have my pubKeys at any remote destination server neither a user name or password .\n @elfet Hi! Is this feature available in an alpha/beta? I can't get the `git clone` step to work without SSH Agent Forwarding.\n\nWhen I try to run the same command Deployer is running (which I can see using `-vvv`), but manually via this command `ssh -A user@host \"git clone etc\"` then it works, so I don't think it's an SSH configuration issue.\n\nMy `deploy.php` looks like this:\n\n``` php\n<?php\n\n// All Deployer recipes are based on `recipe/common.php`.\nrequire 'recipe/composer.php';\n\n// Define a server for deployment.\n// Let's name it \"prod\" and use port 22.\nserver('prod', 'host', 22)\n    ->user('user')\n    ->forwardAgent() // You can use identity key, ssh config, or username/password to auth on the server.\n    ->stage('production')\n    ->env('deploy_path', '/var/www/project_name') // Define the base path to deploy your project to.\n    ->env('branch', 'master');\n\n// Specify the repository from which to download your project's code.\n// The server needs to have git installed for this to work.\n// If you're not using a forward agent, then the server has to be able to clone\n// your project from this repository.\nset('repository', 'git@github.com:organisation/project_name.git');\n```\n Did you config your server and your deployment PC to allow forward agent ???\nSee my comment in issue #232.\nOr my example project [oanhnn/deployer-example](https://github.com/oanhnn/deployer-example)\n Hi @oanhnn yeah it's all configured correctly, I verified by running Deployer in verbose mode, then copying those same commands and running them manually using `ssh -A`.\n Dear @Rylon ,\nIf your config is correctly, `ssh` and `ssh -A` is same. Can you try it?\nhttps://github.com/oanhnn/deployer-example/blob/master/docs/enable-feature-ssh-forward-agent.md\n Hi @oanhnn yes I've tried that as well. All the commands work properly if I run them manually using `ssh user@host \"<the command Deployer is running>\"`, with or without `-A`.\n Same here! :( I'm getting\n\n```\n  [RuntimeException]                                   \n  Permission denied (publickey).                       \n  fatal: Could not read from remote repository.        \n  Please make sure you have the correct access rights  \n  and the repository exists.                           \n```\n\nbut executing the exact same git clone command directly from the command line works fine.\n Ok, let me try to help in debugging/fixing that.\n\nHere is what I'm trying to do :\n\n``` php\n<?php\n\nrequire 'recipe/symfony.php';\n\nserver('production', 'server.com', 22)\n    ->user('kevin')\n    ->forwardAgent()\n    ->stage('production')\n    ->env('deploy_path', '/var/www/download.blabla.com')\n;\nset('repository', 'git@bitbucket.org:bleeee/download.blabla.com.git');\n```\n\nI've raised the ssh LogLevel on the server to DEBUG2 to get extra info and here is what happens :\n\nWith Deployer:\n\n```\nkevin@ks:~/workspace/test/test-deployer$ deployer.phar deploy production -vv\n\u27a4 Executing task deploy:prepare\n\u2937 on [production]\nRun: echo $0\nRun: if [ ! -d /var/www/download.blabla.com ]; then echo \"\"; fi\nRun: cd /var/www/download.blabla.com && if [ ! -d releases ]; then mkdir releases; fi\nRun: cd /var/www/download.blabla.com && if [ ! -d shared ]; then mkdir shared; fi\n\u2936 done on [production]\n\u2714 Ok\n\u27a4 Executing task deploy:release\n\u2937 on [production]\nRun: date +%Y%m%d%H%M%S\nRun: mkdir /var/www/download.blabla.com/releases/20150714143351\nRun: cd /var/www/download.blabla.com && if [ -h release ]; then rm release; fi\nRun: ln -s /var/www/download.blabla.com/releases/20150714143351 /var/www/download.blabla.com/release\n\u2936 done on [production]\n\u2714 Ok\n\u27a4 Executing task deploy:update_code\n\u2937 on [production]\nRun: readlink /var/www/download.blabla.com/release\nRun: git clone  --depth 1 --recursive -q git@bitbucket.org:bleeee/download.blabla.com.git /var/www/download.blabla.com/releases/20150714143351 2>&1\n\n\n  [RuntimeException]\n  debug2: ssh_connect: needpriv 0\n  debug1: Connecting to bitbucket.org [131.103.20.167] port 22.\n  debug1: Connection established.\n  ...\n  debug1: SSH2_MSG_SERVICE_ACCEPT received\n  debug2: key: /home/kevin/.ssh/id_rsa ((nil)\n  debug2: key: /home/kevin/.ssh/id_dsa ((nil)\n  debug2: key: /home/kevin/.ssh/id_ecdsa ((nil)\n  debug2: key: /home/kevin/.ssh/id_ed25519 ((nil)\n  debug1: Authentications that can continue: publickey\n  debug1: Next authentication method: publickey\n  debug1: Trying private key: /home/kevin/.ssh/id_rsa\n  debug1: Trying private key: /home/kevin/.ssh/id_dsa\n  debug1: Trying private key: /home/kevin/.ssh/id_ecdsa\n  debug1: Trying private key: /home/kevin/.ssh/id_ed25519\n  debug2: we did not send a packet, disable method\n  debug1: No more authentication methods to try.\n  Permission denied (publickey)\n  fatal: Could not read from remote repository.\n  Please make sure you have the correct access rights\n  and the repository exists.\n```\n\nVery same command but directly from the command line :\n\n```\nkevin@ks:~/workspace/test/test-deployer$ ssh -A server.com \"git clone  --depth 1 --recursive -q git@bitbucket.org:bleeee/download.blabla.com.git /var/www/download.blabla.com/releases/20150714143351 2>&1\"\ndebug2: ssh_connect: needpriv 0\ndebug1: Connecting to bitbucket.org [131.103.20.168] port 22.\ndebug1: Connection established.\n...\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\ndebug2: key: /home/kevin/.ssh/id_rsa (0x7fa7bc9350b0),\ndebug2: key: /home/kevin/.ssh/id_rsa ((nil)),\ndebug2: key: /home/kevin/.ssh/id_dsa ((nil)),\ndebug2: key: /home/kevin/.ssh/id_ecdsa ((nil)),\ndebug2: key: /home/kevin/.ssh/id_ed25519 ((nil)),\ndebug1: Authentications that can continue: publickey\ndebug1: Next authentication method: publickey\ndebug1: Offering RSA public key: /home/kevin/.ssh/id_rsa\ndebug2: we sent a publickey packet, wait for reply\ndebug1: Remote: Forced command: conq username:kbsali\n...\n```\n\nSee how with deployer i'm getting :\n    debug2: key: /home/kevin/.ssh/id_rsa ((nil)\nwhile with ssh command :\n    debug2: key: /home/kevin/.ssh/id_rsa (0x7fa7bc9350b0)\n\nTo me that's where Deployer is failing... it is not properly forwarding the agent.\n\nHope this helps.\nThx\n as a work around i set the repo with my credentials :\n\n``` php\nset('repository', 'https://username:pwd@bitbucket.org:bleeee/download.blabla.com.git');\n```\n\nBut that's not idea as it can not be commited to our repo.\n Thanks for that example @kbsali, that's exactly the same behaviour I'm seeing here also.\n  When downloading the version 3 beta 5 and using recipe \"common.php\" the argument-functions is missing.\nIf I clone and build the v3b5 everything is ok with the \"argument\" function.\n ok, lets see if I understand this. So the v3b5 is not including \"arguments\"? Is the beta some kind of reduced version of what will be released?\n    See https://github.com/deployphp/deployer/issues/152\n\nSummary:\n- Copies shared directories from source recursively, without overwriting existing files\n- Copies shared files from source, if the file doesn't exists an empty one is created\n @dirkluijk , I think you should implement this feature as option, copy or not.\n I agree with @oanhnn, there should be an option to enable this. Current method should be the default.\n Hm, flexibility is great, but I couldn't imagine a situation where you want empty files/directories if the files and directories already exist in source control? Because that would still be possible of they don't exist.\n\nOf course I could make it optional, but I can't figure out how. It seems not possible to add additional options to a `TaskCommand` generated by `task`. And separate it from the current task is also not an option, because this currently removes to existing files/directories before creating the symlinks.\n Dear @dirkluijk ,\n\nSource code (checkout from git) is deployed on stages. So that, configure files (`shared_files`, `shared_dirs`) are modified when deploy to a special stage.\nWhen re-deploy on stage, if copy original configure files, you have modify it again. Are you want this?\nI think we should generate configure files in first deploy and re-generate it when stage have change. \nAnd we need a task to generate configure files instead of copy it from source code.\n\nYou can implement this feature as option, using env vars. Eg `env('copy_original_shared')`. \n\n``` php\nenv('copy_original_shared', false);\n\ntask('deploy:shared', function(){\n    // ...\n    if (env('copy_original_shared')) {\n        // copy original shared files and dirs\n    }\n    // ...\n});\n```\n @oanhnn: the files are only copied the first time, the second time the files will not be overwritten thanks to the `-n` flag. I think that's the desired behaviour.\n  In this Pull request, I will implement feature of issue #211 \nChange syntax for env vars to {{ ... }} and support allow whitespaces ( {{deploy_path}} and {{ deploy_path }} return same value).\n\nSorry by create other pull request.\nThis pull request is rebase of PR #218 \n Dear @elfet ,\nMy pull request #219 has a problem.\nWith old parser (pattern `/\\{(.+?)\\}/`) detected all cases: \n\n```\n{abcxyz}\n{abc-xyz}\n{abc_xyz}\n{abc.xyz}\n{abc@zyx}\n```\n\nbut new parser (pattern `/\\{\\{\\s*(\\w+)\\s*\\}\\}/`) only detected cases:\n\n```\n{{abcxyz}}\n{{abc_xyz}}\n```\n\nI can fix this, but i want specific requirements for env var.\nI think we should only allow:\n\n```\n{{abcxyz}}\n{{abc_xyz}}\n{{abc.xyz}}\n```\n I vote for same pattern as normal variables (implemented on #219).\nHaving a dot `.` on a variable could be used in the future to be a property of an array.\n @gordalina, Is your attention?\n\n``` php\nenv('abc', array('xyz' => 1));\n\necho env()->parse('{{abc.xyz}}');\n```\n\noutput:\n\n```\n1\n```\n I didn't know about `parse`.\nStill, I keep my opinion, and would suggest making `parse()` private and `env()` would call `parse()` [here](https://github.com/deployphp/deployer/blob/master/src/Server/Environment.php#L55)\n\nThis way, properties are part of the DSL and the user doesn't need to know wether it is necessary to parse them or not.\n\nWhat are your thoughts @oanhnn @elfet?\n I think:\n1. Method `parse` will be private. It is only call when using `run()`.\n2. When call `env($abc, $xyz)` or `env()->set($abc, $xyz)`, variable `$abc` will check and only allow a-z, A-Z, 0-9 and underscore character ( `_` )\n3. When call `env($abc)` or `env()->get($abc)`, variable `$abc` will check and only allow a-z, A-Z, 0-9, underscore character ( `_` ) and dot character ( `.` ) . If having a dot on variable `$abc` could be used in the future to be a property of an array.\n @oanhnn exactly!\n  In this Pull request, I will implement feature of issue #211 \nChange syntax for env vars to `{{ ... }}` and support allow whitespaces ( `{{deploy_path}}` and `{{ deploy_path }}` return same value).\n Sorry @elfet ,\nI try make all commits to single commit by `rebase` but it is failure. \nPlease implement this feature yourself. I think single is best ^^ \n  This version improves command execution error detection\n See https://github.com/Herzult/php-ssh/pull/44\n Hello @elfet,\nCould you review this one please?\n\nMain problem with php-ssh@1.1.0 is that it relies on stderr to check if executed command failed or not BUT since a few weeks, composer writes a lot of things to stderr that are not errors (see my previous comment for the reasons).\n\nBasically, all deployer users that uses composer during deployment (so a good majority of its users) will get a RuntimeException during composer install step.\n\nI've fixed the problem on php-ssh, all you have to do now is to update deployer, and then we can share a :beers: \n :+1: \n :+1: \n :+1: \n  Will be nicer if this package supports proxy settings :+1: \n @elfet I try use deployer under proxy network, but not work, return a message to configure proxy in deployer.\n How can I connect to server where he is via 3rd ssh connects with Deployer?\n\nServer1(loaclhost)->Server2->Server3(deployment server)\n\nThanks.\n Thanks @pilotftzi @gordalina @elfet :+1: \n  Getting stuck with the update_code task generating this exception error (actual paths and IP anonymised):\n\n```\n$ deployer deploy -vvv\n\nRun task deploy:start on server production\nPreparing server for deploy\nRun task deploy:prepare on server production\n[0.0.0.0] if [ ! -d $(echo /var/www/myproject) ]; then mkdir /var/www/myproject; fi\nPassword:\n[0.0.0.0] ::\n[0.0.0.0] cd /var/www/myproject && if [ ! -d \"releases\" ]; then mkdir releases; fi\n[0.0.0.0] ::\n[0.0.0.0] cd /var/www/myproject && if [ ! -d \"shared\" ]; then mkdir shared; fi\n[0.0.0.0] ::\n\u2714\nUpdating code\nRun task deploy:update_code on server production\n[0.0.0.0] cd /var/www/myproject && git clone --recursive -q git@github.com:gituser/gitproject.git /var/www/myproject/releases/2015031085950\nRun task deploy:rollback on server production\nRolling back to previous release on server production\n[0.0.0.0] cd /var/www/myproject && rm -rf /var/www/myproject/releases/2015031085950\n[0.0.0.0] ::\n\n  [RuntimeException]\n  Permission denied (publickey).\n  fatal: Could not read from remote repository.\n  Please make sure you have the correct access rights\n  and the repository exists.\n\nException trace:\n () at phar:///usr/local/bin/deployer/src/Server/PhpSecLib.php:89\n Deployer\\Server\\PhpSecLib->run() at phar:///usr/local/bin/deployer/src/functions.php:115\n run() at phar:///usr/local/bin/deployer/recipe/common.php:68\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/deployer/src/Task/Runner.php:45\n Deployer\\Task\\Runner->run() at phar:///usr/local/bin/deployer/src/Console/RunTaskCommand.php:168\n Deployer\\Console\\RunTaskCommand->runSeries() at phar:///usr/local/bin/deployer/src/Console/RunTaskCommand.php:118\n Deployer\\Console\\RunTaskCommand->execute() at phar:///usr/local/bin/deployer/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:253\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/deployer/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/deployer/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/deployer/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/deployer/src/Deployer.php:114\n Deployer\\Deployer->run() at phar:///usr/local/bin/deployer/bin/dep:51\n require() at /usr/local/bin/deployer:4\n\ndeploy [--dry-run] [--server[=\"...\"]] [stage]\n```\n\nThe server has a valid key running in ssh-agent. I can SSH into it and run the clone command just fine:\n\n```\ncd /var/www/myproject && git clone --recursive -q git@github.com:gituser/gitproject.git /var/www/myproject/releases/2015031085950\n```\n\nHere is my super simple `deploy.php` (again, anonymised):\n\n```\nrequire 'recipe/composer.php';\nserver('production', '0.0.0.0', 22)\n  ->user('root')\n  ->path('/var/www/myproject');\nset('repository', 'git@github.com:gituser/gitproject.git');\n```\n\nI'm deploying from OS X 10.10.2 with PHP 5.5.14 and Deployer 2.0.2. Target machine is Ubuntu 14.04 with PHP 5.5.9-1ubuntu4.6. Super grateful for some assistance getting this to work! \n Please run task\n\n``` php\ntask('check', function() {\n    run('ssh-add -l');\n});\n```\n\nto list added keys in your ssh-agent and check this exist in Github keys ?\n I have the same error on Deployer 3.0.10\n I can confirm this issue using the latest version from deployer.org. But adding `deployer/deployer` as a dev dependency and using that version is working as expected.\n @daFish I will try this.\n  Version `3.0.0-beta.5`\n\n``` php\ntask('deploy', [\n    'build:package'\n]);\n\ntask('build:package', function () {\n    // ...\n})->once();\n```\n\nThis currently ends up in an expception\n\n```\ndeployer.phar deploy -vvv\nPHP Warning:  array_map(): An error occurred while invoking the map callback in phar:///usr/local/bin/deployer.phar/src/functions.php on line 103\nPHP Stack trace:\nPHP   1. {main}() /usr/local/bin/deployer.phar:0\nPHP   2. require() /usr/local/bin/deployer.phar:4\nPHP   3. require() phar:///usr/local/bin/deployer.phar/bin/dep:58\nPHP   4. task() /home/krebs/Workspace/api-wrapper/deploy.php:17\nPHP   5. array_map() phar:///usr/local/bin/deployer.phar/src/functions.php:103\nPHP Fatal error:  Uncaught exception 'RuntimeException' with message 'Object `build:package` does not exist in ScenarioCollection.' in phar:///usr/local/bin/deployer.phar/src/Collection/Collection.php:24\nStack trace:\n#0 phar:///usr/local/bin/deployer.phar/src/Task/Scenario/ScenarioCollection.php(21): Deployer\\Collection\\Collection->get('build:package')\n#1 phar:///usr/local/bin/deployer.phar/src/functions.php(102): Deployer\\Task\\Scenario\\ScenarioCollection->get('build:package')\n#2 [internal function]: {closure}('build:package')\n#3 phar:///usr/local/bin/deployer.phar/src/functions.php(103): array_map(Object(Closure), Array)\n#4 /home/krebs/Workspace/api-wrapper/deploy.php(17): task('deploy', Array)\n#5 phar:///usr/local/bin/deployer.phar/bin/dep(58): require('/home/krebs/Wor...')\n#6 /usr/local/bin/deployer.phar(4): require('phar:///usr/loc...')\n#7 {main}\n  thrown in phar:///usr/local/bin/deployer.phar/src/Collection/Collection.php on line 24\n```\n\nThe order should be irrelevant for the definition.\n  Version `3.0.0-beta.5`\n\n``` php\nrun('mkdir -p ./{last,current,new}');\n```\n\nThis is valid bash syntax and should create the three folders at once, but it ends up in an exception.\n\n``` bash\n[RuntimeException]                                         \n  Environment parameter `last,current,new` does not exists.  \n\n\n\nException trace:\n () at phar:///usr/local/bin/deployer.phar/src/Server/Environment.php:55\n Deployer\\Server\\Environment->get() at phar:///usr/local/bin/deployer.phar/src/Server/Environment.php:93\n Deployer\\Server\\Environment->parse() at phar:///usr/local/bin/deployer.phar/src/functions.php:187\n run() at /home/krebs/Workspace/api-wrapper/deploy.php:28\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/deployer.phar/src/Task/Task.php:52\n Deployer\\Task\\Task->run() at phar:///usr/local/bin/deployer.phar/src/Executor/SeriesExecutor.php:40\n Deployer\\Executor\\SeriesExecutor->run() at phar:///usr/local/bin/deployer.phar/src/Console/TaskCommand.php:105\n Deployer\\Console\\TaskCommand->execute() at phar:///usr/local/bin/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:253\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/deployer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/deployer.phar/src/Deployer.php:92\n Deployer\\Deployer->run() at phar:///usr/local/bin/deployer.phar/bin/dep:62\n```\n Vote +1 for \n\n``` php\nrun('cd {{deploy_path}}/release & ...');\n```\n\nBecause it like PHP template syntax ^^\n Seems reasonable. Thats the Jinja2-syntax, which is taken over by several systems (like twig) and is pretty widespread (for example see [Ansible](http://docs.ansible.com/template_module.html)). While you are at it: It should allow whitespaces too :smile:  `{{  foo  }}`. Maybe you can find a ready-to-use parser?\n  If I am not mistaken, it is possible to have `phpseclib` output what is currently outputted when `exec` is called with a callback.\n\nThis would allow us to follow the progression of a long running command (which can let us know if there's a problem or if everything is working correctly).\n @elfet No, I've never used phpseclib. But [this page](http://phpseclib.sourceforge.net/ssh/examples.html#callback) from their documentation seems to show a simple example of how to do it.\n\nMy guess is that there's more work than that to get it to work properly.\n I do not see myself working on this anytime soon, so no.\n  This is done to support applications which return a non-zero exit status but do not output error messages to stderr.\n [Grunt](http://gruntjs.com/) for example.\n\nIt is not rare for developers to write to stdout instead of stderr and return a non-zero exit status.\n I'd say better always display both stdout and stderr when throwing the RuntimeException.\n :+1: \n   @elfet In regards to what specifically?\n  Version 3 supports stage environments for deployment.\nThe branch to use is set with environment parameter, eg:\n`env('branch', 'master');`\nHow do I set this to a specific stage environment?\n Just put it to the stage definition like this?\n\n```\nserver( 'production', 'myserver' )\n    ->env('deploy_path','/var/www/myweb')\n    ->user( 'mydeployuser' )\n        ->env('branch', 'master')\n    ->pubKey();\n```\n Seems to work perfectly! Sorry for adding another issue here!\n  As capistrano as this is a very common pratice to copy files between two deployments.\n\nA common use case is with composer and the vendor dir : it can be simply copied to gain time.\n This can't be done if dependencies have changed. You'd either have to monitor `composer.json/lock` between deployment and decide whether or not it has changed => needs to run `composer install` or blindly assume dependencies won't _ever_ change (don't do that).\n\nFurthermore, what kind of use case do you have that makes composer takes _minutes_ to install? Are you using `composer update` by any chances? Composer uses a cache mechanism which will make reinstalling the same libraries/dependencies extremely fast since it will be similar to a folder copy, so I don't see the point of that use case.\n\nLet me know if I'm missing something...\n @tomzx if you copy the entire directory, composer check the states of dependancies. The composer install command is always executed to ensure that a change is taken in charge. Try this work!\n\nTake a directory make a composer install, in other part make a composer update which create change and copy the lock file in the first folder. The composer install update the dependencies naturally (i think with checking composer.json of each dependencies).\n\nFor times : \n\n```\n    rm -rf vendor\n    time composer install \n    real    0m54.926s\n```\n\nwith only one dev dependancy\n\nand the case is the same with bower : \n\n```\n   real    0m38.031s\n```\n\nso 16s gain on just two directories and the use case could be make by another local ip databases or many other personnal stuff.\n i had retry the test after you affraid me and it's sure if the composer.lock change all dependencies are updated. And to be honnestly it's a normal thing or composer wouldn't be a good package manager\n\ni don't know why i don't trust me in this case...\n\nthe log : \n\ncomposer install\nLoading composer repositories with package information\nInstalling dependencies (including require-dev) from lock file\n- Removing doctrine/doctrine-bundle (v1.3.0)\n- Installing doctrine/doctrine-bundle (v1.4.0)\n  Downloading: 100%\n- Removing michelf/php-markdown (1.4.1)\n- Installing michelf/php-markdown (1.5.0)\n  Downloading: 100%\n- Removing sensio/distribution-bundle (v3.0.16)\n- Installing sensio/distribution-bundle (v3.0.18)\n  Downloading: 100%\n\nGenerating autoload files\nUpdating the \"app/config/parameters.yml\" file\nClearing the cache for the dev environment with debug true\n @nicodmf I think you should use symbolic link (shared_dirs and shared_files) for releases.\n\n``` php\nset('shared_dirs', [\n    'app/log',\n    'app/cache',\n    'vendor',\n    'web/upload',\n]);\nset('shared_files', [\n    'app/config/parameters.yml',\n    'composer.lock',\n]);\n```\n\nIn the first deploy (`composer install`) all vendors will install to `shared/vendor` folder and make content for `composer.lock` file. In next time deploy (`composer install`) will read `shared/composer.lock` file and find installed vendors in `shared/vendor`. If vendors haven't any update, it will not change and generating autoload files.\nI think current spec of deployment symfony project is ok.\n @oanhnn If you make that you cannot have roolback\n\nIn fact this technic is in capistrano, and i think deployer has the same background. \n\nFor symfony projects, we are far to have all capifony features. But as capistrano 2 is ended, that deployer is in php, i think this project is a good place to give features presents in capifony.\n Afaik in capistrano3 this task is actually a recipe and it is pretty simple (failsafe, \"stupid\", ... :wink: ). Indeed it simply copy files and folders from the current release to the release candidate. I think that's the best approach, because it leaves the both releases entirely independent. And as a recipe it is optional anyway.\n\nLike @nicodmf mentioned: Symlinks in this case is just wrong. Thats not, what one want here.\n It would make more sense if that was set in the config and not at deploy time.\n Agree with @tomzx \n I am just starting to use deployer and I think that copying the whole directory of the release and then performing a `git pull` is certainly better the doing every time a `git clone`. This will surely save time also with composer, since it will have only to download the new dependencies specified in the `composer.lock` file and not all of them.\n\nAnother option could be renaming the oldest release directory (which would anyway be deleted during the cleanup) and start from there. In such a way, we would save even the time of copying the whole release.\n\nIn both cases I think that this should not be specified at deploy time, but in configuration, having various options to choose from.\n This can be acomplished using `rsync` recipe. there's task `rsync:warmup` which does exactly what You need - copies last release to new one. You don't have to rsync anything up there, but simply after `rsync:warmup` do `git pull` instead of `git clone`.\n In 2.x I added a feature for copy vendors based on the value of the parameter composer_copy_vendors. I just noticed that it was missing in 3.x a few hours ago and started reimplementing it before I found this issue.\n  The last 2.x release to have one was 2.0.1. \n\n It's not really clear which version of deployer.phar is linked from the deployer.org website. It would be good if each release had one so we could grab it from github.\n Also perhaps have two links on the website. One to latest 3.x and one to latest 2.x\n The Stable Link is not working\n np btw nice tool :+1: \n The last 2.x release to have one was 2.0.5.  Currently the phar file are 2.0.2 version\n  I've noticed that all my deployments now fail because of composer. But composer is working fine however deployer seem to be failing.\n\nThe problem appears to be because of this change in composer:\nhttps://github.com/composer/composer/commit/cb336a5416595efa321c024735e6452c9c7df106\n\nIt's now outputting a LOT of messages on to stderr even when things work fine. I'm being caught out by \"Loading composer repositories with package information\".\n\nThis has stopped me being able to deploy. The only work around I can see at the moment is to find an older composer.phar and put it in my repo so deployer doesn't download it.\n\nI'm raising this with the composer project and it seems mad to throw every message out as an error.\n Issue on composer project: https://github.com/composer/composer/issues/3792\n This is where the changes are discussed: https://github.com/composer/composer/pull/3715\n You can build new deployer.phar from 2.x branch. And run it without ssh2 php extension.\n For me works fine as hot solution.\n Weird, I tried it with the latest code earlier and still got an issue. But just built again and it works. Maybe a problem between keyboard and chair this end.\n   @elfet With the latest change, I've created an global variable called `release_identifier`, which is more generic than before, and allows users to redefine how they want their release identifier to work so they could use the old numbering system if they prefer it).\n Or the VCSs revision/hash. Just saying :smile: \nBut that would need a custom cleanup strategy as well ... maybe ignore my hash-suggestion, but maybe somebody should mention this somewhere (\"release identifiers must be fully ordered\" or something)\n If I'm not mistaken, the way Capistrano does it is to append the release identifier at the end of a file containing the list of releases when a release is successfully published. Whatever the identifier is, it'll be possible to figure out which release came before/after which one based on the ordering in the file. It shouldn't be too hard to implement this feature if enough people want it.\n Just tried it myself: Capistrano3 keeps a log of revision it deployed, but that seems to be just a log.\n\n``` bash\n$ cat revisions.log \nBranch master (at bdd236b) deployed as release 20150318214035 by sebastian\n```\n\nIt still creates the actual deployments into folders based on the timestamp and delete them in order. However, that doesn't me `deployer` can't do it differently :smile: \n Will be implemented in Deployer v4.\n  At page http://deployer.org/docs/servers i can see information:\n\n> This function gets 3 parameters server(server_name, host, port) and return a Deployer\\Server\\Configuration object which contains the server configuration.\n\nBut really function `server` now return `Deployer\\Server\\Builder` instance. Is it right?\n\nBefore i used v2.0.2.\n I've updated deployer with self-update command. When I did this deployer has downloaded 2.0.5 version. However this version (2.0.5) was 3.0+ really. That's why old recepies weren't working. I've built new deployer.phar from 2.x branch.\n Problem not resolved if extension ssh2 enabled!\nhttps://github.com/deployphp/deployer/issues/201\n  I've tried running deployment process today and got empty RuntimeException on \"Installing vendors\" task. \n\n```\nInstalling vendors\nRun task deploy:vendors on server main\n[***.***.***.***] cd /var/www/releases/2015022645728 && if [ -e /var/www/releases/2015022645728/composer.phar ]; then echo 'true'; fi\n[***.***.***.***] :: \n[***.***.***.***] cd /var/www/releases/2015022645728 && curl -s http://getcomposer.org/installer | php\n[***.***.***.***] :: #!/usr/bin/env php\n[***.***.***.***] :: All settings correct for using Composer\n[***.***.***.***] :: Downloading...\n[***.***.***.***] :: \n[***.***.***.***] :: Composer successfully installed to: /var/www/releases/2015022645728/composer.phar\n[***.***.***.***] :: Use it: php composer.phar\n[***.***.***.***] :: \n[***.***.***.***] cd /var/www/releases/2015022645728 && php composer.phar install --no-dev --verbose --prefer-dist --optimize-autoloader --no-progress\nRun task deploy:rollback on server main\nRolling back to previous release on server main\n[***.***.***.***] cd /var/www && rm -rf /var/www/releases/2015022645728\n[***.***.***.***] :: \n\n\n\n  [RuntimeException]                                       \n  Loading composer repositories with package information   \n  Installing dependencies from lock file                   \n    - Installing react/promise (v2.2.0)                    \n      Loading from cache                                   \n      Extracting archive                                   \n    - Installing guzzlehttp/streams (3.0.0)                \n      Loading from cache                                   \n      Extracting archive                                   \n    - Installing guzzlehttp/ringphp (1.0.5)                \n      Loading from cache                                   \n      Extracting archive                                   \n    - Installing guzzlehttp/guzzle (5.2.0)                 \n      Loading from cache                                   \n      Extracting archive                                   \n...\n    - Installing symfony/console (v2.6.4)                  \n      Loading from cache                                   \n      Extracting archive                                   \n  Generating optimized autoload files                      \n\n\n\nException trace:\n () at phar:///usr/local/bin/dep/vendor/herzult/php-ssh/src/Ssh/Exec.php:28\n Ssh\\Exec->run() at phar:///usr/local/bin/dep/src/Server/Ssh2.php:94\n Deployer\\Server\\Ssh2->run() at phar:///usr/local/bin/dep/src/functions.php:115\n run() at /var/www/cs-cp-deploy/vendor/boomers/deployer-recipes/src/default.php:166\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Runner.php:45\n Deployer\\Task\\Runner->run() at phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:168\n Deployer\\Console\\RunTaskCommand->runSeries() at phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:118\n Deployer\\Console\\RunTaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:253\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:114\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:51\n require() at /usr/local/bin/dep:4\n```\n\nBut this command `php composer.phar install --no-dev --verbose --prefer-dist --optimize-autoloader --no-progress` works fine without deployer.\nDeployer version: 2.0.2\n Same problem here.\n\nThanks.\n I've updated deployer to 2.0.5 and I experience the same problem. The .phar @elfet proved is a 404. What to do now?\n How is it fixed? We installed deployer 2.0.5 using composer and we are still getting the same error. \n Unfortunately not, we're getting (still) the same error.\n @elfet I see that the fix is done inside the PhpSecLib class but the Ssh\\Exec class is trowing the exception. \nhttps://github.com/Herzult/php-ssh/blob/master/src/Ssh/Exec.php#L28\n If I set `set('use_ssh2', false);` then it works so it's fixed for the PhpSecLib server type and not the SSH2 server type\n Done! \n  Composer now outputs non-error messages to stderr. The `run` function should be check the exit status of the command, not the error output.\n Yep it was annoying but some applications use std error even though its not an error. Checking the exit status is a more reliable way to tell if the command was successful. 0 means Ok, any other number means there was an error\n  At the moment, if you are in `-vvv` mode (debug), you get a `RuntimeException` if there's an issue while running `deployer`. However, I think it would be very useful to be able to inspect the complete output log of the comment if necessary.\n\nHere's an example of what is currently outputted.\n\n```\n  [RuntimeException]                                                           \n  npm WARN package.json -stripped-@0.0.1 No repository field.               \n  npm WARN excluding symbolic link build/defs-config.json -> ../defs-config.j  \n  son                                                                          \n  sh: 1: gm: not found                                                         \n  sh: 1: convert: not found                                                    \n  npm WARN optional dep failed, continuing gmsmith@0.4.5                       \n  sh: 1: phantomjs: not found                                                  \n  npm WARN optional dep failed, continuing phantomjssmith@0.4.6                \n  npm WARN engine pngjs@0.4.0: wanted: {\"node\":\"0.8.x\"} (current: {\"node\":\"0.  \n  10.36\",\"npm\":\"1.4.28\"})                                                      \n  ./util/has_cairo_freetype.sh: line 4: pkg-config: command not found          \n  gyp: Call to './util/has_cairo_freetype.sh' returned exit status 0. while t  \n  rying to load binding.gyp                                                    \n  gyp ERR! configure error                                                     \n  gyp ERR! stack Error: `gyp` failed with exit code: 1                         \n  gyp ERR! stack     at ChildProcess.onCpExit (/usr/lib/node_modules/npm/node  \n  _modules/node-gyp/lib/configure.js:343:16)                                   \n  gyp ERR! stack     at ChildProcess.emit (events.js:98:17)                    \n  gyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js  \n  :820:12)                                                                     \n  gyp ERR! System Linux 3.2.0-23-generic                                       \n  gyp ERR! command \"node\" \"/usr/lib/node_modules/npm/node_modules/node-gyp/bi  \n  n/node-gyp.js\" \"rebuild\"                                                     \n  gyp ERR! cwd /var/www/test-target/releases/20150225125802/node_modules/grun  \n  t-spritesmith/node_modules/spritesmith/node_modules/canvassmith/node_module  \n  s/canvas                                                                     \n  gyp ERR! node -v v0.10.36                                                    \n  gyp ERR! node-gyp -v v1.0.1                                                  \n  gyp ERR! not ok                                                              \n  npm WARN optional dep failed, continuing canvassmith@0.2.4                   \n```\n\nI suggest that by default, a `deployer-$server_name.log` file be created in the folder where execution happened and which contains either the full log of all the commands up to this point, or only of the command that failed.\n  If cd was given {release_path} as target path, it would attempt to run a command to figure out what the value of {release_path} is, which, in the process, would also want to know the value of {release_path} and so on.\n\nThe fix simply parses the value as it is given, thus making the result static instead of a closure.\n  If the shared paths do not exist in the release_path directory and those shared directories have a depth > 1, the directory structure must be created before symlinking can be done.\n  Hi!\nI'm currently using Deployer for deploying WordPress Bedrock instances.\nThe common-recipe fails on some settings but it is close :-)\nWould it be ok to add a bedrock.php -recipe to the repo dev-master for merge? \n I'm not sure because Roots Bedrock is a very specific environment.\n It's all ok for me but I'm sure it will create a lot of problems for other WordPress-users :-)\n No need for a Bedrock recipe! The newly updated common.php does exactly all things right.\nThanks!\nI will write a blog post to all this for us Bedrock developers :-)\n  Still getting these errors when composer update the dev-master (3) fetched today.\n\n``` bash\n\n[InvalidArgumentException]\n  Package is not installed: ext-ssh2-0.12.0.0\n\nException trace:\n () at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/src/Composer/Installer/LibraryInstaller.php:120\n Composer\\Installer\\LibraryInstaller->uninstall() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/src/Composer/Installer/InstallationManager.php:190\n Composer\\Installer\\InstallationManager->uninstall() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/src/Composer/Installer/InstallationManager.php:139\n Composer\\Installer\\InstallationManager->execute() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/src/Composer/Installer.php:572\n Composer\\Installer->doInstall() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/src/Composer/Installer.php:222\n Composer\\Installer->run() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/src/Composer/Command/UpdateCommand.php:130\n Composer\\Command\\UpdateCommand->execute() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:252\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/src/Composer/Console/Application.php:146\n Composer\\Console\\Application->doRun() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/src/Composer/Console/Application.php:83\n Composer\\Console\\Application->run() at phar:///usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar/bin/composer:43\n require() at /usr/local/Cellar/composer/1.0.0-alpha9/libexec/composer.phar:24\n\n```\n composer update\n I always do as I use the Composer frequently :-)\nNope, the same result. The binding to ext-ssh2 fails.\nThe php55-ssh2 is installed in my OSX. But what is ext-ssh2?\n But, wait! I have already done a full pull from the git. composer.json is the exact same as dev-master!\n\n``` json\n{\n    \"name\": \"deployer/deployer\",\n    \"description\": \"Deployment Tool\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Anton Medvedev\",\n            \"email\": \"anton@elfet.ru\"\n        }\n    ],\n    \"autoload\": {\n        \"psr-4\": {\n            \"Deployer\\\\\": \"src/\"\n        }\n    },\n    \"bin\": [\n        \"bin/dep\"\n    ],\n    \"require\": {\n        \"php\": \">=5.4.0\",\n\n        \"elfet/pure\": \"~1.1\",\n        \"symfony/finder\": \"~2.6\",\n        \"symfony/console\": \"~2.6\",\n        \"symfony/process\": \"~2.6\",\n        \"kherge/amend\": \"~3.0\",\n        \"herrera-io/version\": \"~1.0\",\n        \"phpseclib/phpseclib\": \"dev-master\"\n    },\n    \"require-dev\": {\n        \"phpunit/phpunit\": \"~4.5\"\n    },\n    \"suggest\": {\n        \"herzult/php-ssh\": \"For SSH support through native SSH2 extension\",\n        \"ext-sockets\": \"For parallel deployment\"\n    },\n    \"provide\": {\n        \"ext-ssh2\": \"*\"\n    }\n}\n```\n If I move herzult/php-ssh to require-dev then it all is ok.\n ``` json\n{\n    \"name\": \"deployer/deployer\",\n    \"description\": \"Deployment Tool\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Anton Medvedev\",\n            \"email\": \"anton@elfet.ru\"\n        }\n    ],\n    \"autoload\": {\n        \"psr-4\": {\n            \"Deployer\\\\\": \"src/\"\n        }\n    },\n    \"bin\": [\n        \"bin/dep\"\n    ],\n    \"require\": {\n        \"php\": \">=5.4.0\",\n\n        \"elfet/pure\": \"~1.1\",\n        \"symfony/finder\": \"~2.6\",\n        \"symfony/console\": \"~2.6\",\n        \"symfony/process\": \"~2.6\",\n        \"kherge/amend\": \"~3.0\",\n        \"herrera-io/version\": \"~1.0\",\n        \"phpseclib/phpseclib\": \"dev-master\"\n    },\n    \"require-dev\": {\n        \"phpunit/phpunit\": \"~4.5\",\n        \"herzult/php-ssh\": \"~1.1\"\n    },\n    \"suggest\": {\n        \"ext-sockets\": \"For parallel deployment\"\n    },\n    \"provide\": {\n        \"ext-ssh2\": \"*\"\n    }\n}\n```\n  Adds a box.json file that should replace the configuration used in the build file.\nRemoves the old build file (since it is replaced by the configuration file).\n\nFile size goes from 3 MB to ~485 KB.\n\nReference: #190\n Nice job @tomzx \nBox really makes it simple to package an app. \n\nI would like to add that enabling gzip compression could lead to php installations (without gzip extension enable), to fail loading the phar. Also Composer [had an issue](https://github.com/composer/composer/blob/1.0.0-alpha9/src/Composer/Compiler.php#L131) with this before.\n\nRegarding the size of the phar, I guess we (developers) have reasonably fast bandwidth to transfer a larger file, thus making it less relevant.\n @elfet Why do you prefer your own build script to using a library that is used/tested by many? What would make you change your mind?\n I agree with @tomzx. Nice job\n  During the deployment i am using multiple tasks. All tasks are called internal during the deployment, however i do not want to expose all tasks to CLI. It would be great if you can tag tasks as non-public. Non-public tasks should not be callable via CLI directly.\n :thumbsup:\n  Hi,\n\nAt the moment we are still using Deployer 2, since we haven't had the time to upgrade to version 3. Unfortunately I've noticed today that elfet/php-ssh has been abandoned which results in a missing dependencies when updating composer.. Currently the only fix I can think of, is creating our own checkout and changing the dependency to herzult. Do you have a better idea for this?\n\nThanks in advance,\nJeroen.\n  https://github.com/box-project/box2\n We could benefit from a few things such as gzip compression.\n\nIt would also convert a build script into a simple configuration file.\n Closing, see discussion @ #193.\n  I can't find the stage functionallity in dev-master / v3.\nIs there another way of usage?\n  Reference: #186.\n I don't think `Deployer` falls into the library category. I think the tool category is more appropriate. One does not really make use of the `deployer` sources other than through the `dep` _binary_.\n\nI wouldn't pretend to know composer in depth, but I believe that if you `require` a library that has a `composer.lock`, it will not be considered during the dependency resolution step. Thus it shouldn't pose a problem to have one under version control.\n From [composer's documentation](https://getcomposer.org/doc/02-libraries.md#lock-file):\n\n# Lock file\n\nFor your library you may commit the `composer.lock` file if you want to. This can help your team to always test against the same dependency versions. However, this lock file will not have any effect on other projects that depend on it. It only has an effect on the main project.\n\nIf you do not want to commit the lock file and you are using git, add it to the `.gitignore`.\n  Hi,\n\nI don't think it is a good idea to include vendors like it was done in @ f3b8723a8b30fac2d3096f7dd4f32eadf21c7e8c. I'd suggest we revert this change and go back to how it was done before. Here is the reason why I think this:\n- `deployer` is not supposed to be included in a project using it as a composer dependency. Much like `composer`, it should be distributed as a `phar`. This way, users do not care about the minimum-stability as the `phar` encapsulates all the requirements.\n- Including future changes will be a pain, because it means we have to support/integrate these changes manually instead of simply building a `phar` with their latest revision. This brings me to the point that `deployer` should put its `composer.lock` file under revision.\n- Finally, going this route gives us a lot more flexibility. We can decide to switch library without having to care if it'll impact our users.\n\nLet me know what you think.\n I think we should look into what is suggested by [Matthias Noback](http://php-and-symfony.matthiasnoback.nl/2014/04/theres-no-such-thing-as-an-optional-dependency/). Basically, have `phpseclib` as the main ssh handler and `herzult/php-ssh` as a suggested dependency.\n\n```\n    \"require\": {\n        \"phpseclib/phpseclib\": \"dev-master\"\n    },\n    \"suggest\": {\n        \"herzult/php-ssh\": \"SSH support through ext-ssh2\"\n    },\n```\n\nAs for `phpseclib` stability, I believe you can replace the `dev-master@dev` to `dev-master` and it'll be considered \"stable\" (so no need to require it in the including `composer.json`). We should also try to encourage `phpseclib` to release a stable 2.x release so that we may depend on that instead of `dev-master`.\n\nReference: phpseclib/phpseclib#514\n What do you mean by \"not so smooth\"?\n :+1: Awesome.\n But why not move the herzult/php-ssh to require-dev?\n Happy me! Thanks!\n  Regarding issue with timeout running local tasks that requires long execution.\nThis is a fix that allows the command to be attached with a timeout parameter optionally.\n fixing spaces\n Sorry, I'm new to pull requests... thanks!\n  Regarding setting the php timeout max_execution_time, set_time_limit, etc the Deployer gives me a timeout when transfering large files between remote and local.\n\nSymfony\\Component\\Process\\Exception\\ProcessTimedOutException\nThe process \"...\" exceeded the timeout of 60 seconds.\n\nAny hint to increase the value of 60s?\n Making a pull request to fix this.\n What is a backtrace?\n This issue is solved with my accepted merge. Thanks!\n the same error:\n\n`\nExecuting task deploy:prepare\nExecuting task deploy:release\nExecuting task deploy:update_code\nExecuting task deploy:vendors\n\n  [Symfony\\Component\\Process\\Exception\\ProcessTimedOutException]\n  The process \"cd /srv/www/xxxx/dev.xxxxx.pl/releases/20160202154731 &&  composer install --no-dev --verbose --prefer-dist --optimize-autoloader --no-interaction\" exceeded the timeout of 300 seconds.\n`\n You can add a timeout parameter to the task. \n thx.\n  The documentation claims you can authenticate over SSH with a _public key_. It is impossible to authenticate with a public key. A private key is needed to connect to a foreign host over SSH.\n\nThe following example from the documentation makes no sense:\n\n``` php\nserver(...)->pubKey('~/.ssh/id_rsa.pub', '~/.ssh/id_rsa', 'pass phrase');\n```\n\nHere are the problems:\n- The method name implies that a public key can be used for authentication. As discussed, this is impossible.\n- The second parameter is a private key. That is; you're passing a private key to a method named _pubKey_. This API makes no sense.\n\nI was considering using Deployer but I would be remiss to use software that is so chronically confused about secure authentication mechanisms.\n Hi @Bilge, I had the same questioning and found the following answer in the phpseclib documentation.\n\n> Some private key formats define the public exponent and some don't.  Those that don't define it are problematic when used in certain contexts.  For example, in SSH-2, RSA authentication works by sending the public key along with a message signed by the private key to the server.  The SSH-2 server looks the public key up in an index of public keys and if it's present then proceeds to verify the signature.  Problem is, if your private key doesn't include the public exponent this won't work unless you manually add the public exponent. phpseclib tries to guess if the key being used is the public key but in the event that it guesses incorrectly you might still want to explicitly set the key as being public.\n\nNote that it is a public/private key authentication, hence the name.\n I propose not using this project because you don't understand what you're doing.\n  @elfet I'm not really sure what the problem is, can I help somehow?\n Okay so it works if I manually require phpseclib/phpseclib:2.0.*@dev first, so if you change the deployer package require to 2.0.*@dev instead of dev-master@dev maybe it'll work?\n Hardcoding a dependency version is fine in my opinion. You can always change it if you need to update!\n\nMy issue with this though is that the phpseclib package apparently isn't in 2.x stable (last stable is 0.3?) and you're requiring 2.x@dev so if you want to use deployer you need to specify minimum-stability as dev in your composer file. Otherwise that dependency will fail :(\n Yes that works :) But the @dev is the same as saying I want the dev/beta stuff and not stable stuff, but I guess that's because phpseclib has no stable package right?\n When will this get to composer package? I still experience the same error in 2.x:\n\n```\ncomposer require --dev deployer/deployer:'~2.0'\n./composer.json has been updated\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\n  - Installing elfet/php-ssh (v1.1.0)\n    Downloading: connection...    Failed to download elfet/php-ssh from dist: The \"https://api.github.com/repos/elfet/php-ssh/zipball/439becf180272542cbf154df4856a49dd3c4bf04\" file could not be downloaded (HTTP/1.1 404 Not Found)\n    Now trying to download from source\n  - Installing elfet/php-ssh (v1.1.0)\n    Cloning 439becf180272542cbf154df4856a49dd3c4bf04\n\n\n\n  [RuntimeException]                                                                         \n  Failed to clone git@github.com:elfet/php-ssh.git via git, https, ssh protocols, aborting.  \n  - git://github.com/elfet/php-ssh.git                                      \n```\n\nand when I try to install dev or >=2.0.2:\n\n```\ncomposer require --dev deployer/deployer:'~2.0, >=2.0.2'                                                                                                        \u23ce\n./composer.json has been updated\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\nYour requirements could not be resolved to an installable set of packages.\n\n  Problem 1\n    - deployer/deployer v2.0.5 requires phpseclib/phpseclib 2.0.*@dev -> no matching package found.\n    - deployer/deployer v2.0.4 requires phpseclib/phpseclib 2.0.*@dev -> no matching package found.\n    - deployer/deployer v2.0.3 requires phpseclib/phpseclib 2.0.*@dev -> no matching package found.\n    - deployer/deployer v2.0.2 requires phpseclib/phpseclib 2.0.*@dev -> no matching package found.\n    - Installation request for deployer/deployer ~2.0, >=2.0.2 -> satisfiable by deployer/deployer[v2.0.2, v2.0.3, v2.0.4, v2.0.5].\n\n\n```\n  Merge this to receive a badge indicating the number of issues in the ready column on your waffle.io board at https://waffle.io/deployphp/deployer\n\nThis was requested by a real person (user elfet) on waffle.io, we're not trying to spam you.\n  Here's my take on the `cd` function. I've also added a `within` function which allows the user to provide a callback:\n\n``` php\n<?php\n\ntask('test', function() {\n    cd('my_dir');\n    within('{some_dir}', function() {\n        run('some command');\n    });\n    // back in my_dir\n});\n```\n\nAfter the `within` function is called, the environment is reverted to the previous working path.\n\nThis current implementation only support going to an absolute path. We may consider changing the implementation to support relative navigation if that is something people would want (I don't think that is the case though).\n\nReference: #177.\n I've forced pushed the changes you've asked. Please take the time to review them.\n\nThanks!\n @elfet Pretty sure that should work (at least it did when I wrote the functionality). I'll pull the latest changes and see if that still works.\n\n**Edit:** Works fine for me:\n\n``` php\ntask('test', function () {\n    run('pwd');\n\n    within('{deploy_path}/current', function() {\n        run('pwd');\n    });\n\n    cd('{deploy_path}');\n    run('pwd');\n    cd('{deploy_path}/shared');\n    run('pwd');\n\n    within('{deploy_path}/current', function() {\n        run('pwd');\n    });\n\n    run('pwd');\n});\n```\n\n```\n\u27a4 Executing task test\n\u2937 on [production]\nRun: cd /var/www/test-target && pwd\n# /var/www/test-target\n# \nRun: cd /var/www/test-target/current && pwd\n# /var/www/test-target/current\n# \nRun: cd /var/www/test-target && pwd\n# /var/www/test-target\n# \nRun: cd /var/www/test-target/shared && pwd\n# /var/www/test-target/shared\n# \nRun: cd /var/www/test-target/current && pwd\n# /var/www/test-target/current\n# \nRun: cd /var/www/test-target/shared && pwd\n# /var/www/test-target/shared\n# \n\u2936 done on [production]\n\u2714 OK\n```\n I assume you're getting this error: `PHP Fatal error:  Maximum function nesting level of '100' reached, aborting!`?\n\nIt has to do with the fact that resolving the environment variable `release_path` will generate a recursive call.\n\n``` php\nenv('release_path', function () {\n    return str_replace(\"\\n\", '', run(\"readlink {deploy_path}/release\"));\n});\n```\n\n`cd('{release_path}')` -> `workingPath()` -> `run(\"readlink {deploy_path}/release\")` -(cycle)-> `workingPath()` -> `run(\"readlink {deploy_path}/release\")`.\n\nBasically, it tries to resolve `release_path` by trying using itself in the process, which ends up generating a loop.\n\nOne possible way to fix this might be to make the `release_path` and `current` environment variables strings instead, as such:\n\n``` php\n/**\n * Return release path.\n */\nenv('release_path', '{deploy_path}/release');\n\n/**\n * Return current release path.\n */\nenv('current', '{deploy_path}/current');\n```\n\nBasically, any variable that would be used in the `working_path` is a closure/callable, a run cycle will occur. Thus, a probably better fix would be to resolve directly the path given to `cd` when it is called. This way, the `working_path` value is always a string with no environment variable that needs to be resolved.\n\n``` php\nfunction cd($path)\n{\n    env('working_path', env()->parse($path));\n}\n```\n  At the moment, the `common.php` file does not provide a way to clone/deploy a specific branch/revision (it will clone the `HEAD` of the remote repository).\n\nI think it is critical for deployer to support the deployment of specific branch/revision for it to be successful.\n\nHere are the requirements:\n- Support cloning with submodules\n- If the deployment method is cloning, prefer `--depth=1` (already supported)\n- Support checking out a specific branch/revision\n Capistrano's take on this is to have a `{deploy_path}/repo` directory where they clone the entire repository. When they want to deploy, they only have to fetch the latest changes from the repository, checkout the appropriate branch/revision and then rsync the folder to the `{release_path}`.\n\nIt is a pretty elegant solution in that, compare to cloning like we currently do, it uses the fact that most of the repository is already available locally. The downside is that if your repository is big, you'll have it hanging around in your `{deploy_path}`.\n\nSince clone/checkout is already a task (`deploy:update_code`), I think what makes the most sense would be to have this configurable as some sort of [strategy](https://en.wikipedia.org/wiki/Strategy_pattern).\n\nI'll think a little bit more about the problem and I'll see if I can provide a PR.\n Reference: 4a1c93f2d245b425fb3c288e04952cc43b1b22c2\n I've left a couple comments in the 4a1c93f2d245b425fb3c288e04952cc43b1b22c2 commit for you to review.\n\nI think it'd be also nice to implement the alternative solution of cloning/fetching from a /repos folder and then rsync-ing/copying the repos content to the /release folder.\n I have a question.\nI defined two servers, dev-svr and prod-svr. My repo has two branchs, `develop` and `master`\nI want deploy branch `develop` on dev-svr before merged to branch `master` and deploy on prod-svr. Can you support my case?\nI expect code:\n\n``` php\n<?php\n// ....\nserver('dev-svr', '192.168.1.2', 22)\n    ->env('deploy_path', '/var/www/apps/dev')\n    ->user('dev')\n    ->forwardAgent()\n    ->stage(['dev'])\n    ->branch('develop')\n;\nserver('prod-svr', '192.168.1.2', 22)\n    ->env('deploy_path', '/var/www/apps/prod')\n    ->user('dev')\n    ->forwardAgent()\n    ->stage(['prod'])\n    ->branch('master')\n;\n// ...\n```\n @oanhnn With the current implementation, no, but that would indeed be interesting. I think it would be better to have branches as environment variables, so it can be used like @oanhnn suggests.\n\nIf the user passes a `tag` (which should have been a `revision`) then it'd force/prefer that tag over the branch.\n thank you @elfet \n   Great!\n  I think that the following syntax is much nicer than the second one.\n\n``` php\ncd('{some_path}');\nrun('my_super_command'); // in {some_path}\n```\n\n``` php\nrun('cd {some_path} && my_super_command');\n```\n\nThus my question: why was cd() removed in v3?\n Most tasks generally occur within a specific directory. I think the `cd` syntax follows the DRY (Don't Repeat Yourself) principle which is a good thing. Furthermore, since your preference (`cd`-ing on every command) still would work with `cd` support, it would probably be better to have it than not.\n\n``` php\ncd('{some_path}');\nrun('my_super_command');\nrun('my_super_command');\nrun('my_super_command');\nrun('my_super_command');\n```\n\n``` php\nrun('cd {some_path} && my_super_command');\nrun('cd {some_path} && my_super_command');\nrun('cd {some_path} && my_super_command');\nrun('cd {some_path} && my_super_command');\n```\n\nI do understand that the removal of `cd` (and the working path paradigm) was to simplify the `run` function. I guess the problem is that the phpseclib (and I assume the ssh2 extension) both run one-off commands where you are back to the home directory after each command, which means if we want emulate a working directory, we have to do it ourselves.\n  Hi,\n\nWould love to add an option or argument to my task, is it possible ?  How can we pass a parameter to the task ?\n\nThks\n  This pull request includes:\n- Implement [SSH Agent Forwarding Feature #134 ](https://github.com/deployphp/deployer/issues/134)\n- Unit test for `Builder::forwardAgent()` method  \n\nHow to use?\n\n``` php\n<?php \n// file: deployer.php\nserver('deployer', 'domain.com', 22)\n    ->forwardAgent();\n\n```\n I test and working good with my system.\nHere is my `deployer.php` file\n\n``` php\n<?php\nrequire 'recipe/common.php';\n\nserver('dev', 'domain.com', 22)\n    ->user('dev')\n    ->forwardAgent()\n    ;\n\nset('repository', 'git@github.com:oanhnn/slim-skeleton.git');\nset('deploy_path', '/var/www/apps/slim');\nenv('deploy_path', get('deploy_path'));\n\ntask('deploy:start', function() {\n    run(\"if [ ! -d {deploy_path} ]; then mkdir -p {deploy_path}; fi\");\n});\n\n/**\n * Success message\n */\ntask('deploy:end', function () {\n    $host = config()->getHost();\n    writeln(\"<info>Successfully deployed on</info> <fg=cyan>$host</fg=cyan>\");\n});\n\n/**\n * Main task\n */\ntask('deploy', [\n    'deploy:start',\n    'deploy:prepare',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:symlink',\n    'cleanup',\n    'deploy:end'\n])->desc('Deploy your project');\n```\n\nPlease allow forward agent function with ssh configure follow post https://developer.github.com/guides/using-ssh-agent-forwarding/\n I think you should change function `server()` in `functions.php` for always using `PhpSecLib` until SSH2 extension support this feature\n @oanhnn, how is it that you have agent forwarding in `phpseclib` while it appears that the issue is not yet merged into `master` on their side? Have you manually patched up your deployer installation with the current PR  from there? If so, it means this PR is incomplete and will not work.\n Sorry, I am vacationing Tet holiday.\nI have problem with forward agent when change from using `capistrano` to using `deployer`.\nI was waiting and follow this feature, but i need this to deploy my project (from bitbucket.org) and can not wait longer. I was search solution and found [issue 4235](https://github.com/laravel/framework/issues/4235) on Laravel Framework.\nI was try implement this feature and success with my system.\nI think `phpseclib` was implement this feature but didn't create document, and not yet merged.\nI am following this feature after Tet holiday ^^\n   +1 for YmdHis\n I agree that numbers are more readable and that `ls -l` would list the modification time of the folder, but the website (http://deployer.org/docs/recipes) lists that the format is `YmdHis`. Furthermore, the various deployment tools I've seen (capistrano, rocketeers, magallanes) seem to prefer it over numbered release.\n\nI think it might be that if you are releasing to many servers at once and that the release name is `YmdHis` from the deploying machine, then all remote servers will have this same folder name, while a numbered release may not (if servers are added with time and their release number do not match). Then it is not possible to figure out which release matches which on the remote server from a simple file listing.\n\nOn the other hand though, it would still be possible to have some sort of centralized numbering system so that any deployment to many server deploys to the same release folder number.\n :+1: \n @elfet, that's why I said we get the timestamp/datetime from the deployment machine (aka your desktop/laptop) not the deployed \"at\" machine. This value is exactly the same for every deployment on every machine.\n\nSome simple like this in your recipe file:\n\n``` php\n$release = date('YmdHis');\n\ntask('deploy:release', function () use ($release) {\n    $releasePath = \"{deploy_path}/releases/$release\";\n\n    run(\"mkdir $releasePath\");\n\n    run(\"cd {deploy_path} && if [ -e release ]; then rm release; fi\");\n\n    run(\"ln -s $releasePath {deploy_path}/release\");\n})->desc('Prepare release');\n```\n Both approaches are valid. I would go for YmdHis, because it's the standard in deployment tools.\nIncremental release number could be used if a parameter is set: e.g.: set('release_naming', 'incremental'); whereas the default would be 'timestamp'.\n @gordalina Agreed. I thought about the same thing, but I decided against suggesting it for the sake of keeping the system simple (as we'd have to handle both case and consider them when making any changes in the future).\n @tomzx I favor convention over configuration. The configuration option is a solution in case @elfet has a strong opinion about incremental release names.\n @elfet Looks like you went a bit fast there. The `date` call was supposed to be done outside of the task so that all servers would use the same timestamp.\n  Create shared directories in the release path.\nCreate writable directories (if needed).\n :+1: for atomic deploy\n      Hi,\n\nI'm trying to use the Deployer 3 Beta 3...I have downloaded the archive, built the phar, installer it in bin directory.\nBut then when I try to follow the Get Started example, as soon as I add \"require 'recipe/symfony.php'; \" I got these errors whn I run dep\n\nPHP Warning:  array_map(): An error occurred while invoking the map callback in phar:///usr/local/bin/dep/src/functions.php on line 102\n\nAnd \nPHP Fatal error:  Uncaught exception 'RuntimeException' with message 'Object `deploy:start` does not exist in ScenarioCollection.' in phar:///usr/local/bin/dep/src/Collection/Collection.php:24\n\nCould you help ?\n\nThks\n Thank you...step by step I'm trying to correct it...without doc not so easy ;-)\n And I have to say this project looks great ! Thank you !\n I have a strange issue now. I almost managed to make everything work except that when I launch the \"dep deploy\" the \"deploy:assetic:dump\" task return an error \"Unable to find file \"@CmfCreateBundle/Resources/public/vendor/hallo/src/hallo.coffee\"\n(this file is downloaded during the vendor step, it's a composer post install script \"Symfony\\Cmf\\Bundle\\CreateBundle\\Composer\\ScriptHandler::downloadCreateAndCkeditor\")\n\nThe strange thing is that if a relaunch the \"dep deploy:assetic:dump\" it works...\n Sorry it's not a problem with Deploy, it's a problem of cache warmup and assetic...don't really understand but found a solution.\n  There are no phars for 2.0.4/3 and also 3.x releases, how do i update?\n Just build them with the included build script!\nEg, \n`php ./build`\nPerhaps you need to enable the write mode for phar-files in php.ini.\n I guess I could do just that, but it's much more easy to just download it\n Thanks\n  I've built the latest package for deployer.phar and getting this error when using the deployer:\n\nPHP Fatal error:  Class 'Net_SFTP' not found in phar:///usr/local/bin/dep/src/Server/Remote/PhpSecLib.php on line 48\n\nAny clue?\n dev-master, checked out today\n SSH2 missing in my php installation.\nSolved the error with:\n\n``` bash\nbrew install php55-ssh2\n```\n\nhttp://www.codexpedia.com/apache-server/install-phps-ssh2-extension-on-ubuntu-and-mac/\n  Like suggested here: https://github.com/deployphp/deployer/issues/128\n\nWhat you guys think? I have tested and worked fine.\n Why download `composer.phar` to the `release_path` when you could/should download it to the `shared_path` instead?\n\nAlso, it'd be nice if we could not pollute commands with framework specific environment variables (such as `SYMFONY_ENV`).\n @tomzx I'm ok with that. :+1: \n Awesome! :smile: \n   I'm closing this for now in favor of: https://github.com/deployphp/deployer/pull/173\n  https://phpunit.de/manual/current/en/textui.html#textui.clioptions\n\nBefore:\n\n![image](https://cloud.githubusercontent.com/assets/999232/6083927/bff4d032-ae13-11e4-97da-8b48f40e8184.png)\n\nAfter:\n\n![image](https://cloud.githubusercontent.com/assets/999232/6083936/cf2f02ca-ae13-11e4-9e49-69177e491c80.png)\n  `--depth` create a shallow clone with a history truncated to a limited number of revisions.\n  we have a very big main repository, which is not a problem for a normal deploy via git, but it is with this tool, as it does not update the git on a central place but creates a complete new checkout on every run.\n https://github.com/deployphp/deployer/blob/master/recipe/common.php#L80\n that reduces problems with big history, but not with big checkouts.\nYou would need to use something pull based, or somehow allow usage of the --reference flag.\nBut this needs maybe some bigger refctoring.\n #163 is probably what you're looking for.\n Shallow clone solves my problems.\n  How do I filter actions to only one server inside a task?\n I'm using the Deployer to pull data and files from the production to my Vagrant development environment (Bedrock).\nIn that case I just want to do the pull to this single machine and not to the server.\n\nI'm really happy to use the Deployer instead of Capistrano. I'm not a fan of Ruby :-)\n\nThanks!\n\n:+1: \n  I'm currently trying out master @ 293d9f7e13960516a3f78a2ebbf3eda7a5cad9de and I get the following errors running\n\n``` bash\nPHP Fatal error:  Call to undefined method Deployer\\Server\\Builder::path() in deploy.php on line 6\n```\n\nHere is the deploy.php (stripped anything that isn't useful to this issue).\n\n``` php`\n<?php\n\nrequire_once 'recipe/common.php';\n\nserver('production', '192.168.2.100')\n    ->user('www-data')\n    ->path('/var/www/test-target');\n```\n\nIt appears that @ 503e19234ca4a5ede62b155ee003271401fb950c, you did a major refactoring which removed `path()` from Configuration.\n\nWhat will be the way the `path` is defined in v3? Will it be through `set('deploy_path', '/var/www/test-target');`?\n Duplicate of #153.\n Actually, this should be in an UPGRADING.md file (like symfony does)\nOn qui, 5/02/2015 at 12:42 tomzx notifications@github.com wrote:\n\n> Closed #160 https://github.com/deployphp/deployer/issues/160.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/deployphp/deployer/issues/160#event-230730900.\n  Hi,\nPlease fix composer.json require section in the Deployer 2. It use old repo \"elfet/php-ssh\", that already droped.\n Hi,\nIt looks like there is still some issue with this. After i updated composer requirements to `\"deployphp/deployer\": \"2.0.4\"`\n\nit shows this error: \n\n```\nYour requirements could not be resolved to an installable set of packages.\n\n  Problem 1\n    - deployer/deployer v2.0.4 requires phpseclib/phpseclib 2.0.*@dev -> satisfiable by phpseclib/phpseclib[2.0.x-dev].\n    - deployer/deployer v2.0.4 requires phpseclib/phpseclib 2.0.*@dev -> satisfiable by phpseclib/phpseclib[2.0.x-dev].\n    - Removal request for phpseclib/phpseclib == 2.0.9999999.9999999-dev\n    - Installation request for deployer/deployer 2.0.4 -> satisfiable by deployer/deployer[v2.0.4].\n```\n\nWhen i put this in my composer.json it works fine:\n`\"phpseclib/phpseclib\": \"2.0.*@dev\"`\n\nIs this requirement to explicitly put _phpseclib_ dependency to composer?\n I'm having the same problems whatever version I try to require right now. Missing elfet/php-ssh for ~2.0 and phpseclib: no matching package found for versions above.\n :)\n  This is just a proposal because i prefer more fluent like that:\n\n``` php\nserver('name')\n    ->host('ec2-52-171-208-37.my-server.com')\n    ->port('9876')\n    ->path('/home/dir/dir')\n    ->user('user')\n    ->pubKey('~/.ssh/name.pub', '~/.ssh/name');\n```\n\ninstead of:\n\n``` php\nserver('name', 'ec2-52-171-208-37.my-server.com', '9876')\n    ->path('/home/dir/dir')\n    ->user('user')\n    ->pubKey('~/.ssh/name.pub', '~/.ssh/name');\n```\n @elfet Done! :smile: \n @elfet Yeah, lets wait. :smile: \n  Closes #155\n Glad that you like it\n Yep, i tested both\n By the way, nice job with the parallel executor :+1: \n  API to allow displaying that a task has failed but does not compromise the deployment.\nExample: [newrelic recipe](https://github.com/deployphp/recipes/blob/master/recipes/newrelic.php#L42) and [slack recipe](https://github.com/deployphp/recipes/blob/master/recipes/slack.php#L50)\n\nPossible APIs:\n- `writeln('Task has failed', ERROR)` - the second argument could be `OK` (default) or `ERROR`\n- `writeError('Task has failed')`\n- `error('Task has failed') - this would be only for recoverable errors, as fatal errors are thrown exceptions\n\n@elfet, let me know what you think\n I agree totally on simple solutions\n\nWe could use `writeln(<error>)` but it wouldn't fit into the way tasks are printed. E.g.: A task name is displayed, and at the end a green check is displayed, it could print a red cross (\u2717).\n\nA special exception could be thrown, for example `Deployer\\Exception\\NonFatalException` or something similar. Having a special exception would position the display logic in Deployer, rather than the task itself - as successful tasks do not have to write to the console, a task which caused an error should not as well (it follows the same principle).\n\nWhat do you think?\n Yes, i will\n   Do you want me to make the same pull request against master?\n  Hi ppl,\nI updated my dep today and start getting this message:\n\n Call to undefined method Deployer\\Server\\Builder::path() \n\nthis is my deploy.php\n\nrequire 'recipe/common.php';\n\nserver(\"main\", 'MYSERVER',22)\n    ->path(\"~/apps/ewallet\")\n\nanyone has this?\n\nthanks in advance\n i really do not know previous version but now i'm using:\nDeployer version 3.0.0-beta\n  Hi,\n\nI have a configuration file, say `config.php` which is shared among releases. The first time I deploy, it is generated in the `/shared` directory but it is still empty instead of having the original contents.\n\nIf this is a bug, I could provide a fix for this.\n\nupdate: it looks like the same is happening with shared directories. They are empty as well. It looks like it was meant for generated files/directories, but I have some initial content stored in git.\n Nice, will have a look at it soon, in a few days. For now I have moved the initial contents manually.\n I have same problem, and my solution is write a task `configure`\n\n``` php\n\n/**\n * Make shared_dirs and configure files from templates\n */\ntask('configure', function () {\n\n    /**\n     * Compiler template of configure files\n     * \n     * @param string $contents\n     * @return string\n     */\n    $compiler = function ($contents) {\n        if (preg_match_all('/\\{\\{(.+?)\\}\\}/', $contents, $matches)) {\n            foreach ($matches[1] as $name) {\n                $value = env()->get($name);\n                if (is_null($value) || is_bool($value) || is_array($value) || is_string($value)) {\n                    $value = var_export($value, true);\n                }\n                $contents = str_replace('{{' . $name . '}}', $value, $contents);\n            }\n        }\n        return $contents;\n    };\n\n    // Create shared dir if does not exist\n    foreach (get('shared_dirs') as $dir) {\n        run(\"mkdir -p {deploy_path}/shared/$dir\");\n    }\n\n    $finder = new \\Symfony\\Component\\Finder\\Finder();\n    $iterator = $finder\n        ->files()\n        ->name('*.tpl')\n        ->in(__DIR__ . '/shared');\n\n    $tmpDir = sys_get_temp_dir();\n\n    /*@var $file \\Symfony\\Component\\Finder\\SplFileInfo */\n    foreach ($iterator as $file) {\n        $success = false;\n        // Make tmp file\n        $tmpFile = tempnam($tmpDir, 'tmp');\n        if (!empty($tmpFile)) {\n            try {\n                $contents = $compiler($file->getContents());\n                $target   = preg_replace('/\\.tpl$/', '', $file->getRelativePathname());\n                // Put contents and upload tmp file to server\n                if (file_put_contents($tmpFile, $contents) > 0) {\n                    upload($tmpFile, 'shared/' . $target);\n                    $success = true;\n                }\n            } catch (\\Exception $e) {\n                $success = false;\n            }\n            // Delete tmp file\n            unlink($tmpFile);\n        }\n        if ($success) {\n            writeln(sprintf(\"<info>\u2714</info> %s\", $file->getRelativePathname()));\n        } else {\n            writeln(sprintf(\"<fg=red>\u2718</fg=red> %s\", $file->getRelativePathname()));\n        }\n    }\n});\n```\n\nand make template for configure files in `/shared` folder, same directory structure with `/shared` folder on server.\n\n```\n|-- bin\n|    |-- dep\n|-- shared\n|    |-- Config\n|        |-- app.php.tpl\n|-- vendor\n|-- deploy.php\n```\n\nAnd simple content of `app.php.tpl` file:\n\n```\n<?php\n// app.php.tpl\n$bool    = {{app.var.bool}};\n$string  = {{app.var.string}};\n$integer = {{app.var.integer}};\n$float   = {{app.var.float}};\n$array   = {{app.var.array}};\n$null    = {{app.var.null}};\n$empty   = {{app.var.empty}};\n```\n\nAnd in `deploy.php` file, i defined server and env vars:\n\n``` php\n\nserver('dev-server', '192.168.1.2', 22)\n    ->user('dev')\n    ->forwardAgent()\n    ->stage(['dev'])\n    ->env('deploy_path', '/var/www/apps/dev')\n    ->env('branch', 'develop')\n    ->env('app.var.bool', true)\n    ->env('app.var.string', 'abc')\n    ->env('app.var.integer', 100)\n    ->env('app.var.float', 10.05)\n    ->env('app.var.array', array('a' => 1, 'b' => 2))\n    ->env('app.var.null', null)\n    ->env('app.var.empty', '')\n;\n```\n\nAfter run this task, remote server has `/shared/Config/app.php` with contents:\n\n``` php\n<?php\n// app.php.tpl\n$bool    = true;\n$string  = 'abc';\n$integer = 100;\n$float   = 10.05;\n$array   = array(\n    'a' => 1,\n    'b' => 2\n);\n$null    = NULL;\n$empty   = '';\n```\n\n@elfet Should i put this task to common recipe ?\n @oanhnn Cool recipe, thanks!\n\nWhile it could be useful for my use case, I will try to implement the \"copy feature\" as described above as well. I think it should be default behaviour.\n @dirkluijk @oanhnn @elfet this is a cool feature, but also a very specific one. I would say it could sit as a recipe either at core or (i would vote for) the [3rd party external recipes project](https://github.com/deployphp/recipes).\n @dirkluijk @elfet @gordalina \nI created [a recipe for generate configure files](https://github.com/oanhnn/recipes/blob/master/recipes/configure.php)\nCan we close this issue ?\n I am closing thing issue but feel free to reopen if you think there needs to be more discussion.\n  Changed output when cloning repository, because of initialization of submodule. Git always output some text, and this is actually considered as error. Update provide possibility to deploy repository with submodules.\n This fixes issue #148\n  Tried configuring server with a pubkey and username / password combination. Keep getting this error:\n\n```\n  [RuntimeException] Could not login with PhpSecLib.\n```\n\nThis did not work:\n\n```\nserver( 'development-server', '123.45.67.8', 22 )\n    ->path( '/var/www/site.com' )\n    ->user( 'username'  )\n    ->pubKey( '~/.ssh/site.pub', '~/.ssh/site' );\n```\n\nNeither did this:\n\n```\nserver( 'development-server', '123.45.67.8', 22 )\n    ->path( '/var/www/site.com' )\n    ->user( 'username', 'password' );\n```\n\nWhen I SSH via terminal, it all works fine (with the provided certificate in ~/.ssh).\n\nAny idea what's causing this error?\n Latest, 3.0.\n\n\u279c  site.com git:(develop) \u2717 dep deploy -vvv\nPreparing server for deploy\nRun task deploy:prepare on server development-server\n[91.238.155.135] cd /var/www/dev.site.com && cd {deploy_path} && if [ ! -d releases ]; then mkdir releases; fi\n\n  [RuntimeException]\n  Could not login with PhpSecLib.\n\nException trace:\n () at phar:///usr/local/bin/dep/src/Server/PhpSecLib.php:46\n Deployer\\Server\\PhpSecLib->connect() at phar:///usr/local/bin/dep/src/Server/PhpSecLib.php:72\n Deployer\\Server\\PhpSecLib->checkConnection() at phar:///usr/local/bin/dep/src/Server/PhpSecLib.php:81\n Deployer\\Server\\PhpSecLib->run() at phar:///usr/local/bin/dep/src/functions.php:115\n run() at /Users/user/Development/site.com/deploy.php:33\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Runner.php:45\n Deployer\\Task\\Runner->run() at phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:168\n Deployer\\Console\\RunTaskCommand->runSeries() at phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:118\n Deployer\\Console\\RunTaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:253\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:874\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:195\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:126\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:114\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:51\n require() at /usr/local/bin/dep:4\n\ndeploy [--dry-run] [--server[=\"...\"]] [stage]\n My mistake, I'm using v2.0.\n\nAny idea what I'm doing wrong? Or is it a bug?\n I have this same issue with v2.0 (the server needs something special in it?)\n I have the same problem, how to fix it?\n  I downloaded & installed the phar file (2.0.1, via https://github.com/deployphp/deployer/releases) using\n\n```\nmv deployer.phar /usr/local/bin/dep\nchmod +x /usr/local/bin/dep\n```\n\nNow I'm getting these errors:\n\n```\nPHP Warning:  array_map(): An error occurred while invoking the map callback in     phar:///usr/local/bin/dep/src/Task/TaskFactory.php on line 35\n\nWarning: array_map(): An error occurred while invoking the map callback in     phar:///usr/local/bin/dep/src/Task/TaskFactory.php on line 35\nPHP Fatal error:  Uncaught exception 'RuntimeException' with message 'Task \"deploy:start\" does not     defined.' in phar:///usr/local/bin/dep/src/Deployer.php:309 \n```\n\nWith tasks:\n\n```\ntask('deploy', [\n    'deploy:start',\n    'deploy:prepare',\n    'deploy:update_code',\n    'deploy:vendors',\n    'deploy:symlink',\n    'cleanup',\n    'deploy:end'\n]);\n```\n\nIn deploy.php, I also configured env, shared_dirs, writable_dirs, assets, auto_migrate, servers, stages and repository.\n\nAny idea how to fix this?\n Okay just found out that I need to define all tasks manually (also the tasks in recipes/common.php). So to install, you not only need to copy the phar file to /usr/local/bin/dep, but you also need to clone this repo to your working dir (for the recipes). Correct?\n\n> > https://github.com/deployphp/deployer/tree/master/recipe\n Ok! Think it's good to add this to the docs. Installation focuses only on the phar file, cloning the git repo (for including recipes) is not mentioned yet.\n  Hi\n\nI have problem in task deploy:update_code when my repo is using some submodules.\nDeploy skript is trying to run something like this:\n\n```\ncd /home/user/mytest && git clone --recursive -q git@bitbucket.org:owner/repo.git /home/user/mytest/releases/2015012324229\n```\n\nBut it fails :-(\n\n```\n[RuntimeException]\n  Cloning into 'htdocs/somefolder1'...\n  Cloning into 'htdocs/somefolder2'...\n  Cloning into 'htdocs/somefolder3'...\n  Cloning into 'htdocs/somefolder4'...\n```\n\nI am using _php ssh2_ lib. I have tried to debug this issue and it fails in `vendor/elfet/php-ssh/src/Ssh/Exec.php:30` when command returns something to output it will consider it as fail and. git command outputs information with \"Cloning into\" for submodules (event you pass -q variable). There is no permission problem, I can run command that I mentioned on the top and it runs ok (but output information about initialising submodules)\n\nAnyone have any ideas how to fix this?\n Here it is:\n\n```\n$php vendor/bin/dep deploy:update_code -vvv\n\nUpdating code\nRun task deploy:update_code on server main\n[mytest.sk] cd /home/forge/mytest && git clone --recursive -q git@bitbucket.org:owner/streamapp.git /home/forge/mytest/releases/2015012329915\nRun task deploy:rollback on server main\nRolling back to previous release on server main\n[mytest.sk] cd /home/forge/mytest && rm -rf /home/forge/mytest/releases/2015012329915\n[mytest.sk] ::\n\n\n\n  [RuntimeException]\n  Cloning into 'htdocs/somefolder1'...\n  Cloning into 'htdocs/somefolder2'...\n  Cloning into 'htdocs/somefolder3'...\n  Cloning into 'htdocs/somefolder4'...\n\n\n\nException trace:\n () at /var/www/streamapp/htdocs/Nette/libs/vendor/elfet/php-ssh/src/Ssh/Exec.php:28\n Ssh\\Exec->run() at /var/www/streamapp/htdocs/Nette/libs/vendor/deployer/deployer/src/Server/Ssh2.php:94\n Deployer\\Server\\Ssh2->run() at /var/www/streamapp/htdocs/Nette/libs/vendor/deployer/deployer/src/functions.php:115\n run() at /var/www/streamapp/htdocs/Nette/libs/vendor/deployer/deployer/recipe/common.php:64\n {closure}() at n/a:n/a\n call_user_func() at /var/www/streamapp/htdocs/Nette/libs/vendor/deployer/deployer/src/Task/Runner.php:45\n Deployer\\Task\\Runner->run() at /var/www/streamapp/htdocs/Nette/libs/vendor/deployer/deployer/src/Console/RunTaskCommand.php:168\n Deployer\\Console\\RunTaskCommand->runSeries() at /var/www/streamapp/htdocs/Nette/libs/vendor/deployer/deployer/src/Console/RunTaskCommand.php:118\n Deployer\\Console\\RunTaskCommand->execute() at /var/www/streamapp/htdocs/Nette/libs/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:252\n Symfony\\Component\\Console\\Command\\Command->run() at /var/www/streamapp/htdocs/Nette/libs/vendor/symfony/console/Symfony/Component/Console/Application.php:887\n Symfony\\Component\\Console\\Application->doRunCommand() at /var/www/streamapp/htdocs/Nette/libs/vendor/symfony/console/Symfony/Component/Console/Application.php:193\n Symfony\\Component\\Console\\Application->doRun() at /var/www/streamapp/htdocs/Nette/libs/vendor/symfony/console/Symfony/Component/Console/Application.php:124\n Symfony\\Component\\Console\\Application->run() at /var/www/streamapp/htdocs/Nette/libs/vendor/deployer/deployer/src/Deployer.php:114\n Deployer\\Deployer->run() at /var/www/streamapp/htdocs/Nette/libs/vendor/deployer/deployer/bin/dep:52\n\n\ndeploy:update_code [--dry-run] [--server[=\"...\"]] [stage]\n```\n\nI think it will always fail when you use git command with submodules, because he send output even if you use --quiet option.\n Sorry for late answer. When I modified recipe/common.php\n\n```\nrun(\"git clone --recursive -q $repository $releasePath 2>&1\");\n```\n\nit is working.\n Right now i have few deployments with this change and it is looking stable for me. Shoud i create pull request for using it with default recipe?\n  Tasks like `composer install` can take really long. However in `Symfony\\Component\\Process` the method `run()` uses a default timeout of 60 seconds. Sometimes this value is too low. \n\nIn #146 we discussed just to set a higher timeout value.\n  Deploying using `Deployer\\Server\\Local` Server i am running into a timeout.\n\nTasks like composer install can take really long. However in `Symfony\\Component\\Process` the method `run()` uses a default timeout of 60 seconds. Sometimes 60s is too short. I suggest two solutions for this:\n\na) set higher default values `Deployer\\Server\\Local`:\n\n```\n    const TIMEOUT = 300;\n```\n\nb) extend `Deployer\\Server\\ServerInterface` and add a new parameter to the `run()` method inside `functions.php`:\n\n```\n    public function run($command, $timeout = 60)\n```\n Please add this option for runLocally...\n  Been trying to run deployment scripts on a new host. Some failed at installing vendors and some at dumping assets. The errors returned didn't give me any help. \n\nIt wasn't until I sshed in and trying to install manually that I found one of the problems was because I was missing php-intl (composer told me but this message wasn't relayed back through deployer) and the other was php5-apcu (I got the message when doing it manually, but it wasn't relayed through deployer).\n\nI was thinking that when deploying to a brand new host then missing libraries could be a common issue. So perhaps there is a way to improve the feedback when these processes fail.\n Ahh great. Will make a note of the changes in V3 so I can mention them at the end of my talk. At the moment I'm not sure how long I have, it's meant to be a 3 min jam session but so far not many have signed up so I might beg for more time.\n  The symfony console has a `configure`-method which should be used to configure the command.\n  We felt the need to add some arguments/options to the console command during our development of our recipes. Maybe others need this functionality, too. This would allow you to do something like this:\n\nIn a recipe:\n\n``` php\noption('tag', array(\n    'description' => 'Tag to checkout during `git clone`'\n));\n```\n\nWhen deploying:\n\n``` bash\ndeployer.phar --server=prod --tag=v1.0\n```\n\n/cc @mabrahamde\n  Link provided in website to download the phar archive returns a 404 http://deployer.org/deployer.phar\n\nComposer also throws an error when trying to install it from dist, but is able to install it from sources.\n I cant download too =(\n I noticed the release last night 2.0.1 doesn't have a phar file. I tried to build myself but get:\nPHP Fatal error:  Class 'Net_SFTP' not found in phar:///tmp/deployer-2.0.1/deployer.phar/src/Server/PhpSecLib.php on line 28\n\nIf i try to run the bin/dep I get the same:\nPHP Fatal error:  Class 'Net_SFTP' not found in /tmp/deployer-2.0.1/src/Server/PhpSecLib.php on line 28\n\nIs this a bug with the PhpSecLib stuff? I'm giving a talk to the Thailand PHP User's group next week about deployer but really could do with there being a working phar file.\n I did run composer install, it won't build without it.\n\nI just downloaded your build and ran it:\n$ php deployer.phar deploy\nPreparing server for deploy.................................PHP Fatal error:  Class 'Net_SFTP' not found in phar:///vagrant_data/deployment/smartnavigator/deployer.phar/src/Server/PhpSecLib.php on line 28\n\nSame error as I get.\n\nI don't think I'll have time to show Deployer 3. It's just a short talk, but will share any slides I have from it.\n It's the namespaces, they have changed in the latest version:\n\ne.g \nnew \\Net_SFTP($this->config->getHost(), $this->config->getPort())\nshould be\nnew new \\phpseclib\\Net\\SFTP($this->config->getHost(), $this->config->getPort());\n\nI'm aware of the php ssh2 extension but I'm looking for an entire php solution, so I can put the phar on any computer with a php interpreter and deploy stuff. Also we use PEM key files which as far as I'm aware the ssh2 extension doesn't support.\n Great, thanks\n Did you rebuild the phar? The source looks fixed, but the phar you offer is still broken.\n Great, can confirm it's working :)\n  @elfet can you also fix it in the 2.0 version so we can use it in production, please also add tag if merged.\n I have error installing deployer v2.0.1\n\n``` shell\n$ composer update\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\nYour requirements could not be resolved to an installable set of packages.\n\n  Problem 1\n    - Installation request for deployer/deployer 2.0.1 -> satisfiable by deployer/deployer[v2.0.1].\n    - deployer/deployer v2.0.1 requires phpseclib/phpseclib ~2.0@dev -> no matching package found.\n\nPotential causes:\n - A typo in the package name\n - The package is not available in a stable-enough version according to your minimum-stability setting\n   see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> for more details.\n\nRead <http://getcomposer.org/doc/articles/troubleshooting.md> for further common problems.\n```\n\nI think this might be fixed by:\n\n``` json\n\"phpseclib/phpseclib\": \"2.0.*@dev\"\n```\n @elfet The correct solution would be to set the \"minimum-stability\", not to require a dependency twice.\n  Change the requirement to ~2.0-dev as composer gives some issues when you specify the branch.\n\n@elfet could you tag this 2.0.1 in the master?\n Hi Anton,\n\nThe problem with the php5-dev depency was that I got some errors when I tried to install it globally:\n\n```\ncomposer require elfet/deployer:dev-master \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u23ce\n./composer.json has been created\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\nYour requirements could not be resolved to an installable set of packages.\n\n\u00a0 Problem 1\n\u00a0 \u00a0 - Installation request for elfet/deployer dev-master -> satisfiable by elfet/deployer[dev-master].\n\u00a0 \u00a0 - elfet/deployer dev-master requires phpseclib/phpseclib dev-php5 -> no matching package found.\n\nPotential causes:\n\u00a0- A typo in the package name\n\u00a0- The package is not available in a stable-enough version according to your minimum-stability setting\n\u00a0 \u00a0see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> for more details.\n\nRead <http://getcomposer.org/doc/articles/troubleshooting.md> for further common problems.\n\nInstallation failed, deleting ./composer.json.\n```\n\nBy requiring the alias of that branch this shoud be fixed according to: https://github.com/phpseclib/phpseclib/issues/545#issuecomment-67403789. \n\nI\u2019m also trying to do some minor refactoring ahead of the code coverage, some methods have more than one responsibility so if we split this is up it will be easier to test.\n\nIf you need any help, let me know.\n\nGreat tool by the way!\n  Inside deployer there is functionality for local deployment without ssh overhead. \n\nI like the idea of executing deployer directly on the server(s). In this case you do not need to connect via ssh. You can execute all commands directly. \n\nInside the master branch there is a function localServer(). However it is not in the 2.x release. Building the phar from source doesn't result in a functional version.\n\nClould you provide a functional phar file for local deployments?\n the api has changed somehow. how do you set server paths now? how do you configure stages? \n thanks\n  I'm using [this build script](https://github.com/gordalina/cachetool/blob/master/bin/bump-version.sh) which was based off [this article](http://moquet.net/blog/distributing-php-cli/)\n\nAlso I added the [self update command](https://github.com/gordalina/cachetool/blob/master/src/CacheTool/Command/SelfUpdateCommand.php)\n As far as I can see, it does not update everything automatically: create phar, add it to manifest, commit, publish a new tag and push everything to GH.\nAlso, you had this on your 3.0 task list: https://github.com/elfet/deployer/blob/master/README.md\n awesome\n i'm not really experienced in wordpress, and last time I deployed a zend app was 3 years ago.\nI don't think i'm the best person to do it.\n\nbtw, you have in the tasklist a refactor of common/symfony recipes, what are you planning to do?\n  Is the PhpStorm license still available? :smirk:\nI need some practice on unit testing, so...\n  The phpseclib php5 branch autoloads according to PSR-4 namespacing so the client encryptionalgorithms array isn't empty.\n  Reference: phpseclib/phpseclib#592\n  Hi,\n\nI have a quite simple build script. It just performs a `git pull` and runs some other scripts afterwards. My `deploy.php`:\n\n``` php\nserver('myserver', '****', 22)\n    ->path('~/public_html')\n    ->user('someuser');\n\n/**\n * Update project code\n */\ntask('deploy:update_code', function () {\n    run(\"git reset --hard\");\n    run(\"git pull origin master\");\n})->desc('Updating code');\n\n/**\n * Update project dependencies\n */\ntask('deploy:update_dependencies', function () {\n    writeln(\"Updating npm libraries...\");\n    run(\"npm update\");\n\n    writeln(\"Updating bower packages...\");\n    run(\"bower update\");\n})->desc('Updating dependencies');\n\n/**\n * Running gulp\n */\ntask('deploy:gulp', function () {\n    writeln(\"Compiling LESS sources...\");\n    run(\"./node_modules/.bin/gulp\");\n})->desc(\"Running gulp\");\n\ntask('deploy', [\n    'deploy:update_code',\n    'deploy:update_dependencies',\n    'deploy:gulp'\n]);\n```\n\nWhen I run `dep deploy -vvv` I get:\n\n```\nUpdating code\nRun task deploy:update_code on server myserver\n[***] cd ~/public_html && git reset --hard\nPassword: \n[***] :: \n[***] cd ~/public_html && git pull origin master\n[***] :: \n\u2714\nUpdating dependencies\nRun task deploy:update_dependencies on server myserver\nUpdating npm libraries...\n[***] cd ~/public_html && npm update\n[***] :: \nUpdating bower packages...\n[***] cd ~/public_html && bower update\n[***] :: \n\u2714\nRunning gulp\nRun task deploy:gulp on server myserver\nCompiling LESS sources...\n[***] cd ~/public_html && ./node_modules/.bin/gulp\n[***] :: \n\u2714\n```\n\nThe git repo is not updated. However, manually entering the commands via SSH does work. Any ideas?\n I have the contents of `~/.ssh/id_rsa.pub` already added ad deployment key to my repository (Bitbucket), is that what you mean?\n\n`git pull origin master` works only when I execute it manually.\n Yes. Manually entering the `git pull origin master` command on my remote server does work, although there is an error (still not sure why).\n\n```\n[myuser@myserver public_html]$ cd ~/public_html && git pull origin master\nremote: Counting objects: 3, done.\nremote: Compressing objects: 100% (3/3), done.\nremote: Total 3 (delta 2), reused 0 (delta 0)\nUnpacking objects: 100% (3/3), done.\nFrom bitbucket.org:my/repository\n * branch            master     -> FETCH_HEAD\nUpdating 76480be..510f4e0\nFast-forward\n index.html |    1 +\n 1 files changed, 1 insertions(+), 0 deletions(-)\nError: spawn EACCES\n    at errnoException (child_process.js:1001:11)\n    at Process.ChildProcess._handle.onexit (child_process.js:792:34)\n```\n\nI don't see how this error could possibly block Deployer, so it might have nothing to do with it. Isn't there a way to have Deployer show the SSH output?\n I removed the error by removing my working copy and cloning it again... but the problem still occurs.\n It looks like it's an SSH issue, after debugging I found that the commands are not executed.\n\nIn phpseclib/Net/SSH2.php, on line 2272:\n\n```\n    function exec($command, $callback = null)\n    {\n        // ...\n\n        if (!($this->bitmap & NET_SSH2_MASK_LOGIN)) {\n            return false; // returns false\n        }\n\n        // ...\n    }\n```\n Yeah, I will try that. Thanks!\n  The documentation in website is for version 2.x, and the API is not the same.\n thanks!\n  Expected by documentation that when the branch is set this wil be checkout\n- http://deployer.in/stages.html\n- http://deployer.in/tasks.html#using-input-options\n  It does the same thing but it gives out a better exception object.\n   first solution which comes into my mind, test what the command `composer.phar --version` returns, maybe also allow to configure how the executable is named, and where it should be (I always install it as part of my environment directly after php gets installed)\n    I would like to replace some configuration parameters in yaml files, is there functionality present in deployer. Otherwise I would like to help to implement this.\n Just wondered if this would also allow for parameter setup on initial deployment?\n\nComposer will die on symfony2 installs if the db parameters are incorrect as it tries to connect to any configured DB when warming the cache.\n\nThis means on first deployment of a new code base the deployer will die unless the parameters in parameters.yml.dist are correct. Those who don't want to store db passwords in their repositories will run into problems.\n\nComposer will actually prompt for values to put into parameters.yml on first install. I remember when I used to use capifony that it would relay these prompts back to the user.\n\nAny chance this functionality will be adopted?\n Ok, I'll look into the interaction thing.\n\nBut I just did a new deployment and composer failed because it couldn't find symfony db (what the db name was set to in parameters.yml.dist) in my mysql server.\n\nWhen updated the db name to the correct one then it proceeds fine. Perhaps you already have the correct db credentials in the parameters.yml.dist.\n Nope, there is no database migration to be done. Also as far as I'm aware you can't run migration before you've run composer as it needs all the dependencies composer downloads. And composer fails at cache stage.\n Perhaps it's something specific to things I've done in my entities. I'm using JMS serializer with doctrine.\n > Yes, it's possible to implement this for Symfony2 deploy. Now Deployer runs composer with no-interaction key and this is good solution. But it's really easy to implement parameters.yml creation.\n\nI didn't get it, can you please give an example? It would be very helpful for initial deploy.\n I ran into the same thing. This article explains why doctrine try connect to db on cache clearing:\n\nhttp://stackoverflow.com/questions/34023813/symfony-2-7-cacheclear-command-checks-every-database-connection\n Why it's run composer install without interaction event if I've override it like:\n\n```\n// dev server\nserver('dev', 'host', 22)\n    ->user('user')\n    ->identityFile()\n    ->stage('dev')\n    ->env('deploy_path', '/var/www/html/')\n    ->env('branch', 'develop')\n    ->env('env_vars', 'SYMFONY_ENV=dev')\n    ->env('env', 'dev')\n    ->env('composer_options', 'install')\n;\n```\n\n?\n  As discussed over e-mail, the PR.\n  When I run dep self-update I get:\n\n[Herrera\\Json\\Exception\\FileException]\n  file_get_contents(https://raw.github.com/elfet/deployer/master/manifest.json): failed to open stream: HTTP request failed! HTTP/1.1 404 Not Found\n  Hello!\nIs there any reason to reqiure PHP 5.4 besides short array notation?\nAre you going to implement SSH Agent forwarding for authentication?\n\nThanks\n  Looks like that src/Deployer.php was critically damaged by last modification.\nhttps://github.com/elfet/deployer/blob/master/src/Deployer.php\n\nsetParameter method and many others are gone...\n Got it, thx. \n  Is it possible to exclude/ignore files/paths when using the upload function?\n Thats great! Thank you.\n @elfet Is this possible in the version 3 now?\n Now :) \nBut it's possible by rsync. If you need `upload` function, you can implement if by yourself as plugin for Deployer.\n Instead of excluding files, I have added a task that runs before the upload task. In this task, I remove all files not needed for upload. This seems to work pretty well:\n\n``` php\n/**\n * Delete all ignored files before uploading the release to the server.\n */\ntask('customNamespace:upload:clean', function () {\n    $assets = implode(' ', array_map(function ($asset) {\n        return \"{{local_release_path}}/$asset\";\n    }, get('customNamespace_ignored_files')));\n\n    // Run with -rf parameter so we can clean directories as well\n    runLocally(\"find $assets -exec rm -rf {} ';' &> /dev/null || true\");\n})->desc('Remove ignored filed');\n```\n\nand\n\n``` php\nbefore('your:upload:task', 'customNamespace:upload:clean');\n```\n  Is it possible to deploy a specific tag, instead of the last commit on master ?? Would be useful to make rollback... \n    You use `Symfony\\Component\\Console\\Helper\\DialogHelper` in 2 Deployer release. Now is deprecated.\n\nhttps://github.com/symfony/Console/blob/3daf10d2a174d8675f305846934fa82ca1f1effc/Helper/DialogHelper.php#L22\n\n``` php\n/**\n * The Dialog class provides helpers to interact with the user.\n *\n * @author Fabien Potencier <fabien@symfony.com>\n *\n * @deprecated Deprecated since version 2.5, to be removed in 3.0.\n *             Use the question helper instead.\n */\nclass DialogHelper extends InputAwareHelper\n```\n Thanks for making that an exception that is now breaking my builds for no avoidable reason since this is buried in some deep dependency\n  This change makes it possible to change the path to the file describing the deployment tasks\n  In my case, I would like to use a different path to php than the standard.\nSo I had a property phpPath to the server configuration and a function php() to get it.\nI also rewrite tasks that use php to use the php function.\n  src/Server/PhpSecLib.php in line 29 set_include_path() is called, but it overwrites the include path settings from phpseclib itself ... i commented out that line of code and now everything it works :-)\n\ni dont see this line of code being helpfull anyhow, phpseclib set's its include path via composer\n  The documentation mention branch param but it's not ready after self-update. Even with --pre params or --upgrade params. \n Did not tried with composer... I cloned the repos and did my own build, but would have been easier with composer :) Thanks. \n  This should happen sometime in the future.\nDocumentation here: https://help.github.com/articles/transferring-a-repository/\n lol\n looks good to me \n :+1: \n  Hello there,\n\nI've downloaded deployer.phar and then followed the instructions but if I run the dep command, I get an error message 'No command 'dep' found'\n\nI've added /usr/local/bin/dep to the path but it didn't change anything.\n\nDo you know what I've missed please ?\n It was already in :\n\n/home/xxx/Documents/google-cloud-sdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/local/bin/dep:/home/xxx/.rvm/bin:/home/corentin/.rvm/bin\n\nStil have the problem ;(\n make sure you have the `dep` file in `/usr/local/bin` and that is executable: `chmod +x /usr/local/bin/dep`\n  Hello,\n\nCan I execute some tasks before and after (create build for deploying, remove build)?\n\nThanks\n ``` php\nbefore('deploy:start', function () {\n    /* your code before deploy starts */ \n});\n\nafter('deploy:end', function () { \n    /* your code after deploy ends*/ \n});\n```\n Sorry, I forgot write about server, I want execute before and after tasks on local server.\n\nfor example:\n- local:start\n- server1:deploy:start\n- server2:deploy:start\n- server3:deploy:start\n- ...\n- server1:deploy:end\n- server2:deploy:end\n- server3:deploy:end\n- local:end\n\nThanks\n you can use the [`runLocally()`](https://github.com/deployphp/docs/blob/master/functions.md) function\n hmm, bun it's doubtful decision.\n\nI want run full task with all functions: copy, run, cd, etc. And I want run one time before all deploying and one time after.\n I don't know if that's possible, maybe @elfet will shed some light on this.\nAlthough having deployments made on a one-by-one server makes some sense, especially when deployment is parallelized. \n I want be ensured what all servers have on build (all dependencies, all compiled files etc.), if you execute task \"create build\" on all servers you can't be ensure what you have the one build on all servers\n Thanks\n  The current default parameter for passphrase being an empty string, the check to know wether or not to prompt the user for an actual passphrase doesn't work.\n  Currently deployer deploys in a synchronous manner, this works well with few servers, but when the more servers we are deploying, the longer it takes.\n\nRunning every task in every server asynchronously will make this much faster. Initial experiments gave me a `1.5x` speed up (3.46 seconds compared to 5.46 seconds) with only two servers, this speed up increases with every server added.\n\n**Issues**\n- [ ] I don't think it is even possible to install dependencies on windows because it depends on [spork](https://github.com/phresque/spork) which requires `ext-pcntl` and `ext-posix`. This issue is easily solved (no async on windows)\n- [ ] Tasks which require user input are also run asynchronously, which makes the cli interface unintuitive. This can also be solved. \n- [ ] Other issues that I'm not aware of?\n I was looking into the deploy branch but couldn't find anything on it, have you started development?\n Closing because its already implemented\n  Currently there is no way for tasks to display an error without halting the whole deployment process. Such behaviour is sometimes needed.\n\nFor example, on the newrelic recipe, if the task fails, it should display an error but not really halt the whole deployment.\n The case for newrelic is a use case:\n\nAfter the deployment ends, you can notify a third party that it was ok, but if the notification itself fails, deployer should let the user know, instead of showing the checkmark.\n\nMaybe instead of returning false, one could raise an exception (a specific one like: NonFatalException) with a message that can be displayed to the user in the end or something.\n\nWhat you think?\n  To avoid rollback i thought it would be nice if writable dirs would be automatically created if not found.\n\n~ Chris\n On dev server i am using the phar version, dep self-update should update it to last push, cause it say is already up to date?\n Ok! I really like your tool, started use it 2 days ago and i'm really loving it yet; i'll keep an eye on you and i'd like to help as much as i can!\n\nThanks for answer\n~ Chris\n  https://github.com/elfet/deployer/blob/master/composer.json#L16\n\n``` javascript\n        \"files\": [\n            \"src/functions.php\"\n        ]\n```\n Why do you want to disable this? Without it, you would have to require it in your `deploy.php`\n :+1: \n Thanks!\n\n> BTW, that about move function to namespace? Or wait when PHP 5.6 become more popular?\n\nI think it is too early to use this feature.\nFor example: the current ubuntu has only PHP 5.5 in official repositories\n  Of course, it's a great idea\n My thoughts on it:\n- Release 2.x for PHP 5.4, this allow legacy applications which already use deployer to keep using it.\n- Release 3.x for PHP 5.5, for new features & projects\n\nWhy are you proposing to increment PHP version, is there any feature you want to use?\n Regarding Symfony, Fabien Potencier wrote about [Symfony 3 Roadmap](http://symfony.com/blog/symfony-3-0-the-roadmap) and chose PHP 5.5 based on a survey. Mind you that Symfony3 will only be release Nov 2015.\nI'm not saying that deployer should do the same, it's just interesting to see other points of view.\n @gordalina do you agree with these? http://php.net/supported-versions.php - 20 jun 2015 end of official supporting of php 5.5 and will only security support next year\n @DropSQL I agree, but we also know that a significant amount of people do not care for that, and a tool/library should be compatible. see http://w3techs.com/technologies/details/pl-php/5/all, it was the best information I could find about php usage\n @elfet by no means, upgrade to php 5.5, but make a release for php 5.4 before you do :)\n :+1: \n  ```\npatie@iMac27:~/www/clients/xxx/project$ dep deploy\n\nPreparing server for deploy.................................Password: \nIf you want to rollback run \"rollback\" task\n\n\n\n  [RuntimeException]      \n  Illegal variable name.  \n\nException trace:\n () at phar:///usr/local/bin/dep/vendor/elfet/php-ssh/src/Ssh/Exec.php:28\n Ssh\\Exec->run() at phar:///usr/local/bin/dep/src/Server/Ssh2.php:94\n Deployer\\Server\\Ssh2->run() at phar:///usr/local/bin/dep/src/functions.php:115\n run() at phar:///usr/local/bin/dep/recipe/common.php:37\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Runner.php:45\n Deployer\\Task\\Runner->run() at phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:168\n Deployer\\Console\\RunTaskCommand->runSeries() at phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:118\n Deployer\\Console\\RunTaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:252\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:887\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:193\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:124\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:114\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:51\n require() at /usr/local/bin/dep:4\n\n\ndeploy [--dry-run] [--server[=\"...\"]] [stage]\n```\n\nin deploy i have only this (but tried also other ways) :\n\n```\n<?php\nrequire 'recipe/symfony.php';\n\nserver('main', '1.1.1.1')\n    ->path('/home/html/project/public_html/')\n    ->user('patie');\n\nset('repository', 'git@bitbucket.org:xxx/project.git');\n```\n\nip, path and repository are of course other in my deploy.php, there is other problem\n\nim on latest OSX, PHP 5.4.16 (cli) \n\n**any idea where is problem ?**\n ```\npatie@iMac27:~/www/clients/xxx/project$ dep deploy -vvv\nRun task deploy:start on server main\nPreparing server for deploy\nRun task deploy:prepare on server main\n[1.1.1.1] if [ ! -d $(echo /home/html/project/public_html/) ]; then mkdir /home/html/project/public_html; fi\nPassword: \nRun task deploy:rollback on server main\nIf you want to rollback run \"rollback\" task\n\n\n\n  [RuntimeException]      \n  Illegal variable name.  \n\n\n\nException trace:\n () at phar:///usr/local/bin/dep/vendor/elfet/php-ssh/src/Ssh/Exec.php:28\n Ssh\\Exec->run() at phar:///usr/local/bin/dep/src/Server/Ssh2.php:94\n Deployer\\Server\\Ssh2->run() at phar:///usr/local/bin/dep/src/functions.php:115\n run() at phar:///usr/local/bin/dep/recipe/common.php:37\n {closure}() at n/a:n/a\n call_user_func() at phar:///usr/local/bin/dep/src/Task/Runner.php:45\n Deployer\\Task\\Runner->run() at phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:168\n Deployer\\Console\\RunTaskCommand->runSeries() at phar:///usr/local/bin/dep/src/Console/RunTaskCommand.php:118\n Deployer\\Console\\RunTaskCommand->execute() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:252\n Symfony\\Component\\Console\\Command\\Command->run() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:887\n Symfony\\Component\\Console\\Application->doRunCommand() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:193\n Symfony\\Component\\Console\\Application->doRun() at phar:///usr/local/bin/dep/vendor/symfony/console/Symfony/Component/Console/Application.php:124\n Symfony\\Component\\Console\\Application->run() at phar:///usr/local/bin/dep/src/Deployer.php:114\n Deployer\\Deployer->run() at phar:///usr/local/bin/dep/bin/dep:51\n require() at /usr/local/bin/dep:4\n\n\ndeploy [--dry-run] [--server[=\"...\"]] [stage]\n```\n     Moved to https://github.com/deployphp/recipes\n  Assetic dump will warmup cache if it hasn\u2019t been warmed, so having\ncache:warmup after ascetic dump is redundant\n   By ban, you mean its something you dont want?\n To run symfony console commands without needing in only a command.\nAlso, makes it useful when auto detecting the correct path to the console file (i'm adding that functionality right now).\n @elfet have a read at the function and let me know what you think\n Yeah, I don't feel much comfortable adding a new function, especially because it pollutes the global scope and introduces a new way of adding functionality.\nDo you have any other way where this can be accomplished?\n This might be interesting to move to its own recipe, like `symfony-extra`. Should I wait for the new environment concept?\n  As I understand @elfet is preparing for a v3 relase, which is great, but the timing is unknown.\nI also think that having a more more stable release schedule, would allow new features to become available to the general public.\n\nIf we take the [Symfony Release Process](http://symfony.com/doc/current/contributing/community/releases.html#rationale) especially the rationale, although it is overkill for this project, we can reuse some parts of it. For example:\n- Major releases can be released at any random time, especially because of having BC breaks\n- Minor releases are good for releasing new features, e.g.: which could happen on a monthly basis)\n- Patch releases are awesome to fix bugs.\n\nAlso considering other console based applications, such as composer, although it has some beta releases, when updating composer it always updates itself to the latest `master` version, which is perfect to roll out features.\n\nI propose we start a discussion about this.\n that solution works if you have deployer set as a dependency, but for a console application not so much\n :+1: \n  Symfony 3 console command location is `bin/console` and not `app/console`\n  Add `\"elfet/deployer\": \"~2.1.0@dev\"` to composer in order to fetch master branch.\n\nThis also would remove a warning when requiring dev-master and validating the composer.json:\n\n``` console\n$ composer validate\n./composer.json is valid, but with a few warnings\nSee http://getcomposer.org/doc/04-schema.md for details on the schema\nrequire.elfet/deployer : unbound version constraints (dev-master@dev) should be avoided\n```\n  Same purpose as https://github.com/elfet/deployer/pull/88 but more generic\n BTW, is there a recipe documentation somewhere that lists configuration variables that are available?\n THANKS!\n  Configuration\n\n``` php\n// deploy.php\n<?php\n\nrequire 'recipe/newrelic.php';\n\n// ...\n\nset('newrelic', [\n    'license' => 'asd87...',\n    'app_name' => 'your app name',\n    // or\n    'application_id' => '987431',\n]);\n```\n    ## Configuration\n\nUse it by adding `set('ignore_platform_reqs', 'true');` inside `deploy.php`\n## Usage\n\nSee https://github.com/composer/composer/issues/1468\ntl;dr;\nIt's usefull to ignore platform requirements when you use container with volumes or want to install them with hhvm\n Ok,\n\nPlease provide current options (without --ignore-platform-reqs) as default options.\nIt's quite convenient in order not to miss one :)\n\nThanks\n  deployer.org will be better than deployer.in\n  Issue #67 \n\nWill accept relative or absolute paths.\n\nExample usage:\nphp bin/deploy --file=/home/alex/sites/deploy-scripts/wordpress.php deploy\nphp bin/deploy --file=deploy-scripts/anothersite.php deploy\nphp bin/deploy -fdeploy-scripts/wordpress.php deploy\n Hold off on the merge, I found a bug.\n from http://php.net/manual/en/function.realpath.php\n\n> realpath() returns FALSE on failure, e.g. if the file does not exist.\n\nSo if we've already determined the realpath call has failed it saves us from doing any other checks\n both variants:\n\n``` php\n(is_file($file) && is_readable($file))\n```\n\nand \n\n``` php\n$file !== false && is_file($file) && is_readable($file)\n```\n\nhave same behaviors, `is_file` and `is_readable` returns `false` if have parameter `false`\nYour condition `$var !== false` is superfluous.\n\nIf you have another opinion, say please\n Check this line:\n\n> $deployFile = realpath($optionFile);\n\nI'm using realpath in order to create an absolute path to the file no matter if you give it a relative path (--file=scripts/site.php) or an absolute one (--file=/var/deploy/site.php). \n\nRealpath will return false if the file does not exist (or if the function fails for any other reason).\n\nTherefore by doing a simple check to see if $deployFile is already false I save from having to hit the filesystem again by calling is_file.\n\nIf $realpath is false already then calling is_file is superfluous and just leads to a wasted filesystem call.\n\nI guess it's a matter of which is more wasteful, a call to the file system or a boolean comparison.\n Thanks @AlexStansfield, I understood your opinion, it's a small optimization.\nBut I think will be better don't use small optimizations and have more cleared code.\nThanks, Anton\n ok, I will remove it\n Due to the way that Symfony\\Component\\Console\\Input\\ArgvInput works this is actually a lot harder to implement than expected.\n\nI'm not sure if there is a nice way without creating our own Input class.\n\nThe reason being that it's pretty strict about the options and arguments passed to it. However deploy.php file itself adds options and arguments. So if I try to use the name of the stage I want to deploy to the script fails on too many arguments as it's not imported the deploy.php file yet so doesn't the stage argument hasn't been defined.\n Good luck\n  The SYMFONY_ENV variable is not taken into consideration in the composer install process. With export yes.\n I think the code was fine as it was because it althought set the environment var for that one process. But as it\u2019s not your actual environment from the current terminal session (is it?) I don\u2019t think it\u2019s bad either.\n @hacfi I'm agree, the first code is better, but, this don't work, because sub processes/commands don't know the variable, and cache:clear is a subprocess of composer\n @elfet @hacfi see https://github.com/composer/composer/issues/1453\n @elfet \nwith SYMFONY_ENV without export the env is always the dev environnement in composer subscript. \n\nSo by exemple : i have fixture bundle in composer require-dev\nThe bundle doesn't install in vendor for the prod environnement : normal\n\nBut in appKernel the fixture call is in dev environnement.\nAs the SYMFONY_ENV variable doesn't live in the composer subscripts\nThe default env is used and fixture try to be loaded\n\nAt this moment, a bug stop the deploy process.\n  Trying to run composer install will produce this error message:\n- Installing kherge/amend (3.0.3)\n  Downloading: connection...\n  Could not fetch https://api.github.com/repos/kherge/php-amend/zipball/d191de606b3b76a28f09d97ddc04014426116965, enter your GitHub credentials to access private repos\n  The credentials will be swapped for an OAuth token stored in /Users/nicholasruunu/.composer/config.json, your password will not be stored\n  To revoke access to this token you can visit https://github.com/settings/applications\n  Username: nicholasruunu\n  Password:\n  Downloading: connection...\n  \n  [Composer\\Downloader\\TransportException]\n  The \"https://api.github.com/repos/kherge/php-amend/zipball/d191de606b3b76a28f09d97ddc04014426116965\" file could not be downloaded (HTTP/1.1 404 Not Found)\n  Have improved writable dirs functionality giving a few options (acl, chmod and chmod_bad).\n\nI also fixed the typo of writeable to writable. Naturally this could mess with people's scripts but as this is a development version it should be possible to give them a heads up when it becomes stable.\n  In my case I have different ssh keys on my deploy host and my git repository. For that I use \"forward_agent\" option in ruby lib \"net-ssh\". \n\nI have researched that and unfortunately found that libssh2 and therefore \"pecl_ssh2\" don't support forwarding agent. Only it prevents me to use \"deployer\" in my projects.\n\n@elfet Do you have any ideas how to bypass it?\n Hmm imho uploading my private keys on server is bad thing :(\nForwardAgent yes - yes it was in my config file.\n Libssh2 has unofficial patches for forwarding agent. Maybe it will appear in pecl_ssh2 in the future. \n@elfet thank you. I will think how it can be solved.\n @jekill one way to solve it is by using deploy keys. You run a ssh-keygen on the server and add the public key to github, bitbucket, gitlab, ...\nI've been looking into agent forwarding with deployer.in and it seems libssh2 supports it now, but the pecl extension doesn't unfortunately... \n Hello, do I understand it right, that at the moment only way to use deployer is the manually add ssh-keys from deployment servers to my git repository?\n Was this issue solved somehow? :)\n  Adding two useful composer options.\n\ncomposer_copy_vendors will copy the vendors file from the previous release before running a composer install\ncomposer_update will run composer update rather than composer install \n I totally agree, but it's a feature I've seen people use in capifony so I added it. I wouldn't use it myself so happy to not have it accepted. The copy vendors though is something I'd like to see.\n I can remove the update option and push a new commit so you can merge the copy vendors feature if you'd prefer.\n With updating the docs do you mean the README.md or the docs on deployer.in\n\nAlso regarding the update action, it's definitely bad practice to use on a testing, staging or production server. I can see a use case for people who want to deploy to a development server and might want the latest dependencies when it's done.\n\nAnyway have removed it now.\n I don't know where that is.\n ok, found it\n  I just been trying out the ability to specify a different branch for each stage as documented here: http://deployer.in/stages.html\n\nI just checked out the master branch even though I configured the develop branch. It doesn't seem to do anything with the \"branch\" option you set in the deployer. I searched for term branch and got no results. Is this something that has not yet been implemented?\n @AlexStansfield I ran into this problem and I solved it by overwriting the task called `update_code` with the following code\n\n``` php\ntask('deploy:update_code', function (InputInterface $input) {\n    $basePath = config()->getPath();\n    $repository = get('repository', false);\n\n    if (false === $repository) {\n        throw new \\RuntimeException('You have to specify repository.');\n    }\n\n    $release = date('Ymd') . substr((string) time(), -5);\n    $releasePath = \"$basePath/releases/$release\";\n    $branch = $input->getOption('branch');\n\n    env()->setReleasePath($releasePath);\n    env()->set('is_new_release', true);\n\n    run(\"git clone --recursive -q $repository $releasePath -b \" . $branch);\n    run(\"chmod -R g+w $releasePath\");\n})->desc('Updating code from branch')\n  ->option('branch', 'b', 'Set the deployed branch', 'master');\n```\n Hey, thanks. I solved it pretty much the same way a few hours ago. just back from dinner and about to do a pull request.\n Ok, I've not been in the position of wanting to make a pull request when I already have an open one before. So my commit ended up on the pull request above. Just seeing if I can work out how to separate them out.\n Got it, see above\n  Removed two unnecessary config fetches from the writeable_dirs task.\n\nAlso fixed some places in symfony recipe where it's setting default values which could overwrite a user's own configuration (e.g. if they specifically set no writable dirs, or assets).\n Just realised the way the get checks to see if it should use the defaults that if they set an empty array for the writeable dirs or assets that won't get overwritten by the defaults in the get call.\n\nHowever I think putting the defaults in the get seems redundant as they are being set in the recipe anyway.\n Sorry about the extra commit, wasn't sure how to separate out the pull requests. Sorted it out now.\n\nSo I guess the pull request was really aimed at version 2.x as we're looking for a replacement to capifony ASAP so not sure if this pull request is good for that. \n\nShould I make any further pull requests against branch 2.x?\n How stable will master be? I'm adding features like branches and copy_vendors because I need them now. But if master is going to become unstable in the near future as you rewrite core parts of the deployer I'd rather use 2.x\n  Just a question: why Deployer does a non-atomic swap with `rm` then `ln -s` instead of creating a temp link and then doing `mv -T`?\n\nSee: http://codeascraft.com/2013/07/01/atomic-deploys-at-etsy/\n\nThanks!\n Great! Can you push the v3 branch as develop on Github? Or is it too early? Do you have an ETA?\nBTW, your package is so intuitive I managed deploying an app with atomic swapping in like 10 minutes!\n Estimated Time of Arrival. If you have one :)\n\nOn Wed, Oct 22, 2014 at 7:09 PM, Anton notifications@github.com wrote:\n\n> It is too early for v3 to publish. Will try to finish first parts as soon\n> as possible. A little busy on main work.\n> \n> What is ETA?\n> \n> > 22 \u00ee\u00ea\u00f2. 2014 \u00e3., \u00e2 20:47, Mattia Trapani notifications@github.com\n> > \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> > \n> > Great! Can you push the v3 branch as develop on Github? Or is it too\n> > early? Do you have an ETA?\n> > BTW, your package is so intuitive I managed deploying an app with atomic\n> > swapping in like 10 minutes!\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/elfet/deployer/issues/73#issuecomment-60119680.\n And you are doing a great job!! Thanks! Ping me if I can help\n\nIl mercoled\u00ec 22 ottobre 2014, Anton notifications@github.com ha scritto:\n\n> Noup. :) I'm working on this at my free time.\n> \n> > 22 \u043e\u043a\u0442. 2014 \u0433., \u0432 21:24, Mattia Trapani <notifications@github.com\n> > <javascript:_e(%7B%7D,'cvml','notifications@github.com');>> \u043d\u0430\u043f\u0438\u0441\u0430\u043b(\u0430):\n> > \n> > Estimated Time of Arrival. If you have one :)\n> > \n> > On Wed, Oct 22, 2014 at 7:09 PM, Anton <notifications@github.com\n> > <javascript:_e(%7B%7D,'cvml','notifications@github.com');>> wrote:\n> > \n> > > It is too early for v3 to publish. Will try to finish first parts as\n> > > soon\n> > > as possible. A little busy on main work.\n> > > \n> > > What is ETA?\n> > > \n> > > > 22 \u00ee\u00ea\u00f2. 2014 \u00e3., \u00e2 20:47, Mattia Trapani <notifications@github.com\n> > > > <javascript:_e(%7B%7D,'cvml','notifications@github.com');>>\n> > > > \u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb(\u00e0):\n> > > > \n> > > > Great! Can you push the v3 branch as develop on Github? Or is it too\n> > > > early? Do you have an ETA?\n> > > > BTW, your package is so intuitive I managed deploying an app with\n> > > > atomic\n> > > > swapping in like 10 minutes!\n> > > > \n> > > > \u2014\n> > > > Reply to this email directly or view it on GitHub.\n> > > \n> > > \u2014\n> > > Reply to this email directly or view it on GitHub\n> > > https://github.com/elfet/deployer/issues/73#issuecomment-60119680.\n> > > \n> > > \u2014\n> > > Reply to this email directly or view it on GitHub.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/elfet/deployer/issues/73#issuecomment-60126957.\n  Hello,\n\nI do the following task\n\n``` php\ntask('git:update', function() {\n  run('git fetch');\n  run('git checkout master-dev');\n  run('git pull origin');\n});\n```\n\nThen I run the task on console (win 8, powershell). I've got the following message under the console\n\n```\nIf you want to rollback run \"rollback\" task\n\n\n\n  [RuntimeException]\n  Switched to branch 'master-dev'\n\n\n\ngit:update [--dry-run] [--server[=\"...\"]] [stage]\n```\n\nI checked the the server and it was run correctly.\nPlease let me know if it is a bug or somethings\n\nRgs,\nCheers\nPhuc\n Thx for your reply\nThe whole deploy.php file\n\n``` php\n\nserver('local', '127.0.0.1', 3022)\n    ->path('/root')\n    ->user('root', 'abc123');\n\ntask('testit', function() {\n  $date = new \\DateTime();\n  run('pwd');\n  run('mkdir test' . $date->getTimestamp());\n})->desc('Test it');\n\ntask('git:update', function() {\n  run('git fetch');\n  run('git checkout master-dev');\n  run('git pull origin');\n});\n\n```\n\nPlease let me know\nRgs\nPhuc\n Indeed testit is working\n\nThe **git:update task is working** but it show up the RunTimeExecution as in my first comment :)\n I am also getting Runtime exception when running a simple git task. \n`// Update Code Task\ntask('git', function(){\n    run('git pull');\n})->desc('Updating code from git repository');\n// Group Tasks\ntask('deploy', [\n   'git'\n]);`\n\nThis gives a Runtime Exception:\n\n  From [repo url changed by me here]  \n     abed53a..cc9ddef  master     -> origin/master \n  I'm trying to deploy using a private Bitbucket repository. I've set Git access via SSH as instructed at Bitbucket https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git\n\nWhen I try to deploy it gives me:\n\n```\n[RuntimeException]                                   \nPermission denied (publickey).                       \nfatal: Could not read from remote repository.        \nPlease make sure you have the correct access rights  \nand the repository exists.\n```\n\nWhich means it connects succesfully to the server but it cannot access the remote repo. It's weird because I try to clone my repo manually and it works fine.\n I have tried and it works. Note that the repository is being cloned via the SSH repo URL. I set up the SSH key as it said in the Bitbucket guide so it doesn't ask me for a password everytime I clone.\n\nSomehow deployer isn't using that ssh key? It's weird because I'm logging as the same user in my VPS.\n\n```\nssh -T git@bitbucket.org\n```\n\ngives me\n\n```\nlogged in as glend_gjermeni.\n\nYou can use git or hg to connect to Bitbucket. Shell access is disabled.\n```\n\nwhich means everything is good to clone a repo.\n ```\n<?php\n\nrequire 'recipe/symfony.php';\n\n// Define server for deploy.\n// Let's name it \"main\" and use 22 port.\nserver('main', 'glend.me', 22)\n    ->path('/home/glend/public_html/xxxx.glend.me') // Define base path to d$\n    ->user('glend');  // Define SSH user name and password.\n                                 // You can skip password and it will be asked $\n                                 // Also you can connect to server SSH via publ$\n\n// Specify repository from which to download your projects code.\n// Server has to be able clone your project from this repository.\nset('repository', 'git@bitbucket.org:skoolidevelopment/xxxx.git');\n```\n If I'm not mistaken, those keys are for accessing the server, not th erepository itself. Unfortunately, I don't have the keys and they are only generated on droplet creation at DigitalOcean? Is there another workaround?\n I've got the same issue with a private bit bucket repo. Are SSH keys not being forwarded ?  This works fine with Capistrano. \n I have same problem and my solution is `forward agent` feature. Please try it.\n\n``` php\nserver('dev-server', '192.168.1.2', 22)\n    ->user('dev')\n    ->forwardAgent()\n    ->stage(['dev'])\n    ->env('deploy_path', '/var/www/apps/dev')\n    ->env('branch', 'develop')\n;\n```\n\nAnd config your system support forward agent feature. \nRef: https://github.com/oanhnn/deployer-example\n I am having the same issue with bitbucket keys. I can run the git clone command that is run by deploy:update_code exactly when done manually. Anyone find any solutions?\n Dear @willmcl,\nPlease show you native command on shell and error on using `deployer`.\n  ### elfet/deployer now has a Chat Room on Gitter\n\n@elfet has just created a chat room. You can visit it here: [https://gitter.im/elfet/deployer](https://gitter.im/elfet/deployer?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&content=body_link).\n\nThis pull-request adds this badge to your README.md:\n\n[![Gitter](https://badges.gitter.im/Join Chat.svg)](https://gitter.im/elfet/deployer?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=body_badge)\n\nHappy chatting.\n\nPS: [Click here](https://gitter.im/settings/badger/opt-out) if you would prefer not to receive automatic pull-requests from Gitter in future.\n  Hey there!\n\nI'm still trying to determine what permissions are needed on the remote server for using deployer?\n\nThe user I'm using is `fo`, and the user Nginx uses is the standard `www-data`. When everything deployed, checking the permissions it's `fo:fo`, but shouldn't it be `fo:www-data`? I've added the user `fo` to the `www-data` group. I just get a forbidden error when trying to access the site after deploying.\n\nAny help is appreciated! Thanks!\n  Hello,\n\nIt would be interesting to be able to specify the deploy file as an argument to the \"dep deploy\" command, for example with \"dep deploy --file acme.php\".\n\nI'd like it so I wouldn't put a deploy.php file in every project but have all centralized.\n\njmsche\n I would go with `-f`\n -f / --file would be great :)\n Personally I'd say\n\n```\ndep deploy --file acme.php\n```\n\nand\n\n```\ndep deploy -f acme.php\n```\n\nWould be perfect.\n i'm happy to add this as I could do with the feature. Will it be --file and -f?\n :+1: \n  Although I have read the docs twice I still can't figure it how deploy using ftp server , could your please help in that ?\n      I install deployer through composer:\ncomposer require elfet/deployer:~1.0\nafter that I call \nvendor/bin/dep\n\nand there are only 3 availible options (help, list, self-update)\nWhen call:\ndep deploy\nError is Command \"deploy\" not exists...\n Same error here. Also have the deploy.php script..\n Yes, but it won't allow me to run `dep` command as it's not listed as available command.\n  I'm using the symfony recipe but would like to change one of the tasks. The way the recipe is written means there's no way of changing that task without needing to rewrite the whole recipe.\n I have a slightly different/custom setup, so for me it would be handy to be able to override a task e.g. `deploy:update_code` while keeping all other tasks unchanged.\n\nCurrently it seems that you can add functions to a task, but that wouldn't be ideal if you want to change code being executed in a task. My workaround has been to duplicate the recipe and make changes, which is okay but isn't ideal because it may not be in keeping with your future code updates.\n Doesn\u2019t it work if you do the following:\n\n``` php\n<?php\n\nrequire_once 'recipe/symfony.php';\n\ntask('deploy:update_code', function () {\n    $basePath = config()->getPath();\n    $repository = get('repository', false);\n\n    if (false === $repository) {\n        throw new \\RuntimeException('You have to specify repository.');\n    }\n\n    $release = date('Ymd') . substr((string)time(), -5);\n    $releasePath = \"$basePath/releases/$release\";\n\n    env()->setReleasePath($releasePath);\n    env()->set('is_new_release', true);\n\n    run(\"git clone --recursive -q $repository $releasePath\");\n    run(\"chmod -R g+w $releasePath\");\n\n    // Add more stuff\n})->desc('Updating code');\n\n```\n @elfet @al3d I would favor `task('task you wish to override', closure)` would be the most fluent API\n  On your website you make the following statement:\nDeploy your code to all servers you want, it supports deploy via copy, or via VCS (like git), or via rsync.\n\nHowever, I am unable to see how exactly one would deploy via \"copy\" or rsync. It is unclear from the documentation or from the source code.\n\nCould you please give an example deploy.php file showing how this can be done? Or does one have to write the custom tasks running all the appropriate rsync or \"copy\" commands?\n Any examples on the `copy` strategy (via ssh) @elfet ?\n I will take over this issue, already have working code for deploy via \"copy\" only need to refactor it a bit.\n I can see this documentation?\n I've tried to do it today and it's problematic. First of all: we can't get user for server so - no way to specify user for remote host, instead have to define user twice.\n\noverriding update_code is only part-measure if You want to have proper cpy/rsync operations.\n\nFirst You have to prepare local release path, then override vendors or other taks that installs deps to remote and finally rsync everything\nAt first I was tempted to use upload from functions.php, however it does not allow You to set some fine grained includes/excludes so that left me with rsync ran locally to remote + double defining user.\n\nWant to have a look at my recipe? or shall I PR that stuff? or both ;)\n Sure :smiling_imp: Let me just clear code and I'll PR it against deployphp/recipes\n I've added a PR for this and stripped helluva lots of our own special-purpose code... Looks ok on our end and I hope it's ok for others :smiling_imp: \n Now that rsync recipe is in IMO nice shape I wanted to ask everybody about deployment strategies that would use rsync and some of my ideas that would speed up my PR-ed recipe very nicely.\n\n*\\* My work flow **\n\nSo - my work flow and rationale for it is caused by one common thing: Most of our customers use shared hosting on which there's no git, no sudo capabilities, installing composer is nightmarish and you can completely forget about Node-based stuff like gulp or bower.\n\nAfter getting Deployer to work nicely and rsync everything, the work flow I'm enjoying right now is this:\n- Work on development machine and preview suff locally \n- Rsync stuff to dev-preview hosting. (that is handled via deployer. I could add tiny tasks to PR if anyone is interested in rsyncing from devel dir instead of building everything everytime in temporary dir)\n- Deploy to staging machine where we can run everything. This is mostly very nice and very typical deploy where everything is on remote. (In capifony it was \"deployment -> scm -> production\" )\n- And finally the use-case from my recipe: get code from scm locally (temporary), run all compile-like things locally, push compiled release and dist-files via rsync to production. (so this is \"deployment -> production\")\n\nOne thing that could speed up my recipe is to copy everything from last release instead of creating new folder and then rsync to new release dir. In most cases (obviously depending on what is deployed) that move could result in huge speedup, because then rsync could work like rsync should - sending only changes. \n Ok, to sum up recent PRs to recipes repo: There's two separate recipes: \nOne is `local` that one can use as basis for local clone strategy. For simple copy deploy one can take local clone and using `upload` function, copy it to server. (if I understood correctly the whole point of copy deploy ;) )\nSecond is `rsync` that allows one to rsync anything from local to remote. Combining `local` and `rsync` gives one perfect local-copy&rsync.\nThose two recipes also cover shared hosting woes where one can hardly do anything except log into server and do some basic commands.\n\nOnly problem I see: it's hard to see thisconnection in docs. Maybe we could whip out some examples?\n What is the current state of the `copy` task? Could you please link the PR you mentioned @johnny-bit ?\nThanks!\n @webdevilopers look into deployphp/recipes, there you'll find 'rsync' recipe as well as 'local' recipe. The docs also help a lot.\n Thanks @johnny-bit . I looked at https://github.com/deployphp/recipes/blob/master/docs/local.md and not sure if this solves my use case.\n\nInstead of pulling a git clone on my target remote server I have to clone it locally because git has to be behind our firewall. Magallanes / MagePHP featured a tar archive that could then be pushed to remote. It would then be unzipped and handled there.\n\nDo you think this is covered or am i looking for a different task / recipe?\n\nThanks in advance!\n Well, no. There's no such feature now. My approach with local and rsync\nrecipes was to use local to compile suff locally, then rsync it to remote,\nsince rsyncing is waaay faster than uploading ~3GB worth of compiled data\nevery dam time. Even with tar/zip archives that would take considerable\namount of data to be uploaded.\n\nCurrently, if You would like it this way, you could use local recipe to\ncompile locally, then wirte task to create archive an then use upload\nfunction out of deployer and viola :)\n\n2015-11-13 9:25 GMT+01:00 webDEVILopers notifications@github.com:\n\n> Thanks @johnny-bit https://github.com/johnny-bit . I looked at\n> https://github.com/deployphp/recipes/blob/master/docs/local.md and not\n> sure if this solves my use case.\n> \n> Instead of pulling a git clone on my target remote server I have to clone\n> it locally because git has to be behind our firewall. Magallanes / MagePHP\n> featured a tar archive that could then be pushed to remote. It would then\n> be unzipped and handled there.\n> \n> Do you think this is covered or am i looking for a different task / recipe?\n> \n> Thanks in advance!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/deployphp/deployer/issues/60#issuecomment-156360609.\n\n## \n\nPozdrawiam,\nHubert Kowalski\n Thanks for the comment @johnny-bit ! Clear to me now!\n\nMaybe I will have to convince my guys to make the GIT accessible by the remote anyway! ;)\n The only reason i did local and rsync is because I work with customers that\nhave hosting on shared environments... and i'm still pondering whether to\ndo ftp recipe or not since i also have cheapasses that get cheapest hosting\nwithout even ssh access:)\n\nconvince guys to allow git accessible byremote, since git can authorize via\nssh an publickeys if needed :) it's easier that way.\n\n2015-11-13 9:31 GMT+01:00 webDEVILopers notifications@github.com:\n\n> Thanks for the comment @johnny-bit https://github.com/johnny-bit !\n> Clear to me now!\n> \n> Maybe I will have to convince my guys to make the GIT accessible by the\n> remote anyway! ;)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/deployphp/deployer/issues/60#issuecomment-156361367.\n\n## \n\nPozdrawiam,\nHubert Kowalski\n     :+1: :smile: Nice work, btw.\n  One static reference was missed, changed to access non static variable $this->deployer->stages\n  Hi,\n\nLooks like the documentation page isn't working any more. The navigation on the left won't redirect me to another page on Chrome and Safari on Mac. It links for example to '/#examples'.\n\nHope you can fix this, so I can read a bit more about this awesome tool :-)\n\nThanks!\nJeroen.\n Nice. Seems to be working now :-) Going to examples.html now :+1: \n  - i have a submodule in my git repository, it's not really common but i needed a recursive clone. maybe a nice feature to have for the update_code task\n- there was a bug in the cleanup task, wrong orderning of the releases directory caused this.\n  now there is a new function (didn't want to break older code) which let the ls command sort by time\n  One more enhancement ;)\n\n``` php\nrunWithParameters('some.sh --param=? || anything_else ?', ['foo', 'zoo']);\n```\n\nShould be converted to \n\n``` php\nrun('some.sh --param=`foo` || anything_else `zoo`');\n```\n This was an initial idea and then I saw that `run` have different second argument...\n\nhttps://github.com/elfet/deployer/blob/v1.1.2/src/functions.php#L78\n\n_Raw_ parameter seems little bit hacky, maybe move it to `runRemotely`?\n\nAt the end there might be `run`, `runLocally` and `runRemotely` and all of them could have parameters as second argument.\n  **note: Already made this pull-request as it hold significant refactoring and wanted to share and get some opinions**\n# Bugs\n- [x] dry-run option doesn't share env() #45\n- [x] dry-run option still executes runLocally & upload commands #46\n# LocalInterface & Local\n\nIntroduction of a Local system concept was needed to be able to replace the actions. Local works much like Server but doesn't connect, has an environment or config.\n\nBy default a Local will be created and managed by the Deployer instance.\n# Environment\n\nEnvironment doesn't hold the current environment anymore instead Runner has its current ServerInterface and LocalInterface.\nIt makes more sense to remember the current server than the current environment. Shortcut to the environment still exists.\nThe Environment does not know which server it belongs to, it is just a container for parameters\n# Runner\n\nNow holds the current server and local. (These are static for now goal is to have the Deployer govern these.)\n# getReleases & get/setReleasePath moved to AbstractServer\n\nAs the Environment is just a parameter container, I moved these methods to AbstractServer, which also makes more sense in my opinion.\n# Renamed DryRun to DryRunServer\n\nwith the introduction of DryRunLocal, it is better to have distinctive names.\n# functions\n\nChanged many of the functions to support the new setup, but retained their functionality.\n## runLocally\n\nnow uses the Local instance, which can be a DryRunLocal\n# Tests\n\nAs there are hardly any existing test for these functionalities, it will take some time to get everything properly tested.\n @elfet I see this weekend will be intensive for you ;)\n  Possible to run simple shell commands directly without creating callback.\n\n``` php\ntask(name, shellCommand)\n\nexample:\ntask('deploy:cache:warmup','php %releasepath%/app/console assetic:dump --env=%env% --no-debug')\n```\n\nThis would automatically provide some default behaviour for a task, and could replace many simple tasks. \n\nThe current functionality for ReferenceTask could be removed to an alias function\n\n``` php\nfunction alias($name, $alias) {\n    Deployer::$tasks[$name] = new ReferenceTask(Deployer::$tasks[$alias]);\n}\n```\n That's true, but we could handle this by checking if the shellCommand is the name of a Task, if it is the alias function will be called.\n\nI think it will be extremely rare a taskname matches something you wish to execute on the server.\nIt is something that should be considered if you want to have Deployer configured by YAML files.\n I don't see big difference between what is already exists \n\n``` PHP\ntask('deploy:cache:warmup','php %releasepath%/app/console assetic:dump --env=%env% --no-debug')\ntask('deploy:cache:warmup',function(){ run('php %releasepath%/app/console assetic:dump --env=%env% --no-debug')); });\n```\n  https://github.com/elfet/deployer/blob/master/recipe/common.php#L138\n\nI think there should be distinction like we have with `shared_dirs` / `shared_files`.\n\nProbably more intelligent way is to get rid of such difference and have only one `shared` option witch will able to guess is given argument a file or a directory.\n\n```\nset('shared', ['app/logs/', 'app/config/parameters.yml']);\nset('writable', ['app/logs/', 'app/logs/*', 'app/public/whatever']);\n```\n\nSlash at the end treated as directory, file otherwise. Asterisk explicitly says that it is recursive.\n There is improved permissions on writable directories from PR #81 \n\nPerhaps this solves the main issue here.\n  The use of many static variables makes it difficult to write extensive tests for complicated scenarios or functionality or single functions\n\nSuggest to change to a more test friendly\n\nfunctions.php: use Deployer::get() to get the current instance\n\n``` php\nDeployer::$servers => Deployer::get()->servers();\nDeployer::$servers['main'] => Deployer::get()->servers('main');\n```\n\nclasses: the Deployer is needed in a few classes, so injecting it through the constructor would allow it to be mocked.\n\n``` php\nclass RunTaskCommand extends BaseCommand\n{\n    ...\n    protected $deployer;\n\n    public function __construct($name, Deployer $deployer, TaskInterface $task)\n    {\n        ....\n    }\n}\n```\n  To be more consistent in naming...\n Probably better way is to rename this issue to \"make an alias\". For me two letters doesn't give anything but in terms of naming it is more clear.\n\nComposer -> composer.json\nPHPUnit -> phpunit.xml\n\nAnd so on.\n How about add new option [--config=deploy(er).php]?\n a --config option would be welcome.\n Issue #37 is related to `--config` option as well. I don't see any problems in possible usage like `--config=deploy(er).php` or `--config=deploy(er).yaml`\n  What do you think about to create default `deploy` task for common recipe similar to http://deployer.in/#symfony-recipe for non symfony oriented projects?\n\nI spent additional time to figure out that there is no such default task.\n\nAlso tasks in symfony recipe should be prefixed accordingly like `symfony:assets` and so on.\n  ```\n$ vendor/bin/dep deploy\nPreparing server for deploy.................................\nNotice: No compatible server to client encryption algorithms found in /var/www/project/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 1257\n\u2714\nUpdating code...............................................\u2714\nCreating cache dir..........................................\u2714\nCreating symlinks for shared files..........................\u2714\nMake writeable dirs.........................................\u2714\nNormalizing asset timestamps................................\u2714\nInstalling vendors..........................................\u2714\nDumping assets..............................................\u2714\nMigrating database..........................................\u2714\nWarming up cache............................................\u2714\nCreating symlink to release.................................\u2714\nCleaning up old releases....................................\u2714\nSuccessfully deployed on xx.xx.xx.xx\n```\n\nSeems Deployer successfully finished but there is _nothing_ on destination server.\n I've installed ssh2 extension and ... \n\n> If you want to use pem file, switch to using PhpSecLib.\n\n:zap: \n\nNow the question is how can I do that except uninstalling the extension? Probably a configuration options should do this.\n\nFor reference https://github.com/phpseclib/phpseclib/issues/434\n This fix doesn't solve notice ignorance but the reason of _No compatible server to client encryption algorithms found_\n Are you going to pull my changes?\n Again, the `phpseclib` raise notices instead of errors and therefore deployer doesn't fail. This is not related with include_path issue.\n\n```\nvendor/bin/dep deploy\nPreparing server for deploy.................................PHP Notice:  Cannot connect to xx.xx.xx.xx:22. Error 110. Connection timed out in /nowhere/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 960\n\nNotice: Cannot connect to xx.xx.xx.xx:22. Error 110. Connection timed out in /nowhere/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 960\n\u2714\nUpdating code...............................................\u2714\nCreating symlinks for shared files..........................\u2714\nMake writeable dirs.........................................\u2714\nInstalling vendors..........................................\u2714\nCreating symlink to release.................................\u2714\nCleaning up old releases....................................\u2714\nPHP Notice:  Connection closed prematurely in /nowhere/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 3126\n\nNotice: Connection closed prematurely in /nowhere/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 3126\nPHP Warning:  fclose() expects parameter 1 to be resource, boolean given in /nowhere/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 3362\n\nWarning: fclose() expects parameter 1 to be resource, boolean given in /nowhere/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 3362\n```\n I was getting this because of an error in my configuration. \n\nI was not specifying a password for the ssh key defaults the password to a blank string rather than prompting for it. I fixed this by setting the password null and everything worked again.\n\nThe issues I had were I didn't get an error message telling me what the problem was, just the \"No compatible server to client encryption algorithms\" notice and then it reports a successful deployment.\n\nThis is a little scary in my opinion. We want to use deployer.in, but are stuck with capifony until we can trust it to tell us the correct outcome.\n As I understand it the ssh2 extension doesn't support pem files which we currently use.\n\nAlso the advantage for us with deployer.in over capifony is the fact that we can download a phar file and all we need is a php interpreter to deploy code. Unfortunately making sure everyone installed a pecl extension means we might as well stick with capifony.\n\nDo you have a time frame for v3 and will you be continuing to develop v2? I wanted to add a \"copy_vendors\" setting (we use it in capifony to speed up deployment) but if v2 development has ceased I'll just wait to see what v3 brings.\n I've created a pull request that should stop deployer from continuing if there is an error during login. \n  1. There is no _deployer.php_ in root\n2. `$ vendor/bin/dep`\n3. Console displays `Deployer version __VERSION__`\n  ```\n{\n    \"require\": {\n        \"elfet/deployer\": \"1.1.2\"\n    }\n}\n```\n\n> Your requirements could not be resolved to an installable set of packages.\n> \n>   Problem 1\n>     - elfet/php-ssh v1.0.0 requires ext-ssh2 \\* -> the requested PHP extension ssh2 is missing from your system.\n>     - elfet/deployer v1.1.2 requires elfet/php-ssh ~1.0 -> satisfiable by elfet/php-ssh[v1.0.0].\n>     - Installation request for elfet/deployer 1.1.2 -> satisfiable by elfet/deployer[v1.1.2].\n Another try \n1. clone master repo\n2. composer install\n\n> Your requirements could not be resolved to an installable set of packages.\n> \n>   Problem 1\n>     - Installation request for elfet/php-ssh v1.0.0 -> satisfiable by elfet/php-ssh[v1.0.0].\n>     - elfet/php-ssh v1.0.0 requires ext-ssh2 \\* -> the requested PHP extension ssh2 is missing from your system.\n This commit https://github.com/elfet/php-ssh/commit/16da47bdbb2be5beafdff1b8a46c89229bd7f00f should be marked as release to able require it as stable.\n  As many devs do, I'm searching for PHP replacement of Capistrano to be more consistent. Deployer seems pretty thin and clear. BTW there is another tool http://magephp.com/. So far one feature from it seems to me important: YAML configuration. Such language agnostic way makes life easier to non-php-dev users. I understand that Deployer API is very light to be used directly.\n\nAlso it's not documented how can be used different environment configs. In Magallanes it's more clear \n\n> .mage/config - the main general.yml configuration file is stored here.\n> .mage/config/environments - the environments configuration files are here.\n> .mage/logs - logs (if enabled) are saved there.\n> .mage/tasks - and custom tasks are stored over here.\n I think there is no easy way of writing tasks in YAML, but at least configuration could be done\n\n```\nserver('main', 'site.com')\n    ->path('/home/user/site.com')\n    ->user('user')\n    ->pubKey();\n```\n\n```\nserver:\n    main:\n        host: site.com\n        path: /home/user/site.com\n        user: user\n        pubKey: ...\n```\n\nMost recent changes\n\n`stage('development', array('development-server'), array('branch'=>'develop'), true);`\n\n```\nstage:\n    development:\n        server: [dev-server]\n        options:\n           - [branch: develop]\n```\n Tasks\n\n``` php\ntasks:\n  -\n    name: deploy\n    type: group\n    tasks:\n      - 'deploy:start'\n      - 'deploy:upload_code'\n      - 'deploy:end'\n    before: []\n    after: []\n  -\n    name: deploy:prod\n    type: reference\n    id: deploy\n  -\n    name: php-fpm:restart\n    type: task\n    run: server\n    command: service php5-fpm restart\n  -\n    name: local:echo\n    type: task\n    run: local\n    command: echo 'local command'\n```\n\nI suggest only allowing simply tasks to be defined through the yaml config. this should be commands that can be directly by the run() or runLocally() and don't require any additional logic. ( many tasks could be written like this, but then that's up to the user )\n\nedit: forgot before & after\n Won't this produce some mess like \"oh, some tasks are possible to write in config but some not\" ?\n Well the idea would be to only have custom task when you want different behaviour, or complex processing, aka you need addition php code.\n\nRegardless of defining tasks through YAML, it should be possible to import them.\n\n``` php\ntasks:\n  -\n    type: import\n    source: <some uri>\n```\n Yeah, you should keep it simple. Some summary so far\n- alias: have agreed\n- YAML for settings: agreement not reached\n- YAML for task definition: disagreed\n Helper library that might facilitate implementation https://github.com/herrera-io/php-wise\n I think the major advantage deployer has is the fact that you're writing code to deploy. I think most use cases have at least one small snippet of code, and implementing this with yaml would suck.\n  Make it possible to add custom options for each task.\n# deploy.php\n\n``` php\ntask('deploy:update_code', function(\\Symfony\\Component\\Console\\Input\\InputInterface $input) {\n    $branch = $input->hasOption('branch')?$input->getOption('branch'):get('branch', false);\n...\n})->desc('Update local codebase')->option('branch', 'b');\n\ntask('deploy', [\n...\n])->option('branch', 'b');\n```\n# cli\n\n```\ndep deploy -b develop\nor\ndep deploy --branch=develop\n```\n This is nice feature but it makes possible to deploy _develop_ branch to prod server. For example I have a task `deploy:prod` and such command `dep deploy:prod -b develop` will do a bad job. \n\nSo I vote for per configuration only branch definition.\n Point of this pull request is to make it possible to add custom options, how you use it is up to you.\n\nThere is not automation on overwriting configuration, you still have to manually decide how and when the option is used.\n\nOn a general not it is indeed best not to allow people to chose their branch when deploying to production, but in many cases on other environments it can be handy to be able to deploy a feature branch.\n Okay, make sense.\n  A quick attempt at adding multistage support (which works)\n# deploy.php\n\nIt is important to define your stages after you have defined your servers, the stage is a list of servernames which are retrieved from the defined servers.\n\n``` php\n// stage(name, array(servername1, servername2, ...), array('key'=>'value'), default)\nstage('develop', array('development'), array('branch'=>'develop'), true);\nstage('production', array('production'))->options(array('branch'=>'master'));\nstage('test', array('test'))->set('branch', 'develop');\n```\n# commandline\n\n``` php\ndep my:task [stage] [--server=server] [--dryrun]\n```\n Sorry, todo's were done, just didn't edit the comment.\n Added support for options per stage, so that you can define a branch per stage.\n\nWill write tests and docs for this\n  [This line](https://github.com/elfet/deployer/blob/master/recipe/symfony.php#L38) requires PHP 5.5 [according to these notes](http://php.net/manual/en/migration55.new-features.php)\n\nI wanted to submit a PR but am still reading the code and familiarizing :)\n Thank you @elfet for fixing that, even though it's such a small point :)\n  Hi there!\n\nFirst of all, thanks for this awesome toolkit! It really rocks :)\n\nMy production server has bash console. There is an issue with deleting shared folders in codebase. Somewhy bash does not expand \"~\" in the following command:\n\n```\ncd ~/webroot/production && if [ -d \"~/webroot/production/releases/2014072705721/core/modules/error/media\" ]; then rm -rf ~/webroot/production/releases/2014072705721/core/modules/error/media; fi\n```\n\nand does not delete the directory (so symlink does not work).\nAfter googling I've found this: http://stackoverflow.com/questions/1685894/home-directory-expansion-within-an-argument\n\nSo I've changed the expression to this\n\n```\nif [ -d $(echo ~/webroot/production/releases/2014072705721/core/modules/error/media) ]; then echo 'exists'; fi\n```\n\nand it worked as expected.\n This is default Jelastic apache2.2 web-server.\n`uname -a` says this:\n\n```\nLinux apache2.2.2.15-29.45211.afs-prod-script 2.6.32-042stab090.5 #1 SMP Sat Jun 21 00:15:09 MSK 2014 x86_64 x86_64 x86_64 GNU/Linux\n```\n No, it is not Jelastic bug, it is a bash console issue.\n\nYes, I can create PR.\n May you rebuild this tool with my changes so they would be available through Composer?\nThanks.\n  Hi, I'm trying to test a deployment with ssh + git, but I cannot figure out the proper way to use my .pem private key that lets me SSH into AWS instances. This is normally done with ssh -i key.pem or similar. I've tried setting is as both a public and a private key, to no avail. Also it seems that deployer is not properly recognizing the fact that phpseclib is failing in this case.\n I was looking at that function before posting, it does not seem to work properly. The .pem file I have is not an x509, it is a private RSA key, like:\n\n-----BEGIN RSA PRIVATE KEY-----\n.........key..........\n-----END RSA PRIVATE KEY-----\n\nI've tried setting that to both the public and private key, to no avail. openssl_pkey_get_public returns false on that...\n So, do you have any decisions how to deploy on AWS?\n Cool, I looked at the code you changed and it seems fairly obvious, but it doesn't seem to work for me.\n\n```\n[josh@orangeslice ~/projects/seaglass (master)]$ dep deploy\nPreparing server for deploy.................................Password: \n\u2714\nUpdating code...............................................\u2714\nInstalling vendors..........................................\u2714\nCreating symlink to release.................................\u2714\nCleaning up old releases....................................\u2714\nSuccessfully deployed on banzai.aws\n```\n\nBut nothing actually happens. There is no password, not sure why it's prompting for that. I hit enter at the password prompt and everything completes without error, but nothing is copied or checked out.\n\nRedacted code from deploy file:\n\n``` php\n<?php\nrequire 'recipe/composer.php';\nset('use_ssh2', false);\nset(\"repository\", \"git@github.com:org/repo.git\");\n\nserver(\"web\", \"server.aws\")\n    ->user(\"ubuntu\")\n    ->path('/www/repo-deploytest')\n    ->setPemFile(\"~/.ssh/aws.pem\");\n\n```\n\nI'm happy to contribute as necessary to make this work.\n Ah, a simple error on my part. Works flawlessly now. Thanks so much for adding this. \n Good news. Thanks a lot\n  The php-ssh dependency has a hard dependency on the ssh extension. Possible solution is to make php-ssh a suggest instead of a require.\n  Is it possible to deploy multiple stages to multiple environments easily, like it's done with capistrano (cap staging deploy / cap production deploy)?\n\nI'd like to deploy my staging git branch to another server then my master branch. Only this branch and the server settings need to be different.\n Think this can be closed? see http://deployer.in/#stages\n Ok, thanks!\n  Hi,\n\nWould it be hard to implement a special task that runs only on one server (last one). Let's say i'm deploying application to 10 servers ... and want to run a task after all the servers are deployed. The task should run on last server in the queue. \n\nI need to clear some remote cache server (throught an api call) and running it on all servers seems like a bad solution. \n\nThe easiest solution would be to add some kind of env variable that I could check by config()->lastServer() and run a task only if this returns true.\n\nBest regards,\nPawel\n Well this would work .. but it's such an \"ugly\" solution. So I ended up modifying it a little bit .. so that i don't have to know the name of the host.\n\ndeploy.php\n\n``` php\n//Array of servers ..\n$servers = [.......];\n\nforeach($servers as $server)\n{\n    // Define server for deploy.\n    server($server['name'], $server['host'])\n        ->user('root')\n        ->setWwwUser('web')\n        ->path($path)\n        ->pubKey();\n\n    //Find the last one\n    if (!each($servers))\n        set('last_server_name', $server['name']);\n}\n\n```\n\nrecipie/custom.php\n\n``` php\n\ntask('one', function () {\n    if(get('last_server_name', false) == config()->getName())\n        // Do your stuff...\n    }\n});\n\n```\n\nThis will work better since i don't have to hardcode the name of the server into php. If the list of server changes ... it will still work ....\n Sounds good .... but .\n- when will it fire .. after all servers are deployed ?\n- will it be possible to pass a variable by calling \n\ndeploy.php\n\n``` php\nset('some_variables', [....]);\n```\n\nrecipe/custom.php\n\n``` php\n$var = get('some_variable', []);\n```\n Great ... so I can place it at the end .. and it will fire as the last one ... this would be perfect.\n task()->once() makes sence. \n\nwhile working on DryRun for local commands I've implemented this a slightly\n\n``` php\ntask()->once($server = 'local')\n```\n\n_not final code_\n\n``` php\nprivate function runSeries(Runner $runner, array $servers, InputInterface $input, OutputInterface $output)\n{\n    $taskName = $runner->getName();\n    $taskName = empty($taskName) ? 'UnNamed' : $taskName;\n\n    if ($runner->once() == 'local') {\n        $this->runTaskLocally($runner, $taskName, $input, $output);\n    } elseif (null !== $runner->once() && $server = $servers[$runner->once()]) {\n        $this->runTaskOnServer($server, $runner, $taskName, $input, $output);\n    } else {\n        foreach ($servers as $name => $server) {\n            $this->runTaskOnServer($server, $runner, $taskName, $input, $output);\n        }\n    }\n}\n\nprivate function runTaskLocally(Runner $runner, $taskName, InputInterface $input, OutputInterface $output)\n{\n    if (OutputInterface::VERBOSITY_VERBOSE <= $output->getVerbosity()) {\n        $output->writeln(\"Run task <comment>$taskName</comment> <info>locally</info>\");\n    }\n\n    // Run task.\n    $runner->run($input);\n}\n\nprivate function runTaskOnServer(ServerInterface $server, Runner $runner, $taskName, InputInterface $input, OutputInterface $output)\n{\n   ...\n}\n```\n\nthis would run once('local') independent from servers and once('servername') on a specific server\n Capistrano have roles :)\nSo you can specify roles to each server and then specify roles to tasks.\nFor example:\n\n``` php\nserver('server1')->roles(array('frontend', 'upload'));\nserver('server2')->roles(array('frontend'));\nserver('server3')->roles(array('backend'));\nserver('server4')->roles(array('backend'));\nserver('server5')->roles(array('backend'));\nserver('server6')->roles(array('backend', 'crontab', 'primary')); // crontab working here and primary means that tasks to migrate database or some other migrate task should be executed here (not on each servers)\n```\n\nThen you specify roles on task:\ntask \"Reload nginx\" have roles frontend and upload, because each of these roles uses nginx (other servers do not have nginx)\ntask \"Reload php5-fpm\" have roles backend, because this role uses php5-fpm (other servers do not have php5-fpm)\ntask \"Refresh crontab\" have roles crontab, because this role manages crontab tasks (other servers do not have crontab tasks. Only this server runs tasks periodically).\ntask \"Migrate\" have roles primary, because this role manages runs some migrate script to migrate environment (database, caches, etc.) This role do not need to be invoked on each servers.\ntask \"Warmup caches\" have roles primary, because this role do not need to be invoked on each servers\n\nThen we have simple deploy scenario:\n...\ndeply.scm...\n....\nRefresh crontab\nMigrate\nReload php5-fpm\nWarmup caches\nReload nginx\n\nAs I understand this project does not have \"roles\" yet?\n It is very old solution and was implemented in capistrano from first dates AFAIK...\nIt is very important thing when you have more then one server for your deployment.\nI was looking for some other product and found this one, but i can not use it because i have 10+ servers with different roles and different software :)\nBut seems like there is not difficult to implement it...\n Also vote for `once()` feature - useful when you prepare deb/archive locally and only then distribute it across servers.\n +1 on `once()` as I just migrated from Rocketeer to Deployer and I have a `build` task to set up my application before moving it to my servers, and right now it runs that for every server I have in the `stage` instead of once.\n  Correct grammatical error\n\nMy apologies for the extra diff noise at line 86, I just used the GitHub web editor\n  There is no alter command that I can find. It seems this should be the `after` command\n  I'm sure this was built with with Symfony in mind (heck its built using Symfony components), but to make is easier for people to adapt this to other frameworks could the most basic deployment steps like prepare, symlink, and rollback be in a separate recipe and then layer Symfony specifics on top of that?\n\nFor a freeform project instead of `require 'recipe/symfony.php';` you could just `require 'recipe/basic.php';` and get the meat and potatoes of the tool.\n\nIf you ever plan on shipping more default recipes for other frameworks this could also help cut down on duplication, since everything will leverage the basics, but each framework will handle assets and caches differently.\n I just wanted to say thanks for this!\n  Hello,\n\nthis PR add 3 functions :\n- ask\n- askConfirmation\n- askHiddenResponse\n\nexemple :\n\n```\n<?php\nrequire __DIR__ . '/../vendor/autoload.php';\ndeployer();\n\n\ntask('test', 'test', function() {\n\n    $user = ask('Username ?', 'admin');\n    writeln($user);\n\n    $password = askHiddenResponse('Password ?');\n    writeln($password);\n\n    if(askConfirmation('Confirm ?')) {\n        writeln('ok');\n    } else {\n        writeln('ko');\n    }\n\n});\n\nstart();\n```\n Hey guys,\n\nGreat work but it should be documented somewhere !\n  I just tested out deployer with some sample data and I found that it does not upload any dotfiles (.htaccess ...).\nOn the on side of course it's good, because no gitfiles (.git, .gitignore) are pushed to the webroot but as I mentioned files like .htaccess are not uploaded. Could there be an implementation to support this?\n  Please, add return output in run and runLocally.\n\nThanks\n  I would like to download in my local env a sql dump.\nI try to implement get from Net_SFTP class but don't work...\nHere my work: https://github.com/miziomon/deployer/\n\nPlease can you implement this feature?\nThanks in advance...\n Here my snippet...\n\ntask(\"download\",\"Download file from remote\" , function () {\n    cd(remote);\n    download(\"dumpsql.sql\", \"dumpsql.sql\");\n});\n sorry... maybe my answer is too short.\nI would like to create task to download file from remote\n\ni think to use \"get\" method from Net_SFTP   sftp->get($from, $to);\nhere all my change but something is wrong: \nhttps://github.com/miziomon/deployer/commit/2eb7f2f7907799a451c22a73e2582a03e4f20598\n\nI hope you have understood the problem...\nthanks in advance\n  Fixes: execute cd path was not escaped\nImprovements: `run` and `runLocally` now returns output and both take variadic arguments and automatically escapes.\n\nNo BC break introduced.\n Oh my I pushed my original wip branch, not the passing one. Should be alright now.\n  Hello, I'm trying to use deployer but I have an issue with the ignore command.\nThis is my list of files to ignore \nignore([\n    'deployment',\n    'cache/_',\n    'log/_',\n    'nbproject',\n    'sessions/operator/_',\n    'sessions/webapp/_',\n    'sessions/driverAPI/_',\n    'sessions/driver/_',\n    'sessions/mobile/*',\n]);\n\nBut if I do this it ignore the entire folder for cache, log and sessions, instead of ignoring only their content.\n\nAlso if I just say ignore([ 'log' ]) it will ignore any folder with the name log in my project not just the one in root.\n\n[after every '/' is a \\* but github editor seems to remove them or at least I don't see them in my browser]\n That would be great.\n If you create a behaviour like in .gitignore file, why not add an option to even use the gitignores?\n   `preg_quote` does not work like you think http://cz1.php.net/preg_quote, the second argument adds to the list you wrote.\n @elfet I have a few minor improvements planned, will compile and bump version right after that.\n  Hi,\n\nI am trying to test this script but i get an issue (all the team get the same issue in the office):\nI've follow your very simple doc and I get this message when I launch cmd :\n[InvalidArgumentException] Command \"prod\" is not defined.\n\nUsually we didnot have problem with symfony/console on our symfony project.\n\nIs there a special step for windows (seven) we miss ?\n\nThanks\n I ran this command with the \"cmd\" (or gitbash shell that work fine)\nHere is the deploy.php content : https://gist.github.com/ScullWM/9120257\n\nThanks\n Got the same issue, but it works when I add the description param (so callback param is the third).\n @jmsche so how look the cmd you use ?\n Like this https://gist.github.com/jmsche/9123833\n @jmsche yes it work perfectly! Thanks!\n Regarding the code if no third param is given the second should be taken as the callback function.\nI didn't go very deep in the code but that's what I assume from examples and certain code parts.\nYou're welcome :)\n @elfet I got same $descriptionOrCallback problem.\n  Got this error yesterday on my first try with deployer:\n\nPHP Notice:  No compatible server to client encryption algorithms found in ...../vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 1127\n\nI got it fixed by updating vendors and rebuilding PHAR archive.\n\nHope this can help :)\n Hi, any news about this?\n I'm only getting this error using the .phar file. Using the Composer way of installation does not result in this error.\n okay, I got this error with phar.\n\nand I find that people had the same issue with phpseclib in phar too\nhttps://github.com/phpseclib/phpseclib/issues/196\n I get this error using composer and PHP 5.5.9-1ubuntu4\n I've ran into that issue now, I've installed deployer via composer, version ~2.0. Here is my deploy.php, it's pretty basic:\n\n```\nrequire 'recipe/symfony.php';\n\nserver('staging-server', 'my_server.url')\n    ->path('/var/www/html/deploy.in')\n    ->user('foo', 'bar');\n    //->pubKey('~/.ssh/id_rsa.pub', '~/.ssh/id_rsa', null);\n\nstage('staging', array('staging-server'), array('branch' => 'master'), true);\n\nset('repository', 'git@my-repo.git');\n```\n\nI've got two notices:\n\n```\nPHP Notice:  No compatible server to client encryption algorithms found in /var/www/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 1266\n\n...\n\nNotice: No compatible server to client encryption algorithms found in /var/www/vendor/phpseclib/phpseclib/phpseclib/Net/SSH2.php on line 1266\n```\n\nAm I doing something wrong? I try both user-password way, and pubkey. By the way, my private key doesn't have pass phrase. I run deploy script on Vagrant virtual machine, OS - Ubuntu 14.04 LTS\n @elfet I have the same issue, only I need to connect to my EC2 with a PEM file.. Any idea why it doesnt work?\n  Hallo, this is a simple improvement of upload task that allows uploading files from window machine.\nClass Utils\\Path was taken from Gaufrette (https://github.com/KnpLabs/Gaufrette)\n  it's possible add support for\nhttps://github.com/badoo/pssh_extension ?\n\nand maybe optional using python-style decorator a la Fabric\nhttps://github.com/AterCattus/php-decorators\n<code>\n/*\\* @parallel */\ntask()\n</code>\n I wanted to suggest pssh too! But I think it requires to rethink deployer architecture.\n Objected solution for [pssh_extension](https://github.com/badoo/pssh_extension) \u2014 https://github.com/muxx/dplr.\n  This changes allow works with many server at once:\n1. Allows to call several `connect()`\n2. Allows to group servers and make changes on servers from particular group\n\nIt is especially important when many identical servers work with general database server and we want at first update application files on all app servers and then run database migration on the single server.\n\nWe use this fork in some SaaS project for deploying and other bulk actions :)\n\nParameter `$argv` introduced for working with input arguments and options.\n > I prefer to use PSR-2.\n\nSorry for my code.\n\n> I also modified your implementation to use RemoteGroup class.\n\nOk. May be this is better. Just in our problems almost all commands executes for groups of servers and in your implementation we got double nesting of function almost everywhere. But it looks more elegant :)\n Please, update this example https://github.com/elfet/deployer/blob/master/example/symfony_multiserver.php else.\n\nAnd make please 0.4.0 release )\n I will check during this week.\n Hi! I look at your changes of my pull request and they are not very comfortable in usage (\n\nFor example, input data:\n\n```\nconnect('job.domain.com', user, rsa('~/.ssh/id_rsa'), 'job');\nconnect('node1.domain.com', user, rsa('~/.ssh/id_rsa'), 'node');\nconnect('node2.domain.com', user, rsa('~/.ssh/id_rsa'), 'node');\nconnect('node3.domain.com', user, rsa('~/.ssh/id_rsa'), 'node');\n```\n\nThen I want to make `cd` on all servers. In my realization I just made:\n\n```\ncd('/some/folder');\n```\n\nIn your realization I must make something similar:\n\n```\ngroup('job', function() {\n    cd('/some/folder');\n});\ngroup('node', function() {\n    cd('/some/folder');\n});\n```\n\nWhen I have a several connections I want to execute commands by default on all servers. I think it's more coherent.\n Oh, I will try new version, thanks. It is likely that I understood incorrectly.\n Executing is ok. I notice that no output from command `run`. It is ok?\n", "text_all_count": 116089, "text_word_token": ["Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "Is", "it", "possible", "somehow", "to", "execute", "symfony", "recipe", "s", "tasks", "on", "multiple", "environments", "We", "have", "NUMBER", "envs", "www_live", "admin_live", "api_live", "and", "all", "of", "them", "needs", "cache", "warmup", "writable", "dirs", "etc", "NUMBER", "What", "should", "I", "do", "I", "cannot", "upload", "the", "whole", "project", "NUMBER", "We", "have", "an", "API", "admin", "and", "a", "public", "site", "with", "the", "same", "schema", "and", "entities", "but", "for", "example", "different", "authentication", "system", "different", "template", "different", "yml", "configs", "NUMBER", "We", "handle", "this", "situation", "that", "we", "created", "a", "couple", "of", "environments", "web", "api", "admin", "etc", "NUMBER", "and", "when", "we", "deploy", "our", "symfony", "project", "we", "warmup", "all", "environments", "cache", "shared", "file", "etc", "NUMBER", "Deployer", "support", "parallel", "deployment", "with", "p", "parallel", "options", "NUMBER", "Does", "anybody", "use", "it", "I", "ve", "tried", "it", "couple", "times", "and", "it", "worked", "fine", "for", "me", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "OSX", "Remote", "Machine", "OS", "Ubuntu", "Description", "For", "example", "release", "directory", "has", "NUMBER", "version", "NUMBER", "NUMBER", "NUMBER", "TAG", "NUMBER", "Is", "there", "any", "option", "to", "tell", "deployer", "to", "ask", "for", "credentials", "during", "deploy", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "user", "username", "identityFile", "stage", "dev", "env", "deploy_path", "var", "www", "html", "myapp", "dev", "env", "branch", "develop", "env", "env_vars", "SYMFONY_ENV", "dev", "env", "env", "dev", "env", "composer_options", "install", "override", "from", "symfony", "recipe", "task", "deploy", "clear_controllers", "function", "setPrivate", "set", "shared_dirs", "var", "logs", "var", "sessions", "app", "var", "set", "writable_dirs", "var", "cache", "var", "logs", "var", "sessions", "app", "var", "set", "repository", "ssh", "git", "my", "NUMBER", "com", "repo", "NUMBER", "git", "after", "deploy", "vendors", "database", "migrate", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "Windows", "NUMBER", "Remote", "Machine", "OS", "Ubuntu", "NUMBER", "LTS", "I", "be", "start", "studying", "the", "Deployer", "NUMBER", "My", "question", "be", "the", "deployer", "can", "use", "for", "offline", "deployment", "NUMBER", "I", "have", "a", "yii", "framework", "developed", "from", "windows", "and", "deployed", "to", "the", "ubuntu", "NUMBER", "LTS", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Windows", "NUMBER", "Remote", "Machine", "OS", "Linux", "WHM", "cPanel", "Description", "I", "ve", "set", "up", "a", "new", "site", "to", "deploy", "via", "this", "script", "and", "I", "m", "get", "an", "error", "on", "dep", "deploy", "production", "RuntimeException", "stdin", "be", "not", "a", "tty", "bash", "stdin", "command", "not", "find", "Steps", "to", "reproduce", "NUMBER", "Set", "up", "site", "use", "the", "below", "deploy", "NUMBER", "php", "file", "NUMBER", "Run", "dep", "deploy", "production", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "user", "l", "k", "password", "f", "e", "env", "deploy_path", "home", "l", "k", "public_html", "server", "beta", "beta", "NUMBER", "domain", "NUMBER", "com", "user", "username", "password", "env", "deploy_path", "var", "www", "beta", "NUMBER", "domain", "NUMBER", "com", "Restart", "php", "fpm", "on", "success", "deploy", "NUMBER", "task", "php", "fpm", "restart", "function", "Attention", "The", "user", "must", "have", "rights", "for", "restart", "service", "Attention", "the", "command", "sudo", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "use", "only", "on", "CentOS", "system", "etc", "sudoers", "username", "ALL", "NOPASSWD", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "run", "sudo", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "desc", "Restart", "PHP", "FPM", "service", "after", "success", "php", "fpm", "restart", "Main", "task", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "shared", "deploy", "writable", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "after", "deploy", "success", "Output", "log", "Executing", "task", "deploy", "prepare", "on", "production", "echo", "NUMBER", "TAG", "if", "d", "home", "l", "k", "public_html", "then", "mkdir", "p", "home", "l", "k", "public_html", "fi", "TAG", "if", "L", "home", "l", "k", "public_html", "current", "d", "home", "l", "k", "public_html", "current", "then", "echo", "true", "fi", "TAG", "cd", "home", "l", "k", "public_html", "if", "d", "release", "then", "mkdir", "release", "fi", "TAG", "cd", "home", "l", "k", "public_html", "if", "d", "shared", "then", "mkdir", "shared", "fi", "TAG", "if", "d", "home", "l", "k", "public_html", "release", "NUMBER", "then", "echo", "true", "fi", "TAG", "mkdir", "home", "l", "k", "public_html", "release", "NUMBER", "TAG", "cd", "home", "l", "k", "public_html", "if", "h", "release", "then", "rm", "release", "fi", "TAG", "ln", "s", "home", "l", "k", "public_html", "release", "NUMBER", "home", "l", "k", "public_html", "release", "TAG", "which", "git", "TAG", "stdin", "be", "not", "a", "tty", "usr", "local", "bin", "git", "version", "TAG", "find", "home", "l", "k", "public_html", "release", "maxdepth", "NUMBER", "mindepth", "NUMBER", "type", "d", "TAG", "readlink", "home", "l", "k", "public_html", "release", "TAG", "stdin", "be", "not", "a", "tty", "usr", "local", "bin", "git", "clone", "recursive", "q", "reference", "home", "l", "k", "public_html", "release", "NUMBER", "dissociate", "git", "domain", "NUMBER", "com", "ethanclevenger", "NUMBER", "l", "k", "NUMBER", "git", "stdin", "be", "not", "a", "tty", "home", "l", "k", "public_html", "release", "NUMBER", "NUMBER", "NUMBER", "stdin", "be", "not", "a", "tty", "usr", "local", "bin", "git", "clone", "recursive", "q", "git", "domain", "NUMBER", "com", "ethanclevenger", "NUMBER", "l", "k", "NUMBER", "git", "stdin", "be", "not", "a", "tty", "home", "l", "k", "public_html", "release", "NUMBER", "NUMBER", "NUMBER", "RuntimeException", "stdin", "be", "not", "a", "tty", "bash", "stdin", "command", "not", "find", "Exception", "trace", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "deployer", "deployer", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "deployer", "deployer", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "deployer", "deployer", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "deployer", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "C", "Users", "ethan_", "NUMBER", "AppData", "Roaming", "Composer", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "deploy", "p", "parallel", "bash", "Looks", "like", "SSH", "inside", "SSH", "NUMBER", "I", "don", "t", "know", "what", "that", "means", "but", "if", "I", "look", "at", "shell", "access", "configuration", "on", "my", "server", "WHM", "I", "find", "Normal", "shell", "be", "currently", "bin", "bash", "NUMBER", "Could", "be", "I", "also", "misunderstand", "what", "was", "learned", "from", "echo", "NUMBER", "but", "it", "output", "bash", "which", "implies", "to", "me", "it", "_is_", "use", "bash", "NUMBER", "So", "if", "those", "two", "things", "be", "inaccurate", "not", "what", "you", "re", "talking", "about", "let", "me", "know", "NUMBER", "And", "shell", "access", "_is_", "enable", "for", "that", "user", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "still", "present", "in", "master", "branch", "Local", "Machine", "OS", "OSX", "Remote", "Machine", "OS", "N", "A", "Description", "When", "use", "the", "deploy", "assets", "task", "in", "the", "symfony", "recipe", "all", "touched", "file", "be", "given", "an", "incorrect", "timestamp", "due", "to", "the", "following", "line", "LINK", "L", "NUMBER", "It", "should", "be", "time", "date", "YmdHi", "NUMBER", "s", "h", "should", "be", "H", "NUMBER", "We", "ve", "notice", "this", "because", "we", "re", "use", "rsync", "to", "sync", "file", "and", "due", "to", "the", "incorrect", "timestamp", "they", "never", "get", "synced", "NUMBER", "Steps", "to", "reproduce", "Just", "use", "the", "recipe", "symfony", "NUMBER", "NUMBER", "php", "NUMBER", "Output", "log", "Executing", "task", "deploy", "assets", "on", "production", "find", "TAG", "release", "NUMBER", "web", "css", "TAG", "NUMBER", "web", "images", "TAG", "release", "NUMBER", "web", "js", "exec", "touch", "t", "NUMBER", "dev", "null", "true", "do", "on", "production", "The", "time", "NUMBER", "be", "incorrect", "and", "be", "several", "hours", "behind", "because", "it", "be", "use", "the", "NUMBER", "hour", "format", "h", "instead", "of", "NUMBER", "hour", "format", "H", "NUMBER", "Would", "it", "be", "okay", "to", "send", "a", "PR", "fix", "this", "or", "be", "I", "miss", "something", "important", "could", "it", "be", "intended", "for", "some", "reason", "Side", "note", "It", "seems", "that", "touch", "t", "option", "expects", "NUMBER", "hour", "format", "and", "not", "NUMBER", "hour", "format", "NUMBER", "So", "I", "m", "guessing", "the", "suggested", "change", "be", "correct", "NUMBER", "man", "touch", "says", "the", "following", "t", "Change", "the", "access", "and", "modification", "times", "to", "the", "specified", "time", "instead", "of", "the", "current", "time", "of", "day", "NUMBER", "The", "argument", "be", "of", "the", "form", "CC", "YY", "MMDDhhmm", "NUMBER", "SS", "where", "each", "pair", "of", "letters", "represents", "the", "fol", "lowing", "CC", "The", "first", "two", "digits", "of", "the", "year", "the", "century", "NUMBER", "YY", "The", "second", "two", "digits", "of", "the", "year", "NUMBER", "If", "YY", "be", "specified", "but", "CC", "be", "not", "a", "value", "for", "YY", "between", "NUMBER", "and", "NUMBER", "results", "in", "a", "CC", "value", "of", "NUMBER", "Otherwise", "a", "CC", "value", "of", "NUMBER", "be", "use", "NUMBER", "MM", "The", "month", "of", "the", "year", "from", "NUMBER", "to", "NUMBER", "DD", "the", "day", "of", "the", "month", "from", "NUMBER", "to", "NUMBER", "hh", "The", "hour", "of", "the", "day", "from", "NUMBER", "to", "NUMBER", "mm", "The", "minute", "of", "the", "hour", "from", "NUMBER", "to", "NUMBER", "SS", "The", "second", "of", "the", "minute", "from", "NUMBER", "to", "NUMBER", "More", "specifically", "this", "line", "hh", "The", "hour", "of", "the", "day", "from", "NUMBER", "to", "NUMBER", "saying", "NUMBER", "to", "NUMBER", "NUMBER", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "NUMBER", "or", "above", "NUMBER", "Possible", "at", "v", "NUMBER", "Local", "Machine", "OS", "Darwin", "luna", "NUMBER", "local", "NUMBER", "Darwin", "Kernel", "Version", "NUMBER", "Remote", "Machine", "OS", "Linux", "apollo", "NUMBER", "NUMBER", "generic", "NUMBER", "Ubuntu", "SMP", "Description", "When", "you", "be", "deploying", "you", "must", "have", "a", "option", "of", "generating", "a", "git", "tag", "in", "the", "repository", "with", "the", "current", "release", "name", "so", "you", "can", "easy", "track", "your", "latest", "deployment", "in", "your", "git", "environment", "NUMBER", "After", "reading", "your", "motivation", "I", "agree", "to", "the", "situation", "other", "deployers", "may", "have", "with", "CI", "NUMBER", "Thank", "you", "for", "the", "information", "NUMBER", "Yes", "I", "ll", "add", "it", "in", "a", "PR", "NUMBER", "Q", "A", "Issue", "Type", "Bug", "Question", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Ubuntu", "NUMBER", "Remote", "Machine", "OS", "Debian", "NUMBER", "Description", "Commands", "don", "t", "appear", "to", "be", "run", "on", "the", "remote", "machine", "NUMBER", "Watching", "auth", "NUMBER", "log", "on", "the", "machine", "shows", "that", "Deployer", "_is_", "connecting", "successfully", "but", "it", "hangs", "on", "the", "first", "command", "NUMBER", "I", "m", "aware", "that", "this", "could", "be", "a", "configuration", "issue", "but", "as", "far", "as", "I", "can", "tell", "the", "connection", "be", "good", "and", "as", "there", "be", "no", "further", "output", "or", "logs", "I", "m", "finding", "it", "really", "hard", "to", "debug", "NUMBER", "I", "ve", "use", "deployer", "on", "other", "machines", "servers", "with", "basically", "the", "same", "configuration", "and", "had", "no", "issue", "NUMBER", "Hoping", "you", "can", "give", "me", "some", "pointers", "NUMBER", "Steps", "to", "reproduce", "Use", "the", "deploy", "NUMBER", "php", "below", "and", "run", "dep", "test", "prod", "vvv", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "require", "recipe", "laravel", "NUMBER", "php", "serverList", "NUMBER", "servers", "NUMBER", "yml", "set", "repository", "LINK", "task", "test", "function", "run", "mkdir", "var", "www", "html", "test", "run", "ls", "Output", "log", "Executing", "task", "test", "on", "prod", "cd", "var", "www", "html", "website", "mkdir", "var", "www", "html", "website", "test", "C", "auth", "NUMBER", "log", "output", "Jun", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "myhost", "sshd", "NUMBER", "Accepted", "publickey", "for", "mrchimp", "from", "x", "NUMBER", "x", "NUMBER", "x", "NUMBER", "x", "port", "NUMBER", "ssh", "NUMBER", "RSA", "xxxxxxxxxxxxxxxxxxxxxxxxx", "Jun", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "myhost", "sshd", "NUMBER", "pam_unix", "sshd", "session", "session", "opened", "for", "user", "mrchimp", "by", "uid", "NUMBER", "Jun", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "myhost", "systemd", "logind", "NUMBER", "New", "session", "NUMBER", "of", "user", "mrchimp", "NUMBER", "Jun", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "myhost", "sshd", "NUMBER", "pam_unix", "sshd", "session", "session", "close", "for", "user", "mrchimp", "Jun", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "myhost", "systemd", "logind", "NUMBER", "Removed", "session", "NUMBER", "Yes", "it", "exists", "NUMBER", "If", "I", "remove", "the", "mkdir", "command", "and", "only", "have", "the", "ls", "command", "I", "get", "the", "same", "result", "NUMBER", "It", "do", "exist", "NUMBER", "ls", "without", "the", "cd", "fail", "too", "NUMBER", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "This", "pr", "add", "a", "recipe", "to", "support", "the", "Silverstripe", "CMS", "LINK", "Follows", "the", "composer", "recipe", "LINK", "Adds", "assets", "to", "shared_dirs", "and", "writable_dirs", "Additional", "helper", "tasks", "for", "generating", "the", "database", "schema", "LINK", "_guides", "model", "data_model_and_orm", "generating", "the", "database", "schema", "and", "flushing", "the", "cache", "template", "config", "manifests", "LINK", "_guides", "execution_pipeline", "flushable", "I", "think", "it", "s", "ok", "NUMBER", "Does", "it", "popular", "CMS", "Not", "sure", "internationally", "NUMBER", "But", "it", "be", "popular", "here", "in", "NZ", "at", "least", "Is", "this", "able", "to", "be", "merge", "Anything", "else", "I", "could", "do", "It", "depends", "on", "how", "the", "project", "be", "configured", "NUMBER", "Settings", "can", "be", "either", "in", "mysite", "config", "NUMBER", "php", "or", "_ss_environment", "NUMBER", "php", "NUMBER", "It", "be", "up", "to", "the", "developer", "to", "decide", "which", "method", "to", "use", "NUMBER", "Anything", "further", "I", "could", "do", "to", "have", "this", "merge", "Sure", "to", "quickly", "setup", "a", "Silverstripe", "site", "use", "the", "following", "In", "your", "terminal", "sh", "composer", "create", "project", "silverstripe", "installer", "deployer", "test", "NUMBER", "cd", "deployer", "test", "composer", "require", "silverstripe", "sqlite", "NUMBER", "NUMBER", "Only", "required", "if", "use", "SQLLite", "NUMBER", "Create", "edit", "mysite", "_config", "NUMBER", "php", "php", "define", "SS_DEFAULT_ADMIN_USERNAME", "admin", "define", "SS_DEFAULT_ADMIN_PASSWORD", "password", "Change", "this", "of", "course", "require_once", "conf", "ConfigureFromEnv", "NUMBER", "php", "global", "project", "project", "mysite", "global", "databaseConfig", "databaseConfig", "array", "type", "SQLite", "NUMBER", "Database", "path", "dirname", "__FILE__", "NUMBER", "NUMBER", "assets", "NUMBER", "sqlitedb", "database", "database", "NUMBER", "sqlite", "key", "i", "NUMBER", "n", "set_locale", "en_NZ", "You", "should", "now", "have", "a", "work", "local", "copy", "of", "Silverstripe", "LINK", "test", "etc", "Create", "edit", "deploy", "NUMBER", "php", "php", "require", "recipe", "silverstripe", "NUMBER", "php", "server", "prod", "host", "NUMBER", "user", "name", "forwardAgent", "stage", "production", "env", "deploy_path", "your", "project", "path", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "set", "repository", "git", "github", "NUMBER", "com", "org", "app", "NUMBER", "git", "Then", "cross", "your", "fingers", "sh", "dep", "deploy", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "Using", "NUMBER", "phar", "version", "NUMBER", "Local", "Machine", "OS", "Windows", "NUMBER", "Remote", "Machine", "OS", "Debian", "NUMBER", "Description", "I", "can", "t", "connect", "to", "my", "server", "with", "Deployer", "but", "normal", "SSH", "connexion", "be", "work", "through", "Git", "Bash", "OpenSSH", "Putty", "NUMBER", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "user", "user", "configFile", "C", "Users", "user", "NUMBER", "ssh", "config", "stage", "production", "env", "deploy_path", "var", "www", "path", "www", "set", "repository", "LINK", "bitbucket", "NUMBER", "org", "user", "repo", "NUMBER", "git", "Output", "log", "php", "deployer", "NUMBER", "phar", "deploy", "preprod", "vvv", "\u00d4", "\u00f1", "Executing", "task", "NUMBER", "mdeploy", "prepare", "NUMBER", "m", "\u00d4\u00e5", "on", "preprod", "NUMBER", "m", "NUMBER", "m", "echo", "NUMBER", "Warning", "ssh", "NUMBER", "_connect", "Unable", "to", "connect", "to", "XX", "NUMBER", "XX", "NUMBER", "XX", "NUMBER", "XXX", "on", "port", "NUMBER", "in", "phar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Session", "NUMBER", "php", "o", "n", "line", "NUMBER", "Warning", "ssh", "NUMBER", "_connect", "Unable", "to", "connect", "to", "XX", "NUMBER", "XX", "NUMBER", "XX", "NUMBER", "XXX", "in", "phar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Session", "NUMBER", "php", "on", "line", "NUMBER", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "Shell", "on", "your", "server", "be", "not", "POSIX", "compliant", "NUMBER", "Please", "change", "to", "sh", "bash", "or", "similar", "NUMBER", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "Usually", "you", "can", "change", "your", "shell", "to", "bash", "by", "run", "chsh", "s", "bin", "bash", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "RuntimeException", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "The", "SSH", "connection", "fail", "NUMBER", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "NUMBER", "NUMBER", "m", "NUMBER", "mException", "trace", "NUMBER", "m", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Session", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Ssh", "Session", "createResource", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "AbstractResourceHolder", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Ssh", "AbstractResourceHolder", "getResource", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Subsystem", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Ssh", "Subsystem", "getSessionResource", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Ssh", "Exec", "createResource", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "AbstractResourceHolder", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Ssh", "AbstractResourceHolder", "getResource", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Ssh", "Exec", "run", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Deployer", "Server", "Remote", "SshExtension", "run", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "NUMBER", "m", "run", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "m", "closure", "at", "NUMBER", "mn", "a", "n", "a", "NUMBER", "m", "call_user_func", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Deployer", "Task", "Task", "run", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Deployer", "Executor", "SeriesExecutor", "run", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Deployer", "Console", "TaskCommand", "execute", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Symfony", "Component", "Console", "Application", "doRun", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Symfony", "Component", "Console", "Application", "run", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "src", "Deployer", "NUMBER", "php", "NUMBER", "NUMBER", "m", "Deployer", "Deployer", "run", "at", "NUMBER", "mphar", "C", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "NUMBER", "m", "require", "at", "NUMBER", "mC", "wamp", "www", "repo", "deployer", "NUMBER", "phar", "NUMBER", "NUMBER", "m", "NUMBER", "mdeploy", "p", "parallel", "NUMBER", "m", "oanhnn", "Has", "this", "bug", "be", "report", "to", "ssh", "NUMBER", "developers", "Do", "I", "have", "another", "solution", "to", "connect", "to", "my", "server", "in", "the", "meantime", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Any", "Remote", "Machine", "OS", "Any", "Description", "Is", "it", "possible", "to", "clone", "repository", "from", "https", "If", "so", "how", "to", "do", "this", "I", "have", "to", "set", "password", "somewhere", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "user", "user", "password", "password", "env", "deploy_path", "path", "to", "deploy", "dir", "stage", "production", "set", "repository", "LINK", "bitbucket", "NUMBER", "org", "team", "repo", "NUMBER", "git", "Q", "A", "Issue", "Type", "Question", "Feature", "Request", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "Hi", "I", "d", "like", "to", "know", "if", "I", "could", "implement", "some", "kind", "of", "timer", "to", "know", "how", "long", "the", "deployment", "took", "so", "that", "I", "can", "later", "include", "it", "in", "a", "slack", "notification", "NUMBER", "If", "you", "re", "up", "for", "it", "I", "d", "like", "to", "have", "your", "opinion", "about", "how", "to", "do", "so", "NUMBER", "I", "was", "thinking", "about", "update", "some", "tasks", "from", "recipes", "common", "NUMBER", "php", "and", "add", "new", "variables", "so", "that", "they", "can", "be", "accessed", "anywhere", "NUMBER", "Or", "maybe", "I", "could", "add", "new", "tasks", "to", "start", "end", "a", "timer", "I", "m", "all", "ears", "oanhnn", "Yes", "I", "saw", "the", "output", "with", "the", "vvv", "option", "NUMBER", "Sadly", "you", "don", "t", "have", "access", "to", "the", "Informer", "in", "your", "tasks", "so", "you", "cannot", "get", "access", "to", "any", "timing", "information", "NUMBER", "On", "top", "of", "that", "there", "be", "no", "mechanism", "to", "get", "the", "overall", "deployment", "time", "NUMBER", "Do", "you", "see", "what", "I", "mean", "In", "task", "elfet", "Yes", "Use", "php", "NUMBER", "NUMBER", "\u0438\u044e\u043d\u044f", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "geoffrey", "brier", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "elfet", "LINK", "Yes", "You", "be", "receiving", "this", "because", "you", "were", "mention", "NUMBER", "Reply", "to", "this", "email", "directly", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "or", "mute", "the", "thread", "LINK", "_SwLDmO", "NUMBER", "AUGYNQPtg", "ELeUks", "NUMBER", "qLm", "WgaJpZM", "NUMBER", "I", "NUMBER", "rCq", "NUMBER", "elfet", "So", "you", "don", "t", "want", "the", "feature", "in", "deployer", "We", "cann", "t", "add", "all", "feature", "to", "deployer", "NUMBER", "In", "that", "case", "it", "s", "really", "simple", "to", "implement", "it", "yourself", "NUMBER", "NUMBER", "\u0438\u044e\u043d\u044f", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "geoffrey", "brier", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "elfet", "LINK", "So", "you", "don", "t", "want", "the", "feature", "in", "deployer", "You", "be", "receiving", "this", "because", "you", "were", "mention", "NUMBER", "Reply", "to", "this", "email", "directly", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "or", "mute", "the", "thread", "LINK", "_yiu", "NUMBER", "zkvDP", "NUMBER", "XMe", "NUMBER", "xDStYxHhxks", "NUMBER", "qLpiQgaJpZM", "NUMBER", "I", "NUMBER", "rCq", "NUMBER", "I", "understand", "I", "ll", "close", "the", "issue", "then", "NUMBER", "in", "src", "Cluster", "ClusterBuilder", "NUMBER", "php", "line", "NUMBER", "LINK", "L", "NUMBER", "The", "class", "Deployer", "Cluster", "Node", "be", "declared", "but", "never", "use", "NUMBER", "You", "should", "remove", "the", "use", "statement", "NUMBER", "php", "Defines", "a", "node", "for", "cluster", "namespace", "Deployer", "Cluster", "use", "Deployer", "Cluster", "Node", "property", "array", "Deployer", "Cluster", "Node", "nodes", "_Posted", "from", "SensioLabsInsight", "LINK", "df", "NUMBER", "a", "NUMBER", "dee", "ab", "NUMBER", "c", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "c", "NUMBER", "analyses", "NUMBER", "_", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Windows", "NUMBER", "x", "NUMBER", "Remote", "Machine", "OS", "Linux", "serv", "NUMBER", "esm", "NUMBER", "siteground", "NUMBER", "biz", "NUMBER", "clouder", "NUMBER", "NUMBER", "SMP", "Wed", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "EEST", "NUMBER", "x", "NUMBER", "_", "NUMBER", "Steps", "to", "reproduce", "NUMBER", "Run", "dep", "current", "federicoliva", "Content", "of", "deploy", "NUMBER", "php", "php", "require", "recipe", "symfony", "NUMBER", "php", "server", "federicoliva", "NUMBER", "NUMBER", "user", "federic", "NUMBER", "forwardAgent", "stage", "production", "env", "deploy_path", "public_html", "deployer", "Output", "log", "Executing", "task", "current", "on", "federicoliva", "cd", "public_html", "deployer", "readlink", "public_html", "deployer", "current", "Notice", "SSH_AUTH_SOCK", "not", "find", "in", "C", "Users", "Federico", "AppData", "Roaming", "Composer", "vendor", "phpseclib", "phpseclib", "phpseclib", "System", "SSH", "Agent", "NUMBER", "php", "on", "line", "NUMBER", "What", "be", "wrong", "At", "the", "command", "ssh", "add", "path", "tp", "key", "I", "get", "this", "output", "Could", "not", "open", "a", "connection", "to", "your", "authentication", "agent", "NUMBER", "These", "special", "quotes", "NUMBER", "mmm", "NUMBER", "it", "works", "now", "P", "No", "thanks", "it", "works", "fine", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "Would", "be", "nice", "to", "be", "able", "to", "manually", "set", "timeout", "for", "run", "for", "the", "Local", "NUMBER", "php", "as", "well", "similar", "to", "how", "its", "do", "for", "runLocally", "Yup", "i", "ll", "work", "on", "it", "the", "next", "week", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Question", "Hello", "if", "you", "read", "the", "Installation", "LINK", "and", "the", "Getting", "start", "LINK", "start", "pages", "you", "must", "create", "the", "deploy", "NUMBER", "php", "file", "by", "yourself", "But", "there", "be", "an", "action", "dep", "init", "that", "create", "the", "file", "NUMBER", "I", "don", "t", "know", "if", "the", "problem", "be", "that", "the", "documentation", "be", "old", "or", "dep", "init", "be", "for", "another", "thing", "NUMBER", "Thanks", "NUMBER", "Hello", "oanhnn", "I", "m", "trying", "to", "undertstand", "the", "project", "to", "be", "able", "to", "make", "a", "good", "PR", "to", "update", "de", "documentation", "oskarcalvo", "it", "s", "will", "be", "cool", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "sf_debug", "var", "to", "enable", "modifying", "whether", "no", "debug", "be", "appended", "to", "commands", "I", "be", "not", "sure", "at", "this", "point", "the", "day", "before", "yesterday", "was", "my", "first", "usage", "of", "this", "package", "and", "so", "far", "I", "m", "loving", "it", "NUMBER", "This", "be", "just", "a", "little", "something", "I", "couldn", "t", "get", "do", "without", "modifying", "it", "or", "doing", "stuff", "by", "hand", "on", "the", "DEV", "server", "as", "I", "needed", "to", "deploy", "a", "clean", "copy", "there", "as", "well", "NUMBER", "The", "way", "I", "see", "it", "at", "this", "very", "moment", "that", "s", "the", "only", "change", "I", "d", "make", "NUMBER", "Probably", "some", "function", "defined", "in", "the", "symfony", "NUMBER", "php", "scope", "so", "also", "accessible", "in", "the", "main", "deployer", "NUMBER", "php", "file", "such", "as", "function", "runCommand", "command", "command", "doctrine", "migrations", "migrate", "env", "env", "NUMBER", "trim", "get", "sf_debug", "NUMBER", "no", "interaction", "run", "bin", "php", "release_path", "NUMBER", "trim", "get", "bin_dir", "NUMBER", "console", "NUMBER", "command", "or", "function", "runCommand", "command", "parameters", "env", "env", "sf_debug", "assuming", "sf_debug", "be", "moved", "as", "an", "env", "variable", "always", "appended", "to", "any", "command", "automatically", "But", "I", "still", "have", "very", "little", "experience", "with", "it", "and", "since", "the", "recipe", "be", "already", "there", "I", "just", "use", "it", "and", "it", "did", "the", "job", "besides", "the", "small", "thing", "with", "no", "debug", "dumping", "prod", "assets", "in", "the", "dev", "env", "even", "if", "I", "had", "set", "env", "and", "env_vars", "NUMBER", "Other", "than", "that", "I", "think", "configuring", "several", "servers", "that", "share", "the", "same", "directory", "structure", "and", "authentication", "would", "be", "nice", "by", "means", "of", "simply", "passing", "an", "array", "of", "IPs", "to", "the", "host", "key", "in", "the", "yml", "config", "but", "again", "I", "don", "t", "have", "enough", "experience", "to", "know", "for", "sure", "what", "s", "best", "NUMBER", "Or", "maybe", "plan", "that", "for", "future", "version", "Regards", "See", "NUMBER", "which", "already", "purposed", "a", "fix", "for", "this", "among", "other", "symfony", "relate", "issue", "NUMBER", "NUMBER", "looks", "pretty", "nice", "to", "me", "at", "first", "glance", "I", "ll", "close", "this", "I", "ll", "reopen", "another", "one", "bout", "the", "servers", "thing", "at", "some", "point", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "OSX", "Remote", "Machine", "OS", "N", "A", "Description", "When", "declaring", "a", "task", "to", "be", "executed", "locally", "and", "only", "once", "through", "the", "once", "modify", "it", "s", "impossible", "to", "call", "run", "or", "runLocally", "as", "it", "throw", "the", "following", "exception", "Fatal", "error", "Uncaught", "Error", "Call", "to", "a", "member", "function", "parse", "on", "null", "in", "phar", "Users", "ahfeel", "Work", "instant", "gaming", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "Seems", "that", "env", "returns", "null", "Sure", "here", "it", "be", "task", "ig", "notify_rollbar", "function", "ch", "curl_init", "LINK", "curl_setopt", "ch", "CURLOPT_POST", "true", "curl_setopt", "ch", "CURLOPT_RETURNTRANSFER", "true", "curl_setopt", "ch", "CURLOPT_POSTFIELDS", "http_build_query", "access_token", "XXXX", "environment", "production", "revision", "trim", "runLocally", "git", "log", "n", "NUMBER", "format", "h", "local_username", "runLocally", "whoami", "curl_exec", "ch", "once", "This", "doesn", "t", "work", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "Yes", "BC", "breaks", "Yes", "Deprecations", "No", "Fixed", "tickets", "N", "A", "Removed", "overridden", "deploy", "assetic", "dump", "task", "in", "symfony", "NUMBER", "recipe", "as", "it", "implied", "this", "command", "was", "no", "longer", "valid", "and", "should", "be", "overridden", "with", "deploy", "assets", "install", "command", "NUMBER", "In", "reality", "deploy", "assets", "install", "should", "exist", "in", "all", "symfony", "version", "as", "should", "deploy", "assetic", "dump", "although", "this", "be", "arguable", "as", "deploy", "assetic", "dump", "isn", "t", "a", "Symfony", "command", "it", "be", "a", "kriswallsmith", "assetic", "command", "NUMBER", "Changed", "default", "for", "deploy", "assetic", "dump", "to", "false", "via", "dump_assets", "as", "this", "be", "not", "a", "core", "Symfony", "package", "and", "should", "not", "be", "assumed", "to", "be", "install", "NUMBER", "It", "relies", "on", "kriswallsmith", "assetic", "and", "symfony", "assetic", "bundle", "NUMBER", "Added", "deploy", "assets", "install", "task", "as", "this", "be", "a", "symfony", "core", "command", "that", "be", "intended", "to", "be", "call", "prior", "to", "other", "asset", "compilation", "commands", "such", "as", "deploy", "assetic", "dump", "NUMBER", "Its", "purpose", "to", "be", "to", "install", "any", "bundle", "assets", "within", "TAG", "Resource", "public", "and", "put", "them", "in", "web", "bundle", "TAG", "NUMBER", "composer_action", "created", "Fixed", "SYMFONY_ENV", "value", "in", "env_vars", "to", "correctly", "refer", "to", "the", "configured", "env", "value", "NUMBER", "Created", "bin", "console", "to", "cleanup", "calls", "to", "Symfony", "console", "command", "there", "was", "a", "ton", "of", "duplicate", "lines", "prior", "created", "console_options", "so", "the", "options", "pass", "to", "bin", "console", "reflect", "what", "should", "be", "pass", "per", "the", "configured", "environment", "for", "example", "the", "no", "debug", "options", "cannot", "be", "pass", "for", "any", "environment", "except", "for", "prod", "and", "will", "likely", "break", "hard", "when", "pass", "for", "dev", "environment", "General", "cleanup", "NUMBER", "Perhaps", "of", "consequence", "be", "this", "expected", "behavior", "prior", "to", "fix", "the", "travis", "build", "by", "add", "an", "env", "environment", "variable", "see", "LINK", "L", "NUMBER", "it", "fail", "on", "php", "NUMBER", "and", "NUMBER", "but", "pass", "on", "NUMBER", "NUMBER", "LINK", "ci", "NUMBER", "org", "deployphp", "deployer", "jobs", "NUMBER", "NUMBER", "LINK", "ci", "NUMBER", "org", "deployphp", "deployer", "jobs", "NUMBER", "NUMBER", "LINK", "ci", "NUMBER", "org", "deployphp", "deployer", "jobs", "NUMBER", "It", "seems", "odd", "that", "it", "would", "pass", "on", "NUMBER", "without", "env", "defined", "with", "the", "new", "composer_options", "closure", "see", "LINK", "L", "NUMBER", "NUMBER", "be", "that", "possibly", "a", "bug", "Nice", "work", "It", "s", "ok", "on", "NUMBER", "but", "not", "on", "NUMBER", "NUMBER", "oanhnn", "The", "intended", "use", "case", "be", "for", "someone", "who", "uses", "deployer", "to", "automatically", "build", "a", "staging", "environment", "as", "part", "of", "their", "CI", "chain", "NUMBER", "The", "default", "action", "be", "still", "to", "run", "install", "only", "when", "run", "with", "a", "non", "production", "environment", "would", "update", "be", "use", "NUMBER", "elfet", "The", "build", "works", "on", "all", "platforms", "now", "that", "I", "defined", "env", "LINK", "L", "NUMBER", "Prior", "to", "that", "env", "was", "empty", "and", "it", "would", "fail", "on", "NUMBER", "and", "NUMBER", "but", "pass", "on", "NUMBER", "I", "mention", "this", "as", "it", "may", "have", "expose", "an", "irregularity", "and", "or", "bug", "NUMBER", "As", "for", "this", "pull", "request", "it", "be", "fix", "but", "you", "may", "still", "want", "to", "look", "into", "why", "it", "broke", "selectively", "without", "the", "env", "defined", "NUMBER", "oanhnn", "I", "think", "it", "makes", "users", "puzzled", "scream", "Are", "you", "implying", "that", "the", "value", "of", "stage", "should", "define", "the", "env", "programatically", "somehow", "That", "seems", "outside", "the", "scope", "of", "this", "pull", "request", "NUMBER", "I", "m", "just", "use", "env", "as", "it", "has", "be", "defined", "as", "a", "separate", "value", "to", "stage", "NUMBER", "oanhnn", "what", "do", "you", "want", "to", "call", "it", "env", "makes", "sense", "to", "me", "I", "don", "t", "have", "any", "idea", "what", "else", "it", "would", "be", "call", "NUMBER", "what", "do", "you", "want", "to", "call", "it", "oanhnn", "That", "code", "doesn", "t", "allow", "for", "composer", "options", "based", "on", "the", "environment", "NUMBER", "I", "change", "env", "to", "build_type", "NUMBER", "be", "that", "clearer", "elfet", "Do", "you", "have", "any", "comments", "about", "this", "pull", "request", "and", "what", "might", "need", "change", "for", "it", "to", "be", "accepted", "dump", "part", "be", "ok", "NUMBER", "composer", "update", "be", "not", "NUMBER", "oanhnn", "and", "elfet", "Ok", "do", "the", "current", "commit", "satisfy", "all", "the", "requirements", "taking", "both", "your", "comments", "into", "account", "FYI", "I", "just", "wanted", "to", "confirm", "what", "I", "asserted", "above", "about", "Symfony", "version", "and", "assetic", "bundle", "so", "I", "write", "the", "below", "quickly", "to", "do", "just", "that", "NUMBER", "For", "all", "_currently", "supported_", "version", "of", "Symfony", "bash", "bin", "bash", "VERSIONS", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TMP_DIR", "tmp", "symfony", "assetic", "check", "rm", "fr", "TMP_DIR", "mkdir", "p", "TMP_DIR", "curl", "LsS", "LINK", "o", "TMP_DIR", "symfony", "installer", "NUMBER", "phar", "for", "version", "in", "VERSIONS", "do", "echo", "n", "Symfony", "v", "version", "php", "TMP_DIR", "symfony", "installer", "NUMBER", "phar", "q", "new", "TMP_DIR", "v", "version", "version", "grep", "assetic", "TMP_DIR", "v", "version", "composer", "NUMBER", "lock", "dev", "null", "if", "eq", "NUMBER", "then", "echo", "Assetic", "Installed", "else", "echo", "Assetic", "NOT", "Installed", "fi", "do", "The", "script", "outputs", "Symfony", "v", "NUMBER", "Assetic", "Installed", "Symfony", "v", "NUMBER", "Assetic", "Installed", "Symfony", "v", "NUMBER", "Assetic", "NOT", "Installed", "Symfony", "v", "NUMBER", "Assetic", "NOT", "Installed", "Symfony", "v", "NUMBER", "Assetic", "NOT", "Installed", "Again", "these", "be", "just", "the", "defaults", "and", "assetic", "may", "or", "may", "_not_", "be", "install", "on", "any", "version", "NUMBER", "elfet", "Give", "me", "a", "shout", "if", "anything", "needs", "to", "be", "change", "for", "this", "to", "be", "merge", "ready", "NUMBER", "Otherwise", "thanks", "for", "such", "a", "great", "tool", "robfrawley", "still", "need", "to", "think", "and", "find", "compromise", "between", "no", "BC", "break", "and", "moving", "forward", "NUMBER", "May", "be", "this", "be", "good", "for", "next", "major", "v", "NUMBER", "oanhnn", "what", "you", "think", "elfet", "oanhnn", "Where", "you", "guys", "at", "on", "this", "Any", "thoughts", "or", "comments", "This", "needs", "to", "also", "have", "the", "BUG", "issue", "label", "NUMBER", "Deployer", "s", "Symfony", "recipes", "breaks", "when", "Symfony", "version", "NUMBER", "be", "use", "due", "to", "Assetic", "assumption", "and", "the", "version", "NUMBER", "recipe", "calls", "unrelated", "commands", "for", "assets", "dump", "task", "that", "it", "should", "not", "NUMBER", "elfet", "Is", "this", "pull", "request", "particularly", "controversial", "for", "some", "reason", "I", "don", "t", "see", "The", "current", "implementation", "be", "broken", "on", "Symfony", "NUMBER", "and", "calls", "incorrect", "commands", "on", "version", "greater", "than", "NUMBER", "The", "only", "minor", "BC", "break", "seems", "very", "acceptable", "when", "the", "full", "scope", "of", "what", "this", "pull", "request", "fix", "be", "taken", "into", "account", "and", "I", "can", "t", "figure", "a", "way", "around", "that", "BC", "break", "that", "also", "address", "the", "issue", "here", "NUMBER", "BC", "Breaks", "User", "must", "set", "dump_assets", "to", "true", "for", "Symfony", "recipe", "if", "they", "want", "their", "assets", "compiled", "whereas", "previously", "they", "did", "not", "have", "to", "NUMBER", "It", "be", "significant", "to", "note", "as", "well", "that", "I", "would", "argue", "_this", "should", "have", "be", "the", "case", "anyway_", "as", "more", "version", "of", "Symfony", "that", "be", "currently", "support", "do", "not", "have", "Assetic", "by", "default", "and", "moreover", "the", "version", "that", "_did_", "ship", "with", "Assetic", "by", "default", "could", "also", "not", "have", "the", "package", "due", "to", "the", "author", "cleaning", "up", "dependencies", "he", "may", "not", "be", "use", "The", "assumption", "for", "an", "external", "command", "like", "this", "should", "be", "that", "it", "do", "not", "exist", "unless", "the", "user", "specifies", "that", "it", "do", "IMHO", "NUMBER", "Bug", "Fixes", "Version", "NUMBER", "of", "Symfony", "now", "support", "prior", "it", "would", "fail", "on", "assetic", "dump", "task", "due", "to", "lack", "of", "Assetic", "in", "all", "version", "of", "Symfony", "NUMBER", "NUMBER", "Version", "NUMBER", "of", "Symfony", "recipe", "now", "_correctly_", "calls", "assets", "dump", "instead", "of", "assets", "install", "which", "should", "never", "have", "be", "the", "case", "and", "makes", "no", "logical", "sense", "NUMBER", "All", "version", "of", "Symfony", "now", "have", "task", "assets", "install", "which", "be", "always", "call", "this", "needs", "to", "be", "call", "prior", "to", "Asset", "compilation", "assetic", "dump", "and", "be", "applicable", "even", "if", "asset", "compilation", "be", "not", "enable", "so", "that", "public", "assets", "from", "bundle", "be", "properly", "copied", "or", "symlinked", "into", "the", "public", "web", "root", "NUMBER", "The", "env_vars", "variable", "now", "properly", "reflects", "the", "configured", "environment", "SYMFONY_ENV", "env", "Addition", "of", "console_options", "environment", "variable", "as", "anonymous", "function", "to", "generate", "the", "options", "to", "pass", "for", "the", "Symfony", "console", "command", "depending", "on", "the", "defined", "env", "calling", "the", "console", "command", "in", "prod", "dev", "mode", "with", "without", "no", "debug", "option", "fail", "if", "the", "incorrect", "combination", "be", "pass", "NUMBER", "The", "env_vars", "be", "now", "add", "to", "all", "console", "commands", "previously", "it", "was", "only", "add", "to", "the", "composer", "commands", "NUMBER", "Cleanup", "Improvements", "Pulled", "composer", "action", "out", "of", "composer_options", "into", "own", "environment", "variable", "composer_action", "Simplification", "of", "deploy", "vendors", "anonymous", "function", "The", "Symfony", "console", "command", "was", "moved", "into", "own", "environment", "variable", "as", "anonymous", "function", "to", "allow", "for", "cleaner", "task", "commands", "that", "can", "now", "be", "call", "simply", "with", "bin", "console", "instead", "of", "having", "repetitious", "statements", "like", "trim", "get", "bin_dir", "NUMBER", "console", "everywhere", "NUMBER", "Usage", "of", "sprintf", "instead", "of", "string", "variable", "concatenation", "Cleanup", "of", "file", "newlines", "to", "standardize", "it", "some", "tasks", "had", "two", "spaces", "between", "their", "definitions", "others", "had", "one", "elfet", "oanhnn", "Any", "time", "to", "look", "this", "over", "and", "provide", "feedback", "I", "d", "love", "to", "be", "able", "to", "use", "deployer", "directly", "in", "my", "projects", "instead", "of", "relying", "on", "my", "fork", "with", "these", "fix", "but", "it", "s", "not", "usable", "on", "some", "of", "the", "Symfony", "version", "I", "maintain", "without", "the", "bug", "fix", "here", "NUMBER", "Can", "we", "please", "get", "this", "merge", "Sorry", "for", "delay", "NUMBER", "Will", "look", "tonight", "or", "tomorrow", "NUMBER", "NUMBER", "\u0438\u044e\u043d\u044f", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "Rob", "Frawley", "NUMBER", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "elfet", "LINK", "oanhnn", "LINK", "Any", "time", "to", "look", "this", "over", "and", "provide", "feedback", "I", "d", "love", "to", "be", "able", "to", "use", "deployer", "directly", "in", "my", "projects", "instead", "of", "relying", "on", "my", "fork", "with", "these", "fix", "but", "it", "s", "not", "usable", "on", "some", "of", "the", "Symfony", "version", "I", "maintain", "without", "the", "bug", "fix", "here", "NUMBER", "Can", "we", "please", "get", "this", "merge", "You", "be", "receiving", "this", "because", "you", "were", "mention", "NUMBER", "Reply", "to", "this", "email", "directly", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "or", "mute", "the", "thread", "LINK", "elfet", "Any", "progress", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "xx", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "xx", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "Description", "_", "Executing", "task", "deploy", "prepare", "PHP", "Notice", "Undefined", "variable", "key_comment", "in", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "System", "SSH", "Agent", "NUMBER", "php", "on", "line", "NUMBER", "_", "strange", "because", "they", "change", "it", "in", "head", "version", "LINK", "but", "in", "your", "composer", "it", "downloads", "older", "with", "that", "bug", "key", "loadKey", "ssh", "rsa", "NUMBER", "base", "NUMBER", "_encode", "key_blob", "NUMBER", "NUMBER", "key_comment", "Thx", "ok", "phpseclib", "release", "Installing", "phpseclib", "phpseclib", "NUMBER", "Can", "you", "upgrade", "deployer", "NUMBER", "phar", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Windows", "Remote", "Machine", "OS", "Debian", "Description", "I", "m", "trying", "to", "use", "Deplyer", "but", "when", "I", "use", "the", "command", "php", "deployer", "NUMBER", "phar", "deploy", "preprod", "I", "get", "a", "\u00d9nable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "error", "NUMBER", "I", "can", "connect", "in", "SSH", "with", "those", "credentials", "use", "Putty", "and", "I", "also", "use", "Capifony", "before", "which", "I", "had", "to", "use", "with", "this", "config", "to", "pass", "through", "the", "proxy", "require", "net", "ssh", "proxy", "http", "sshproxy", "Net", "SSH", "Proxy", "HTTP", "NUMBER", "new", "YY", "NUMBER", "YY", "NUMBER", "YY", "NUMBER", "YYY", "NUMBER", "set", "ssh_options", "proxy", "sshproxy", "ssh_options", "forward_agent", "true", "Is", "it", "possible", "to", "do", "this", "with", "Deployer", "Content", "of", "deploy", "NUMBER", "php", "TAG", "user", "myusername", "password", "mypassword", "stage", "production", "env", "deploy_path", "var", "www", "XXX", "www", "Specify", "the", "repository", "from", "which", "to", "download", "your", "project", "s", "code", "NUMBER", "set", "repository", "LINK", "Output", "log", "C", "wamp", "www", "XXX", "php", "deployer", "NUMBER", "phar", "deploy", "preprod", "vvv", "\u00d4", "\u00f1", "Executing", "task", "deploy", "prepare", "\u00d4\u00e5", "on", "preprod", "Notice", "Cannot", "connect", "to", "XX", "NUMBER", "XX", "NUMBER", "XX", "NUMBER", "XXX", "NUMBER", "Error", "NUMBER", "Une", "tentative", "de", "connexion", "a", "\u00dachou\u00da", "car", "le", "parti", "connect\u00da", "n\u00c6a", "pas", "r\u00dapondu", "convenablement", "au", "del\u00d3", "d\u00c6une", "certaine", "dur\u00dae", "ou", "une", "connexion", "\u00datablie", "a", "\u00dachou\u00da", "car", "l\u00c6h", "te", "de", "connexion", "n\u00c6a", "pas", "r\u00dapondu", "NUMBER", "in", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "Exception", "trace", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "connect", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "require", "at", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "NUMBER", "deploy", "p", "parallel", "oanhnn", "Is", "this", "an", "answer", "Hello", "oanhnn", "So", "far", "my", "ssh_config", "looked", "like", "this", "Host", "ProxyCommand", "connect", "h", "p", "ForwardAgent", "yes", "Host", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "NUMBER", "yyy", "IdentityFile", "NUMBER", "ssh", "key", "NUMBER", "ppk", "ProxyCommand", "connect", "H", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "h", "NUMBER", "I", "ve", "tried", "your", "solution", "but", "I", "get", "this", "error", "C", "wamp", "www", "XXX", "php", "deployer", "NUMBER", "phar", "deploy", "preprod", "vvv", "\u00d4", "\u00f1", "Executing", "task", "deploy", "prepare", "\u00d4\u00e5", "on", "preprod", "RuntimeException", "You", "need", "to", "specify", "authentication", "method", "NUMBER", "Exception", "trace", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "connect", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "require", "at", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "NUMBER", "deploy", "p", "parallel", "oanhnn", "New", "error", "Warning", "ssh", "NUMBER", "_connect", "Unable", "to", "connect", "to", "XX", "NUMBER", "XX", "NUMBER", "XX", "NUMBER", "XXX", "on", "port", "NUMBER", "in", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Session", "NUMBER", "php", "on", "line", "NUMBER", "Warning", "ssh", "NUMBER", "_connect", "Unable", "to", "connect", "to", "XX", "NUMBER", "XX", "NUMBER", "XX", "NUMBER", "XXX", "in", "phar", "C", "wamp", "www", "XXX", "deployer", "NUMBER", "phar", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Session", "NUMBER", "php", "on", "line", "NUMBER", "Shell", "on", "your", "server", "be", "not", "POSIX", "compliant", "NUMBER", "Please", "change", "to", "sh", "bash", "or", "similar", "NUMBER", "Usually", "you", "can", "change", "your", "shell", "to", "bash", "by", "run", "chsh", "s", "bin", "bash", "RuntimeException", "The", "SSH", "connection", "fail", "NUMBER", "oanhnn", "any", "help", "on", "this", "Shell", "on", "your", "server", "be", "not", "POSIX", "compliant", "NUMBER", "Please", "change", "to", "sh", "bash", "or", "similar", "NUMBER", "Usually", "you", "can", "change", "your", "shell", "to", "bash", "by", "run", "chsh", "s", "bin", "bash", "elfet", "I", "use", "the", "command", "above", "and", "echo", "SHELL", "on", "my", "server", "returns", "bin", "bash", "but", "I", "still", "have", "the", "same", "error", "NUMBER", "If", "it", "helps", "I", "m", "use", "the", "deployer", "NUMBER", "phar", "on", "a", "Windows", "NUMBER", "machine", "NUMBER", "My", "php_ssh", "NUMBER", "extension", "be", "active", "NUMBER", "oanhnn", "here", "it", "be", "again", "I", "don", "t", "see", "what", "could", "be", "wrong", "in", "it", "NUMBER", "Host", "XX", "NUMBER", "XX", "NUMBER", "XX", "NUMBER", "XXX", "Hostname", "XX", "NUMBER", "XX", "NUMBER", "XX", "NUMBER", "XXX", "IdentityFile", "NUMBER", "ssh", "key", "NUMBER", "ppk", "ProxyCommand", "connect", "H", "YY", "NUMBER", "YY", "NUMBER", "YY", "NUMBER", "YYY", "NUMBER", "h", "NUMBER", "ForwardAgent", "yes", "Not", "cool", "that", "you", "close", "the", "issue", "it", "s", "not", "solve", "at", "all", "NUMBER", "What", "s", "with", "styleci", "Yeah", "PH", "for", "StyleCI", "Ok", "OK", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "The", "revison", "option", "NUMBER", "fc", "NUMBER", "edc", "NUMBER", "fb", "NUMBER", "c", "NUMBER", "b", "NUMBER", "a", "NUMBER", "ae", "NUMBER", "edaa", "NUMBER", "e", "NUMBER", "fcf", "pass", "to", "deployer", "script", "be", "never", "checked", "in", "deploy", "update_code", "task", "because", "the", "tag", "InputOption", "object", "input", "hasOption", "tag", "always", "exists", "with", "null", "default", "value", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "hasOption", "tag", "tag", "input", "getOption", "tag", "elseif", "input", "hasOption", "revision", "revision", "input", "getOption", "revision", "at", "if", "empty", "revision", "at", "revision", "else", "if", "empty", "tag", "at", "tag", "elseif", "empty", "branch", "at", "branch", "writeln", "TAG", "The", "value", "be", "NUMBER", "empty", "at", "EMPTY", "at", "NUMBER", "when", "it", "should", "be", "NUMBER", "input", "getOption", "revision", "NUMBER", "TAG", "task", "test", "hasOption", "Output", "log", "php", "deployer", "NUMBER", "phar", "test", "revision", "NUMBER", "fc", "NUMBER", "edc", "NUMBER", "fb", "NUMBER", "c", "NUMBER", "b", "NUMBER", "a", "NUMBER", "ae", "NUMBER", "edaa", "NUMBER", "e", "NUMBER", "fcf", "vvv", "Executing", "task", "hasOption", "on", "localhost", "The", "value", "be", "EMPTY", "when", "it", "should", "be", "NUMBER", "fc", "NUMBER", "edc", "NUMBER", "fb", "NUMBER", "c", "NUMBER", "b", "NUMBER", "a", "NUMBER", "ae", "NUMBER", "edaa", "NUMBER", "e", "NUMBER", "fcf", "do", "on", "localhost", "Ok", "NUMBER", "ms", "This", "bug", "should", "be", "also", "fix", "in", "the", "NUMBER", "x", "branch", "no", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Hello", "oanhnn", "in", "your", "anwser", "LINK", "issuecomment", "NUMBER", "you", "comment", "the", "load", "of", "the", "NUMBER", "yml", "file", "NUMBER", "That", "means", "that", "in", "NUMBER", "x", "version", "we", "must", "use", "NUMBER", "php", "file", "Or", "it", "s", "only", "for", "my", "proposal", "of", "creation", "of", "dinamic", "values", "NUMBER", "Thanks", "Oskar", "What", "be", "ylm", "Sorry", "my", "mistake", "NUMBER", "I", "want", "to", "say", "NUMBER", "yml", "file", "Q", "A", "Issue", "Type", "Bug", "Question", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "Windows", "Remote", "Machine", "OS", "Ubuntu", "NUMBER", "Description", "I", "install", "deployer", "use", "composer", "in", "my", "windows", "system", "NUMBER", "I", "dont", "why", "this", "error", "be", "come", "up", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "require", "vendor", "deployer", "deployer", "recipe", "laravel", "NUMBER", "php", "Define", "a", "server", "for", "deployment", "NUMBER", "Let", "s", "name", "it", "prod", "and", "use", "port", "NUMBER", "server", "prod", "NUMBER", "NUMBER", "user", "ubuntu", "password", "pass", "stage", "production", "forwardAgent", "env", "deploy_path", "var", "www", "html", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "Output", "log", "Exception", "trace", "at", "E", "wamp", "www", "projects", "laravel", "dev", "autodeployment", "trunk", "autodeploy", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "find", "at", "E", "wamp", "www", "projects", "laravel", "dev", "autodeployment", "trunk", "autodeploy", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "E", "wamp", "www", "projects", "laravel", "dev", "autodeployment", "trunk", "autodeploy", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "E", "wamp", "www", "projects", "laravel", "dev", "autodeployment", "trunk", "autodeploy", "vendor", "deployer", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "E", "wamp", "www", "projects", "laravel", "dev", "autodeployment", "trunk", "autodeploy", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "_Edited", "by", "OanhNN_", "Please", "see", "LINK", "Ohh", "I", "be", "sorry", "NUMBER", "Php", "version", "NUMBER", "Deployer", "version", "Target", "os", "Ubuntu", "NUMBER", "I", "be", "installing", "and", "use", "deployed", "from", "windows", "based", "system", "and", "mostly", "use", "wamp", "NUMBER", "I", "want", "to", "transfer", "my", "code", "file", "from", "repo", "to", "online", "server", "NUMBER", "And", "perform", "some", "post", "deploy", "task", "NUMBER", "Sent", "from", "my", "iPhone", "On", "NUMBER", "May", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Anton", "Medvedev", "notifications", "github", "NUMBER", "com", "write", "Please", "see", "LINK", "You", "be", "receiving", "this", "because", "you", "authored", "the", "thread", "NUMBER", "Reply", "to", "this", "email", "directly", "view", "it", "on", "GitHub", "or", "mute", "the", "thread", "NUMBER", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Hello", "I", "d", "like", "to", "konw", "if", "I", "can", "define", "in", "servers", "NUMBER", "yml", "values", "and", "use", "them", "in", "the", "deploy", "NUMBER", "php", "file", "NUMBER", "For", "example", "NUMBER", "I", "want", "to", "have", "a", "diferent", "share", "folder", "for", "every", "envairoment", "so", "I", "think", "that", "it", "can", "be", "define", "in", "the", "servers", "NUMBER", "yml", "like", "this", "app", "config", "servers", "NUMBER", "yml", "dev", "host", "your", "host", "NUMBER", "com", "user", "release", "identity_file", "public_key", "NUMBER", "ssh", "id_release", "NUMBER", "pub", "private_key", "NUMBER", "ssh", "id_release", "password", "key", "password", "stage", "dev", "deploy_path", "var", "www", "branch", "dev", "share_dir", "drupal", "sites", "dev", "NUMBER", "wadus", "NUMBER", "com", "file", "prod", "host", "your", "host", "NUMBER", "com", "user", "release", "identity_file", "public_key", "NUMBER", "ssh", "id_release", "NUMBER", "pub", "private_key", "NUMBER", "ssh", "id_release", "password", "key", "password", "stage", "prod", "deploy_path", "var", "www", "branch", "master", "share_dir", "drupal", "sites", "www", "NUMBER", "wadus", "NUMBER", "com", "file", "And", "use", "it", "like", "this", "set", "shared_dirs", "env", "server", "NUMBER", "share_dir", "php", "env", "var", "function", "NUMBER", "Thanks", "NUMBER", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Win", "NUMBER", "x", "NUMBER", "Remote", "Machine", "OS", "N", "A", "Description", "Fatal", "error", "Cannot", "redeclare", "env", "previously", "declared", "in", "C", "xampp", "htdocs", "private", "api", "app_information_services", "vendor", "cakephp", "cakephp", "src", "Core", "function", "NUMBER", "php", "NUMBER", "in", "C", "xampp", "htdocs", "private", "api", "app_information_services", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "on", "line", "NUMBER", "Steps", "to", "reproduce", "I", "just", "run", "dep", "command", "and", "this", "shows", "up", "NUMBER", "It", "seems", "that", "cakephp", "has", "also", "env", "method", "defined", "LINK", "L", "NUMBER", "Composer", "autoloader", "will", "cause", "cakephp", "function", "NUMBER", "php", "to", "load", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "require", "paths", "NUMBER", "php", "require", "ROOT", "NUMBER", "DS", "NUMBER", "vendor", "deployer", "deployer", "recipe", "composer", "NUMBER", "php", "try", "dotenv", "new", "Dotenv", "Dotenv", "ROOT", "dotenv", "overload", "catch", "Dotenv", "Exception", "InvalidPathException", "e", "die", "e", "server", "test", "getenv", "TEST_SERVER_HOST", "NUMBER", "user", "getenv", "TEST_SERVER_USERNAME", "password", "null", "stage", "test", "env", "deploy_path", "getenv", "TEST_SERVER_DEPLOY_PATH", "server", "production", "getenv", "PRODUCTION_SERVER_HOST", "NUMBER", "user", "getenv", "PRODUCTION_SERVER_USERNAME", "password", "null", "stage", "production", "env", "deploy_path", "getenv", "PRODUCTION_SERVER_DEPLOY_PATH", "set", "repository", "getenv", "MY_REPO", "task", "reload", "httpd", "function", "run", "sudo", "S", "sbin", "service", "httpd", "reload", "after", "deploy", "reload", "httpd", "after", "rollback", "reload", "httpd", "Output", "log", "_With", "enable", "option", "for", "verbose", "output", "vvv", "NUMBER", "_", "No", "output", "available", "NUMBER", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Windows", "NUMBER", "Remote", "Machine", "OS", "N", "A", "Description", "I", "have", "tried", "all", "of", "your", "test", "methods", "on", "LINK", "issuecomment", "NUMBER", "It", "s", "ok", "to", "connect", "to", "remote", "server", "via", "ssh", "but", "when", "I", "use", "NUMBER", "deployer", "deploy", "vvv", "stg", "command", "it", "always", "didn", "t", "work", "although", "use", "identity_file", "or", "forward_agent", "or", "both", "or", "none", "of", "both", "NUMBER", "I", "don", "t", "use", "password", "for", "private_key", "or", "server", "NUMBER", "ssh", "xxxxx", "xxxxx", "NUMBER", "com", "NUMBER", "br", "Last", "login", "Wed", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "from", "xxxxxxxx", "xxxxx", "xxxxxxxx", "Steps", "to", "reproduce", "Content", "of", "NUMBER", "ssh", "config", "Host", "xxxxx", "NUMBER", "com", "NUMBER", "br", "ForwardAgent", "yes", "Content", "of", "NUMBER", "profile", "bin", "bash", "eval", "ssh", "agent", "s", "ssh", "add", "NUMBER", "ssh", "id_rsa", "Content", "of", "servers", "NUMBER", "yml", "stg", "host", "xxxxx", "NUMBER", "com", "NUMBER", "br", "user", "xxxxx", "identity_file", "public_key", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "private_key", "NUMBER", "ssh", "id_rsa", "forward_agent", "stage", "stage", "branch", "develop", "deploy_path", "var", "www", "html", "xxxxxx", "NUMBER", "com", "NUMBER", "br", "web", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "hasOption", "tag", "tag", "input", "getOption", "tag", "at", "if", "empty", "tag", "at", "b", "tag", "elseif", "empty", "branch", "at", "b", "branch", "release", "env", "releases_list", "if", "gitCache", "isset", "release", "NUMBER", "try", "run", "git", "clone", "at", "q", "reference", "deploy_path", "release", "release", "NUMBER", "dissociate", "repository", "release_path", "NUMBER", "NUMBER", "catch", "RuntimeException", "exc", "run", "git", "clone", "at", "q", "repository", "release_path", "NUMBER", "NUMBER", "else", "run", "git", "clone", "at", "depth", "q", "repository", "release_path", "NUMBER", "NUMBER", "desc", "Updating", "code", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code_without_recursive", "deploy", "vendors", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "after", "deploy", "success", "Output", "log", "_With", "enable", "option", "for", "verbose", "output", "vvv", "NUMBER", "_", "NUMBER", "deployer", "deploy", "vvv", "stg", "Executing", "task", "deploy", "prepare", "on", "stg", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "Exception", "trace", "at", "phar", "path_to_file", "deploy", "deployer", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "connect", "at", "phar", "path_to_file", "deploy", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "path_to_file", "deploy", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "path_to_file", "deploy", "deployer", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "path_to_file", "deploy", "deployer", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "path_to_file", "deploy", "deployer", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "path_to_file", "deploy", "deployer", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "path_to_file", "deploy", "deployer", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "path_to_file", "deploy", "deployer", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "path_to_file", "deploy", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "path_to_file", "deploy", "deployer", "bin", "dep", "NUMBER", "require", "at", "path_to_file", "deploy", "deployer", "NUMBER", "deploy", "p", "parallel", "Please", "help", "me", "NUMBER", "I", "had", "similar", "problem", "when", "use", "a", "password", "protected", "keyfile", "NUMBER", "Something", "like", "interactive", "password", "input", "would", "be", "super", "nice", "in", "that", "case", "because", "if", "you", "work", "on", "a", "project", "with", "different", "team", "members", "hardcoding", "a", "password", "into", "the", "deployment", "file", "feels", "strange", "NUMBER", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "LINK", "LINK", "I", "ve", "developed", "a", "simple", "logging", "system", "and", "an", "email", "notify", "system", "use", "monolog", "for", "both", "NUMBER", "I", "m", "able", "to", "decide", "if", "I", "want", "one", "or", "another", "or", "both", "setting", "it", "s", "parameters", "in", "my", "deploy", "NUMBER", "php", "file", "NUMBER", "The", "logger", "function", "expects", "NUMBER", "parameters", "the", "name", "we", "want", "to", "set", "to", "the", "project", "inside", "the", "log", "and", "the", "path", "for", "the", "log", "NUMBER", "Both", "be", "mandatory", "The", "emailer", "function", "expects", "NUMBER", "parameters", "the", "name", "we", "want", "to", "set", "to", "the", "project", "inside", "the", "log", "and", "the", "email", "address", "or", "address", "in", "an", "array", "where", "we", "want", "to", "send", "notifications", "NUMBER", "There", "be", "NUMBER", "extra", "methods", "to", "configure", "from", "address", "the", "subject", "and", "the", "minimum", "logging", "level", "based", "in", "RFC", "NUMBER", "when", "the", "email", "will", "be", "sent", "NUMBER", "This", "extra", "methods", "be", "optional", "NUMBER", "It", "s", "not", "a", "big", "implementation", "just", "to", "cover", "my", "needs", "NUMBER", "logger", "project_name", "log_path", "emailer", "project_name", "email", "example", "NUMBER", "com", "from", "from", "example", "NUMBER", "com", "subject", "Error", "deploying", "level", "NUMBER", "Hope", "this", "can", "help", "someone", "with", "their", "deploy", "control", "NUMBER", "Log", "functionality", "be", "very", "important", "and", "will", "be", "in", "Deployer", "for", "sure", "NUMBER", "But", "why", "do", "you", "need", "email", "In", "fact", "what", "I", "needed", "was", "a", "notification", "by", "mail", "when", "an", "error", "occur", "because", "I", "m", "deploying", "from", "cron", "NUMBER", "When", "I", "was", "work", "on", "it", "I", "realised", "that", "I", "needed", "some", "kind", "of", "logs", "to", "see", "what", "happened", "and", "I", "change", "from", "a", "mailing", "system", "to", "a", "log", "system", "taking", "profit", "of", "Monolog", "s", "mailing", "feature", "NUMBER", "If", "you", "have", "any", "improvement", "or", "change", "tell", "me", "and", "I", "will", "try", "to", "do", "it", "NUMBER", "For", "Logging", "better", "to", "use", "PSR", "NUMBER", "interface", "instead", "of", "strong", "coupling", "with", "Monolog", "NUMBER", "Monolog", "implement", "PSR", "NUMBER", "and", "we", "can", "easy", "use", "it", "as", "logger", "by", "default", "but", "user", "also", "should", "be", "able", "to", "customize", "logger", "via", "configuration", "e", "NUMBER", "g", "NUMBER", "if", "i", "want", "to", "use", "my", "own", "logger", "which", "implement", "PSR", "NUMBER", "I", "m", "doing", "a", "new", "logging", "system", "with", "all", "your", "requirements", "NUMBER", "Also", "there", "no", "need", "for", "separate", "logger", "function", "NUMBER", "You", "can", "use", "set", "function", "php", "set", "log", "NUMBER", "deploy", "NUMBER", "log", "I", "was", "thinking", "in", "something", "like", "that", "function", "NUMBER", "php", "function", "logger", "name", "value", "deployer", "Deployer", "get", "if", "value", "instanceof", "Closure", "deployer", "setLogger", "call_user_func", "value", "elseif", "is_string", "value", "logger", "new", "Monolog", "Logger", "name", "logger", "pushHandler", "new", "Monolog", "Handler", "StreamHandler", "value", "deployer", "setLogger", "logger", "else", "throw", "new", "InvalidArgumentException", "Log", "should", "be", "a", "logger", "object", "or", "the", "name", "and", "path", "for", "the", "default", "log", "NUMBER", "Here", "the", "user", "has", "two", "options", "the", "easy", "one", "where", "he", "can", "write", "only", "a", "name", "and", "a", "path", "and", "deployer", "will", "use", "Monolog", "and", "the", "pro", "where", "the", "user", "can", "configure", "his", "own", "logger", "configuration", "NUMBER", "For", "example", "deploy", "NUMBER", "php", "logger", "deploy", "function", "logger", "new", "Monolog", "Logger", "deploy", "logger", "pushHandler", "new", "Monolog", "Handler", "ErrorLogHandler", "return", "logger", "What", "do", "you", "think", "about", "that", "Perhaps", "we", "can", "set", "only", "one", "parameter", "that", "would", "be", "the", "path", "or", "the", "logger", "object", "and", "put", "a", "default", "name", "to", "the", "log", "entry", "NUMBER", "Using", "this", "configurable", "option", "I", "could", "use", "the", "email", "notiication", "system", "embedded", "in", "Monolog", "that", "be", "what", "I", "need", "and", "wanted", "to", "do", "at", "first", "One", "more", "question", "do", "you", "want", "to", "log", "vvv", "every", "deploy", "or", "you", "want", "to", "log", "output", "console", "only", "dimoniet", "do", "you", "finished", "this", "implementation", "I", "need", "to", "log", "all", "the", "tasks", "NUMBER", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "If", "you", "already", "have", "a", "copy", "of", "composer", "NUMBER", "phar", "in", "release_path", "Deployer", "downloads", "a", "new", "copy", "instead", "of", "use", "the", "exist", "file", "NUMBER", "This", "pull", "request", "add", "a", "check", "so", "it", "will", "use", "that", "local", "copy", "NUMBER", "This", "essentially", "fix", "NUMBER", "looks", "to", "me", "NUMBER", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "master", "Local", "Machine", "OS", "Ubunut", "NUMBER", "LTS", "Remote", "Machine", "OS", "N", "A", "Description", "I", "m", "use", "deployer", "with", "identity", "file", "to", "authenticate", "to", "the", "remote", "hosts", "which", "works", "as", "expected", "NUMBER", "I", "don", "t", "get", "asked", "for", "a", "password", "when", "deploying", "NUMBER", "Now", "that", "I", "want", "to", "exclude", "the", "servers", "configuration", "to", "a", "yaml", "file", "as", "describe", "in", "the", "documentation", "I", "get", "asked", "for", "a", "password", "when", "run", "deb", "deploy", "NUMBER", "The", "deploy", "process", "continues", "independent", "of", "what", "I", "type", "in", "as", "password", "NUMBER", "I", "would", "expect", "that", "I", "don", "t", "get", "asked", "for", "a", "password", "as", "I", "don", "t", "get", "ask", "with", "the", "default", "way", "of", "configuring", "the", "server", "NUMBER", "Steps", "to", "reproduce", "See", "below", "Content", "of", "deploy", "NUMBER", "php", "This", "be", "the", "basic", "deploy", "NUMBER", "php", "with", "server", "directly", "defined", "php", "TAG", "user", "xxxxxx", "identityFile", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "env", "deploy_path", "var", "www", "project", "env", "branch", "master", "This", "be", "the", "deploy", "NUMBER", "php", "with", "the", "include", "servers", "NUMBER", "yml", "php", "TAG", "echo", "NUMBER", "TAG", "if", "d", "var", "www", "NUMBER", "then", "mkdir", "p", "var", "www", "NUMBER", "fi", "if", "L", "var", "www", "NUMBER", "d", "var", "www", "NUMBER", "then", "echo", "true", "fi", "cd", "var", "www", "NUMBER", "if", "d", "release", "then", "mkdir", "release", "fi", "cd", "var", "www", "NUMBER", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "test", "NUMBER", "vendor", "Ok", "NUMBER", "ms", "Output", "for", "server", "defined", "in", "servers", "NUMBER", "yml", "wp", "content", "vendor", "bin", "dep", "deploy", "test", "NUMBER", "vendor", "vvv", "Executing", "task", "deploy", "prepare", "on", "test", "NUMBER", "vendor", "xxxxx", "myhost", "NUMBER", "de", "Password", "echo", "NUMBER", "TAG", "if", "d", "var", "www", "NUMBER", "then", "mkdir", "p", "var", "www", "NUMBER", "fi", "if", "L", "var", "www", "NUMBER", "d", "var", "www", "NUMBER", "then", "echo", "true", "fi", "cd", "var", "www", "NUMBER", "if", "d", "release", "then", "mkdir", "release", "fi", "cd", "home", "www", "NUMBER", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "test", "NUMBER", "vendor", "Ok", "NUMBER", "s", "NUMBER", "ms", "NUMBER", "I", "test", "both", "with", "an", "empty", "and", "without", "password", "test", "NUMBER", "vendor", "host", "myhost", "NUMBER", "de", "port", "NUMBER", "user", "xxxxxx", "identity_file", "public_key", "NUMBER", "ssh", "id_rsa_vendor", "NUMBER", "pub", "private_key", "NUMBER", "ssh", "id_rsa_vendor", "password", "deploy_path", "var", "www", "NUMBER", "branch", "master", "I", "think", "that", "when", "I", "m", "use", "the", "servers", "NUMBER", "yml", "the", "behavior", "be", "always", "to", "ask", "for", "the", "key", "passphrase", "whether", "the", "key", "be", "already", "unlocked", "in", "the", "current", "user", "session", "or", "not", "NUMBER", "If", "I", "start", "direct", "with", "the", "servers", "NUMBER", "yml", "as", "config", "I", "always", "have", "to", "use", "the", "correct", "pass", "phrase", "for", "the", "key", "to", "work", "NUMBER", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "I", "notice", "file", "be", "created", "under", "the", "account", "you", "use", "for", "authentication", "but", "I", "need", "the", "file", "to", "have", "specific", "user", "group", "not", "same", "as", "SSH", "account", "NUMBER", "What", "be", "the", "best", "way", "to", "do", "this", "with", "Deployer", "If", "someone", "else", "gets", "stuck", "a", "quick", "workaround", "for", "this", "be", "to", "write", "a", "custom", "task", "for", "example", "php", "task", "deploy", "owner", "function", "run", "chown", "R", "www", "data", "www", "data", "var", "www", "site", "Something", "build", "in", "would", "be", "nice", "though", "it", "s", "a", "very", "common", "feature", "NUMBER", "What", "about", "writable", "elfet", "I", "assume", "that", "chmods", "the", "file", "to", "be", "writable", "I", "m", "currently", "deploying", "a", "WordPress", "project", "and", "it", "doesn", "t", "play", "nice", "if", "the", "file", "be", "not", "owned", "by", "the", "web", "server", "process", "NUMBER", "The", "workaround", "task", "I", "have", "works", "well", "so", "you", "can", "consider", "add", "native", "chown", "capabilities", "a", "feature", "request", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "OSX", "Yosemite", "Remote", "Machine", "OS", "Ubuntu", "NUMBER", "Description", "Using", "SSH", "key", "auth", "NUMBER", "For", "some", "reason", "when", "you", "use", "identityFile", "you", "get", "an", "error", "when", "connecting", "about", "auth", "fail", "see", "below", "NUMBER", "However", "if", "you", "add", "forwardAgent", "it", "starts", "work", "NUMBER", "Of", "course", "the", "key", "has", "be", "add", "on", "the", "remote", "and", "regular", "ssh", "command", "works", "NUMBER", "Steps", "to", "reproduce", "Run", "any", "dep", "command", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "user", "root", "identityFile", "forwardAgent", "env", "deploy_path", "var", "www", "tedx", "htdocs", "Main", "task", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "shared", "deploy", "writable", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "after", "deploy", "success", "Output", "log", "tedx", "git", "master", "NUMBER", "dep", "current", "vvv", "Executing", "task", "current", "on", "production", "cd", "var", "www", "tedx", "htdocs", "readlink", "var", "www", "tedx", "htdocs", "current", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "Exception", "trace", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "connect", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "checkConnection", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Environment", "get", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "function", "NUMBER", "php", "NUMBER", "env", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "Users", "stakhr", "VVV", "www", "tedx", "dep", "bin", "dep", "NUMBER", "require", "at", "Users", "stakhr", "VVV", "www", "tedx", "dep", "NUMBER", "current", "p", "parallel", "The", "output", "differs", "slightly", "depending", "on", "the", "command", "but", "it", "looks", "like", "the", "same", "key", "be", "use", "oanhnn", "Does", "the", "debug", "log", "below", "give", "any", "insight", "into", "the", "problem", "Without", "agent", "forwarding", "tedx", "git", "master", "ssh", "i", "Users", "stakhr", "NUMBER", "ssh", "id_rsa", "v", "root", "s", "NUMBER", "site", "NUMBER", "com", "OpenSSH_", "NUMBER", "p", "NUMBER", "OSSLShim", "NUMBER", "r", "NUMBER", "Dec", "NUMBER", "debug", "NUMBER", "Reading", "configuration", "data", "etc", "ssh_config", "debug", "NUMBER", "etc", "ssh_config", "line", "NUMBER", "Applying", "options", "for", "debug", "NUMBER", "Connecting", "to", "s", "NUMBER", "site", "NUMBER", "com", "NUMBER", "port", "NUMBER", "debug", "NUMBER", "Connection", "established", "NUMBER", "debug", "NUMBER", "identity", "file", "Users", "stakhr", "NUMBER", "ssh", "id_rsa", "type", "NUMBER", "debug", "NUMBER", "identity", "file", "Users", "stakhr", "NUMBER", "ssh", "id_rsa", "cert", "type", "NUMBER", "debug", "NUMBER", "Enabling", "compatibility", "mode", "for", "protocol", "NUMBER", "debug", "NUMBER", "Local", "version", "string", "SSH", "NUMBER", "OpenSSH_", "NUMBER", "debug", "NUMBER", "Remote", "protocol", "version", "NUMBER", "remote", "software", "version", "OpenSSH_", "NUMBER", "p", "NUMBER", "Ubuntu", "NUMBER", "ubuntu", "NUMBER", "debug", "NUMBER", "match", "OpenSSH_", "NUMBER", "p", "NUMBER", "Ubuntu", "NUMBER", "ubuntu", "NUMBER", "pat", "OpenSSH", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_KEXINIT", "sent", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_KEXINIT", "received", "debug", "NUMBER", "kex", "server", "client", "aes", "NUMBER", "ctr", "hmac", "md", "NUMBER", "etm", "openssh", "NUMBER", "com", "none", "debug", "NUMBER", "kex", "client", "server", "aes", "NUMBER", "ctr", "hmac", "md", "NUMBER", "etm", "openssh", "NUMBER", "com", "none", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_KEX_DH_GEX_REQUEST", "NUMBER", "TAG", "client", "aes", "NUMBER", "ctr", "hmac", "md", "NUMBER", "etm", "openssh", "NUMBER", "com", "none", "debug", "NUMBER", "kex", "client", "server", "aes", "NUMBER", "ctr", "hmac", "md", "NUMBER", "etm", "openssh", "NUMBER", "com", "none", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_KEX_DH_GEX_REQUEST", "NUMBER", "TAG", "forwardAgent", "user", "deployer", "password", "null", "forwardAgent", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "html", "geem", "server", "beta", "beta", "NUMBER", "domain", "NUMBER", "com", "user", "username", "password", "env", "deploy_path", "var", "www", "beta", "NUMBER", "domain", "NUMBER", "com", "Restart", "Apache", "NUMBER", "on", "success", "deploy", "NUMBER", "task", "apache", "restart", "function", "Attention", "The", "user", "must", "have", "rights", "for", "restart", "service", "Attention", "the", "command", "sudo", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "use", "only", "on", "CentOS", "system", "etc", "sudoers", "username", "ALL", "NOPASSWD", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "run", "sudo", "service", "apache", "NUMBER", "restart", "desc", "Restart", "Apache", "NUMBER", "service", "after", "success", "apache", "restart", "Main", "task", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "shared", "deploy", "writable", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "after", "deploy", "success", "Output", "log", "_With", "enable", "option", "for", "verbose", "output", "vvv", "NUMBER", "_", "oem", "FSW", "GEMM", "master", "dep", "deploy", "production", "vvv", "Executing", "task", "deploy", "prepare", "on", "production", "echo", "NUMBER", "TAG", "TAG", "if", "d", "var", "www", "html", "geem", "then", "mkdir", "p", "var", "www", "html", "geem", "fi", "if", "L", "var", "www", "html", "geem", "current", "d", "var", "www", "html", "geem", "current", "then", "echo", "true", "fi", "cd", "var", "www", "html", "geem", "if", "d", "release", "then", "mkdir", "release", "fi", "cd", "var", "www", "html", "geem", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "production", "Ok", "NUMBER", "s", "NUMBER", "ms", "Executing", "task", "deploy", "release", "on", "production", "mkdir", "var", "www", "html", "geem", "release", "NUMBER", "cd", "var", "www", "html", "geem", "if", "h", "release", "then", "rm", "release", "fi", "ln", "s", "var", "www", "html", "geem", "release", "NUMBER", "var", "www", "html", "geem", "release", "do", "on", "production", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "update_code", "on", "production", "which", "git", "TAG", "TAG", "git", "version", "TAG", "TAG", "find", "var", "www", "html", "geem", "release", "maxdepth", "NUMBER", "mindepth", "NUMBER", "type", "d", "TAG", "TAG", "TAG", "readlink", "var", "www", "html", "geem", "release", "TAG", "TAG", "usr", "bin", "git", "clone", "b", "master", "depth", "NUMBER", "recursive", "q", "git", "github", "NUMBER", "com", "oskarcalvo", "FSW", "GEMM", "NUMBER", "git", "var", "www", "html", "geem", "release", "NUMBER", "NUMBER", "NUMBER", "RuntimeException", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "p", "parallel", "Thanks", "oanhnn", "NUMBER", "First", "I", "have", "try", "in", "my", "remote", "server", "this", "deployer", "NUMBER", "ssh", "ssh", "T", "git", "github", "NUMBER", "com", "Warning", "Permanently", "add", "the", "RSA", "host", "key", "for", "IP", "address", "NUMBER", "to", "the", "list", "of", "know", "hosts", "NUMBER", "Hi", "oskarcalvo", "You", "ve", "successfully", "authenticated", "but", "GitHub", "do", "not", "provide", "shell", "access", "NUMBER", "deployer", "NUMBER", "ssh", "Also", "I", "try", "deployer", "NUMBER", "ssh", "ssh", "vT", "git", "github", "NUMBER", "com", "OpenSSH_", "NUMBER", "p", "NUMBER", "Debian", "NUMBER", "deb", "NUMBER", "u", "NUMBER", "OpenSSL", "NUMBER", "k", "NUMBER", "Jan", "NUMBER", "debug", "NUMBER", "Reading", "configuration", "data", "etc", "ssh", "ssh_config", "debug", "NUMBER", "etc", "ssh", "ssh_config", "line", "NUMBER", "Applying", "options", "for", "debug", "NUMBER", "Connecting", "to", "github", "NUMBER", "com", "NUMBER", "port", "NUMBER", "debug", "NUMBER", "Connection", "established", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_rsa", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_rsa", "cert", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_dsa", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_dsa", "cert", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_ecdsa", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_ecdsa", "cert", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_ed", "NUMBER", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_ed", "NUMBER", "cert", "type", "NUMBER", "debug", "NUMBER", "Enabling", "compatibility", "mode", "for", "protocol", "NUMBER", "debug", "NUMBER", "Local", "version", "string", "SSH", "NUMBER", "OpenSSH_", "NUMBER", "p", "NUMBER", "Debian", "NUMBER", "deb", "NUMBER", "u", "NUMBER", "debug", "NUMBER", "Remote", "protocol", "version", "NUMBER", "remote", "software", "version", "libssh", "NUMBER", "debug", "NUMBER", "no", "match", "libssh", "NUMBER", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_KEXINIT", "sent", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_KEXINIT", "received", "debug", "NUMBER", "kex", "server", "client", "aes", "NUMBER", "ctr", "hmac", "sha", "NUMBER", "NUMBER", "none", "debug", "NUMBER", "kex", "client", "server", "aes", "NUMBER", "ctr", "hmac", "sha", "NUMBER", "NUMBER", "none", "debug", "NUMBER", "sending", "SSH", "NUMBER", "_MSG_KEX_ECDH_INIT", "debug", "NUMBER", "expecting", "SSH", "NUMBER", "_MSG_KEX_ECDH_REPLY", "debug", "NUMBER", "Server", "host", "key", "RSA", "NUMBER", "NUMBER", "ac", "a", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "NUMBER", "b", "NUMBER", "NUMBER", "d", "eb", "df", "a", "NUMBER", "NUMBER", "debug", "NUMBER", "Host", "github", "NUMBER", "com", "be", "know", "and", "matches", "the", "RSA", "host", "key", "NUMBER", "debug", "NUMBER", "Found", "key", "in", "home", "deployer", "NUMBER", "ssh", "known_hosts", "NUMBER", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_NEWKEYS", "sent", "debug", "NUMBER", "expecting", "SSH", "NUMBER", "_MSG_NEWKEYS", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_NEWKEYS", "received", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_SERVICE_REQUEST", "sent", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_SERVICE_ACCEPT", "received", "debug", "NUMBER", "Authentications", "that", "can", "continue", "publickey", "debug", "NUMBER", "Next", "authentication", "method", "publickey", "debug", "NUMBER", "Offering", "RSA", "public", "key", "oskarcalvo", "debug", "NUMBER", "Server", "accepts", "key", "pkalg", "ssh", "rsa", "blen", "NUMBER", "debug", "NUMBER", "Authentication", "succeeded", "publickey", "NUMBER", "Authenticated", "to", "github", "NUMBER", "com", "NUMBER", "NUMBER", "NUMBER", "debug", "NUMBER", "channel", "NUMBER", "new", "client", "session", "debug", "NUMBER", "Entering", "interactive", "session", "NUMBER", "debug", "NUMBER", "Requesting", "authentication", "agent", "forwarding", "NUMBER", "debug", "NUMBER", "Sending", "environment", "NUMBER", "debug", "NUMBER", "Sending", "env", "LANG", "en_US", "NUMBER", "UTF", "NUMBER", "debug", "NUMBER", "client_input_channel_req", "channel", "NUMBER", "rtype", "exit", "status", "reply", "NUMBER", "Hi", "oskarcalvo", "You", "ve", "successfully", "authenticated", "but", "GitHub", "do", "not", "provide", "shell", "access", "NUMBER", "debug", "NUMBER", "channel", "NUMBER", "free", "client", "session", "nchannels", "NUMBER", "Transferred", "sent", "NUMBER", "received", "NUMBER", "bytes", "in", "NUMBER", "seconds", "Bytes", "per", "second", "sent", "NUMBER", "received", "NUMBER", "debug", "NUMBER", "Exit", "status", "NUMBER", "So", "I", "understand", "that", "the", "forward", "Agent", "works", "fine", "when", "I", "connect", "through", "ssh", "to", "the", "server", "NUMBER", "When", "I", "run", "test", "task", "I", "get", "this", "oem", "FSW", "GEMM", "master", "dep", "test", "production", "vvv", "Executing", "task", "test", "on", "production", "cd", "var", "www", "html", "geem", "ssh", "vT", "git", "github", "NUMBER", "com", "RuntimeException", "OpenSSH_", "NUMBER", "p", "NUMBER", "Debian", "NUMBER", "deb", "NUMBER", "u", "NUMBER", "OpenSSL", "NUMBER", "k", "NUMBER", "Jan", "NUMBER", "debug", "NUMBER", "Reading", "configuration", "data", "etc", "ssh", "ssh_config", "debug", "NUMBER", "etc", "ssh", "ssh_config", "line", "NUMBER", "Applying", "options", "for", "debug", "NUMBER", "Connecting", "to", "github", "NUMBER", "com", "NUMBER", "port", "NUMBER", "debug", "NUMBER", "Connection", "established", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_rsa", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_rsa", "cert", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_dsa", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_dsa", "cert", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_ecdsa", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_ecdsa", "cert", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_ed", "NUMBER", "type", "NUMBER", "debug", "NUMBER", "key_load_public", "No", "such", "file", "or", "directory", "debug", "NUMBER", "identity", "file", "home", "deployer", "NUMBER", "ssh", "id_ed", "NUMBER", "cert", "type", "NUMBER", "debug", "NUMBER", "Enabling", "compatibility", "mode", "for", "protocol", "NUMBER", "debug", "NUMBER", "Local", "version", "string", "SSH", "NUMBER", "OpenSSH_", "NUMBER", "p", "NUMBER", "Debian", "NUMBER", "deb", "NUMBER", "u", "NUMBER", "debug", "NUMBER", "Remote", "protocol", "version", "NUMBER", "remote", "software", "version", "libssh", "NUMBER", "debug", "NUMBER", "no", "match", "libssh", "NUMBER", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_KEXINIT", "sent", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_KEXINIT", "received", "debug", "NUMBER", "kex", "server", "client", "aes", "NUMBER", "ctr", "hmac", "sha", "NUMBER", "NUMBER", "none", "debug", "NUMBER", "kex", "client", "server", "aes", "NUMBER", "ctr", "hmac", "sha", "NUMBER", "NUMBER", "none", "debug", "NUMBER", "sending", "SSH", "NUMBER", "_MSG_KEX_ECDH_INIT", "debug", "NUMBER", "expecting", "SSH", "NUMBER", "_MSG_KEX_ECDH_REPLY", "debug", "NUMBER", "Server", "host", "key", "RSA", "NUMBER", "NUMBER", "ac", "a", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "NUMBER", "b", "NUMBER", "NUMBER", "d", "eb", "df", "a", "NUMBER", "NUMBER", "debug", "NUMBER", "Host", "github", "NUMBER", "com", "be", "know", "and", "matches", "the", "RSA", "host", "key", "NUMBER", "debug", "NUMBER", "Found", "key", "in", "home", "deployer", "NUMBER", "ssh", "known_hosts", "NUMBER", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_NEWKEYS", "sent", "debug", "NUMBER", "expecting", "SSH", "NUMBER", "_MSG_NEWKEYS", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_NEWKEYS", "received", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_SERVICE_REQUEST", "sent", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_SERVICE_ACCEPT", "received", "debug", "NUMBER", "Authentications", "that", "can", "continue", "publickey", "debug", "NUMBER", "Next", "authentication", "method", "publickey", "debug", "NUMBER", "Trying", "private", "key", "home", "deployer", "NUMBER", "ssh", "id_rsa", "debug", "NUMBER", "Trying", "private", "key", "home", "deployer", "NUMBER", "ssh", "id_dsa", "debug", "NUMBER", "Trying", "private", "key", "home", "deployer", "NUMBER", "ssh", "id_ecdsa", "debug", "NUMBER", "Trying", "private", "key", "home", "deployer", "NUMBER", "ssh", "id_ed", "NUMBER", "debug", "NUMBER", "No", "more", "authentication", "methods", "to", "try", "NUMBER", "Permission", "denied", "publickey", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "home", "oem", "oskar", "sources", "geem", "project", "FSW", "GEMM", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "test", "p", "parallel", "Thanks", "NUMBER", "Oskar", "As", "I", "dit", "before", "NUMBER", "Run", "it", "locally", "oem", "FSW", "GEMM", "master", "ssh", "add", "l", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "b", "f", "NUMBER", "da", "b", "NUMBER", "NUMBER", "cb", "NUMBER", "c", "e", "NUMBER", "NUMBER", "b", "oskarcalvo", "RSA", "NUMBER", "db", "NUMBER", "c", "NUMBER", "a", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "c", "NUMBER", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "f", "NUMBER", "d", "NUMBER", "c", "NUMBER", "oem", "oskar", "DSA", "NUMBER", "NUMBER", "NUMBER", "af", "fa", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "a", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "b", "NUMBER", "NUMBER", "cb", "oscar", "NUMBER", "calvo", "he", "cocktail", "NUMBER", "com", "RSA", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "b", "f", "NUMBER", "da", "b", "NUMBER", "NUMBER", "cb", "NUMBER", "c", "e", "NUMBER", "NUMBER", "b", "oskar", "labo", "RSA", "Run", "it", "in", "the", "remote", "server", "deployer", "ssh", "add", "l", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "b", "f", "NUMBER", "da", "b", "NUMBER", "NUMBER", "cb", "NUMBER", "c", "e", "NUMBER", "NUMBER", "b", "oskarcalvo", "RSA", "NUMBER", "db", "NUMBER", "c", "NUMBER", "a", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "c", "NUMBER", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "f", "NUMBER", "d", "NUMBER", "c", "NUMBER", "oem", "oskar", "DSA", "NUMBER", "NUMBER", "NUMBER", "af", "fa", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "a", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "b", "NUMBER", "NUMBER", "cb", "oscar", "NUMBER", "calvo", "he", "cocktail", "NUMBER", "com", "RSA", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "b", "f", "NUMBER", "da", "b", "NUMBER", "NUMBER", "cb", "NUMBER", "c", "e", "NUMBER", "NUMBER", "b", "oskar", "labo", "RSA", "deployer", "And", "run", "the", "test", "oem", "FSW", "GEMM", "master", "dep", "test", "production", "vvv", "Executing", "task", "test", "on", "production", "Run", "locally", "ssh", "add", "l", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "b", "f", "NUMBER", "da", "b", "NUMBER", "NUMBER", "cb", "NUMBER", "c", "e", "NUMBER", "NUMBER", "b", "oskarcalvo", "RSA", "NUMBER", "db", "NUMBER", "c", "NUMBER", "a", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "c", "NUMBER", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "f", "NUMBER", "d", "NUMBER", "c", "NUMBER", "oem", "oskar", "DSA", "NUMBER", "NUMBER", "NUMBER", "af", "fa", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "a", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "b", "NUMBER", "NUMBER", "cb", "oscar", "NUMBER", "calvo", "he", "cocktail", "NUMBER", "com", "RSA", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "b", "f", "NUMBER", "da", "b", "NUMBER", "NUMBER", "cb", "NUMBER", "c", "e", "NUMBER", "NUMBER", "b", "oskar", "labo", "RSA", "cd", "var", "www", "html", "geem", "ssh", "add", "l", "RuntimeException", "Could", "not", "open", "a", "connection", "to", "your", "authentication", "agent", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "home", "oem", "oskar", "sources", "geem", "project", "FSW", "GEMM", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "test", "p", "parallel", "There", "be", "any", "way", "to", "debug", "and", "see", "where", "be", "the", "problem", "I", "have", "to", "check", "method", "by", "method", "until", "I", "see", "the", "problem", "Thanks", "Oskar", "I", "have", "add", "this", "to", "my", "deploy", "NUMBER", "php", "php", "Configure", "servers", "server", "production", "NUMBER", "NUMBER", "forwardAgent", "user", "deployer", "password", "null", "forwardAgent", "identityFile", "NUMBER", "ssh", "oskarcalvo", "NUMBER", "pub", "NUMBER", "ssh", "oskarcalvo", "NULL", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "html", "geem", "And", "when", "I", "run", "the", "test", "task", "I", "get", "these", "error", "message", "oem", "FSW", "GEMM", "master", "dep", "test", "production", "vvv", "Executing", "task", "test", "on", "production", "Run", "locally", "ssh", "add", "l", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "b", "f", "NUMBER", "da", "b", "NUMBER", "NUMBER", "cb", "NUMBER", "c", "e", "NUMBER", "NUMBER", "b", "oskarcalvo", "RSA", "NUMBER", "db", "NUMBER", "c", "NUMBER", "a", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "c", "NUMBER", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "f", "NUMBER", "d", "NUMBER", "c", "NUMBER", "oem", "oskar", "DSA", "NUMBER", "NUMBER", "NUMBER", "af", "fa", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "a", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "b", "NUMBER", "NUMBER", "cb", "oscar", "NUMBER", "calvo", "he", "cocktail", "NUMBER", "com", "RSA", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "b", "f", "NUMBER", "da", "b", "NUMBER", "NUMBER", "cb", "NUMBER", "c", "e", "NUMBER", "NUMBER", "b", "oskar", "labo", "RSA", "cd", "var", "www", "html", "geem", "ssh", "add", "l", "deployer", "NUMBER", "Password", "PHP", "Warning", "ssh", "NUMBER", "_auth_pubkey_file", "Authentication", "fail", "for", "deployer", "use", "public", "key", "Username", "PublicKey", "combination", "invalid", "in", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Authentication", "PublicKeyFile", "NUMBER", "php", "on", "line", "NUMBER", "RuntimeException", "The", "authentication", "over", "the", "current", "SSH", "connection", "fail", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Session", "NUMBER", "php", "NUMBER", "Ssh", "Session", "authenticate", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Session", "NUMBER", "php", "NUMBER", "Ssh", "Session", "createResource", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "AbstractResourceHolder", "NUMBER", "php", "NUMBER", "Ssh", "AbstractResourceHolder", "getResource", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Subsystem", "NUMBER", "php", "NUMBER", "Ssh", "Subsystem", "getSessionResource", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "createResource", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "AbstractResourceHolder", "NUMBER", "php", "NUMBER", "Ssh", "AbstractResourceHolder", "getResource", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "home", "oem", "oskar", "sources", "geem", "project", "FSW", "GEMM", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "test", "p", "parallel", "OK", "oanhnn", "I", "remove", "then", "identifyFile", "method", "NUMBER", "I", "hope", "we", "can", "fix", "my", "problem", "to", "deploy", "with", "private", "repository", "NUMBER", "Oskar", "It", "s", "work", "now", "NUMBER", "I", "think", "I", "don", "t", "change", "anything", "NUMBER", "this", "be", "my", "last", "deploy", "NUMBER", "php", "php", "TAG", "forwardAgent", "user", "deployer", "password", "null", "forwardAgent", "identityFile", "home", "oem", "NUMBER", "ssh", "oskarcalvo", "NUMBER", "pub", "home", "oem", "NUMBER", "ssh", "oskarcalvo", "NULL", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "html", "geem", "server", "beta", "beta", "NUMBER", "domain", "NUMBER", "com", "user", "username", "password", "env", "deploy_path", "var", "www", "beta", "NUMBER", "domain", "NUMBER", "com", "Restart", "Apache", "NUMBER", "on", "success", "deploy", "NUMBER", "task", "apache", "restart", "function", "Attention", "The", "user", "must", "have", "rights", "for", "restart", "service", "Attention", "the", "command", "sudo", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "use", "only", "on", "CentOS", "system", "etc", "sudoers", "username", "ALL", "NOPASSWD", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "run", "sudo", "service", "apache", "NUMBER", "restart", "desc", "Restart", "Apache", "NUMBER", "service", "after", "success", "apache", "restart", "Main", "task", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "shared", "deploy", "writable", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "after", "deploy", "success", "Add", "test", "task", "task", "test", "function", "run", "ssh", "vT", "git", "github", "NUMBER", "com", "runLocally", "ssh", "add", "l", "run", "ssh", "add", "l", "Oskar", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "Deployer", "version", "NUMBER", "Local", "Machine", "OS", "linux", "mint", "NUMBER", "with", "PHP", "NUMBER", "NUMBER", "donate", "NUMBER", "sury", "NUMBER", "org", "trusty", "NUMBER", "cli", "Remote", "Machine", "OS", "Debian", "NUMBER", "with", "PHP", "NUMBER", "NUMBER", "deb", "NUMBER", "u", "NUMBER", "cli", "build", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Description", "I", "want", "to", "download", "a", "private", "repository", "from", "github", "NUMBER", "When", "I", "add", "the", "forwardAgent", "method", "the", "consolo", "be", "not", "able", "to", "login", "to", "the", "server", "NUMBER", "Without", "the", "forwardAgent", "method", "I", "can", "login", "to", "the", "remote", "server", "but", "I", "can", "not", "download", "the", "private", "repository", "NUMBER", "Steps", "to", "reproduce", "If", "I", "comment", "the", "forwarAgent", "deployer", "can", "login", "into", "the", "remote", "server", "but", "I", "can", "not", "donwload", "the", "private", "repository", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "forwardAgent", "user", "deployer", "password", "null", "forwardAgent", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "html", "geem", "server", "beta", "beta", "NUMBER", "domain", "NUMBER", "com", "user", "username", "password", "env", "deploy_path", "var", "www", "beta", "NUMBER", "domain", "NUMBER", "com", "Restart", "Apache", "NUMBER", "on", "success", "deploy", "NUMBER", "task", "apache", "restart", "function", "Attention", "The", "user", "must", "have", "rights", "for", "restart", "service", "Attention", "the", "command", "sudo", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "use", "only", "on", "CentOS", "system", "etc", "sudoers", "username", "ALL", "NOPASSWD", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "run", "sudo", "service", "apache", "NUMBER", "restart", "desc", "Restart", "Apache", "NUMBER", "service", "after", "success", "apache", "restart", "Main", "task", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "shared", "deploy", "writable", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "after", "deploy", "success", "Output", "log", "_With", "enable", "option", "for", "verbose", "output", "vvv", "NUMBER", "_", "oem", "FSW", "GEMM", "master", "dep", "deploy", "production", "vvv", "Executing", "task", "deploy", "prepare", "on", "production", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "connect", "at", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "p", "parallel", "Update", "NUMBER", "I", "have", "add", "composer", "require", "deployer", "deployer", "herzult", "php", "ssh", "and", "I", "have", "update", "my", "deploy", "NUMBER", "php", "file", "with", "php", "require", "vendor", "autoload", "NUMBER", "php", "And", "It", "seems", "to", "work", "now", "NUMBER", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "_Potentially_", "Deprecations", "No", "Fixed", "tickets", "NUMBER", "LINK", "The", "timezone", "environment", "variable", "was", "not", "use", "when", "generating", "release", "folder", "name", "which", "could", "cause", "the", "build", "to", "break", "NUMBER", "This", "_can_", "however", "be", "considered", "a", "breaking", "change", "because", "users", "from", "a", "timezone", "that", "be", "ahead", "of", "UTC", "who", "move", "towards", "consistently", "use", "UTC", "instead", "of", "their", "own", "timezone", "_and_", "who", "already", "deployed", "enough", "release", "in", "the", "last", "few", "hours", "might", "see", "their", "release", "folder", "instantly", "remove", "on", "deploy", "NUMBER", "Sorry", "about", "the", "first", "two", "check", "breaking", "commit", "NUMBER", "As", "mention", "above", "this", "change", "can", "be", "considered", "breaking", "in", "at", "least", "two", "ways", "users", "located", "in", "a", "timezone", "ahead", "of", "UTC", "and", "who", "deploy", "enough", "times", "keep_releases", "times", "between", "their", "timezone", "and", "UTC", "will", "potentially", "delete", "the", "folder", "be", "release", "during", "deploy", "just", "like", "describe", "in", "NUMBER", "in", "reverse", "NUMBER", "To", "circumvent", "this", "problem", "it", "could", "be", "a", "possibility", "to", "postfix", "release", "names", "with", "a", "Z", "LINK", "_Universal_Time", "Time_zones", "and", "treat", "them", "differently", "in", "sort", "this", "would", "require", "chiming", "in", "the", "discussion", "in", "NUMBER", "NUMBER", "since", "timezone", "becomes", "a", "global", "not", "environment", "variable", "it", "might", "break", "deploys", "of", "users", "who", "use", "env", "timezone", "in", "their", "custom", "tasks", "NUMBER", "Not", "sure", "how", "to", "prevent", "this", "though", "About", "possible", "breaking", "change", "NUMBER", "Every", "think", "will", "be", "okay", "NUMBER", "Only", "order", "of", "release", "may", "be", "broken", "NUMBER", "But", "we", "can", "add", "some", "sort", "of", "check", "be", "new", "release", "name", "a", "last", "one", "php", "is_last", "env", "release", "releaseName", "Thank", "you", "oanhnn", "NUMBER", "In", "the", "light", "of", "the", "additional", "context", "describe", "in", "the", "issue", "that", "you", "mention", "I", "believe", "that", "indeed", "your", "propose", "solution", "of", "moving", "the", "date_default_timezone_set", "bit", "inside", "the", "release_name", "function", "makes", "the", "most", "sense", "I", "have", "update", "the", "code", "change", "accordingly", "NUMBER", "Also", "good", "idea", "elfet", "NUMBER", "Indeed", "there", "could", "still", "be", "a", "side", "effect", "as", "describe", "in", "NUMBER", "Let", "me", "explore", "this", "Actually", "a", "check", "on", "whether", "the", "release", "currently", "be", "deployed", "be", "indeed", "the", "last", "one", "would", "fix", "the", "release", "order", "bug", "on", "deploy", "but", "other", "tasks", "could", "still", "screw", "up", "Which", "might", "be", "worse", "actually", "picture", "the", "effect", "on", "rollback", "NUMBER", "Currently", "all", "tasks", "depending", "on", "releases_list", "_assume_", "that", "the", "list", "be", "ordered", "from", "last", "to", "oldest", "NUMBER", "So", "this", "be", "the", "expected", "contract", "for", "this", "function", "NUMBER", "However", "the", "list", "be", "rsort", "ed", "by", "file", "name", "which", "only", "really", "works", "when", "release", "names", "be", "consistent", "and", "be", "subject", "to", "breaking", "timezone", "mix", "release", "named", "by", "git", "hash", "NUMBER", "Wouldn", "t", "it", "be", "safer", "to", "have", "release_list", "sort", "the", "list", "by", "release", "directory", "create", "time", "Concurrency", "issue", "aside", "wouldn", "t", "solve", "all", "potential", "breakages", "mention", "here", "so", "far", "oanhnn", "do", "looks", "to", "me", "NUMBER", "oanhnn", "elfet", "Regarding", "the", "discussion", "on", "releases_list", "order", "I", "suppose", "that", "it", "goes", "beyond", "the", "scope", "of", "current", "issue", "deployer", "could", "not", "entirely", "rely", "on", "filesystem", "data", "to", "ensure", "sorting", "it", "would", "be", "too", "brittle", "NUMBER", "deployer", "would", "have", "to", "store", "release", "metadata", "next", "to", "the", "release", "themselves", "that", "s", "quite", "a", "bit", "of", "work", "NUMBER", "Is", "this", "a", "feature", "that", "you", "have", "envisioned", "for", "an", "upcoming", "release", "What", "be", "the", "plan", "regard", "release", "metadata", "on", "the", "server", "I", "m", "ask", "because", "I", "notice", "in", "NUMBER", "that", "there", "could", "be", "plan", "for", "a", "dep", "release", "command", "which", "I", "think", "be", "relate", "as", "release", "metadata", "storing", "would", "be", "inevitable", "NUMBER", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Mac", "OS", "X", "El", "Capitan", "Remote", "Machine", "OS", "Ubuntu", "NUMBER", "PHP", "NUMBER", "Description", "When", "deploying", "to", "a", "remote", "server", "the", "name", "of", "the", "release", "folder", "be", "determined", "with", "the", "date", "function", "of", "the", "local", "machine", "NUMBER", "If", "another", "user", "deploys", "to", "the", "same", "server", "with", "a", "machine", "that", "be", "not", "configured", "to", "use", "the", "same", "timezone", "or", "any", "timezone", "at", "all", "the", "folder", "name", "timestamps", "will", "not", "be", "consistent", "to", "_rsort_", "which", "will", "trigger", "a", "wrong", "cleanup", "task", "and", "potentially", "delete", "the", "current", "release", "be", "deployed", "NUMBER", "The", "problem", "apparently", "lies", "in", "LINK", "L", "NUMBER", "Steps", "to", "reproduce", "Take", "two", "machines", "NUMBER", "One", "machine", "on", "which", "php", "NUMBER", "ini", "be", "the", "standard", "release", "file", "and", "another", "where", "you", "add", "this", "line", "in", "php", "NUMBER", "ini", "date", "NUMBER", "timezone", "UTC", "Deploy", "from", "the", "standard", "release", "machine", "then", "deploy", "from", "the", "other", "the", "current", "release", "folder", "will", "be", "delete", "each", "time", "you", "try", "to", "release", "see", "log", "below", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "user", "deploy", "identityFile", "redacted", "stage", "production", "env", "deploy_path", "var", "www", "redacted", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "set", "repository", "redacted", "Output", "log", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "symlink", "on", "redacted", "cd", "var", "www", "redacted", "ln", "sfn", "var", "www", "redacted", "release", "NUMBER", "current", "cd", "var", "www", "redacted", "rm", "release", "do", "on", "redacted", "Ok", "NUMBER", "ms", "Executing", "task", "cleanup", "on", "redacted", "rm", "rf", "var", "www", "redacted", "release", "NUMBER", "Yes", "it", "s", "a", "bug", "NUMBER", "I", "m", "thinking", "to", "use", "UTC", "for", "release", "NUMBER", "Ok", "thanks", "to", "you", "coox", "and", "oanhnn", "I", "will", "confirm", "asap", "tchapi", "Any", "update", "Sorry", "for", "the", "late", "response", "to", "me", "it", "looks", "good", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "NUMBER", "x", "Upgrade", "to", "PHPUnit", "NUMBER", "Then", "NUMBER", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "The", "assetic", "dump", "command", "do", "not", "exist", "in", "Symfony", "NUMBER", "The", "assetic", "namespace", "has", "be", "replaced", "by", "assets", "NUMBER", "The", "new", "command", "to", "install", "assets", "be", "assets", "install", "NUMBER", "This", "PR", "overrides", "the", "deploy", "assetic", "dump", "command", "so", "it", "works", "in", "Symfony", "NUMBER", "Ideally", "the", "deploy", "assetic", "dump", "command", "would", "be", "renamed", "to", "something", "like", "deploy", "assets", "install", "in", "the", "main", "deploy", "task", "NUMBER", "However", "this", "would", "mean", "overriding", "the", "entire", "list", "of", "tasks", "NUMBER", "Cool", "It", "do", "work", "if", "TAG", "Starting", "from", "Symfony", "NUMBER", "Assetic", "be", "no", "longer", "include", "by", "default", "in", "the", "Symfony", "Standard", "Edition", "NUMBER", "Refer", "to", "this", "article", "to", "learn", "how", "to", "install", "and", "enable", "Assetic", "in", "your", "Symfony", "application", "NUMBER", "LINK", "LINK", "_management", "NUMBER", "html", "But", "i", "have", "an", "other", "problem", "with", "the", "override", "If", "i", "try", "the", "following", "the", "deploy", "dump", "real", "task", "be", "never", "run", "NUMBER", "When", "i", "remove", "the", "override", "it", "works", "NUMBER", "I", "m", "not", "sure", "why", "this", "happens", "with", "tasks", "which", "be", "replaced", "NUMBER", "task", "deploy", "dump", "real", "function", "run", "bin", "php", "release_path", "NUMBER", "trim", "get", "bin_dir", "NUMBER", "console", "assetic", "dump", "env", "env", "no", "debug", "after", "deploy", "assetic", "dump", "deploy", "dump", "real", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "Hi", "I", "find", "the", "current", "way", "of", "naming", "release", "hard", "to", "read", "especially", "if", "you", "have", "several", "of", "them", "during", "the", "same", "day", "hour", "NUMBER", "Couldn", "t", "it", "be", "a", "bit", "more", "human", "friendly", "in", "future", "version", "For", "example", "php", "recipe", "common", "NUMBER", "php", "Release", "task", "deploy", "release", "function", "releaseDir", "env", "parse", "deploy_path", "release", "guard", "NUMBER", "do", "time", "microtime", "list", "usec", "sec", "explode", "time", "date", "DateTime", "createFromFormat", "U", "NUMBER", "u", "sec", "NUMBER", "NUMBER", "NUMBER", "usec", "NUMBER", "e", "NUMBER", "releaseName", "date", "format", "Y", "m", "d_H", "i", "s", "NUMBER", "u", "releasePath", "releaseDir", "NUMBER", "NUMBER", "releaseName", "while", "is_dir", "releasePath", "guard", "env", "release_name", "releaseName", "run", "mkdir", "releasePath", "run", "cd", "deploy_path", "if", "h", "release", "then", "rm", "release", "fi", "run", "ln", "s", "releasePath", "deploy_path", "release", "desc", "Prepare", "release", "This", "way", "you", "have", "release", "that", "look", "like", "release", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "Which", "be", "quite", "more", "readable", "than", "release", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Don", "t", "you", "think", "wink", "I", "think", "it", "not", "hard", "NUMBER", "I", "vote", "use", "NUMBER", "Why", "not", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "Yeah", "why", "not", "In", "my", "example", "I", "just", "tried", "to", "kill", "two", "birds", "in", "one", "stone", "by", "add", "microsecs", "so", "that", "all", "release", "have", "the", "same", "format", "even", "if", "you", "launch", "two", "of", "them", "in", "the", "same", "second", "NUMBER", "In", "the", "end", "the", "exact", "format", "should", "be", "a", "good", "balance", "between", "human", "machine", "readability", "which", "be", "why", "there", "be", "date", "format", "RFCs", "btw", "NUMBER", "To", "me", "the", "MySQL", "datetime", "format", "would", "be", "even", "better", "NUMBER", "Easy", "read", "but", "not", "good", "for", "computer", "Eh", "wut", "about", "DateTime", "createFromFormat", "whatever", "And", "if", "you", "re", "really", "lazy", "then", "just", "replace", "_", "by", "either", "or", "T", "NUMBER", "oanhnn", "Thanks", "for", "responding", "but", "your", "points", "be", "moot", "NUMBER", "You", "can", "make", "a", "date", "time", "object", "from", "string", "NUMBER", "by", "preg_match", "NUMBER", "Same", "with", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "confused", "php", "If", "you", "re", "into", "parsing", "dates", "with", "regexps", "preg_match", "TAG", "d", "NUMBER", "TAG", "d", "NUMBER", "TAG", "d", "NUMBER", "_", "TAG", "d", "NUMBER", "TAG", "d", "NUMBER", "TAG", "d", "NUMBER", "NUMBER", "TAG", "d", "NUMBER", "releaseName", "matches", "But", "way", "better", "NUMBER", "DateTime", "createFromFormat", "Y", "m", "d_H", "i", "s", "NUMBER", "u", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "BTW", "a", "REAL", "regexp", "for", "parsing", "a", "datetime", "would", "be", "IMPOSSIBLE", "But", "when", "you", "access", "folder", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "via", "ftp", "or", "http", "what", "be", "url", "you", "type", "It", "not", "friendly", "NUMBER", "Well", "LINK", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "laughing", "String", "NUMBER", "be", "easy", "for", "compare", "it", "very", "important", "wit", "a", "version", "label", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "be", "exactly", "as", "easy", "to", "compare", "for", "a", "machine", "and", "easier", "to", "compare", "for", "a", "human", "eye", "NUMBER", "If", "you", "want", "easy", "for", "create", "a", "date", "time", "object", "why", "you", "make", "a", "custom", "task", "deploy", "release", "to", "make", "timestamp", "as", "version", "label", "Thanks", "for", "the", "suggestion", "that", "s", "what", "I", "did", "see", "my", "first", "comment", "NUMBER", "wink", "My", "proposal", "was", "make", "the", "default", "format", "more", "human", "friendly", "for", "accessibility", "reasons", "while", "at", "the", "same", "time", "narrowing", "potential", "race", "conditions", "but", "that", "s", "another", "story", "NUMBER", "oanhnn", "i", "think", "it", "s", "good", "for", "DX", "by", "more", "friendly", "NUMBER", "What", "be", "you", "think", "Whats", "cons", "Y", "m", "d_H", "i", "s", "YmdHis", "human", "friendly", "hard", "to", "read", "break", "bc", "no", "break", "bc", "oanhnn", "One", "For", "accessibility", "NUMBER", "Two", "we", "create", "slugs", "for", "SEO", "NUMBER", "be", "a", "perfectly", "valid", "URL", "character", "NUMBER", "Please", "re", "read", "rfc", "NUMBER", "LINK", "NUMBER", "Btw", "I", "seriously", "hope", "you", "do", "not", "publicly", "expose", "your", "release", "paths", "on", "the", "web", "NUMBER", "Three", "great", "seriously", "you", "ll", "win", "a", "few", "millisecs", "when", "comparing", "tens", "of", "thousands", "of", "strings", "NUMBER", "When", "you", "get", "to", "that", "point", "your", "IO", "operations", "will", "take", "several", "orders", "of", "magnitude", "longer", "than", "the", "string", "comparison", "NUMBER", "We", "re", "talking", "about", "a", "web", "application", "deployment", "tool", "here", "not", "a", "game", "engine", "NUMBER", "So", "many", "bikes", "were", "shed", "NUMBER", "bicyclist", "Really", "guys", "NUMBER", "Release", "number", "needed", "only", "for", "developers", "who", "watching", "release", "lists", "NUMBER", "I", "that", "case", "Y", "m", "d_H", "i", "s", "be", "better", "NUMBER", "Release", "path", "should", "not", "be", "a", "part", "of", "URL", "NUMBER", "And", "how", "often", "you", "compare", "release", "dates", "Guys", "vote", "for", "Y", "m", "d_H", "i", "s", "with", "and", "for", "YmdHis", "with", "NUMBER", "Please", "do", "not", "insert", "colons", "in", "auto", "generate", "filenames", "NUMBER", "These", "characters", "will", "produce", "several", "problem", "on", "different", "systems", "Especially", "Windows", "struggle", "with", "some", "filenames", "but", "these", "characters", "run", "into", "several", "problem", "on", "Unix", "Systems", "also", "NUMBER", "The", "following", "characters", "be", "reserved", "on", "Win", "TAG", "greater", "than", "colon", "double", "quote", "forward", "slash", "backslash", "vertical", "bar", "or", "pipe", "question", "mark", "asterisk", "Anyway", "the", "readability", "of", "the", "filename", "be", "learning", "thing", "at", "first", "NUMBER", "And", "I", "struggle", "more", "with", "a", "too", "human", "readability", "format", "in", "some", "programmatic", "cases", "NUMBER", "So", "my", "vote", "be", "definitely", "against", "the", "new", "format", "because", "it", "will", "cause", "several", "problem", "which", "we", "can", "t", "see", "in", "a", "first", "glance", "although", "I", "like", "readable", "formats", "NUMBER", "But", "not", "in", "cases", "which", "usually", "be", "not", "review", "by", "humans", "all", "the", "time", "NUMBER", "And", "to", "bring", "a", "knockout", "argument", "other", "solutions", "like", "capistrano", "use", "the", "current", "format", "as", "well", "NUMBER", "Agree", "i", "think", "we", "can", "leave", "current", "YmdHis", "format", "and", "implement", "something", "like", "a", "new", "command", "for", "deb", "which", "will", "be", "showing", "release", "lists", "in", "human", "friendly", "format", "sh", "dep", "release", "Path", "Date", "Author", "Broken", "NUMBER", "NUMBER", "elfet", "That", "s", "a", "really", "good", "proposal", "I", "like", "it", "and", "it", "fix", "the", "problem", "in", "a", "much", "cleaner", "way", "NUMBER", "Furthermore", "it", "can", "carry", "some", "more", "information", "as", "you", "already", "mention", "NUMBER", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "or", "xx", "Yes", "it", "work", "NUMBER", "i", "have", "change", "env", "typo", "NUMBER", "_webroot", "web", "You", "have", "different", "ways", "to", "setup", "a", "TYPO", "NUMBER", "project", "copy", "the", "sources", "put", "it", "into", "the", "git", "repository", "or", "install", "the", "sources", "via", "composer", "NUMBER", "But", "yes", "this", "deploy", "NUMBER", "php", "file", "should", "cover", "the", "most", "setup", "types", "NUMBER", "Thanks", "for", "merge", "NUMBER", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "NUMBER", "The", "underlying", "SFTP", "library", "allows", "for", "multiple", "authentication", "methods", "so", "I", "ve", "add", "a", "new", "setting", "AUTH_BY_IDENTITY_FILE_AND_PASSWORD", "NUMBER", "I", "would", "imagine", "a", "better", "way", "to", "handle", "this", "would", "be", "to", "queue", "up", "each", "authentication", "method", "in", "an", "array", "and", "pass", "them", "as", "the", "argument", "for", "the", "sftp", "login", "call", "but", "I", "felt", "that", "I", "had", "too", "much", "potential", "to", "create", "breakage", "so", "instead", "I", "created", "an", "additional", "method", "NUMBER", "To", "use", "php", "server", "staging", "example", "NUMBER", "com", "NUMBER", "user", "username", "identityFileAndPassword", "Arguments", "be", "the", "NUMBER", "identityFile", "argument", "the", "password", "argument", "NUMBER", "It", "will", "assume", "those", "defaults", "if", "nothing", "be", "pass", "NUMBER", "stage", "staging", "env", "branch", "staging", "env", "deploy_path", "var", "www", "html", "staging", "NUMBER", "It", "be", "very", "cool", "NUMBER", "We", "need", "some", "unit", "test", "NUMBER", "I", "just", "submitted", "a", "pull", "request", "for", "the", "docs", "but", "be", "unclear", "on", "how", "to", "configure", "the", "unit", "test", "NUMBER", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "master", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "Verify", "the", "remote", "site", "before", "applying", "change", "NUMBER", "Steps", "to", "reproduce", "Remote", "site", "has", "local", "change", "Deployer", "ignores", "them", "Customer", "change", "be", "gone", "Solution", "TAG", "toBool", "if", "isVerbose", "writeln", "TAG", "No", "GIT", "repository", "find", "skipping", "NUMBER", "TAG", "return", "cmd", "git", "C", "NUMBER", "escapeshellarg", "env", "current", "NUMBER", "try", "update", "index", "run", "cmd", "NUMBER", "fetch", "run", "cmd", "NUMBER", "update", "index", "q", "ignore", "submodules", "refresh", "catch", "RuntimeException", "e", "writeln", "TAG", "Could", "not", "update", "index", "NUMBER", "TAG", "die", "NUMBER", "try", "check", "unstaged", "run", "cmd", "NUMBER", "diff", "file", "quiet", "ignore", "submodules", "Disallow", "uncommitted", "change", "in", "the", "index", "run", "cmd", "NUMBER", "diff", "index", "cached", "quiet", "HEAD", "ignore", "submodules", "catch", "RuntimeException", "e", "writeln", "TAG", "Remote", "site", "has", "change", "file", "NUMBER", "TAG", "die", "NUMBER", "try", "check", "for", "unpushed", "commit", "branch", "env", "branch", "result", "run", "cmd", "NUMBER", "log", "pretty", "format", "h", "s", "origin", "NUMBER", "branch", "NUMBER", "NUMBER", "NUMBER", "branch", "output", "array_filter", "result", "toArray", "if", "output", "writeln", "TAG", "You", "have", "NUMBER", "count", "output", "NUMBER", "unpushed", "commit", "s", "NUMBER", "TAG", "write", "implode", "NUMBER", "PHP_EOL", "output", "NUMBER", "PHP_EOL", "die", "NUMBER", "catch", "RuntimeException", "e", "writeln", "TAG", "Could", "not", "compare", "branch", "with", "origin", "branch", "NUMBER", "TAG", "die", "NUMBER", "Something", "like", "that", "NUMBER", "I", "keep", "update", "the", "code", "in", "the", "description", "from", "time", "to", "time", "NUMBER", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "master", "Local", "Machine", "OS", "OSX", "NUMBER", "Remote", "Machine", "OS", "Debian", "NUMBER", "Description", "Is", "there", "a", "way", "for", "the", "download", "function", "to", "handle", "directories", "In", "addition", "to", "my", "deployment", "tasks", "I", "also", "created", "two", "tasks", "in", "order", "to", "sync", "the", "markdown", "file", "the", "users", "created", "with", "my", "deployed", "CMS", "NUMBER", "pages", "upload", "works", "perfectly", "but", "pages", "download", "do", "not", "at", "all", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "user", "me", "password", "stage", "production", "env", "deploy_path", "path", "to", "domain", "set", "repository", "my", "server", "repository", "NUMBER", "git", "set", "shared_dirs", "user", "pages", "logs", "set", "writable_dirs", "cache", "logs", "images", "user", "pages", "Tasks", "task", "pages", "upload", "function", "upload", "user", "pages", "deploy_path", "shared", "user", "pages", "task", "pages", "download", "function", "download", "user", "pages", "deploy_path", "shared", "user", "pages", "Output", "log", "NUMBER", "bin", "dep", "pages", "download", "production", "vvv", "master", "Executing", "task", "pages", "download", "on", "prod", "PHP", "Warning", "fopen", "user", "pages", "fail", "to", "open", "stream", "Is", "a", "directory", "in", "Users", "loranger", "Developer", "myproject", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SFTP", "NUMBER", "php", "on", "line", "NUMBER", "Warning", "fopen", "user", "pages", "fail", "to", "open", "stream", "Is", "a", "directory", "in", "Users", "loranger", "Developer", "myproject", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SFTP", "NUMBER", "php", "on", "line", "NUMBER", "RuntimeException", "Why", "not", "use", "rsync", "recipe", "LINK", "I", "did", "consider", "that", "s", "the", "reason", "why", "the", "require", "remains", "on", "top", "of", "the", "file", "but", "there", "be", "no", "way", "to", "call", "a", "task", "from", "another", "task", "pages", "download", "function", "env", "rsync_src", "deploy_path", "shared", "user", "pages", "env", "rsync_dest", "user", "pages", "call_task", "rsync", "Yes", "that", "s", "an", "explanation", "I", "often", "read", "in", "the", "issue", "NUMBER", "Anyway", "what", "about", "my", "initial", "request", "What", "do", "you", "think", "about", "make", "download", "function", "work", "seamless", "with", "file", "and", "folders", "as", "the", "upload", "function", "do", "Sure", "I", "get", "it", "Rsync", "be", "an", "excellent", "recipe", "to", "remote", "sync", "anything", "NUMBER", "But", "I", "do", "talk", "about", "two", "low", "level", "methods", "shipped", "with", "depoyer", "download", "and", "its", "opposite", "upload", "NUMBER", "They", "be", "supposed", "to", "do", "the", "same", "thing", "but", "one", "for", "down", "stream", "and", "one", "for", "up", "stream", "NUMBER", "Their", "signature", "be", "the", "same", "but", "one", "can", "deal", "with", "folder", "when", "the", "other", "cannot", "NUMBER", "That", "s", "why", "I", "opened", "this", "issue", "May", "you", "consider", "to", "make", "those", "two", "function", "more", "consistent", "NUMBER", "for", "that", "NUMBER", "I", "think", "the", "API", "should", "be", "consistent", "NUMBER", "More", "to", "that", "rsync", "be", "not", "easy", "to", "run", "on", "windows", "systems", "NUMBER", "I", "can", "manage", "everything", "else", "with", "just", "git", "bash", "but", "rsync", "be", "not", "include", "NUMBER", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "Create", "a", "release", "only", "if", "there", "any", "change", "in", "project", "s", "VCS", "NUMBER", "Well", "this", "behavior", "could", "be", "optional", "Or", "even", "default", "along", "with", "fallback", "force", "option", "user", "still", "has", "choice", "NUMBER", "In", "my", "case", "I", "ve", "considered", "deployer", "for", "some", "kind", "of", "continuous", "deployment", "e", "NUMBER", "g", "NUMBER", "via", "cron", "on", "certain", "automatically", "provisioned", "nodes", "it", "s", "possibly", "not", "the", "best", "practice", "but", "it", "s", "quite", "reliable", "NUMBER", "Another", "case", "accidental", "run", "of", "deploy", "task", "e", "NUMBER", "g", "NUMBER", "by", "different", "users", "NUMBER", "In", "both", "cases", "rollback", "task", "becomes", "quite", "less", "usable", "you", "should", "run", "it", "twice", "or", "more", "until", "the", "change", "be", "really", "revert", "or", "unusable", "at", "all", "in", "case", "the", "number", "of", "release", "created", "without", "VCS", "change", "reaches", "the", "number", "keep_releases", "value", "NUMBER", "I", "ll", "try", "my", "best", "to", "contribute", "this", "functionality", "but", "I", "can", "t", "promise", "it", "due", "to", "lack", "of", "time", "Thank", "you", "for", "this", "tool", "it", "looks", "so", "tasty", "I", "think", "that", "this", "be", "a", "good", "feature", "when", "there", "be", "no", "change", "give", "a", "warning", "that", "nothing", "be", "going", "to", "be", "deployed", "and", "tell", "the", "user", "that", "he", "could", "deploy", "anyway", "putting", "the", "force", "option", "Let", "me", "check", "how", "to", "do", "this", "NUMBER", "while", "trying", "to", "use", "deployer", "and", "while", "use", "dep", "deploy", "vvv", "dev", "I", "notice", "this", "error", "during", "deploy", "writeable", "Output", "of", "deploy", "writeable", "Executing", "task", "deploy", "writable", "on", "test_", "NUMBER", "ps", "axo", "user", "comm", "grep", "E", "a", "pache", "h", "ttpd", "_", "www", "w", "ww", "data", "n", "ginx", "grep", "v", "root", "head", "NUMBER", "cut", "d", "f", "NUMBER", "TAG", "cd", "var", "www", "main_site", "release", "NUMBER", "chmod", "NUMBER", "NUMBER", "true", "TAG", "setPrivate", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "NUMBER", "In", "this", "PR", "Using", "trim", "function", "to", "resolve", "issue", "NUMBER", "Change", "to", "use", "bin", "git", "in", "checking", "git", "cache", "feature", "block", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Ubuntu", "NUMBER", "Remote", "Machine", "OS", "Ubuntu", "NUMBER", "Description", "GIT", "says", "the", "directory", "be", "given", "but", "it", "isn", "t", "NUMBER", "The", "deploy", "target", "be", "just", "new", "and", "there", "be", "no", "such", "directory", "NUMBER", "Steps", "to", "reproduce", "Complete", "new", "deployer", "project", "as", "suggested", "in", "your", "documentation", "NUMBER", "No", "directory", "exists", "Owner", "of", "the", "target", "directory", "be", "the", "correct", "user", "NUMBER", "Content", "of", "deploy", "NUMBER", "php", "php", "TAG", "user", "ME", "forwardAgent", "You", "can", "use", "identity", "key", "ssh", "config", "or", "username", "password", "to", "auth", "on", "the", "server", "NUMBER", "stage", "production", "env", "deploy_path", "srv", "www", "test", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "Specify", "the", "repository", "from", "which", "to", "download", "your", "project", "s", "code", "NUMBER", "The", "server", "needs", "to", "have", "git", "install", "for", "this", "to", "work", "NUMBER", "If", "you", "re", "not", "use", "a", "forward", "agent", "then", "the", "server", "has", "to", "be", "able", "to", "clone", "your", "project", "from", "this", "repository", "NUMBER", "set", "repository", "git", "config", "get", "z", "remote", "NUMBER", "origin", "NUMBER", "url", "Output", "log", "bin", "dep", "deploy", "vvv", "prod", "Executing", "task", "deploy", "prepare", "on", "prod", "echo", "NUMBER", "TAG", "if", "d", "srv", "www", "test", "then", "mkdir", "p", "srv", "www", "test", "fi", "if", "L", "srv", "www", "test", "current", "d", "srv", "www", "test", "current", "then", "echo", "true", "fi", "cd", "srv", "www", "test", "if", "d", "release", "then", "mkdir", "release", "fi", "cd", "srv", "www", "test", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "prod", "Ok", "NUMBER", "s", "NUMBER", "ms", "Executing", "task", "deploy", "release", "on", "prod", "mkdir", "srv", "www", "test", "release", "NUMBER", "cd", "srv", "www", "test", "if", "h", "release", "then", "rm", "release", "fi", "ln", "s", "srv", "www", "test", "release", "NUMBER", "srv", "www", "test", "release", "do", "on", "prod", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "update_code", "on", "prod", "which", "git", "TAG", "git", "version", "TAG", "find", "srv", "www", "test", "release", "maxdepth", "NUMBER", "mindepth", "NUMBER", "type", "d", "TAG", "readlink", "srv", "www", "test", "release", "TAG", "usr", "bin", "git", "clone", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "ME", "foo", "NUMBER", "git", "srv", "www", "test", "release", "NUMBER", "NUMBER", "NUMBER", "RuntimeException", "fatal", "destination", "path", "foo", "already", "exists", "and", "be", "not", "an", "empty", "directory", "NUMBER", "Oh", "yeah", "I", "forgot", "NUMBER", "This", "works", "very", "well", "when", "I", "be", "on", "the", "server", "same", "user", "NUMBER", "Submodule", "srv", "wp", "content", "plugins", "wp", "plugin", "readme", "parser", "LINK", "Plugin", "Readme", "Parser", "NUMBER", "git", "registered", "for", "path", "srv", "wp", "content", "plugins", "wp", "plugin", "readme", "parser", "Cloning", "into", "srv", "wp", "content", "plugins", "wp", "plugin", "readme", "parser", "NUMBER", "remote", "Counting", "objects", "NUMBER", "do", "NUMBER", "remote", "Total", "NUMBER", "delta", "NUMBER", "reused", "NUMBER", "delta", "NUMBER", "pack", "reused", "NUMBER", "Unpacking", "objects", "NUMBER", "NUMBER", "NUMBER", "do", "NUMBER", "Checking", "connectivity", "NUMBER", "do", "NUMBER", "Submodule", "path", "srv", "wp", "content", "plugins", "wp", "plugin", "readme", "parser", "checked", "out", "NUMBER", "ed", "NUMBER", "bf", "NUMBER", "d", "NUMBER", "a", "NUMBER", "e", "NUMBER", "e", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "a", "NUMBER", "cc", "NUMBER", "It", "s", "correctly", "cloned", "NUMBER", "Exit", "code", "be", "NUMBER", "zero", "NUMBER", "srv", "www", "test", "release", "NUMBER", "tree", "L", "NUMBER", "NUMBER", "bin", "composer", "NUMBER", "json", "composer", "NUMBER", "lock", "srv", "wp", "cli", "NUMBER", "yml", "Where", "can", "I", "look", "up", "the", "deploy", "task", "and", "debug", "it", "down", "I", "don", "t", "find", "the", "part", "that", "sends", "the", "git", "clone", "to", "the", "server", "NUMBER", "Here", "be", "the", "problem", "I", "reword", "the", "title", "later", "NUMBER", "I", "did", "this", "to", "dynamically", "resolve", "the", "git", "url", "set", "repository", "git", "config", "get", "z", "remote", "NUMBER", "origin", "NUMBER", "url", "without", "zero", "char", "will", "break", "this", "too", "set", "repository", "git", "config", "get", "remote", "NUMBER", "origin", "NUMBER", "url", "The", "command", "send", "to", "the", "server", "contains", "either", "a", "null", "character", "or", "a", "new", "line", "like", "this", "sh", "usr", "bin", "git", "clone", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "rmp", "cb", "NUMBER", "git", "srv", "www", "test", "release", "NUMBER", "NUMBER", "NUMBER", "or", "zero", "char", "usr", "bin", "git", "clone", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "rmp", "cb", "NUMBER", "git", "NUMBER", "srv", "www", "test", "release", "NUMBER", "NUMBER", "NUMBER", "Both", "make", "the", "command", "end", "after", "the", "remote", "URL", "NUMBER", "As", "a", "workaround", "I", "now", "do", "this", "set", "repository", "trim", "git", "config", "get", "remote", "NUMBER", "origin", "NUMBER", "url", "If", "you", "like", "keep", "this", "issue", "open", "and", "move", "the", "trim", "for", "the", "repository", "url", "in", "your", "libs", "NUMBER", "Thank", "sourcerer", "mike", "It", "will", "resolve", "with", "NUMBER", "NUMBER", "Please", "consider", "provide", "the", "deployer", "NUMBER", "phar", "file", "over", "HTTPS", "NUMBER", "Currently", "the", "recommended", "form", "of", "installation", "be", "curl", "L", "LINK", "o", "deployer", "NUMBER", "phar", "mv", "deployer", "NUMBER", "phar", "usr", "local", "bin", "dep", "chmod", "x", "usr", "local", "bin", "dep", "While", "this", "command", "can", "be", "vulnerable", "to", "a", "MITM", "attack", "NUMBER", "If", "you", "can", "I", "would", "love", "to", "see", "the", "deployer", "NUMBER", "org", "website", "to", "provide", "HTTPS", "which", "be", "easy", "and", "free", "with", "the", "Let", "s", "Encrypt", "project", "NUMBER", "Additionally", "provide", "a", "checksumming", "hash", "or", "some", "form", "of", "signature", "would", "be", "greatly", "appreciated", "NUMBER", "I", "currently", "cannot", "be", "certain", "that", "the", "pharchive", "I", "be", "downloading", "be", "actually", "what", "you", "intended", "to", "provide", "NUMBER", "Thanks", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "I", "be", "wondering", "if", "there", "be", "possibility", "like", "in", "Capistrano", "to", "separate", "Deployer", "s", "config", "for", "different", "environments", "for", "example", "on", "a", "production", "server", "I", "d", "like", "to", "have", "set", "custom", "php", "bin", "path", "onlyOn", "method", "doesn", "t", "work", "with", "env", "disable", "deploy", "writable", "task", "lacks", "of", "sudo", "I", "would", "have", "to", "rewrite", "whole", "task", "just", "to", "specify", "onlyOn", "method", "In", "Capistrano", "I", "would", "just", "set", "this", "in", "config", "file", "for", "specific", "environment", "and", "everything", "would", "just", "works", "NUMBER", "What", "about", "here", "set", "custom", "php", "bin", "path", "onlyOn", "method", "doesn", "t", "work", "with", "env", "Can", "you", "try", "php", "set", "special", "environment", "variable", "server", "svr", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "env", "php", "bin", "usr", "bin", "php", "set", "special", "environment", "variable", "use", "php", "NUMBER", "server", "svr", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "env", "php", "bin", "usr", "local", "php", "NUMBER", "bin", "php", "don", "t", "set", "special", "environment", "variable", "Deployer", "will", "use", "default", "environment", "variable", "Using", "which", "php", "server", "svr", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "env", "branch", "develop", "Thanks", "It", "works", "great", "NUMBER", "But", "sadly", "problem", "NUMBER", "still", "unresolve", "about", "handle", "tasks", "depending", "on", "environments", "let", "s", "say", "different", "deploy", "strategy", "NUMBER", "I", "could", "define", "deploy", "production", "and", "deploy", "staging", "tasks", "but", "then", "I", "would", "duplicate", "myself", "Deployment", "would", "look", "like", "dep", "deploy", "production", "production", "task", "name", "body", "could", "be", "change", "in", "task", "name", "body", "null", "and", "return", "task", "reference", "when", "you", "call", "it", "without", "body", "so", "you", "can", "do", "php", "task", "deploy", "writable", "onlyOn", "dev", "staging", "luke", "NUMBER", "Sadly", "this", "solution", "doesn", "t", "work", "NUMBER", "Deployer", "immediately", "stops", "without", "any", "output", "even", "in", "debug", "mode", "NUMBER", "adriandmitroca", "elfet", "it", "was", "a", "proposal", "sorry", "for", "misunderstanding", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "NUMBER", "NUMBER", "Added", "helper", "tasks", "artisan", "migrate", "artisan", "migrate", "force", "artisan", "migrate", "rollback", "artisan", "migrate", "rollback", "force", "artisan", "migrate", "status", "artisan", "migrate", "status", "artisan", "db", "seed", "artisan", "db", "seed", "force", "artisan", "cache", "clear", "artisan", "cache", "clear", "artisan", "config", "cache", "artisan", "config", "cache", "deploy", "public_disk", "Create", "symlink", "public", "storage", "to", "storage", "app", "public", "NUMBER", "I", "m", "not", "familiar", "with", "the", "code", "but", "perhaps", "it", "would", "be", "a", "viable", "option", "to", "map", "all", "artisan", "commands", "automatically", "eg", "NUMBER", "dep", "artisan", "command", "arg", "NUMBER", "arg", "NUMBER", "option", "bin", "php", "deploy_path", "current", "artisan", "command", "arg", "NUMBER", "arg", "NUMBER", "option", "NUMBER", "This", "would", "reduce", "boilerplate", "and", "people", "can", "run", "artisan", "commands", "on", "the", "external", "server", "easy", "eg", "NUMBER", "artisan", "migrate", "prepend", "artisan", "db", "seed", "class", "UserSeeder", "etc", "NUMBER", "The", "same", "could", "apply", "for", "Drupal", "drush", "Magento", "magerun", "Wordpress", "wp", "cli", "Symfony", "etc", "NUMBER", "It", "would", "also", "make", "the", "argument", "about", "force", "invalid", "as", "you", "can", "do", "just", "dep", "artisan", "migrate", "force", "NUMBER", "I", "don", "t", "think", "that", "use", "force", "by", "default", "be", "a", "good", "idea", "NUMBER", "This", "way", "you", "could", "overwrite", "important", "data", "by", "mistake", "NUMBER", "Secondly", "what", "do", "you", "think", "about", "run", "php", "artisan", "migrate", "on", "every", "deployment", "Application", "should", "not", "be", "deployed", "with", "outdate", "database", "scheme", "because", "it", "could", "case", "unnecessary", "exception", "NUMBER", "NUMBER", "Adding", "force", "just", "skips", "the", "warning", "on", "production", "NUMBER", "It", "doesn", "t", "overwrite", "anything", "else", "NUMBER", "Running", "it", "without", "force", "just", "doesn", "t", "work", "on", "production", "NUMBER", "Not", "ever", "NUMBER", "NUMBER", "Either", "you", "run", "it", "automatically", "without", "force", "and", "it", "doesn", "t", "have", "any", "effect", "or", "you", "run", "it", "with", "force", "and", "you", "have", "the", "potential", "to", "run", "unwanted", "migrations", "NUMBER", "So", "_that_", "be", "dangerous", "NUMBER", "Running", "it", "should", "be", "a", "conscious", "decision", "imho", "NUMBER", "oanhnn", "You", "have", "also", "miss", "route", "cache", "command", "could", "be", "triggered", "just", "after", "config", "cache", "NUMBER", "adriandmitroca", "I", "was", "try", "route", "cache", "command", "but", "i", "see", "it", "has", "a", "problem", "NUMBER", "LogicException", "Unable", "to", "prepare", "route", "for", "serialization", "NUMBER", "Uses", "Closure", "NUMBER", "May", "be", "route", "cache", "not", "support", "Closure", "NUMBER", "I", "think", "it", "will", "throw", "error", "when", "deploy", "NUMBER", "barryvdh", "I", "can", "make", "dep", "artisan", "TAG", "TAG", "TAG", "but", "NUMBER", "The", "options", "can", "use", "for", "deployer", "or", "artisan", "that", "be", "not", "clear", "and", "may", "be", "have", "many", "error", "NUMBER", "NUMBER", "Added", "this", "task", "to", "deploy", "task", "will", "more", "difficult", "NUMBER", "I", "think", "everyone", "should", "use", "custom", "task", "by", "themself", "that", "be", "better", "NUMBER", "Looks", "good", "to", "me", "NUMBER", "Not", "sure", "if", "this", "belongs", "here", "but", "perhaps", "it", "s", "helpful", "to", "add", "a", "note", "about", "reloading", "PHP", "FPM", "especially", "because", "a", "lot", "of", "Laravel", "sites", "be", "run", "on", "Forge", "which", "doesn", "t", "refresh", "the", "symlinks", "automatically", "NUMBER", "Forge", "recipe", "which", "you", "can", "run", "on", "your", "servers", "in", "the", "Forge", "panel", "to", "allow", "php", "NUMBER", "fm", "to", "be", "run", "without", "sudo", "password", "echo", "forge", "ALL", "NOPASSWD", "usr", "sbin", "service", "php", "NUMBER", "fpm", "reload", "etc", "sudoers", "NUMBER", "d", "php", "fpm", "Command", "to", "run", "after", "the", "release", "symlink", "sudo", "usr", "sbin", "service", "php", "NUMBER", "fpm", "reload", "Although", "this", "be", "general", "and", "similar", "for", "PHP", "NUMBER", "Is", "there", "a", "nice", "way", "to", "extend", "the", "exist", "laravel", "recipe", "I", "would", "like", "to", "add", "route", "cache", "as", "I", "think", "it", "should", "always", "be", "there", "I", "don", "t", "use", "closure", "routes", "NUMBER", "also", "I", "want", "auto", "migrate", "NUMBER", "Maybe", "those", "can", "be", "options", "somehow", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "Add", "header", "comment", "fixer", "to", "NUMBER", "php_cs", "file", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "master", "Local", "Machine", "OS", "Win", "NUMBER", "test", "also", "with", "vagrant", "ubuntu", "Remote", "Machine", "OS", "ubuntu", "on", "vagrant", "vs", "ubuntu", "on", "dreamhost", "Description", "I", "be", "trying", "to", "_translate_", "my", "old", "deployment", "script", "to", "deployer", "NUMBER", "In", "a", "specific", "point", "i", "need", "to", "run", "on", "deployment", "server", "php", "composer", "create", "project", "prefer", "dist", "cakephp", "app", "home", "prod", "release", "NUMBER", "stars", "be", "there", "to", "hide", "sensible", "informations", "Running", "command", "use", "deployer", "with", "dev", "_vagrant", "ubuntu_", "machine", "as", "remote", "all", "be", "ok", "there", "Running", "command", "use", "ssh", "PuTTY", "or", "KiTTY", "copy", "and", "paste", "command", "in", "the", "terminal", "connected", "with", "the", "production", "_dreamhost", "ubuntu_", "machine", "all", "be", "fine", "Running", "command", "use", "deployer", "with", "production", "_dreamhost", "ubuntu_", "machine", "as", "remote", "the", "same", "use", "with", "pure", "ssh", "i", "get", "a", "runtime", "exception", "after", "a", "few", "seconds", "NUMBER", "NUMBER", "in", "avg", "with", "different", "composer", "command", "output", "at", "each", "run", "sometimes", "it", "install", "something", "more", "sometimes", "something", "less", "NUMBER", "this", "be", "random", "not", "the", "same", "point", "every", "time", "Killed", "task", "not", "completed", "Steps", "to", "reproduce", "Content", "of", "deploy", "NUMBER", "php", "php", "NUMBER", "run", "bin", "composer", "create", "project", "prefer", "dist", "cakephp", "app", "release_path", "NUMBER", "Output", "log", "RuntimeException", "bash", "line", "NUMBER", "NUMBER", "Killed", "usr", "local", "php", "NUMBER", "bin", "php", "home", "prod", "composer", "NUMBER", "phar", "create", "project", "prefer", "dist", "cakephp", "app", "home", "prod", "release", "NUMBER", "Exception", "trace", "at", "deployer", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "deployer", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "deployer", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "deployer", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "deployer", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "deployer", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "deployer", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "deployer", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "deployer", "bin", "dep", "NUMBER", "Verbose", "output", "log", "This", "be", "another", "run", "with", "vvv", "on", "composer", "RuntimeException", "Checking", "CA", "file", "etc", "ssl", "certs", "ca", "certificates", "NUMBER", "crt", "Downloading", "LINK", "Writing", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "package", "NUMBER", "js", "on", "into", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "NUMBER", "json", "from", "cache", "Downloading", "LINK", "NUMBER", "NUMBER", "NUMBER", "f", "NUMBER", "f", "NUMBER", "bb", "NUMBER", "aadd", "NUMBER", "fc", "NUMBER", "d", "NUMBER", "be", "NUMBER", "cb", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ea", "NUMBER", "e", "NUMBER", "d", "NUMBER", "ebec", "NUMBER", "ae", "NUMBER", "json", "Writing", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "NUMBER", "json", "into", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "archived", "NUMBER", "json", "from", "cache", "Downloading", "LINK", "latest", "NUMBER", "f", "NUMBER", "b", "NUMBER", "a", "NUMBER", "bbb", "NUMBER", "d", "NUMBER", "fb", "NUMBER", "cb", "NUMBER", "d", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "d", "NUMBER", "ae", "NUMBER", "c", "NUMBER", "d", "NUMBER", "fc", "NUMBER", "json", "Writing", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "latest", "NUMBER", "json", "into", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "provider", "cakephp", "app", "NUMBER", "json", "from", "cache", "Installing", "cakephp", "app", "NUMBER", "Installing", "cakephp", "app", "NUMBER", "Reading", "home", "NUMBER", "composer", "cache", "file", "cakephp", "app", "NUMBER", "c", "NUMBER", "c", "NUMBER", "f", "NUMBER", "f", "NUMBER", "d", "NUMBER", "f", "NUMBER", "e", "NUMBER", "a", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "zip", "from", "cache", "Loading", "from", "cache", "Extracting", "archive", "Executing", "command", "CWD", "unzip", "home", "prod", "release", "NUMBER", "NUMBER", "d", "NUMBER", "e", "NUMBER", "e", "NUMBER", "d", "NUMBER", "fa", "NUMBER", "f", "NUMBER", "b", "NUMBER", "bf", "NUMBER", "d", "NUMBER", "d", "home", "prod", "release", "NUMBER", "vendor", "composer", "c", "NUMBER", "e", "NUMBER", "ba", "NUMBER", "chmod", "R", "u", "w", "home", "prod", "release", "NUMBER", "vendor", "composer", "c", "NUMBER", "e", "NUMBER", "ba", "NUMBER", "bash", "line", "NUMBER", "NUMBER", "Killed", "usr", "local", "php", "NUMBER", "bin", "php", "home", "prod", "composer", "NUMBER", "phar", "create", "project", "prefer", "dist", "cakephp", "app", "home", "prod", "release", "NUMBER", "n", "vvv", "Again", "another", "one", "RuntimeException", "Checking", "CA", "file", "etc", "ssl", "certs", "ca", "certificates", "NUMBER", "crt", "Downloading", "LINK", "Writing", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "package", "NUMBER", "js", "on", "into", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "NUMBER", "json", "from", "cache", "Downloading", "LINK", "NUMBER", "NUMBER", "NUMBER", "b", "NUMBER", "e", "NUMBER", "d", "NUMBER", "e", "NUMBER", "a", "NUMBER", "f", "NUMBER", "b", "NUMBER", "b", "NUMBER", "f", "NUMBER", "e", "NUMBER", "acf", "NUMBER", "fd", "NUMBER", "adb", "NUMBER", "ea", "NUMBER", "e", "NUMBER", "f", "NUMBER", "json", "Writing", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "NUMBER", "json", "into", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "NUMBER", "NUMBER", "json", "from", "cache", "Reading", "home", "NUMBER", "composer", "cache", "repo", "https", "packagist", "NUMBER", "org", "p", "provider", "archived", "NUMBER", "json", "from", "cache", "bash", "line", "NUMBER", "NUMBER", "Killed", "usr", "local", "php", "NUMBER", "bin", "php", "home", "prod", "composer", "NUMBER", "phar", "create", "project", "prefer", "dist", "cakephp", "app", "home", "prod", "release", "NUMBER", "n", "vvv", "Any", "suggestions", "Please", "let", "me", "know", "if", "there", "be", "other", "infos", "i", "have", "to", "share", "NUMBER", "PS", "Thanks", "for", "deployer", "NUMBER", "xD", "Can", "you", "try", "run", "a", "task", "php", "task", "test_kill_php", "function", "run", "bin", "php", "r", "sleep", "NUMBER", "echo", "Done", "elfet", "yes", "they", "be", "the", "same", "oanhnn", "i", "will", "try", "it", "in", "a", "few", "hours", "you", "be", "thinking", "to", "some", "execution", "timeout", "NUMBER", "oanhnn", "trying", "your", "suggestion", "i", "get", "dep", "test_kill_php", "production", "Executing", "task", "test_kill_php", "NUMBER", "and", "verbosely", "dep", "test_kill_php", "production", "vvv", "Executing", "task", "test_kill_php", "on", "dreamhost", "NUMBER", "prod", "cd", "home", "prod", "usr", "local", "php", "NUMBER", "bin", "php", "r", "sleep", "NUMBER", "echo", "Done", "TAG", "infos", "NUMBER", "log", "and", "php", "ini", "ini", "NUMBER", "log", "both", "with", "pure", "ssh", "and", "with", "deployer", "same", "parameters", "NUMBER", "UPDATE", "Writing", "the", "comment", "and", "looking", "for", "resource", "usage", "with", "top", "i", "find", "a", "lot", "of", "ssh", "agent", "instances", "due", "to", "NUMBER", "bash_profile", "killing", "that", "instances", "and", "all", "the", "ssh", "agent", "stuff", "now", "deployer", "works", "like", "a", "charm", "NUMBER", "I", "will", "keep", "investigating", "on", "this", "but", "i", "will", "close", "this", "issue", "because", "it", "seems", "something", "wrong", "with", "my", "configuration", "even", "if", "it", "be", "wrong", "ONLY", "with", "deployer", "NUMBER", "If", "a", "better", "analysis", "will", "give", "me", "a", "general", "solution", "explanation", "i", "will", "keep", "you", "update", "NUMBER", "Sorry", "for", "wasting", "your", "time", "NUMBER", "Long", "life", "to", "deployer", "really", "a", "peace", "of", "mind", "for", "devs", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "No", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "NUMBER", "NUMBER", "In", "this", "PR", "Replace", "php", "by", "bin", "php", "Add", "helper", "tasks", "about", "migration", "and", "option", "force", "can", "set", "by", "env", "Resolved", "issue", "about", "shared", "directories", "and", "NUMBER", "env", "file", "Resolved", "issue", "about", "writable", "storage", "directory", "NUMBER", "Tested", "with", "setfacl", "on", "CentOS", "Changed", "order", "task", "deploy", "shared", "and", "deploy", "vendors", "in", "laravel", "recipe", "See", "NUMBER", "Migrate", "be", "useless", "without", "force", "on", "production", "it", "will", "never", "run", "NUMBER", "What", "about", "add", "options", "to", "the", "deploy", "migrate", "force", "command", "if", "that", "s", "possible", "or", "ask", "confirmation", "before", "run", "WIth", "this", "PR", "users", "can", "use", "force", "option", "or", "not", "by", "env", "sever", "prod", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "env", "allow_force_migrate", "false", "server", "dev", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "env", "allow_force_migrate", "true", "Default", "env", "allow_force_migrate", "false", "And", "task", "deploy", "migrate", "be", "not", "include", "deploy", "task", "NUMBER", "I", "understand", "but", "without", "force", "it", "s", "just", "useless", "NUMBER", "I", "ve", "listed", "some", "more", "ideas", "BTW", "if", "you", "feel", "like", "add", "more", "stuff", "LINK", "barryvdh", "Option", "force", "be", "very", "dangerous", "NUMBER", "Users", "have", "to", "control", "it", "NUMBER", "We", "wont", "add", "it", "as", "default", "NUMBER", "elfet", "Please", "review", "and", "merge", "and", "close", "issue", "refs", "I", "understand", "but", "setting", "the", "force", "value", "in", "your", "config", "doesn", "t", "make", "it", "less", "dangerous", "because", "it", "s", "set", "in", "the", "deploy", "file", "so", "you", "still", "run", "it", "accidentally", "Why", "not", "do", "askConfirmation", "Are", "you", "sure", "you", "want", "to", "migrate", "with", "an", "option", "to", "always", "force", "Didn", "t", "you", "put", "that", "in", "the", "function", "NUMBER", "php", "P", "And", "it", "s", "also", "in", "drupal", "NUMBER", "recipe", "NUMBER", "But", "fair", "enough", "NUMBER", "Imho", "the", "force", "flag", "be", "similar", "to", "non", "interactive", "NUMBER", "I", "opened", "and", "issue", "here", "to", "fix", "that", "LINK", "elfet", "barryvdh", "I", "split", "this", "PR", "to", "Bugfix", "This", "PR", "only", "fix", "bug", "of", "laravel", "recipe", "Feature", "PR", "NUMBER", "will", "add", "helper", "task", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "Ubuntu", "NUMBER", "Remote", "Machine", "OS", "Ubuntu", "NUMBER", "Description", "When", "trying", "to", "deploy", "I", "m", "get", "the", "following", "error", "RuntimeException", "Could", "not", "open", "input", "file", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "console", "Steps", "to", "reproduce", "dep", "deploy", "production", "Content", "of", "deploy", "NUMBER", "php", "php", "All", "Deployer", "recipes", "be", "based", "on", "recipe", "common", "NUMBER", "php", "NUMBER", "require", "recipe", "symfony", "NUMBER", "php", "Define", "a", "server", "for", "deployment", "NUMBER", "Let", "s", "name", "it", "prod", "and", "use", "port", "NUMBER", "server", "ec", "NUMBER", "NUMBER", "user", "my_user", "pemFile", "cert", "NUMBER", "pem", "forwardAgent", "You", "can", "use", "identity", "key", "ssh", "config", "or", "username", "password", "to", "auth", "on", "the", "server", "NUMBER", "stage", "production", "env", "deploy_path", "var", "www", "motivis", "assets", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "Specify", "the", "repository", "from", "which", "to", "download", "your", "project", "s", "code", "NUMBER", "The", "server", "needs", "to", "have", "git", "install", "for", "this", "to", "work", "NUMBER", "If", "you", "re", "not", "use", "a", "forward", "agent", "then", "the", "server", "has", "to", "be", "able", "to", "clone", "your", "project", "from", "this", "repository", "NUMBER", "set", "repository", "git", "github", "NUMBER", "com", "myrepo", "sass", "automation", "NUMBER", "git", "set", "bin_dir", "bin", "set", "writable_dirs", "build", "stylesheets", "app", "cache", "app", "logs", "set", "keep_releases", "NUMBER", "task", "reload", "php", "fpm", "function", "run", "sudo", "usr", "sbin", "service", "php", "NUMBER", "fpm", "reload", "after", "deploy", "reload", "php", "fpm", "after", "rollback", "reload", "php", "fpm", "Output", "log", "Executing", "task", "deploy", "prepare", "on", "ec", "NUMBER", "echo", "NUMBER", "TAG", "TAG", "if", "d", "var", "www", "motivis", "assets", "then", "mkdir", "p", "var", "www", "motivis", "assets", "fi", "if", "L", "var", "www", "motivis", "assets", "current", "d", "var", "www", "motivis", "assets", "current", "then", "echo", "true", "fi", "cd", "var", "www", "motivis", "assets", "if", "d", "release", "then", "mkdir", "release", "fi", "cd", "var", "www", "motivis", "assets", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "ec", "NUMBER", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "release", "on", "ec", "NUMBER", "mkdir", "var", "www", "motivis", "assets", "release", "NUMBER", "cd", "var", "www", "motivis", "assets", "if", "h", "release", "then", "rm", "release", "fi", "ln", "s", "var", "www", "motivis", "assets", "release", "NUMBER", "var", "www", "motivis", "assets", "release", "do", "on", "ec", "NUMBER", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "update_code", "on", "ec", "NUMBER", "which", "git", "TAG", "TAG", "git", "version", "TAG", "TAG", "find", "var", "www", "motivis", "assets", "release", "maxdepth", "NUMBER", "mindepth", "NUMBER", "type", "d", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "readlink", "var", "www", "motivis", "assets", "release", "TAG", "TAG", "usr", "bin", "git", "clone", "depth", "NUMBER", "recursive", "q", "git", "github", "NUMBER", "com", "motivislearning", "sass", "automation", "NUMBER", "git", "var", "www", "motivis", "assets", "release", "NUMBER", "NUMBER", "NUMBER", "do", "on", "ec", "NUMBER", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "clear_controllers", "on", "ec", "NUMBER", "rm", "f", "var", "www", "motivis", "assets", "release", "NUMBER", "web", "app_", "NUMBER", "php", "rm", "f", "var", "www", "motivis", "assets", "release", "NUMBER", "web", "config", "NUMBER", "php", "do", "on", "ec", "NUMBER", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "create_cache_dir", "on", "ec", "NUMBER", "if", "d", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "cache", "then", "rm", "rf", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "cache", "fi", "mkdir", "p", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "cache", "chmod", "R", "g", "w", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "cache", "do", "on", "ec", "NUMBER", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "shared", "on", "ec", "NUMBER", "if", "d", "echo", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "logs", "then", "rm", "rf", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "logs", "fi", "mkdir", "p", "var", "www", "motivis", "assets", "shared", "app", "logs", "mkdir", "p", "dirname", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "logs", "ln", "nfs", "var", "www", "motivis", "assets", "shared", "app", "logs", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "logs", "if", "f", "echo", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "config", "parameters", "NUMBER", "yml", "then", "rm", "rf", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "config", "parameters", "NUMBER", "yml", "fi", "if", "d", "echo", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "config", "then", "mkdir", "p", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "config", "fi", "mkdir", "p", "var", "www", "motivis", "assets", "shared", "app", "config", "touch", "var", "www", "motivis", "assets", "shared", "app", "config", "parameters", "NUMBER", "yml", "ln", "nfs", "var", "www", "motivis", "assets", "shared", "app", "config", "parameters", "NUMBER", "yml", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "config", "parameters", "NUMBER", "yml", "do", "on", "ec", "NUMBER", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "assets", "on", "ec", "NUMBER", "find", "var", "www", "motivis", "assets", "release", "NUMBER", "web", "css", "var", "www", "motivis", "assets", "release", "NUMBER", "web", "images", "var", "www", "motivis", "assets", "release", "NUMBER", "web", "js", "exe", "c", "touch", "t", "NUMBER", "dev", "null", "true", "do", "on", "ec", "NUMBER", "Ok", "NUMBER", "ms", "Executing", "task", "deploy", "vendors", "on", "ec", "NUMBER", "if", "hash", "composer", "NUMBER", "dev", "null", "then", "echo", "true", "fi", "TAG", "TAG", "which", "composer", "TAG", "cd", "var", "www", "motivis", "assets", "release", "NUMBER", "export", "SYMFONY_ENV", "prod", "usr", "local", "bin", "composer", "install", "no", "dev", "verbose", "prefer", "dist", "optimize", "autoloader", "no", "progre", "ss", "no", "interaction", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "do", "on", "ec", "NUMBER", "Ok", "NUMBER", "s", "NUMBER", "ms", "Executing", "task", "deploy", "assetic", "dump", "on", "ec", "NUMBER", "which", "php", "TAG", "TAG", "usr", "bin", "php", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "console", "assetic", "dump", "env", "prod", "no", "debug", "RuntimeException", "Could", "not", "open", "input", "file", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "console", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "recipe", "symfony", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "p", "parallel", "Are", "you", "checked", "file", "exist", "var", "www", "motivis", "assets", "release", "NUMBER", "app", "console", "This", "be", "what", "be", "in", "the", "composer", "NUMBER", "lock", "file", "symfony", "console", "NUMBER", "NUMBER", "symfony", "debug", "NUMBER", "NUMBER", "symfony", "expression", "language", "NUMBER", "NUMBER", "Maybe", "you", "use", "the", "wrong", "symfony", "recipe", "because", "the", "given", "information", "about", "your", "symfony", "installation", "allow", "also", "symfony", "NUMBER", "Try", "require", "recipe", "symfony", "NUMBER", "php", "note", "the", "NUMBER", "instead", "of", "require", "recipe", "symfony", "NUMBER", "php", "at", "the", "beginning", "of", "your", "deploy", "NUMBER", "php", "Thanks", "for", "the", "suggestion", "nemoinho", "NUMBER", "While", "that", "didn", "t", "work", "this", "did", "NUMBER", "Adding", "set", "bin_dir", "vendor", "symfony", "did", "work", "NUMBER", "Things", "be", "deploying", "perfectly", "now", "NUMBER", "Thanks", "everyone", "NUMBER", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "ability", "change", "PATH", "variable", "per", "server", "NUMBER", "won", "t", "fix", "this", "issue", "because", "we", "need", "to", "execute", "commands", "that", "execute", "other", "commands", "that", "be", "not", "in", "PATH", "for", "some", "bizarre", "reason", "on", "deployer", "PATH", "usr", "local", "bin", "usr", "bin", "bin", "usr", "bin", "X", "NUMBER", "usr", "games", "usr", "local", "rvm", "bin", "on", "ssh", "PATH", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "global", "bin", "usr", "local", "rvm", "rubies", "ruby", "NUMBER", "bin", "usr", "local", "bin", "usr", "bin", "bin", "usr", "local", "games", "usr", "games", "usr", "local", "pgsql", "bin", "usr", "local", "mysql", "bin", "usr", "local", "nodejs", "bin", "usr", "local", "rvm", "bin", "home", "TAG", "bin", "for", "some", "reason", "there", "be", "more", "directories", "in", "PATH", "when", "connecting", "via", "SSH", "and", "we", "need", "some", "directories", "to", "be", "in", "path", "when", "deploying", "for", "compile", "JS", "and", "CSS", "deployer", "own", "env", "doesn", "t", "cut", "it", "because", "you", "cannot", "inject", "it", "inside", "code", "and", "even", "then", "it", "doesn", "t", "work", "because", "we", "need", "ruby", "and", "ruby", "needs", "it", "s", "binary", "path", "to", "be", "in", "PATH", "yes", "I", "did", "it", "php", "run", "PATH", "path", "php", "NUMBER", "release_path", "yii", "asset", "and", "on", "server", "php", "env", "path", "PATH", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "global", "bin", "usr", "local", "rvm", "rubies", "ruby", "NUMBER", "bin", "but", "it", "s", "quite", "cumblesome", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "OSX", "Remote", "Machine", "OS", "Linux", "Description", "When", "use", "deployer", "NUMBER", "the", "usage", "of", "composer", "NUMBER", "phar", "can", "be", "corrupt", "NUMBER", "Would", "be", "necessary", "to", "add", "an", "release_path", "composer", "NUMBER", "phar", "NUMBER", "So", "it", "would", "look", "like", "this", "env", "bin", "composer", "function", "if", "commandExist", "composer", "composer", "run", "which", "composer", "toString", "if", "empty", "composer", "run", "cd", "release_path", "curl", "sS", "LINK", "php", "composer", "bin", "php", "release_path", "composer", "NUMBER", "phar", "return", "composer", "Fixed", "LINK", "Can", "you", "please", "add", "a", "v", "NUMBER", "version", "Q", "A", "Issue", "Type", "Feature", "Deployer", "Version", "NUMBER", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "Please", "add", "an", "option", "to", "set", "which", "users", "have", "write", "permissions", "in", "the", "TAG", "writable_dirs", "TAG", "NUMBER", "Use", "case", "The", "web", "server", "user", "be", "UserA", "You", "deploy", "use", "userB", "because", "be", "the", "only", "user", "with", "permissions", "to", "connect", "over", "ssh", "NUMBER", "You", "have", "an", "FTP", "user", "UserC", "NUMBER", "With", "the", "current", "option", "you", "can", "t", "set", "permission", "for", "UserC", "NUMBER", "This", "options", "should", "be", "per", "server", "so", "every", "server", "can", "use", "different", "users", "NUMBER", "I", "also", "notice", "that", "deployer", "use", "TAG", "ps", "aux", "grep", "E", "a", "pache", "h", "ttpd", "_", "www", "w", "ww", "data", "n", "ginx", "grep", "v", "root", "head", "NUMBER", "cut", "d", "f", "NUMBER", "TAG", "And", "Symfony", "Docs", "use", "TAG", "ps", "axo", "user", "comm", "grep", "E", "a", "pache", "h", "ttpd", "_", "www", "w", "ww", "data", "n", "ginx", "grep", "v", "root", "head", "NUMBER", "cut", "d", "f", "NUMBER", "TAG", "In", "my", "case", "the", "first", "command", "the", "deployer", "one", "determine", "an", "incorrect", "user", "NUMBER", "I", "think", "your", "case", "you", "should", "custom", "task", "deploy", "writable", "by", "yourself", "NUMBER", "Default", "task", "of", "Deployer", "only", "cover", "common", "cases", "I", "will", "make", "a", "PR", "tonight", "to", "fix", "the", "command", "and", "other", "to", "introduce", "the", "writable", "users", "NUMBER", "I", "not", "agree", "whit", "oanhnn", "other", "deploy", "tool", "like", "capistrano", "fore", "example", "use", "this", "feature", "NUMBER", "WDYT", "I", "think", "your", "pull", "request", "be", "good", "NUMBER", "But", "it", "only", "resolve", "a", "case", "NUMBER", "I", "don", "t", "want", "common", "tasks", "more", "complex", "NUMBER", "We", "re", "thinking", "about", "solution", "use", "group", "for", "set", "writable", "permissions", "in", "version", "NUMBER", "x", "NUMBER", "It", "be", "better", "NUMBER", "Q", "A", "Issue", "Type", "Bug", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "Composer", "package", "aren", "t", "in", "sync", "gperdomor", "Please", "show", "more", "information", "for", "reproduce", "bug", "NUMBER", "oanhnn", "I", "m", "use", "the", "version", "NUMBER", "x", "dev", "but", "run", "TAG", "composer", "update", "TAG", "i", "don", "t", "get", "the", "last", "version", "from", "repository", "i", "need", "the", "change", "introduce", "in", "NUMBER", "elfet", "Can", "your", "check", "synchronization", "in", "packgist", "site", "and", "follow", "this", "issue", "NUMBER", "Any", "progress", "here", "elfet", "solve", "NUMBER", "Thank", "you", "D", "NUMBER", "I", "be", "agree", "NUMBER", "elfet", "Is", "this", "feature", "implement", "by", "commit", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "c", "NUMBER", "d", "NUMBER", "e", "NUMBER", "d", "NUMBER", "f", "All", "in", "all", "it", "looks", "good", "to", "me", "but", "would", "you", "really", "download", "composer", "if", "it", "s", "miss", "I", "think", "that", "should", "only", "rise", "an", "exception", "and", "stop", "deployer", "NUMBER", "And", "maybe", "deployer", "should", "test", "for", "a", "few", "common", "locations", "of", "composer", "before", "doing", "that", "NUMBER", "I", "really", "don", "t", "like", "the", "idea", "that", "a", "application", "loads", "extra", "software", "without", "warning", "or", "at", "least", "an", "info", "NUMBER", "Yep", "unfortunately", "but", "maybe", "we", "can", "keep", "this", "topic", "on", "the", "agenda", "for", "a", "next", "major", "release", "NUMBER", "Users", "can", "void", "a", "download", "composer", "NUMBER", "phar", "by", "a", "task", "upload", "composer", "NUMBER", "phar", "to", "shared", "directory", "and", "env", "bin", "composer", "bin", "php", "deploy_path", "shared", "composer", "NUMBER", "phar", "task", "upload_composer", "function", "upload", "path", "to", "your", "composer", "NUMBER", "phar", "deploy_path", "shared", "smile", "I", "think", "we", "will", "merge", "to", "both", "NUMBER", "x", "and", "NUMBER", "x", "elfet", "I", "merge", "branch", "custom_bin", "and", "master", "to", "oanhnn", "NUMBER", "x", "LINK", "NUMBER", "Now", "you", "can", "merge", "smile", "Yeah", "I", "merge", "smile", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "NUMBER", "This", "add", "initial", "support", "for", "configure", "a", "custom", "php", "for", "each", "server", "NUMBER", "Some", "servers", "need", "use", "php", "cli", "to", "install", "vendors", "NUMBER", "This", "PR", "use", "a", "new", "env", "var", "TAG", "composer_require_cli", "TAG", "to", "handle", "that", "too", "I", "think", "we", "not", "need", "env", "variable", "composer_require_cli", "Please", "see", "my", "comment", "in", "NUMBER", "and", "close", "this", "PR", "elfet", "oanhnn", "in", "my", "case", "i", "need", "run", "TAG", "php", "cli", "composer", "NUMBER", "phar", "install", "TAG", "because", "TAG", "php", "composer", "NUMBER", "phar", "install", "TAG", "not", "work", "NUMBER", "I", "can", "remove", "the", "TAG", "php", "cli", "TAG", "env", "and", "override", "the", "composer", "task", "in", "my", "TAG", "deploy", "NUMBER", "php", "TAG", "file", "but", "maybe", "someone", "else", "have", "this", "problem", "NUMBER", "Close", "for", "discuss", "in", "NUMBER", "gperdomor", "You", "be", "install", "both", "php", "php", "cli", "Please", "show", "your", "version", "php", "and", "php", "cli", "NUMBER", "Q", "A", "Issue", "Type", "Question", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "I", "ve", "setup", "my", "project", "in", "bitucket", "NUMBER", "I", "ve", "also", "setup", "my", "computer", "ssh", "key", "and", "remote", "server", "ssh", "key", "in", "the", "bitbucket", "repo", "NUMBER", "I", "can", "also", "clone", "my", "repo", "in", "from", "remote", "server", "NUMBER", "Output", "log", "But", "when", "I", "run", "dep", "deploy", "I", "get", "error", "RuntimeException", "Host", "key", "verification", "fail", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "verbose", "output", "also", "be", "Executing", "task", "deploy", "prepare", "on", "production", "do", "on", "production", "Ok", "NUMBER", "s", "NUMBER", "ms", "Executing", "task", "deploy", "release", "on", "production", "do", "on", "production", "Ok", "NUMBER", "s", "NUMBER", "ms", "Executing", "task", "deploy", "update_code", "on", "production", "RuntimeException", "Host", "key", "verification", "fail", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "home", "vagrant", "app", "deploy", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "p", "parallel", "Content", "of", "deploy", "NUMBER", "php", "I", "don", "t", "figure", "out", "what", "be", "the", "problem", "NUMBER", "My", "server", "configuration", "be", "set", "repository", "git", "bitbucket", "NUMBER", "org", "username", "projetct", "NUMBER", "git", "set", "keep_releases", "NUMBER", "Configure", "servers", "server", "production", "x", "NUMBER", "x", "NUMBER", "x", "NUMBER", "x", "user", "root", "password", "password", "env", "deploy_path", "var", "www", "temp", "I", "have", "required", "laravel", "NUMBER", "php", "from", "deploy", "NUMBER", "php", "and", "required", "common", "NUMBER", "php", "from", "laravel", "NUMBER", "php", "NUMBER", "I", "ve", "also", "remove", "some", "set", "commands", "like", "shared_dir", "in", "common", "NUMBER", "php", "because", "it", "was", "change", "in", "laravel", "NUMBER", "php", "Description", "went", "too", "long", "NUMBER", "sorry", "about", "that", "NUMBER", "Executing", "task", "deploy", "prepare", "on", "production", "echo", "NUMBER", "TAG", "if", "d", "var", "www", "temp", "then", "mkdir", "p", "var", "www", "temp", "fi", "cd", "var", "www", "temp", "if", "d", "release", "then", "mkdir", "release", "fi", "cd", "var", "www", "temp", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "production", "Ok", "NUMBER", "s", "NUMBER", "ms", "Executing", "task", "deploy", "release", "on", "production", "mkdir", "var", "www", "temp", "release", "NUMBER", "cd", "var", "www", "temp", "if", "h", "release", "then", "rm", "release", "fi", "ln", "s", "var", "www", "temp", "release", "NUMBER", "var", "www", "temp", "release", "do", "on", "production", "Ok", "NUMBER", "s", "NUMBER", "ms", "Executing", "task", "deploy", "update_code", "on", "production", "git", "version", "TAG", "find", "var", "www", "temp", "release", "maxdepth", "NUMBER", "mindepth", "NUMBER", "type", "d", "TAG", "readlink", "var", "www", "temp", "release", "TAG", "git", "clone", "b", "master", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "username", "project", "NUMBER", "git", "var", "www", "temp", "release", "NUMBER", "NUMBER", "NUMBER", "RuntimeException", "Host", "key", "verification", "fail", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "home", "vagrant", "app", "deploy", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "p", "parallel", "I", "can", "clone", "my", "project", "manually", "in", "remote", "server", "via", "git", "clone", "oanhnn", "do", "want", "me", "to", "run", "ssh", "root", "x", "NUMBER", "x", "NUMBER", "x", "NUMBER", "x", "git", "clone", "git", "bitbucket", "NUMBER", "org", "username", "projetct", "NUMBER", "git", "tmp", "project", "on", "my", "remote", "server", "I", "ve", "run", "that", "on", "the", "remote", "server", "and", "cloned", "the", "project", "NUMBER", "Other", "option", "you", "can", "switch", "to", "use", "private", "public", "key", "or", "foward", "agent", "to", "ssh", "by", "deployer", "NUMBER", "Don", "t", "know", "so", "much", "about", "deployer", "NUMBER", "I", "would", "really", "appreciate", "if", "you", "could", "show", "me", "how", "to", "do", "that", "NUMBER", "Tnx", "Your", "problem", "be", "ssh", "by", "password", "and", "git", "clone", "by", "key", "oanhnn", "when", "use", "deployer", "directories", "be", "created", "so", "I", "conclude", "that", "ssh", "password", "for", "remote", "server", "be", "correct", "NUMBER", "But", "I", "don", "t", "know", "how", "to", "configure", "git", "clone", "key", "on", "my", "remote", "server", "or", "on", "deployer", "NUMBER", "Would", "you", "give", "a", "hint", "about", "it", "NUMBER", "Tnx", "oanhnn", "I", "run", "dep", "deploy", "on", "vagrant", "NUMBER", "I", "m", "also", "Bitbucket", "user", "NUMBER", "I", "can", "run", "ssh", "root", "x", "NUMBER", "x", "NUMBER", "x", "NUMBER", "x", "git", "clone", "git", "bitbucket", "NUMBER", "org", "username", "projetct", "NUMBER", "git", "tmp", "project", "on", "vagrant", "machine", "it", "clones", "the", "project", "and", "doesn", "t", "ask", "me", "any", "password", "NUMBER", "I", "ve", "also", "add", "NUMBER", "deploy", "key", "to", "bitbucket", "my", "remote", "server", "my", "host", "machine", "and", "my", "vagrant", "machine", "key", "NUMBER", "But", "again", "I", "get", "the", "same", "issue", "NUMBER", "What", "should", "I", "do", "now", "oanhnn", "yeah", "that", "s", "right", "NUMBER", "oanhnn", "you", "didn", "t", "provide", "any", "example", "do", "you", "plan", "to", "mehrdaad", "Please", "read", "LINK", "example", "blob", "master", "docs", "run", "deployer", "on", "homestead", "NUMBER", "md", "and", "star", "if", "it", "be", "useful", "smile", "elfet", "I", "want", "add", "this", "document", "to", "LINK", "to", "but", "i", "don", "t", "know", "construct", "of", "this", "repo", "NUMBER", "Please", "create", "first", "commit", "NUMBER", "smile", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "N", "A", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "Description", "My", "Deployer", "process", "be", "generally", "checkout", "master", "merge", "in", "from", "development", "push", "run", "vendor", "bin", "deploy", "NUMBER", "Sometimes", "I", "forget", "to", "push", "NUMBER", "Then", "I", "wait", "for", "the", "entire", "deploy", "process", "before", "I", "realize", "my", "branch", "be", "still", "dirty", "NUMBER", "So", "I", "use", "a", "task", "like", "this", "to", "help", "me", "out", "Start", "by", "checking", "that", "the", "current", "git", "branch", "be", "master", "fully", "push", "task", "deploy", "checkgit", "function", "if", "trim", "branch", "git", "rev", "parse", "abbrev", "ref", "HEAD", "master", "writeln", "TAG", "You", "should", "release", "from", "master", "not", "branch", "NUMBER", "TAG", "exit", "NUMBER", "check", "that", "there", "be", "no", "modify", "file", "exec", "git", "diff", "index", "quiet", "HEAD", "output", "exitCode", "if", "exitCode", "writeln", "TAG", "Branch", "be", "not", "clean", "not", "starting", "a", "deploy", "process", "NUMBER", "TAG", "exit", "NUMBER", "update", "remotes", "and", "check", "git", "status", "git", "remote", "update", "local", "trim", "git", "rev", "parse", "remote", "trim", "git", "rev", "parse", "u", "if", "local", "remote", "writeln", "TAG", "Your", "master", "be", "not", "equal", "to", "origin", "master", "you", "should", "push", "first", "NUMBER", "TAG", "exit", "NUMBER", "once", "desc", "Check", "that", "git", "be", "clean", "NUMBER", "Would", "this", "be", "a", "useful", "feature", "to", "continue", "for", "anyone", "else", "There", "be", "a", "lot", "of", "different", "work", "flow", "NUMBER", "Co", "i", "think", "this", "must", "not", "go", "into", "common", "NUMBER", "php", "recipe", "NUMBER", "Best", "solution", "be", "to", "write", "article", "about", "how", "to", "get", "task", "like", "this", "NUMBER", "Here", "new", "repo", "for", "stuff", "like", "this", "LINK", "to", "Thanks", "for", "the", "feedback", "I", "ll", "stick", "this", "into", "the", "how", "to", "repo", "NUMBER", "We", "be", "use", "a", "deployer", "task", "to", "reload", "our", "CakeResque", "workers", "use", "this", "code", "task", "resque", "function", "run", "cd", "deploy_path", "web", "app", "NUMBER", "Console", "cake", "CakeResque", "NUMBER", "CakeResque", "stop", "a", "run", "cd", "deploy_path", "web", "app", "NUMBER", "Console", "cake", "CakeResque", "NUMBER", "CakeResque", "load", "desc", "Red\u00e9marrage", "des", "workers", "Resque", "du", "client", "The", "first", "run", "be", "ok", "but", "the", "second", "you", "stay", "stuck", "NUMBER", "Do", "you", "have", "any", "idea", "We", "tryed", "to", "spot", "the", "blocking", "line", "LINK", "Resque", "blob", "master", "src", "Shell", "CakeResqueShell", "NUMBER", "php", "L", "NUMBER", "When", "we", "execute", "these", "two", "lines", "directly", "on", "the", "server", "it", "work", "like", "a", "charm", "NUMBER", "Thanks", "in", "advance", "Shouldn", "t", "this", "be", "more", "like", "task", "resque", "function", "run", "cd", "deploy_path", "web", "app", "NUMBER", "Console", "cake", "CakeResque", "NUMBER", "CakeResque", "stop", "a", "NUMBER", "Console", "cake", "CakeResque", "NUMBER", "CakeResque", "load", "desc", "Red\u00e9marrage", "des", "workers", "Resque", "du", "client", "That", "be", "doing", "NUMBER", "Console", "cake", "CakeResque", "NUMBER", "CakeResque", "load", "oisvidi", "I", "tried", "already", "but", "same", "issue", "elfet", "When", "I", "do", "CTRL", "C", "to", "stop", "the", "task", "and", "check", "the", "workers", "start", "So", "I", "guess", "it", "do", "the", "work", "but", "do", "not", "return", "anyhing", "Is", "that", "make", "sense", "try", "add", "NUMBER", "We", "need", "how", "to", "pages", "NUMBER", "elfet", "Adding", "did", "not", "change", "NUMBER", "oanhnn", "We", "add", "dev", "null", "NUMBER", "NUMBER", "and", "it", "works", "I", "have", "one", "more", "question", "about", "your", "code", "NUMBER", "Why", "exactly", "did", "you", "delete", "the", "cake_core_file_map", "file", "I", "thing", "we", "may", "have", "the", "same", "issue", "with", "realpath", "Thanks", "oanhnn", "Thanks", "a", "lot", "NUMBER", "You", "saved", "my", "day", "Q", "A", "Issue", "Type", "Feature", "Request", "Deployer", "Version", "NUMBER", "x", "Local", "Machine", "OS", "N", "A", "Remote", "Machine", "OS", "N", "A", "NUMBER", "Allow", "user", "to", "specify", "there", "to", "look", "for", "php", "bin", "NUMBER", "php", "env", "php_bin", "function", "return", "run", "which", "php", "Support", "for", "reading", "composers", "bin", "dir", "instead", "of", "write", "it", "multiple", "places", "LINK", "config", "NUMBER", "md", "bin", "dir", "Or", "you", "mean", "php", "itself", "I", "think", "the", "deployer", "user", "should", "be", "properly", "setup", "with", "php", "point", "to", "the", "intended", "php", "binary", "if", "so", "and", "deployer", "should", "ignore", "this", "issue", "completely", "NUMBER", "He", "meant", "PHP", "itself", "NUMBER", "I", "really", "like", "the", "idea", "because", "than", "I", "can", "use", "deployer", "as", "well", "to", "deploy", "legacy", "code", "which", "may", "needs", "special", "php", "version", "NUMBER", "elfet", "i", "submit", "a", "PR", "to", "handle", "this", "issue", "D", "elfet", "I", "think", "we", "allow", "setting", "up", "all", "bin", "path", "like", "env", "bin", "NUMBER", "php", "function", "return", "run", "which", "php", "env", "bin", "NUMBER", "git", "usr", "local", "git", "NUMBER", "bin", "git", "env", "bin", "NUMBER", "composer", "null", "for", "use", "local", "composer", "Because", "in", "some", "cases", "users", "use", "vagrant", "they", "can", "mount", "software", "sources", "like", "php", "git", "apache", "NUMBER", "and", "build", "custom", "NUMBER", "What", "be", "you", "think", "a", "bout", "multi", "version", "php", "NUMBER", "Fix", "PATH", "be", "not", "good", "solution", "NUMBER", "run", "php", "NUMBER", "Maybe", "some", "replace", "php", "NUMBER", "Users", "can", "custom", "like", "env", "bin", "NUMBER", "git", "usr", "local", "git", "NUMBER", "bin", "git", "I", "don", "t", "like", "the", "idea", "of", "modify", "the", "PATH", "env", "NUMBER", "But", "i", "like", "to", "have", "a", "map", "of", "bin", "paths", "with", "default", "values", "and", "configurable", "by", "server", "NUMBER", "For", "example", "i", "have", "a", "TAG", "deploy", "NUMBER", "yml", "TAG", "file", "with", "the", "deploy", "configuration", "with", "the", "map", "of", "bin", "executable", "shoul", "be", "something", "like", "this", "mmmmm", "having", "TAG", "env", "bin", "NUMBER", "executable", "path_to_executable", "TAG", "sounds", "great", "NUMBER", "and", "can", "be", "configured", "by", "server", "NUMBER", "In", "my", "case", "i", "have", "a", "TAG", "deploy", "NUMBER", "yml", "TAG", "with", "this", "content", "TAG", "TAG", "timezone", "America", "Caracas", "git", "repository", "url_to_repo", "NUMBER", "git", "branch", "master", "servers", "prod", "host", "domain", "NUMBER", "com", "stage", "production", "deploy_path", "path", "for", "deploy", "port", "NUMBER", "ssh_user", "user", "password", "password", "bin", "Alternative", "names", "bins", "exec", "executables", "paths", "php", "usr", "local", "bin", "php", "phpcli", "usr", "local", "bin", "php", "cli", "For", "composer", "install", "I", "need", "this", "by", "default", "if", "null", "use", "the", "php", "path", "git", "usr", "local", "bin", "git", "development", "host", "other_host", "stage", "development", "deploy_path", "path", "for", "deploy", "port", "NUMBER", "ssh_user", "user", "password", "password", "bin", "php", "usr", "bin", "php", "git", "usr", "bin", "git", "php", "cli", "be", "not", "configured", "so", "usr", "bin", "php", "be", "use", "in", "composer", "install", "TAG", "TAG", "That", "file", "should", "be", "parsed", "in", "the", "TAG", "deploy", "NUMBER", "php", "TAG", "file", "That", "s", "a", "great", "Idea", "to", "make", "all", "the", "executable", "configurable", "but", "manipulating", "the", "PATH", "only", "ends", "in", "rubbish", "and", "should", "be", "avoided", "in", "any", "way", "NUMBER", "And", "I", "would", "prefer", "the", "way", "oanhnn", "suggested", "NUMBER", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "Allow", "people", "to", "name", "release", "folders", "to", "tag", "without", "replacing", "task", "deploy", "release", "NUMBER", "This", "be", "very", "useful", "feature", "but", "with", "this", "place", "a", "lot", "of", "problem", "like", "different", "timezones", "between", "developers", "to", "it", "s", "must", "be", "refactored", "at", "all", "NUMBER", "elfet", "This", "commit", "simply", "moved", "the", "release", "date", "YmdHis", "out", "of", "the", "task", "to", "an", "env", "key", "NUMBER", "If", "your", "developers", "have", "different", "timezones", "this", "change", "allows", "you", "to", "make", "a", "new", "env", "value", "which", "uses", "timezone", "NUMBER", "Or", "like", "me", "to", "use", "the", "git", "tag", "as", "release", "NUMBER", "Ok", "i", "think", "it", "s", "ok", "NUMBER", "What", "do", "you", "think", "oanhnn", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "Using", "this", "to", "deploy", "Joomla", "NUMBER", "Have", "a", "few", "autoloading", "scripts", "for", "Joomla", "only", "checking", "if", "JEXEC", "be", "defined", "NUMBER", "This", "allows", "my", "autoloads", "to", "return", "if", "DEPLOYER", "be", "defined", "NUMBER", "That", "be", "this", "about", "What", "you", "trying", "to", "check", "elfet", "Im", "not", "suggesting", "that", "this", "library", "use", "this", "constant", "internally", "NUMBER", "It", "be", "for", "projects", "and", "other", "libraries", "where", "deployer", "be", "include", "as", "require", "dev", "and", "has", "a", "lot", "of", "autoloading", "libraries", "NUMBER", "My", "Joomla", "config", "library", "which", "sets", "up", "a", "DIC", "has", "a", "check", "for", "a", "few", "constants", "or", "die", "since", "it", "requires", "the", "Joomla", "Application", "and", "Joomla", "classes", "function", "for", "various", "stuff", "NUMBER", "I", "can", "now", "add", "this", "line", "at", "the", "start", "of", "the", "config", "library", "if", "defined", "DEPLOYER", "return", "You", "mean", "if", "you", "call", "it", "as", "dep", "some", "autoloaded", "staff", "will", "run", "elfet", "Yes", "NUMBER", "The", "vendor", "bin", "dep", "loads", "composer", "autoloader", "which", "autoloads", "some", "library", "file", "NUMBER", "With", "this", "constant", "other", "autoloading", "libraries", "can", "if", "they", "want", "to", "know", "deployer", "be", "the", "application", "run", "NUMBER", "I", "can", "fix", "this", "problem", "in", "my", "libraries", "without", "this", "commit", "NUMBER", "But", "I", "figured", "it", "would", "be", "nice", "for", "other", "libraries", "to", "know", "which", "app", "be", "run", "NUMBER", "Ok", "but", "please", "fix", "some", "code", "styles", "NUMBER", "oanhnn", "That", "can", "work", "if", "we", "move", "the", "declaration", "of", "DEPLOYER_BIN", "above", "the", "foreach", "loading", "autoloaders", "NUMBER", "oanhnn", "it", "just", "means", "DEPLOYER", "be", "the", "application", "run", "NUMBER", "The", "value", "be", "irrelevant", "for", "that", "purpose", "NUMBER", "I", "think", "it", "s", "ok", "to", "have", "a", "set", "on", "constants", "DEPLOYER", "DEPLOYER_", "NUMBER", "I", "think", "some", "legacy", "code", "may", "load", "at", "this", "point", "php", "require", "file", "I", "think", "its", "when", "composer", "load", "file", "with", "PSR", "NUMBER", "Composer", "has", "an", "autoload", "index", "which", "loads", "the", "specified", "file", "at", "all", "times", "NUMBER", "deployer", "be", "in", "the", "project", "require", "dev", "so", "it", "s", "not", "install", "on", "the", "server", "but", "it", "be", "install", "on", "my", "machine", "and", "others", "when", "they", "ll", "work", "on", "this", "project", "again", "NUMBER", "I", "add", "these", "lines", "in", "the", "autoloaded", "file", "which", "throw", "a", "tantrum", "when", "JEXEC", "be", "not", "defined", "NUMBER", "if", "class_exists", "ComposerAutoloaderInitVidi", "false", "error_log", "This", "file", "was", "loaded", "by", "composer", "autoload", "but", "not", "in", "Joomla", "context", "NUMBER", "__FILE__", "NUMBER", "NUMBER", "return", "Q", "A", "Bug", "fix", "No", "New", "feature", "Yes", "BC", "breaks", "No", "Deprecations", "No", "Fixed", "tickets", "N", "A", "This", "PR", "be", "to", "make", "other", "PR", "has", "above", "Q", "A", "table", "as", "default", "NUMBER", "Ref", "Issue", "and", "Pull", "Request", "template", "LINK", "issue", "and", "pull", "request", "template", "feature", "NUMBER", "What", "s", "issue", "template", "content", "oanhnn", "Issue", "template", "add", "NUMBER", "Can", "you", "check", "it", "out", "This", "be", "awesome", "oanhnn", "let", "s", "create", "section", "about", "contributors", "on", "deployer", "NUMBER", "org", "Sorry", "for", "creating", "a", "new", "issue", "but", "I", "ve", "get", "a", "problem", "NUMBER", "Right", "now", "for", "a", "project", "I", "m", "use", "git", "locally", "but", "that", "s", "not", "on", "any", "site", "like", "github", "NUMBER", "I", "want", "to", "deploy", "my", "app", "directly", "from", "my", "machine", "to", "the", "vps", "NUMBER", "Is", "it", "possible", "to", "deploy", "my", "app", "from", "my", "local", "master", "branch", "to", "vps", "directly", "And", "if", "not", "how", "about", "deploying", "the", "whole", "directory", "to", "the", "vps", "Have", "you", "attempted", "to", "install", "git", "on", "your", "VPS", "apt", "get", "install", "git", "jakenoble", "yeah", "git", "be", "install", "NUMBER", "What", "I", "don", "t", "figure", "out", "be", "how", "to", "deploy", "from", "my", "machine", "What", "configuration", "on", "my", "end", "should", "be", "do", "What", "have", "you", "tried", "so", "far", "You", "start", "the", "deployment", "process", "from", "your", "local", "machine", "and", "it", "SSH", "s", "to", "your", "remote", "uses", "git", "to", "download", "the", "code", "base", "and", "set", "up", "your", "app", "NUMBER", "uses", "git", "to", "download", "the", "code", "base", "and", "set", "up", "your", "app", "NUMBER", "this", "be", "the", "problem", "NUMBER", "The", "project", "be", "not", "on", "GitHub", "NUMBER", "so", "set", "repository", "git", "github", "NUMBER", "com", "org", "app", "NUMBER", "git", "be", "nonsense", "NUMBER", "The", "whole", "project", "be", "on", "my", "local", "machine", "NUMBER", "could", "I", "describe", "my", "problem", "It", "doesn", "t", "need", "to", "be", "on", "github", "just", "in", "a", "repo", "that", "Deployer", "support", "NUMBER", "If", "you", "re", "not", "use", "some", "sort", "of", "source", "control", "then", "you", "have", "bigger", "issue", "NUMBER", "Even", "if", "you", "re", "a", "lone", "developer", "like", "myself", "NUMBER", "jakenoble", "let", "me", "say", "this", "way", "my", "project", "be", "not", "on", "any", "online", "source", "control", "online", "like", "GitHub", "bitbucket", "etc", "NUMBER", "But", "I", "m", "use", "git", "locally", "NUMBER", "now", "I", "want", "to", "deploy", "my", "app", "from", "my", "machine", "to", "vps", "NUMBER", "That", "s", "all", "I", "need", "NUMBER", "I", "do", "not", "think", "Deployer", "do", "this", "NUMBER", "I", "think", "you", "need", "something", "else", "then", "or", "a", "custom", "solution", "your", "case", "seems", "fairly", "niche", "NUMBER", "I", "don", "t", "think", "this", "be", "niche", "NUMBER", "There", "be", "many", "cases", "that", "a", "developer", "want", "to", "deploy", "to", "vps", "from", "local", "machine", "NUMBER", "Isn", "t", "it", "I", "deploy", "use", "my", "local", "machine", "to", "a", "VPS", "but", "the", "code", "be", "just", "pull", "from", "a", "repo", "where", "be", "stored", "and", "version", "use", "git", "NUMBER", "Your", "repo", "be", "not", "remote", "and", "presumably", "cannot", "be", "accessed", "on", "any", "publicly", "available", "IP", "or", "domain", "so", "Deployer", "cannot", "locate", "it", "NUMBER", "What", "you", "need", "Deployer", "todo", "be", "export", "the", "code", "locally", "move", "it", "to", "the", "server", "and", "then", "run", "any", "custom", "commands", "to", "set", "up", "the", "app", "I", "be", "sure", "you", "can", "do", "that", "with", "a", "custom", "recipe", "in", "Deployer", "use", "SCP", "or", "SFTP", "to", "move", "the", "file", "to", "the", "VPS", "NUMBER", "I", "would", "say", "its", "niche", "to", "have", "code", "in", "one", "place", "and", "not", "in", "remote", "source", "control", "of", "some", "sort", "as", "at", "least", "a", "back", "up", "What", "if", "your", "machine", "was", "stolen", "tonight", "Or", "your", "office", "burnt", "down", "along", "with", "your", "machine", "and", "all", "your", "local", "git", "repos", "Already", "tried", "set", "repository", "file", "TAG", "desc", "Make", "cache", "writable", "again", "after", "deploy", "cache", "warmup", "deploy", "make_cache_writable", "Yes", "I", "really", "want", "to", "create", "better", "docs", "i", "think", "this", "be", "NUMBER", "success", "of", "open", "source", "libs", "NUMBER", "I", "think", "about", "section", "with", "hot", "to", "or", "faq", "NUMBER", "I", "m", "totally", "fine", "with", "that", "but", "I", "have", "one", "appeal", "left", "NUMBER", "If", "you", "do", "so", "you", "should", "remove", "the", "lines", "NUMBER", "NUMBER", "LINK", "L", "NUMBER", "L", "NUMBER", "from", "the", "symfony", "recipe", "because", "they", "be", "just", "confusing", "and", "have", "not", "really", "an", "effect", "NUMBER", "After", "some", "research", "I", "find", "another", "possible", "reason", "for", "this", "behaviour", "NUMBER", "The", "deploy", "task", "of", "the", "symfony", "recipe", "has", "the", "wrong", "order", "in", "my", "opinion", "Main", "task", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "create_cache_dir", "deploy", "shared", "deploy", "writable", "deploy", "assets", "deploy", "vendors", "deploy", "assetic", "dump", "deploy", "cache", "warmup", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "The", "task", "deploy", "writable", "should", "be", "call", "after", "the", "warmup", "because", "all", "previous", "tasks", "should", "always", "run", "with", "the", "privileges", "of", "the", "deploying", "user", "and", "after", "that", "the", "recipe", "specific", "configuration", "should", "be", "set", "NUMBER", "In", "that", "case", "all", "the", "given", "functionality", "of", "the", "recipe", "can", "be", "use", "and", "set", "writable_dirs", "works", "again", "as", "expected", "NUMBER", "But", "the", "marked", "lines", "be", "still", "obsolete", "Done", "NUMBER", "I", "m", "trying", "out", "this", "library", "and", "everything", "seem", "going", "well", "until", "I", "notice", "some", "problem", "with", "the", "folders", "the", "Laravel", "framework", "needs", "to", "be", "writable", "NUMBER", "If", "I", "only", "set", "those", "folders", "as", "writable", "and", "not", "shared", "the", "permissions", "be", "set", "correctly", "but", "if", "I", "set", "those", "folders", "as", "both", "writable", "and", "shared", "they", "won", "t", "get", "the", "writable", "permissions", "NUMBER", "I", "don", "t", "use", "the", "Laravel", "recipe", "but", "a", "custom", "file", "based", "on", "the", "majority", "of", "that", "recipe", "I", "just", "add", "the", "writable_dirs", "task", "and", "some", "other", "things", "my", "app", "needs", "NUMBER", "Am", "I", "miss", "something", "or", "why", "could", "this", "be", "happening", "I", "could", "leave", "those", "folders", "as", "only", "writable", "but", "not", "shared", "but", "that", "wouldn", "t", "be", "useful", "because", "shared", "folders", "be", "the", "main", "point", "of", "an", "atomic", "deployment", "NUMBER", "Hope", "I", "explained", "myself", "NUMBER", "Thank", "you", "NUMBER", "I", "notice", "this", "too", "NUMBER", "I", "find", "that", "the", "writable", "permission", "was", "be", "set", "correctly", "on", "the", "storage", "directory", "in", "each", "release", "it", "appears", "in", "each", "release", "because", "storage", "isn", "t", "a", "shared", "directory", "it", "s", "the", "subdirectories", "in", "the", "storage", "directory", "that", "be", "shared", "but", "the", "writable", "permission", "wasn", "t", "be", "set", "on", "the", "subdirectories", "that", "were", "shared", "storage", "app", "etc", "NUMBER", "Hi", "guys", "NUMBER", "Need", "to", "check", "if", "deploy", "writeable", "task", "can", "make", "shared", "folders", "writable", "NUMBER", "May", "be", "this", "feature", "be", "miss", "NUMBER", "oanhnn", "can", "you", "check", "oanhnn", "Sure", "NUMBER", "This", "be", "my", "deploy", "NUMBER", "php", "file", "NUMBER", "I", "m", "test", "it", "locally", "first", "before", "test", "on", "a", "VPS", "NUMBER", "require_once", "recipe", "common", "NUMBER", "php", "shared", "dirs", "set", "shared_dirs", "storage", "app", "storage", "framework", "cache", "storage", "framework", "sessions", "storage", "framework", "views", "storage", "logs", "public", "images", "book", "covers", "public", "images", "book", "photos", "photos", "public", "images", "book", "photos", "thumbnails", "writable", "dirs", "set", "writable_dirs", "bootstrap", "cache", "storage", "public", "images", "book", "covers", "public", "images", "book", "photos", "photos", "public", "images", "book", "photos", "thumbnails", "tasks", "task", "migration", "function", "run", "php", "release_path", "artisan", "migrate", "force", "desc", "Artisan", "migrations", "task", "env_file", "function", "upload", "home", "localuser", "NUMBER", "librosjbenv", "release_path", "NUMBER", "env", "desc", "Copy", "environment", "file", "task", "reload", "apache", "function", "run", "service", "apache", "NUMBER", "reload", "desc", "Reload", "Apache", "Server", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "vendors", "deploy", "shared", "deploy", "writable", "deploy", "symlink", "env_file", "migration", "cleanup", "desc", "Deploy", "your", "project", "after", "deploy", "reload", "apache", "after", "deploy", "success", "localServer", "local", "user", "localuser", "stage", "local", "env", "deploy_path", "var", "www", "librosjbprod", "set", "repository", "repo_path", "oanhnn", "I", "made", "several", "test", "doing", "what", "you", "suggest", "but", "it", "didn", "t", "work", "NUMBER", "These", "days", "I", "was", "doing", "some", "research", "to", "see", "how", "other", "platforms", "handle", "atomic", "deployments", "and", "I", "attempted", "what", "some", "of", "them", "do", "give", "the", "write", "permissions", "to", "the", "folder", "the", "symlinks", "point", "to", "in", "this", "case", "the", "shared", "folder", "that", "Deployer", "creates", "NUMBER", "I", "no", "longer", "use", "Deployer", "s", "writable", "task", "instead", "I", "created", "a", "custom", "task", "that", "gives", "write", "permission", "to", "the", "shared", "folder", "NUMBER", "I", "don", "t", "know", "if", "this", "be", "the", "way", "I", "be", "supposed", "to", "use", "Deployer", "but", "it", "s", "work", "fine", "for", "my", "needs", "NUMBER", "What", "do", "you", "think", "Is", "this", "still", "an", "issue", "I", "suggest", "to", "change", "the", "writeable", "shared", "folders", "to", "shared", "entire", "storage", "and", "use", "a", "symlinked", "public", "storage", "folder", "see", "NUMBER", "Symfony", "NUMBER", "uses", "the", "directory", "var", "sessions", "to", "store", "all", "sessions", "created", "NUMBER", "This", "directory", "be", "miss", "in", "der", "symfony", "NUMBER", "recipe", "NUMBER", "It", "should", "at", "least", "be", "add", "to", "the", "writable_dirs", "array", "NUMBER", "Additionally", "I", "think", "it", "should", "be", "also", "add", "to", "the", "shared_dirs", "array", "to", "ensure", "that", "the", "sessions", "be", "not", "destroyed", "during", "deployment", "NUMBER", "Source", "that", "it", "should", "be", "writable", "LINK", "checking", "symfony", "application", "configuration", "and", "setup", "Related", "to", "LINK", "I", "need", "to", "restart", "apache", "after", "deploy", "because", "it", "seems", "symlinks", "be", "still", "cached", "for", "a", "little", "while", "has", "no", "one", "notice", "this", "at", "least", "when", "you", "use", "NUMBER", "htaccess", "rewriting", "NUMBER", "So", "my", "current", "deploy", "be", "as", "the", "user", "NUMBER", "At", "the", "final", "step", "I", "need", "to", "su", "to", "root", "so", "that", "I", "can", "restart", "apache", "NUMBER", "How", "can", "I", "do", "that", "password", "should", "be", "typed", "in", "NUMBER", "thanks", "NUMBER", "It", "s", "the", "same", "like", "restart", "PHP", "FPM", "NUMBER", "See", "LINK", "Q", "A", "Bug", "fix", "Yes", "New", "feature", "no", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "n", "a", "Fixed", "typo", "error", "of", "inline", "comments", "for", "Drupal", "NUMBER", "recipe", "NUMBER", "It", "s", "possible", "to", "configure", "dependencies", "between", "two", "servers", "Something", "like", "php", "server", "test", "localhost", "user", "user", "password", "pass", "env", "deploy_path", "home", "www", "env", "run_test", "true", "stage", "production", "server", "prod", "domain", "NUMBER", "com", "user", "user", "password", "pass", "env", "deploy_path", "home", "www", "env", "extra_stuff", "NUMBER", "stage", "production", "dependencies", "test", "if", "the", "server", "test", "to", "fail", "then", "the", "deploy", "process", "wil", "be", "abort", "All", "be", "in", "the", "question", "NUMBER", "Thanks", "for", "this", "very", "good", "soft", "Q", "A", "Bug", "fix", "yes", "New", "feature", "no", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "NUMBER", "NUMBER", "Merged", "If", "any", "other", "file", "directories", "appear", "in", "deploy_path", "release", "dir", "deployer", "thinks", "it", "be", "a", "release", "without", "any", "check", "NUMBER", "It", "leads", "to", "problem", "with", "keep_releases", "instead", "of", "release", "deployer", "keep", "other", "entries", "NUMBER", "Live", "example", "sh", "deploy", "release", "ls", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "bak", "NUMBER", "runtime", "runtime", "be", "a", "garbage", "from", "slightly", "misconfigured", "yii", "NUMBER", "NUMBER", "bak", "be", "a", "manually", "created", "backup", "NUMBER", "dep", "cleanup", "in", "this", "sutuation", "assuming", "that", "keep_releases", "be", "NUMBER", "would", "remove", "last", "NUMBER", "release", "leaving", "only", "latest", "one", "along", "with", "runtime", "and", "NUMBER", "bak", "sh", "NUMBER", "bak", "NUMBER", "runtime", "Thus", "current", "behaviour", "may", "lead", "to", "unwanted", "removal", "of", "release", "NUMBER", "It", "can", "even", "remove", "all", "release", "including", "current", "NUMBER", "deployphp", "maintainer", "what", "you", "think", "What", "about", "pull", "request", "I", "submitted", "Is", "it", "ok", "or", "needs", "rework", "to", "be", "accepted", "Nice", "way", "to", "solve", "task", "object", "problem", "NUMBER", "Cool", "NUMBER", "oanhnn", "a", "lot", "of", "people", "install", "it", "via", "composer", "NUMBER", "I", "think", "it", "s", "good", "to", "have", "both", "ways", "NUMBER", "This", "pull", "request", "be", "obsolete", "since", "i", "cherry", "pick", "the", "relevant", "commit", "which", "was", "merge", "NUMBER", "Thank", "you", "vpx", "Following", "the", "guidelines", "to", "get", "start", "gives", "me", "an", "error", "curl", "sSO", "LINK", "cat", "deploy", "NUMBER", "php", "TAG", "get", "deploy", "prepare", "NUMBER", "phar", "home", "me", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Scenario", "ScenarioCollection", "get", "deploy", "prepare", "NUMBER", "internal", "function", "closure", "deploy", "prepare", "NUMBER", "phar", "home", "me", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "array_map", "Object", "Closure", "Array", "NUMBER", "home", "me", "test", "deploy", "NUMBER", "php", "NUMBER", "task", "deploy", "Array", "NUMBER", "phar", "home", "me", "test", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "require", "home", "me", "test", "NUMBER", "NUMBER", "home", "me", "test", "deployer", "NUMBER", "phar", "NUMBER", "require", "phar", "home", "ma", "NUMBER", "NUMBER", "main", "throw", "in", "phar", "home", "me", "test", "deployer", "NUMBER", "phar", "src", "Collection", "Collection", "NUMBER", "php", "on", "line", "NUMBER", "Adding", "a", "require", "recipe", "common", "NUMBER", "php", "at", "the", "top", "doesn", "t", "make", "any", "difference", "NUMBER", "How", "be", "one", "supposed", "to", "use", "recipes", "tasks", "etc", "NUMBER", "from", "within", "the", "deployer", "NUMBER", "phar", "Installing", "Deployer", "as", "Composer", "dependency", "be", "not", "an", "option", "due", "to", "conflict", "with", "other", "project", "dependencies", "NUMBER", "require", "recipe", "common", "NUMBER", "php", "elfet", "As", "write", "in", "the", "OP", "this", "doesn", "t", "help", "NUMBER", "And", "I", "cannot", "imagine", "this", "to", "work", "unless", "Deployer", "add", "the", "internal", "phar", "root", "path", "to", "the", "PHP", "include", "path", "at", "runtime", "NUMBER", "Here", "again", "including", "the", "require", "curl", "sSO", "LINK", "cat", "deploy", "NUMBER", "php", "TAG", "deploy", "prepare", "NUMBER", "deploy", "update_code", "NUMBER", "deploy", "vendors", "NUMBER", "deploy", "symlink", "NUMBER", "deploy", "cleanup", "tmp", "test", "deploy", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "array_map", "class", "Closure", "public", "static", "array", "deployer", "class", "Deployer", "Deployer", "NUMBER", "public", "parameter", "array", "name", "TAG", "array", "NUMBER", "deploy", "prepare", "NUMBER", "deploy", "update_code", "NUMBER", "deploy", "vendors", "NUMBER", "deploy", "symlink", "NUMBER", "deploy", "cleanup", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "Warning", "array_map", "An", "error", "occur", "while", "invoking", "the", "map", "callback", "in", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "on", "line", "NUMBER", "Call", "Stack", "NUMBER", "NUMBER", "NUMBER", "main", "tmp", "test", "deployer", "NUMBER", "phar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "require", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "bin", "dep", "tmp", "test", "deployer", "NUMBER", "phar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "require", "tmp", "test", "deploy", "NUMBER", "php", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "task", "name", "deploy", "body", "array", "NUMBER", "deploy", "prepare", "NUMBER", "deploy", "update_code", "NUMBER", "deploy", "vendors", "NUMBER", "deploy", "symlink", "NUMBER", "deploy", "cleanup", "tmp", "test", "deploy", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "array_map", "class", "Closure", "public", "static", "array", "deployer", "class", "Deployer", "Deployer", "NUMBER", "public", "parameter", "array", "name", "TAG", "array", "NUMBER", "deploy", "prepare", "NUMBER", "deploy", "update_code", "NUMBER", "deploy", "vendors", "NUMBER", "deploy", "symlink", "NUMBER", "deploy", "cleanup", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "PHP", "Fatal", "error", "Uncaught", "exception", "RuntimeException", "with", "message", "Object", "deploy", "cleanup", "do", "not", "exist", "in", "ScenarioCollection", "NUMBER", "in", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "Collection", "Collection", "NUMBER", "php", "NUMBER", "Stack", "trace", "NUMBER", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "Task", "Scenario", "ScenarioCollection", "NUMBER", "php", "NUMBER", "Deployer", "Collection", "Collection", "get", "deploy", "cleanup", "NUMBER", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Scenario", "ScenarioCollection", "get", "deploy", "cleanup", "NUMBER", "internal", "function", "closure", "deploy", "cleanup", "NUMBER", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "array_map", "Object", "Closure", "Array", "NUMBER", "tmp", "test", "deploy", "NUMBER", "php", "NUMBER", "task", "deploy", "Array", "NUMBER", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "require", "tmp", "test", "deplo", "NUMBER", "NUMBER", "tmp", "test", "deployer", "NUMBER", "phar", "NUMBER", "require", "phar", "tmp", "tes", "NUMBER", "NUMBER", "main", "throw", "in", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "Collection", "Collection", "NUMBER", "php", "on", "line", "NUMBER", "Fatal", "error", "Uncaught", "exception", "RuntimeException", "with", "message", "Object", "deploy", "cleanup", "do", "not", "exist", "in", "ScenarioCollection", "NUMBER", "in", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "Collection", "Collection", "NUMBER", "php", "on", "line", "NUMBER", "RuntimeException", "Object", "deploy", "cleanup", "do", "not", "exist", "in", "ScenarioCollection", "NUMBER", "in", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "Collection", "Collection", "NUMBER", "php", "on", "line", "NUMBER", "Call", "Stack", "NUMBER", "NUMBER", "NUMBER", "main", "tmp", "test", "deployer", "NUMBER", "phar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "require", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "bin", "dep", "tmp", "test", "deployer", "NUMBER", "phar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "require", "tmp", "test", "deploy", "NUMBER", "php", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "task", "name", "deploy", "body", "array", "NUMBER", "deploy", "prepare", "NUMBER", "deploy", "update_code", "NUMBER", "deploy", "vendors", "NUMBER", "deploy", "symlink", "NUMBER", "deploy", "cleanup", "tmp", "test", "deploy", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "array_map", "class", "Closure", "public", "static", "array", "deployer", "class", "Deployer", "Deployer", "NUMBER", "public", "parameter", "array", "name", "TAG", "array", "NUMBER", "deploy", "prepare", "NUMBER", "deploy", "update_code", "NUMBER", "deploy", "vendors", "NUMBER", "deploy", "symlink", "NUMBER", "deploy", "cleanup", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "closure", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "NUMBER", "name", "deploy", "cleanup", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Task", "Scenario", "ScenarioCollection", "get", "name", "deploy", "cleanup", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Collection", "Collection", "get", "name", "deploy", "cleanup", "phar", "tmp", "test", "deployer", "NUMBER", "phar", "src", "Task", "Scenario", "ScenarioCollection", "NUMBER", "php", "NUMBER", "Put", "this", "at", "the", "end", "of", "your", "deploy", "NUMBER", "php", "TAG", "task", "deploy", "deploy", "prepare", "deploy", "update_code", "deploy", "vendors", "deploy", "symlink", "deploy", "cleanup", "TAG", "Had", "the", "same", "problem", "and", "the", "order", "of", "the", "tasks", "be", "somehow", "important", "NUMBER", "tliegl", "Not", "sure", "I", "understand", "but", "this", "be", "what", "I", "already", "have", "in", "my", "deploy", "NUMBER", "php", "NUMBER", "I", "had", "this", "with", "my", "own", "tasks", "NUMBER", "I", "write", "the", "group", "task", "at", "the", "top", "of", "my", "deploy", "NUMBER", "php", "and", "add", "the", "single", "tasks", "below", "it", "I", "get", "the", "same", "error", "as", "you", "NUMBER", "After", "that", "I", "moved", "the", "single", "tasks", "at", "the", "top", "of", "the", "deploy", "NUMBER", "php", "and", "moved", "the", "group", "task", "at", "the", "end", "of", "the", "file", "NUMBER", "Then", "the", "error", "was", "gone", "NUMBER", "tliegl", "Can", "you", "post", "your", "exact", "deploy", "NUMBER", "php", "The", "example", "I", "posted", "be", "taken", "straight", "from", "the", "docs", "and", "ATM", "I", "don", "t", "want", "need", "to", "define", "custom", "tasks", "I", "simply", "want", "to", "use", "a", "selection", "of", "tasks", "from", "the", "recipes", "NUMBER", "Thus", "in", "the", "most", "basic", "case", "all", "I", "want", "be", "a", "task", "group", "like", "this", "NUMBER", "Hm", "in", "common", "recipe", "the", "cleanup", "task", "has", "no", "deploy", "prefix", "LINK", "L", "NUMBER", "alaczi", "You", "where", "absolutely", "right", "about", "this", "this", "fix", "the", "issue", "thanks", "NUMBER", "I", "ve", "made", "a", "PR", "which", "fix", "this", "error", "in", "the", "docs", "LINK", "NUMBER", "I", "made", "an", "attempt", "at", "doing", "this", "by", "setting", "the", "tag", "and", "branch", "variables", "but", "get", "this", "warning", "Could", "not", "find", "remote", "branch", "NUMBER", "d", "NUMBER", "d", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "da", "NUMBER", "ce", "NUMBER", "c", "NUMBER", "f", "NUMBER", "c", "NUMBER", "to", "clone", "NUMBER", "fatal", "Remote", "branch", "NUMBER", "d", "NUMBER", "d", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "da", "NUMBER", "ce", "NUMBER", "c", "NUMBER", "f", "NUMBER", "c", "NUMBER", "not", "find", "in", "upstream", "origin", "I", "think", "it", "be", "not", "possible", "with", "the", "default", "common", "NUMBER", "php", "recipe", "NUMBER", "You", "can", "do", "this", "by", "overriding", "the", "default", "deploy", "update_code", "to", "run", "git", "clone", "repository", "without", "shallow", "copy", "in", "contrast", "to", "shallow", "clone", "in", "default", "task", "git", "reset", "hard", "branch", "where", "you", "actually", "supply", "commit", "hash", "as", "branch", "Hello", "I", "d", "like", "to", "be", "able", "to", "call", "a", "task", "from", "another", "one", "but", "I", "can", "t", "find", "any", "way", "to", "achieve", "it", "NUMBER", "I", "did", "search", "and", "find", "other", "people", "trying", "to", "do", "it", "too", "NUMBER", "NUMBER", "NUMBER", "but", "the", "answers", "be", "workaround", "not", "real", "solutions", "NUMBER", "For", "example", "I", "d", "like", "to", "call", "a", "recipe", "task", "conditionnaly", "php", "task", "notify", "slack", "function", "if", "env", "slack", "call", "deploy", "slack", "after", "deploy", "notify", "slack", "It", "would", "also", "be", "convient", "if", "we", "could", "use", "it", "with", "askConfirmation", "for", "instance", "php", "task", "composer", "confirm", "function", "if", "askConfirmation", "Do", "you", "need", "to", "update", "your", "dependencies", "true", "call", "deploy", "vendors", "An", "other", "way", "to", "achieve", "it", "would", "be", "to", "be", "able", "to", "get", "env", "variable", "from", "outside", "a", "task", "but", "it", "seem", "tight", "binded", "to", "the", "context", "php", "tasks", "deploy", "prepare", "deploy", "update_code", "deploy", "vendors", "deploy", "symlink", "deploy", "cleanup", "if", "env", "slack", "array_push", "tasks", "deploy", "slack", "task", "deploy", "tasks", "Please", "could", "you", "consider", "this", "feature", "request", "Hi", "This", "be", "common", "question", "NUMBER", "But", "according", "to", "Deployer", "structure", "this", "be", "do", "not", "possible", "It", "will", "broke", "parallel", "deployment", "at", "all", "NUMBER", "But", "there", "be", "a", "solution", "NUMBER", "call", "deploy", "slack", "it", "s", "look", "like", "a", "function", "call", "and", "can", "be", "a", "function", "callDeploySlack", "whick", "can", "be", "call", "there", "it", "s", "needed", "NUMBER", "php", "subtask_", "NUMBER", "function", "NUMBER", "subtask_", "NUMBER", "function", "NUMBER", "task", "subtask_", "NUMBER", "subtask_", "NUMBER", "task", "subtask_", "NUMBER", "subtask_", "NUMBER", "task", "task", "function", "if", "condition", "subtask_", "NUMBER", "else", "subtask_", "NUMBER", "See", "more", "in", "NUMBER", "It", "s", "good", "thing", "but", "i", "do", "not", "see", "how", "it", "will", "work", "with", "current", "function", "task", "NUMBER", "May", "be", "some", "cool", "feature", "for", "Deployer", "NUMBER", "two", "types", "of", "tasks", "func", "and", "object", "Now", "Deployer", "offers", "Task", "LINK", "class", "NUMBER", "May", "be", "it", "s", "should", "be", "abstract", "class", "Or", "TaskInterface", "for", "Deployer", "NUMBER", "I", "suggest", "to", "split", "deploy", "vendors", "task", "to", "two", "separate", "tasks", "NUMBER", "will", "just", "download", "composer", "NUMBER", "phar", "file", "NUMBER", "NUMBER", "will", "install", "project", "Composer", "package", "NUMBER", "The", "benefit", "of", "this", "be", "we", "can", "execute", "custom", "tasks", "after", "NUMBER", "one", "be", "completed", "for", "example", "installation", "update", "of", "global", "package", "NUMBER", "Example", "with", "Yii", "NUMBER", "framework", "we", "need", "to", "install", "Composer", "Asset", "Plugin", "LINK", "asset", "plugin", "_before_", "installing", "project", "package", "composer", "global", "require", "fxp", "composer", "asset", "plugin", "NUMBER", "This", "be", "only", "needed", "on", "first", "installation", "then", "we", "only", "need", "to", "update", "this", "plugin", "NUMBER", "Skipping", "installation", "of", "this", "plugin", "leads", "to", "error", "and", "application", "will", "not", "be", "work", "NUMBER", "Currently", "both", "Yii", "NUMBER", "recipes", "basic", "LINK", "app", "basic", "NUMBER", "php", "and", "advance", "LINK", "app", "advance", "NUMBER", "php", "lack", "this", "that", "means", "users", "have", "to", "install", "it", "separately", "on", "their", "own", "NUMBER", "This", "be", "not", "limited", "to", "just", "Yii", "NUMBER", "of", "course", "NUMBER", "Writing", "custom", "task", "be", "not", "appropriate", "because", "there", "be", "no", "way", "to", "inject", "custom", "task", "now", "and", "we", "need", "duplicate", "code", "from", "deploy", "vendors", "NUMBER", "Related", "LINK", "NUMBER", "I", "think", "this", "be", "cool", "thing", "to", "have", "NUMBER", "May", "be", "in", "next", "release", "NUMBER", "x", "NUMBER", "elfet", "So", "what", "s", "the", "reason", "of", "closing", "in", "this", "case", "OK", "this", "sounds", "more", "clear", "NUMBER", "This", "be", "the", "output", "I", "get", "Executing", "task", "deploy", "writable", "on", "production", "Run", "cd", "home", "user", "deploy", "release", "NUMBER", "chmod", "NUMBER", "NUMBER", "true", "chmod", "miss", "operand", "Try", "chmod", "help", "for", "more", "information", "NUMBER", "from", "this", "set", "writable_dirs", "private", "bootstrap", "cache", "public_html", "assets", "img", "My", "repo", "be", "set", "as", "set", "repository", "repo", "site", "NUMBER", "git", "Firstly", "I", "run", "this", "task", "deploy", "push", "function", "runLocally", "git", "push", "site", "master", "desc", "Git", "push", "to", "site", "But", "when", "deploy", "update_code", "be", "run", "I", "get", "this", "Run", "git", "clone", "depth", "NUMBER", "recursive", "q", "repo", "site", "NUMBER", "git", "home", "user", "deploy", "release", "NUMBER", "NUMBER", "NUMBER", "warning", "depth", "be", "ignored", "in", "local", "clones", "use", "file", "instead", "NUMBER", "What", "s", "the", "problem", "here", "Or", "ssh", "https", "Adding", "Laravel", "s", "artisan", "migration", "helpers", "Q", "A", "Bug", "fix", "no", "New", "feature", "yes", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "n", "a", "Agree", "no", "force", "NUMBER", "But", "without", "force", "in", "production", "environment", "the", "migration", "command", "will", "be", "canceled", "cause", "the", "command", "asks", "for", "a", "confirmation", "Is", "force", "use", "only", "for", "asks", "for", "a", "confirmation", "May", "be", "there", "be", "an", "not", "interactive", "mode", "Pretty", "sure", "all", "force", "do", "be", "to", "automatically", "proceed", "when", "it", "asks", "for", "confirmation", "NUMBER", "flipgame", "be", "right", "without", "it", "the", "command", "would", "be", "cancelled", "NUMBER", "Agreed", "you", "need", "force", "NUMBER", "Perhaps", "also", "add", "php", "artisan", "db", "seed", "and", "a", "php", "artisan", "migrate", "status", "to", "check", "before", "run", "migrate", "Not", "sure", "if", "it", "s", "possible", "to", "do", "the", "confirm", "on", "the", "Deployer", "side", "to", "be", "safe", "It", "just", "says", "nothing", "to", "migrate", "NUMBER", "Force", "be", "purely", "just", "to", "get", "past", "the", "you", "re", "in", "production", "be", "you", "you", "sure", "you", "want", "to", "do", "this", "prompt", "NUMBER", "Do", "we", "need", "deploy", "migrate", "in", "deploy", "task", "I", "wouldn", "t", "do", "that", "by", "default", "NUMBER", "I", "think", "this", "problem", "will", "be", "resolve", "in", "NUMBER", "Thank", "you", "filpgame", "about", "your", "contribution", "NUMBER", "Q", "A", "Bug", "fix", "no", "New", "feature", "yes", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "n", "a", "The", "new", "option", "writable_setgid_group", "allows", "deployments", "that", "use", "a", "common", "group", "between", "web", "server", "user", "and", "project", "user", "use", "the", "exist", "deploy", "writable", "task", "NUMBER", "It", "s", "similar", "to", "LINK", "issuecomment", "NUMBER", "but", "it", "also", "works", "with", "default", "recipes", "NUMBER", "Test", "include", "NUMBER", "May", "be", "add", "fallback", "to", "this", "php", "run", "chgrp", "common_group", "dirs", "run", "chmod", "NUMBER", "dirs", "I", "do", "intend", "to", "get", "back", "to", "this", "update", "and", "get", "the", "docs", "update", "be", "busy", "with", "other", "things", "NUMBER", "NUMBER", "would", "be", "marginally", "better", "but", "my", "NUMBER", "be", "better", "still", "as", "an", "option", "once", "I", "get", "around", "to", "documenting", "it", "NUMBER", "Cool", "I", "ve", "be", "looking", "at", "this", "NUMBER", "I", "ve", "taken", "the", "code", "in", "the", "first", "comment", "for", "NUMBER", "and", "add", "my", "extra", "setgid", "method", "NUMBER", "I", "d", "like", "to", "write", "a", "test", "that", "confirms", "each", "mode", "runs", "the", "expected", "command", "NUMBER", "I", "don", "t", "think", "that", "I", "can", "write", "a", "reliable", "test", "that", "try", "to", "examine", "the", "outcome", "of", "each", "of", "the", "commands", "because", "they", "depend", "on", "things", "such", "as", "a", "group", "the", "user", "be", "in", "or", "an", "OSX", "command", "in", "a", "Linux", "environment", "NUMBER", "I", "don", "t", "see", "a", "simple", "way", "to", "set", "an", "expected", "flag", "NUMBER", "I", "ve", "pass", "verbosity", "NUMBER", "options", "to", "this", "exec", "in", "the", "test", "and", "captured", "the", "output", "so", "I", "could", "scan", "the", "output", "for", "Run", "lines", "NUMBER", "Eugh", "NUMBER", "Any", "better", "suggestions", "Documentation", "will", "be", "very", "helpful", "NUMBER", "I", "ve", "made", "a", "start", "on", "the", "docs", "LINK", "deploywritable_dirs", "Update", "composer", "it", "self", "before", "update", "vendors", "Are", "you", "sure", "to", "do", "it", "automatically", "Maybe", "add", "some", "options", "Yes", "I", "think", "automatic", "update", "whenever", "deploy", "be", "better", "NUMBER", "But", "config", "options", "be", "not", "bad", "elfet", "this", "PR", "be", "same", "as", "download", "new", "composer", "NUMBER", "phar", "but", "it", "be", "downloading", "update", "oanhnn", "you", "be", "right", "ok", "may", "be", "better", "to", "check", "if", "use", "sudo", "try", "to", "update", "composer", "automatically", "sudo", "isn", "t", "solution", "NUMBER", "Agree", "NUMBER", "Hello", "I", "wonder", "if", "the", "Deployer", "support", "Git", "Tags", "passing", "as", "an", "argument", "the", "tag", "that", "wish", "to", "deploy", "or", "if", "it", "be", "possible", "to", "use", "or", "set", "up", "a", "task", "to", "check", "for", "tags", "NUMBER", "Thanks", "NUMBER", "Remove", "shared", "file", "NUMBER", "env", "on", "laravel", "recipe", "Q", "A", "Bug", "fix", "yes", "New", "feature", "no", "BC", "breaks", "yes", "Deprecations", "no", "Fixed", "tickets", "NUMBER", "It", "will", "break", "deployments", "that", "use", "NUMBER", "env", "for", "configuration", "but", "this", "be", "really", "discouraged", "by", "dotenv", "oanhnn", "you", "add", "NUMBER", "env", "NUMBER", "NUMBER", "Is", "it", "do", "not", "needed", "So", "leave", "NUMBER", "env", "NUMBER", "In", "the", "laravel", "recipe", "the", "NUMBER", "env", "file", "be", "defined", "as", "shared", "file", "on", "any", "environment", "and", "therefor", "be", "always", "there", "while", "it", "shouldn", "t", "Dotenv", "loads", "the", "environment", "variables", "from", "NUMBER", "env", "into", "_ENV", "_SERVER", "but", "i", "guess", "the", "most", "of", "the", "time", "the", "NUMBER", "env", "be", "just", "a", "empty", "file", "and", "hopefully", "not", "use", "on", "production", "environments", "Laravel", "NUMBER", "shared", "file", "set", "shared_files", "NUMBER", "env", "Also", "from", "the", "documentation", "Usage", "note", "of", "dotenv", "LINK", "usage", "note", "phpdotenv", "be", "made", "for", "development", "environments", "and", "generally", "should", "not", "be", "use", "in", "production", "NUMBER", "In", "production", "the", "actual", "environment", "variables", "should", "be", "set", "so", "that", "there", "be", "no", "overhead", "of", "loading", "the", "NUMBER", "env", "file", "on", "each", "request", "NUMBER", "This", "can", "be", "achieved", "via", "an", "automate", "deployment", "process", "with", "tool", "like", "Vagrant", "chef", "or", "Puppet", "or", "can", "be", "set", "manually", "with", "cloud", "hosts", "like", "Pagodabox", "and", "Heroku", "NUMBER", "Can", "you", "make", "PR", "for", "it", "Of", "course", "will", "do", "it", "somewhere", "today", "Ok", "PR", "be", "there", "NUMBER", "I", "notice", "that", "there", "was", "a", "test", "recipe", "LaravelTest", "NUMBER", "php", "but", "couldn", "t", "find", "it", "anywhere", "in", "the", "source", "on", "the", "master", "branch", "so", "I", "assume", "it", "was", "remove", "NUMBER", "LINK", "I", "disagree", "with", "this", "NUMBER", "I", "think", "in", "most", "environments", "except", "prod", "it", "s", "helpful", "to", "automatically", "have", "a", "shared", "NUMBER", "env", "NUMBER", "In", "production", "you", "should", "just", "not", "create", "the", "NUMBER", "env", "file", "so", "it", "won", "t", "be", "shared", "NUMBER", "I", "rather", "explicit", "define", "on", "which", "environments", "I", "want", "to", "use", "dotenv", "than", "doing", "it", "implicit", "NUMBER", "You", "re", "right", "on", "the", "shared", "hosting", "part", "I", "was", "actually", "a", "bit", "surprised", "to", "see", "NUMBER", "env", "file", "on", "the", "servers", "because", "I", "only", "use", "it", "for", "development", "environments", "all", "private", "configuration", "on", "staging", "production", "be", "do", "in", "the", "environment", "itself", "and", "I", "m", "not", "really", "use", "anymore", "to", "shared", "hosting", "to", "be", "honest", "NUMBER", "It", "s", "simply", "solve", "by", "add", "set", "shared_files", "to", "the", "deployment", "script", "NUMBER", "The", "only", "reason", "I", "don", "t", "want", "the", "NUMBER", "env", "file", "be", "because", "I", "don", "t", "want", "others", "to", "think", "they", "can", "use", "that", "NUMBER", "env", "file", "to", "fix", "some", "mis", "configuration", "on", "staging", "or", "whatever", "it", "s", "cleaner", "to", "don", "t", "have", "it", "when", "not", "use", "NUMBER", "How", "you", "can", "do", "php", "artisan", "migrate", "without", "NUMBER", "env", "file", "badconker", "You", "can", "set", "your", "environment", "variables", "in", "one", "of", "the", "following", "file", "NUMBER", "bashrc", "etc", "environment", "and", "etc", "bash", "NUMBER", "bashrc", "use", "google", "for", "more", "info", "NUMBER", "Or", "you", "can", "do", "it", "manually", "with", "export", "VAR", "VALUE", "to", "make", "the", "environment", "variables", "available", "for", "all", "sub", "processes", "in", "your", "current", "bash", "session", "SanderSander", "Ok", "but", "these", "variables", "be", "only", "accessible", "from", "terminal", "no", "So", "you", "define", "your", "environment", "variables", "twice", "One", "time", "for", "php", "from", "webserver", "and", "one", "time", "for", "php", "from", "command", "line", "I", "can", "t", "use", "etc", "environment", "because", "i", "need", "different", "variables", "for", "each", "virtual", "host", "NUMBER", "Sorry", "for", "the", "off", "topic", "but", "i", "m", "looking", "for", "NUMBER", "days", "how", "declare", "my", "environnement", "variables", "to", "be", "accessible", "from", "php", "from", "http", "request", "and", "from", "php", "cli", "NUMBER", "confused", "What", "do", "you", "suggest", "in", "the", "case", "where", "there", "be", "multiple", "Laravel", "applications", "run", "on", "the", "same", "server", "For", "web", "request", "I", "could", "set", "them", "in", "each", "application", "s", "SetEnv", "directive", "so", "that", "s", "no", "problem", "but", "what", "would", "I", "do", "for", "artisan", "commands", "Let", "s", "say", "that", "both", "application", "require", "ten", "different", "environment", "variables", "to", "be", "set", "DB_NAME", "DB_PASS", "etc", "NUMBER", "How", "do", "I", "run", "php", "artisan", "migrate", "for", "one", "client", "This", "be", "possible", "when", "use", "the", "NUMBER", "env", "file", "for", "each", "application", "in", "production", "NUMBER", "But", "without", "the", "NUMBER", "env", "file", "NUMBER", "the", "only", "way", "I", "can", "think", "of", "be", "execute", "artisan", "commands", "like", "export", "DB_NAME", "db_name", "export", "DB_PASS", "mysecretpass", "NUMBER", "php", "artisan", "migrate", "which", "clearly", "this", "isn", "t", "a", "good", "solution", "NUMBER", "Any", "ideas", "philbates", "NUMBER", "Every", "laravel", "application", "could", "have", "a", "separated", "user", "every", "user", "has", "his", "own", "environment", "variables", "NUMBER", "So", "if", "you", "want", "to", "run", "an", "artisan", "command", "for", "your", "NUMBER", "application", "you", "just", "switch", "to", "user", "laravel", "app", "NUMBER", "and", "do", "your", "things", "NUMBER", "Apparently", "use", "NUMBER", "env", "on", "production", "for", "laravel", "applications", "be", "an", "acceptable", "way", "of", "get", "things", "do", "so", "i", "would", "suggest", "use", "it", "if", "it", "doesn", "t", "really", "matter", "NUMBER", "So", "you", "confirm", "if", "we", "don", "t", "want", "use", "NUMBER", "env", "file", "we", "must", "declare", "variables", "twice", "one", "in", "user", "environnement", "and", "one", "in", "apache", "NGINX", "configuration", "file", "We", "can", "t", "get", "user", "environnement", "variables", "from", "PHP", "no", "No", "you", "only", "need", "to", "set", "it", "in", "your", "Apache", "virtualhost", "config", "or", "for", "nginx", "I", "usually", "set", "it", "in", "the", "php", "fpm", "config", "NUMBER", "A", "bit", "late", "reply", "but", "you", "should", "cache", "your", "configuration", "NUMBER", "Imho", "you", "should", "still", "share", "the", "NUMBER", "env", "file", "because", "it", "s", "very", "convenient", "NUMBER", "Caching", "the", "config", "will", "load", "the", "NUMBER", "env", "contents", "and", "write", "it", "to", "a", "cache", "file", "NUMBER", "This", "doesn", "t", "use", "environment", "vars", "anymore", "NUMBER", "At", "least", "in", "NUMBER", "It", "would", "be", "great", "to", "see", "how", "long", "task", "was", "run", "NUMBER", "I", "suppose", "Deployer", "Executor", "Informer", "endTask", "can", "output", "some", "more", "data", "NUMBER", "Cool", "idea", "for", "vvv", "option", "What", "be", "the", "reason", "of", "closing", "this", "proposal", "Is", "it", "implement", "already", "It", "seems", "like", "no", "NUMBER", "Deployer", "version", "NUMBER", "And", "I", "run", "deployer", "with", "vvv", "Here", "be", "the", "output", "partially", "Executing", "task", "database", "schema", "update", "on", "prod", "Run", "cd", "www", "release", "NUMBER", "php", "NUMBER", "bin", "console", "doctrine", "schema", "update", "env", "prod", "force", "No", "Metadata", "Classes", "to", "process", "NUMBER", "do", "on", "prod", "Ok", "Executing", "task", "deploy", "symlink", "on", "prod", "Run", "cd", "www", "ln", "sfn", "www", "release", "NUMBER", "current", "Run", "cd", "www", "rm", "release", "do", "on", "prod", "Ok", "I", "see", "no", "information", "on", "the", "task", "duration", "NUMBER", "Am", "I", "doing", "something", "wrong", "Yes", "something", "similar", "NUMBER", "Looks", "good", "for", "me", "NUMBER", "NUMBER", "Is", "it", "possible", "to", "call", "a", "task", "within", "another", "task", "Eg", "if", "something", "be", "miss", "and", "the", "process", "needs", "to", "prepend", "another", "task", "before", "continue", "NUMBER", "up", "Thank", "you", "Sorry", "for", "double", "Q", "NUMBER", "Your", "project", "contains", "file", "with", "permissive", "permissions", "NUMBER", "In", "order", "to", "avoid", "open", "a", "security", "breach", "you", "should", "restrict", "execution", "rights", "on", "following", "file", "src", "Type", "Password", "NUMBER", "php", "bash", "chmod", "a", "x", "src", "Type", "Password", "NUMBER", "php", "_Posted", "from", "SensioLabsInsight", "LINK", "df", "NUMBER", "a", "NUMBER", "dee", "ab", "NUMBER", "c", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "c", "NUMBER", "analyses", "NUMBER", "_", "How", "that", "s", "possible", "NUMBER", "As", "far", "as", "i", "could", "see", "there", "be", "no", "possibility", "to", "include", "global", "composer", "plugins", "after", "downloading", "the", "composer", "NUMBER", "phar", "file", "The", "only", "solution", "would", "be", "to", "write", "the", "whole", "composer", "tasks", "by", "myself", "If", "there", "be", "no", "possibility", "to", "set", "composer", "global", "requirments", "a", "solution", "could", "be", "to", "split", "the", "deploy", "vendors", "task", "in", "two", "tasks", "NUMBER", "task", "to", "download", "phar", "file", "NUMBER", "task", "to", "execute", "composer", "install", "NUMBER", "This", "way", "the", "users", "could", "easy", "add", "a", "task", "after", "downloading", "the", "phar", "NUMBER", "which", "contains", "the", "global", "definitions", "NUMBER", "task", "deploy", "afterPharDownload", "function", "run", "php", "composer", "NUMBER", "phar", "global", "require", "fxp", "composer", "asset", "plugin", "NUMBER", "Q", "A", "Bug", "fix", "no", "New", "feature", "yes", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "Laravel", "script", "artisan", "has", "a", "lots", "of", "useful", "commands", "NUMBER", "Among", "them", "there", "be", "the", "down", "and", "up", "commands", "NUMBER", "Maybe", "we", "should", "create", "a", "complete", "wrapper", "to", "run", "artisan", "commands", "from", "deployer", "like", "migration", "and", "such", "NUMBER", "Fixes", "NUMBER", "It", "merge", "we", "will", "have", "two", "recipe", "symfony", "NUMBER", "php", "symfony", "NUMBER", "php", "Maybe", "it", "s", "better", "to", "add", "configuration", "for", "Symfony", "NUMBER", "in", "symfony", "NUMBER", "php", "recipe", "php", "set", "symfony_version", "NUMBER", "Like", "this", "The", "only", "issue", "I", "see", "with", "this", "be", "that", "it", "will", "clutter", "the", "recipe", "with", "code", "like", "this", "if", "get", "symfony_version", "NUMBER", "set", "var_dir", "var", "else", "set", "var_dir", "app", "But", "a", "config", "option", "might", "be", "a", "better", "option", "since", "it", "can", "then", "be", "use", "in", "other", "areas", "as", "well", "E", "NUMBER", "G", "a", "user", "can", "set", "custom", "tasks", "based", "on", "the", "Symfony", "version", "If", "you", "be", "happy", "with", "this", "approach", "then", "I", "will", "update", "the", "PR", "I", "think", "we", "need", "to", "discus", "it", "before", "NUMBER", "Support", "Symfony", "NUMBER", "very", "important", "NUMBER", "What", "deployphp", "maintainer", "thinks", "oanhnn", "What", "to", "do", "if", "framework", "very", "different", "Like", "symfony", "NUMBER", "and", "NUMBER", "I", "think", "better", "it", "s", "to", "have", "both", "options", "Configs", "for", "same", "separate", "recipe", "for", "diff", "NUMBER", "Very", "old", "we", "do", "not", "support", "for", "now", "I", "think", "lets", "merge", "symfony", "NUMBER", "php", "as", "no", "more", "code", "needed", "to", "be", "write", "to", "support", "it", "NUMBER", "But", "docs", "really", "needed", "NUMBER", "Now", "we", "have", "it", "Can", "anybody", "update", "docs", "Thanks", "elfet", "NUMBER", "I", "have", "update", "the", "docs", "here", "deployphp", "docs", "NUMBER", "Seems", "like", "the", "symfony", "recipe", "doesn", "t", "support", "the", "symfony", "NUMBER", "directory", "structure", "yet", "NUMBER", "console", "command", "moved", "to", "bin", "folder", "cache", "logs", "moved", "to", "var", "folder", "NUMBER", "I", "guess", "the", "recipe", "just", "needs", "to", "be", "tweaked", "some", "more", "to", "accommodate", "these", "IMO", "Deployer", "should", "support", "Symfony", "NUMBER", "it", "makes", "it", "easier", "to", "integrate", "with", "a", "project", "NUMBER", "It", "might", "not", "be", "always", "be", "immediately", "clear", "for", "developers", "what", "they", "need", "to", "do", "to", "add", "support", "for", "Symfony", "NUMBER", "Also", "Deployer", "already", "support", "Drupal", "NUMBER", "NUMBER", "Yii", "Yii", "NUMBER", "so", "why", "not", "add", "support", "Symfony", "NUMBER", "as", "well", "I", "have", "created", "a", "simple", "PR", "NUMBER", "to", "add", "a", "new", "recipe", "for", "Symfony", "NUMBER", "Symfony", "NUMBER", "be", "stable", "for", "a", "couple", "of", "months", "now", "NUMBER", "But", "I", "don", "t", "think", "the", "Sf", "NUMBER", "structure", "should", "be", "default", "since", "it", "might", "take", "a", "while", "for", "all", "projects", "to", "upgrade", "to", "version", "NUMBER", "That", "be", "why", "I", "suggest", "having", "a", "recipe", "for", "both", "version", "NUMBER", "and", "NUMBER", "That", "makes", "it", "the", "easiest", "for", "developers", "to", "get", "start", "with", "Sf", "NUMBER", "Not", "everyone", "will", "always", "read", "the", "docs", "I", "think", "having", "framework", "version", "symfony", "symfony", "NUMBER", "recipe", "bad", "idea", "NUMBER", "A", "lot", "of", "task", "will", "be", "same", "as", "a", "lot", "of", "configs", "NUMBER", "But", "for", "now", "i", "do", "not", "see", "any", "other", "solution", "NUMBER", "Maybe", "have", "a", "config", "for", "version", "I", "think", "having", "framework", "version", "symfony", "symfony", "NUMBER", "recipe", "bad", "idea", "NUMBER", "A", "lot", "of", "task", "will", "be", "same", "as", "a", "lot", "of", "configs", "But", "you", "do", "this", "for", "Drupal", "NUMBER", "NUMBER", "and", "Yii", "NUMBER", "NUMBER", "Yes", "maybe", "it", "s", "time", "for", "finding", "better", "solution", "NUMBER", "Or", "to", "keep", "add", "version", "recipes", "NUMBER", "framework", "version", "be", "simplest", "solution", "for", "now", "NUMBER", "Maybe", "live", "it", "as", "it", "Hi", "When", "the", "following", "line", "runs", "from", "deployer", "to", "my", "VPS", "run", "cd", "release_path", "app", "npm", "install", "it", "tells", "me", "that", "npm", "be", "not", "install", "however", "when", "I", "run", "that", "command", "directly", "through", "my", "terminal", "window", "it", "works", "I", "m", "stumped", "I", "be", "also", "use", "the", "same", "user", "for", "SSH", "and", "Deployer", "I", "ve", "had", "a", "look", "into", "the", "issue", "and", "the", "problem", "be", "that", "the", "PATH", "for", "the", "deploy", "user", "isn", "t", "properly", "initialised", "when", "SSH", "ing", "into", "the", "server", "use", "PHPSecLib", "NUMBER", "SSH", "use", "Putty", "the", "path", "be", "PATH", "usr", "local", "bin", "usr", "bin", "usr", "local", "sbin", "usr", "sbin", "home", "deploy", "bin", "home", "deploy", "bin", "SSH", "with", "deployer", "PHPSecLib", "the", "path", "be", "PATH", "usr", "local", "bin", "usr", "bin", "There", "be", "a", "couple", "of", "options", "to", "fix", "it", "NUMBER", "Firstly", "you", "can", "append", "source", "home", "deploy", "NUMBER", "bash_profile", "to", "each", "of", "your", "deployer", "run", "function", "which", "will", "find", "npm", "node", "etc", "NUMBER", "e", "NUMBER", "g", "NUMBER", "run", "source", "home", "deploy", "NUMBER", "bash_profile", "npm", "Secondly", "you", "could", "install", "bower", "node", "npm", "etc", "in", "the", "usr", "local", "bin", "directory", "of", "the", "server", "and", "this", "would", "mean", "that", "the", "standard", "PATH", "would", "still", "find", "the", "binaries", "NUMBER", "I", "think", "we", "need", "same", "pages", "from", "console", "be", "work", "properly", "but", "when", "I", "try", "exec", "dep", "magento", "like", "a", "native", "php", "it", "returns", "code", "NUMBER", "test", "NUMBER", "php", "php", "TAG", "run", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Task", "Task", "run", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "call_user_func", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "closure", "var", "www", "deploy", "demo", "deployer", "shell", "recipe", "flush", "NUMBER", "php", "NUMBER", "NUMBER", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "env", "var", "www", "deploy", "demo", "deployer", "shell", "recipe", "flush", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Environment", "get", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "call_user_func", "phar", "usr", "local", "bin", "dep", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "phar", "usr", "local", "bin", "dep", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "closure", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "phar", "usr", "local", "bin", "dep", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "run", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "checkConnection", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "connect", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "phpseclib", "System", "SSH", "Agent", "__construct", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "user_error", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "System", "SSH", "Agent", "NUMBER", "php", "NUMBER", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "magento", "p", "parallel", "do", "I", "move", "in", "the", "right", "direction", "NUMBER", "I", "made", "small", "modification", "oStrictHostKeyChecking", "no", "i", "home", "user", "NUMBER", "ssh", "key", "NUMBER", "pem", "bash", "sudo", "u", "www", "data", "S", "ssh", "oStrictHostKeyChecking", "no", "i", "home", "user", "NUMBER", "ssh", "key", "NUMBER", "pem", "ec", "NUMBER", "user", "NUMBER", "xx", "NUMBER", "Could", "not", "create", "directory", "var", "www", "NUMBER", "ssh", "NUMBER", "Failed", "to", "add", "the", "host", "to", "the", "list", "of", "know", "hosts", "var", "www", "NUMBER", "ssh", "known_hosts", "NUMBER", "Last", "login", "Fri", "Jan", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "from", "NUMBER", "xx", "__", "__", "_", "_", "Amazon", "Linux", "AMI", "___", "___", "___", "LINK", "linux", "ami", "NUMBER", "release", "note", "my", "deploy", "NUMBER", "php", "php", "server", "magentodemo", "NUMBER", "Xxx", "NUMBER", "com", "NUMBER", "xx", "NUMBER", "user", "ec", "NUMBER", "user", "pemFile", "home", "user", "NUMBER", "ssh", "key", "NUMBER", "pem", "forwardAgent", "env", "deploy_path", "var", "www", "html", "NUMBER", "Stage", "in", "not", "required", "in", "my", "custom", "magento", "recipe", "it", "works", "from", "console", "bash", "dep", "magento", "h", "Usage", "magento", "options", "Options", "p", "parallel", "Run", "test", "in", "parallel", "NUMBER", "h", "help", "Display", "this", "help", "message", "q", "quiet", "Do", "not", "output", "any", "message", "V", "version", "Display", "this", "application", "version", "ansi", "Force", "ANSI", "output", "no", "ansi", "Disable", "ANSI", "output", "n", "no", "interaction", "Do", "not", "ask", "any", "interactive", "question", "f", "file", "FILE", "Specify", "Deployer", "file", "NUMBER", "tag", "TAG", "Tag", "to", "deploy", "NUMBER", "package", "PACKAGES", "Packages", "to", "deploy", "NUMBER", "package", "swissup", "core", "swissup", "askit", "argento", "theme", "ARGENTO", "THEME", "Argento", "theme", "NUMBER", "default", "pure", "NUMBER", "v", "vv", "vvv", "verbose", "Increase", "the", "verbosity", "of", "message", "NUMBER", "for", "normal", "output", "NUMBER", "for", "more", "verbose", "output", "and", "NUMBER", "for", "debug", "Forget", "about", "magento", "recipe", "NUMBER", "I", "created", "small", "task", "in", "deploy", "NUMBER", "php", "for", "simplicity", "NUMBER", "php", "task", "release", "list", "function", "release", "implode", "n", "env", "releases_list", "writeln", "release", "Create", "test", "NUMBER", "php", "php", "TAG", "www", "data", "NUMBER", "Linux", "ip", "NUMBER", "NUMBER", "xx", "NUMBER", "NUMBER", "NUMBER", "amzn", "NUMBER", "x", "NUMBER", "_", "NUMBER", "NUMBER", "SMP", "Sat", "Oct", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "UTC", "NUMBER", "x", "NUMBER", "_", "NUMBER", "x", "NUMBER", "_", "NUMBER", "x", "NUMBER", "_", "NUMBER", "GNU", "Linux", "NUMBER", "PHP", "Notice", "SSH_AUTH_SOCK", "not", "find", "in", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "System", "SSH", "Agent", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Stack", "trace", "PHP", "NUMBER", "main", "usr", "local", "bin", "dep", "NUMBER", "NUMBER", "PHP", "NUMBER", "user_error", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "System", "SSH", "Agent", "NUMBER", "php", "NUMBER", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "release", "list", "p", "parallel", "Array", "NUMBER", "www", "data", "NUMBER", "Executing", "task", "release", "list", "Thanks", "for", "your", "helps", "NUMBER", "I", "fix", "temporary", "this", "problem", "I", "created", "wwwdeploy", "NUMBER", "sh", "bash", "script", "NUMBER", "sh", "bin", "sh", "eval", "ssh", "agent", "s", "echo", "SSH_AUTH_SOCK", "ssh", "add", "home", "user", "NUMBER", "ssh", "key", "NUMBER", "pem", "ssh", "add", "l", "php", "usr", "local", "bin", "dep", "f", "location", "shell", "deploy", "NUMBER", "php", "release", "list", "chmod", "x", "wwwdeploy", "NUMBER", "sh", "php", "code", "looks", "like", "this", "php", "command", "location", "shell", "deploy", "NUMBER", "sh", "exec", "command", "It", "works", "NUMBER", "Now", "we", "can", "specify", "a", "path", "for", "the", "composer", "command", "avoiding", "the", "download", "Q", "A", "Bug", "fix", "no", "New", "feature", "yes", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "Because", "sometimes", "we", "have", "composer", "on", "the", "server", "but", "cannot", "be", "reached", "with", "a", "simple", "composer", "NUMBER", "On", "a", "server", "I", "use", "for", "deploy", "the", "command", "be", "composer", "NUMBER", "phar", "NUMBER", "With", "this", "setting", "we", "can", "avoid", "downloading", "composer", "Docs", "add", "But", "you", "can", "always", "add", "it", "NUMBER", "In", "NUMBER", "bashrc", "alias", "composer", "bin", "composer", "Ok", "seems", "fair", "NUMBER", "elfet", "I", "checked", "and", "I", "already", "had", "that", "line", "in", "my", "NUMBER", "bashrc", "The", "problem", "lies", "in", "the", "commandExist", "function", "NUMBER", "The", "hash", "command", "doesn", "t", "follow", "aliases", "NUMBER", "Maybe", "you", "should", "change", "that", "to", "command", "NUMBER", "LINK", "if", "a", "program", "exists", "from", "a", "bash", "script", "We", "keep", "composer", "NUMBER", "phar", "in", "project", "repository", "to", "keep", "its", "version", "under", "control", "there", "were", "some", "situations", "when", "phar", "file", "on", "getcomposer", "NUMBER", "org", "was", "broken", "or", "installation", "based", "on", "the", "same", "composer", "NUMBER", "lock", "gave", "us", "different", "results", "on", "different", "composer", "NUMBER", "phar", "version", "dev", "vs", "prod", "NUMBER", "NUMBER", "for", "feature", "Awesome", "Another", "usecase", "sometimes", "there", "be", "various", "PHP", "version", "available", "for", "CLI", "and", "you", "want", "to", "ensure", "the", "correct", "one", "be", "use", "NUMBER", "With", "this", "change", "you", "can", "simply", "prepend", "it", "thus", "NUMBER", "Hi", "I", "configured", "my", "deploy", "NUMBER", "php", "file", "with", "my", "information", "about", "the", "repository", "NUMBER", "However", "when", "run", "the", "deployer", "it", "returns", "me", "this", "error", "below", "NUMBER", "What", "might", "be", "happening", "RuntimeException", "Host", "key", "verification", "fail", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "Thanks", "Bruno", "Fonseca", "Hello", "The", "problem", "was", "because", "apparently", "my", "instance", "did", "not", "know", "the", "repository", "that", "I", "was", "trying", "to", "access", "in", "other", "words", "I", "had", "never", "accessed", "the", "repository", "and", "saved", "the", "git_cache", "NUMBER", "In", "this", "case", "I", "accessed", "remotely", "and", "made", "a", "checkout", "of", "the", "repository", "without", "the", "deployer", "NUMBER", "It", "worked", "NUMBER", "It", "would", "be", "interesting", "to", "add", "to", "a", "nearby", "feature", "the", "deployer", "this", "possibility", "if", "there", "be", "no", "git", "cache", "the", "deployer", "request", "User", "and", "password", "NUMBER", "I", "do", "not", "know", "if", "you", "ever", "work", "that", "way", "and", "I", "do", "not", "know", "NUMBER", "Grateful", "NUMBER", "I", "m", "still", "get", "this", "issue", "I", "m", "on", "an", "EC", "NUMBER", "server", "if", "that", "helps", "NUMBER", "Try", "and", "log", "in", "use", "the", "same", "user", "use", "terminal", "ensure", "it", "works", "use", "your", "key", "then", "retry", "it", "crashes", "if", "any", "prompt", "appears", "when", "first", "logging", "in", "NUMBER", "jakenoble", "nice", "one", "NUMBER", "I", "had", "created", "an", "ssh", "key", "for", "the", "wrong", "user", "duhhhhh", "Thanks", "Jake", "Is", "there", "a", "way", "to", "switch", "to", "a", "specific", "user", "e", "NUMBER", "g", "NUMBER", "deploy", "user", "before", "run", "all", "tasks", "on", "the", "server", "In", "effect", "SSH", "into", "the", "server", "switch", "to", "deploy", "user", "then", "do", "all", "the", "tasks", "specified", "NUMBER", "TIA", "As", "per", "LINK", "configuration", "Q", "A", "Bug", "fix", "yes", "New", "feature", "no", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "oanhnn", "did", "that", "BC", "breaks", "Laravel", "NUMBER", "NUMBER", "This", "recipe", "was", "already", "for", "Laravel", "NUMBER", "The", "writable", "folders", "for", "Laravel", "NUMBER", "be", "bootstrap", "cache", "and", "storage", "NUMBER", "For", "Laravel", "NUMBER", "the", "documentation", "says", "storage", "and", "vendor", "NUMBER", "But", "in", "my", "experience", "there", "be", "no", "need", "to", "make", "the", "vendor", "folder", "writable", "NUMBER", "It", "was", "briefly", "required", "when", "in", "the", "beginning", "of", "the", "NUMBER", "development", "the", "framework", "use", "to", "create", "file", "and", "put", "them", "in", "the", "vendor", "folder", "NUMBER", "If", "open", "a", "pull", "request", "on", "the", "documentation", "to", "fix", "that", "elfet", "I", "tried", "creating", "a", "new", "Laravel", "NUMBER", "project", "and", "it", "still", "uses", "the", "vendor", "folder", "NUMBER", "Maybe", "we", "should", "point", "out", "in", "the", "documentation", "that", "this", "recipe", "be", "for", "Laravel", "NUMBER", "the", "LTS", "version", "or", "later", "Hello", "I", "be", "use", "the", "Deployer", "in", "my", "Laravel", "NUMBER", "project", "and", "so", "far", "had", "no", "problem", "in", "configuration", "and", "application", "deployment", "NUMBER", "However", "I", "like", "to", "know", "how", "to", "put", "a", "branch", "production", "for", "when", "you", "deploy", "use", "it", "as", "standard", "NUMBER", "Currently", "when", "you", "deploy", "you", "re", "use", "my", "development", "branch", "NUMBER", "Grateful", "NUMBER", "Bruno", "Fonseca", "NUMBER", "It", "would", "be", "good", "to", "run", "other", "tasks", "in", "task", "definition", "such", "as", "task", "my_task", "function", "run_task", "deploy", "prepare", "run", "something", "I", "want", "to", "do", "run_task", "deploy", "release", "run", "another", "thing", "I", "want", "to", "do", "NUMBER", "Problem", "with", "test", "has", "be", "appeared", "because", "Travis", "has", "change", "IPv", "NUMBER", "to", "IPv", "NUMBER", "see", "IPv", "NUMBER", "no", "longer", "present", "section", "in", "LINK", "ci", "NUMBER", "com", "NUMBER", "NUMBER", "NUMBER", "moving", "to", "a", "more", "elastic", "future", "On", "one", "shared", "host", "I", "find", "an", "issue", "with", "current", "symlinks", "creation", "NUMBER", "Currently", "generate", "symlinks", "be", "absolute", "and", "it", "causes", "problem", "with", "apache", "rewrite", "on", "a", "shared", "environment", "When", "I", "change", "the", "symlink", "cretion", "to", "relative", "ln", "srnf", "NUMBER", "everthing", "works", "fine", "NUMBER", "I", "can", "make", "a", "PR", "but", "wanted", "to", "check", "if", "this", "wasn", "t", "by", "design", "NUMBER", "Also", "when", "make", "the", "change", "should", "this", "be", "configurable", "or", "make", "it", "relative", "by", "default", "oanhnn", "absolute", "symlinks", "worked", "for", "me", "very", "well", "on", "my", "own", "servers", "NUMBER", "On", "this", "particular", "shared", "host", "I", "dont", "have", "access", "to", "the", "configuraion", "file", "NUMBER", "I", "have", "only", "htaccess", "that", "I", "can", "manage", "where", "I", "rewrite", "the", "path", "to", "the", "current", "directory", "Options", "FollowSymLinks", "RewriteEngine", "on", "RewriteRule", "NUMBER", "current", "NUMBER", "L", "The", "problem", "with", "absolute", "links", "there", "be", "that", "the", "real", "path", "to", "the", "web", "dir", "be", "something", "like", "this", "nfs", "something", "more", "letter", "shard", "random", "stuff", "home", "my", "NUMBER", "domain", "NUMBER", "com", "web", "Apache", "and", "scripts", "don", "t", "have", "access", "to", "anything", "before", "home", "also", "those", "parts", "tend", "to", "change", "NUMBER", "I", "will", "test", "the", "relative", "recipe", "in", "other", "environments", "and", "get", "back", "with", "the", "results", "but", "so", "far", "the", "recipe", "work", "on", "the", "shared", "host", "with", "everything", "deploy", "rollback", "consequent", "deploys", "shared", "file", "and", "dirs", "NUMBER", "thanks", "NUMBER", "oanhnn", "thanks", "tried", "that", "already", "with", "various", "variations", "like", "NUMBER", "the", "problem", "there", "be", "that", "the", "absolute", "symlink", "get", "permission", "problem", "that", "I", "can", "see", "in", "logs", "so", "it", "would", "be", "something", "like", "openbasedir", "thing", "NUMBER", "As", "I", "said", "will", "try", "with", "different", "setups", "and", "come", "back", "with", "results", "NUMBER", "So", "far", "from", "the", "discussion", "I", "assume", "that", "even", "if", "I", "will", "make", "the", "PR", "relative", "symlinks", "should", "be", "an", "configurable", "option", "per", "enviorment", "NUMBER", "oanhnn", "look", "around", "if", "capistrano", "get", "these", "problem", "in", "the", "past", "too", "and", "they", "had", "NUMBER", "It", "totaly", "depends", "on", "the", "configuration", "on", "the", "shared", "host", "but", "problem", "like", "mine", "be", "not", "that", "uncommon", "NUMBER", "for", "reference", "LINK", "symlinks", "and", "mediatemples", "gridserver", "NUMBER", "NUMBER", "LINK", "capistrano", "composer", "deploy", "mediatemple", "gridservice", "I", "have", "the", "same", "problem", "but", "a", "different", "cause", "D", "For", "me", "the", "issue", "with", "absolute", "symlinks", "be", "that", "they", "break", "in", "the", "backup", "which", "be", "pretty", "annoying", "NUMBER", "Is", "there", "a", "specific", "reason", "that", "one", "would", "prefer", "absolute", "symlinks", "over", "relative", "ones", "What", "s", "a", "task", "for", "next", "Deployer", "v", "NUMBER", "NUMBER", "I", "can", "confirm", "NUMBER", "We", "have", "two", "shared", "hostings", "where", "absolute", "symlinks", "be", "not", "work", "NUMBER", "I", "confirm", "too", "NUMBER", "It", "s", "a", "quite", "common", "practice", "to", "chroot", "sftp", "shells", "and", "make", "directories", "accessible", "use", "bind", "mounts", "NUMBER", "For", "example", "your", "htdocs", "directory", "could", "be", "var", "www", "but", "show", "as", "htdocs", "inside", "the", "sftp", "shell", "NUMBER", "If", "you", "then", "do", "a", "ln", "s", "var", "www", "foo", "var", "www", "bar", "then", "for", "sftp", "htdocs", "bar", "be", "a", "broken", "link", "since", "var", "www", "foo", "simply", "do", "not", "exists", "inside", "the", "chroot", "NUMBER", "Now", "if", "you", "have", "a", "recipe", "that", "do", "a", "ln", "sf", "deploy_path", "current", "htdocs", "var", "www", "your", "entire", "web", "root", "becomes", "inaccessible", "by", "ftp", "NUMBER", "IMO", "a", "good", "solution", "would", "be", "to", "make", "all", "symlinks", "relative", "to", "deploy_path", "e", "NUMBER", "g", "php", "within", "deploy_path", "function", "run", "ln", "srfn", "release", "release_name", "current", "One", "thing", "that", "the", "PR", "will", "probably", "need", "to", "take", "into", "consideration", "be", "that", "the", "r", "parameter", "for", "ln", "wasn", "t", "add", "until", "rather", "recently", "in", "NUMBER", "NUMBER", "Media", "Temple", "and", "DreamHost", "be", "both", "still", "on", "NUMBER", "and", "I", "doubt", "they", "re", "the", "only", "ones", "NUMBER", "Adding", "r", "in", "a", "version", "that", "doesn", "t", "support", "it", "will", "cause", "the", "command", "to", "fail", "NUMBER", "I", "was", "able", "to", "get", "this", "work", "for", "my", "use", "case", "with", "some", "basic", "string", "manipulation", "LINK", "NUMBER", "That", "s", "probably", "isn", "t", "robust", "enough", "to", "cover", "everyone", "s", "use", "cases", "but", "it", "might", "be", "a", "good", "starting", "point", "for", "a", "PR", "if", "anyone", "be", "interested", "NUMBER", "May", "be", "detect", "be", "r", "avaiable", "from", "help", "command", "May", "be", "detect", "be", "r", "avaiable", "from", "help", "command", "That", "s", "a", "good", "thought", "but", "since", "ln", "r", "isn", "t", "widely", "available", "yet", "won", "t", "the", "solution", "need", "to", "accommodate", "environments", "that", "doesn", "t", "support", "it", "If", "that", "s", "the", "case", "then", "it", "seems", "like", "it", "d", "be", "easier", "to", "just", "avoid", "r", "altogether", "until", "it", "s", "widely", "available", "NUMBER", "i", "NUMBER", "e", "NUMBER", "it", "seems", "like", "this", "php", "todo", "migrate", "to", "ln", "srnf", "when", "coreutils", "NUMBER", "be", "widely", "available", "on", "shared", "hosts", "run", "custom_function_to_generate_relative_symlink_command", "would", "be", "simpler", "than", "this", "if", "custom_function_to_detect_if_ln_supports_r_param", "run", "ln", "srfn", "NUMBER", "else", "run", "custom_function_to_generate_relative_symlink_command", "Awesome", "beer", "Great", "job", "Q", "A", "Bug", "fix", "no", "New", "feature", "no", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "Php", "NUMBER", "be", "stable", "so", "it", "should", "be", "remove", "from", "failures", "Q", "A", "Bug", "fix", "yes", "New", "feature", "no", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "NUMBER", "Default", "be", "set", "to", "true", "current", "configuration", "do", "not", "need", "to", "be", "change", "NUMBER", "If", "you", "do", "not", "use", "AsseticBundle", "just", "switch", "flag", "to", "false", "php", "set", "dump_assets", "true", "I", "run", "into", "the", "situation", "where", "I", "couldn", "t", "authenticate", "on", "a", "server", "that", "uses", "password", "auth", "but", "still", "needs", "agent", "forwarding", "to", "be", "enable", "to", "clone", "the", "repository", "NUMBER", "In", "other", "words", "the", "following", "will", "never", "try", "to", "authenticate", "with", "a", "password", "server", "some", "server", "NUMBER", "NUMBER", "user", "username", "password", "strongpassword", "forwardAgent", "If", "this", "be", "a", "wontfix", "I", "think", "it", "should", "at", "least", "throw", "an", "error", "message", "when", "two", "incompatible", "authentication", "schemes", "be", "use", "at", "the", "same", "time", "smile", "PS", "Deployer", "seems", "great", "so", "far", "NUMBER", "Thanks", "for", "make", "it", "Q", "A", "Bug", "fix", "no", "New", "feature", "no", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "oanhnn", "As", "request", "NUMBER", "Cool", "Thanks", "I", "m", "not", "english", "NUMBER", "I", "m", "sorry", "Thanks", "for", "the", "great", "program", "deployer", "server", "state", "ubuntu", "laravel", "NUMBER", "composer", "NUMBER", "json", "deployer", "deployer", "NUMBER", "phpseclib", "phpseclib", "NUMBER", "herzult", "php", "ssh", "NUMBER", "react", "event", "loop", "NUMBER", "react", "react", "NUMBER", "step", "NUMBER", "php", "NUMBER", "build", "deployer", "NUMBER", "phar", "create", "ok", "step", "NUMBER", "TAG", "user", "bengi", "NUMBER", "password", "env", "deploy_path", "home", "bengi", "NUMBER", "www", "stage", "dep", "prod", "stage", "dev", "upload", "NUMBER", "home", "bengi", "NUMBER", "www", "write", "Deploy", "do", "desc", "Doing", "my", "stuff", "step", "NUMBER", "ls", "al", "drwxrwxr", "x", "NUMBER", "vagrant", "vagrant", "NUMBER", "Dec", "NUMBER", "NUMBER", "NUMBER", "app", "rwxr", "xr", "x", "NUMBER", "vagrant", "vagrant", "NUMBER", "Dec", "NUMBER", "NUMBER", "NUMBER", "artisan", "drwxr", "xr", "x", "NUMBER", "vagrant", "vagrant", "NUMBER", "Dec", "NUMBER", "NUMBER", "NUMBER", "node_modules", "drwxrwxr", "x", "NUMBER", "vagrant", "vagrant", "NUMBER", "Aug", "NUMBER", "NUMBER", "NUMBER", "test", "drwxrwxr", "x", "NUMBER", "vagrant", "vagrant", "NUMBER", "Dec", "NUMBER", "NUMBER", "NUMBER", "vendor", "dep", "my_task", "Result", "PHP", "Warning", "copy", "home", "bengi", "NUMBER", "www", "node_modules", "browserify", "test", "relative_dedupe", "index", "NUMBER", "js", "fail", "to", "open", "stream", "No", "such", "file", "or", "directory", "in", "phar", "usr", "local", "bin", "dep", "src", "Server", "Local", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Stack", "trace", "PHP", "NUMBER", "main", "usr", "local", "bin", "dep", "NUMBER", "Remote", "Server", "Result", "pwd", "home", "bengi", "NUMBER", "www", "ls", "al", "drwxrwxrwx", "NUMBER", "bengi", "NUMBER", "bengi", "NUMBER", "NUMBER", "Dec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "drwxr", "xr", "x", "NUMBER", "bengi", "NUMBER", "bengi", "NUMBER", "NUMBER", "Dec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TAG", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "Conclusion", "remove", "symfony", "symfony", "v", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "finder", "NUMBER", "satisfiable", "by", "symfony", "finder", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "finder", "NUMBER", "satisfiable", "by", "symfony", "finder", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "finder", "NUMBER", "satisfiable", "by", "symfony", "finder", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "finder", "NUMBER", "satisfiable", "by", "symfony", "finder", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "finder", "NUMBER", "satisfiable", "by", "symfony", "finder", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "don", "t", "install", "symfony", "finder", "v", "NUMBER", "don", "t", "install", "symfony", "symfony", "v", "NUMBER", "Installation", "request", "for", "symfony", "symfony", "NUMBER", "satisfiable", "by", "symfony", "symfony", "v", "NUMBER", "NUMBER", "Installation", "request", "for", "deployer", "deployer", "NUMBER", "satisfiable", "by", "deployer", "deployer", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Yes", "We", "need", "to", "support", "Symfony", "NUMBER", "NUMBER", "I", "already", "made", "a", "pull", "request", "that", "should", "fix", "the", "outdate", "dependencies", "in", "elfet", "purephp", "NUMBER", "This", "repo", "be", "still", "active", "so", "the", "outdate", "dependencies", "will", "be", "fix", "in", "the", "near", "future", "NUMBER", "As", "for", "kherge", "amend", "i", "m", "guessing", "this", "will", "never", "get", "fix", "sees", "the", "latest", "activity", "be", "more", "than", "a", "year", "old", "NUMBER", "Another", "pull", "request", "be", "already", "open", "for", "more", "than", "NUMBER", "days", "no", "feedback", "or", "comment", "from", "the", "owner", "or", "nothing", "NUMBER", "Maybe", "u", "guys", "should", "fork", "that", "repo", "and", "fix", "it", "yourself", "there", "s", "only", "one", "outdate", "dependency", "to", "the", "symfony", "console", "NUMBER", "Or", "if", "you", "re", "willing", "i", "will", "fork", "and", "fix", "it", "than", "update", "your", "composer", "NUMBER", "json", "and", "PR", "it", "NUMBER", "If", "you", "guys", "do", "that", "you", "can", "re", "open", "LINK", "And", "we", "can", "all", "start", "use", "deployer", "in", "symfony", "NUMBER", "projects", "This", "makes", "deployer", "incompatible", "with", "Laravel", "NUMBER", "too", "oanhnn", "the", "problem", "with", "the", "phar", "be", "that", "be", "many", "months", "old", "why", "no", "release", "has", "be", "tag", "since", "Try", "start", "moving", "NUMBER", "release", "next", "week", "NUMBER", "NUMBER", "I", "d", "like", "to", "use", "symfony", "process", "NUMBER", "but", "Problem", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "process", "NUMBER", "no", "matching", "package", "find", "NUMBER", "Installation", "request", "for", "deployer", "deployer", "NUMBER", "satisfiable", "by", "deployer", "deployer", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Bump", "can", "you", "please", "use", "NUMBER", "NUMBER", "as", "a", "constraint", "Has", "anybody", "managed", "to", "get", "this", "to", "work", "can", "t", "find", "it", "in", "docs", "php", "argument", "stage", "InputArgument", "OPTIONAL", "Run", "tasks", "only", "on", "this", "server", "or", "group", "of", "servers", "NUMBER", "option", "tag", "null", "InputOption", "VALUE_OPTIONAL", "Tag", "to", "deploy", "NUMBER", "php", "input", "getOption", "tag", "thanks", "NUMBER", "I", "didn", "t", "see", "the", "input", "function", "NUMBER", "Can", "any", "body", "figure", "out", "why", "Seems", "like", "the", "IP_REG_EXP", "LINK", "L", "NUMBER", "only", "accounts", "for", "IPv", "NUMBER", "Maybe", "it", "should", "be", "something", "like", "NUMBER", "NUMBER", "I", "successfully", "deployed", "on", "the", "remote", "VPS", "NUMBER", "and", "now", "I", "try", "to", "point", "the", "Apache", "default", "welcome", "page", "to", "path", "to", "project", "CURRENT", "public", "NUMBER", "I", "change", "the", "file", "NUMBER", "default", "NUMBER", "conf", "in", "sites", "enable", "from", "DocumentRoot", "var", "www", "html", "to", "DocumentRoot", "var", "www", "html", "current", "public", "LINK", "but", "I", "get", "server", "error", "when", "I", "browse", "to", "the", "homepage", "NUMBER", "my", "deploy", "NUMBER", "php", "php", "require", "recipe", "laravel", "NUMBER", "php", "server", "prod", "myipaddress", "NUMBER", "user", "root", "password", "mypassword", "stage", "production", "env", "deploy_path", "var", "www", "html", "set", "repository", "LINK", "Please", "anybody", "can", "help", "me", "on", "how", "to", "point", "correctly", "to", "current", "public", "folder", "NUMBER", "It", "seems", "your", "Apache", "config", "be", "something", "wrong", "NUMBER", "See", "your", "Apache", "error", "NUMBER", "log", "NUMBER", "kenjis", "I", "get", "the", "following", "in", "error", "NUMBER", "log", "var", "log", "apache", "NUMBER", "Sun", "Nov", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "pid", "NUMBER", "client", "NUMBER", "cb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "ca", "NUMBER", "f", "NUMBER", "b", "NUMBER", "NUMBER", "PHP", "Fatal", "error", "Uncaught", "exception", "UnexpectedValueException", "with", "message", "There", "be", "no", "exist", "directory", "at", "var", "www", "html", "release", "NUMBER", "storage", "logs", "and", "its", "not", "buildable", "Permission", "denied", "in", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "nStack", "trace", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "Monolog", "Handler", "StreamHandler", "createDir", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "Monolog", "Handler", "StreamHandler", "write", "Array", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "Monolog", "Handler", "AbstractProcessingHandler", "handle", "Array", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "Monolog", "Logger", "addRecord", "NUMBER", "Object", "UnexpectedValueException", "Array", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "vendor", "laravel", "framework", "src", "Illuminate", "Foundation", "Exceptions", "Handler", "NUMBER", "php", "NUMBER", "Monolog", "Logger", "error", "Object", "UnexpectedValueException", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "a", "in", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "on", "line", "NUMBER", "Sun", "Nov", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "pid", "NUMBER", "client", "NUMBER", "cb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "ca", "NUMBER", "f", "NUMBER", "b", "NUMBER", "NUMBER", "PHP", "Fatal", "error", "Uncaught", "exception", "UnexpectedValueException", "with", "message", "There", "be", "no", "exist", "directory", "at", "var", "www", "html", "release", "NUMBER", "storage", "logs", "and", "its", "not", "buildable", "Permission", "denied", "in", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "nStack", "trace", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "Monolog", "Handler", "StreamHandler", "createDir", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "Monolog", "Handler", "StreamHandler", "write", "Array", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "Monolog", "Handler", "AbstractProcessingHandler", "handle", "Array", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "NUMBER", "Monolog", "Logger", "addRecord", "NUMBER", "Object", "Symfony", "Component", "Debug", "Exception", "FatalErrorException", "Array", "n", "NUMBER", "var", "www", "html", "release", "NUMBER", "vendor", "laravel", "framework", "src", "Illuminate", "Foundation", "Exceptions", "Handler", "NUMBER", "php", "NUMBER", "Monolog", "Logger", "error", "Object", "Symfony", "Component", "Debug", "Exception", "FatalE", "in", "var", "www", "html", "release", "NUMBER", "bootstrap", "cache", "compiled", "NUMBER", "php", "on", "line", "NUMBER", "Do", "you", "think", "that", "the", "way", "I", "perform", "it", "above", "in", "my", "question", "be", "correct", "You", "need", "the", "folder", "var", "www", "html", "release", "NUMBER", "storage", "logs", "but", "you", "don", "t", "have", "it", "NUMBER", "Thanks", "I", "see", "what", "you", "mean", "I", "ll", "try", "to", "fix", "it", "NUMBER", "On", "some", "virtual", "hosting", "platforms", "for", "correct", "deploy", "we", "need", "to", "specify", "php", "binary", "NUMBER", "For", "instance", "bash", "opt", "php", "NUMBER", "bin", "php", "composer", "NUMBER", "phar", "install", "I", "suggest", "to", "create", "new", "environment", "var", "for", "example", "php_bin", "with", "default", "value", "php", "Just", "php", "be", "busy", "with", "old", "version", "of", "php", "NUMBER", "I", "ve", "tried", "to", "create", "NUMBER", "bashrc", "with", "alias", "but", "It", "s", "not", "work", "for", "me", "NUMBER", "NUMBER", "bashrc", "be", "only", "taken", "into", "account", "for", "interactive", "shells", "NUMBER", "You", "may", "check", "for", "NUMBER", "profile", "instead", "NUMBER", "lbausch", "thanks", "It", "s", "work", "elfet", "I", "resolve", "my", "issue", "by", "overriding", "tasks", "deploy", "vendors", "deploy", "assetic", "dump", "etc", "NUMBER", "In", "generally", "yes", "users", "can", "create", "alias", "and", "put", "in", "NUMBER", "profile", "but", "True", "way", "be", "put", "this", "variable", "in", "configuration", "upd", "I", "ve", "tried", "to", "deploy", "project", "with", "alias", "in", "NUMBER", "profile", "but", "it", "be", "not", "helped", "NUMBER", "bashrc", "do", "not", "work", "NUMBER", "profile", "do", "not", "work", "env", "php", "NUMBER", "do", "not", "work", "NUMBER", "Exactly", "as", "dmkuznetsov", "said", "we", "need", "an", "environment", "variable", "to", "specify", "PHP", "version", "NUMBER", "Or", "a", "way", "to", "set", "the", "PATH", "variable", "and", "use", "it", "in", "all", "subsequent", "calls", "better", "Will", "be", "in", "Deployer", "v", "NUMBER", "NUMBER", "Hi", "I", "read", "the", "deployer", "documentation", "and", "on", "the", "Server", "Page", "LINK", "there", "it", "be", "mention", "that", "it", "be", "possible", "to", "use", "a", "SSH", "config", "file", "like", "php", "server", "NUMBER", "user", "name", "configFile", "path", "to", "file", "That", "sounds", "nice", "and", "I", "use", "it", "like", "php", "server", "name", "myserver", "NUMBER", "com", "user", "user", "configFile", "NUMBER", "ssh", "config", "env", "deploy_path", "html", "example", "NUMBER", "com", "But", "when", "I", "execute", "my", "task", "an", "exception", "in", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "LINK", "L", "NUMBER", "be", "throw", "RuntimeException", "You", "need", "to", "specify", "authentication", "method", "NUMBER", "I", "took", "a", "deeper", "look", "at", "deployers", "source", "code", "and", "find", "out", "that", "in", "PhpSecLib", "NUMBER", "php", "LINK", "L", "NUMBER", "L", "NUMBER", "the", "switch", "statement", "be", "use", "to", "decide", "how", "to", "connect", "to", "the", "server", "NUMBER", "The", "switch", "expression", "serverConfig", "getAuthenticationMethod", "outputs", "for", "my", "situation", "the", "integer", "NUMBER", "like", "defined", "in", "Configuration", "NUMBER", "php", "LINK", "L", "NUMBER", "L", "NUMBER", "NUMBER", "The", "interesting", "part", "be", "now", "In", "this", "particular", "switch", "statement", "be", "no", "case", "for", "AUTH_BY_CONFIG", "defined", "NUMBER", "So", "I", "m", "not", "surprised", "anymore", "it", "be", "not", "work", "NUMBER", "Can", "you", "please", "implement", "this", "case", "NUMBER", "Thank", "You", "NUMBER", "Hey", "elfet", "thx", "for", "your", "reply", "NUMBER", "No", "problem", "get", "to", "it", "when", "you", "have", "time", "or", "I", "will", "take", "a", "look", "at", "it", "if", "I", "have", "time", "NUMBER", "But", "please", "don", "t", "document", "stuff", "which", "be", "not", "implement", "yet", "NUMBER", "That", "be", "really", "annoying", "smile", "Will", "be", "implement", "in", "v", "NUMBER", "So", "we", "cannot", "use", "configFile", "at", "all", "Not", "sure", "how", "this", "be", "close", "maybe", "it", "should", "be", "left", "open", "and", "assigned", "to", "a", "milestone", "When", "use", "Gitlab", "CI", "I", "want", "set", "server", "settings", "via", "options", "NUMBER", "Example", "h", "host", "u", "user", "p", "pass", "deploy_path", "var", "www", "I", "m", "know", "about", "option", "but", "it", "s", "very", "difficult", "to", "set", "server", "settings", "with", "it", "GitLab", "has", "CI", "NUMBER", "And", "i", "can", "use", "runners", "virtual", "machines", "where", "my", "CI", "task", "executes", "Runners", "may", "be", "public", "or", "i", "m", "don", "t", "want", "to", "share", "passwords", "with", "other", "peoples", "in", "this", "case", "GitLab", "CI", "provides", "feature", "to", "set", "in", "project", "settings", "variables", "that", "translated", "to", "environment", "system", "vars", "on", "runner", "machine", "NUMBER", "And", "then", "im", "run", "something", "in", "my", "CI", "config", "php", "dep", "deploy", "p", "PASS", "u", "USER", "h", "HOST", "another", "case", "i", "can", "create", "one", "CI", "config", "and", "use", "it", "between", "few", "projects", "just", "need", "to", "change", "vars", "in", "project", "settings", "NUMBER", "Unfortunately", "i", "m", "create", "own", "simple", "deploy", "php", "script", "to", "do", "it", "but", "deployer", "be", "ofcourse", "more", "powerful", "and", "im", "want", "to", "use", "deployer", "cool", "script", "problem", "be", "deployer", "has", "two", "options", "how", "can", "i", "set", "server", "settings", "NUMBER", "via", "server", "function", "NUMBER", "by", "yaml", "server", "list", "may", "be", "you", "can", "tell", "how", "easely", "set", "server", "settings", "via", "command", "line", "opttions", "errogaht", "Can", "you", "get", "the", "environment", "system", "vars", "use", "like", "getenv", "PASS", "yes", "i", "can", "but", "how", "i", "set", "password", "and", "username", "to", "server", "configuration", "dynamically", "in", "server", "function", "Set", "username", "and", "password", "in", "each", "task", "be", "probably", "not", "good", "i", "m", "think", "When", "use", "Gitlab", "CI", "I", "want", "set", "server", "settings", "via", "options", "NUMBER", "Example", "h", "host", "u", "user", "p", "pass", "deploy_path", "var", "www", "I", "m", "know", "about", "option", "but", "it", "s", "very", "difficult", "to", "set", "server", "settings", "with", "it", "What", "s", "up", "No", "comments", "I", "m", "one", "in", "the", "world", "use", "both", "deployer", "and", "gitlab", "On", "my", "Ubuntu", "VirtualBox", "I", "use", "the", "laravel", "homestead", "Vagrant", "box", "can", "I", "use", "the", "deployer", "NUMBER", "org", "solution", "to", "deploy", "my", "app", "on", "a", "remote", "server", "because", "I", "saw", "in", "your", "website", "Laravel", "Recipe", "status", "be", "TODO", "NUMBER", "If", "yes", "be", "there", "any", "tutorial", "for", "Laravel", "deployer", "has", "Laravel", "recipe", "LINK", "blsn", "Sorry", "by", "document", "on", "website", "be", "not", "update", "NUMBER", "That", "Laravel", "recipe", "has", "a", "few", "bug", "like", "a", "miss", "deploy", "writable", "task", "in", "the", "main", "deploy", "task", "and", "I", "disagree", "with", "the", "shared", "dirs", "NUMBER", "PR", "NUMBER", "fix", "NUMBER", "of", "those", "bug", "NUMBER", "It", "s", "also", "lacking", "many", "features", "to", "run", "migrations", "refresh", "the", "caches", "etc", "NUMBER", "I", "will", "probably", "send", "a", "PR", "if", "nobody", "beats", "me", "to", "it", "NUMBER", "I", "try", "to", "deploy", "a", "Laravel", "test", "app", "use", "the", "following", "deploy", "NUMBER", "php", "link", "LINK", "NUMBER", "but", "I", "get", "the", "following", "exception", "error", "vagrant", "homestead", "sites", "test_app", "dep", "deploy", "prod", "Executing", "task", "deploy", "prepare", "Executing", "task", "deploy", "release", "Executing", "task", "deploy", "update_code", "Executing", "task", "deploy", "vendors", "Executing", "task", "deploy", "writable", "Executing", "task", "deploy", "shared", "Executing", "task", "deploy", "symlink", "Executing", "task", "assets", "RuntimeException", "bash", "line", "NUMBER", "cd", "home", "vagrant", "deployer", "release", "NUMBER", "front", "No", "such", "file", "or", "directory", "debug", "mode", "bash", "Executing", "task", "assets", "on", "prod", "Run", "cd", "home", "vagrant", "deployer", "release", "NUMBER", "front", "npm", "install", "RuntimeException", "bash", "line", "NUMBER", "cd", "home", "vagrant", "deployer", "release", "NUMBER", "front", "No", "such", "file", "or", "directory", "Any", "help", "would", "be", "appreciated", "NUMBER", "Notification", "KennedyTedesco", "GesJeremie", "My", "deploy", "NUMBER", "php", "file", "fitted", "my", "project", "I", "cleaned", "it", "just", "for", "you", "LINK", "with", "version", "NUMBER", "when", "the", "code", "checks", "the", "dir", "of", "the", "actual", "release", "symlink", "the", "process", "crashes", "with", "a", "Runtime", "Exception", "as", "the", "release", "dir", "do", "not", "exist", "NUMBER", "A", "workaround", "to", "create", "the", "symlink", "manually", "before", "trying", "the", "first", "deployment", "NUMBER", "env", "release_path", "function", "return", "str_replace", "n", "run", "readlink", "deploy_path", "release", "Ah", "ok", "I", "misinterpreted", "the", "command", "I", "needed", "the", "deploy", "release", "before", "the", "deploy", "update_code", "NUMBER", "The", "documentation", "really", "needs", "some", "update", "D", "I", "was", "able", "to", "deploy", "a", "specific", "branch", "but", "be", "there", "any", "way", "to", "do", "same", "thing", "with", "a", "specific", "commit", "hash", "I", "would", "overwrite", "the", "deploy", "update_code", "Something", "like", "this", "NUMBER", "env", "commit", "TAG", "task", "deploy", "update_code", "function", "repository", "get", "repository", "branch", "env", "branch", "gitCache", "env", "git_cache", "depth", "gitCache", "depth", "NUMBER", "if", "input", "hasOption", "tag", "tag", "input", "getOption", "tag", "at", "if", "empty", "tag", "at", "b", "tag", "elseif", "empty", "branch", "at", "b", "branch", "release", "env", "releases_list", "if", "gitCache", "isset", "release", "NUMBER", "try", "run", "git", "clone", "at", "recursive", "q", "reference", "deploy_path", "release", "release", "NUMBER", "dissociate", "repository", "release_path", "NUMBER", "NUMBER", "catch", "RuntimeException", "exc", "If", "deploy_path", "release", "release", "NUMBER", "has", "a", "fail", "git", "clone", "be", "empty", "shallow", "etc", "git", "would", "throw", "error", "and", "give", "up", "NUMBER", "So", "we", "re", "forcing", "it", "to", "act", "without", "reference", "in", "this", "situation", "run", "git", "clone", "at", "recursive", "q", "repository", "release_path", "NUMBER", "NUMBER", "else", "if", "we", "re", "use", "git", "cache", "this", "would", "be", "identical", "to", "above", "code", "in", "catch", "full", "clone", "NUMBER", "If", "not", "it", "would", "create", "shallow", "clone", "NUMBER", "run", "git", "clone", "at", "depth", "recursive", "q", "repository", "release_path", "NUMBER", "NUMBER", "Lines", "add", "commit", "env", "commit", "run", "cd", "release_path", "git", "reset", "hard", "commit", "desc", "Updating", "code", "You", "could", "also", "ignore", "everything", "in", "this", "and", "just", "do", "Maybe", "you", "could", "overwrite", "all", "git", "commands", "with", "just", "env", "commit", "TAG", "run", "git", "clone", "repository", "release_path", "NUMBER", "NUMBER", "run", "cd", "release_path", "git", "checkout", "commit", "Will", "be", "in", "Deployer", "v", "NUMBER", "Hi", "I", "m", "looking", "for", "a", "new", "deployment", "tool", "and", "deployer", "looks", "awesome", "thanks", "for", "the", "great", "work", "you", "have", "do", "I", "have", "some", "concerns", "about", "rollbacks", "NUMBER", "_Sample", "scenario", "_", "The", "deployment", "process", "consists", "of", "several", "steps", "prepare", "release", "update", "code", "assets", "database", "migrations", "restart", "cache", "Now", "lets", "assume", "the", "last", "step", "restart", "cache", "fail", "NUMBER", "Currently", "deployer", "would", "only", "remove", "the", "release", "directory", "but", "it", "should", "also", "revert", "the", "db", "migrations", "NUMBER", "We", "could", "probably", "add", "a", "very", "simple", "mechanism", "to", "improve", "rollbacks", "similar", "to", "the", "one", "in", "Capistrano", "NUMBER", "There", "be", "a", "simple", "function", "that", "allows", "to", "add", "rollback", "closures", "NUMBER", "Then", "the", "rollback", "command", "executes", "all", "registered", "closures", "LIFO", "NUMBER", "What", "do", "you", "thin", "about", "it", "Maybe", "you", "have", "some", "better", "ideas", "how", "to", "improve", "rollbacks", "Hey", "i", "get", "an", "idea", "to", "enable", "a", "simple", "kind", "of", "Plugin", "system", "especially", "useful", "for", "the", "packaged", "phar", "version", "of", "deployer", "NUMBER", "The", "main", "idea", "consists", "of", "an", "additional", "command", "PluginCommand", "open", "to", "suggestions", "about", "another", "name", "NUMBER", "This", "command", "would", "have", "several", "actions", "like", "install", "update", "remove", "NUMBER", "These", "actions", "be", "basically", "only", "a", "proxy", "for", "composer", "require", "update", "remove", "foo", "bar", "actions", "NUMBER", "That", "composer", "command", "gets", "executed", "in", "a", "global", "central", "location", "for", "example", "under", "Users", "username", "NUMBER", "deployer", "on", "Mac", "NUMBER", "Additionally", "that", "path", "gets", "add", "to", "the", "include", "path", "so", "that", "you", "can", "access", "those", "install", "package", "easily", "with", "a", "relative", "path", "NUMBER", "Example", "install", "the", "exist", "deployphp", "recipes", "LINK", "package", "as", "a", "plugin", "for", "deployer", "dep", "plugin", "install", "deployphp", "recipes", "this", "will", "install", "that", "package", "under", "Users", "username", "NUMBER", "deployer", "vendor", "deployphp", "recipes", "The", "path", "Users", "username", "NUMBER", "deployer", "vendor", "be", "automatically", "add", "to", "the", "include", "path", "of", "deployer", "on", "every", "command", "so", "you", "can", "have", "a", "deploy", "NUMBER", "php", "like", "this", "in", "a", "project", "php", "TAG", "upload", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "upload", "at", "D", "xampp", "htdocs", "domizeli", "NUMBER", "ru", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "require", "at", "D", "bin", "deployer", "deployer", "NUMBER", "phar", "NUMBER", "So", "if", "Im", "fx", "use", "the", "symfony", "recipe", "and", "there", "be", "NUMBER", "task", "I", "dont", "want", "to", "be", "executed", "be", "there", "any", "method", "to", "unset", "this", "task", "Actually", "it", "be", "the", "assetic", "task", "I", "dont", "want", "to", "run", "I", "dont", "use", "assetic", "so", "this", "task", "task", "deploy", "assetic", "dump", "function", "run", "php", "release_path", "NUMBER", "trim", "get", "bin_dir", "NUMBER", "console", "assetic", "dump", "env", "env", "no", "debug", "desc", "Dump", "assets", "I", "want", "to", "not", "run", "NUMBER", "Ofcourse", "I", "could", "copy", "the", "whole", "symfony", "recipe", "and", "then", "remove", "this", "NUMBER", "task", "and", "use", "that", "instead", "but", "it", "seems", "like", "over", "doing", "it", "NUMBER", "Hi", "Martin", "May", "be", "I", "m", "wrong", "but", "I", "don", "t", "think", "it", "s", "possible", "to", "remove", "a", "task", "NUMBER", "However", "you", "can", "override", "it", "with", "an", "empty", "function", "NUMBER", "For", "example", "task", "deploy", "assetic", "dump", "function", "This", "line", "must", "be", "set", "_after_", "require", "recipe", "symfony", "NUMBER", "php", "Current", "deployer", "don", "t", "support", "remove", "a", "task", "but", "you", "can", "override", "it", "as", "tmarly", "s", "comment", "NUMBER", "task", "deploy", "assetic", "dump", "function", "setPrivate", "To", "use", "namespaces", "and", "classes", "everywhere", "we", "need", "to", "put", "all", "function", "of", "function", "NUMBER", "php", "into", "a", "class", "NUMBER", "That", "because", "I", "think", "we", "should", "have", "a", "class", "named", "Deployer", "which", "has", "all", "the", "function", "NUMBER", "Example", "php", "deployer", "new", "Deployer", "ignored", "parameters", "for", "example", "deployer", "server", "prod", "host", "NUMBER", "user", "name", "forwardAgent", "stage", "production", "env", "deploy_path", "your", "project", "path", "deployer", "run", "Another", "idea", "php", "deployer", "new", "Deployer", "ignored", "parameters", "for", "example", "deployer", "setServer", "prod", "host", "NUMBER", "setUser", "name", "useForwardAgent", "setStage", "production", "setEnv", "deploy_path", "your", "project", "path", "deployer", "run", "I", "think", "it", "would", "be", "good", "to", "have", "recipes", "as", "classes", "with", "interface", "Recipe", "NUMBER", "For", "namespaces", "we", "need", "to", "turn", "all", "function", "into", "classes", "NUMBER", "That", "because", "I", "think", "it", "be", "good", "to", "have", "recipes", "as", "class", "file", "NUMBER", "You", "would", "have", "two", "choices", "a", "Load", "a", "recipe", "class", "file", "NUMBER", "b", "Do", "the", "commands", "directly", "like", "the", "function", "NUMBER", "php", "currently", "just", "with", "a", "class", "around", "it", "NUMBER", "php", "deployer", "new", "Deployer", "deployer", "useRecipt", "new", "SymfonyRecipt", "deployer", "run", "Something", "like", "this", "would", "be", "nice", "NUMBER", "The", "interface", "would", "needed", "to", "get", "all", "recipt", "information", "from", "the", "recipt", "object", "NUMBER", "deployer", "useRecipt", "will", "require", "one", "parameter", "of", "type", "ReciptInterface", "NUMBER", "The", "interface", "could", "be", "something", "like", "this", "php", "interface", "RecipeInterface", "public", "function", "getHost", "public", "function", "getUser", "public", "function", "getEnv", "Another", "idea", "would", "be", "to", "have", "one", "function", "which", "returns", "an", "array", "with", "all", "data", "php", "interface", "RecipeInterface", "public", "function", "getRecipt", "Yes", "the", "second", "one", "be", "a", "bad", "idea", "NUMBER", "Just", "to", "write", "down", "all", "ways", "how", "you", "could", "do", "it", "NUMBER", "NUMBER", "I", "think", "we", "should", "set", "the", "master", "branch", "to", "the", "branch", "for", "the", "newest", "development", "currently", "version", "NUMBER", "NUMBER", "The", "current", "master", "branch", "should", "be", "named", "v", "NUMBER", "or", "something", "like", "that", "NUMBER", "Currently", "the", "master", "branch", "be", "version", "NUMBER", "right", "We", "need", "this", "as", "fast", "as", "possible", "to", "add", "new", "features", "NUMBER", "NUMBER", "NUMBER", "Done", "NUMBER", "I", "would", "like", "to", "deploy", "same", "repository", "content", "in", "two", "different", "environments", "something", "like", "dep", "deploy", "prod", "dev", "Is", "it", "possible", "Sometimes", "when", "there", "be", "error", "executing", "the", "script", "the", "error", "mentions", "something", "about", "use", "p", "for", "parallel", "deploy", "p", "parallel", "Can", "you", "elaborate", "on", "this", "We", "faced", "this", "in", "the", "past", "where", "we", "needed", "to", "run", "the", "cleanup", "command", "as", "sudo", "as", "all", "our", "release", "be", "owned", "by", "a", "different", "user", "than", "the", "one", "which", "we", "use", "for", "deployment", "NUMBER", "Sorry", "but", "what", "do", "you", "mean", "by", "I", "don", "t", "this", "what", "it", "be", "save", "NUMBER", "Nope", "NUMBER", "Hi", "there", "I", "have", "a", "project", "with", "directory", "structure", "like", "this", "core", "public", "site", "private", "site", "Each", "directory", "be", "independent", "repository", "with", "it", "s", "own", "deploying", "strategy", "NUMBER", "I", "want", "to", "deploy", "the", "whole", "project", "in", "one", "dep", "deploy", "command", "with", "cloning", "each", "repository", "to", "it", "s", "own", "subdirectory", "inside", "release", "path", "NUMBER", "Is", "it", "possible", "elfet", "thanks", "for", "quick", "response", "I", "was", "digging", "into", "deployer", "s", "internals", "and", "notice", "that", "deploy", "update_code", "and", "other", "default", "function", "be", "use", "cd", "release_path", "so", "there", "be", "no", "way", "to", "clone", "repository", "to", "release_path", "repo_path", "NUMBER", "Am", "I", "miss", "something", "Did", "you", "meant", "that", "it", "can", "be", "do", "via", "custom", "tasks", "Okay", "thanks", "Hi", "NUMBER", "I", "have", "a", "setup", "where", "I", "have", "one", "server", "and", "staging", "production", "stages", "on", "it", "NUMBER", "I", "d", "like", "to", "deploy", "the", "same", "app", "in", "these", "two", "environment", "NUMBER", "The", "only", "differences", "behind", "the", "two", "be", "a", "bunch", "of", "env", "vars", "like", "deploy", "path", "and", "git", "branch", "NUMBER", "Is", "it", "possible", "to", "manage", "this", "scenario", "tnx", "NUMBER", "Please", "can", "you", "go", "further", "How", "can", "I", "use", "master", "branch", "on", "myServer", "for", "the", "production", "stage", "server", "myServer", "example", "NUMBER", "com", "NUMBER", "stage", "staging", "env", "branch", "develop", "Tnx", "So", "I", "have", "to", "define", "two", "servers", "NUMBER", "This", "be", "what", "I", "ve", "already", "do", "so", "far", "but", "I", "think", "this", "isn", "t", "the", "best", "way", "NUMBER", "Something", "like", "that", "should", "be", "better", "in", "my", "opinion", "server", "myServer", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myUser", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "production", "stage", "staging", "env", "branch", "develop", "env", "deploy_path", "var", "www", "staging", "Agree", "I", "agree", "to", "spescina", "would", "be", "nice", "to", "see", "version", "NUMBER", "I", "think", "it", "will", "be", "confusing", "when", "there", "be", "many", "servers", "in", "same", "stage", "currently", "and", "a", "server", "can", "act", "as", "many", "stages", "too", "NUMBER", "vanquang", "NUMBER", "why", "I", "think", "this", "isn", "t", "so", "confusing", "NUMBER", "php", "server", "myServer", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myUser", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "production", "stage", "staging", "env", "branch", "develop", "env", "deploy_path", "var", "www", "staging", "server", "mySecondServer", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "mySecondUser", "stage", "production", "env", "branch", "master", "env", "deploy_path", "srv", "www", "Isn", "t", "it", "Deploy", "on", "staging", "goes", "on", "myServer", "var", "www", "staging", "NUMBER", "Deploy", "on", "production", "goes", "on", "myServer", "in", "var", "www", "production", "and", "on", "mySecondServer", "in", "srv", "www", "NUMBER", "Deploy", "on", "myServer", "goes", "on", "var", "www", "staging", "and", "var", "www", "production", "NUMBER", "Deploy", "on", "mySecondServer", "goes", "on", "srv", "www", "NUMBER", "Deploy", "on", "myServer", "production", "goes", "on", "var", "www", "production", "NUMBER", "Deploy", "on", "staging", "goes", "on", "myServer", "var", "www", "staging", "NUMBER", "Deploy", "on", "production", "goes", "on", "myServer", "in", "var", "www", "production", "and", "on", "mySecondServer", "in", "srv", "www", "Yes", "we", "be", "deploying", "by", "stage", "NUMBER", "Deploy", "on", "myServer", "goes", "on", "var", "www", "staging", "and", "var", "www", "production", "NUMBER", "Deploy", "on", "mySecondServer", "goes", "on", "srv", "www", "NUMBER", "Deploy", "on", "myServer", "production", "goes", "on", "var", "www", "production", "NUMBER", "Adding", "option", "to", "deploy", "by", "server", "and", "stage", "brings", "some", "more", "confusion", "NUMBER", "In", "my", "opinion", "it", "should", "be", "thought", "that", "there", "be", "many", "servers", "in", "same", "stage", "NUMBER", "And", "I", "currently", "config", "servers", "of", "each", "stage", "to", "separated", "file", "staging", "NUMBER", "php", "server", "NUMBER", "server", "NUMBER", "production", "NUMBER", "php", "server", "NUMBER", "server", "NUMBER", "spescina", "JHGitty", "This", "way", "be", "shorter", "but", "it", "be", "more", "confusing", "than", "current", "NUMBER", "And", "your", "code", "after", "reformat", "it", "be", "not", "clean", "NUMBER", "server", "myServer", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myUser", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "production", "stage", "staging", "env", "branch", "develop", "env", "deploy_path", "var", "www", "staging", "deployphp", "maintainer", "I", "think", "we", "should", "define", "env", "vars", "follow", "stage", "NUMBER", "After", "that", "we", "add", "servers", "host", "port", "user", "NUMBER", "to", "stage", "NUMBER", "Final", "we", "allow", "deploy", "with", "stage", "only", "not", "allow", "with", "server", "name", "NUMBER", "It", "be", "very", "clean", "with", "users", "NUMBER", "I", "think", "we", "should", "define", "env", "vars", "follow", "stage", "NUMBER", "This", "be", "not", "so", "good", "because", "env", "vars", "of", "same", "stage", "maybe", "different", "from", "server", "to", "server", "such", "as", "deploy_path", "etc", "NUMBER", "vanquang", "NUMBER", "In", "my", "opinion", "it", "should", "be", "thought", "that", "there", "be", "many", "servers", "in", "same", "stage", "I", "disagree", "with", "this", "NUMBER", "It", "s", "personal", "indeed", "but", "in", "my", "day", "to", "day", "work", "I", "have", "one", "server", "and", "multiple", "stages", "on", "it", "in", "early", "project", "days", "particularly", "NUMBER", "So", "for", "me", "it", "s", "rather", "confusing", "talking", "about", "multiple", "servers", "in", "one", "stage", "NUMBER", "In", "my", "use", "cases", "servers", "count", "be", "always", "less", "than", "stages", "count", "NUMBER", "oanhnn", "And", "your", "code", "after", "reformat", "it", "be", "not", "clean", "Do", "you", "prefer", "this", "php", "myServer", "server", "myServer", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myUser", "myServer", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "production", "myServer", "stage", "staging", "env", "branch", "develop", "env", "deploy_path", "var", "www", "staging", "Same", "as", "before", "from", "code", "perspective", "but", "different", "when", "formatted", "NUMBER", "Oh", "hm", "NUMBER", "I", "revert", "my", "opinion", "NUMBER", "Looks", "wrong", "after", "reformat", "NUMBER", "spescina", "It", "s", "personal", "indeed", "but", "in", "my", "day", "to", "day", "work", "I", "have", "one", "server", "and", "multiple", "stages", "on", "it", "in", "early", "project", "days", "particularly", "NUMBER", "Yes", "I", "can", "understand", "NUMBER", "Sometimes", "I", "also", "have", "a", "server", "acting", "as", "multiple", "stages", "on", "early", "project", "days", "NUMBER", "But", "later", "deploying", "by", "stage", "be", "more", "often", "NUMBER", "myServer", "server", "myServer", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myUser", "myServer", "stage", "production", "env", "branch", "master", "env", "deploy_path", "var", "www", "production", "myServer", "stage", "staging", "env", "branch", "develop", "env", "deploy_path", "var", "www", "staging", "I", "don", "t", "know", "if", "this", "kind", "of", "chaining", "works", "as", "you", "expected", "NUMBER", "So", "the", "goal", "would", "be", "I", "define", "servers", "and", "stages", "NUMBER", "Then", "I", "should", "be", "able", "to", "link", "them", "as", "I", "want", "NUMBER", "If", "I", "have", "one", "server", "and", "multiple", "stages", "on", "it", "I", "should", "be", "able", "to", "write", "something", "like", "this", "php", "myServer", "server", "myServer", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myUser", "stage", "production", "env", "branch", "master", "stage", "staging", "env", "branch", "develop", "myServer", "stage", "production", "env", "deploy_path", "var", "www", "production", "myServer", "stage", "staging", "env", "deploy_path", "var", "www", "staging", "If", "I", "have", "multiple", "servers", "in", "the", "same", "stage", "I", "should", "be", "able", "to", "write", "something", "like", "this", "php", "server", "NUMBER", "server", "server", "NUMBER", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myFirstUser", "server", "NUMBER", "server", "server", "NUMBER", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "mySecondUser", "stage", "production", "env", "branch", "master", "server", "NUMBER", "stage", "production", "env", "deploy_path", "var", "www", "production", "server", "NUMBER", "stage", "production", "env", "deploy_path", "srv", "www", "If", "I", "have", "multiple", "servers", "and", "multple", "stages", "I", "should", "be", "able", "to", "write", "something", "like", "this", "php", "server", "NUMBER", "server", "server", "NUMBER", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "myFirstUser", "server", "NUMBER", "server", "server", "NUMBER", "example", "NUMBER", "com", "NUMBER", "forwardAgent", "user", "mySecondUser", "stage", "production", "env", "branch", "master", "stage", "staging", "env", "branch", "develop", "server", "NUMBER", "stage", "production", "env", "deploy_path", "var", "www", "production", "server", "NUMBER", "stage", "staging", "env", "deploy_path", "var", "www", "staging", "server", "NUMBER", "stage", "production", "env", "deploy_path", "srv", "www", "Then", "I", "can", "deploy", "where", "exists", "the", "link", "behind", "a", "server", "and", "a", "stage", "elfet", "You", "can", "do", "all", "of", "this", "things", "right", "now", "NUMBER", "But", "you", "need", "to", "copy", "server", "NUMBER", "I", "know", "but", "I", "d", "like", "to", "follow", "the", "DRY", "best", "practice", "NUMBER", "These", "copies", "confuse", "me", "NUMBER", "Why", "I", "have", "to", "redefine", "the", "server", "each", "time", "I", "add", "a", "stage", "on", "it", "It", "s", "weird", "NUMBER", "I", "already", "know", "how", "to", "connect", "to", "that", "server", "NUMBER", "But", "we", "re", "talking", "about", "how", "deployer", "could", "be", "better", "or", "we", "re", "here", "just", "to", "fix", "bug", "I", "totally", "agree", "elfet", "NUMBER", "its", "not", "about", "DRY", "principle", "spescina", "NUMBER", "Think", "like", "this", "you", "be", "separating", "all", "your", "config", "file", "depending", "to", "the", "stage", "in", "your", "framework", "right", "ZF", "SF", "Yii", "etc", "NUMBER", "But", "some", "of", "them", "use", "same", "configuration", "like", "redis", "memcache", "port", "etc", "NUMBER", "But", "still", "you", "have", "to", "separate", "because", "when", "you", "make", "any", "change", "it", "should", "not", "effect", "the", "other", "configuration", "NUMBER", "At", "the", "end", "those", "lines", "acts", "like", "configuration", "defination", "it", "should", "be", "separated", "call", "NUMBER", "Q", "A", "Bug", "fix", "no", "New", "feature", "yes", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "Would", "be", "nice", "to", "have", "this", "recipe", "add", "as", "an", "example", "to", "the", "CakePHP", "folks", "use", "the", "library", "NUMBER", "Great", "work", "by", "the", "way", "There", "should", "be", "a", "task", "to", "symlink", "plugin", "asset", "into", "webroot", "too", "use", "bin", "cake", "plugin", "assets", "symlink", "NUMBER", "Thanks", "Were", "you", "pinging", "the", "rest", "of", "the", "team", "or", "inviting", "me", "to", "join", "the", "maintainers", "to", "take", "care", "of", "this", "one", "only", "Sorry", "if", "I", "misunderstood", "and", "thanks", "again", "for", "merge", "php", "task", "deploy", "vendors", "function", "if", "commandExist", "composer", "composer", "composer", "else", "run", "cd", "release_path", "curl", "sS", "LINK", "php", "composer", "php", "composer", "NUMBER", "phar", "if", "empty", "get", "github_oauth_token", "run", "cd", "release_path", "env_vars", "composer", "config", "g", "github", "oauth", "NUMBER", "github", "NUMBER", "com", "token", "run", "cd", "release_path", "env_vars", "composer", "composer_options", "desc", "Installing", "vendors", "I", "think", "many", "would", "be", "grateful", "and", "I", "among", "them", "if", "you", "add", "a", "recipe", "for", "Phalcon", "Framework", "Could", "you", "outline", "the", "general", "steps", "of", "deploying", "a", "Phalcon", "app", "it", "be", "good", "idea", "add", "recipe", "for", "Phalcon", "NUMBER", "You", "can", "use", "this", "recipe", "LINK", "can", "this", "project", "support", "ftp", "thanks", "You", "could", "write", "a", "custom", "task", "to", "restart", "php", "fpm", "after", "a", "successful", "deployment", "NUMBER", "This", "would", "achieve", "the", "same", "goal", "but", "not", "be", "viable", "on", "installations", "with", "high", "load", "NUMBER", "This", "fix", "a", "bug", "when", "laravel", "try", "to", "get", "the", "full", "path", "of", "these", "directories", "but", "returns", "false", "because", "they", "don", "t", "exist", "NUMBER", "This", "be", "cause", "in", "some", "cases", "like", "the", "view", "config", "LINK", "L", "NUMBER", "because", "realpath", "be", "use", "NUMBER", "If", "we", "don", "t", "create", "each", "shared", "folder", "during", "the", "deployment", "realpath", "returns", "false", "because", "the", "dir", "doesn", "t", "exist", "and", "thus", "laravel", "try", "to", "write", "to", "the", "root", "directory", "NUMBER", "Deployer", "version", "master", "branch", "PHP", "version", "all", "php", "version", "Deployment", "target", "s", "OS", "hmm", "all", "I", "think", "this", "fix", "be", "correct", "with", "Laravel", "NUMBER", "LTS", "version", "NUMBER", "Are", "you", "test", "for", "all", "laravel", "version", "dimsav", "Ref", "NUMBER", "Are", "you", "test", "for", "all", "laravel", "version", "Nope", "I", "test", "this", "only", "for", "laravel", "NUMBER", "Hmm", "do", "work", "with", "standard", "Laravel", "elfet", "What", "do", "you", "mean", "standard", "Laravel", "dimsav", "I", "think", "this", "recipe", "should", "support", "laravel", "NUMBER", "x", "long", "term", "support", "version", "and", "we", "should", "add", "a", "note", "to", "support", "other", "version", "NUMBER", "Can", "you", "create", "a", "pull", "request", "to", "deployphp", "docs", "After", "doing", "a", "check", "this", "change", "enable", "support", "for", "both", "laravel", "NUMBER", "and", "NUMBER", "version", "NUMBER", "I", "could", "help", "filling", "the", "documentation", "but", "this", "be", "another", "totally", "different", "task", "Any", "ETA", "for", "this", "Would", "be", "really", "helpful", "NUMBER", "Thanks", "D", "Great", "I", "think", "merge", "But", "with", "docs", "it", "will", "be", "NUMBER", "more", "cooler", "The", "docs", "be", "in", "another", "git", "repo", "NUMBER", "Q", "A", "Bug", "fix", "no", "New", "feature", "yes", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "As", "comment", "in", "PR", "NUMBER", "in", "this", "PR", "Added", "task", "to", "clean", "up", "file", "and", "or", "directories", "Can", "I", "change", "this", "setting", "for", "each", "server", "stage", "indivually", "jverdeyen", "I", "can", "use", "environment", "variables", "instead", "of", "parameters", "it", "be", "maybe", "change", "setting", "for", "each", "server", "stage", "individually", "NUMBER", "But", "i", "want", "create", "a", "common", "task", "same", "deploy", "writable", "task", "smile", "Yes", "writeable", "dirs", "be", "bounded", "to", "the", "application", "but", "cleaning", "controllers", "or", "file", "can", "also", "change", "per", "stage", "server", "NUMBER", "elfet", "what", "s", "your", "idea", "about", "this", "feature", "I", "think", "we", "may", "set", "both", "common", "var", "env", "var", "for", "flexibility", "NUMBER", "For", "example", "In", "common", "recipe", "set", "clear_paths", "NUMBER", "In", "server", "stage", "config", "server", "NUMBER", "env", "clear_paths", "NUMBER", "Then", "in", "deploy", "clean", "paths", "get", "clear_paths", "Use", "env", "var", "if", "exists", "if", "env", "has", "clear_paths", "paths", "env", "clear_paths", "NUMBER", "oanhnn", "rebase", "please", "NUMBER", "I", "can", "do", "deploy", "with", "no", "problem", "but", "when", "I", "try", "to", "update", "my", "code", "with", "deploy", "update_code", "I", "get", "this", "error", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "My", "deployer", "version", "be", "NUMBER", "What", "provide", "credentials", "be", "you", "use", "oanhnn", "SSH", "key", "for", "my", "private", "repo", "in", "Bitbucket", "NUMBER", "This", "error", "be", "throw", "from", "here", "LINK", "L", "NUMBER", "It", "be", "you", "can", "t", "access", "to", "your", "server", "not", "Bitbucket", "NUMBER", "Please", "check", "your", "credentials", "with", "native", "ssh", "command", "NUMBER", "I", "can", "connect", "normally", "in", "my", "server", "by", "ssh", "NUMBER", "Edit", "I", "use", "pem", "file", "I", "don", "t", "know", "if", "this", "be", "a", "problem", "NUMBER", "It", "be", "maybe", "problem", "with", "key", "encryption", "algorithm", "it", "be", "not", "support", "by", "phpseclib", "NUMBER", "LINK", "NUMBER", "Please", "try", "use", "forward", "agent", "to", "instead", "of", "this", "method", "NUMBER", "This", "looks", "like", "a", "duplicate", "of", "NUMBER", "Q", "A", "Bug", "fix", "no", "New", "feature", "yes", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "Adds", "an", "explination", "on", "how", "to", "do", "a", "proper", "PR", "NUMBER", "Q", "A", "Bug", "fix", "no", "New", "feature", "yes", "BC", "breaks", "no", "Deprecations", "no", "Fixed", "tickets", "In", "a", "custom", "deploy", "strategy", "I", "want", "to", "be", "able", "to", "re", "use", "the", "release", "timestamp", "so", "it", "s", "the", "same", "on", "all", "places", "NUMBER", "Thx", "I", "ll", "do", "a", "PR", "with", "a", "copy", "paste", "example", "in", "the", "contribute", "docs", "NUMBER", "When", "I", "try", "to", "deploy", "in", "a", "vps", "with", "centos", "NUMBER", "runnig", "I", "get", "RuntimeException", "stdin", "be", "not", "a", "tty", "mkdir", "cannot", "create", "directory", "be", "File", "exists", "mkdir", "cannot", "create", "directory", "not", "File", "exists", "mkdir", "cannot", "create", "directory", "a", "File", "exists", "mkdir", "cannot", "create", "directory", "tty", "File", "exists", "bash", "line", "NUMBER", "NUMBER", "command", "not", "find", "This", "be", "de", "full", "log", "user", "user", "dev", "projects", "usef", "code", "dep", "deploy", "prod", "vvv", "Executing", "task", "deploy", "prepare", "on", "prod", "user", "NUMBER", "host", "NUMBER", "com", "Password", "Run", "echo", "NUMBER", "stdin", "be", "not", "a", "tty", "bash", "Run", "if", "d", "home", "user", "NUMBER", "public_html", "then", "mkdir", "p", "home", "user", "NUMBER", "public_html", "fi", "stdin", "be", "not", "a", "tty", "Run", "cd", "home", "user", "NUMBER", "public_html", "if", "d", "release", "then", "mkdir", "release", "fi", "stdin", "be", "not", "a", "tty", "Run", "cd", "home", "user", "NUMBER", "public_html", "if", "d", "shared", "then", "mkdir", "shared", "fi", "stdin", "be", "not", "a", "tty", "do", "on", "prod", "Ok", "Executing", "task", "deploy", "release", "on", "prod", "Run", "mkdir", "home", "user", "NUMBER", "public_html", "release", "NUMBER", "stdin", "be", "not", "a", "tty", "Run", "cd", "home", "user", "NUMBER", "public_html", "if", "h", "release", "then", "rm", "release", "fi", "stdin", "be", "not", "a", "tty", "Run", "ln", "s", "home", "user", "NUMBER", "public_html", "release", "NUMBER", "home", "user", "NUMBER", "public_html", "release", "stdin", "be", "not", "a", "tty", "do", "on", "prod", "Ok", "Executing", "task", "deploy", "update_code", "on", "prod", "Run", "git", "version", "stdin", "be", "not", "a", "tty", "git", "version", "NUMBER", "Run", "ls", "home", "user", "NUMBER", "public_html", "release", "stdin", "be", "not", "a", "tty", "NUMBER", "Run", "readlink", "home", "user", "NUMBER", "public_html", "release", "stdin", "be", "not", "a", "tty", "home", "user", "NUMBER", "public_html", "release", "NUMBER", "Run", "git", "clone", "depth", "NUMBER", "recursive", "q", "LINK", "githost", "NUMBER", "com", "git", "usef", "stdin", "be", "not", "a", "tty", "home", "user", "NUMBER", "public_html", "release", "NUMBER", "NUMBER", "NUMBER", "RuntimeException", "stdin", "be", "not", "a", "tty", "May", "be", "some", "like", "this", "LINK", "inside", "ssh", "fail", "with", "stdin", "be", "not", "a", "tty", "I", "m", "resolving", "this", "setting", "this", "code", "in", "NUMBER", "bashrc", "if", "expr", "index", "i", "eq", "NUMBER", "then", "return", "fi", "Thanks", "and", "sorry", "for", "the", "inconvenience", "How", "can", "this", "be", "solve", "in", "another", "way", "The", "setting", "in", "NUMBER", "bashrc", "as", "amsolucionesweb", "mention", "doesn", "t", "work", "in", "my", "case", "NUMBER", "Ok", "seems", "my", "cPanel", "based", "server", "was", "cause", "these", "headaches", "because", "cPanel", "add", "the", "mesg", "y", "command", "via", "etc", "bashrc", "For", "future", "reference", "add", "the", "code", "amsolucionesweb", "suggested", "on", "top", "of", "your", "server", "s", "NUMBER", "bashrc", "file", "NUMBER", "In", "my", "case", "my", "file", "looks", "like", "this", "sh", "home", "username", "NUMBER", "bashrc", "if", "expr", "index", "i", "eq", "NUMBER", "then", "return", "fi", "Source", "global", "definitions", "if", "f", "etc", "bashrc", "then", "NUMBER", "etc", "bashrc", "fi", "NUMBER", "Propaganistas", "NUMBER", "This", "feature", "makes", "it", "possible", "to", "specify", "the", "user", "for", "chmod", "setfacl", "NUMBER", "In", "my", "use", "case", "the", "PHP", "FPM", "pool", "be", "use", "an", "dedicated", "user", "but", "Apache", "be", "served", "by", "www", "data", "NUMBER", "Using", "deploy", "writable", "all", "writable", "dirs", "would", "use", "the", "Apache", "user", "rather", "the", "pool", "user", "which", "causes", "permission", "issue", "when", "trying", "to", "set", "the", "file", "mode", "and", "owner", "NUMBER", "You", "can", "now", "use", "the", "directive", "set", "http_user", "username", "to", "set", "the", "user", "owning", "this", "file", "directories", "NUMBER", "daFish", "can", "you", "add", "docs", "please", "elfet", "PR", "opened", "under", "deployphp", "docs", "pull", "NUMBER", "See", "NUMBER", "I", "think", "namespacing", "the", "helper", "function", "will", "remove", "alot", "of", "problem", "NUMBER", "Especially", "those", "who", "s", "use", "the", "Laravel", "Lumen", "framework", "NUMBER", "Will", "add", "this", "to", "v", "NUMBER", "Hi", "why", "not", "putting", "function", "NUMBER", "php", "under", "Deployer", "namespace", "instead", "of", "Deployer", "Functions", "So", "we", "ll", "just", "have", "to", "put", "namespace", "Deployer", "in", "deploy", "NUMBER", "php", "and", "recipes", "file", "which", "be", "sexier", "than", "namespace", "Deployer", "Functions", "It", "could", "be", "another", "cool", "namespace", "smile", "I", "think", "everything", "should", "be", "directly", "under", "Deployer", "namespace", "NUMBER", "ping", "ceesvanegmond", "Can", "you", "fix", "it", "or", "should", "we", "create", "a", "new", "PR", "PR", "Pull", "Request", "NUMBER", "I", "think", "this", "PR", "could", "be", "close", "as", "NUMBER", "eadb", "NUMBER", "implement", "namespace", "for", "function", "NUMBER", "Right", "Here", "s", "my", "deployment", "log", "Executing", "task", "deploy", "prepare", "Executing", "task", "deploy", "release", "Executing", "task", "deploy", "update_code", "Executing", "task", "deploy", "symlink", "Executing", "task", "cleanup", "Notice", "Unable", "to", "open", "channel", "in", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "otice", "Connection", "close", "prematurely", "in", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "Executing", "task", "success", "This", "seems", "to", "be", "happening", "after", "several", "successful", "deployments", "NUMBER", "When", "I", "remove", "the", "release", "dir", "on", "the", "server", "it", "solves", "the", "problem", "but", "as", "I", "do", "more", "and", "more", "deployments", "this", "problem", "always", "comes", "back", "NUMBER", "When", "run", "deploy", "writable_dirs", "WITHOUT", "sudo", "exception", "maybe", "throw", "if", "setfacl", "run", "on", "file", "created", "by", "http", "user", "in", "directory", "that", "has", "be", "setfacl", "before", "NUMBER", "These", "directories", "file", "should", "be", "skipped", "NUMBER", "Ref", "LINK", "issuecomment", "NUMBER", "Cool", "I", "m", "going", "to", "merge", "NUMBER", "Can", "any", "one", "to", "test", "it", "oanhnn", "deployphp", "maintainer", "ping", "elfet", "oanhnn", "Please", "check", "my", "new", "commit", "NUMBER", "I", "think", "problem", "that", "httpd", "user", "be", "the", "same", "user", "or", "same", "group", "with", "deployer", "user", "be", "not", "relate", "to", "setfacl", "NUMBER", "This", "should", "be", "checked", "at", "the", "beginning", "of", "writable", "task", "if", "needed", "NUMBER", "My", "deploy", "NUMBER", "php", "php", "require", "vendor", "deployer", "deployer", "recipe", "yii", "NUMBER", "php", "set", "repository", "git", "bitbucket", "NUMBER", "org", "xxx", "NUMBER", "git", "server", "qa", "xxx", "NUMBER", "eu", "west", "NUMBER", "compute", "NUMBER", "amazonaws", "NUMBER", "com", "user", "ubuntu", "stage", "staging", "pemFile", "xx", "xxx", "NUMBER", "pem", "Error", "i", "get", "dep", "deploy", "staging", "Executing", "task", "deploy", "prepare", "PHP", "Notice", "Cannot", "connect", "to", "xxx", "NUMBER", "compute", "NUMBER", "amazonaws", "NUMBER", "com", "NUMBER", "Error", "NUMBER", "Connection", "timed", "out", "in", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "I", "did", "try", "to", "download", "deployer", "and", "phpseclib", "via", "composer", "NUMBER", "Getting", "same", "error", "NUMBER", "Yes", "should", "be", "fix", "in", "NUMBER", "It", "fix", "wrong", "huge", "default", "value", "for", "timeout", "that", "was", "introduce", "in", "NUMBER", "x", "be", "sure", "that", "Travis", "test", "works", "fine", "IMPORTANT", "To", "prepare", "ssh", "test", "I", "have", "to", "use", "sudo", "required", "that", "means", "that", "all", "test", "will", "run", "on", "old", "Travis", "infrastructure", "not", "container", "base", "LINK", "ci", "NUMBER", "com", "user", "workers", "container", "based", "infrastructure", "Thanks", "for", "fix", "beers", "I", "think", "oanhnn", "be", "right", "but", "now", "we", "need", "to", "fix", "it", "as", "soon", "as", "possible", "NUMBER", "So", "i", "merge", "this", "PR", "NUMBER", "torinaki", "be", "it", "possible", "to", "implement", "this", "test", "but", "on", "new", "travis", "dockers", "elfet", "oanhnn", "here", "be", "PR", "LINK", "NUMBER", "Manually", "test", "both", "cases", "w", "o", "bug", "with", "bug", "elfet", "about", "test", "implementation", "on", "new", "travis", "docker", "NUMBER", "I", "was", "searching", "on", "github", "for", "already", "exist", "examples", "but", "unfortunatly", "no", "luck", "NUMBER", "My", "current", "implementation", "was", "based", "on", "phpseclib", "implementation", "NUMBER", "Currenlty", "i", "have", "few", "ideas", "where", "we", "should", "drip", "NUMBER", "One", "of", "them", "the", "most", "real", "be", "Try", "to", "install", "SSH", "server", "on", "travis", "docker", "NUMBER", "It", "should", "listen", "on", "NUMBER", "it", "be", "possible", "LINK", "ci", "NUMBER", "com", "user", "ci", "environment", "Networking", "NUMBER", "For", "example", "we", "can", "try", "to", "install", "binary", "of", "openssh", "server", "LINK", "server", "NUMBER", "html", "NUMBER", "After", "update", "form", "NUMBER", "to", "NUMBER", "version", "when", "deploy", "I", "get", "RuntimeException", "ln", "fail", "to", "create", "symbolic", "link", "var", "www", "vhosts", "site", "NUMBER", "com", "httpdocs", "release", "NUMBER", "app", "config", "parameters", "NUMBER", "yml", "No", "such", "file", "or", "directory", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "When", "I", "rollback", "to", "version", "NUMBER", "the", "deploy", "goes", "fine", "Wow", "Need", "to", "investigate", "what", "happens", "NUMBER", "oanhnn", "do", "your", "deploys", "work", "fine", "with", "NUMBER", "and", "NUMBER", "yeah", "this", "be", "exactly", "what", "I", "was", "get", "NUMBER", "Now", "after", "run", "dep", "self", "update", "and", "versi\u00f3n", "NUMBER", "be", "install", "when", "run", "dep", "deploy", "prod", "I", "get", "PHP", "Notice", "Cannot", "connect", "to", "linux", "NUMBER", "server", "NUMBER", "com", "NUMBER", "ar", "NUMBER", "Error", "NUMBER", "Connection", "timed", "out", "in", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Stack", "trace", "PHP", "NUMBER", "main", "usr", "local", "bin", "dep", "NUMBER", "PHP", "NUMBER", "require", "usr", "local", "bin", "dep", "NUMBER", "PHP", "NUMBER", "Deployer", "Deployer", "run", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Task", "Task", "run", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "call_user_func", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "closure", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "connect", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "phpseclib", "Net", "SFTP", "login", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "call_user_func_array", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SFTP", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "phpseclib", "Net", "SSH", "NUMBER", "_login", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SFTP", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "phpseclib", "Net", "SSH", "NUMBER", "_connect", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "user_error", "phar", "usr", "local", "bin", "dep", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "NUMBER", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "My", "server", "config", "be", "php", "server", "prod", "linux", "NUMBER", "server", "NUMBER", "com", "NUMBER", "ar", "NUMBER", "env", "deploy_path", "var", "www", "vhosts", "server", "NUMBER", "com", "NUMBER", "ar", "httpdocs", "user", "user", "password", "stage", "prod", "The", "credentials", "was", "not", "change", "and", "I", "can", "login", "via", "ssh", "normally", "NUMBER", "This", "be", "an", "issue", "introduce", "in", "NUMBER", "it", "should", "be", "fix", "by", "this", "NUMBER", "Fixed", "NUMBER", "It", "temporary", "fix", "problem", "that", "describe", "in", "phpseclib", "phpseclib", "NUMBER", "For", "example", "composer", "install", "may", "be", "stoped", "on", "the", "middle", "of", "progress", "if", "it", "takes", "more", "than", "NUMBER", "sec", "NUMBER", "Cool", "Thanks", "elfet", "oanhnn", "it", "will", "be", "greate", "to", "prepare", "new", "release", "with", "this", "fix", "because", "this", "may", "affect", "many", "users", "NUMBER", "I", "m", "sure", "that", "was", "itroduced", "by", "LINK", "after", "phpseclib", "update", "Ok", "deployphp", "maintainer", "can", "anybody", "make", "new", "release", "Sorry", "I", "get", "PHP", "Notice", "Cannot", "connect", "to", "stage", "NUMBER", "ourserver", "NUMBER", "com", "NUMBER", "Error", "NUMBER", "Operation", "timed", "out", "in", "phar", "Users", "alex", "Downloads", "deployer", "NUMBER", "NUMBER", "phar", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "When", "it", "try", "to", "connect", "NUMBER", "Putting", "in", "a", "number", "like", "NUMBER", "do", "work", "though", "NUMBER", "I", "suggest", "putting", "a", "setting", "that", "can", "be", "change", "but", "defaults", "to", "something", "reasonable", "like", "NUMBER", "minutes", "NUMBER", "PHP_INT_MAX", "on", "my", "machine", "be", "NUMBER", "and", "it", "seems", "it", "really", "messes", "with", "it", "NUMBER", "AlexStansfield", "elfet", "oanhnn", "I", "was", "able", "to", "reproduce", "problem", "NUMBER", "Sorry", "guys", "it", "was", "my", "bad", "NUMBER", "Found", "that", "I", "was", "test", "with", "patched", "phpseclib", "with", "few", "fix", "issue", "by", "me", "NUMBER", "Adding", "NUMBER", "as", "default", "timeout", "be", "proper", "fix", "in", "this", "case", "NUMBER", "I", "have", "prepared", "PR", "NUMBER", "with", "fix", "and", "prepared", "functional", "test", "that", "cover", "timeout", "case", "NUMBER", "Please", "check", "PR", "because", "I", "have", "to", "change", "Travis", "configurations", "to", "achieve", "possibility", "to", "implement", "these", "test", "NUMBER", "In", "case", "if", "you", "will", "not", "agree", "to", "change", "Travis", "change", "I", "will", "remove", "test", "from", "PR", "NUMBER", "The", "problem", "was", "as", "I", "said", "before", "was", "that", "fsockopen", "do", "not", "create", "socket", "with", "huge", "timeout", "but", "NUMBER", "be", "ok", "for", "it", "NUMBER", "NUMBER", "The", "new", "phpseclib", "has", "broken", "git", "clones", "for", "me", "NUMBER", "I", "m", "use", "pemfiles", "for", "auth", "NUMBER", "Everything", "was", "fine", "with", "deployer", "phpseclib", "NUMBER", "but", "now", "git", "clone", "produces", "empty", "directory", "NUMBER", "I", "switched", "to", "NUMBER", "and", "downgraded", "phpseclib", "back", "to", "NUMBER", "and", "everything", "works", "fine", "again", "NUMBER", "AlexStansfield", "I", "will", "look", "at", "this", "problem", "ASAP", "NUMBER", "I", "guess", "problem", "be", "in", "phpseclib", "because", "of", "BC", "breaks", "NUMBER", "It", "s", "a", "pity", "that", "there", "be", "no", "test", "for", "this", "case", "in", "deployer", "NUMBER", "torinaki", "thanks", "NUMBER", "I", "m", "not", "sure", "what", "s", "going", "on", "I", "even", "build", "a", "version", "that", "didn", "t", "suppress", "git", "message", "to", "see", "if", "it", "was", "at", "least", "giving", "me", "some", "useful", "output", "NUMBER", "Absolutely", "nothing", "NUMBER", "I", "d", "imagine", "there", "be", "some", "pretty", "big", "change", "between", "phpseclib", "NUMBER", "and", "NUMBER", "and", "something", "there", "has", "really", "messed", "things", "up", "for", "me", "NUMBER", "AlexStansfield", "I", "can", "say", "that", "deployer", "already", "have", "use", "NUMBER", "version", "of", "phpseclib", "NUMBER", "The", "the", "tag", "v", "NUMBER", "was", "created", "in", "deployphp", "phpseclib", "incorrecly", "NUMBER", "So", "my", "change", "was", "only", "update", "the", "NUMBER", "version", "till", "lastes", "minor", "version", "After", "quick", "investigation", "I", "have", "find", "that", "your", "issue", "may", "be", "relate", "to", "timeout", "NUMBER", "Can", "you", "please", "tell", "me", "be", "you", "use", "timeout", "in", "your", "deployment", "task", "and", "what", "value", "of", "timeout", "your", "be", "use", "torinaki", "actually", "v", "NUMBER", "fork", "on", "deployer", "be", "from", "february", "NUMBER", "NUMBER", "There", "have", "be", "many", "change", "in", "phpseclib", "since", "then", "NUMBER", "LINK", "LINK", "NUMBER", "As", "for", "timeout", "NUMBER", "it", "consistently", "fail", "with", "v", "NUMBER", "from", "phpspeclib", "and", "consistently", "works", "with", "v", "NUMBER", "from", "deployer", "NUMBER", "And", "it", "only", "takes", "about", "NUMBER", "seconds", "to", "do", "the", "git", "clone", "NUMBER", "I", "m", "not", "setting", "any", "timeout", "myself", "NUMBER", "Also", "it", "s", "not", "the", "clone", "that", "causes", "the", "deployer", "to", "fail", "NUMBER", "It", "s", "not", "until", "it", "try", "to", "create", "a", "symlink", "to", "a", "shared", "file", "in", "a", "directory", "that", "doesn", "t", "exist", "as", "it", "wasn", "t", "cloned", "by", "git", "that", "an", "error", "be", "triggered", "NUMBER", "AlexStansfield", "be", "this", "reproduceble", "with", "this", "fix", "LINK", "Please", "try", "with", "a", "latest", "deployer", "NUMBER", "If", "it", "will", "still", "exists", "I", "will", "prepare", "PR", "to", "rollback", "phpseclib", "Actual", "change", "here", "LINK", "Yes", "I", "know", "there", "be", "a", "lot", "change", "but", "in", "actual", "for", "deployer", "classes", "RSA", "and", "SSH", "NUMBER", "there", "be", "not", "so", "many", "NUMBER", "Sorry", "I", "had", "left", "work", "NUMBER", "That", "fix", "breaks", "it", "more", "NUMBER", "When", "trying", "to", "connect", "to", "the", "server", "I", "get", "PHP", "Notice", "Cannot", "connect", "to", "stage", "NUMBER", "ourserver", "NUMBER", "com", "NUMBER", "Error", "NUMBER", "Operation", "timed", "out", "in", "phar", "Users", "alex", "Dev", "Source", "deployer", "deployer", "NUMBER", "phar", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "But", "replacing", "the", "timeout", "with", "with", "a", "high", "enough", "number", "NUMBER", "did", "the", "trick", "NUMBER", "Thanks", "AlexStansfield", "do", "it", "work", "now", "with", "NUMBER", "elfet", "no", "same", "error", "as", "mention", "above", "NUMBER", "I", "have", "to", "replace", "PHP_INT_MAX", "with", "something", "less", "huge", "NUMBER", "I", "mention", "it", "on", "NUMBER", "Really", "strange", "because", "exactly", "same", "error", "I", "have", "notice", "when", "timeout", "was", "NUMBER", "AlexStansfield", "how", "and", "where", "did", "you", "change", "that", "timeout", "What", "PHP", "version", "you", "use", "Anyway", "NUMBER", "NUMBER", "h", "timeout", "should", "be", "enough", "for", "most", "tasks", "so", "if", "this", "fix", "your", "issue", "we", "can", "change", "it", "NUMBER", "I", "guess", "it", "may", "be", "relate", "to", "fsockopen", "somehow", "NUMBER", "Sorry", "but", "please", "twice", "check", "your", "version", "of", "deployer", "to", "be", "sure", "that", "you", "be", "use", "right", "version", "NUMBER", "I", "took", "the", "NUMBER", "source", "and", "add", "PHP_INT_MAX", "as", "you", "suggested", "it", "gave", "me", "that", "error", "NUMBER", "I", "then", "downloaded", "the", "NUMBER", "phar", "file", "and", "tried", "with", "no", "modifications", "and", "it", "gave", "me", "that", "error", "NUMBER", "Alexs", "MBP", "alex", "php", "version", "PHP", "NUMBER", "cli", "build", "Jun", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Copyright", "c", "NUMBER", "NUMBER", "The", "PHP", "Group", "Zend", "Engine", "v", "NUMBER", "Copyright", "c", "NUMBER", "NUMBER", "Zend", "Technologies", "with", "Xdebug", "v", "NUMBER", "Copyright", "c", "NUMBER", "NUMBER", "by", "Derick", "Rethans", "AlexStansfield", "please", "upgrade", "till", "latest", "version", "NUMBER", "Fix", "already", "in", "master", "Yep", "that", "fix", "it", "cheer", "My", "user", "uploads", "reside", "in", "my", "web", "dir", "be", "there", "a", "know", "way", "of", "handle", "this", "data", "during", "deployment", "so", "its", "not", "overwritten", "and", "lost", "on", "each", "deployment", "Ah", "right", "NUMBER", "Good", "to", "know", "I", "miss", "the", "line", "NUMBER", "shared", "contains", "shared", "common", "file", "and", "directories", "between", "release", "logs", "shared", "data", "etc", "NUMBER", "NUMBER", "Does", "that", "simply", "mean", "that", "those", "directories", "will", "be", "maintained", "and", "undisturbed", "during", "deployment", "ummm", "NUMBER", "no", "NUMBER", "That", "means", "that", "in", "directory", "shared", "there", "ll", "be", "created", "web", "upload", "dir", "structure", "and", "upon", "deploment", "web", "upload", "in", "uployed", "will", "be", "a", "symlink", "to", "shared", "web", "upload", "If", "You", "re", "starting", "to", "use", "deployer", "instead", "of", "handle", "shared", "from", "get", "go", "it", "would", "be", "wise", "to", "manually", "perform", "creation", "of", "shared", "web", "upload", "and", "placing", "file", "in", "it", "because", "on", "first", "deploy", "actuall", "dir", "will", "get", "remove", "NUMBER", "that", "basically", "means", "that", "file", "and", "directories", "be", "preserved", "but", "outside", "of", "deployment", "moves", "simply", "by", "symlinking", "to", "them", "NUMBER", "OK", "thanks", "NUMBER", "That", "makes", "sense", "and", "further", "investigation", "shows", "this", "to", "be", "the", "case", "NUMBER", "I", "can", "see", "how", "to", "do", "this", "migration", "now", "copying", "file", "first", "to", "ensure", "they", "be", "not", "lost", "then", "the", "symlink", "will", "take", "care", "of", "future", "uploads", "as", "the", "symlink", "will", "be", "in", "place", "NUMBER", "When", "attempting", "to", "run", "composer", "install", "the", "following", "error", "occur", "Could", "not", "open", "input", "file", "app", "console", "In", "my", "deployer", "NUMBER", "php", "file", "I", "have", "set", "set", "bin_dir", "bin", "But", "the", "error", "still", "references", "app", "console", "rather", "than", "bin", "which", "be", "where", "my", "console", "executable", "resides", "NUMBER", "Have", "I", "miss", "something", "Or", "be", "my", "console", "executable", "in", "the", "wrong", "location", "I", "think", "the", "issue", "be", "occuring", "because", "when", "I", "first", "set", "up", "Symfony", "NUMBER", "I", "selected", "to", "use", "the", "Symfony", "NUMBER", "directory", "structure", "NUMBER", "I", "have", "since", "managed", "to", "undo", "most", "of", "this", "and", "get", "console", "into", "my", "app", "directory", "NUMBER", "There", "be", "still", "issue", "though", "so", "I", "think", "I", "will", "figure", "those", "out", "before", "determining", "that", "the", "issue", "be", "with", "Deployer", "and", "not", "my", "set", "up", "NUMBER", "I", "be", "still", "having", "issue", "it", "seems", "after", "revert", "back", "to", "the", "Symfony", "NUMBER", "dir", "structure", "NUMBER", "This", "time", "its", "Script", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "clearCache", "handle", "the", "post", "install", "cmd", "event", "terminated", "with", "an", "exception", "RuntimeException", "An", "error", "occur", "when", "executing", "the", "cache", "clear", "no", "warmup", "command", "NUMBER", "name", "symfony", "framework", "standard", "edition", "license", "MIT", "type", "project", "description", "The", "Symfony", "Standard", "Edition", "distribution", "autoload", "psr", "NUMBER", "src", "SymfonyStandard", "app", "require", "php", "NUMBER", "symfony", "symfony", "NUMBER", "doctrine", "orm", "NUMBER", "NUMBER", "doctrine", "doctrine", "bundle", "NUMBER", "twig", "extensions", "NUMBER", "symfony", "assetic", "bundle", "NUMBER", "symfony", "swiftmailer", "bundle", "NUMBER", "symfony", "monolog", "bundle", "NUMBER", "sensio", "distribution", "bundle", "NUMBER", "sensio", "framework", "extra", "bundle", "NUMBER", "incenteev", "composer", "parameter", "handler", "NUMBER", "friendsofsymfony", "user", "bundle", "NUMBER", "dev", "friendsofsymfony", "jsrouting", "bundle", "stable", "adamquaile", "symfony", "fieldset", "bundle", "gregwar", "image", "bundle", "dev", "master", "salavert", "time", "ago", "in", "words", "NUMBER", "hwi", "oauth", "bundle", "NUMBER", "dev", "jms", "serializer", "bundle", "NUMBER", "liip", "url", "auto", "converter", "bundle", "dev", "master", "eko", "feedbundle", "dev", "master", "NUMBER", "f", "converter", "dev", "master", "zaachi", "PHP", "Instagram", "effect", "dev", "master", "lunetics", "locale", "bundle", "NUMBER", "friendsofsymfony", "rest", "bundle", "NUMBER", "require", "dev", "sensio", "generator", "bundle", "NUMBER", "scripts", "post", "root", "package", "install", "SymfonyStandard", "Composer", "hookRootPackageInstall", "post", "install", "cmd", "Incenteev", "ParameterHandler", "ScriptHandler", "buildParameters", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "buildBootstrap", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "clearCache", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "installAssets", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "installRequirementsFile", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "removeSymfonyStandardFiles", "post", "update", "cmd", "Incenteev", "ParameterHandler", "ScriptHandler", "buildParameters", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "buildBootstrap", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "clearCache", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "installAssets", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "installRequirementsFile", "Sensio", "Bundle", "DistributionBundle", "Composer", "ScriptHandler", "removeSymfonyStandardFiles", "config", "bin", "dir", "bin", "extra", "symfony", "app", "dir", "app", "symfony", "bin", "dir", "bin", "symfony", "var", "dir", "var", "symfony", "web", "dir", "httpdocs", "incenteev", "parameters", "file", "app", "config", "parameters", "NUMBER", "yml", "branch", "alias", "dev", "master", "NUMBER", "dev", "In", "function", "from", "common", "recipe", "recipe", "common", "NUMBER", "php", "php", "Release", "task", "deploy", "release", "function", "release", "run", "date", "Y", "m", "d", "H", "M", "S", "releasePath", "deploy_path", "release", "release", "i", "NUMBER", "while", "is_dir", "env", "parse", "releasePath", "i", "TAG", "desc", "Prepare", "release", "This", "lines", "php", "while", "is_dir", "env", "parse", "releasePath", "i", "TAG", "user", "user", "identityFile", "stage", "pre", "production", "env", "deploy_path", "var", "www", "preprod", "env", "branch", "master", "My", "coworker", "uses", "the", "same", "script", "but", "it", "do", "not", "work", "for", "him", "NUMBER", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "So", "he", "tried", "to", "add", "forwardAgent", "server", "preprod", "myserver", "NUMBER", "net", "NUMBER", "user", "user", "identityFile", "forwardAgent", "stage", "pre", "production", "env", "deploy_path", "var", "www", "preprod", "env", "branch", "master", "It", "works", "for", "him", "but", "not", "for", "me", "NUMBER", "So", "I", "moved", "the", "forwardAgent", "server", "preprod", "myserver", "NUMBER", "net", "NUMBER", "user", "user", "forwardAgent", "identityFile", "stage", "pre", "production", "env", "deploy_path", "var", "www", "preprod", "env", "branch", "master", "Works", "for", "me", "NUMBER", "But", "not", "for", "him", "NUMBER", "Someone", "has", "an", "idea", "Now", "forwardAgent", "and", "identityFile", "mutually", "exclusive", "due", "to", "phpseclib", "implementation", "NUMBER", "I", "m", "work", "on", "new", "ssh", "agent", "for", "Deployer", "right", "now", "NUMBER", "Check", "if", "your", "id_rsa", "keys", "in", "same", "paths", "in", "identityFile", "NUMBER", "Yes", "our", "id_rsa", "keys", "be", "in", "same", "paths", "than", "identityFile", "parameter", "values", "NUMBER", "Any", "update", "on", "this", "We", "be", "having", "exact", "same", "issue", "NUMBER", "We", "find", "out", "that", "we", "having", "different", "version", "of", "openssh", "NUMBER", "Can", "that", "be", "the", "issue", "Is", "there", "any", "version", "support", "or", "required", "I", "have", "OpenSSH_", "NUMBER", "p", "NUMBER", "LibreSSL", "NUMBER", "No", "need", "to", "use", "ForwardAgent", "option", "Member", "has", "OpenSSH_", "NUMBER", "p", "NUMBER", "OSSLShim", "NUMBER", "r", "NUMBER", "Dec", "NUMBER", "Needs", "ForwardAgent", "option", "NUMBER", "Here", "s", "the", "server", "definition", "php", "server", "dev", "dev", "NUMBER", "server", "NUMBER", "com", "NUMBER", "user", "root", "env", "deploy_path", "var", "www", "html", "stage", "dev", "identityFile", "Is", "it", "possible", "to", "use", "deployer", "with", "ssh", "agent", "on", "Windows", "When", "I", "be", "connecting", "with", "identityFile", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "MyStrongPassword", "it", "s", "ok", "NUMBER", "Deployment", "be", "successful", "NUMBER", "But", "it", "s", "not", "secure", "to", "store", "MyStrongPassword", "here", "NUMBER", "I", "be", "trying", "to", "use", "forwardAgent", "and", "all", "I", "get", "be", "Warning", "fsockopen", "unable", "to", "connect", "to", "unix", "C", "Users", "NUMBER", "NUMBER", "AppData", "Local", "Temp", "ssh", "lZz", "NUMBER", "mszVrxCO", "agent", "NUMBER", "NUMBER", "Unable", "to", "find", "the", "socket", "transport", "unix", "did", "you", "forget", "to", "enable", "it", "when", "you", "configured", "PHP", "in", "path", "to", "vendor", "deployer", "phpseclib", "phpseclib", "System", "SSH", "Agent", "NUMBER", "php", "on", "line", "NUMBER", "Notice", "Unable", "to", "connect", "to", "ssh", "agent", "Error", "NUMBER", "Unable", "to", "find", "the", "socket", "transport", "unix", "did", "you", "forget", "to", "enable", "it", "when", "you", "configured", "PHP", "in", "path", "to", "vendor", "deployer", "phpseclib", "phpseclib", "System", "SSH", "Agent", "NUMBER", "php", "on", "line", "NUMBER", "RuntimeException", "Unable", "to", "login", "with", "the", "provide", "credentials", "NUMBER", "I", "be", "use", "LINK", "and", "ssh", "agent", "works", "great", "NUMBER", "I", "just", "typing", "ssh", "user", "hostname", "and", "connection", "be", "successful", "NUMBER", "Also", "I", "can", "use", "pageant", "agent", "Putty", "NUMBER", "It", "works", "great", "too", "NUMBER", "Error", "NUMBER", "Unable", "to", "find", "the", "socket", "transport", "unix", "did", "you", "forget", "to", "enable", "it", "when", "you", "configured", "PHP", "Couldn", "t", "find", "any", "information", "about", "unix", "sockets", "on", "Windows", "NUMBER", "NUMBER", "Is", "it", "possible", "to", "use", "unix", "sockets", "on", "Windows", "I", "think", "answer", "be", "NO", "NUMBER", "Is", "it", "possible", "to", "use", "another", "socket", "transport", "to", "connect", "to", "ssh", "agent", "on", "Windows", "I", "have", "exact", "same", "problem", "on", "Windows", "NUMBER", "frutality", "When", "I", "be", "connecting", "with", "identityFile", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "MyStrongPassword", "it", "s", "ok", "NUMBER", "I", "even", "could", "not", "deploy", "with", "identityFile", "NUMBER", "When", "use", "identityFile", "how", "could", "deployment", "server", "be", "authenticated", "by", "git", "server", "Did", "you", "upload", "private", "key", "to", "deployment", "server", "Why", "be", "this", "close", "I", "m", "having", "same", "issue", "NUMBER", "use", "windows", "everything", "works", "with", "putty", "pageant", "everything", "works", "with", "ssh", "ssh", "agent", "deployer", "doesn", "t", "work", "same", "error", "as", "describe", "above", "NUMBER", "stream_get_transports", "returns", "string", "NUMBER", "tcp", "string", "NUMBER", "udp", "string", "NUMBER", "ssl", "string", "NUMBER", "sslv", "NUMBER", "string", "NUMBER", "sslv", "NUMBER", "string", "NUMBER", "tls", "string", "NUMBER", "tlsv", "NUMBER", "string", "NUMBER", "tlsv", "NUMBER", "string", "NUMBER", "tlsv", "NUMBER", "How", "exactly", "do", "I", "enable", "unix", "socket", "transport", "in", "my", "php", "NUMBER", "ini", "in", "windows", "If", "unix", "transport", "be", "not", "available", "maybe", "you", "could", "implement", "some", "other", "way", "of", "use", "ssh", "agent", "or", "pageant", "the", "way", "default", "utilites", "like", "ssh", "do", "it", "NUMBER", "Hi", "oanhnn", "thanks", "for", "your", "reply", "NUMBER", "With", "stream_get_transports", "I", "have", "shown", "that", "I", "don", "t", "have", "unix", "transport", "available", "install", "NUMBER", "That", "be", "certainly", "the", "reason", "it", "fail", "for", "me", "NUMBER", "I", "be", "use", "latest", "wamp", "on", "windows", "php", "NUMBER", "or", "NUMBER", "Since", "it", "works", "for", "you", "you", "must", "have", "unix", "transport", "NUMBER", "How", "do", "I", "get", "one", "Symfony", "recipe", "currently", "forces", "to", "use", "assetic", "NUMBER", "I", "think", "this", "a", "bit", "rude", "since", "assetic", "be", "absolutely", "not", "mandatory", "for", "a", "Symfony", "project", "NUMBER", "It", "would", "be", "nice", "to", "remove", "from", "main", "task", "maybe", "add", "a", "note", "in", "documentation", "suggesting", "to", "possibly", "enable", "deploy", "assetic", "dump", "use", "after", "function", "NUMBER", "A", "possible", "alternate", "solution", "be", "setting", "a", "boolean", "configuration", "variable", "so", "you", "can", "disable", "enable", "assetic", "in", "Symfony", "this", "be", "how", "capifony", "do", "To", "be", "honest", "I", "build", "by", "assets", "by", "gulp", "on", "every", "deployment", "on", "the", "server", "side", "so", "I", "don", "t", "use", "assetic", "either", "NUMBER", "The", "simplest", "solution", "could", "be", "to", "separate", "the", "assetic", "part", "into", "a", "separate", "recipe", "but", "this", "would", "of", "course", "would", "be", "a", "BC", "break", "NUMBER", "Another", "solution", "that", "s", "a", "non", "breaking", "change", "could", "be", "achieved", "use", "global", "variables", "so", "that", "if", "something", "like", "sf_skip_assetic", "was", "set", "to", "true", "then", "the", "task", "would", "do", "nothing", "NUMBER", "It", "s", "not", "the", "nicest", "solution", "since", "the", "task", "itself", "would", "still", "run", "pretending", "to", "build", "assets", "but", "in", "reality", "it", "would", "do", "nothing", "NUMBER", "Sure", "NUMBER", "NUMBER", "AsseticBundle", "has", "be", "remove", "from", "Symfony", "Standard", "Edition", "for", "Symfony", "NUMBER", "as", "default", "NUMBER", "I", "think", "the", "recipe", "should", "only", "contain", "the", "basics", "of", "Symfony", "against", "the", "newest", "Symfony", "Standard", "Edition", "NUMBER", "LINK", "standard", "Symfony", "NUMBER", "RuntimeException", "Symfony", "Component", "Console", "Exception", "CommandNotFoundException", "There", "be", "no", "commands", "defined", "in", "the", "assetic", "namespace", "NUMBER", "Did", "you", "mean", "this", "assets", "Maybe", "you", "close", "it", "too", "fast", "There", "be", "no", "mention", "about", "the", "new", "option", "add", "in", "NUMBER", "in", "docs", "NUMBER", "Agree", "NUMBER", "Need", "to", "update", "docs", "NUMBER", "Lets", "turn", "off", "assetic", "by", "default", "NUMBER", "The", "same", "in", "Powershell", "and", "in", "ConEmu", "NUMBER", "Maybe", "it", "be", "better", "to", "display", "just", "plain", "text", "in", "Windows", "env", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "_", "NUMBER", "select", "administrator_", "windows", "powershell", "LINK", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "b", "NUMBER", "ad", "NUMBER", "fbad", "NUMBER", "b", "NUMBER", "png", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "_", "NUMBER", "administrator_", "c__windows_system", "NUMBER", "_cmd", "exe", "LINK", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "d", "NUMBER", "dd", "NUMBER", "dbbb", "NUMBER", "png", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "_", "NUMBER", "_", "NUMBER", "administrator_", "powershell", "LINK", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "ee", "NUMBER", "b", "NUMBER", "c", "NUMBER", "a", "NUMBER", "a", "NUMBER", "a", "NUMBER", "png", "why", "was", "this", "close", "The", "issue", "be", "still", "present", "NUMBER", "Yes", "but", "still", "need", "to", "be", "fix", "NUMBER", "Anyone", "want", "to", "contribute", "I", "will", "probably", "get", "to", "it", "during", "the", "holidays", "or", "sooner", "NUMBER", "But", "it", "be", "only", "one", "file", "Informer", "NUMBER", "php", "that", "needs", "to", "be", "change", "NUMBER", "Can", "be", "temporary", "fix", "with", "chcp", "NUMBER", "before", "run", "deployer", "Corrected", "comments", "Refactored", "default", "setting", "into", "builder", "class", "to", "match", "other", "defaults", "location", "Based", "on", "NUMBER", "and", "NUMBER", "Unfortunately", "it", "seems", "that", "php", "ssh", "doesn", "t", "support", "timeout", "Herzult", "php", "ssh", "NUMBER", "Cool", "I", "think", "it", "be", "better", "if", "support", "localServer", "name", "timeout", "NUMBER", "and", "server", "name", "host", "port", "NUMBER", "timeout", "NUMBER", "oanhnn", "Well", "I", "made", "it", "like", "this", "because", "elfet", "said", "that", "it", "would", "be", "better", "LINK", "discussion_r", "NUMBER", "NUMBER", "If", "I", "understand", "correctly", "elfet", "What", "do", "you", "think", "davidkudera", "Can", "you", "write", "docs", "and", "create", "a", "PR", "to", "LINK", "oanhnn", "sure", "I", "ll", "do", "that", "right", "after", "you", "ll", "decide", "which", "version", "be", "better", "method", "or", "argument", "elfet", "Do", "you", "decide", "which", "version", "be", "better", "method", "or", "argument", "NUMBER", "server", "NUMBER", "timeout", "NUMBER", "or", "server", "dev", "NUMBER", "NUMBER", "NUMBER", "or", "both", "smile", "elfet", "yes", "that", "be", "only", "logical", "since", "runLocally", "also", "has", "it", "NUMBER", "Actually", "I", "was", "thinking", "about", "it", "too", "but", "I", "didn", "t", "want", "to", "do", "that", "in", "my", "first", "PR", "because", "it", "worked", "just", "for", "local", "server", "and", "it", "would", "mean", "to", "change", "implementation", "of", "ServerInterface", "NUMBER", "Also", "I", "made", "just", "the", "change", "mention", "in", "the", "second", "PR", "NUMBER", "But", "what", "if", "we", "ll", "change", "ServerInterface", "run", "but", "keep", "global", "server", "configuration", "too", "If", "user", "provide", "second", "argument", "at", "run", "method", "we", "ll", "use", "that", "othervise", "we", "ll", "use", "value", "from", "server", "configuration", "NUMBER", "And", "for", "people", "use", "ssh", "we", "can", "throw", "some", "NotImplementedException", "for", "example", "NUMBER", "What", "do", "you", "think", "Ok", "so", "should", "I", "change", "it", "elfet", "oanhnn", "elfet", "ok", "I", "ll", "force", "push", "these", "change", "NUMBER", "Unfortunately", "right", "now", "I", "don", "t", "have", "time", "but", "I", "should", "be", "back", "home", "maybe", "at", "sunday", "elfet", "oanhnn", "what", "do", "you", "think", "now", "guys", "ping", "elfet", "oanhnn", "rebased", "to", "master", "Timeout", "be", "not", "support", "in", "ssh", "connection", "NUMBER", "WE", "really", "need", "to", "figure", "out", "how", "to", "implement", "this", "in", "ssh", "NUMBER", "ext", "NUMBER", "Otherwise", "timeout", "with", "be", "really", "strange", "functionality", "NUMBER", "Yeah", "but", "do", "we", "know", "if", "ssh", "NUMBER", "be", "still", "developed", "Last", "commit", "was", "NUMBER", "months", "ago", "NUMBER", "elfet", "davidkudera", "SSH", "wrapper", "library", "use", "stream", "blocking", "NUMBER", "It", "s", "easy", "to", "refactor", "code", "to", "imlement", "not", "blocking", "implementation", "with", "callback", "LINK", "ssh", "blob", "d", "NUMBER", "d", "NUMBER", "a", "NUMBER", "f", "NUMBER", "cd", "NUMBER", "c", "NUMBER", "aa", "NUMBER", "src", "Ssh", "Exec", "NUMBER", "php", "L", "NUMBER", "But", "I", "m", "still", "wonder", "about", "use", "cases", "of", "this", "timeout", "NUMBER", "davidkudera", "can", "you", "please", "provide", "some", "examples", "of", "use", "cases", "Specialy", "for", "me", "NUMBER", "I", "m", "just", "curious", "NUMBER", "Or", "another", "idea", "be", "to", "wrap", "command", "with", "some", "shell", "timeout", "function", "NUMBER", "Windows", "LINK", "batch", "analogue", "for", "timeout", "command", "Linux", "LINK", "pages", "man", "NUMBER", "timeout", "NUMBER", "html", "Without", "any", "magic", "torinaki", "sure", "for", "example", "we", "were", "developing", "new", "version", "of", "our", "website", "for", "more", "than", "half", "of", "a", "year", "without", "touching", "NUMBER", "version", "NUMBER", "My", "deploy", "process", "fail", "almost", "immediatelly", "to", "be", "more", "specific", "at", "database", "migrations", "NUMBER", "On", "my", "PC", "with", "linux", "it", "runs", "for", "about", "NUMBER", "minutes", "and", "I", "wasn", "t", "even", "brave", "enough", "to", "try", "it", "on", "Windows", "grinning", "davidkudera", "for", "what", "exact", "task", "you", "suppose", "to", "use", "timeout", "Database", "migrations", "Yes", "for", "now", "only", "for", "database", "migrations", "but", "maybe", "there", "will", "be", "some", "other", "tasks", "too", "NUMBER", "I", "just", "notice", "that", "this", "PR", "be", "still", "open", "NUMBER", "Is", "there", "anything", "I", "can", "do", "now", "to", "make", "it", "merge", "The", "problem", "with", "SSH", "be", "unfortunate", "but", "I", "think", "that", "the", "solution", "propose", "in", "this", "PR", "be", "still", "much", "better", "than", "the", "current", "state", "of", "deployer", "NUMBER", "Still", "open", "elfet", "When", "do", "it", "get", "merge", "elfet", "from", "my", "point", "of", "view", "it", "be", "important", "that", "following", "comment", "should", "be", "address", "before", "merge", "LINK", "discussion_r", "NUMBER", "otherwise", "deployer", "will", "silently", "stop", "task", "in", "case", "when", "it", "wil", "reaches", "timeout", "NUMBER", "NUMBER", "elfet", "fix", "ZhukV", "the", "maintainers", "seem", "to", "like", "it", "It", "s", "only", "miss", "a", "little", "doc", "Lets", "merge", "Docs", "will", "come", "late", "i", "hope", "NUMBER", "Adds", "new", "option", "runAlwaysOn", "to", "task", "based", "on", "NUMBER", "Configuration", "php", "localServer", "production", "localServer", "test", "NUMBER", "localServer", "test", "NUMBER", "task", "database", "sync", "function", "write", "syncing", "database", "from", "NUMBER", "env", "server", "NUMBER", "name", "runAlwaysOn", "production", "Test", "dep", "test", "production", "output", "syncing", "database", "from", "production", "dep", "test", "test", "NUMBER", "output", "syncing", "database", "from", "production", "dep", "test", "test", "NUMBER", "output", "syncing", "database", "from", "production", "Now", "it", "doesn", "t", "matter", "on", "which", "server", "you", "want", "to", "run", "some", "task", "it", "will", "just", "always", "run", "on", "the", "defined", "one", "NUMBER", "That", "can", "be", "easily", "use", "for", "example", "for", "syncing", "database", "from", "production", "to", "other", "servers", "independently", "NUMBER", "Todo", "Is", "runAlwaysOn", "good", "name", "Is", "it", "possible", "to", "somehow", "test", "at", "which", "server", "current", "task", "runs", "env", "server", "NUMBER", "name", "can", "t", "be", "use", "I", "don", "t", "know", "how", "to", "test", "ParallelExecutor", "NUMBER", "At", "least", "not", "yet", "I", "ll", "be", "able", "to", "test", "it", "at", "real", "application", "tomorow", "at", "work", "rebased", "to", "master", "davidkudera", "this", "be", "cool", "feature", "but", "i", "think", "its", "really", "edge", "case", "NUMBER", "I", "m", "work", "on", "plugin", "system", "for", "Deployer", "v", "NUMBER", "with", "will", "be", "able", "to", "add", "your", "functionality", "as", "plugin", "NUMBER", "Ok", "I", "ll", "use", "my", "fork", "for", "now", "NUMBER", "Btw", "plugins", "would", "be", "really", "really", "great", "wink", "Hi", "I", "have", "a", "task", "which", "need", "to", "know", "the", "current", "environment", "stage", "the", "one", "i", "pass", "through", "the", "cli", "NUMBER", "so", "NUMBER", "vendor", "bin", "dep", "deploy", "dev", "would", "give", "me", "dev", "NUMBER", "I", "ve", "looked", "through", "documentation", "but", "can", "t", "find", "any", "mention", "of", "this", "NUMBER", "Danielss", "NUMBER", "Can", "you", "try", "this", "code", "task", "foo", "bar", "function", "For", "argument", "stage", "null", "if", "input", "hasArgument", "stage", "stage", "input", "getArgument", "stage", "For", "option", "tag", "null", "if", "input", "hasOption", "tag", "tag", "input", "getOption", "tag", "See", "more", "in", "NUMBER", "Thx", "that", "worked", "Is", "it", "possible", "to", "deploy", "to", "more", "than", "one", "stage", "at", "the", "same", "time", "in", "once", "cli", "command", "Somehow", "relate", "what", "be", "the", "preferred", "way", "to", "execute", "tasks", "only", "for", "some", "stages", "Do", "I", "have", "to", "check", "it", "inside", "the", "task", "or", "be", "there", "something", "else", "I", "can", "do", "Hmm", "NUMBER", "I", "meant", "programmatically", "NUMBER", "I", "have", "a", "task", "import", "database", "from", "production", "which", "I", "only", "want", "to", "execute", "on", "stages", "test", "and", "staging", "NUMBER", "It", "s", "set", "up", "as", "a", "before", "task", "for", "database", "migrate", "NUMBER", "I", "d", "like", "to", "execute", "this", "conditionally", "based", "on", "the", "stage", "NUMBER", "temp", "I", "think", "that", "I", "was", "trying", "to", "do", "something", "similar", "but", "with", "no", "success", "NUMBER", "See", "NUMBER", "issue", "and", "PR", "NUMBER", "Unfortunately", "there", "be", "no", "way", "to", "change", "process", "timeout", "for", "commands", "run", "on", "local", "server", "NUMBER", "Method", "runLocally", "has", "that", "option", "NUMBER", "I", "think", "all", "servers", "local", "or", "remote", "should", "support", "timeout", "link", "pull", "request", "NUMBER", "And", "not", "use", "env", "var", "NUMBER", "Yep", "you", "be", "of", "course", "right", "NUMBER", "Sorry", "I", "didn", "t", "notice", "that", "pull", "request", "wink", "elfet", "I", "m", "thinking", "about", "it", "too", "NUMBER", "So", "I", "ll", "probably", "do", "that", "because", "I", "really", "need", "it", "Just", "little", "bit", "of", "syntactic", "sugar", "NUMBER", "What", "do", "you", "think", "String", "at", "onlyOn", "method", "That", "LINK", "issuecomment", "NUMBER", "example", "from", "NUMBER", "didn", "t", "work", "and", "here", "LINK", "issuecomment", "NUMBER", "it", "was", "suggested", "to", "use", "strings", "too", "NUMBER", "But", "the", "method", "internally", "works", "with", "arrays", "so", "it", "should", "either", "accept", "both", "arrays", "and", "strings", "or", "I", "think", "that", "there", "should", "be", "an", "array", "type", "hint", "NUMBER", "I", "think", "this", "method", "should", "internally", "works", "with", "arrays", "NUMBER", "We", "should", "not", "complicate", "it", "NUMBER", "I", "agree", "about", "not", "complicating", "things", "so", "what", "do", "you", "think", "about", "add", "array", "type", "hint", "Because", "now", "I", "think", "that", "many", "people", "myself", "you", "and", "owner", "of", "repo", "including", "actually", "try", "strings", "but", "it", "will", "throw", "LINK", "completely", "unrelated", "error", "NUMBER", "Yes", "it", "be", "add", "array", "type", "hint", "by", "phpdoc", "param", "array", "servers", "return", "this", "Sorry", "I", "didn", "t", "mean", "phpdoc", "but", "method", "type", "hint", "NUMBER", "php", "public", "function", "onlyOn", "array", "servers", "Error", "LINK", "LINK", "be", "much", "better", "than", "LINK", "LINK", "NUMBER", "At", "least", "I", "think", "wink", "Yes", "i", "agree", "we", "will", "use", "method", "type", "hint", "NUMBER", "Can", "you", "create", "PR", "Sure", "thing", "NUMBER", "Should", "I", "also", "add", "default", "value", "array", "servers", "I", "simplified", "onlyOn", "method", "like", "rodnover", "NUMBER", "said", "elfet", "davidkudera", "I", "think", "it", "be", "easy", "use", "for", "users", "if", "param", "always", "be", "array", "NUMBER", "Document", "will", "be", "clearer", "and", "run", "faster", "php", "onlyOn", "dev", "or", "onlyOn", "dev", "elfet", "I", "agree", "with", "oanhnn", "that", "things", "should", "not", "be", "too", "complicated", "but", "than", "I", "notice", "that", "both", "of", "you", "use", "onlyOn", "dev", "smile", "Thats", "the", "true", "reason", "I", "created", "this", "PR", "NUMBER", "The", "only", "thing", "that", "remains", "be", "if", "I", "should", "keep", "it", "like", "this", "php", "array_flip", "is_array", "servers", "servers", "servers", "or", "change", "it", "to", "php", "array_flip", "is_array", "servers", "servers", "func_get_args", "People", "than", "can", "use", "onlyOn", "dev", "test", "production", "but", "thats", "maybe", "too", "much", "of", "magic", "Hi", "any", "improvement", "on", "this", "Did", "you", "decide", "if", "you", "want", "this", "feature", "or", "if", "I", "should", "change", "it", "somehow", "rebased", "to", "master", "I", "vote", "for", "array_flip", "is_array", "servers", "servers", "func_get_args", "if", "also", "get", "good", "docs", "for", "this", "NUMBER", "Will", "be", "awesome", "elfet", "should", "I", "wait", "for", "some", "other", "votes", "or", "do", "you", "want", "me", "to", "change", "it", "I", "can", "write", "docs", "too", "davidkudera", "i", "think", "do", "it", "If", "we", "will", "have", "great", "docs", "everything", "will", "be", "ok", "NUMBER", "davidkudera", "can", "you", "set", "array_flip", "is_array", "servers", "servers", "func_get_args", "I", "want", "to", "merge", "it", "Sorry", "I", "forgot", "so", "thanks", "for", "reminding", "me", "NUMBER", "Btw", "do", "wink", "Cool", "Thanks", "Please", "add", "some", "docs", "on", "this", "feature", "Hi", "please", "be", "it", "possible", "to", "somehow", "run", "command", "on", "different", "server", "I", "have", "for", "example", "task", "database", "sync", "which", "I", "run", "like", "this", "dep", "database", "sync", "test", "I", "have", "two", "servers", "defined", "production", "test", "Now", "I", "would", "like", "to", "connect", "to", "production", "create", "database", "dump", "download", "it", "and", "then", "upload", "it", "to", "the", "test", "server", "NUMBER", "If", "it", "be", "not", "possible", "maybe", "yet", "smile", "be", "there", "at", "least", "some", "workaround", "please", "Thank", "you", "Ou", "NUMBER", "I", "just", "find", "NUMBER", "so", "I", "ll", "try", "the", "suggested", "solution", "NUMBER", "Sorry", "if", "this", "be", "a", "duplicate", "So", "I", "tried", "onlyOn", "method", "but", "that", "will", "only", "run", "task", "if", "given", "server", "name", "from", "command", "be", "same", "davidkudera", "Can", "you", "try", "php", "task", "database", "dump", "function", "TODO", "dump", "and", "download", "onlyOn", "production", "task", "database", "restore", "function", "TODO", "upload", "and", "restore", "onlyOn", "test", "task", "database", "sync", "database", "dump", "database", "restore", "server", "test", "NUMBER", "NUMBER", "user", "your_user", "identityFile", "stage", "dev", "env", "deploy_path", "var", "www", "apps", "your_app", "env", "branch", "master", "server", "production", "NUMBER", "NUMBER", "user", "your_user", "identityFile", "stage", "dev", "env", "deploy_path", "var", "www", "apps", "your_app", "env", "branch", "master", "and", "run", "dep", "database", "sync", "dev", "vvv", "Goodluck", "oanhnn", "that", "s", "what", "I", "tried", "wink", "php", "task", "database", "dump", "function", "write", "DUMPING", "NUMBER", "onlyOn", "production", "task", "database", "restore", "function", "write", "RESTORING", "NUMBER", "task", "database", "sync", "database", "dump", "database", "restore", "output", "Executing", "task", "database", "dump", "Executing", "task", "database", "restore", "RESTORING", "NUMBER", "Ok", "davidkudera", "With", "your", "case", "please", "try", "my", "script", "NUMBER", "Your", "script", "miss", "onlyOn", "test", "and", "settings", "server", "stage", "dev", "oanhnn", "I", "didn", "t", "notice", "your", "stage", "setup", "sorry", "NUMBER", "So", "with", "that", "setup", "php", "localServer", "production", "stage", "dev", "david_work", "test", "localServer", "test", "stage", "dev", "test", "localServer", "david_work", "stage", "dev", "david_work", "task", "database", "dump", "function", "write", "DUMPING", "NUMBER", "onlyOn", "production", "task", "database", "restore", "function", "write", "RESTORING", "NUMBER", "onlyOn", "test", "david_work", "task", "database", "sync", "database", "dump", "database", "restore", "I", "was", "able", "to", "run", "all", "tasks", "like", "I", "needed", "NUMBER", "The", "only", "problem", "be", "that", "it", "looks", "quite", "difficult", "to", "just", "run", "some", "task", "on", "different", "server", "wink", "Edit", "I", "should", "also", "say", "that", "I", "need", "my", "work", "computer", "here", "as", "well", "I", "think", "it", "will", "be", "easy", "if", "you", "split", "it", "into", "NUMBER", "standalone", "works", "Good", "luck", "I", "be", "closing", "thing", "issue", "but", "feel", "free", "to", "reopen", "if", "you", "think", "there", "needs", "to", "be", "more", "discussion", "NUMBER", "What", "do", "you", "think", "about", "some", "other", "option", "Somehing", "like", "runAt", "for", "example", "NUMBER", "Because", "now", "if", "I", "ll", "want", "to", "add", "another", "server", "I", "ll", "have", "to", "update", "production", "configuration", "which", "btw", "seems", "little", "strange", "to", "me", "and", "database", "restore", "task", "too", "NUMBER", "And", "thats", "just", "one", "task", "NUMBER", "Later", "I", "ll", "have", "to", "add", "another", "similar", "task", "for", "downloading", "some", "uploaded", "file", "like", "user", "s", "profile", "images", "etc", "NUMBER", "NUMBER", "elfet", "Yeah", "I", "know", "sorry", "NUMBER", "But", "you", "know", "what", "I", "meant", "right", "smiley", "I", "find", "another", "flaw", "NUMBER", "Every", "other", "task", "needs", "to", "have", "onlyOn", "options", "too", "which", "be", "not", "so", "nice", "disappointed", "Also", "I", "can", "t", "reopen", "this", "issue", "but", "maybe", "it", "s", "issue", "just", "for", "me", "NUMBER", "Sure", "I", "just", "add", "a", "new", "task", "database", "migrate", "to", "database", "sync", "for", "run", "doctrine", "migrations", "but", "it", "throw", "an", "error", "for", "this", "command", "dep", "database", "migrate", "test", "I", "just", "forgot", "to", "set", "onlyOn", "on", "that", "new", "command", "which", "be", "my", "mistake", "NUMBER", "Problem", "be", "that", "our", "old", "deployment", "also", "write", "in", "deployer", "has", "about", "NUMBER", "tasks", "and", "the", "new", "version", "which", "be", "write", "from", "scratch", "be", "much", "more", "complete", "NUMBER", "So", "you", "just", "have", "to", "think", "about", "it", "every", "time", "and", "if", "you", "ll", "forgot", "NUMBER", "Well", "NUMBER", "I", "can", "lead", "to", "unexpect", "results", "or", "break", "something", "completely", "NUMBER", "No", "no", "I", "understand", "NUMBER", "But", "lets", "see", "an", "example", "You", "have", "many", "servers", "and", "one", "of", "them", "be", "production", "NUMBER", "Now", "you", "want", "to", "be", "able", "to", "download", "database", "from", "production", "to", "any", "other", "server", "at", "any", "time", "NUMBER", "php", "localServer", "production", "stage", "production", "test", "NUMBER", "test", "NUMBER", "test", "NUMBER", "localServer", "test", "NUMBER", "stage", "test", "NUMBER", "localServer", "test", "NUMBER", "stage", "test", "NUMBER", "localServer", "test", "NUMBER", "stage", "test", "NUMBER", "No", "you", "want", "to", "sync", "database", "at", "test", "NUMBER", "dep", "database", "sync", "test", "NUMBER", "And", "tasks", "be", "php", "task", "database", "dump", "function", "write", "DUMPING", "NUMBER", "onlyOn", "production", "task", "database", "restore", "function", "write", "RESTORING", "NUMBER", "onlyOn", "test", "NUMBER", "test", "NUMBER", "test", "NUMBER", "test", "NUMBER", "task", "database", "migrate", "function", "write", "MIGRATING", "NUMBER", "task", "database", "sync", "database", "dump", "database", "restore", "database", "migrate", "Now", "you", "want", "to", "add", "another", "task", "which", "shouldn", "t", "run", "on", "production", "so", "you", "ll", "set", "onlyOn", "if", "you", "ll", "not", "forgot", "NUMBER", "Then", "you", "ll", "want", "to", "add", "another", "independent", "test", "server", "you", "have", "to", "update", "all", "of", "these", "tasks", "above", "with", "production", "server", "too", "same", "for", "remove", "update", "NUMBER", "NUMBER", "I", "suggest", "something", "like", "this", "php", "task", "database", "dump", "function", "write", "DUMPING", "NUMBER", "runOn", "production", "with", "better", "name", "of", "course", "task", "database", "restore", "function", "write", "RESTORING", "NUMBER", "task", "database", "migrate", "function", "write", "MIGRATING", "NUMBER", "If", "I", "ll", "run", "dep", "database", "sync", "test", "NUMBER", "and", "I", "ll", "not", "have", "any", "stages", "configured", "I", "don", "t", "otherwise", "need", "them", "it", "will", "run", "database", "dump", "automatically", "and", "always", "on", "production", "server", "NUMBER", "Also", "I", "could", "leave", "onlyOn", "configuration", "on", "database", "restore", "task", "because", "I", "can", "watch", "myself", "to", "not", "run", "dep", "database", "restore", "on", "production", "NUMBER", "onlyOn", "be", "just", "some", "kind", "of", "filter", "nothing", "more", "I", "think", "NUMBER", "runOn", "on", "other", "hand", "starts", "task", "always", "on", "given", "server", "NUMBER", "No", "matter", "on", "which", "server", "or", "stage", "you", "actually", "start", "your", "tasks", "NUMBER", "And", "finally", "add", "new", "tasks", "or", "servers", "be", "simple", "again", "wink", "Ok", "I", "ll", "try", "it", "thanks", "anyway", "Sorry", "that", "I", "m", "again", "reacting", "here", "NUMBER", "But", "it", "just", "seems", "impossible", "to", "do", "what", "I", "need", "NUMBER", "In", "previous", "example", "when", "I", "ll", "run", "dep", "database", "migrate", "test", "NUMBER", "it", "will", "run", "on", "both", "test", "NUMBER", "and", "production", "which", "be", "exactly", "what", "I", "don", "t", "want", "NUMBER", "I", "just", "can", "t", "find", "any", "combination", "of", "server", "names", "stages", "and", "onlyOn", "options", "to", "make", "it", "work", "Ehm", "what", "if", "I", "ll", "prepare", "a", "pull", "request", "and", "than", "you", "ll", "see", "You", "know", "I", "m", "trying", "so", "hard", "because", "I", "really", "don", "t", "want", "to", "switch", "to", "some", "other", "tool", "read", "worse", "tool", "NUMBER", "Also", "I", "don", "t", "think", "that", "it", "will", "complicate", "Deployer", "any", "more", "by", "looking", "at", "the", "code", "NUMBER", "davidkudera", "I", "think", "with", "your", "case", "we", "can", "use", "task", "database", "dump", "function", "write", "DUMPING", "NUMBER", "onlyOn", "production", "task", "database", "restore", "function", "if", "production", "input", "hasArgument", "stage", "or", "if", "production", "env", "server", "NUMBER", "name", "return", "write", "RESTORING", "NUMBER", "oanhnn", "sure", "I", "can", "but", "it", "be", "not", "better", "than", "some", "combination", "of", "stages", "servers", "and", "onlyOn", "options", "NUMBER", "Just", "imagine", "how", "the", "code", "will", "look", "like", "if", "more", "tasks", "have", "such", "otherwise", "useless", "code", "NUMBER", "Like", "I", "said", "our", "deployment", "be", "pretty", "complicated", "and", "I", "just", "love", "the", "simplicity", "of", "docker", "compare", "it", "with", "for", "example", "rocketeer", "NUMBER", "Also", "I", "tried", "to", "use", "all", "of", "your", "suggestions", "but", "really", "soon", "just", "in", "minutes", "I", "run", "across", "another", "problem", "NUMBER", "The", "bigist", "be", "that", "any", "developer", "can", "forgot", "to", "put", "such", "code", "in", "tasks", "and", "that", "can", "lead", "to", "really", "large", "problem", "NUMBER", "We", "can", "either", "make", "it", "little", "bit", "more", "dificult", "for", "developers", "with", "similar", "problem", "or", "we", "can", "add", "new", "feature", "NUMBER", "So", "please", "may", "I", "ask", "you", "to", "look", "at", "NUMBER", "I", "create", "this", "feature", "NUMBER", "ok", "elfet", "where", "i", "can", "see", "the", "resources", "of", "template", "NUMBER", "Add", "Initializer", "system", "NUMBER", "NUMBER", "Add", "Template", "system", "for", "easy", "create", "any", "template", "NUMBER", "NUMBER", "Add", "the", "command", "for", "initialize", "deploy", "configuration", "NUMBER", "NUMBER", "Add", "test", "for", "new", "code", "NUMBER", "Now", "add", "only", "common", "and", "composer", "template", "because", "i", "not", "understand", "how", "use", "another", "systems", "NUMBER", "Branch", "init", "command", "elfet", "maybe", "you", "can", "add", "another", "template", "NUMBER", "elfet", "fix", "NUMBER", "de", "NUMBER", "e", "NUMBER", "c", "NUMBER", "f", "NUMBER", "dd", "NUMBER", "b", "NUMBER", "b", "NUMBER", "ad", "NUMBER", "f", "NUMBER", "f", "NUMBER", "elfet", "merge", "to", "master", "ZhukV", "Can", "you", "fix", "code", "style", "follow", "LINK", "to", "pass", "StyleCI", "Using", "set", "composer_copy_vendors", "true", "the", "deploy", "vendors", "task", "will", "check", "for", "exist", "vendors", "directory", "in", "previous", "release", "and", "copy", "to", "new", "release", "before", "run", "composer", "install", "NUMBER", "See", "NUMBER", "and", "NUMBER", "Sure", "thing", "will", "need", "to", "figure", "out", "a", "good", "way", "of", "doing", "that", "NUMBER", "Sorry", "for", "the", "delay", "life", "get", "in", "the", "way", "NUMBER", "Hope", "to", "have", "this", "finished", "soon", "Hello", "Great", "idea", "NUMBER", "But", "in", "my", "opinion", "this", "feature", "should", "be", "more", "generic", "NUMBER", "I", "mean", "one", "should", "be", "able", "to", "configure", "which", "directories", "to", "copy", "between", "release", "NUMBER", "Like", "that", "node_modules", "and", "bower_componentes", "directories", "could", "also", "be", "copied", "to", "gain", "time", "NUMBER", "What", "do", "you", "think", "So", "I", "like", "the", "idea", "of", "this", "setting", "because", "firstly", "it", "existed", "in", "NUMBER", "x", "and", "secondly", "as", "deployer", "specifically", "support", "composer", "it", "seems", "to", "make", "sense", "to", "be", "able", "to", "have", "this", "option", "as", "a", "setting", "NUMBER", "Having", "said", "that", "I", "like", "the", "idea", "of", "an", "array", "of", "directories", "that", "will", "get", "copied", "NUMBER", "I", "think", "we", "can", "have", "the", "best", "of", "both", "worlds", "where", "you", "have", "the", "array", "of", "directories", "and", "the", "setting", "in", "this", "PR", "just", "add", "the", "vendor", "directory", "to", "that", "array", "NUMBER", "elfet", "gquemener", "any", "thoughts", "on", "that", "I", "think", "this", "be", "a", "great", "solution", "AlexStansfield", "Moreover", "I", "would", "add", "another", "ask_before_copy", "option", "that", "displays", "confirmation", "message", "before", "copying", "directories", "default", "to", "true", "NUMBER", "elfet", "just", "wondered", "if", "we", "could", "get", "your", "thoughts", "before", "I", "press", "ahead", "with", "this", "Composer", "it", "selfs", "cache", "vendors", "in", "NUMBER", "composer", "dir", "NUMBER", "So", "this", "be", "pretty", "fats", "evan", "this", "out", "this", "NUMBER", "Is", "there", "a", "good", "way", "to", "create", "a", "config", "file", "from", "some", "of", "the", "settings", "from", "the", "servers", "NUMBER", "yml", "file", "and", "a", "template", "Or", "any", "direction", "if", "anything", "like", "it", "has", "be", "do", "before", "erickr", "You", "can", "use", "configure", "recipe", "LINK", "from", "deployphp", "recipes", "NUMBER", "See", "an", "example", "in", "here", "LINK", "example", "NUMBER", "Good", "luck", "NUMBER", "Great", "cant", "see", "how", "I", "could", "have", "miss", "this", "At", "the", "moment", "I", "find", "two", "issue", "with", "the", "current", "implementation", "of", "setting", "permissions", "on", "writable", "directories", "Can", "t", "set", "a", "particular", "method", "to", "use", "Automatically", "fall", "back", "to", "chmod", "NUMBER", "if", "chmod", "a", "and", "setfacl", "fail", "The", "first", "I", "think", "would", "be", "pretty", "useful", "to", "have", "it", "was", "in", "NUMBER", "x", "and", "the", "second", "could", "lead", "to", "people", "giving", "read", "write", "permissions", "to", "all", "users", "without", "realising", "NUMBER", "I", "propose", "this", "change", "httpUser", "run", "ps", "aux", "grep", "E", "a", "pache", "h", "ttpd", "_", "www", "w", "ww", "data", "n", "ginx", "grep", "v", "root", "head", "NUMBER", "cut", "d", "f", "NUMBER", "toString", "cd", "release_path", "funcPermChmod", "function", "httpUser", "dirs", "sudo", "if", "empty", "httpUser", "run", "sudo", "chmod", "a", "httpUser", "allow", "delete", "write", "append", "file_inherit", "directory_inherit", "dirs", "run", "sudo", "chmod", "a", "whoami", "allow", "delete", "write", "append", "file_inherit", "directory_inherit", "dirs", "funcPermAcl", "function", "httpUser", "dirs", "sudo", "if", "empty", "httpUser", "run", "sudo", "setfacl", "R", "m", "u", "httpUser", "rwX", "m", "u", "whoami", "rwX", "dirs", "run", "sudo", "setfacl", "dR", "m", "u", "httpUser", "rwX", "m", "u", "whoami", "rwX", "dirs", "funcPermChmodBad", "function", "dirs", "sudo", "run", "sudo", "chmod", "NUMBER", "dirs", "Use", "chosen", "permission", "method", "if", "it", "exists", "if", "has", "permission_method", "switch", "get", "permission_method", "case", "chmod", "funcPermChmod", "httpUser", "dirs", "sudo", "break", "case", "chmod_", "NUMBER", "funcPermChmodBad", "dirs", "sudo", "break", "case", "setfacl", "funcPermAcl", "httpUser", "dirs", "sudo", "break", "default", "formatter", "Deployer", "Deployer", "get", "getHelper", "formatter", "errorMessage", "Unable", "to", "setup", "correct", "permissions", "for", "writable", "dirs", "NUMBER", "Chosen", "permission_method", "needs", "to", "be", "chmod", "chmod_", "NUMBER", "or", "setfacl", "write", "formatter", "formatBlock", "errorMessage", "error", "true", "break", "else", "No", "chosen", "permission", "method", "try", "chmod", "then", "acl", "if", "strpos", "run", "chmod", "NUMBER", "NUMBER", "true", "a", "false", "funcPermChmod", "httpUser", "dirs", "sudo", "else", "if", "commandExist", "setfacl", "funcPermAcl", "httpUser", "dirs", "sudo", "else", "formatter", "Deployer", "Deployer", "get", "getHelper", "formatter", "errorMessage", "Unable", "to", "setup", "correct", "permissions", "for", "writable", "dirs", "NUMBER", "Server", "not", "configured", "for", "chmod", "ACL", "or", "setfacl", "NUMBER", "You", "can", "set", "permission_method", "to", "chmod_", "NUMBER", "but", "we", "advise", "only", "as", "a", "last", "resort", "as", "it", "gives", "read", "write", "permissions", "to", "every", "user", "NUMBER", "write", "formatter", "formatBlock", "errorMessage", "error", "true", "It", "would", "only", "do", "chmod", "a", "or", "setfacl", "automatically", "NUMBER", "If", "they", "both", "fail", "it", "will", "give", "an", "error", "telling", "the", "user", "that", "if", "they", "want", "to", "they", "can", "set", "a", "permission_method", "of", "chmod_", "NUMBER", "but", "it", "should", "only", "be", "a", "last", "resort", "NUMBER", "Before", "I", "go", "to", "the", "trouble", "of", "test", "it", "all", "and", "submit", "a", "PR", "I", "just", "wanted", "to", "get", "some", "opinions", "on", "it", "NUMBER", "Also", "I", "couldn", "t", "work", "out", "NUMBER", "What", "s", "the", "preferred", "method", "for", "exiting", "a", "deployment", "and", "cleaning", "up", "Is", "there", "an", "exception", "I", "can", "throw", "I", "couldn", "t", "really", "see", "it", "NUMBER", "Cool", "will", "try", "to", "get", "this", "all", "test", "from", "home", "tonight", "and", "submit", "a", "PR", "NUMBER", "I", "just", "had", "a", "thought", "regard", "the", "error", "NUMBER", "This", "happens", "quite", "far", "into", "the", "deployment", "process", "NUMBER", "Is", "there", "any", "step", "that", "exists", "that", "happens", "early", "on", "that", "can", "do", "some", "sort", "of", "check", "based", "on", "what", "the", "deployment", "script", "asks", "for", "NUMBER", "So", "for", "instance", "as", "soon", "we", "first", "login", "we", "check", "if", "chmod_", "NUMBER", "isn", "t", "set", "and", "if", "chmod", "a", "or", "setfacl", "be", "available", "NUMBER", "Then", "bailout", "with", "the", "error", "message", "straight", "away", "rather", "than", "the", "user", "get", "NUMBER", "of", "the", "way", "through", "deployment", "before", "realising", "it", "s", "an", "issue", "NUMBER", "Wondered", "if", "there", "be", "any", "other", "things", "that", "might", "also", "benefit", "from", "something", "like", "this", "NUMBER", "I", "m", "use", "a", "different", "method", "NUMBER", "I", "prepare", "beforehand", "a", "common", "group", "for", "the", "server", "and", "user", "NUMBER", "bash", "sudo", "groupadd", "ggggg", "sudo", "usermod", "a", "G", "ggggg", "uuuu", "sudo", "usermod", "a", "G", "ggggg", "www", "data", "In", "recipe", "i", "have", "task", "php", "Make", "writable", "dirs", "by", "use", "common_group", "from", "env", "NUMBER", "Create", "directories", "if", "they", "don", "t", "exist", "NUMBER", "task", "deploy", "writable_by_group", "function", "dirs", "join", "get", "writable_dirs", "if", "empty", "dirs", "cd", "release_path", "run", "mkdir", "p", "dirs", "run", "chgrp", "common_group", "dirs", "run", "chmod", "NUMBER", "dirs", "desc", "Make", "writable", "dirs", "by", "use", "common", "group", "It", "be", "useful", "for", "me", "because", "it", "doesn", "t", "require", "system", "wide", "nopasswd", "sudo", "for", "deployer", "user", "NUMBER", "Maybe", "it", "will", "be", "useful", "to", "someone", "else", "NUMBER", "Cool", "But", "also", "you", "can", "use", "setfacl", "as", "in", "common", "NUMBER", "php", "recipe", "NUMBER", "NUMBER", "\u0430\u0432\u0433", "NUMBER", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "agarb", "NUMBER", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "I", "m", "use", "a", "different", "method", "NUMBER", "I", "prepare", "beforehand", "a", "common", "group", "for", "the", "server", "and", "user", "NUMBER", "sudo", "groupadd", "ggggg", "sudo", "usermod", "a", "G", "ggggg", "uuuu", "sudo", "usermod", "a", "G", "ggggg", "www", "data", "In", "recipe", "i", "have", "task", "Make", "writable", "dirs", "by", "use", "common_group", "from", "env", "NUMBER", "Create", "directories", "if", "they", "don", "t", "exist", "NUMBER", "task", "deploy", "writable_by_group", "function", "dirs", "join", "get", "writable_dirs", "if", "empty", "dirs", "cd", "release_path", "run", "mkdir", "p", "dirs", "run", "chgrp", "common_group", "dirs", "run", "chmod", "NUMBER", "dirs", "desc", "Make", "writable", "dirs", "by", "use", "common", "group", "It", "be", "useful", "for", "me", "because", "it", "doesn", "t", "require", "system", "wide", "nopasswd", "sudo", "for", "deployer", "user", "NUMBER", "Maybe", "it", "will", "be", "useful", "to", "someone", "else", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "NUMBER", "I", "notice", "that", "I", "basically", "have", "to", "create", "the", "parent", "path", "up", "to", "the", "deployment", "path", "myself", "before", "deploying", "NUMBER", "Would", "it", "be", "bad", "to", "just", "add", "a", "p", "to", "the", "mkdir", "command", "that", "creates", "the", "deployment", "path", "if", "it", "doesn", "t", "already", "exist", "Actually", "I", "just", "notice", "that", "it", "in", "the", "latest", "master", "it", "doesn", "t", "actually", "create", "the", "deploy", "path", "directory", "either", "NUMBER", "Sure", "thing", "NUMBER", "Have", "already", "made", "the", "code", "change", "as", "I", "m", "deploying", "lots", "of", "things", "today", "to", "new", "environment", "NUMBER", "Will", "branch", "it", "and", "submit", "PR", "NUMBER", "Added", "ability", "to", "set", "a", "default", "stage", "in", "parameters", "see", "NUMBER", "NUMBER", "Enable", "it", "use", "set", "default_stage", "staging", "If", "it", "s", "not", "set", "then", "original", "behaviour", "be", "observed", "NUMBER", "Sure", "thing", "PR", "for", "docs", "submitted", "LINK", "Thank", "you", "smile", "Hi", "whenever", "I", "try", "to", "dep", "deploy", "staging", "production", "both", "servers", "run", "on", "a", "DO", "droplet", "use", "Ubuntu", "NUMBER", "Nginx", "Laravel", "NUMBER", "the", "whole", "process", "seems", "to", "go", "fine", "and", "indeed", "it", "do", "except", "for", "the", "fact", "that", "the", "update", "in", "the", "new", "release", "be", "not", "visible", "in", "the", "browser", "NUMBER", "It", "correctly", "symlinks", "the", "current", "directory", "to", "the", "one", "just", "created", "NUMBER", "xxxxxxxxxx", "but", "I", "can", "not", "anyhow", "manage", "to", "see", "in", "the", "browser", "the", "update", "contained", "in", "NUMBER", "xxxxxxxxxx", "NUMBER", "I", "have", "set", "keep_releases", "NUMBER", "in", "my", "Deploy", "NUMBER", "php", "file", "and", "in", "fact", "if", "I", "deployed", "NUMBER", "more", "times", "deployer", "would", "get", "rid", "of", "older", "directories", "and", "force", "the", "update", "to", "appear", "in", "the", "browser", "since", "then", "all", "NUMBER", "release", "would", "have", "the", "update", "I", "d", "like", "to", "see", "NUMBER", "Does", "anybody", "know", "if", "it", "s", "something", "relate", "to", "deployer", "itself", "or", "to", "anything", "else", "Did", "nobody", "experience", "such", "a", "strange", "behavior", "Following", "be", "my", "complete", "Deploy", "NUMBER", "php", "file", "LINK", "dep", "deploy", "vvv", "production", "Executing", "task", "deploy", "prepare", "on", "production", "Run", "echo", "NUMBER", "bash", "Run", "if", "d", "var", "www", "sharewood", "then", "echo", "fi", "Run", "cd", "var", "www", "sharewood", "if", "d", "release", "then", "mkdir", "release", "fi", "Run", "cd", "var", "www", "sharewood", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "production", "Ok", "Executing", "task", "deploy", "release", "on", "production", "Run", "date", "Y", "m", "d", "H", "M", "S", "NUMBER", "Run", "mkdir", "var", "www", "sharewood", "release", "NUMBER", "Run", "cd", "var", "www", "sharewood", "if", "h", "release", "then", "rm", "release", "fi", "Run", "ln", "s", "var", "www", "sharewood", "release", "NUMBER", "var", "www", "sharewood", "release", "do", "on", "production", "Ok", "Executing", "task", "deploy", "update_code", "on", "production", "Run", "readlink", "var", "www", "sharewood", "release", "var", "www", "sharewood", "release", "NUMBER", "Run", "git", "clone", "b", "master", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "nicolamonaca", "sharewood", "do", "NUMBER", "git", "var", "www", "sharewood", "release", "NUMBER", "NUMBER", "NUMBER", "do", "on", "production", "Ok", "Executing", "task", "deploy", "vendors", "on", "production", "Run", "if", "hash", "composer", "NUMBER", "dev", "null", "then", "echo", "true", "fi", "true", "Run", "cd", "var", "www", "sharewood", "release", "NUMBER", "composer", "install", "no", "dev", "verbose", "prefer", "dist", "optimize", "autoloader", "no", "progress", "no", "interaction", "Loading", "composer", "repositories", "with", "package", "information", "Installing", "dependencies", "from", "lock", "file", "Installing", "symfony", "finder", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "var", "dumper", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "psr", "log", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "maximebf", "debugbar", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "vlucas", "phpdotenv", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "translation", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "security", "core", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "routing", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "process", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "http", "foundation", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "event", "dispatcher", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "debug", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "http", "kernel", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "console", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "swiftmailer", "swiftmailer", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "nikic", "php", "parser", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "jakub", "onderka", "php", "console", "color", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "jakub", "onderka", "php", "console", "highlighter", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "dnoegel", "php", "xdg", "base", "dir", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "psy", "psysh", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "nesbot", "carbon", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "mtdowling", "cron", "expression", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "monolog", "monolog", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "league", "flysystem", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "jeremeamia", "superclosure", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "ircmaxell", "password", "compat", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "doctrine", "inflector", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "danielstjules", "stringy", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "symfony", "filesystem", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "classpreloader", "classpreloader", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "laravel", "framework", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "barryvdh", "laravel", "debugbar", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "cartalyst", "collections", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "react", "promise", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "guzzlehttp", "streams", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "guzzlehttp", "ringphp", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "guzzlehttp", "guzzle", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "cartalyst", "stripe", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "cartalyst", "stripe", "laravel", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "cmgmyr", "messenger", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "mrclay", "minify", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "graham", "campbell", "htmlmin", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "illuminate", "html", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "psr", "http", "message", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "guzzlehttp", "psr", "NUMBER", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "intervention", "image", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "jenssegers", "date", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "laracasts", "utilities", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "stripe", "stripe", "php", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "laravel", "cashier", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "guzzle", "guzzle", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "league", "oauth", "NUMBER", "client", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "laravel", "socialite", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "mcamara", "laravel", "localization", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "league", "glide", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "spatie", "laravel", "glide", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Generating", "optimized", "autoload", "file", "Warning", "Ambiguous", "class", "resolution", "App", "Http", "Controllers", "Admin", "FeedbackOwnerController", "was", "find", "in", "both", "var", "www", "sharewood", "release", "NUMBER", "app", "Http", "Controllers", "Admin", "FeedbackUserController", "NUMBER", "php", "and", "var", "www", "sharewood", "release", "NUMBER", "app", "Http", "Controllers", "Admin", "FeedbackOwnerController", "NUMBER", "php", "the", "first", "will", "be", "use", "NUMBER", "Generating", "optimized", "class", "loader", "Compiling", "common", "classes", "do", "on", "production", "Ok", "Executing", "task", "deploy", "shared", "on", "production", "Run", "if", "d", "echo", "var", "www", "sharewood", "release", "NUMBER", "storage", "then", "rm", "rf", "var", "www", "sharewood", "release", "NUMBER", "storage", "fi", "Run", "mkdir", "p", "var", "www", "sharewood", "shared", "storage", "Run", "mkdir", "p", "dirname", "var", "www", "sharewood", "release", "NUMBER", "storage", "Run", "ln", "nfs", "var", "www", "sharewood", "shared", "storage", "var", "www", "sharewood", "release", "NUMBER", "storage", "do", "on", "production", "Ok", "Executing", "task", "deploy", "symlink", "on", "production", "Run", "cd", "var", "www", "sharewood", "ln", "sfn", "var", "www", "sharewood", "release", "NUMBER", "current", "Run", "cd", "var", "www", "sharewood", "rm", "release", "do", "on", "production", "Ok", "Executing", "task", "environment", "on", "production", "Run", "cp", "var", "www", "sharewood", "shared", "NUMBER", "env", "var", "www", "sharewood", "release", "NUMBER", "NUMBER", "env", "do", "on", "production", "Ok", "Executing", "task", "current", "chown", "on", "production", "Run", "chown", "monaghan", "www", "data", "var", "www", "sharewood", "current", "do", "on", "production", "Ok", "Executing", "task", "composer", "on", "production", "Run", "cd", "var", "www", "sharewood", "current", "composer", "install", "Loading", "composer", "repositories", "with", "package", "information", "Installing", "dependencies", "including", "require", "dev", "from", "lock", "file", "Installing", "symfony", "yaml", "v", "NUMBER", "Loading", "from", "cache", "Installing", "symfony", "dom", "crawler", "v", "NUMBER", "Loading", "from", "cache", "Installing", "symfony", "css", "selector", "v", "NUMBER", "Loading", "from", "cache", "Installing", "symfony", "browser", "kit", "v", "NUMBER", "Loading", "from", "cache", "Installing", "sebastian", "version", "NUMBER", "Loading", "from", "cache", "Installing", "sebastian", "global", "state", "NUMBER", "Loading", "from", "cache", "Installing", "sebastian", "recursion", "context", "NUMBER", "Loading", "from", "cache", "Installing", "sebastian", "exporter", "NUMBER", "Loading", "from", "cache", "Installing", "sebastian", "environment", "NUMBER", "Loading", "from", "cache", "Installing", "sebastian", "diff", "NUMBER", "Loading", "from", "cache", "Installing", "sebastian", "comparator", "NUMBER", "Loading", "from", "cache", "Installing", "phpunit", "php", "text", "template", "NUMBER", "Loading", "from", "cache", "Installing", "doctrine", "instantiator", "NUMBER", "Loading", "from", "cache", "Installing", "phpunit", "phpunit", "mock", "objects", "NUMBER", "Loading", "from", "cache", "Installing", "phpunit", "php", "timer", "NUMBER", "Loading", "from", "cache", "Installing", "phpunit", "php", "file", "iterator", "NUMBER", "Loading", "from", "cache", "Installing", "phpunit", "php", "token", "stream", "NUMBER", "Loading", "from", "cache", "Installing", "phpunit", "php", "code", "coverage", "NUMBER", "Loading", "from", "cache", "Installing", "phpdocumentor", "reflection", "docblock", "NUMBER", "Loading", "from", "cache", "Installing", "phpspec", "prophecy", "v", "NUMBER", "Loading", "from", "cache", "Installing", "phpunit", "phpunit", "NUMBER", "Loading", "from", "cache", "Installing", "facebook", "webdriver", "NUMBER", "Loading", "from", "cache", "Installing", "codeception", "codeception", "NUMBER", "Loading", "from", "cache", "Installing", "phpspec", "php", "diff", "v", "NUMBER", "Loading", "from", "cache", "Installing", "phpspec", "phpspec", "NUMBER", "Loading", "from", "cache", "sebastian", "global", "state", "suggests", "installing", "ext", "uopz", "_", "phpunit", "php", "code", "coverage", "suggests", "installing", "ext", "xdebug", "NUMBER", "phpdocumentor", "reflection", "docblock", "suggests", "installing", "dflydev", "markdown", "NUMBER", "phpdocumentor", "reflection", "docblock", "suggests", "installing", "erusev", "parsedown", "NUMBER", "phpunit", "phpunit", "suggests", "installing", "phpunit", "php", "invoker", "NUMBER", "facebook", "webdriver", "suggests", "installing", "phpdocumentor", "phpdocumentor", "NUMBER", "_", "codeception", "codeception", "suggests", "installing", "codeception", "phpbuiltinserver", "Extension", "to", "start", "and", "stop", "PHP", "build", "in", "web", "server", "for", "your", "test", "codeception", "codeception", "suggests", "installing", "codeception", "specify", "BDD", "style", "code", "blocks", "codeception", "codeception", "suggests", "installing", "codeception", "verify", "BDD", "style", "assertions", "codeception", "codeception", "suggests", "installing", "phpseclib", "phpseclib", "Extension", "required", "to", "use", "the", "SFTP", "option", "in", "the", "FTP", "Module", "NUMBER", "phpspec", "phpspec", "suggests", "installing", "phpspec", "nyan", "formatters", "NUMBER", "Adds", "Nyan", "formatters", "Generating", "autoload", "file", "Generating", "optimized", "class", "loader", "Compiling", "common", "classes", "do", "on", "production", "Ok", "Executing", "task", "clean", "views", "on", "production", "Run", "cd", "var", "www", "sharewood", "shared", "storage", "framework", "views", "rm", "f", "do", "on", "production", "Ok", "Executing", "task", "cleanup", "on", "production", "Run", "ls", "var", "www", "sharewood", "release", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Run", "rm", "rf", "var", "www", "sharewood", "release", "NUMBER", "Run", "cd", "var", "www", "sharewood", "if", "e", "release", "then", "rm", "release", "fi", "Run", "cd", "var", "www", "sharewood", "if", "h", "release", "then", "rm", "release", "fi", "do", "on", "production", "Ok", "Executing", "task", "optimize", "on", "production", "Run", "cd", "var", "www", "sharewood", "current", "php", "artisan", "optimize", "Generating", "optimized", "class", "loader", "Compiling", "common", "classes", "do", "on", "production", "Ok", "Executing", "task", "success", "Successfully", "deployed", "Ok", "I", "just", "deployed", "into", "production", "but", "still", "keep", "seeing", "the", "old", "version", "of", "the", "site", "NUMBER", "Had", "to", "deploy", "three", "times", "to", "see", "the", "update", "code", "NUMBER", "It", "seems", "good", "NUMBER", "What", "about", "your", "config", "of", "web", "server", "Document", "root", "be", "right", "By", "the", "way", "you", "get", "one", "warning", "Warning", "Ambiguous", "class", "resolution", "App", "Http", "Controllers", "Admin", "FeedbackOwnerController", "was", "find", "in", "both", "var", "www", "sharewood", "release", "NUMBER", "app", "Http", "Controllers", "Admin", "FeedbackUserController", "NUMBER", "php", "and", "var", "www", "sharewood", "release", "NUMBER", "app", "Http", "Controllers", "Admin", "FeedbackOwnerController", "NUMBER", "php", "the", "first", "will", "be", "use", "NUMBER", "My", "drupal", "NUMBER", "recipe", "I", "add", "drupal", "upload_files", "for", "upload", "local", "site", "user", "file", "to", "server", "and", "drupal", "settings", "to", "create", "and", "upload", "drupal", "s", "settings", "NUMBER", "php", "file", "use", "variables", "from", "secrets", "NUMBER", "yml", "file", "I", "use", "the", "external", "library", "spyc", "LINK", "to", "parse", "yaml", "file", "I", "have", "some", "question", "NUMBER", "Why", "not", "you", "use", "symfony", "yml", "component", "to", "parse", "yaml", "file", "This", "package", "be", "really", "required", "NUMBER", "NUMBER", "Why", "not", "you", "create", "file", "serverlist", "NUMBER", "yml", "it", "include", "info", "of", "servers", "and", "setting", "variables", "and", "use", "recipe", "LINK", "to", "generate", "settings", "NUMBER", "php", "file", "NUMBER", "it", "s", "symfony", "yaml", "it", "s", "already", "present", "within", "any", "version", "of", "deployer", "NUMBER", "putting", "secrets", "yml", "within", "recipes", "drupal", "NUMBER", "dir", "be", "very", "bad", "no", "good", "thing", "to", "do", "NUMBER", "oanhnn", "can", "You", "add", "some", "examples", "to", "conifigure", "NUMBER", "php", "recipe", "I", "feel", "like", "the", "docs", "for", "it", "be", "lacking", "some", "information", "NUMBER", "Maybe", "with", "examples", "it", "would", "be", "easier", "to", "guess", "the", "good", "way", "of", "use", "it", "Thanks", "oanhnn", "I", "dont", "know", "how", "get", "custom", "variables", "from", "serverlist", "NUMBER", "yml", "NUMBER", "I", "ll", "try", "johnny", "bit", "Thank", "for", "you", "comments", "NUMBER", "i", "put", "secrets", "NUMBER", "yml", "in", "this", "folter", "for", "referece", "The", "idea", "be", "every", "project", "has", "his", "own", "secrets", "NUMBER", "yml", "obviosly", "in", "NUMBER", "gitignore", "I", "ll", "try", "to", "use", "symfony", "yaml", "ok", "i", "ll", "do", "it", "this", "afternoon", "in", "spain", "sergiocarracedo", "johnny", "bit", "I", "was", "add", "an", "example", "about", "use", "configure", "recipe", "to", "docs", "NUMBER", "Please", "see", "it", "in", "here", "LINK", "I", "remove", "drupal", "NUMBER", "folder", "and", "use", "Symfony", "Yaml", "parser", "NUMBER", "I", "will", "try", "to", "use", "serverlist", "NUMBER", "yml", "for", "secrets", "to", "generate", "settings", "NUMBER", "php", "Move", "secrets", "values", "to", "servers", "NUMBER", "yml", "estructure", "prod", "settings", "database", "name", "host", "localhost", "user", "pass", "port", "driver", "mysql", "prefix", "You", "need", "a", "file", "call", "settings", "NUMBER", "php", "with", "variable", "where", "the", "settings", "values", "be", "replaced", "databases", "array", "default", "array", "default", "array", "database", "database", "NUMBER", "name", "username", "database", "NUMBER", "user", "password", "database", "NUMBER", "pass", "host", "database", "NUMBER", "host", "port", "database", "NUMBER", "port", "driver", "database", "NUMBER", "driver", "prefix", "database", "NUMBER", "prefix", "Sorry", "for", "delay", "NUMBER", "I", "was", "in", "summer", "holidays", "NUMBER", "I", "will", "change", "drupal", "configure", "to", "drupal", "settings", "this", "week", "I", "change", "drupal", "settings", "to", "drupal", "configure", "and", "add", "a", "new", "servers", "NUMBER", "yml", "param", "drupal_site", "default", "for", "example", "prod", "host", "hostname", "stage", "production", "forward_agent", "true", "user", "hostuser", "deploy_path", "path", "drupal_site", "default", "settings", "database", "name", "db_name", "host", "localhost", "user", "db_user", "pass", "db_pass", "port", "driver", "mysql", "prefix", "Drupal", "allow", "users", "to", "build", "multiple", "sites", "with", "one", "drupal", "core", "NUMBER", "By", "default", "drupal_site", "be", "default", "but", "a", "lot", "of", "developers", "change", "that", "name", "and", "dir", "This", "be", "the", "settings", "NUMBER", "php", "template", "you", "need", "to", "create", "and", "upload", "settings", "NUMBER", "php", "to", "server", "NUMBER", "TAG", "mysql", "database", "databasename", "username", "username", "password", "password", "host", "localhost", "port", "NUMBER", "prefix", "myprefix_", "collation", "utf", "NUMBER", "_general_ci", "endcode", "The", "driver", "property", "indicates", "what", "Drupal", "database", "driver", "the", "connection", "should", "use", "NUMBER", "This", "be", "usually", "the", "same", "as", "the", "name", "of", "the", "database", "type", "such", "as", "mysql", "or", "sqlite", "but", "not", "always", "NUMBER", "The", "other", "properties", "will", "vary", "depending", "on", "the", "driver", "NUMBER", "For", "SQLite", "you", "must", "specify", "a", "database", "file", "name", "in", "a", "directory", "that", "be", "writable", "by", "the", "webserver", "NUMBER", "For", "most", "other", "drivers", "you", "must", "specify", "a", "username", "password", "host", "and", "database", "name", "NUMBER", "Transaction", "support", "be", "enable", "by", "default", "for", "all", "drivers", "that", "support", "it", "including", "MySQL", "NUMBER", "To", "explicitly", "disable", "it", "set", "the", "transactions", "key", "to", "FALSE", "NUMBER", "Note", "that", "some", "configurations", "of", "MySQL", "such", "as", "the", "MyISAM", "engine", "don", "t", "support", "it", "and", "will", "proceed", "silently", "even", "if", "enable", "NUMBER", "If", "you", "experience", "transaction", "relate", "crashes", "with", "such", "configuration", "set", "the", "transactions", "key", "to", "FALSE", "NUMBER", "For", "each", "database", "you", "may", "optionally", "specify", "multiple", "target", "databases", "NUMBER", "A", "target", "database", "allows", "Drupal", "to", "try", "to", "send", "certain", "queries", "to", "a", "different", "database", "if", "it", "can", "but", "fall", "back", "to", "the", "default", "connection", "if", "not", "NUMBER", "That", "be", "useful", "for", "master", "slave", "replication", "as", "Drupal", "may", "try", "to", "connect", "to", "a", "slave", "server", "when", "appropriate", "and", "if", "one", "be", "not", "available", "will", "simply", "fall", "back", "to", "the", "single", "master", "server", "NUMBER", "The", "general", "format", "for", "the", "databases", "array", "be", "as", "follows", "code", "databases", "default", "default", "info_array", "databases", "default", "slave", "info_array", "databases", "default", "slave", "info_array", "databases", "extra", "default", "info_array", "endcode", "In", "the", "above", "example", "info_array", "be", "an", "array", "of", "settings", "describe", "above", "NUMBER", "The", "first", "line", "sets", "a", "default", "database", "that", "has", "one", "master", "database", "the", "second", "level", "default", "NUMBER", "The", "second", "and", "third", "lines", "create", "an", "array", "of", "potential", "slave", "databases", "NUMBER", "Drupal", "will", "select", "one", "at", "random", "for", "a", "given", "request", "as", "needed", "NUMBER", "The", "fourth", "line", "creates", "a", "new", "database", "with", "a", "name", "of", "extra", "NUMBER", "For", "a", "single", "database", "configuration", "the", "following", "be", "sufficient", "code", "databases", "default", "default", "array", "driver", "mysql", "database", "databasename", "username", "username", "password", "password", "host", "localhost", "prefix", "main_", "collation", "utf", "NUMBER", "_general_ci", "endcode", "You", "can", "optionally", "set", "prefixes", "for", "some", "or", "all", "database", "table", "names", "by", "use", "the", "prefix", "setting", "NUMBER", "If", "a", "prefix", "be", "specified", "the", "table", "name", "will", "be", "prepended", "with", "its", "value", "NUMBER", "Be", "sure", "to", "use", "valid", "database", "characters", "only", "usually", "alphanumeric", "and", "underscore", "NUMBER", "If", "no", "prefixes", "be", "desired", "leave", "it", "as", "an", "empty", "string", "NUMBER", "To", "have", "all", "database", "names", "prefixed", "set", "prefix", "as", "a", "string", "code", "prefix", "main_", "endcode", "To", "provide", "prefixes", "for", "specific", "tables", "set", "prefix", "as", "an", "array", "NUMBER", "The", "array", "s", "keys", "be", "the", "table", "names", "and", "the", "values", "be", "the", "prefixes", "NUMBER", "The", "default", "element", "be", "mandatory", "and", "holds", "the", "prefix", "for", "any", "tables", "not", "specified", "elsewhere", "in", "the", "array", "NUMBER", "Example", "code", "prefix", "array", "default", "main_", "users", "shared_", "sessions", "shared_", "role", "shared_", "authmap", "shared_", "endcode", "You", "can", "also", "use", "a", "reference", "to", "a", "schema", "database", "as", "a", "prefix", "NUMBER", "This", "may", "be", "useful", "if", "your", "Drupal", "installation", "exists", "in", "a", "schema", "that", "be", "not", "the", "default", "or", "you", "want", "to", "access", "several", "databases", "from", "the", "same", "code", "base", "at", "the", "same", "time", "NUMBER", "Example", "code", "prefix", "array", "default", "main", "NUMBER", "users", "shared", "NUMBER", "sessions", "shared", "NUMBER", "role", "shared", "NUMBER", "authmap", "shared", "NUMBER", "endcode", "NOTE", "MySQL", "and", "SQLite", "s", "definition", "of", "a", "schema", "be", "a", "database", "NUMBER", "Advanced", "users", "can", "add", "or", "override", "initial", "commands", "to", "execute", "when", "connecting", "to", "the", "database", "server", "as", "well", "as", "PDO", "connection", "settings", "NUMBER", "For", "example", "to", "enable", "MySQL", "SELECT", "queries", "to", "exceed", "the", "max_join_size", "system", "variable", "and", "to", "reduce", "the", "database", "connection", "timeout", "to", "NUMBER", "seconds", "code", "databases", "default", "default", "array", "init_commands", "array", "big_selects", "SET", "SQL_BIG_SELECTS", "NUMBER", "pdo", "array", "PDO", "ATTR_TIMEOUT", "NUMBER", "endcode", "WARNING", "These", "defaults", "be", "designed", "for", "database", "portability", "NUMBER", "Changing", "them", "may", "cause", "unexpect", "behavior", "including", "potential", "data", "loss", "NUMBER", "see", "DatabaseConnection_mysql", "__construct", "see", "DatabaseConnection_pgsql", "__construct", "see", "DatabaseConnection_sqlite", "__construct", "Database", "configuration", "format", "code", "databases", "default", "default", "array", "driver", "mysql", "database", "databasename", "username", "username", "password", "password", "host", "localhost", "prefix", "databases", "default", "default", "array", "driver", "pgsql", "database", "databasename", "username", "username", "password", "password", "host", "localhost", "prefix", "databases", "default", "default", "array", "driver", "sqlite", "database", "path", "to", "databasefilename", "endcode", "databases", "array", "default", "array", "default", "array", "database", "database", "NUMBER", "name", "username", "database", "NUMBER", "user", "password", "database", "NUMBER", "pass", "host", "database", "NUMBER", "host", "port", "database", "NUMBER", "port", "driver", "database", "NUMBER", "driver", "prefix", "database", "NUMBER", "prefix", "Access", "control", "for", "update", "NUMBER", "php", "script", "NUMBER", "If", "you", "be", "update", "your", "Drupal", "installation", "use", "the", "update", "NUMBER", "php", "script", "but", "be", "not", "logged", "in", "use", "either", "an", "account", "with", "the", "Administer", "software", "update", "permission", "or", "the", "site", "maintenance", "account", "the", "account", "that", "was", "created", "during", "installation", "you", "will", "need", "to", "modify", "the", "access", "check", "statement", "below", "NUMBER", "Change", "the", "FALSE", "to", "a", "TRUE", "to", "disable", "the", "access", "check", "NUMBER", "After", "finishing", "the", "upgrade", "be", "sure", "to", "open", "this", "file", "again", "and", "change", "the", "TRUE", "back", "to", "a", "FALSE", "update_free_access", "FALSE", "Salt", "for", "one", "time", "login", "links", "and", "cancel", "links", "form", "tokens", "etc", "NUMBER", "This", "variable", "will", "be", "set", "to", "a", "random", "value", "by", "the", "installer", "NUMBER", "All", "one", "time", "login", "links", "will", "be", "invalidated", "if", "the", "value", "be", "change", "NUMBER", "Note", "that", "if", "your", "site", "be", "deployed", "on", "a", "cluster", "of", "web", "servers", "you", "must", "ensure", "that", "this", "variable", "has", "the", "same", "value", "on", "each", "server", "NUMBER", "If", "this", "variable", "be", "empty", "a", "hash", "of", "the", "serialized", "database", "credentials", "will", "be", "use", "as", "a", "fallback", "salt", "NUMBER", "For", "enhanced", "security", "you", "may", "set", "this", "variable", "to", "a", "value", "use", "the", "contents", "of", "a", "file", "outside", "your", "docroot", "that", "be", "never", "saved", "together", "with", "any", "backups", "of", "your", "Drupal", "file", "and", "database", "NUMBER", "Example", "drupal_hash_salt", "file_get_contents", "home", "example", "salt", "NUMBER", "txt", "drupal_hash_salt", "_PjU", "NUMBER", "G", "NUMBER", "bDzj", "NUMBER", "GH", "NUMBER", "U", "NUMBER", "IIW", "NUMBER", "LisDBF", "NUMBER", "qekBzl", "NUMBER", "cQEc", "NUMBER", "Base", "URL", "optional", "NUMBER", "If", "Drupal", "be", "generating", "incorrect", "URLs", "on", "your", "site", "which", "could", "be", "in", "HTML", "headers", "links", "to", "CSS", "and", "JS", "file", "or", "visible", "links", "on", "pages", "such", "as", "in", "menus", "uncomment", "the", "Base", "URL", "statement", "below", "remove", "the", "leading", "hash", "sign", "and", "fill", "in", "the", "absolute", "URL", "to", "your", "Drupal", "installation", "NUMBER", "You", "might", "also", "want", "to", "force", "users", "to", "use", "a", "given", "domain", "NUMBER", "See", "the", "NUMBER", "htaccess", "file", "for", "more", "information", "NUMBER", "Examples", "base_url", "LINK", "base_url", "LINK", "base_url", "LINK", "base_url", "LINK", "It", "be", "not", "allow", "to", "have", "a", "trail", "slash", "Drupal", "will", "add", "it", "for", "you", "NUMBER", "base_url", "LINK", "NO", "trail", "slash", "PHP", "settings", "To", "see", "what", "PHP", "settings", "be", "possible", "including", "whether", "they", "can", "be", "set", "at", "runtime", "by", "use", "ini_set", "read", "the", "PHP", "documentation", "LINK", "See", "drupal_environment_initialize", "in", "include", "bootstrap", "NUMBER", "inc", "for", "required", "runtime", "settings", "and", "the", "NUMBER", "htaccess", "file", "for", "non", "runtime", "settings", "NUMBER", "Settings", "defined", "there", "should", "not", "be", "duplicate", "here", "so", "as", "to", "avoid", "conflict", "issue", "NUMBER", "Some", "distributions", "of", "Linux", "most", "notably", "Debian", "ship", "their", "PHP", "installations", "with", "garbage", "collection", "gc", "disabled", "NUMBER", "Since", "Drupal", "depends", "on", "PHP", "s", "garbage", "collection", "for", "clearing", "sessions", "ensure", "that", "garbage", "collection", "occur", "by", "use", "the", "most", "common", "settings", "NUMBER", "ini_set", "session", "NUMBER", "gc_probability", "NUMBER", "ini_set", "session", "NUMBER", "gc_divisor", "NUMBER", "Set", "session", "lifetime", "in", "seconds", "i", "NUMBER", "e", "NUMBER", "the", "time", "from", "the", "user", "s", "last", "visit", "to", "the", "active", "session", "may", "be", "delete", "by", "the", "session", "garbage", "collector", "NUMBER", "When", "a", "session", "be", "delete", "authenticated", "users", "be", "logged", "out", "and", "the", "contents", "of", "the", "user", "s", "_SESSION", "variable", "be", "discarded", "NUMBER", "ini_set", "session", "NUMBER", "gc_maxlifetime", "NUMBER", "Set", "session", "cookie", "lifetime", "in", "seconds", "i", "NUMBER", "e", "NUMBER", "the", "time", "from", "the", "session", "be", "created", "to", "the", "cookie", "expires", "i", "NUMBER", "e", "NUMBER", "when", "the", "browser", "be", "expected", "to", "discard", "the", "cookie", "NUMBER", "The", "value", "NUMBER", "means", "until", "the", "browser", "be", "close", "NUMBER", "ini_set", "session", "NUMBER", "cookie_lifetime", "NUMBER", "If", "you", "encounter", "a", "situation", "where", "users", "post", "a", "large", "amount", "of", "text", "and", "the", "result", "be", "stripped", "out", "upon", "viewing", "but", "can", "still", "be", "edit", "Drupal", "s", "output", "filter", "may", "not", "have", "sufficient", "memory", "to", "process", "it", "NUMBER", "If", "you", "experience", "this", "issue", "you", "may", "wish", "to", "uncomment", "the", "following", "two", "lines", "and", "increase", "the", "limits", "of", "these", "variables", "NUMBER", "For", "more", "information", "see", "LINK", "ini_set", "pcre", "NUMBER", "backtrack_limit", "NUMBER", "ini_set", "pcre", "NUMBER", "recursion_limit", "NUMBER", "Drupal", "automatically", "generates", "a", "unique", "session", "cookie", "name", "for", "each", "site", "based", "on", "its", "full", "domain", "name", "NUMBER", "If", "you", "have", "multiple", "domains", "point", "at", "the", "same", "Drupal", "site", "you", "can", "either", "redirect", "them", "all", "to", "a", "single", "domain", "see", "comment", "in", "NUMBER", "htaccess", "or", "uncomment", "the", "line", "below", "and", "specify", "their", "shared", "base", "domain", "NUMBER", "Doing", "so", "assures", "that", "users", "remain", "logged", "in", "as", "they", "cross", "between", "your", "various", "domains", "NUMBER", "Make", "sure", "to", "always", "start", "the", "cookie_domain", "with", "a", "leading", "dot", "as", "per", "RFC", "NUMBER", "cookie_domain", "NUMBER", "example", "NUMBER", "com", "Variable", "overrides", "To", "override", "specific", "entries", "in", "the", "variable", "table", "for", "this", "site", "set", "them", "here", "NUMBER", "You", "usually", "don", "t", "need", "to", "use", "this", "feature", "NUMBER", "This", "be", "useful", "in", "a", "configuration", "file", "for", "a", "vhost", "or", "directory", "rather", "than", "the", "default", "settings", "NUMBER", "php", "NUMBER", "Any", "configuration", "setting", "from", "the", "variable", "table", "can", "be", "given", "a", "new", "value", "NUMBER", "Note", "that", "any", "values", "you", "provide", "in", "these", "variable", "overrides", "will", "not", "be", "modifiable", "from", "the", "Drupal", "administration", "interface", "NUMBER", "The", "following", "overrides", "be", "examples", "site_name", "Defines", "the", "site", "s", "name", "NUMBER", "theme_default", "Defines", "the", "default", "theme", "for", "this", "site", "NUMBER", "anonymous", "Defines", "the", "human", "readable", "name", "of", "anonymous", "users", "NUMBER", "Remove", "the", "leading", "hash", "signs", "to", "enable", "NUMBER", "conf", "site_name", "My", "Drupal", "site", "conf", "theme_default", "garland", "conf", "anonymous", "Visitor", "A", "custom", "theme", "can", "be", "set", "for", "the", "offline", "page", "NUMBER", "This", "applies", "when", "the", "site", "be", "explicitly", "set", "to", "maintenance", "mode", "through", "the", "administration", "page", "or", "when", "the", "database", "be", "inactive", "due", "to", "an", "error", "NUMBER", "It", "can", "be", "set", "through", "the", "maintenance_theme", "key", "NUMBER", "The", "template", "file", "should", "also", "be", "copied", "into", "the", "theme", "NUMBER", "It", "be", "located", "inside", "modules", "system", "maintenance", "page", "NUMBER", "tpl", "NUMBER", "php", "NUMBER", "Note", "This", "setting", "do", "not", "apply", "to", "installation", "and", "update", "pages", "NUMBER", "conf", "maintenance_theme", "bartik", "Reverse", "Proxy", "Configuration", "Reverse", "proxy", "servers", "be", "often", "use", "to", "enhance", "the", "performance", "of", "heavily", "visited", "sites", "and", "may", "also", "provide", "other", "site", "caching", "security", "or", "encryption", "benefits", "NUMBER", "In", "an", "environment", "where", "Drupal", "be", "behind", "a", "reverse", "proxy", "the", "real", "IP", "address", "of", "the", "client", "should", "be", "determined", "such", "that", "the", "correct", "client", "IP", "address", "be", "available", "to", "Drupal", "s", "logging", "statistics", "and", "access", "management", "systems", "NUMBER", "In", "the", "most", "simple", "scenario", "the", "proxy", "server", "will", "add", "an", "X", "Forwarded", "For", "header", "to", "the", "request", "that", "contains", "the", "client", "IP", "address", "NUMBER", "However", "HTTP", "headers", "be", "vulnerable", "to", "spoofing", "where", "a", "malicious", "client", "could", "bypass", "restrictions", "by", "setting", "the", "X", "Forwarded", "For", "header", "directly", "NUMBER", "Therefore", "Drupal", "s", "proxy", "configuration", "requires", "the", "IP", "address", "of", "all", "remote", "proxies", "to", "be", "specified", "in", "conf", "reverse_proxy_addresses", "to", "work", "correctly", "NUMBER", "Enable", "this", "setting", "to", "get", "Drupal", "to", "determine", "the", "client", "IP", "from", "the", "X", "Forwarded", "For", "header", "or", "conf", "reverse_proxy_header", "if", "set", "NUMBER", "If", "you", "be", "unsure", "about", "this", "setting", "do", "not", "have", "a", "reverse", "proxy", "or", "Drupal", "operates", "in", "a", "shared", "hosting", "environment", "this", "setting", "should", "remain", "commented", "out", "NUMBER", "In", "order", "for", "this", "setting", "to", "be", "use", "you", "must", "specify", "every", "possible", "reverse", "proxy", "IP", "address", "in", "conf", "reverse_proxy_addresses", "NUMBER", "If", "a", "complete", "list", "of", "reverse", "proxies", "be", "not", "available", "in", "your", "environment", "for", "example", "if", "you", "use", "a", "CDN", "you", "may", "set", "the", "_SERVER", "REMOTE_ADDR", "variable", "directly", "in", "settings", "NUMBER", "php", "NUMBER", "Be", "aware", "however", "that", "it", "be", "likely", "that", "this", "would", "allow", "IP", "address", "spoofing", "unless", "more", "advance", "precautions", "be", "taken", "NUMBER", "conf", "reverse_proxy", "TRUE", "Specify", "every", "reverse", "proxy", "IP", "address", "in", "your", "environment", "NUMBER", "This", "setting", "be", "required", "if", "conf", "reverse_proxy", "be", "TRUE", "NUMBER", "conf", "reverse_proxy_addresses", "array", "a", "NUMBER", "b", "NUMBER", "c", "NUMBER", "d", "NUMBER", "Set", "this", "value", "if", "your", "proxy", "server", "sends", "the", "client", "IP", "in", "a", "header", "other", "than", "X", "Forwarded", "For", "NUMBER", "conf", "reverse_proxy_header", "HTTP_X_CLUSTER_CLIENT_IP", "Page", "caching", "By", "default", "Drupal", "sends", "a", "Vary", "Cookie", "HTTP", "header", "for", "anonymous", "page", "views", "NUMBER", "This", "tells", "a", "HTTP", "proxy", "that", "it", "may", "return", "a", "page", "from", "its", "local", "cache", "without", "contacting", "the", "web", "server", "if", "the", "user", "sends", "the", "same", "Cookie", "header", "as", "the", "user", "who", "originally", "request", "the", "cached", "page", "NUMBER", "Without", "Vary", "Cookie", "authenticated", "users", "would", "also", "be", "served", "the", "anonymous", "page", "from", "the", "cache", "NUMBER", "If", "the", "site", "has", "mostly", "anonymous", "users", "except", "a", "few", "know", "editors", "administrators", "the", "Vary", "header", "can", "be", "omitted", "NUMBER", "This", "allows", "for", "better", "caching", "in", "HTTP", "proxies", "including", "reverse", "proxies", "i", "NUMBER", "e", "NUMBER", "even", "if", "clients", "send", "different", "cookies", "they", "still", "get", "content", "served", "from", "the", "cache", "NUMBER", "However", "authenticated", "users", "should", "access", "the", "site", "directly", "i", "NUMBER", "e", "NUMBER", "not", "use", "an", "HTTP", "proxy", "and", "bypass", "the", "reverse", "proxy", "if", "one", "be", "use", "in", "order", "to", "avoid", "get", "cached", "pages", "from", "the", "proxy", "NUMBER", "conf", "omit_vary_cookie", "TRUE", "CSS", "JS", "aggregated", "file", "gzip", "compression", "By", "default", "when", "CSS", "or", "JS", "aggregation", "and", "clean", "URLs", "be", "enable", "Drupal", "will", "store", "a", "gzip", "compressed", "NUMBER", "gz", "copy", "of", "the", "aggregated", "file", "NUMBER", "If", "this", "file", "be", "available", "then", "rewrite", "rules", "in", "the", "default", "NUMBER", "htaccess", "file", "will", "serve", "these", "file", "to", "browsers", "that", "accept", "gzip", "encoded", "content", "NUMBER", "This", "allows", "pages", "to", "load", "faster", "for", "these", "users", "and", "has", "minimal", "impact", "on", "server", "load", "NUMBER", "If", "you", "be", "use", "a", "webserver", "other", "than", "Apache", "httpd", "or", "a", "caching", "reverse", "proxy", "that", "be", "configured", "to", "cache", "and", "compress", "these", "file", "itself", "you", "may", "want", "to", "uncomment", "one", "or", "both", "of", "the", "below", "lines", "which", "will", "prevent", "gzip", "file", "be", "stored", "NUMBER", "conf", "css_gzip_compression", "FALSE", "conf", "js_gzip_compression", "FALSE", "Block", "caching", "Block", "caching", "may", "not", "be", "compatible", "with", "node", "access", "modules", "depending", "on", "how", "the", "original", "block", "cache", "policy", "be", "defined", "by", "the", "module", "that", "provides", "the", "block", "NUMBER", "By", "default", "Drupal", "therefore", "disables", "block", "caching", "when", "one", "or", "more", "modules", "implement", "hook_node_grants", "NUMBER", "If", "you", "consider", "block", "caching", "to", "be", "safe", "on", "your", "site", "and", "want", "to", "bypass", "this", "restriction", "uncomment", "the", "line", "below", "NUMBER", "conf", "block_cache_bypass_node_grants", "TRUE", "String", "overrides", "To", "override", "specific", "strings", "on", "your", "site", "with", "or", "without", "enabling", "the", "Locale", "module", "add", "an", "entry", "to", "this", "list", "NUMBER", "This", "functionality", "allows", "you", "to", "change", "a", "small", "number", "of", "your", "site", "s", "default", "English", "language", "interface", "strings", "NUMBER", "Remove", "the", "leading", "hash", "signs", "to", "enable", "NUMBER", "conf", "locale_custom_strings_en", "array", "forum", "Discussion", "board", "count", "min", "count", "minutes", "IP", "blocking", "To", "bypass", "database", "queries", "for", "denied", "IP", "address", "use", "this", "setting", "NUMBER", "Drupal", "queries", "the", "blocked_ips", "table", "by", "default", "on", "every", "page", "request", "for", "both", "authenticated", "and", "anonymous", "users", "NUMBER", "This", "allows", "the", "system", "to", "block", "IP", "address", "from", "within", "the", "administrative", "interface", "and", "before", "any", "modules", "be", "loaded", "NUMBER", "However", "on", "high", "traffic", "websites", "you", "may", "want", "to", "avoid", "this", "query", "allowing", "you", "to", "bypass", "database", "access", "altogether", "for", "anonymous", "users", "under", "certain", "caching", "configurations", "NUMBER", "If", "use", "this", "setting", "you", "will", "need", "to", "add", "back", "any", "IP", "address", "which", "you", "may", "have", "blocked", "via", "the", "administrative", "interface", "NUMBER", "Each", "element", "of", "this", "array", "represents", "a", "blocked", "IP", "address", "NUMBER", "Uncommenting", "the", "array", "and", "leaving", "it", "empty", "will", "have", "the", "effect", "of", "disabling", "IP", "blocking", "on", "your", "site", "NUMBER", "Remove", "the", "leading", "hash", "signs", "to", "enable", "NUMBER", "conf", "blocked_ips", "array", "a", "NUMBER", "b", "NUMBER", "c", "NUMBER", "d", "Fast", "NUMBER", "pages", "Drupal", "can", "generate", "fully", "themed", "NUMBER", "pages", "NUMBER", "However", "some", "of", "these", "responses", "be", "for", "images", "or", "other", "resource", "file", "that", "be", "not", "display", "to", "the", "user", "NUMBER", "This", "can", "waste", "bandwidth", "and", "also", "generate", "server", "load", "NUMBER", "The", "options", "below", "return", "a", "simple", "fast", "NUMBER", "page", "for", "URLs", "matching", "a", "specific", "pattern", "NUMBER", "_fast_paths_exclude", "A", "regular", "expression", "to", "match", "paths", "to", "exclude", "such", "as", "images", "generate", "by", "image", "styles", "or", "dynamically", "resized", "images", "NUMBER", "If", "you", "need", "to", "add", "more", "paths", "you", "can", "add", "path", "to", "the", "expression", "NUMBER", "NUMBER", "_fast_paths", "A", "regular", "expression", "to", "match", "paths", "that", "should", "return", "a", "simple", "NUMBER", "page", "rather", "than", "the", "fully", "themed", "NUMBER", "page", "NUMBER", "If", "you", "don", "t", "have", "any", "aliases", "ending", "in", "htm", "or", "html", "you", "can", "add", "s", "html", "to", "the", "expression", "NUMBER", "NUMBER", "_fast_html", "The", "html", "to", "return", "for", "simple", "NUMBER", "pages", "NUMBER", "Add", "leading", "hash", "signs", "if", "you", "would", "like", "to", "disable", "this", "functionality", "NUMBER", "conf", "NUMBER", "_fast_paths_exclude", "styles", "conf", "NUMBER", "_fast_paths", "NUMBER", "txt", "png", "gif", "jpe", "g", "css", "js", "ico", "swf", "flv", "cgi", "bat", "pl", "dll", "exe", "asp", "i", "conf", "NUMBER", "_fast_html", "TAG", "TAG", "TAG", "TAG", "NUMBER", "Not", "Found", "TAG", "TAG", "TAG", "TAG", "Not", "Found", "TAG", "TAG", "The", "request", "URL", "path", "was", "not", "find", "on", "this", "server", "NUMBER", "TAG", "TAG", "TAG", "By", "default", "the", "page", "request", "process", "will", "return", "a", "fast", "NUMBER", "page", "for", "miss", "file", "if", "they", "match", "the", "regular", "expression", "set", "in", "NUMBER", "_fast_paths", "and", "not", "NUMBER", "_fast_paths_exclude", "above", "NUMBER", "NUMBER", "error", "will", "simultaneously", "be", "logged", "in", "the", "Drupal", "system", "log", "NUMBER", "You", "can", "choose", "to", "return", "a", "fast", "NUMBER", "page", "earlier", "for", "miss", "pages", "as", "soon", "as", "settings", "NUMBER", "php", "be", "loaded", "by", "uncommenting", "the", "line", "below", "NUMBER", "This", "speeds", "up", "server", "response", "time", "when", "loading", "NUMBER", "error", "pages", "and", "prevents", "the", "NUMBER", "error", "from", "be", "logged", "in", "the", "Drupal", "system", "log", "NUMBER", "In", "order", "to", "prevent", "valid", "pages", "such", "as", "image", "styles", "and", "other", "generate", "content", "that", "may", "match", "the", "NUMBER", "_fast_html", "regular", "expression", "from", "returning", "NUMBER", "error", "it", "be", "necessary", "to", "add", "them", "to", "the", "NUMBER", "_fast_paths_exclude", "regular", "expression", "above", "NUMBER", "Make", "sure", "that", "you", "understand", "the", "effect", "of", "this", "feature", "before", "uncommenting", "the", "line", "below", "NUMBER", "drupal_fast_", "NUMBER", "External", "access", "proxy", "settings", "If", "your", "site", "must", "access", "the", "Internet", "via", "a", "web", "proxy", "then", "you", "can", "enter", "the", "proxy", "settings", "here", "NUMBER", "Currently", "only", "basic", "authentication", "be", "support", "by", "use", "the", "username", "and", "password", "variables", "NUMBER", "The", "proxy_user_agent", "variable", "can", "be", "set", "to", "NULL", "for", "proxies", "that", "require", "no", "User", "Agent", "header", "or", "to", "a", "non", "empty", "string", "for", "proxies", "that", "limit", "request", "to", "a", "specific", "agent", "NUMBER", "The", "proxy_exceptions", "variable", "be", "an", "array", "of", "host", "names", "to", "be", "accessed", "directly", "not", "via", "proxy", "NUMBER", "conf", "proxy_server", "conf", "proxy_port", "NUMBER", "conf", "proxy_username", "conf", "proxy_password", "conf", "proxy_user_agent", "conf", "proxy_exceptions", "array", "NUMBER", "localhost", "Authorized", "file", "system", "operations", "The", "Update", "manager", "module", "include", "with", "Drupal", "provides", "a", "mechanism", "for", "site", "administrators", "to", "securely", "install", "miss", "update", "for", "the", "site", "directly", "through", "the", "web", "user", "interface", "NUMBER", "On", "securely", "configured", "servers", "the", "Update", "manager", "will", "require", "the", "administrator", "to", "provide", "SSH", "or", "FTP", "credentials", "before", "allowing", "the", "installation", "to", "proceed", "this", "allows", "the", "site", "to", "update", "the", "new", "file", "as", "the", "user", "who", "owns", "all", "the", "Drupal", "file", "instead", "of", "as", "the", "user", "the", "webserver", "be", "run", "as", "NUMBER", "On", "servers", "where", "the", "webserver", "user", "be", "itself", "the", "owner", "of", "the", "Drupal", "file", "the", "administrator", "will", "not", "be", "prompted", "for", "SSH", "or", "FTP", "credentials", "note", "that", "these", "server", "setups", "be", "common", "on", "shared", "hosting", "but", "be", "inherently", "insecure", "NUMBER", "Some", "sites", "might", "wish", "to", "disable", "the", "above", "functionality", "and", "only", "update", "the", "code", "directly", "via", "SSH", "or", "FTP", "themselves", "NUMBER", "This", "setting", "completely", "disables", "all", "functionality", "relate", "to", "these", "authorized", "file", "operations", "NUMBER", "see", "LINK", "Remove", "the", "leading", "hash", "signs", "to", "disable", "NUMBER", "conf", "allow_authorize_operations", "FALSE", "NUMBER", "I", "think", "it", "will", "be", "better", "if", "you", "write", "a", "blog", "post", "or", "document", "create", "PR", "to", "deployphp", "docs", "to", "sharing", "NUMBER", "Thank", "you", "I", "create", "a", "recipe", "for", "Drupal", "NUMBER", "this", "recipe", "be", "complex", "and", "use", "external", "libraries", "for", "example", "for", "crate", "the", "drupal", "settings", "NUMBER", "php", "file", "and", "upload", "it", "NUMBER", "I", "dont", "want", "my", "recibe", "file", "in", "the", "project", "s", "root", "dir", "i", "move", "them", "to", "NUMBER", "deployer", "but", "deploy", "NUMBER", "php", "still", "in", "root", "dir", "NUMBER", "be", "it", "posible", "move", "deploy", "NUMBER", "php", "search", "to", "this", "subfolder", "And", "i", "want", "to", "share", "my", "drupal", "NUMBER", "s", "recipe", "how", "i", "do", "Creating", "a", "fork", "generally", "I", "d", "simply", "remove", "deploy", "NUMBER", "php", "and", "libraries", "in", "subdir", "in", "some", "task", "maybe", "even", "right", "after", "deploy", "update_code", "NUMBER", "That", "would", "actually", "be", "sane", "thing", "to", "do", "in", "my", "rsync", "recipe", "by", "default", "deploy", "NUMBER", "php", "be", "ignored", "from", "syncing", "NUMBER", "And", "that", "brings", "us", "to", "recipe", "generally", "I", "d", "recommend", "creating", "fork", "PR", "against", "deployphp", "recipes", "however", "since", "it", "s", "framework", "specific", "maybe", "deployphp", "maintainer", "pinging", "elfet", "have", "I", "linked", "that", "correctly", "would", "rather", "suggest", "fork", "and", "PR", "against", "deployphp", "deployer", "smiling_imp", "I", "don", "t", "know", "this", "be", "what", "you", "want", "or", "not", "NUMBER", "But", "I", "do", "like", "this", "LINK", "deployer", "tree", "master", "deploy", "For", "your", "information", "NUMBER", "Thanks", "a", "lot", "kenjis", "it", "s", "a", "great", "solution", "NUMBER", "I", "was", "looking", "for", "a", "solution", "like", "rocketter", "who", "put", "evey", "deply", "file", "in", "a", "folder", "NUMBER", "In", "this", "case", "It", "s", "easy", "add", "the", "folder", "to", "NUMBER", "gitignore", "but", "your", "solution", "es", "similar", "i", "ll", "try", "it", "I", "think", "you", "can", "try", "bin", "dep", "f", "path", "to", "deploy", "NUMBER", "php", "and", "file", "deploy", "NUMBER", "php", "will", "be", "in", "anywhere", "smile", "Hello", "As", "the", "title", "said", "I", "want", "to", "rename", "symbolic", "link", "into", "another", "name", "be", "that", "possible", "to", "do", "nntoan", "Can", "i", "help", "me", "I", "can", "support", "you", "by", "Vietnamese", "smile", "Why", "do", "you", "need", "to", "change", "Anyone", "have", "any", "idea", "about", "this", "php", "PHP", "Fatal", "error", "require", "Failed", "open", "required", "recipe", "common", "NUMBER", "php", "include_path", "phar", "usr", "local", "bin", "dep", "bin", "NUMBER", "phar", "usr", "local", "bin", "dep", "vendor", "deployer", "phpseclib", "phpseclib", "NUMBER", "usr", "local", "Cellar", "php", "NUMBER", "NUMBER", "lib", "php", "in", "deploy", "NUMBER", "php", "on", "line", "NUMBER", "kenjis", "I", "want", "to", "controll", "everything", "NUMBER", "It", "would", "be", "nice", "if", "Deployer", "keep", "a", "log", "of", "each", "deployment", "NUMBER", "The", "logs", "should", "contain", "the", "same", "as", "vvv", "outputs", "NUMBER", "Option", "to", "enable", "disable", "logging", "and", "choose", "a", "log", "directory", "NUMBER", "WDYT", "NUMBER", "Is", "anyone", "doing", "this", "Is", "there", "a", "preferred", "way", "of", "passing", "information", "between", "tasks", "For", "example", "lets", "say", "you", "use", "the", "hipchat", "recipe", "and", "want", "to", "push", "the", "deploy", "log", "to", "a", "hipchat", "channel", "and", "then", "later", "make", "another", "recipe", "collecting", "the", "git", "changelog", "between", "this", "and", "previous", "version", "and", "you", "want", "to", "post", "that", "to", "hipchat", "as", "well", "NUMBER", "What", "about", "use", "for", "example", "saldaek", "monolog", "LINK", "Than", "everyone", "can", "configure", "where", "to", "put", "their", "logs", "NUMBER", "If", "you", "use", "a", "DIC", "in", "v", "NUMBER", "it", "would", "be", "nice", "if", "it", "was", "overwriteable", "before", "anything", "was", "run", "NUMBER", "So", "I", "could", "replace", "the", "container", "value", "logger", "with", "my", "own", "psr", "NUMBER", "compatible", "logger", "NUMBER", "Which", "be", "monolog", "but", "might", "write", "to", "a", "different", "file", "or", "greylog", "NUMBER", "Would", "be", "nice", "if", "in", "my", "deploy", "NUMBER", "php", "I", "just", "set", "a", "bunch", "of", "container", "values", "then", "the", "deployer", "app", "be", "run", "NUMBER", "dep", "cli", "sets", "up", "basic", "container", "loads", "my", "deployer", "scripts", "which", "first", "runs", "common", "recipe", "then", "my", "deploy", "recipe", "then", "runs", "the", "app", "with", "container", "as", "a", "constructor", "parameter", "as", "defined", "in", "the", "container", "NUMBER", "oanhnn", "elfet", "Danielss", "NUMBER", "why", "this", "issue", "was", "close", "I", "use", "server", "ssss", "NUMBER", "user", "uuuu", "forwardAgent", "Connect", "be", "do", "and", "all", "tasks", "before", "deploy", "update_code", "be", "do", "too", "NUMBER", "On", "deploy", "update_code", "raise", "exception", "RuntimeException", "Permission", "denied", "publickey", "NUMBER", "fatal", "The", "remote", "end", "hung", "up", "unexpectedly", "NUMBER", "But", "if", "I", "manualy", "connect", "by", "ssh", "uuuu", "NUMBER", "and", "exec", "git", "clone", "b", "master", "depth", "NUMBER", "recursive", "q", "git", "github", "NUMBER", "com", "oooo", "rrrr", "NUMBER", "git", "rrrr", "it", "work", "good", "NUMBER", "I", "configured", "local", "ubuntu", "and", "server", "debian", "NUMBER", "in", "accordance", "with", "LINK", "example", "blob", "master", "docs", "enable", "feature", "ssh", "forward", "agent", "NUMBER", "md", "but", "in", "my", "server", "no", "sshd", "service", "it", "s", "name", "ssh", "NUMBER", "This", "has", "no", "effect", "NUMBER", "I", "use", "phpseclib", "NUMBER", "But", "I", "aslo", "try", "ssh", "NUMBER", "_ext", "clone", "latest", "master", "branch", "today", "and", "it", "don", "t", "work", "too", "NUMBER", "Little", "difference", "be", "it", "do", "not", "show", "exception", "explanation", "just", "RuntimeException", "red", "recatangle", "NUMBER", "May", "be", "this", "be", "small", "issue", "NUMBER", "I", "will", "try", "deploy", "keys", "a", "bit", "later", "NUMBER", "Hi", "same", "issue", "I", "m", "pretty", "sure", "ssh", "agent", "forward", "be", "enable", "in", "server", "NUMBER", "I", "ve", "followed", "every", "step", "in", "LINK", "example", "blob", "master", "docs", "enable", "feature", "ssh", "forward", "agent", "NUMBER", "md", "And", "doing", "ssh", "josemf", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "git", "clone", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "vendor", "project", "NUMBER", "git", "var", "local", "apps", "project", "release", "NUMBER", "Successfully", "clones", "the", "repository", "NUMBER", "Ofc", "I", "don", "t", "have", "my", "private", "key", "in", "the", "server", "so", "I", "know", "this", "comes", "for", "SSH", "Agent", "Forwarding", "NUMBER", "Also", "josemf", "zeus", "NUMBER", "ssh", "ssh", "T", "git", "bitbucket", "NUMBER", "org", "logged", "in", "as", "josemf", "NUMBER", "You", "can", "use", "git", "or", "hg", "to", "connect", "to", "Bitbucket", "NUMBER", "Shell", "access", "be", "disabled", "NUMBER", "My", "deploy", "NUMBER", "php", "require", "recipe", "composer", "NUMBER", "php", "server", "zeus", "host", "NUMBER", "user", "josemf", "identityFile", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "xxxxxxxxx", "forwardAgent", "You", "can", "use", "identity", "key", "ssh", "config", "or", "username", "password", "to", "auth", "on", "the", "server", "NUMBER", "stage", "staging", "env", "deploy_path", "var", "local", "apps", "project", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "set", "repository", "git", "bitbucket", "NUMBER", "org", "vendor", "project", "NUMBER", "git", "And", "the", "deploy", "log", "Executing", "task", "deploy", "prepare", "on", "zeus", "Run", "echo", "NUMBER", "bash", "Run", "if", "d", "var", "local", "apps", "staging", "NUMBER", "rio", "works", "NUMBER", "com", "then", "echo", "fi", "Run", "cd", "var", "local", "apps", "staging", "NUMBER", "rio", "works", "NUMBER", "com", "if", "d", "release", "then", "mkdir", "release", "fi", "Run", "cd", "var", "local", "apps", "staging", "NUMBER", "rio", "works", "NUMBER", "com", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "zeus", "Ok", "Executing", "task", "deploy", "release", "on", "zeus", "Run", "date", "Y", "m", "d", "H", "M", "S", "NUMBER", "Run", "mkdir", "var", "local", "apps", "project", "release", "NUMBER", "Run", "cd", "var", "local", "apps", "project", "if", "h", "release", "then", "rm", "release", "fi", "Run", "ln", "s", "var", "local", "apps", "project", "release", "NUMBER", "var", "local", "apps", "project", "release", "do", "on", "zeus", "Ok", "Executing", "task", "deploy", "update_code", "on", "zeus", "Run", "readlink", "var", "local", "apps", "project", "release", "var", "local", "apps", "project", "release", "NUMBER", "Run", "git", "clone", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "vendor", "project", "NUMBER", "git", "var", "local", "apps", "project", "release", "NUMBER", "NUMBER", "NUMBER", "RuntimeException", "Permission", "denied", "publickey", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "Exception", "trace", "Well", "I", "think", "forwardAgent", "function", "may", "not", "be", "work", "as", "expected", "NUMBER", "Or", "there", "s", "something", "broke", "with", "phpseclib", "NUMBER", "deployer", "phpseclib", "v", "NUMBER", "PHP", "Secure", "Communications", "Library", "Pure", "PHP", "implementations", "of", "RSA", "AES", "SSH", "NUMBER", "SFTP", "X", "NUMBER", "etc", "NUMBER", "Thanks", "for", "you", "help", "I", "think", "forwradAgent", "be", "work", "but", "in", "your", "agent", "has", "many", "keys", "and", "one", "or", "some", "keys", "has", "made", "this", "error", "NUMBER", "Please", "try", "add", "key", "to", "deploy", "keys", "and", "run", "below", "command", "before", "run", "deployer", "NUMBER", "ssh", "add", "D", "ssh", "add", "path", "to", "your_key", "dep", "deploy", "dev", "vvv", "I", "ve", "only", "one", "key", "on", "this", "computer", "but", "followed", "your", "instructions", "anyway", "unfortunately", "with", "no", "success", "NUMBER", "Do", "you", "have", "any", "other", "debug", "you", "want", "to", "try", "out", "I", "could", "easily", "run", "some", "test", "or", "mess", "with", "deployer", "or", "phpseclib", "code", "if", "you", "would", "give", "me", "any", "guidance", "on", "that", "NUMBER", "System", "Version", "OS", "X", "NUMBER", "NUMBER", "F", "NUMBER", "Kernel", "Version", "Darwin", "NUMBER", "Thanks", "In", "my", "case", "there", "be", "no", "solution", "still", "NUMBER", "I", "delete", "all", "keys", "in", "remote", "local", "and", "github", "account", "and", "repos", "NUMBER", "I", "recreate", "key", "localy", "ssh", "keygen", "add", "it", "to", "remote", "ssh", "copy", "id", "uuuu", "NUMBER", "add", "it", "to", "only", "one", "needed", "repo", "to", "deploy", "keys", "section", "NUMBER", "When", "I", "try", "dep", "deploy", "ssss", "i", "still", "get", "error", "RuntimeException", "Permission", "denied", "publickey", "NUMBER", "fatal", "The", "remote", "end", "hung", "up", "unexpectedly", "But", "ssh", "uuuu", "NUMBER", "git", "clone", "b", "master", "depth", "NUMBER", "recursive", "q", "git", "github", "NUMBER", "com", "oooo", "rrrr", "NUMBER", "git", "rrrr", "works", "well", "NUMBER", "Then", "i", "write", "task", "php", "task", "show_keys", "function", "writeln", "run", "sudo", "ssh", "add", "l", "and", "set", "it", "before", "deploy", "update_code", "and", "get", "Executing", "task", "show_keys", "on", "daikoku", "NUMBER", "ru", "Run", "ssh", "add", "l", "RuntimeException", "Could", "not", "open", "a", "connection", "to", "your", "authentication", "agent", "NUMBER", "Forwarding", "do", "not", "happen", "NUMBER", "_Local_", "Kubuntu", "NUMBER", "PHP", "NUMBER", "NUMBER", "deb", "NUMBER", "sury", "NUMBER", "org", "utopic", "NUMBER", "Deployers", "from", "NUMBER", "up", "to", "NUMBER", "by", "NUMBER", "phar", "from", "deployer", "NUMBER", "org", "Deployer", "from", "repo", "master", "branch", "with", "deployer", "phpseclib", "and", "phpseclib", "phpseclib", "_Remote_", "OpenSSH_", "NUMBER", "p", "NUMBER", "Debian", "NUMBER", "OpenSSL", "NUMBER", "k", "NUMBER", "Jan", "NUMBER", "OpenSSH_", "NUMBER", "p", "NUMBER", "Debian", "NUMBER", "deb", "NUMBER", "u", "NUMBER", "OpenSSL", "NUMBER", "e", "NUMBER", "Feb", "NUMBER", "Agent", "forwarding", "do", "not", "work", "for", "me", "in", "above", "cases", "NUMBER", "There", "be", "people", "who", "have", "it", "work", "Did", "you", "enable", "agent", "forwarding", "feature", "elfet", "Yes", "I", "tried", "enable", "it", "in", "YAML", "format", "and", "by", "forwardAgent", "method", "of", "Builder", "NUMBER", "Please", "show", "me", "a", "work", "configuration", "os", "deployer", "php", "with", "exts", "sshd", "NUMBER", "Would", "be", "interested", "in", "that", "also", "NUMBER", "Thanks", "I", "have", "the", "same", "problem", "as", "agarb", "NUMBER", "and", "josemf", "Tried", "oanhnn", "s", "configuration", "but", "no", "luck", "NUMBER", "ForwardAgent", "works", "with", "manual", "ssh", "notice", "debug", "NUMBER", "key", "key", "id_rsa", "NUMBER", "x", "NUMBER", "f", "NUMBER", "d", "NUMBER", "d", "NUMBER", "ffc", "NUMBER", "NUMBER", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_SERVICE_ACCEPT", "received", "debug", "NUMBER", "key", "key", "id_rsa", "NUMBER", "x", "NUMBER", "f", "NUMBER", "d", "NUMBER", "d", "NUMBER", "ffc", "NUMBER", "debug", "NUMBER", "key", "home", "quangnv", "NUMBER", "ssh", "identity", "nil", "debug", "NUMBER", "key", "home", "quangnv", "NUMBER", "ssh", "id_rsa", "nil", "debug", "NUMBER", "key", "home", "quangnv", "NUMBER", "ssh", "id_dsa", "nil", "debug", "NUMBER", "key", "home", "quangnv", "NUMBER", "ssh", "id_ecdsa", "nil", "NUMBER", "but", "didn", "t", "work", "with", "deployer", "NUMBER", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_SERVICE_ACCEPT", "received", "debug", "NUMBER", "key", "home", "quangnv", "NUMBER", "ssh", "identity", "nil", "debug", "NUMBER", "key", "home", "quangnv", "NUMBER", "ssh", "id_rsa", "nil", "debug", "NUMBER", "key", "home", "quangnv", "NUMBER", "ssh", "id_dsa", "nil", "debug", "NUMBER", "key", "home", "quangnv", "NUMBER", "ssh", "id_ecdsa", "nil", "NUMBER", "Tried", "show_keys", "task", "as", "agarb", "NUMBER", "and", "get", "same", "output", "RuntimeException", "Could", "not", "open", "a", "connection", "to", "your", "authentication", "agent", "NUMBER", "I", "have", "update", "phpseclib", "till", "NUMBER", "version", "and", "have", "fix", "agent", "forwarding", "implementation", "according", "to", "LINK", "L", "NUMBER", "Now", "it", "works", "for", "me", "NUMBER", "Thanks", "torinaki", "Wow", "Can", "you", "make", "PR", "with", "fix", "phpseclib", "Thanks", "torinaki", "Works", "for", "me", "now", "NUMBER", "The", "current", "stable", "version", "of", "Laravel", "NUMBER", "doesn", "t", "use", "the", "vendor", "folder", "anymore", "to", "write", "things", "NUMBER", "Also", "add", "the", "deploy", "writable", "task", "NUMBER", "In", "that", "case", "an", "option", "be", "have", "more", "recipes", "laravel", "NUMBER", "laravel", "NUMBER", "NUMBER", "Or", "people", "can", "change", "the", "writable_dirs", "by", "themselves", "NUMBER", "NUMBER", "But", "we", "need", "a", "note", "for", "support", "laravel", "NUMBER", "x", "and", "NUMBER", "x", "NUMBER", "Can", "you", "do", "it", "oanhnn", "Are", "you", "in", "favor", "to", "maintain", "just", "one", "recipe", "plus", "note", "for", "support", "other", "version", "KennedyTedesco", "Yes", "NUMBER", "I", "think", "this", "recipe", "should", "support", "laravel", "NUMBER", "x", "long", "term", "support", "version", "and", "add", "a", "note", "to", "support", "other", "version", "NUMBER", "Can", "you", "create", "a", "pull", "request", "to", "deployphp", "docs", "elfet", "What", "do", "you", "think", "oanhnn", "Yes", "I", "can", "do", "that", "NUMBER", "KennedyTedesco", "Please", "create", "a", "pull", "request", "for", "docs", "to", "deployphp", "docs", "KennedyTedesco", "any", "news", "I", "install", "deployer", "via", "composer", "NUMBER", "I", "also", "install", "herzult", "php", "ssh", "NUMBER", "My", "previous", "deploy", "strategy", "was", "use", "capifony", "with", "a", "key", "to", "login", "on", "the", "remote", "server", "NUMBER", "My", "deploy", "NUMBER", "php", "php", "TAG", "user", "my_user", "stage", "staging", "env", "deploy_path", "home", "my_user", "test_deployer", "set", "repository", "git", "bitbucket", "NUMBER", "org", "company", "repo", "NUMBER", "git", "When", "i", "try", "to", "execute", "bin", "dep", "deploy", "prepare", "staging", "I", "get", "the", "exception", "mention", "in", "the", "title", "along", "with", "a", "strange", "message", "about", "POSIX", "compliance", "of", "my", "remote", "shell", "that", "be", "a", "bash", "I", "m", "not", "sure", "to", "understand", "NUMBER", "I", "can", "ssh", "on", "my", "remote", "server", "and", "bash", "be", "there", "NUMBER", "On", "my", "remote", "server", "bash", "echo", "NUMBER", "bash", "I", "have", "the", "same", "issue", "but", "be", "use", "a", "servers", "NUMBER", "yml", "file", "with", "the", "following", "settings", "production", "host", "localhost", "user", "test", "prod", "identity_file", "stage", "production", "deploy_path", "home", "test", "prod", "production", "But", "also", "get", "the", "The", "authentication", "over", "the", "current", "SSH", "connection", "fail", "NUMBER", "Also", "use", "ext", "ssh", "NUMBER", "Any", "ideas", "erickr", "what", "be", "your", "ext", "ssh", "version", "Are", "you", "try", "with", "phpseclib", "I", "m", "use", "php", "NUMBER", "ssh", "NUMBER", "in", "debian", "jessie", "Package", "php", "NUMBER", "ssh", "NUMBER", "New", "yes", "State", "install", "Automatically", "install", "no", "Version", "NUMBER", "NUMBER", "Priority", "extra", "Section", "php", "Maintainer", "Debian", "PHP", "PECL", "Maintainers", "pkg", "php", "pecl", "lists", "NUMBER", "alioth", "NUMBER", "debian", "NUMBER", "org", "Architecture", "i", "NUMBER", "Uncompressed", "Size", "NUMBER", "k", "Depends", "phpapi", "NUMBER", "php", "NUMBER", "common", "NUMBER", "php", "NUMBER", "common", "TAG", "NUMBER", "libc", "NUMBER", "NUMBER", "libssh", "NUMBER", "NUMBER", "NUMBER", "Breaks", "libssh", "NUMBER", "php", "TAG", "parse", "local", "remote", "env", "parse", "remote", "upload", "local", "remote", "I", "have", "created", "PR", "NUMBER", "in", "docs", "repo", "which", "explains", "the", "upload", "function", "NUMBER", "Thank", "you", "In", "this", "PR", "add", "support", "forward", "agent", "feature", "when", "use", "ext", "ssh", "NUMBER", "Ping", "elfet", "ZeeCoder", "I", "think", "it", "support", "NUMBER", "LINK", "auth", "agent", "NUMBER", "php", "And", "I", "was", "try", "test", "with", "some", "my", "projects", "NUMBER", "It", "run", "successful", "NUMBER", "NUMBER", "see", "NUMBER", "If", "you", "agree", "this", "change", "i", "update", "doc", "test", "and", "rebase", "I", "m", "okay", "with", "this", "but", "have", "You", "tried", "rsync", "warmup", "from", "deployphp", "recipes", "rsync", "NUMBER", "php", "I", "guess", "it", "do", "everything", "Your", "deploy", "copy_dirs", "do", "ony", "You", "can", "leverage", "all", "of", "rsync", "glory", "wink", "Rsync", "be", "a", "good", "solution", "for", "many", "cases", "and", "surelly", "to", "deploy", "without", "git", "by", "exemple", "NUMBER", "Copy", "cp", "be", "install", "on", "all", "system", "rsync", "not", "so", "i", "think", "there", "solutions", "be", "complementary", "ies", "one", "from", "other", "Rsync", "if", "you", "install", "it", "and", "use", "on", "the", "same", "server", "or", "on", "differents", "NUMBER", "Copy", "for", "simpliest", "cases", "ZeeCoder", "Have", "you", "a", "point", "of", "view", "AlexStansfield", "if", "you", "think", "this", "be", "usefull", "and", "writed", "as", "you", "wait", "you", "can", "add", "a", "comment", "here", "Just", "add", "PR", "NUMBER", "for", "copying", "vendors", "between", "release", "NUMBER", "Sorry", "I", "hadn", "t", "seen", "this", "PR", "before", "I", "made", "mine", "NUMBER", "I", "think", "cool", "feature", "NUMBER", "nicodmf", "can", "you", "add", "docs", "for", "this", "Usefull", "when", "redirecting", "Deployer", "output", "inside", "shell", "script", "NUMBER", "Since", "output", "be", "redirected", "posix_isatty", "returns", "false", "and", "coloring", "be", "disabled", "by", "default", "NUMBER", "This", "option", "forces", "deployer", "to", "color", "output", "NUMBER", "I", "m", "use", "bash", "script", "when", "deploying", "new", "version", "NUMBER", "It", "works", "like", "that", "NUMBER", "check", "existance", "of", "backup", "and", "log", "directories", "NUMBER", "create", "log", "file", "and", "log", "everything", "that", "be", "on", "screen", "NUMBER", "start", "timer", "NUMBER", "use", "Deployer", "to", "deploy", "code", "on", "servers", "NUMBER", "show", "deploy", "time", "I", "like", "to", "see", "colored", "output", "when", "I", "use", "Deployer", "but", "when", "I", "redirect", "Deployer", "output", "like", "php", "vendor", "bin", "dep", "deploy", "prod", "tee", "log_path", "or", "exec", "tee", "dev", "tty", "sed", "s", "E", "m", "m", "g", "log_path", "NUMBER", "NUMBER", "colors", "be", "lost", "because", "posix_isatty", "return", "false", "NUMBER", "I", "also", "do", "php", "deployer", "NUMBER", "phar", "deploy", "vvv", "production", "tee", "log", "But", "I", "can", "see", "colored", "output", "NUMBER", "What", "s", "the", "difference", "I", "use", "Ubuntu", "and", "LXTerminal", "NUMBER", "kenjis", "Sorry", "I", "forgot", "to", "add", "stderr", "redirection", "try", "this", "php", "vendor", "bin", "dep", "NUMBER", "NUMBER", "tee", "test", "NUMBER", "log", "I", "mostly", "use", "exec", "tee", "dev", "tty", "sed", "s", "E", "m", "m", "g", "log_path", "NUMBER", "NUMBER", "because", "i", "don", "t", "want", "to", "to", "write", "command", "NUMBER", "NUMBER", "tee", "a", "log", "to", "every", "command", "NUMBER", "I", "just", "redirect", "stderr", "to", "stdout", "and", "use", "tee", "to", "log", "everything", "at", "the", "begining", "of", "bash", "script", "NUMBER", "piotrekkr", "I", "get", "no", "color", "output", "NUMBER", "Agree", "with", "force", "color", "option", "NUMBER", "elfet", "Do", "you", "mean", "to", "only", "check", "force", "color", "or", "c", "inside", "Deployer", "run", "Your", "idea", "be", "really", "good", "NUMBER", "I", "ll", "change", "my", "PR", "when", "I", "m", "at", "work", "NUMBER", "elfet", "Ok", "my", "entire", "PR", "be", "going", "to", "trash", "I", "just", "looked", "at", "Symfony", "Component", "Console", "Application", "and", "there", "be", "option", "ansi", "Force", "ANSI", "output", "It", "be", "doing", "same", "thing", "as", "my", "force", "color", "NUMBER", "You", "can", "reject", "my", "PR", "NUMBER", "Thx", "NUMBER", "Good", "I", "get", "colored", "output", "NUMBER", "Added", "Magento", "recipe", "NUMBER", "The", "problem", "big", "repositories", "takes", "too", "long", "to", "copy", "even", "with", "the", "reference", "NUMBER", "This", "solution", "will", "not", "copy", "fetch", "any", "git", "objects", "but", "uses", "only", "one", "mirror", "update", "it", "and", "then", "creates", "an", "archive", "to", "the", "release", "path", "NUMBER", "The", "original", "idea", "be", "come", "from", "Capistrano", "LINK", "NUMBER", "Good", "ideal", "Please", "create", "new", "PR", "for", "magento", "recipe", "NUMBER", "Done", "NUMBER", "Sorry", "about", "the", "unuse", "variable", "it", "was", "fix", "on", "the", "next", "commit", "which", "I", "remove", "accidentally", "when", "took", "out", "the", "Magento", "recipe", "Testing", "would", "be", "much", "welcomed", "as", "it", "s", "a", "core", "part", "of", "Deployer", "NUMBER", "I", "test", "it", "with", "a", "few", "of", "our", "repositories", "but", "maybe", "other", "users", "have", "different", "configurations", "NUMBER", "I", "m", "trying", "to", "switch", "from", "Capistrano", "and", "a", "slow", "deployment", "with", "lots", "of", "io", "be", "a", "no", "go", "for", "us", "NUMBER", "This", "one", "reduced", "the", "original", "deployment", "time", "of", "a", "big", "repository", "from", "NUMBER", "minutes", "to", "NUMBER", "s", "NUMBER", "On", "the", "big", "repository", "we", "have", "an", "NUMBER", "G", "sql", "file", "update", "a", "few", "times", "since", "the", "initial", "commit", "which", "slowed", "down", "the", "clone", "a", "lot", "NUMBER", "With", "a", "mirror", "we", "don", "t", "even", "have", "to", "get", "any", "NUMBER", "git", "objects", "NUMBER", "Imo", "it", "s", "great", "thing", "to", "have", "but", "implementation", "be", "too", "invasive", "NUMBER", "In", "capistrano", "strategy", "be", "configurable", "NUMBER", "When", "I", "created", "git", "cache", "pr", "the", "whole", "thing", "was", "configurable", "with", "use", "if", "possible", "by", "default", "NUMBER", "To", "some", "this", "might", "be", "problematic", "depending", "on", "repository", "configuration", "plus", "You", "d", "have", "to", "actually", "keep", "additional", "dir", "on", "deployment", "target", "and", "I", "get", "clients", "bitching", "about", "additional", "dirs", "and", "unneded", "version", "since", "forever", "NUMBER", "And", "that", "dir", "would", "have", "to", "be", "there", "etc", "etc", "NUMBER", "My", "position", "make", "it", "configurable", "just", "like", "I", "did", "with", "git", "cache", "NUMBER", "That", "way", "anybody", "would", "be", "able", "to", "choose", "strategy", "be", "it", "shallow", "clone", "reference", "or", "mirrored", "repo", "NUMBER", "It", "would", "be", "possible", "to", "make", "it", "configurable", "NUMBER", "However", "it", "s", "more", "thing", "to", "maintain", "NUMBER", "Also", "the", "previous", "behaviour", "didn", "t", "hide", "the", "NUMBER", "git", "directory", "so", "I", "discover", "I", "can", "access", "NUMBER", "git", "config", "and", "NUMBER", "git", "index", "from", "the", "web", "so", "in", "theory", "I", "could", "download", "every", "git", "objects", "if", "I", "m", "patient", "enough", "NUMBER", "With", "directory", "listing", "enable", "it", "would", "be", "much", "easier", "NUMBER", "In", "my", "case", "the", "change", "uses", "much", "less", "disk", "space", "because", "the", "release", "do", "not", "have", "the", "NUMBER", "git", "folder", "NUMBER", "folders", "less", "with", "the", "default", "keep", "release", "NUMBER", "It", "s", "a", "design", "change", "and", "I", "can", "t", "see", "it", "could", "practically", "live", "together", "with", "the", "old", "behaviour", "but", "it", "s", "the", "maintainer", "s", "task", "to", "decide", "NUMBER", "Worst", "case", "I", "have", "to", "use", "a", "private", "fork", "NUMBER", "You", "don", "t", "_have_", "to", "use", "fork", "if", "it", "s", "so", "hard", "to", "maintain", "NUMBER", "If", "maintainer", "decides", "against", "it", "then", "there", "s", "always", "deployphp", "recipes", "repo", "in", "which", "You", "can", "add", "Your", "own", "recipes", "and", "in", "which", "recipe", "that", "change", "NUMBER", "tasks", "can", "live", "happily", "smiling_imp", "With", "NUMBER", "git", "present", "I", "guess", "it", "depends", "on", "what", "person", "wants", "NUMBER", "If", "use", "shallow", "clones", "it", "would", "actually", "do", "no", "harm", "to", "simply", "cleanup", "that", "dir", "post", "clone", "NUMBER", "In", "case", "of", "git", "cache", "with", "reference", "it", "s", "simpy", "needed", "aand", "securing", "access", "from", "outside", "to", "that", "be", "excercise", "to", "the", "admin", "depops", "NUMBER", "With", "Your", "way", "it", "s", "simply", "gone", "But", "no", "need", "to", "listen", "to", "me", "I", "be", "all", "for", "freedom", "of", "choice", "at", "expense", "of", "simplicity", "and", "maintainability", "NUMBER", "joy_cat", "Ok", "if", "this", "do", "not", "get", "to", "the", "next", "version", "I", "shall", "move", "it", "to", "deployphp", "recipes", "much", "better", "to", "not", "have", "to", "maintain", "a", "private", "fork", "NUMBER", "I", "m", "also", "open", "for", "improvement", "NUMBER", "In", "capistrano", "strategy", "be", "configurable", "NUMBER", "I", "hope", "I", "can", "configure", "strategy", "NUMBER", "It", "s", "a", "design", "change", "and", "I", "can", "t", "see", "it", "could", "practically", "live", "together", "with", "the", "old", "behaviour", "Yes", "it", "can", "t", "live", "together", "NUMBER", "So", "users", "select", "one", "NUMBER", "Speaking", "of", "NUMBER", "git", "I", "think", "the", "directory", "structure", "be", "not", "secure", "NUMBER", "It", "seems", "you", "put", "too", "much", "file", "in", "Web", "document", "root", "NUMBER", "I", "mean", "for", "example", "project", "TAG", "I", "didn", "t", "expect", "so", "much", "resistance", "well", "NUMBER", "so", "far", "so", "could", "you", "guys", "tell", "me", "why", "you", "need", "git", "objects", "in", "each", "release", "Is", "it", "the", "case", "you", "be", "modifying", "file", "on", "the", "production", "server", "and", "committing", "to", "git", "from", "there", "Some", "of", "my", "repositories", "be", "NUMBER", "GB", "big", "this", "means", "NUMBER", "GB", "additional", "disk", "space", "when", "I", "keep", "only", "NUMBER", "release", "NUMBER", "Also", "use", "bare", "mirror", "in", "this", "PR", "be", "speeding", "up", "the", "deployment", "significantly", "without", "any", "side", "effect", "NUMBER", "Moving", "everything", "to", "a", "public", "folder", "except", "the", "file", "needed", "for", "development", "be", "not", "a", "solution", "but", "perhaps", "I", "m", "just", "too", "convenient", "after", "a", "few", "years", "RoR", "development", "NUMBER", "IDE", "s", "be", "not", "behaving", "like", "this", "by", "default", "composer", "requires", "it", "s", "file", "and", "the", "vendor", "folder", "in", "the", "document", "root", "and", "then", "there", "s", "the", "problem", "how", "the", "framework", "can", "support", "this", "NUMBER", "You", "have", "to", "add", "far", "more", "file", "anyway", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Pozdrawiam", "Hubert", "Kowalski", "could", "you", "guys", "tell", "me", "why", "you", "need", "git", "objects", "in", "each", "release", "Just", "I", "like", "it", "NUMBER", "I", "can", "see", "git", "log", "and", "status", "on", "production", "server", "NUMBER", "But", "if", "I", "had", "NUMBER", "GB", "git", "repository", "I", "would", "reconsider", "use", "git", "repository", "NUMBER", "So", "I", "also", "do", "not", "oppose", "it", "I", "may", "use", "it", "NUMBER", "But", "Capistrano", "has", "some", "strategy", "so", "why", "do", "Deployer", "do", "also", "I", "think", "it", "be", "better", "Deployer", "has", "functionality", "to", "have", "some", "strategies", "for", "a", "task", "NUMBER", "Is", "it", "the", "case", "you", "be", "modifying", "file", "on", "the", "production", "server", "and", "committing", "to", "git", "from", "there", "Of", "course", "not", "NUMBER", "Already", "implement", "with", "git", "clone", "references", "NUMBER", "After", "deploying", "my", "project", "I", "get", "plain", "file", "stucture", "no", "subdirectories", "and", "strange", "filenames", "instead", "of", "correct", "directory", "structure", "NUMBER", "Directories", "names", "looks", "like", "i", "NUMBER", "x", "logos", "i", "NUMBER", "x", "logos", "Filenames", "looks", "like", "i", "NUMBER", "x", "logos", "mk_logo", "NUMBER", "png", "j", "j", "d", "NUMBER", "da", "NUMBER", "js", "s", "s", "d", "NUMBER", "a", "NUMBER", "css", "It", "worked", "well", "with", "Deployer", "NUMBER", "How", "can", "I", "fix", "it", "I", "ve", "update", "my", "config", "NUMBER", "I", "be", "deploying", "from", "Windows", "NUMBER", "to", "Ubuntu", "NUMBER", "if", "it", "be", "important", "NUMBER", "Current", "deploy", "NUMBER", "php", "TAG", "user", "remote_production_username", "password", "remote_production_password", "env", "deploy_path", "remote_production_path", "stage", "production", "task", "upload_", "NUMBER", "project_name", "function", "upload", "local_path", "remote_production_path", "desc", "Uploading", "NUMBER", "project_name", "task", "project_name", "upload_", "NUMBER", "project_name", "Before", "to", "get", "current", "stage", "it", "was", "possible", "to", "do", "task", "xyz", "function", "args", "echo", "args", "getArgument", "stage", "prints", "stage", "where", "it", "be", "executed", "But", "now", "function", "doesn", "t", "receive", "any", "argument", "NUMBER", "How", "to", "get", "options", "argument", "values", "I", "ve", "had", "NUMBER", "dep", "self", "update", "please", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "naquad", "nq", "NUMBER", "od", "NUMBER", "ua", "p", "m", "Backend", "deployer", "self", "update", "Looking", "for", "update", "NUMBER", "Already", "up", "to", "date", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "naquad", "nq", "NUMBER", "od", "NUMBER", "ua", "p", "m", "Backend", "deployer", "version", "Deployer", "version", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "naquad", "nq", "NUMBER", "od", "NUMBER", "ua", "p", "m", "Backend", "deployer", "deploy", "vvv", "Executing", "task", "newrelic", "store_old_rev", "on", "dev", "do", "on", "dev", "Ok", "Executing", "task", "deploy", "prepare", "on", "dev", "PHP", "Warning", "Missing", "argument", "NUMBER", "for", "closure", "in", "home", "naquad", "projects", "Backend", "deploy", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Stack", "trace", "Any", "update", "on", "this", "php", "task", "deploy", "test", "function", "args", "var_dump", "args", "NULL", "bin", "dep", "V", "Deployer", "version", "master", "Which", "be", "a", "NUMBER", "eb", "NUMBER", "bb", "NUMBER", "a", "NUMBER", "ab", "NUMBER", "dc", "NUMBER", "b", "NUMBER", "bfa", "NUMBER", "c", "NUMBER", "fd", "NUMBER", "Ohh", "that", "be", "so", "much", "more", "simple", "and", "clean", "php", "task", "foo", "bar", "function", "For", "argument", "stage", "null", "if", "input", "hasArgument", "stage", "stage", "input", "getArgument", "stage", "For", "option", "tag", "null", "if", "input", "hasOption", "tag", "tag", "input", "getOption", "tag", "Isv", "s", "comment", "be", "correct", "NUMBER", "I", "be", "closing", "thing", "issue", "but", "feel", "free", "to", "reopen", "if", "you", "think", "there", "needs", "to", "be", "more", "discussion", "NUMBER", "add", "a", "section", "to", "the", "docs", "NUMBER", "Thank", "you", "I", "ve", "downloaded", "recent", "deployer", "NUMBER", "phar", "and", "tried", "to", "migrate", "my", "projects", "NUMBER", "The", "problem", "I", "ve", "experienced", "be", "that", "deployer", "doesn", "t", "change", "work", "directory", "to", "deploy_path", "one", "while", "documentation", "state", "it", "should", "NUMBER", "Setting", "undocumented", "variable", "working_path", "solve", "the", "issue", "but", "I", "m", "not", "sure", "it", "be", "a", "right", "solution", "NUMBER", "Rebuild", "the", "PHAR", "from", "master", "Describe", "working_path", "LINK", "Quote", "run", "string", "command", "Runs", "a", "command", "on", "a", "remote", "server", "in", "the", "work", "path", "server", "NUMBER", "env", "deploy_path", "home", "path", "NUMBER", "My", "deployer", "NUMBER", "php", "LINK", "Wow", "seems", "like", "Your", "code", "could", "benefit", "from", "migrating", "to", "NUMBER", "use", "deployphp", "recipes", "for", "new", "relic", "smile", "a", "lot", "of", "that", "be", "obsoleted", "by", "common", "NUMBER", "php", "newrelic", "NUMBER", "php", "NUMBER", "This", "would", "be", "a", "nice", "feature", "to", "have", "NUMBER", "For", "example", "in", "Zend", "Framework", "NUMBER", "you", "have", "a", "lot", "of", "local", "meaning", "git", "ignored", "configuration", "file", "NUMBER", "It", "would", "be", "nice", "to", "be", "able", "to", "share", "them", "use", "a", "wildcard", "like", "NUMBER", "local", "NUMBER", "php", "NUMBER", "I", "realize", "that", "this", "goes", "againts", "the", "fact", "that", "the", "actual", "implementation", "creates", "the", "declared", "shared", "file", "if", "they", "be", "not", "there", "NUMBER", "Using", "a", "wildcard", "like", "the", "above", "mention", "one", "would", "create", "an", "actual", "NUMBER", "local", "NUMBER", "php", "file", "NUMBER", "Maybe", "we", "could", "have", "some", "optional", "configuration", "setting", "to", "say", "that", "the", "shared", "file", "needs", "to", "be", "created", "or", "not", "or", "we", "could", "just", "simply", "search", "the", "file", "name", "and", "avoid", "the", "creation", "of", "the", "file", "if", "we", "find", "a", "wildcard", "NUMBER", "What", "do", "you", "think", "As", "I", "said", "in", "Zend", "Framework", "applications", "you", "could", "have", "a", "lot", "of", "configuration", "file", "all", "ending", "in", "NUMBER", "local", "NUMBER", "php", "NUMBER", "I", "would", "like", "to", "avoid", "the", "need", "to", "modify", "my", "deploy", "NUMBER", "php", "file", "everytime", "I", "add", "a", "new", "configuration", "file", "NUMBER", "It", "would", "be", "easier", "if", "all", "the", "NUMBER", "local", "NUMBER", "php", "file", "were", "automatically", "shared", "every", "time", "NUMBER", "On", "the", "other", "hand", "I", "would", "have", "to", "create", "my", "config", "file", "in", "the", "shared", "directory", "but", "anyhow", "I", "would", "have", "to", "put", "some", "content", "into", "them", "even", "I", "created", "them", "automatically", "NUMBER", "Why", "do", "you", "think", "it", "could", "generate", "bug", "marcosh", "maybe", "this", "will", "help", "environment", "specific", "application", "config", "of", "zf", "NUMBER", "LINK", "environment", "specific", "application", "configuration", "Just", "for", "secure", "I", "can", "t", "write", "host", "password", "in", "code", "NUMBER", "So", "I", "try", "ask", "function", "NUMBER", "when", "I", "call", "ask", "or", "askHiddenResponse", "for", "ask", "password", "the", "function", "throw", "this", "error", "Fatal", "error", "Call", "to", "a", "member", "function", "getOutput", "on", "a", "non", "object", "in", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "on", "line", "NUMBER", "_example", "_", "TAG", "user", "USER", "password", "password", "If", "ask", "in", "task", "callback", "It", "s", "success", "NUMBER", "but", "I", "can", "set", "server", "NUMBER", "password", "task", "auth", "function", "password", "askHiddenResponse", "Host", "password", "env", "server", "NUMBER", "password", "password", "before", "deploy", "auth", "throw", "exception", "The", "parameter", "server", "NUMBER", "password", "cannot", "be", "set", "because", "server", "be", "protected", "NUMBER", "Thanks", "And", "make", "them", "much", "more", "readable", "for", "users", "Review", "appreciated", "NUMBER", "So", "the", "phpdoc", "be", "human", "readable", "NUMBER", "That", "s", "the", "whole", "point", "of", "phpdoc", "NUMBER", "Yeh", "i", "think", "the", "long", "one", "be", "way", "better", "NUMBER", "You", "know", "exactly", "what", "it", "be", "NUMBER", "The", "first", "one", "could", "be", "anything", "NUMBER", "Hello", "elfet", "yes", "for", "many", "developers", "it", "makes", "much", "more", "sense", "get", "the", "full", "FQN", "in", "docblocks", "NUMBER", "Sure", "the", "InputDefinition", "example", "that", "you", "gives", "be", "true", "but", "in", "many", "other", "case", "the", "developer", "might", "wonder", "which", "exact", "type", "of", "argument", "the", "function", "be", "use", "NUMBER", "Deployer", "project", "would", "IMO", "greatly", "benefits", "from", "this", "kind", "of", "docblocks", "NUMBER", "Also", "elfet", "Deployer", "be", "growing", "very", "fast", "NUMBER", "No", "one", "can", "really", "predict", "what", "it", "will", "be", "in", "NUMBER", "years", "will", "it", "still", "use", "Symfony", "components", "will", "it", "provide", "a", "system", "of", "plugins", "will", "it", "use", "Interface", "dependency", "injection", "You", "might", "have", "a", "class", "name", "and", "an", "interface", "having", "the", "same", "base", "name", "NUMBER", "In", "this", "situation", "short", "FQN", "would", "become", "completely", "unreadable", "in", "docblocks", "NUMBER", "PhpStorm", "fully", "support", "this", "by", "the", "way", "NUMBER", "As", "I", "said", "phpdoc", "be", "not", "for", "IDEs", "NUMBER", "You", "could", "argue", "IDEs", "should", "run", "static", "code", "analysis", "and", "phpdoc", "isn", "t", "needed", "at", "all", "NUMBER", "I", "vote", "for", "NUMBER", "I", "find", "that", "the", "Symfony", "code", "seems", "to", "use", "FQCNs", "Laravel", "do", "too", "NUMBER", "Well", "vote", "on", "number", "NUMBER", "as", "well", "As", "this", "be", "already", "the", "case", "where", "most", "FQN", "be", "imported", "this", "PR", "skip", "the", "usage", "of", "FQN", "in", "the", "source", "It", "allows", "to", "have", "a", "more", "concise", "code", "NUMBER", "Out", "of", "the", "function", "the", "developer", "has", "no", "clue", "of", "the", "argument", "so", "why", "the", "docblocks", "FQN", "be", "useful", "But", "within", "the", "function", "it", "do", "not", "really", "makes", "sense", "to", "repeat", "many", "times", "the", "same", "namespace", "NUMBER", "Also", "in", "the", "current", "code", "sometimes", "the", "namespace", "be", "imported", "sometimes", "it", "be", "not", "NUMBER", "Importing", "FQN", "in", "code", "provide", "a", "common", "practice", "for", "all", "developer", "who", "wish", "to", "contribute", "to", "the", "project", "NUMBER", "ATM", "they", "don", "t", "have", "any", "clue", "what", "to", "do", "NUMBER", "NUMBER", "BTW", "elfet", "LINK", "discussion_r", "NUMBER", "Some", "framework", "use", "lots", "of", "fixers", "LINK", "_cs", "Some", "less", "it", "s", "really", "up", "to", "you", "Sure", "gordalina", "and", "it", "s", "already", "implement", "LINK", "_cs", "But", "shall", "we", "add", "more", "fixers", "to", "this", "NUMBER", "php_cs", "definition", "file", "isn", "t", "there", "any", "CI", "that", "validates", "a", "PR", "with", "cs", "fixer", "Yeh", "NUMBER", "LINK", "If", "you", "like", "the", "rules", "laravel", "uses", "you", "can", "use", "the", "laravel", "preset", "on", "styleci", "NUMBER", "LINK", "This", "PR", "has", "no", "info", "if", "it", "was", "sent", "before", "StyleCI", "was", "enable", "NUMBER", "I", "think", "open", "closeing", "this", "PR", "will", "trigger", "StyleCI", "to", "run", "NUMBER", "do", "it", "notify", "the", "PR", "that", "its", "valid", "invalid", "Yes", "it", "do", "NUMBER", "It", "uses", "github", "s", "status", "API", "NUMBER", "This", "PR", "has", "no", "info", "if", "it", "was", "sent", "before", "StyleCI", "was", "enable", "NUMBER", "I", "think", "open", "closeing", "this", "PR", "will", "trigger", "StyleCI", "to", "run", "NUMBER", "Can", "anyone", "gordalina", "elfet", "ZeeCoder", "try", "to", "close", "and", "re", "open", "this", "PR", "lucasmichot", "Can", "t", "you", "do", "it", "I", "think", "open", "closeing", "this", "PR", "will", "Looking", "at", "my", "code", "the", "NUMBER", "way", "of", "doing", "it", "be", "just", "to", "push", "to", "this", "PR", "NUMBER", "A", "rebase", "and", "force", "push", "would", "do", "it", "for", "example", "NUMBER", "Rebase", "or", "forced", "push", "Add", "the", "following", "details", "homepage", "support", "Also", "apply", "PSR", "NUMBER", "fix", "to", "bin", "dep", "ZeeCoder", "I", "agree", "NUMBER", "After", "all", "that", "s", "why", "it", "s", "in", "allowed_failures", "section", "NUMBER", "Also", "add", "shell", "syntax", "highlight", "as", "for", "LINK", "So", "that", "we", "can", "use", "LINK", "screen", "shot", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "NUMBER", "LINK", "NUMBER", "e", "NUMBER", "e", "NUMBER", "NUMBER", "f", "NUMBER", "b", "NUMBER", "dbc", "NUMBER", "a", "NUMBER", "a", "NUMBER", "png", "Working", "nice", "with", "it", "GrahamCampbell", "can", "you", "maybe", "add", "a", "link", "to", "it", "Well", "in", "fact", "elfet", "ZeeCoder", "it", "s", "more", "for", "you", "when", "you", "go", "to", "the", "result", "page", "of", "your", "style", "check", "when", "clicking", "on", "the", "logo", "you", "should", "be", "able", "to", "get", "the", "following", "URL", "StyleCI", "LINK", "LINK", "or", "something", "similar", "to", "be", "add", "to", "the", "README", "No", "ZeeCoder", "you", "be", "link", "to", "my", "fork", "not", "the", "original", "repository", "Updated", "reamde", "Added", "an", "editoconfig", "file", "and", "php_cs", "file", "formatted", "code", "very", "few", "code", "change", "mainly", "spaces", "and", "blank", "lines", "NUMBER", "When", "it", "s", "about", "PSR", "GrahamCampbell", "be", "never", "very", "far", "lol", "elfet", "How", "about", "you", "guys", "enable", "StyleCI", "LINK", "on", "this", "repo", "to", "make", "sure", "you", "stay", "PSR", "NUMBER", "compient", "and", "contributors", "get", "notice", "via", "github", "s", "status", "API", "on", "their", "PRs", "if", "they", "re", "not", "following", "the", "code", "style", "guide", "you", "ve", "defined", "NUMBER", "For", "a", "reason", "Travis", "fail", "but", "this", "seems", "relate", "to", "something", "else", "LINK", "ci", "NUMBER", "org", "deployphp", "deployer", "jobs", "NUMBER", "L", "NUMBER", "The", "config", "file", "was", "probably", "miss", "elfet", "See", "LINK", "Thanks", "folks", "This", "will", "be", "cool", "ZeeCoder", "I", "use", "Capifony", "also", "and", "it", "s", "really", "easy", "to", "migrate", "from", "capifony", "to", "deployer", "NUMBER", "gordalina", "i", "think", "you", "don", "t", "need", "special", "docs", "to", "migrate", "from", "capistrano", "because", "deployer", "be", "easier", "than", "it", "ZeeCoder", "Many", "people", "doesn", "t", "have", "experience", "with", "ssh", "public", "key", "ssh", "config", "and", "many", "things", "of", "technical", "especially", "the", "flow", "of", "how", "the", "code", "will", "be", "download", "from", "the", "repository", "and", "why", "i", "have", "an", "error", "when", "i", "try", "to", "download", "the", "repository", "from", "my", "own", "server", "I", "think", "will", "be", "better", "to", "write", "a", "doc", "for", "how", "to", "use", "deployer", "step", "by", "step", "sorry", "for", "my", "bad", "english", "How", "about", "also", "have", "some", "examples", "for", "combining", "builtin", "recipes", "NUMBER", "party", "recipes", "and", "own", "code", "into", "something", "_nice_", "Would", "be", "cool", "to", "have", "something", "like", "_best", "practices_", "or", "_advanced", "sample", "recipes_", "There", "could", "also", "be", "something", "like", "just", "writting", "idea", "Recipe", "XYZ", "NUMBER", "Saples", "use", "this", "recipe", "Deploy", "to", "ToiLet", "recipes", "XYZ", "Common", "Wordpress", "Laravel", "Twig", "Recipes", "Wordpress", "Laravel", "Common", "XYZ", "Local", "build", "remote", "syncing", "Recipes", "XYZ", "Local", "Rsync", "Send", "file", "by", "Pidgeon", "Recipes", "XYZ", "Pidgeon", "Note", "I", "still", "didn", "t", "have", "any", "time", "to", "write", "about", "the", "migration", "process", "because", "I", "m", "work", "on", "an", "API", "draft", "for", "Deployer", "v", "NUMBER", "If", "someone", "would", "like", "to", "tackle", "this", "task", "feel", "free", "to", "do", "so", "NUMBER", "NUMBER", "Coming", "from", "Capifony", "and", "Capistrano", "v", "NUMBER", "I", "m", "doing", "my", "first", "steps", "with", "Deployer", "NUMBER", "I", "tried", "Magallanes", "MagePHP", "in", "between", "NUMBER", "My", "main", "migration", "question", "dealed", "with", "Symfony", "tasks", "like", "sharing", "file", "e", "NUMBER", "b", "NUMBER", "parameters", "NUMBER", "yml", "and", "configure", "in", "interaction", "mode", "once", "use", "parameters", "NUMBER", "yml", "NUMBER", "dist", "and", "automatically", "symlinking", "not", "use", "git", "clone", "on", "remote", "but", "push", "copy", "from", "local", "machine", "to", "remote", "target", "discussed", "in", "LINK", "file", "structure", "Symfony", "v", "NUMBER", "vs", "NUMBER", "v", "NUMBER", "assetic", "Symfony", "v", "NUMBER", "vs", "NUMBER", "v", "NUMBER", "webdevilopers", "i", "m", "a", "symfony", "developer", "and", "i", "just", "confirm", "deployer", "use", "git", "clone", "instead", "local", "copy", "NUMBER", "You", "can", "use", "extra", "param", "vvv", "for", "more", "verbose", "NUMBER", "For", "point", "NUMBER", "we", "can", "use", "of", "LINK", "with", "LINK", "This", "PR", "aims", "to", "be", "a", "solution", "following", "various", "comments", "on", "LINK", "A", "revert", "of", "LINK", "would", "reintroduce", "the", "bug", "previously", "explained", "NUMBER", "The", "following", "PR", "provides", "a", "default", "timezone", "to", "UTC", "that", "can", "be", "overridden", "in", "the", "deployment", "script", "NUMBER", "This", "provides", "thus", "a", "consistency", "between", "release", "name", "on", "different", "servers", "as", "the", "TZ", "on", "this", "server", "might", "all", "be", "different", "NUMBER", "Also", "some", "documentation", "on", "LINK", "would", "be", "necessary", "NUMBER", "I", "think", "use", "local", "time", "should", "be", "default", "and", "this", "PR", "should", "be", "merge", "NUMBER", "But", "we", "have", "to", "add", "docs", "for", "it", "NUMBER", "I", "think", "use", "local", "time", "should", "be", "default", "and", "this", "PR", "should", "be", "merge", "NUMBER", "But", "we", "have", "to", "add", "docs", "for", "it", "NUMBER", "oanhnn", "use", "the", "default", "timezone", "would", "lead", "to", "LINK", "issue", "NUMBER", "It", "necessary", "has", "to", "be", "a", "fix", "timezone", "that", "all", "deployment", "machines", "use", "lucasmichot", "Yes", "NUMBER", "i", "understand", "it", "NUMBER", "I", "mean", "set", "default", "timezone", "on", "deploy", "NUMBER", "php", "file", "and", "use", "date", "function", "from", "deployment", "PC", "not", "deployment", "server", "NUMBER", "oanhnn", "Isn", "t", "that", "exactly", "what", "this", "PR", "do", "only", "default", "timezone", "be", "set", "via", "env", "not", "via", "direct", "php", "function", "in", "deploy", "NUMBER", "php", "however", "IMO", "timezone", "shouldn", "t", "be", "in", "env", "rather", "it", "should", "be", "in", "settings", "after", "all", "we", "want", "to", "have", "ONE", "timezone", "across", "all", "not", "per", "environmant", "timezone", "right", "I", "think", "this", "be", "solution", "for", "now", "NUMBER", "But", "we", "want", "to", "be", "this", "be", "common", "settings", "which", "now", "can", "not", "be", "implement", "and", "will", "be", "implement", "in", "Deployer", "v", "NUMBER", "Merged", "NUMBER", "use", "function", "can", "be", "use", "on", "PHP", "NUMBER", "or", "lator", "NUMBER", "NUMBER", "NUMBER", "The", "global", "nature", "of", "deployer", "function", "clashes", "also", "with", "hamcrest", "php", "NUMBER", "I", "get", "the", "following", "error", "PHP", "Fatal", "error", "Cannot", "redeclare", "set", "previously", "declared", "in", "vendor", "hamcrest", "hamcrest", "php", "hamcrest", "Hamcrest", "NUMBER", "php", "NUMBER", "in", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "on", "line", "NUMBER", "Definitely", "NUMBER", "for", "use", "a", "namespace", "in", "function", "NUMBER", "php", "Same", "here", "on", "symfony", "NUMBER", "project", "Need", "this", "as", "fast", "as", "possible", "for", "Symfony", "NUMBER", "Symfony", "NUMBER", "I", "think", "we", "need", "NUMBER", "to", "complete", "this", "issue", "NUMBER", "I", "have", "to", "write", "weird", "piece", "NUMBER", "Usually", "that", "would", "be", "NUMBER", "separate", "commands", "but", "it", "would", "be", "great", "to", "be", "able", "to", "do", "in", "one", "NUMBER", "Connect", "to", "server", "NUMBER", "issue", "command", "to", "create", "file", "on", "server", "NUMBER", "NUMBER", "Dowload", "file", "locally", "or", "upload", "to", "server", "NUMBER", "directly", "if", "possible", "then", "skip", "to", "point", "NUMBER", "NUMBER", "Connect", "upload", "file", "downloaded", "to", "server", "NUMBER", "NUMBER", "Issue", "command", "on", "server", "NUMBER", "to", "accept", "file", "Reason", "for", "this", "when", "developing", "long", "run", "wordpress", "site", "for", "example", "it", "s", "great", "to", "have", "production", "database", "on", "staging", "and", "vice", "versa", "have", "change", "applied", "on", "staging", "work", "on", "production", "witout", "lengtly", "introduce", "them", "NUMBER", "Any", "suggestions", "for", "that", "johnny", "bit", "Are", "you", "haven", "t", "any", "other", "question", "about", "elfet", "s", "suggestion", "I", "be", "closing", "thing", "issue", "but", "feel", "free", "to", "reopen", "if", "you", "think", "there", "needs", "to", "be", "more", "discussion", "NUMBER", "So", "NUMBER", "LOCK", "file", "be", "basically", "saying", "we", "re", "in", "process", "of", "deploying", "here", "I", "quite", "get", "the", "concept", "for", "release", "symlink", "rollback", "rolling", "to", "last", "complete", "release", "however", "I", "don", "t", "get", "cleanup", "NUMBER", "If", "release", "acted", "like", "You", "said", "then", "cleanup", "would", "have", "to", "be", "run", "twice", "once", "befor", "release", "and", "once", "normally", "NUMBER", "maybe", "it", "would", "be", "better", "to", "add", "tasks", "like", "semaphores", "acquire_lock", "and", "release_lock", "Is", "it", "necessary", "to", "have", "it", "on", "a", "per", "release", "basis", "For", "my", "projects", "I", "use", "these", "tasks", "and", "it", "works", "good", "php", "env", "lock_path", "deploy_path", "deploy", "NUMBER", "lock", "task", "deploy", "lock", "function", "res", "run", "f", "lock_path", "echo", "Locked", "echo", "OK", "if", "trim", "res", "Locked", "throw", "new", "RuntimeException", "Deployement", "be", "locked", "NUMBER", "run", "touch", "lock_path", "task", "deploy", "unlock", "function", "res", "run", "f", "lock_path", "echo", "Locked", "echo", "OK", "if", "trim", "res", "Locked", "run", "rm", "lock_path", "after", "deploy", "prepare", "deploy", "lock", "after", "deploy", "symlink", "deploy", "unlock", "Config", "deploy", "NUMBER", "php", "shell", "require", "vendor", "deployer", "deployer", "recipe", "yii", "NUMBER", "php", "set", "ssh_type", "ext", "ssh", "NUMBER", "set", "repository", "git", "github", "NUMBER", "com", "oanhnn", "deployer", "example", "NUMBER", "git", "Define", "a", "server", "for", "deployment", "NUMBER", "Let", "s", "name", "it", "prod", "and", "use", "port", "NUMBER", "server", "test", "localhost", "user", "andreybolonin", "password", "xyz", "stage", "prod", "env", "deploy_path", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "Console", "output", "shell", "andreybolonin", "andreybolonin", "MS", "NUMBER", "www", "cporder", "NUMBER", "NUMBER", "vendor", "bin", "dep", "deploy", "prod", "vvv", "Executing", "task", "deploy", "prepare", "on", "test", "Run", "echo", "NUMBER", "bash", "Run", "if", "d", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "then", "echo", "fi", "Run", "cd", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "if", "d", "release", "then", "mkdir", "release", "fi", "Run", "cd", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "test", "Ok", "Executing", "task", "deploy", "release", "on", "test", "Run", "date", "Y", "m", "d", "H", "M", "S", "NUMBER", "Run", "mkdir", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "release", "NUMBER", "Run", "cd", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "if", "h", "release", "then", "rm", "release", "fi", "Run", "ln", "s", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "release", "NUMBER", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "release", "do", "on", "test", "Ok", "Executing", "task", "deploy", "update_code", "on", "test", "Run", "readlink", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "release", "PHP", "RuntimeException", "in", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Stack", "trace", "PHP", "NUMBER", "main", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "PHP", "NUMBER", "Deployer", "Deployer", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Task", "Task", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "call_user_func", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "closure", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Environment", "parse", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "preg_replace_callback", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Environment", "parseCallback", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Environment", "get", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "call_user_func", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "closure", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Ssh", "Exec", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "RuntimeException", "in", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "on", "line", "NUMBER", "Call", "Stack", "NUMBER", "NUMBER", "NUMBER", "main", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Deployer", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Task", "Task", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "call_user_func", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "closure", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Server", "Environment", "parse", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "preg_replace_callback", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Server", "Environment", "parseCallback", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Server", "Environment", "get", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "call_user_func", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "closure", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Ssh", "Exec", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "RuntimeException", "Exception", "trace", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "run", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "run", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Environment", "get", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Environment", "parseCallback", "at", "n", "a", "n", "a", "preg_replace_callback", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Environment", "parse", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "deploy", "p", "parallel", "Note", "I", "debug", "with", "xdebug", "and", "find", "that", "release_path", "in", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "be", "Closure", "NUMBER", "release_path", "env", "release_path", "LINK", "L", "NUMBER", "Config", "shell", "All", "Deployer", "recipes", "be", "based", "on", "recipe", "common", "NUMBER", "php", "NUMBER", "require", "vendor", "deployer", "deployer", "recipe", "yii", "NUMBER", "php", "set", "ssh_type", "ext", "ssh", "NUMBER", "set", "repository", "git", "github", "NUMBER", "com", "symfony", "symfony", "NUMBER", "git", "task", "deploy", "start", "function", "cd", "run", "if", "d", "deploy_path", "then", "mkdir", "p", "deploy_path", "fi", "cd", "deploy_path", "setPrivate", "before", "test", "test", "deploy", "release", "Define", "a", "server", "for", "deployment", "NUMBER", "Let", "s", "name", "it", "prod", "and", "use", "port", "NUMBER", "server", "test", "localhost", "user", "andreybolonin", "password", "xyz", "identityFile", "home", "andreybolonin", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "home", "andreybolonin", "NUMBER", "ssh", "id_rsa", "configFile", "home", "andreybolonin", "NUMBER", "ssh", "config", "password", "forwardAgent", "You", "can", "use", "identity", "key", "ssh", "config", "or", "username", "password", "to", "auth", "on", "the", "server", "NUMBER", "stage", "prod", "env", "deploy_path", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "env", "release_path", "home", "andreybolonin", "cporder", "NUMBER", "NUMBER", "release", "Output", "shell", "andreybolonin", "andreybolonin", "MS", "NUMBER", "www", "cporder", "NUMBER", "NUMBER", "vendor", "bin", "dep", "deploy", "test", "Executing", "task", "deploy", "prepare", "Executing", "task", "deploy", "release", "Executing", "task", "deploy", "update_code", "PHP", "RuntimeException", "Permission", "denied", "publickey", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "in", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Stack", "trace", "PHP", "NUMBER", "main", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "PHP", "NUMBER", "Deployer", "Deployer", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Task", "Task", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "call_user_func", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "closure", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "RuntimeException", "Permission", "denied", "publickey", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "in", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "on", "line", "NUMBER", "Call", "Stack", "NUMBER", "NUMBER", "NUMBER", "main", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Deployer", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "symfony", "console", "Command", "Command", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Task", "Task", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "call_user_func", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "closure", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "home", "andreybolonin", "www", "cporder", "NUMBER", "NUMBER", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "RuntimeException", "Permission", "denied", "publickey", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "The", "same", "problem", "be", "LINK", "When", "installing", "deployer", "use", "composer", "I", "get", "Package", "guzzle", "parser", "be", "abandoned", "you", "should", "avoid", "use", "it", "NUMBER", "Use", "guzzle", "guzzle", "instead", "NUMBER", "See", "LINK", "issuecomment", "NUMBER", "So", "NUMBER", "Deployer", "depends", "on", "elfet", "pure", "which", "in", "turns", "depends", "on", "react", "react", "which", "in", "turn", "depends", "on", "react", "http", "client", "which", "in", "turn", "depends", "on", "guzzle", "parser", "NUMBER", "Fun", "NUMBER", "Would", "like", "to", "build", "up", "the", "web", "feature", "NUMBER", "How", "do", "i", "Start", "How", "to", "go", "about", "This", "will", "be", "really", "cool", "Please", "use", "ES", "NUMBER", "babel", "webpack", "and", "monkberry", "NUMBER", "Can", "I", "ask", "do", "this", "mean", "Deployer", "do", "not", "work", "with", "SSH", "public", "keys", "by", "default", "e", "NUMBER", "g", "NUMBER", "use", "a", "public", "key", "to", "login", "via", "SSH", "with", "the", "identityFile", "method", "If", "so", "that", "be", "not", "clear", "from", "the", "documentation", "but", "certainly", "doesn", "t", "appear", "to", "work", "when", "I", "try", "NUMBER", "If", "this", "be", "the", "case", "can", "I", "suggest", "some", "change", "to", "the", "docs", "at", "LINK", "Just", "to", "confirm", "be", "use", "a", "public", "key", "to", "login", "via", "SSH", "not", "support", "in", "Deployer", "without", "the", "ssh", "NUMBER", "extension", "It", "s", "still", "not", "clear", "to", "me", "OK", "NUMBER", "it", "s", "not", "clear", "from", "your", "replies", "whether", "Deployer", "support", "public", "key", "login", "to", "servers", "without", "installing", "the", "ssh", "NUMBER", "extension", "If", "it", "can", "looks", "like", "I", "m", "doing", "something", "wrong", "since", "I", "can", "t", "get", "it", "work", "I", "do", "not", "have", "ssh", "NUMBER", "install", "locally", "NUMBER", "Ooh", "I", "can", "do", "that", "I", "did", "for", "my", "local_common", "may", "I", "PR", "this", "And", "can", "I", "use", "git_cache", "env", "for", "that", "Hmmm", "NUMBER", "That", "_is_", "good", "idea", "NUMBER", "however", "there", "_are_", "some", "drawbacks", "to", "it", "NUMBER", "But", "OK", "will", "add", "that", "to", "my", "local_common", "for", "check", "and", "then", "will", "pr", "common", "PR", "NUMBER", "fix", "this", "So", "NUMBER", "NUMBER", "landed", "then", "this", "issue", "can", "be", "close", "yes", "Pimple", "NUMBER", "In", "pimple", "we", "can", "not", "use", "parameters", "bag", "and", "can", "not", "make", "protected", "services", "parameters", "NUMBER", "NUMBER", "for", "pimple", "also", "NUMBER", "Take", "a", "look", "at", "Cilex", "LINK", "if", "you", "like", "to", "see", "how", "pimple", "be", "combined", "well", "with", "Symfony", "console", "application", "NUMBER", "I", "already", "use", "some", "DIC", "for", "CLI", "projects", "from", "my", "experience", "Symfony", "DI", "LINK", "_injection", "introduction", "NUMBER", "html", "NUMBER", "Pimple", "LINK", "NUMBER", "Comparison", "Performance", "LINK", "dependency", "injection", "container", "performance", "benchmarks", "DI", "container", "usage", "comparison", "LINK", "Pimple", "be", "faster", "I", "m", "not", "sure", "be", "critical", "issue", "here", "but", "functionality", "be", "limited", "NUMBER", "On", "Sf", "DI", "we", "can", "use", "YML", "config", "file", "to", "manage", "DI", "and", "this", "should", "really", "useful", "on", "app", "maintenance", "and", "improvement", "NUMBER", "mavimo", "The", "performance", "article", "you", "link", "to", "isn", "t", "much", "use", "as", "Tom", "didn", "t", "actually", "review", "pimple", "as", "didn", "t", "realise", "you", "could", "use", "it", "as", "a", "DIC", "NUMBER", "He", "thought", "every", "instance", "it", "returned", "was", "the", "same", "which", "for", "V", "NUMBER", "x", "be", "completely", "incorrect", "NUMBER", "For", "V", "NUMBER", "x", "whilst", "that", "s", "what", "it", "do", "by", "default", "you", "can", "configure", "it", "to", "return", "you", "a", "new", "instance", "of", "your", "service", "each", "time", "you", "get", "it", "from", "the", "container", "NUMBER", "If", "YML", "be", "important", "then", "there", "be", "a", "library", "for", "configuring", "Pimple", "with", "YML", "LINK", "Why", "not", "PHP", "DI", "LINK", "di", "NUMBER", "org", "Why", "NUMBER", "\u043c\u0430\u0440\u0442\u0430", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "Denis", "Terekhov", "notifications", "github", "NUMBER", "com", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "Why", "not", "PHP", "DI", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "I", "find", "some", "small", "grammatical", "error", "so", "I", "thought", "I", "could", "help", "out", "with", "a", "patch", "NUMBER", "Fantastic", "tool", "by", "the", "way", "very", "helpful", "NUMBER", "Hi", "I", "m", "seeing", "this", "issue", "when", "trying", "to", "install", "Deployer", "via", "Composer", "bash", "composer", "require", "deployer", "deployer", "NUMBER", "NUMBER", "composer", "NUMBER", "json", "has", "be", "update", "Loading", "composer", "repositories", "with", "package", "information", "Updating", "dependencies", "including", "require", "dev", "RuntimeException", "Could", "not", "load", "package", "deployer", "deployer", "in", "LINK", "UnexpectedValueException", "Could", "not", "parse", "version", "constraint", "NUMBER", "Invalid", "version", "string", "NUMBER", "UnexpectedValueException", "Could", "not", "parse", "version", "constraint", "NUMBER", "Invalid", "version", "string", "NUMBER", "require", "dev", "prefer", "source", "prefer", "dist", "no", "progress", "no", "update", "update", "no", "dev", "update", "with", "dependencies", "ignore", "platform", "reqs", "package", "NUMBER", "NUMBER", "packagesN", "I", "install", "Composer", "NUMBER", "alpha", "NUMBER", "from", "Homebrew", "on", "OS", "X", "Yosemite", "NUMBER", "Do", "you", "have", "any", "idea", "what", "the", "problem", "could", "be", "Thanks", "Great", "thanks", "I", "ll", "do", "that", "NUMBER", "Ryan", "Conway", "sent", "from", "my", "phone", "On", "NUMBER", "Jun", "NUMBER", "at", "NUMBER", "NUMBER", "pm", "Hubert", "Viktor", "notifications", "github", "NUMBER", "com", "write", "Try", "the", "NUMBER", "alpha", "NUMBER", "version", "NUMBER", "It", "seems", "the", "get", "support", "there", "LINK", "alpha", "NUMBER", "Added", "support", "for", "npm", "style", "semver", "operators", "and", "ranges", "space", "AND", "OR", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "There", "be", "an", "issue", "with", "the", "release", "date", "it", "s", "based", "on", "the", "client", "date", "NUMBER", "It", "should", "be", "based", "on", "the", "server", "date", "NUMBER", "How", "to", "reproduce", "set", "your", "script", "to", "keep", "NUMBER", "release", "set", "your", "server", "on", "UTC", "deploy", "twice", "from", "CircleCI", "UTC", "deploy", "once", "from", "a", "Europe", "Berlin", "machine", "or", "any", "other", "timezone", "as", "long", "as", "you", "more", "than", "NUMBER", "hour", "offset", "with", "UTC", "Releases", "NUMBER", "CircleCI", "NUMBER", "deployment", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "CircleCI", "NUMBER", "deployment", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployment", "from", "my", "machine", "at", "NUMBER", "NUMBER", "NUMBER", "The", "symlink", "task", "will", "symlink", "the", "latest", "release", "NUMBER", "NUMBER", "The", "cleanup", "will", "then", "remove", "the", "oldest", "release", "NUMBER", "too", "NUMBER", "Only", "outdate", "release", "will", "remain", "on", "the", "server", "NUMBER", "and", "NUMBER", "Using", "the", "server", "date", "ensures", "this", "situation", "do", "not", "happen", "NUMBER", "Dear", "lucasmichot", "elfet", "I", "don", "t", "think", "this", "solution", "be", "best", "when", "deploy", "to", "multi", "server", "with", "different", "timezone", "and", "pa", "I", "think", "we", "should", "set", "default", "timezone", "on", "top", "of", "deploy", "NUMBER", "php", "file", "NUMBER", "php", "file", "deploy", "NUMBER", "php", "date_default_timezone_set", "UTC", "oanhnn", "be", "right", "NUMBER", "If", "basing", "release", "date", "on", "server", "timezone", "and", "deploying", "for", "example", "on", "multiple", "servers", "across", "the", "world", "You", "could", "end", "up", "with", "messy", "situation", "when", "trying", "to", "get", "proper", "release", "date", "NUMBER", "So", "IMO", "as", "oanhnn", "said", "best", "bet", "would", "be", "to", "set", "timezone", "to", "fix", "UTC", "and", "document", "that", "we", "re", "use", "UTC", "for", "deploy", "date", "NUMBER", "oanhnn", "date_default_timezone_set", "UTC", "was", "my", "workaround", "before", "fix", "this", "bug", "NUMBER", "johnny", "bit", "forcing", "UTC", "would", "be", "a", "good", "idea", "and", "would", "be", "consistant", "but", "do", "we", "want", "to", "force", "that", "elfet", "We", "don", "t", "have", "to", "force", "any", "timezone", "NUMBER", "It", "be", "okay", "users", "set", "timezone", "they", "want", "in", "deploy", "NUMBER", "php", "NUMBER", "Well", "that", "s", "OK", "actually", "NUMBER", "However", "after", "a", "NUMBER", "a", "NUMBER", "f", "release", "date", "be", "based", "on", "server", "time", "NUMBER", "I", "ve", "notice", "when", "developing", "my", "shared", "hosting", "workflow", "recipe", "that", "this", "can", "cause", "minor", "issue", "My", "system", "be", "CEST", "while", "my", "test", "server", "be", "UTC", "so", "release", "dates", "on", "both", "differ", "by", "NUMBER", "h", "NUMBER", "So", "NUMBER", "elfet", "how", "about", "revert", "lucasmichot", "and", "go", "the", "route", "kenjis", "suggest", "but", "document", "it", "better", "Something", "like", "Names", "of", "Release", "directories", "be", "based", "on", "date", "NUMBER", "We", "thus", "encourage", "to", "use", "UTC", "timezone", "if", "You", "re", "deplouing", "in", "multiple", "timezones", "by", "settfig", "timezone", "in", "Your", "deploy", "NUMBER", "php", "file", "elfet", "I", "m", "also", "voting", "for", "revert", "a", "NUMBER", "a", "NUMBER", "f", "NUMBER", "bf", "NUMBER", "ad", "NUMBER", "b", "NUMBER", "b", "NUMBER", "c", "NUMBER", "dfe", "NUMBER", "a", "NUMBER", "b", "NUMBER", "bf", "better", "docs", "and", "freedom", "to", "set", "timezone", "myself", "NUMBER", "NUMBER", "No", "gordalina", "it", "wont", "fail", "with", "a", "common", "timezone", "Hi", "today", "I", "tried", "use", "deployer", "with", "ssh", "NUMBER", "php", "extension", "and", "find", "two", "things", "NUMBER", "documentation", "be", "wrong", "This", "can", "only", "be", "use", "with", "the", "ssh", "NUMBER", "pecl", "extension", "NUMBER", "Switch", "to", "ext", "ssh", "NUMBER", "set", "use_ssh", "NUMBER", "true", "It", "should", "be", "set", "ssh_type", "ext", "ssh", "NUMBER", "NUMBER", "it", "do", "not", "work", "I", "m", "use", "Linux", "Mint", "NUMBER", "I", "had", "aleready", "install", "ssh", "NUMBER", "so", "in", "package", "libssh", "NUMBER", "php", "usr", "lib", "php", "NUMBER", "NUMBER", "ssh", "NUMBER", "so", "there", "be", "extension", "ssh", "NUMBER", "so", "in", "etc", "php", "NUMBER", "mods", "available", "ssh", "NUMBER", "ini", "php", "m", "shows", "ssh", "NUMBER", "I", "tried", "installing", "ssh", "NUMBER", "use", "pecl", "sudo", "pear", "install", "channel", "pecl", "NUMBER", "php", "NUMBER", "net", "ssh", "NUMBER", "NUMBER", "it", "was", "successfull", "and", "ssh", "NUMBER", "so", "file", "was", "update", "I", "get", "error", "when", "use", "set", "ssh_type", "ext", "ssh", "NUMBER", "Executing", "task", "deploy", "lock_project", "PHP", "Fatal", "error", "Class", "Ssh", "Configuration", "not", "find", "in", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Stack", "trace", "PHP", "NUMBER", "main", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "NUMBER", "PHP", "NUMBER", "require", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "NUMBER", "PHP", "NUMBER", "Deployer", "Deployer", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Deployer", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Task", "Task", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "call_user_func", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "closure", "home", "piotrek", "Vhosts", "deployer", "tasks", "NUMBER", "php", "NUMBER", "NUMBER", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "run", "home", "piotrek", "Vhosts", "deployer", "tasks", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "checkConnection", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "connect", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "Am", "I", "doing", "something", "wrong", "Should", "I", "Install", "some", "extension", "other", "than", "pecl", "ssh", "NUMBER", "Is", "it", "some", "kind", "of", "old", "code", "which", "was", "maybe", "valid", "some", "time", "ago", "and", "not", "now", "Hi", "I", "can", "create", "PR", "but", "what", "if", "this", "functionality", "doesn", "t", "work", "Should", "it", "be", "in", "docs", "Hello", "NUMBER", "PR", "also", "created", "LINK", "I", "try", "to", "connect", "via", "ssh", "config", "NUMBER", "Ssh", "config", "write", "with", "ProxyCommand", "ssh", "node", "NUMBER", "W", "h", "p", "commands", "NUMBER", "And", "all", "of", "proxy", "connections", "equal", "NUMBER", "And", "after", "NUMBER", "proxy", "connect", "i", "have", "this", "error", "Shell", "on", "your", "server", "be", "not", "POSIX", "compliant", "NUMBER", "Please", "change", "to", "sh", "bash", "or", "similar", "NUMBER", "Usually", "you", "can", "change", "your", "shell", "to", "bash", "by", "run", "chsh", "s", "bin", "bash", "What", "be", "it", "elfet", "how", "should", "I", "inlclude", "herzult", "php", "ssh", "I", "tried", "composer", "require", "herzult", "php", "ssh", "Using", "version", "NUMBER", "for", "herzult", "php", "ssh", "NUMBER", "composer", "NUMBER", "json", "has", "be", "update", "Loading", "composer", "repositories", "with", "package", "information", "Updating", "dependencies", "including", "require", "dev", "Installing", "herzult", "php", "ssh", "v", "NUMBER", "Downloading", "NUMBER", "Writing", "lock", "file", "Generating", "autoload", "file", "Inside", "deployer", "NUMBER", "php", "php", "All", "Deployer", "recipes", "be", "based", "on", "recipe", "common", "NUMBER", "php", "NUMBER", "require", "recipe", "symfony", "NUMBER", "php", "require", "tasks", "NUMBER", "php", "require", "vendor", "autoload", "NUMBER", "php", "set", "ssh_type", "ext", "ssh", "NUMBER", "NUMBER", "And", "I", "still", "get", "php", "deployer", "NUMBER", "phar", "deploy", "dev", "open", "Executing", "task", "deploy", "lock_project", "PHP", "Fatal", "error", "Class", "Ssh", "Configuration", "not", "find", "in", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Stack", "trace", "PHP", "NUMBER", "main", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "NUMBER", "PHP", "NUMBER", "require", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "NUMBER", "PHP", "NUMBER", "Deployer", "Deployer", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Deployer", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Task", "Task", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "call_user_func", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "closure", "home", "piotrek", "Vhosts", "deployer", "tasks", "NUMBER", "php", "NUMBER", "NUMBER", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "run", "home", "piotrek", "Vhosts", "deployer", "tasks", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "run", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "checkConnection", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "Deployer", "Server", "Remote", "SshExtension", "connect", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "NUMBER", "pilotftzi", "You", "probably", "have", "some", "non", "POSIX", "compliant", "shell", "or", "it", "can", "t", "be", "detected", "NUMBER", "Can", "you", "log", "in", "to", "server", "use", "ssh", "and", "write", "what", "this", "command", "shows", "echo", "SHELL", "Ok", "it", "seems", "to", "work", "when", "I", "m", "use", "composer", "NUMBER", "json", "to", "install", "deployer", "NUMBER", "I", "ll", "make", "PR", "with", "instructions", "how", "to", "use", "ext", "ssh", "NUMBER", "NUMBER", "Btw", "NUMBER", "there", "be", "warning", "when", "installing", "deployer", "use", "composer", "Package", "guzzle", "parser", "be", "abandoned", "you", "should", "avoid", "use", "it", "NUMBER", "Use", "guzzle", "guzzle", "instead", "NUMBER", "This", "be", "currently", "a", "big", "problem", "for", "me", "NUMBER", "Since", "I", "m", "use", "Laravel", "I", "can", "t", "use", "composer", "NUMBER", "and", "since", "I", "need", "to", "use", "ext", "ssh", "NUMBER", "I", "can", "t", "use", "deployer", "NUMBER", "phar", "NUMBER", "phaza", "Can", "t", "you", "use", "deployer", "independently", "of", "your", "project", "I", "m", "currently", "use", "composer", "from", "my", "local", "laptop", "to", "install", "new", "version", "on", "servers", "I", "have", "it", "in", "independent", "git", "repo", "NUMBER", "If", "you", "must", "install", "deployer", "on", "server", "why", "not", "install", "it", "in", "your", "home", "directory", "or", "some", "other", "directory", "with", "write", "access", "NUMBER", "Mingling", "it", "with", "actual", "project", "code", "be", "not", "a", "good", "thing", "in", "my", "opinion", "NUMBER", "You", "should", "be", "able", "to", "update", "deploy", "tool", "without", "update", "project", "code", "NUMBER", "Why", "not", "create", "git", "repository", "just", "for", "deployer", "so", "any", "project", "developer", "could", "get", "it", "and", "use", "it", "wherever", "he", "wants", "I", "don", "t", "install", "deployer", "on", "the", "server", "NUMBER", "I", "tried", "to", "add", "it", "as", "a", "development", "requirement", "NUMBER", "IMO", "that", "makes", "sense", "since", "the", "deploy", "recipe", "be", "part", "of", "the", "project", "too", "NUMBER", "Anyway", "I", "made", "my", "own", "deployer", "NUMBER", "phar", "with", "the", "necessary", "package", "include", "in", "vendor", "NUMBER", "On", "Tue", "NUMBER", "Jun", "NUMBER", "at", "NUMBER", "NUMBER", "piotrekkr", "notifications", "github", "NUMBER", "com", "write", "phaza", "LINK", "Can", "t", "you", "use", "deployer", "independently", "of", "your", "project", "I", "m", "currently", "use", "composer", "from", "my", "local", "laptop", "to", "install", "new", "version", "on", "servers", "I", "have", "it", "in", "independent", "git", "repo", "NUMBER", "If", "you", "must", "install", "deployer", "on", "server", "why", "not", "install", "it", "in", "your", "home", "directory", "or", "some", "other", "directory", "with", "write", "access", "NUMBER", "Mingling", "it", "with", "actual", "project", "code", "be", "not", "a", "good", "thing", "in", "my", "opinion", "NUMBER", "You", "should", "be", "able", "to", "update", "deploy", "tool", "without", "update", "project", "code", "NUMBER", "Why", "not", "create", "git", "repository", "just", "for", "deployer", "so", "any", "project", "developer", "could", "get", "it", "and", "use", "it", "wherever", "he", "wants", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Yes", "for", "correct", "control", "in", "informer", "system", "NUMBER", "As", "example", "In", "my", "deploy", "system", "i", "rewrite", "informer", "for", "run", "any", "logic", "after", "fail", "tasks", "NUMBER", "And", "if", "i", "have", "a", "two", "task", "with", "name", "some_foo", "i", "can", "control", "runs", "with", "this", "identifier", "NUMBER", "Add", "Writable", "Files", "and", "Add", "Chown", "on", "Writable", "Dirs", "Task", "to", "support", "vps", "based", "server", "that", "do", "not", "have", "acl", "elfet", "I", "edit", "the", "code", "directly", "from", "github", "editor", "so", "i", "don", "t", "test", "anything", "NUMBER", "Just", "make", "no", "error", "from", "travis", "I", "be", "use", "deployer", "with", "Slim", "framework", "and", "CakePHP", "framework", "NUMBER", "When", "project", "run", "log", "file", "and", "cache", "file", "be", "created", "by", "www", "data", "but", "onwer", "of", "directory", "logs", "tmp", "or", "cache", "be", "deploy", "user", "NUMBER", "I", "was", "comment", "in", "NUMBER", "and", "i", "don", "t", "agree", "with", "this", "PR", "NUMBER", "I", "think", "deployer", "will", "support", "flow", "of", "framework", "and", "user", "can", "custom", "original", "recipe", "for", "special", "project", "or", "them", "NUMBER", "oanhnn", "This", "be", "a", "common", "task", "not", "a", "specific", "framework", "purpose", "NUMBER", "I", "just", "improve", "the", "behavior", "to", "dealing", "with", "vps", "that", "have", "not", "and", "can", "not", "set", "an", "acl", "I", "think", "this", "PR", "need", "to", "be", "separated", "NUMBER", "ihsanudin", "can", "you", "do", "it", "elfet", "moved", "NUMBER", "This", "pull", "request", "close", "NUMBER", "Hi", "Today", "I", "tried", "execute", "same", "task", "deploy", "permissions", "fix", "two", "times", "like", "task", "deploy", "deploy", "prepare", "NUMBER", "deploy", "permissions", "fix", "NUMBER", "database", "migrate", "deploy", "permissions", "fix", "NUMBER", "desc", "Deploy", "your", "project", "But", "deploy", "permissions", "fix", "was", "run", "only", "once", "NUMBER", "Is", "this", "intentional", "If", "no", "could", "you", "change", "your", "code", "in", "Deployer", "Console", "TaskCommand", "execute", "to", "tasks", "foreach", "this", "deployer", "scenarios", "get", "this", "getName", "getTasks", "as", "taskName", "tasks", "this", "deployer", "tasks", "get", "taskName", "Thank", "you", "I", "will", "correct", "NUMBER", "So", "fix", "NUMBER", "BUT", "The", "task", "in", "runtime", "have", "a", "unique", "identifier", "for", "control", "many", "task", "with", "one", "name", "in", "group", "and", "execution", "context", "NUMBER", "The", "identifier", "create", "before", "run", "task", "for", "each", "task", "uniqueid", "NUMBER", "And", "in", "Output", "we", "can", "see", "this", "identifier", "NUMBER", "As", "example", "bash", "NUMBER", "bin", "dep", "foo", "production", "Executing", "task", "some", "NUMBER", "ddfd", "NUMBER", "e", "Executing", "task", "some_", "NUMBER", "NUMBER", "de", "NUMBER", "e", "Executing", "task", "some", "NUMBER", "de", "NUMBER", "c", "The", "NUMBER", "ddfd", "NUMBER", "e", "NUMBER", "de", "NUMBER", "e", "and", "NUMBER", "de", "NUMBER", "c", "be", "a", "identifiers", "of", "task", "NUMBER", "And", "for", "control", "this", "identifiers", "in", "parallel", "executor", "i", "add", "storage", "tasks_to_do_info", "to", "pure", "NUMBER", "And", "send", "the", "task", "info", "id", "and", "name", "previously", "only", "send", "task", "name", "NUMBER", "I", "test", "on", "series", "executor", "and", "parallel", "executor", "NUMBER", "All", "ok", "NUMBER", "any", "news", "about", "this", "issue", "Hi", "I", "m", "still", "don", "see", "any", "purpose", "for", "this", "NUMBER", "But", "you", "can", "always", "override", "tasks", "NUMBER", "And", "create", "your", "own", "common", "recipe", "with", "this", "sudo", "stuff", "and", "push", "it", "to", "GitHub", "to", "other", "can", "use", "it", "NUMBER", "I", "think", "we", "need", "keep", "common", "NUMBER", "php", "recipe", "simple", "ass", "possible", "NUMBER", "And", "this", "be", "complicate", "it", "NUMBER", "NUMBER", "When", "lost", "connection", "during", "deploy", "and", "i", "repeat", "deploy", "routine", "then", "the", "following", "error", "occur", "sh", "rm", "cannot", "remove", "usr", "share", "nginx", "html", "yii", "NUMBER", "comercial", "release", "NUMBER", "NUMBER", "web", "assets", "NUMBER", "e", "NUMBER", "fe", "addon", "fold", "markdown", "fold", "NUMBER", "js", "Permission", "denied", "rm", "cannot", "remove", "usr", "share", "nginx", "html", "yii", "NUMBER", "comercial", "release", "NUMBER", "NUMBER", "web", "assets", "NUMBER", "e", "NUMBER", "fe", "addon", "fold", "brace", "fold", "NUMBER", "js", "Permission", "denied", "NUMBER", "i", "think", "necessary", "to", "create", "the", "param", "set", "cleanup_use_sudo", "true", "i", "can", "make", "this", "PR", "NUMBER", "My", "server", "be", "Debian", "GNU", "Linux", "NUMBER", "jessie", "and", "my", "deploy", "script", "be", "php", "require", "recipe", "composer", "NUMBER", "php", "set", "repository", "git", "github", "NUMBER", "com", "mycompany", "yii", "NUMBER", "myrepos", "NUMBER", "git", "server", "main", "myserver", "NUMBER", "com", "NUMBER", "br", "env", "deploy_path", "usr", "share", "nginx", "html", "yii", "NUMBER", "myrepos", "env", "branch", "NUMBER", "x", "stage", "prod", "user", "admin", "pemFile", "NUMBER", "ssh", "key", "NUMBER", "pem", "This", "occur", "when", "rm", "command", "do", "not", "was", "executed", "completely", "on", "cleanup", "task", "NUMBER", "If", "use", "sudo", "the", "problem", "be", "solve", "Use", "sudo", "for", "this", "operation", "be", "risky", "You", "should", "correct", "configure", "permissions", "on", "you", "server", "NUMBER", "ZhukV", "The", "permissions", "be", "right", "how", "i", "said", "this", "occurrs", "when", "rm", "command", "fail", "Imho", "The", "error", "Permission", "denied", "indicate", "of", "fail", "access", "NUMBER", "I", "believe", "there", "be", "no", "permission", "bigger", "than", "chmod", "NUMBER", "and", "i", "use", "this", "for", "test", "how", "i", "said", "if", "occur", "ONLY", "rm", "command", "fail", "and", "i", "try", "to", "repeat", "deploy", "routine", "NUMBER", "Who", "creates", "release", "folder", "be", "the", "same", "user", "then", "Why", "this", "user", "desn", "t", "have", "permission", "I", "find", "the", "problem", "NUMBER", "Who", "creates", "the", "release", "folder", "be", "admin", "but", "who", "creates", "the", "assets", "be", "www", "data", "NUMBER", "This", "occur", "because", "the", "application", "yii", "NUMBER", "framework", "creates", "the", "folder", "content", "but", "on", "demand", "NUMBER", "In", "this", "situations", "it", "s", "necessary", "to", "use", "sudo", "It", "will", "not", "work", "because", "the", "subfolders", "into", "assets", "be", "created", "when", "a", "page", "request", "be", "executed", "elfet", "NUMBER", "As", "solution", "Apache", "Create", "a", "group", "developer", "and", "add", "deployer", "user", "and", "apache", "user", "to", "this", "group", "NUMBER", "As", "solution", "Nginx", "PHP", "FPM", "correct", "configure", "user", "for", "run", "phpfpm", "NUMBER", "It", "should", "equals", "for", "deployment", "user", "NUMBER", "I", "think", "that", "permission", "configuration", "be", "relevant", "to", "server", "administrator", "NUMBER", "He", "should", "know", "which", "permissions", "will", "be", "use", "NUMBER", "This", "issue", "was", "close", "but", "th", "PR", "continues", "opned", "NUMBER", "What", "was", "the", "decision", "Can", "you", "say", "which", "PR", "PR", "NUMBER", "Please", "what", "was", "the", "decision", "Can", "you", "put", "your", "users", "in", "same", "group", "I", "think", "this", "be", "problem", "Yes", "but", "i", "made", "pr", "NUMBER", "and", "it", "continues", "opened", "Good", "day", "NUMBER", "Thanks", "for", "you", "library", "NUMBER", "Added", "support", "timeout", "command", "execution", "NUMBER", "In", "my", "case", "some", "command", "run", "more", "than", "NUMBER", "second", "and", "deploy", "be", "fail", "NUMBER", "Thanks", "I", "will", "fix", "it", "NUMBER", "This", "pull", "request", "be", "close", "by", "better", "pull", "request", "NUMBER", "Make", "sure", "cache", "dir", "be", "writable", "after", "cache", "warmup", "NUMBER", "This", "helpul", "if", "you", "use", "not", "web", "server", "user", "to", "execute", "deploy", "in", "my", "deploy", "NUMBER", "php", "file", "I", "did", "use", "the", "after", "function", "to", "handle", "this", "task", "but", "i", "think", "it", "would", "be", "better", "if", "it", "can", "be", "handle", "by", "default", "since", "you", "use", "cache", "warmer", "on", "symfony", "you", "need", "to", "make", "sure", "the", "directory", "under", "app", "cache", "be", "writable", "and", "the", "problem", "be", "when", "you", "run", "cache", "warmer", "you", "need", "to", "make", "sure", "the", "directory", "be", "writable", "also", "NUMBER", "No", "you", "need", "to", "do", "it", "NUMBER", "Because", "before", "and", "after", "cache", "warming", "you", "need", "to", "make", "sure", "the", "directory", "be", "writable", "ZeeCoder", "you", "be", "right", "i", "think", "the", "problem", "come", "from", "this", "function", "LINK", "L", "NUMBER", "We", "need", "to", "change", "mode", "chmod", "recursively", "and", "run", "it", "as", "both", "task", "the", "top", "line", "of", "function", "We", "have", "a", "case", "dir_A", "file_a", "NUMBER", "flie_a", "NUMBER", "file_a", "NUMBER", "directory", "file", "owner", "permission", "dirA", "deploy_user", "NUMBER", "file_a", "NUMBER", "deploy_user", "NUMBER", "file_a", "NUMBER", "www_user", "NUMBER", "file_a", "NUMBER", "www_user", "NUMBER", "when", "use", "command", "chmod", "R", "NUMBER", "dir_A", "without", "sudo", "you", "can", "have", "a", "problem", "NUMBER", "NUMBER", "I", "think", "be", "better", "to", "use", "chmod", "NUMBER", "R", "and", "add", "new", "task", "call", "deploy", "writable", "file", "as", "option", "NUMBER", "It", "will", "be", "better", "instead", "add", "new", "task", "for", "this", "issue", "The", "problem", "be", "resolve", "so", "i", "will", "close", "this", "PR", "Hi", "I", "want", "to", "switch", "my", "projects", "on", "symfony", "from", "capyfony", "to", "deployer", "but", "I", "run", "to", "problem", "with", "sudo", "command", "thing", "be", "on", "server", "there", "be", "no", "way", "that", "sudo", "will", "be", "available", "for", "deploy", "user", "it", "s", "just", "not", "an", "option", "NUMBER", "So", "when", "deployer", "setting", "permissions", "sudo", "setfacl", "R", "m", "u", "www", "data", "rwX", "m", "u", "whoami", "rwX", "app", "cache", "app", "logs", "I", "get", "error", "because", "sudo", "can", "t", "be", "use", "but", "this", "command", "be", "work", "perfectly", "fine", "on", "normal", "user", "so", "why", "it", "s", "use", "Can", "it", "be", "sudo", "forced", "off", "During", "capyfony", "build", "there", "be", "no", "need", "for", "sudo", "NUMBER", "Well", "I", "m", "stupid", "NUMBER", "I", "just", "copy", "deploy", "writable", "task", "and", "change", "sudo", "variable", "to", "and", "it", "s", "work", "like", "charm", "NUMBER", "Sorry", "for", "this", "NUMBER", "It", "be", "configurable", "LINK", "L", "NUMBER", "Add", "below", "to", "your", "deploy", "NUMBER", "php", "set", "writable_use_sudo", "false", "You", "re", "right", "NUMBER", "It", "be", "miss", "NUMBER", "I", "have", "a", "data", "cache", "folder", "with", "several", "folders", "and", "subfolders", "and", "it", "would", "be", "nice", "if", "i", "could", "just", "add", "data", "to", "the", "writable_dirs", "options", "with", "a", "R", "param", "instead", "of", "having", "to", "add", "each", "subfolder", "individually", "NUMBER", "It", "could", "easily", "be", "ahcieved", "through", "a", "custom", "task", "but", "i", "still", "think", "it", "be", "something", "that", "a", "lot", "would", "use", "NUMBER", "What", "about", "checking", "if", "a", "param", "be", "array", "or", "string", "if", "string", "just", "chmod", "if", "array", "then", "look", "for", "the", "keys", "set", "writable_dirs", "data", "cache", "dir", "data", "params", "R", "another", "single", "dir", "ok", "I", "find", "that", "it", "would", "be", "useful", "to", "be", "able", "to", "call", "another", "task", "inside", "a", "task", "NUMBER", "Maybe", "some", "code", "can", "say", "this", "more", "clearly", "NUMBER", "I", "would", "like", "to", "be", "able", "to", "do", "something", "like", "task", "subtask_", "NUMBER", "function", "task", "subtask_", "NUMBER", "function", "task", "task", "function", "if", "condition", "task", "subtask_", "NUMBER", "else", "task", "subtask_", "NUMBER", "At", "the", "moment", "this", "gives", "me", "an", "error", "because", "we", "I", "call", "task", "it", "expects", "two", "argument", "NUMBER", "Do", "you", "think", "it", "would", "be", "interesting", "to", "have", "such", "a", "functionality", "Thanks", "elfet", "for", "your", "reply", "NUMBER", "At", "the", "moment", "I", "have", "my", "code", "with", "the", "if", "separating", "the", "two", "cases", "all", "inside", "a", "single", "task", "NUMBER", "I", "would", "like", "to", "use", "the", "if", "to", "differentiate", "the", "first", "deploy", "when", "there", "an", "no", "other", "release", "and", "the", "following", "deploys", "when", "I", "can", "use", "a", "previous", "release", "to", "copy", "all", "the", "code", "to", "fasten", "the", "deploy", "as", "it", "be", "discussed", "on", "issue", "NUMBER", "LINK", "NUMBER", "Do", "you", "think", "this", "be", "a", "bad", "practice", "Cool", "stuff", "This", "will", "be", "nice", "to", "speed", "up", "the", "clone", "operation", "NUMBER", "I", "didn", "t", "try", "it", "but", "I", "think", "that", "the", "result", "will", "be", "the", "same", "of", "a", "simple", "clone", "so", "for", "example", "you", "would", "not", "get", "a", "copy", "of", "the", "vendor", "directory", "and", "so", "you", "would", "not", "solve", "the", "use", "case", "the", "was", "raise", "in", "the", "beginning", "of", "NUMBER", "elfet", "I", "just", "realized", "that", "your", "idea", "of", "use", "the", "git", "dissociate", "option", "for", "the", "cloning", "process", "be", "quite", "problematic", "since", "it", "be", "available", "only", "in", "git", "version", "NUMBER", "and", "both", "Debian", "NUMBER", "and", "Ubuntu", "NUMBER", "be", "use", "git", "NUMBER", "I", "m", "not", "sure", "if", "everybody", "id", "going", "to", "upgrade", "its", "git", "version", "to", "have", "this", "feature", "NUMBER", "marcosh", "You", "can", "try", "having", "it", "another", "way", "currently", "dissociate", "reference", "be", "enable", "only", "if", "Your", "git", "be", "new", "enough", "NUMBER", "Instead", "You", "can", "use", "rsync", "warmup", "NUMBER", "Depending", "on", "Your", "settings", "it", "can", "copy", "vendors", "and", "others", "NUMBER", "Problem", "would", "only", "lie", "in", "the", "fact", "that", "cloned", "git", "copy", "be", "shalow", "but", "You", "can", "actually", "i", "think", "do", "pull", "ff", "on", "shallow", "clone", "NUMBER", "johnny", "bit", "correct", "me", "if", "I", "m", "wrong", "but", "I", "realized", "that", "your", "approach", "could", "have", "a", "drawback", "NUMBER", "Suppose", "that", "a", "deploy", "goes", "wrong", "the", "release", "directory", "be", "created", "but", "no", "file", "be", "actually", "copied", "there", "NUMBER", "When", "you", "deploy", "then", "next", "time", "rsync", "warmup", "will", "have", "no", "file", "to", "copy", "NUMBER", "In", "particular", "the", "git", "pull", "command", "will", "not", "find", "the", "NUMBER", "git", "file", "and", "it", "will", "fail", "NUMBER", "With", "elfet", "this", "will", "not", "happen", "because", "you", "re", "always", "doing", "a", "git", "clone", "and", "you", "re", "not", "assuming", "the", "presence", "of", "anything", "NUMBER", "Yes", "that", "s", "right", "NUMBER", "It", "has", "this", "drawback", "NUMBER", "Plus", "by", "default", "rsync", "be", "set", "not", "to", "copy", "NUMBER", "dir", "so", "You", "d", "have", "to", "be", "smart", "about", "what", "You", "re", "doing", "NUMBER", "With", "rsync", "warmup", "git", "pull", "I", "d", "do", "same", "thing", "that", "I", "did", "for", "reference", "dissociate", "try", "NUMBER", "Then", "in", "case", "of", "fail", "pull", "do", "normal", "clone", "NUMBER", "Then", "there", "s", "no", "drawbacks", "D", "The", "beauty", "of", "it", "be", "if", "You", "do", "it", "smart", "then", "You", "either", "get", "same", "behaviour", "or", "advantage", "no", "disadvantages", "NUMBER", "check", "file", "by", "wrong", "flag", "in", "if", "I", "m", "get", "this", "error", "when", "trying", "to", "run", "deployer", "NUMBER", "I", "install", "deployer", "NUMBER", "through", "composer", "in", "a", "laravel", "NUMBER", "project", "run", "PHP", "NUMBER", "or", "PHP", "NUMBER", "dev", "did", "not", "test", "any", "other", "version", "Version", "v", "NUMBER", "according", "to", "my", "composer", "NUMBER", "lock", "file", "NUMBER", "php", "TAG", "user", "ezra", "identityFile", "forwardAgent", "You", "can", "use", "identity", "key", "ssh", "config", "or", "username", "password", "to", "auth", "on", "the", "server", "NUMBER", "stage", "production", "env", "deploy_path", "home", "ezra", "apps", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "Specify", "the", "repository", "from", "which", "to", "download", "your", "project", "s", "code", "NUMBER", "The", "server", "needs", "to", "have", "git", "install", "for", "this", "to", "work", "NUMBER", "If", "you", "re", "not", "use", "a", "forward", "agent", "then", "the", "server", "has", "to", "be", "able", "to", "clone", "your", "project", "from", "this", "repository", "NUMBER", "set", "repository", "XXXXXX", "I", "do", "not", "I", "install", "deployer", "with", "composer", "into", "my", "vendors", "directory", "and", "call", "deployer", "use", "NUMBER", "vendor", "bin", "dep", "deploy", "production", "I", "guess", "that", "composer", "be", "automatically", "loading", "laravel", "s", "helper", "file", "before", "your", "helper", "file", "and", "because", "they", "both", "define", "a", "global", "get", "function", "they", "clash", "NUMBER", "I", "can", "and", "that", "works", "but", "wanted", "to", "let", "you", "know", "of", "the", "bug", "anyway", "NUMBER", "Op", "NUMBER", "jun", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "schreef", "Anton", "Medvedev", "notifications", "github", "NUMBER", "com", "Yeah", "seems", "like", "that", "NUMBER", "Can", "you", "use", "phar", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Are", "there", "any", "plan", "to", "make", "Deployer", "L", "NUMBER", "and", "Lumen", "compatible", "Don", "t", "worry", "NUMBER", "It", "be", "on", "going", "NUMBER", "See", "NUMBER", "And", "you", "can", "deploy", "now", "if", "you", "use", "deployer", "NUMBER", "phar", "NUMBER", "NUMBER", "We", "do", "need", "the", "deployer", "namespace", "NUMBER", "I", "really", "want", "to", "use", "composer", "since", "it", "be", "an", "dependency", "of", "my", "project", "but", "when", "use", "Laravel", "NUMBER", "x", "I", "have", "to", "use", "the", "NUMBER", "phar", "file", "which", "be", "annoying", "me", "NUMBER", "This", "means", "that", "all", "Laravel", "users", "cannot", "use", "the", "composer", "dependency", "but", "have", "to", "use", "the", "phar", "file", "NUMBER", "I", "hope", "this", "be", "going", "to", "be", "fix", "soon", "NUMBER", "NUMBER", "NUMBER", "About", "NUMBER", "I", "tried", "to", "use", "r", "to", "move", "cursor", "back", "to", "line", "head", "and", "fix", "it", "on", "ubuntu", "NUMBER", "however", "it", "need", "test", "for", "mac", "NUMBER", "What", "about", "windows", "I", "m", "use", "deployer", "to", "deploy", "to", "dev", "environment", "too", "and", "i", "need", "dev", "dependencies", "from", "composer", "for", "that", "NUMBER", "My", "idea", "be", "to", "allow", "for", "a", "setting", "something", "like", "env", "composer", "NUMBER", "dev", "true", "which", "would", "make", "the", "composer", "task", "remove", "the", "no", "dev", "value", "NUMBER", "composer", "NUMBER", "dev", "would", "be", "false", "by", "default", "so", "there", "be", "no", "BC", "break", "NUMBER", "What", "do", "you", "think", "Do", "you", "want", "a", "PR", "for", "this", "That", "s", "a", "good", "idea", "too", "NUMBER", "Want", "me", "to", "PR", "that", "ref", "NUMBER", "Nice", "thanks", "NUMBER", "It", "s", "even", "in", "the", "documentation", "but", "it", "seems", "to", "do", "nothing", "right", "now", "NUMBER", "Based", "on", "LINK", "issuecomment", "NUMBER", "When", "the", "remote", "server", "be", "not", "set", "up", "properly", "to", "be", "able", "to", "clone", "the", "repo", "there", "could", "be", "a", "smarter", "error", "message", "NUMBER", "So", "instead", "of", "just", "dumping", "Host", "key", "verification", "fail", "NUMBER", "It", "could", "say", "something", "like", "Host", "key", "verification", "fail", "NUMBER", "It", "seems", "you", "forgot", "to", "add", "the", "repository", "s", "host", "s", "fingerprint", "as", "a", "know", "host", "NUMBER", "Run", "ssh", "T", "git", "bitbucket", "NUMBER", "org", "on", "the", "remote", "server", "to", "add", "it", "to", "the", "list", "of", "know", "hosts", "then", "try", "deploying", "again", "NUMBER", "This", "could", "avoid", "the", "creation", "of", "new", "issue", "in", "this", "repo", "when", "the", "developer", "use", "Deployer", "doesn", "t", "realise", "that", "it", "s", "not", "the", "tool", "that", "s", "wrong", "but", "rather", "the", "remote", "server", "configuration", "NUMBER", "Does", "anyone", "know", "whether", "this", "could", "be", "implement", "Of", "course", "this", "could", "lead", "us", "to", "even", "more", "error", "checking", "regard", "the", "remote", "ssh", "key", "which", "could", "have", "different", "error", "message", "Is", "an", "ssh", "key", "in", "use", "If", "it", "be", "then", "be", "the", "git", "repo", "s", "host", "add", "to", "the", "know", "hosts", "If", "it", "still", "error", "for", "some", "reason", "output", "the", "default", "Host", "key", "verification", "fail", "NUMBER", "error", "message", "NUMBER", "This", "could", "help", "developers", "instantly", "locate", "the", "problem", "NUMBER", "elfet", "I", "propose", "a", "new", "issue", "label", "call", "DX", "which", "would", "focus", "on", "Developer", "Experience", "and", "this", "issue", "could", "be", "labeled", "as", "such", "NUMBER", "For", "usage", "of", "the", "DX", "label", "see", "Symfony", "DX", "LINK", "NUMBER", "I", "add", "phpunit", "test", "before", "release", "NUMBER", "And", "if", "test", "fail", "I", "get", "RuntimeException", "and", "deployer", "stops", "so", "it", "won", "t", "be", "release", "NUMBER", "But", "there", "be", "still", "a", "fail", "release", "folder", "in", "release", "NUMBER", "So", "if", "I", "deploy", "new", "release", "and", "rollback", "the", "fail", "release", "folder", "will", "be", "release", "NUMBER", "To", "avoid", "it", "we", "have", "to", "remove", "fail", "release", "folder", "manually", "NUMBER", "Is", "there", "any", "good", "solutions", "Before", "deploy", "release", "there", "be", "no", "source", "code", "NUMBER", "We", "have", "to", "clone", "git", "repository", "twice", "for", "test", "and", "for", "release", "NUMBER", "It", "be", "not", "big", "problem", "but", "only", "once", "be", "better", "NUMBER", "cleanup", "remove", "older", "release", "NUMBER", "In", "this", "case", "fail", "release", "be", "latest", "NUMBER", "Thank", "you", "This", "works", "fine", "NUMBER", "php", "task", "phpunit", "function", "try", "run", "cd", "release_path", "sh", "phpunit", "NUMBER", "sh", "catch", "RuntimeException", "e", "test", "fail", "run", "cd", "deploy_path", "if", "d", "release", "fail", "then", "mkdir", "release", "fail", "fi", "run", "mv", "release_path", "deploy_path", "release", "fail", "run", "cd", "deploy_path", "if", "h", "release", "then", "rm", "release", "fi", "throw", "e", "desc", "Run", "PHPUnit", "How", "do", "I", "provide", "the", "credentails", "for", "a", "GIT", "repo", "that", "s", "on", "Bitbucket", "This", "be", "what", "my", "deploy", "NUMBER", "php", "looks", "like", "NUMBER", "php", "TAG", "user", "root", "forwardAgent", "stage", "dev", "env", "deploy_path", "var", "www", "my", "deploy", "dir", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "Specify", "the", "repository", "from", "which", "to", "download", "your", "project", "s", "code", "NUMBER", "The", "server", "needs", "to", "have", "git", "install", "for", "this", "to", "work", "NUMBER", "If", "you", "re", "not", "use", "a", "forward", "agent", "then", "the", "server", "has", "to", "be", "able", "clone", "your", "project", "from", "this", "repository", "NUMBER", "set", "repository", "git", "bitbucket", "NUMBER", "org", "someuser", "somerepo", "NUMBER", "git", "Whe", "I", "run", "dep", "deploy", "dev", "v", "I", "get", "the", "following", "trace", "E", "ecuting", "task", "deploy", "prepare", "on", "dev", "server", "NUMBER", "do", "on", "dev", "server", "NUMBER", "Ok", "E", "ecuting", "task", "deploy", "release", "on", "dev", "server", "NUMBER", "do", "on", "dev", "server", "NUMBER", "Ok", "E", "ecuting", "task", "deploy", "update_code", "on", "dev", "server", "NUMBER", "RuntimeException", "Host", "key", "verification", "fail", "NUMBER", "fatal", "The", "remote", "end", "hung", "up", "unexpectedly", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "p", "parallel", "Thanks", "NUMBER", "You", "should", "add", "public", "key", "from", "server", "to", "Deploy", "keys", "to", "bitbucket", "NUMBER", "NUMBER", "Copy", "public", "key", "sh", "cat", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "If", "not", "exist", "then", "create", "sh", "ssh", "keygen", "NUMBER", "Paste", "this", "key", "in", "Bitbucket", "repository", "deploy", "keys", "NUMBER", "screenshot", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "LINK", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "f", "NUMBER", "NUMBER", "c", "NUMBER", "c", "NUMBER", "png", "P", "NUMBER", "S", "NUMBER", "Before", "deploy", "clone", "repository", "for", "approve", "host", "sh", "cd", "tmp", "git", "clone", "NUMBER", "ZhukV", "thanks", "for", "your", "reponse", "NUMBER", "But", "I", "already", "have", "the", "Deployment", "key", "configured", "in", "bitbucket", "NUMBER", "Any", "other", "idea", "Thanks", "NUMBER", "Try", "reset", "file", "NUMBER", "know_hosts", "sh", "rm", "NUMBER", "ssh", "known_hosts", "and", "clone", "repository", "on", "server", "NUMBER", "I", "was", "able", "to", "successfully", "clone", "the", "bitbucket", "repo", "on", "the", "server", "NUMBER", "But", "I", "saw", "the", "usual", "warning", "The", "authenticity", "of", "host", "bitbucket", "NUMBER", "org", "NUMBER", "can", "t", "be", "established", "NUMBER", "RSA", "key", "fingerprint", "be", "NUMBER", "NUMBER", "c", "NUMBER", "b", "f", "NUMBER", "NUMBER", "f", "NUMBER", "NUMBER", "b", "NUMBER", "c", "NUMBER", "b", "ec", "aa", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "c", "NUMBER", "Are", "you", "sure", "you", "want", "to", "continue", "connecting", "yes", "no", "So", "After", "add", "bitbucket", "NUMBER", "org", "to", "the", "list", "of", "know_hosts", "Deployer", "now", "runs", "successfully", "NUMBER", "So", "we", "should", "probably", "add", "to", "the", "doc", "that", "the", "fingerprint", "server", "on", "which", "the", "repository", "resides", "should", "be", "in", "the", "know_hosts", "list", "of", "the", "server", "on", "which", "you", "be", "deploying", "NUMBER", "Thanks", "everyone", "The", "following", "was", "add", "to", "the", "docs", "not", "so", "long", "ago", "php", "Specify", "the", "repository", "from", "which", "to", "download", "your", "project", "s", "code", "NUMBER", "The", "server", "needs", "to", "have", "git", "install", "for", "this", "to", "work", "NUMBER", "If", "you", "re", "not", "use", "a", "forward", "agent", "then", "the", "server", "has", "to", "be", "able", "clone", "your", "project", "from", "this", "repository", "NUMBER", "set", "repository", "git", "github", "NUMBER", "com", "org", "app", "NUMBER", "git", "And", "I", "just", "notice", "a", "typo", "in", "it", "LINK", "xD", "My", "point", "be", "I", "think", "the", "doc", "now", "covers", "this", "part", "NUMBER", "A", "more", "interesting", "question", "would", "be", "be", "it", "possible", "to", "detect", "this", "specific", "error", "during", "deployment", "I", "encountered", "this", "issue", "numerous", "times", "and", "it", "would", "be", "great", "to", "have", "a", "friendly", "error", "message", "like", "Host", "key", "verification", "fail", "NUMBER", "It", "seems", "you", "forgot", "to", "add", "the", "repository", "s", "host", "s", "fingerprint", "as", "a", "know", "host", "NUMBER", "Run", "ssh", "T", "git", "bitbucket", "NUMBER", "org", "on", "the", "remote", "server", "to", "add", "it", "to", "the", "list", "of", "know", "hosts", "then", "try", "deploying", "again", "NUMBER", "Here", "git", "bitbucket", "NUMBER", "org", "could", "be", "extracted", "from", "the", "server", "configuration", "data", "NUMBER", "Indeed", "such", "a", "friendly", "message", "would", "be", "a", "nice", "addition", "NUMBER", "Great", "tool", "NUMBER", "Makes", "life", "much", "easier", "NUMBER", "Thanks", "again", "everybody", "elfet", "Do", "you", "think", "this", "idea", "about", "the", "error", "message", "could", "be", "implement", "Honestly", "I", "just", "can", "judge", "whether", "I", "should", "open", "an", "issue", "about", "it", "or", "not", "NUMBER", "P", "can", "t", "It", "s", "not", "like", "it", "s", "wrong", "NUMBER", "If", "you", "read", "my", "comment", "carefully", "all", "I", "m", "saying", "be", "that", "it", "could", "be", "more", "sophisticated", "by", "detecting", "this", "specific", "error", "and", "having", "a", "slightly", "more", "verbose", "error", "message", "for", "it", "NUMBER", "But", "since", "I", "have", "no", "idea", "if", "something", "like", "this", "could", "be", "implement", "or", "not", "I", "thought", "I", "d", "first", "ask", "you", "whether", "this", "worth", "open", "a", "new", "issue", "or", "not", "NUMBER", "This", "could", "be", "labeled", "as", "DX", "like", "in", "Symfony", "LINK", "NUMBER", "Developer", "Experience", "be", "very", "important", "imho", "NUMBER", "I", "too", "thought", "that", "forwardAgent", "makes", "the", "ssh", "agent", "work", "as", "it", "supposed", "to", "work", "and", "forwarding", "my", "SSH", "keys", "to", "the", "ssh", "session", "NUMBER", "This", "would", "make", "my", "life", "easier", "Capistrano", "can", "do", "it", "because", "then", "I", "don", "t", "have", "to", "create", "a", "deployment", "key", "in", "BitBucket", "the", "server", "do", "not", "have", "to", "have", "an", "RSA", "keypair", "eg", "less", "maintenance", "cost", "NUMBER", "In", "this", "pull", "request", "Add", "NUMBER", "env", "into", "shared_files", "to", "support", "Laravel", "NUMBER", "Add", "test", "class", "for", "laravel", "recipe", "elfet", "you", "can", "don", "t", "merge", "this", "pull", "request", "and", "implement", "it", "yourself", "because", "this", "test", "will", "take", "a", "long", "time", "NUMBER", "Sorry", "Laravel", "NUMBER", "use", "NUMBER", "env", "file", "to", "save", "environment", "variables", "for", "applicaion", "configures", "like", "app", "config", "parameters", "NUMBER", "yml", "in", "Symfony", "NUMBER", "In", "this", "pull", "request", "Add", "NUMBER", "env", "into", "shared_files", "to", "support", "Laravel", "NUMBER", "Add", "test", "class", "for", "laravel", "recipe", "but", "test", "class", "be", "not", "good", "and", "i", "was", "remove", "it", "Dear", "ZeeCoder", "NUMBER", "Laravel", "NUMBER", "be", "current", "stable", "version", "of", "laravel", "framework", "NUMBER", "Deployer", "be", "better", "if", "it", "support", "both", "laravel", "NUMBER", "and", "laravel", "NUMBER", "Laravel", "NUMBER", "should", "be", "default", "NUMBER", "NUMBER", "With", "laravel", "NUMBER", "case", "file", "NUMBER", "env", "be", "useless", "but", "it", "isn", "t", "affect", "with", "your", "app", "NUMBER", "NUMBER", "With", "this", "hash", "user", "don", "t", "need", "custom", "recipe", "Both", "laravel", "NUMBER", "and", "NUMBER", "be", "support", "NUMBER", "Note", "symfony", "NUMBER", "isn", "t", "current", "stable", "version", "NUMBER", "Hello", "I", "saw", "from", "the", "examples", "page", "a", "task", "to", "restart", "php", "NUMBER", "fpm", "php", "task", "reload", "php", "fpm", "function", "run", "sudo", "usr", "sbin", "service", "php", "NUMBER", "fpm", "reload", "after", "deploy", "reload", "php", "fpm", "after", "rollback", "reload", "php", "fpm", "I", "need", "to", "use", "this", "to", "refresh", "the", "php", "NUMBER", "paths", "to", "the", "new", "current", "symlinked", "folder", "NUMBER", "The", "problem", "I", "have", "though", "be", "that", "run", "sudo", "requires", "entering", "the", "password", "which", "when", "run", "from", "the", "deploy", "script", "can", "t", "happen", "I", "m", "get", "this", "sudo", "no", "tty", "present", "and", "no", "askpass", "program", "specified", "I", "did", "add", "my", "user", "to", "the", "sudoers", "file", "like", "so", "myUser", "ALL", "ALL", "ALL", "NOPASSWD", "ALL", "Though", "this", "still", "gives", "the", "same", "error", "NUMBER", "Is", "there", "some", "sort", "of", "trick", "to", "make", "this", "work", "Thank", "you", "This", "be", "a", "problem", "in", "rights", "for", "access", "sudo", "NUMBER", "Please", "check", "you", "etc", "sudoers", "file", "As", "example", "my", "sudoers", "taleforchild", "ALL", "NOPASSWD", "bin", "systemctl", "restart", "php", "fpm", "NUMBER", "service", "Where", "taleforchild", "user", "in", "operation", "system", "Working", "in", "CentOS", "NUMBER", "Yes", "it", "s", "something", "relate", "to", "sudo", "rights", "though", "I", "don", "t", "get", "what", "hence", "my", "post", "here", "NUMBER", "Using", "myUser", "ALL", "ALL", "ALL", "NOPASSWD", "ALL", "should", "have", "do", "the", "trick", "NUMBER", "I", "tried", "forge", "ALL", "NOPASSWD", "usr", "sbin", "service", "php", "NUMBER", "fpm", "reload", "but", "in", "CLI", "this", "returns", "bash", "service", "php", "NUMBER", "fpm", "reload", "reload", "Rejected", "send", "message", "NUMBER", "matched", "rules", "type", "method_call", "sender", "NUMBER", "uid", "NUMBER", "pid", "NUMBER", "comm", "reload", "php", "NUMBER", "fpm", "interface", "com", "NUMBER", "ubuntu", "NUMBER", "Upstart", "NUMBER", "_", "NUMBER", "Instance", "member", "Reload", "error", "name", "unset", "requested_reply", "NUMBER", "destination", "com", "NUMBER", "ubuntu", "NUMBER", "Upstart", "uid", "NUMBER", "pid", "NUMBER", "comm", "sbin", "init", "If", "you", "use", "Ubuntu", "OS", "Command", "for", "restart", "PHP", "FMP", "service", "sh", "etc", "init", "NUMBER", "d", "php", "fpm", "restart", "And", "you", "should", "add", "rights", "for", "run", "this", "command", "without", "sudo", "password", "in", "you", "system", "NUMBER", "Deployer", "task", "php", "task", "reload", "php", "fpm", "function", "run", "sudo", "etc", "init", "NUMBER", "d", "php", "fpm", "restart", "Using", "SysV", "Init", "scripts", "And", "you", "sudoers", "rule", "you_user_name", "ALL", "NOPASSWD", "etc", "init", "NUMBER", "d", "php", "fpm", "restart", "If", "you", "use", "another", "operation", "system", "please", "write", "os", "and", "version", "NUMBER", "P", "NUMBER", "S", "NUMBER", "The", "wrapper", "scripts", "as", "example", "service", "redirecting", "call", "to", "other", "executable", "file", "then", "you", "must", "write", "a", "real", "command", "in", "etc", "sudoers", "Hm", "I", "can", "reload", "php", "NUMBER", "fpm", "use", "either", "of", "those", "service", "php", "NUMBER", "fpm", "reload", "or", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "reload", "or", "usr", "sbin", "service", "php", "NUMBER", "fpm", "reload", "I", "tried", "it", "with", "your", "setup", "logged", "out", "of", "the", "VPS", "to", "be", "sure", "then", "run", "sudo", "etc", "init", "NUMBER", "d", "php", "fpm", "restart", "still", "get", "asked", "for", "password", "NUMBER", "disappointed", "My", "visudo", "file", "forge", "ALL", "NOPASSWD", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "restart", "Edit", "I", "m", "on", "ubuntu", "indeed", "NUMBER", "So", "the", "real", "script", "for", "reload", "php", "fpm", "etc", "init", "NUMBER", "d", "php", "fpm", "NUMBER", "For", "run", "this", "script", "you", "should", "have", "a", "superadmin", "rights", "sudo", "NUMBER", "If", "asked", "password", "if", "you", "call", "from", "another", "user", "then", "the", "rule", "of", "sudoers", "not", "work", "NUMBER", "Please", "try", "user", "for", "available", "restart", "without", "password", "new_user", "as", "example", "NUMBER", "Login", "to", "system", "as", "root", "NUMBER", "create", "a", "user", "if", "not", "exists", "NUMBER", "Please", "check", "in", "etc", "passwd", "NUMBER", "Change", "etc", "sudoers", "NUMBER", "Adds", "new_user", "ALL", "NOPASSWD", "etc", "init", "NUMBER", "d", "php", "fpm", "restart", "NUMBER", "Login", "to", "system", "as", "new_user", "NOT", "su", "can", "open", "new", "console", "NUMBER", "NUMBER", "Try", "run", "sh", "sudo", "etc", "init", "NUMBER", "d", "php", "fpm", "restart", "Should", "work", "NUMBER", "UPD", "The", "latest", "command", "p", "NUMBER", "should", "not", "ask", "the", "password", "That", "s", "what", "I", "did", "it", "doesn", "t", "work", "NUMBER", "I", "don", "t", "understand", "why", "NUMBER", "Also", "the", "script", "to", "reload", "php", "fpm", "be", "not", "etc", "init", "NUMBER", "d", "php", "fpm", "but", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "NUMBER", "Ok", "replace", "etc", "init", "NUMBER", "d", "php", "fpm", "to", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "in", "sudoers", "I", "did", "of", "course", "but", "that", "still", "makes", "me", "ask", "for", "sudo", "password", "when", "run", "the", "command", "NUMBER", "hm", "NUMBER", "interesting", "NUMBER", "in", "another", "system", "debian", "centos", "this", "be", "a", "good", "work", "NUMBER", "Can", "file", "etc", "sudoers", "not", "reading", "NUMBER", "When", "I", "cat", "etc", "sudoers", "I", "do", "see", "my", "change", "in", "it", "so", "it", "was", "write", "correctly", "NUMBER", "It", "be", "very", "strange", "indeed", "NUMBER", "Please", "try", "you_user_name", "ALL", "NOPASSWD", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "no", "space", "my", "sudoers", "file", "ubuntu", "NUMBER", "deploy_user", "ALL", "ALL", "NOPASSWD", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "etc", "init", "NUMBER", "d", "nginx", "Tried", "without", "a", "space", "forge", "ALL", "NOPASSWD", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "restart", "And", "run", "sudo", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "restart", "as", "the", "forge", "user", "still", "asks", "me", "for", "a", "password", "NUMBER", "Running", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "restart", "without", "sudo", "doesn", "t", "though", "NUMBER", "But", "when", "I", "commented", "the", "line", "in", "the", "sudoers", "file", "it", "still", "doesn", "t", "ask", "root", "password", "for", "it", "NUMBER", "so", "I", "don", "t", "know", "NUMBER", "Edit", "I", "change", "the", "task", "to", "php", "task", "reload", "php", "fpm", "function", "run", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "restart", "with", "after", "deploy", "reload", "php", "fpm", "Though", "I", "get", "RuntimeException", "when", "it", "get", "s", "to", "the", "reload", "task", "NUMBER", "Nothing", "more", "in", "the", "logs", "file", "NUMBER", "Please", "try", "run", "deploy", "with", "vvv", "option", "and", "show", "out", "to", "here", "NUMBER", "nWidart", "This", "be", "the", "error", "with", "stacktrace", "when", "run", "vvv", "Executing", "task", "reload", "php", "fpm", "on", "staging", "Run", "etc", "init", "NUMBER", "d", "php", "NUMBER", "fpm", "restart", "RuntimeException", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "Users", "nicolaswidart", "Sites", "Asguard", "presentation", "site", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "nWidart", "restarting", "php", "fpm", "can", "close", "connections", "and", "or", "connection", "attempts", "tcp", "syn", "NUMBER", "You", "can", "use", "cachetool", "LINK", "to", "clear", "opcode", "cache", "apc", "or", "opcache", "NUMBER", "Also", "there", "s", "a", "deployer", "recipe", "for", "it", "deployphp", "recipes", "LINK", "Oh", "ok", "thanks", "NUMBER", "I", "ve", "install", "deployer", "and", "this", "recipes", "repository", "with", "composer", "globally", "do", "I", "include", "the", "file", "like", "so", "or", "php", "require", "recipes", "recipes", "cachetool", "NUMBER", "php", "Or", "be", "it", "recommended", "to", "install", "on", "a", "per", "project", "basis", "Edit", "Requiring", "require", "recipes", "recipes", "cachetool", "NUMBER", "php", "throw", "not", "find", "exception", "NUMBER", "Though", "recipe", "common", "NUMBER", "php", "can", "NUMBER", "I", "ve", "tried", "relative", "to", "the", "deployer", "package", "require", "NUMBER", "NUMBER", "deployphp", "recipes", "recipes", "cachetool", "NUMBER", "php", "still", "nothing", "NUMBER", "You", "only", "need", "to", "require", "the", "recipes", "in", "composer", "usually", "you", "won", "t", "need", "deployer", "as", "a", "dependency", "because", "you", "use", "it", "as", "an", "app", "NUMBER", "And", "yes", "it", "should", "be", "per", "project", "NUMBER", "Hope", "it", "solves", "your", "problem", "NUMBER", "On", "qua", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "Nicolas", "Widart", "notifications", "github", "NUMBER", "com", "write", "Oh", "ok", "thanks", "NUMBER", "I", "ve", "install", "deployer", "and", "this", "recipes", "repository", "with", "composer", "globally", "do", "I", "include", "the", "file", "like", "so", "or", "require", "recipes", "recipes", "cachetool", "NUMBER", "php", "Or", "be", "it", "recommended", "to", "install", "on", "a", "per", "project", "basis", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Still", "not", "work", "no", "NUMBER", "I", "tried", "the", "cache", "tool", "but", "that", "throw", "Object", "cachetool", "do", "not", "exist", "in", "Collection", "NUMBER", "I", "required", "the", "package", "in", "the", "project", "and", "required", "vendor", "deployphp", "recipes", "recipes", "cachetool", "NUMBER", "php", "NUMBER", "Edit", "this", "be", "the", "stacktrace", "Exception", "trace", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "deployer", "deployer", "src", "Collection", "Collection", "NUMBER", "php", "NUMBER", "Deployer", "Collection", "Collection", "get", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "get", "at", "Users", "nicolaswidart", "Sites", "Asguard", "presentation", "site", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "deployer", "deployer", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "deployer", "deployer", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "deployer", "deployer", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "deployer", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "Users", "nicolaswidart", "NUMBER", "composer", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "deploy", "p", "parallel", "My", "sudoer", "configure", "be", "lynn", "ALL", "ALL", "NOPASSWD", "usr", "bin", "service", "php", "NUMBER", "fpm", "restart", "use", "sudo", "service", "php", "NUMBER", "fpm", "restart", "works", "for", "me", "NUMBER", "If", "u", "get", "error", "sorry", "you", "must", "have", "a", "tty", "to", "run", "sudo", "just", "comment", "this", "line", "Defaults", "requiretty", "in", "sudoers", "file", "NUMBER", "Work", "for", "me", "NUMBER", "My", "task", "in", "deploy", "NUMBER", "php", "php", "require", "recipe", "common", "NUMBER", "php", "server", "NUMBER", "task", "deploy", "start", "function", "Deployer", "Task", "Context", "get", "getServer", "connect", "run", "cd", "deploy_path", "desc", "Testing", "NUMBER", "Error", "in", "the", "console", "by", "calling", "dep", "deploy", "start", "vvv", "production", "E", "ecuting", "task", "deploy", "start", "on", "prod", "Run", "cd", "var", "www", "html", "xxxxxxxxx", "NUMBER", "com", "NUMBER", "br", "web", "cd", "var", "www", "html", "xxxxxxxxx", "NUMBER", "com", "NUMBER", "br", "web", "reset", "standard", "error", "Inappropriate", "ioctl", "for", "device", "do", "on", "prod", "Ok", "Including", "deploys", "applications", "laravel", "etc", "NUMBER", "All", "commands", "run", "return", "the", "same", "error", "NUMBER", "I", "had", "tried", "this", "but", "the", "error", "insists", "on", "continuing", "NUMBER", "I", "believe", "they", "be", "the", "permissions", "of", "my", "server", "not", "a", "problem", "deployer", "NUMBER", "Anyway", "thanks", "for", "your", "help", "will", "continue", "trying", "to", "solve", "NUMBER", "NUMBER", "Add", "AskPasswordGetter", "ask", "password", "before", "connecting", "NUMBER", "Add", "CallabackPasswordGetter", "gets", "password", "with", "call", "callbacks", "Closures", "For", "more", "information", "please", "see", "NUMBER", "Ok", "NUMBER", "I", "not", "see", "composer", "NUMBER", "json", "NUMBER", "json", "symfony", "console", "NUMBER", "And", "i", "checks", "the", "QuestionHelper", "class", "exists", "for", "indicate", "SymfonyConsole", "of", "NUMBER", "version", "NUMBER", "I", "think", "PhpSecLib", "use", "to", "ask", "for", "password", "if", "it", "was", "empty", "be", "that", "correct", "Max", "Might", "Yes", "because", "password", "prompt", "before", "connection", "in", "configuraiton", "Configuration", "getPassword", "NUMBER", "The", "this", "feature", "will", "be", "worked", "in", "any", "adapters", "for", "connection", "NUMBER", "Example", "for", "ask", "password", "php", "server", "production", "domain", "NUMBER", "com", "user", "user", "password", "TAG", "stage", "production", "env", "deploy_path", "var", "www", "domain", "NUMBER", "com", "Will", "this", "work", "for", "passphrase", "in", "identityFile", "function", "DirtyB", "no", "but", "this", "easy", "add", "NUMBER", "ok", "NUMBER", "Adds", "NUMBER", "Attention", "by", "default", "passphrase", "empty", "string", "NUMBER", "For", "use", "password", "getter", "automatically", "you", "must", "set", "null", "for", "pass", "phrase", "NUMBER", "php", "identityFile", "null", "null", "null", "P", "NUMBER", "S", "NUMBER", "Can", "set", "the", "_null_", "value", "for", "passPhrase", "as", "default", "ping", "NUMBER", "No", "problem", "How", "i", "can", "configure", "stage", "with", "prompt", "password", "to", "server", "before", "connect", "Thank", "NUMBER", "Ok", "NUMBER", "I", "now", "write", "code", "for", "ask", "password", "before", "connecting", "NUMBER", "NUMBER", "NUMBER", "hour", "s", "and", "i", "create", "pull", "request", "NUMBER", "Now", "with", "use", "PasswordGetter", "system", "you", "can", "customize", "logic", "for", "gets", "password", "NUMBER", "In", "get", "password", "from", "Configuration", "first", "checks", "PasswordGetterInterface", "instances", "and", "if", "this", "it", "then", "calls", "getPassword", "host", "user", "As", "example", "with", "use", "base", "callable", "CallablePasswordGetter", "php", "use", "Deployer", "Server", "Password", "CallablePasswordGetter", "server", "production", "domain", "NUMBER", "com", "user", "user", "password", "new", "CallablePasswordGetter", "function", "host", "user", "return", "some_password", "stage", "production", "env", "deploy_path", "var", "www", "domain", "NUMBER", "com", "And", "with", "ask", "password", "AskPasswordGetter", "php", "use", "Deployer", "Server", "Password", "AskPasswordGetter", "server", "production", "domain", "NUMBER", "com", "user", "user", "password", "AskPasswordGetter", "createLazyGetter", "stage", "production", "env", "deploy_path", "var", "www", "domain", "NUMBER", "com", "Attention", "in", "configure", "system", "you", "must", "use", "lazy", "getter", "because", "we", "should", "have", "a", "access", "to", "context", "for", "get", "ouput", "and", "input", "interfaces", "NUMBER", "And", "if", "send", "null", "password", "then", "AskPasswordGetter", "will", "be", "created", "automatically", "NUMBER", "php", "server", "production", "domain", "NUMBER", "com", "user", "user", "password", "stage", "production", "env", "deploy_path", "var", "www", "domain", "NUMBER", "com", "Attention", "this", "method", "not", "work", "in", "parallel", "NUMBER", "I", "use", "this", "feature", "only", "on", "SeriesExecutor", "NUMBER", "Thank", "NUMBER", "This", "feature", "was", "release", "in", "NUMBER", "I", "install", "the", "Deployer", "to", "usr", "local", "bin", "dep", "and", "create", "a", "deploy", "NUMBER", "php", "in", "root", "directory", "with", "content", "php", "server", "production", "foo", "bar", "NUMBER", "com", "NUMBER", "user", "foobar", "forwardAgent", "stage", "production", "env", "deploy_path", "var", "www", "foo", "bar", "NUMBER", "com", "set", "repository", "git", "bitbucket", "NUMBER", "org", "foo", "bar", "NUMBER", "git", "But", "if", "i", "run", "dep", "deploy", "production", "i", "see", "a", "error", "InvalidArgumentException", "Command", "deploy", "be", "not", "defined", "NUMBER", "Why", "Thank", "NUMBER", "Thank", "NUMBER", "All", "ok", "NUMBER", "But", "I", "have", "add", "recipe", "file", "NUMBER", "Here", "it", "be", "require", "vendor", "deployer", "deployer", "recipe", "laravel", "NUMBER", "php", "server", "prod", "NUMBER", "NUMBER", "user", "ubuntu", "password", "pass", "stage", "production", "env", "deploy_path", "var", "www", "html", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "set", "svnrepo", "LINK", "autodeployment", "trunk", "autodeploy", "set", "svnuser", "user", "set", "svnpass", "pass", "NUMBER", "task", "deploy", "update_code", "function", "svn", "C", "Program", "Files", "TortoiseSVN", "bin", "repository", "trim", "get", "svnrepo", "user", "trim", "get", "svnuser", "pass", "trim", "get", "svnpass", "run", "svn", "export", "force", "username", "user", "password", "pass", "repository", "release_path", "NUMBER", "NUMBER", "desc", "Updating", "code", "Hi", "today", "I", "tried", "to", "run", "Deployer", "in", "parallel", "mode", "but", "It", "just", "hung", "forever", "NUMBER", "After", "some", "debug", "I", "find", "that", "workers", "could", "not", "be", "created", "NUMBER", "Deployer", "starts", "workers", "with", "command", "php", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "bin", "dep", "worker", "master", "NUMBER", "NUMBER", "server", "dev", "NUMBER", "dev", "tag", "vvv", "And", "I", "get", "error", "when", "issue", "same", "command", "in", "console", "php", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "bin", "dep", "worker", "master", "NUMBER", "NUMBER", "server", "dev", "NUMBER", "dev", "tag", "vvv", "Could", "not", "open", "input", "file", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "bin", "dep", "I", "tried", "php", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "bin", "dep", "Could", "not", "open", "input", "file", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "bin", "dep", "cd", "home", "piotrek", "Vhosts", "deployer", "php", "phar", "deployer", "NUMBER", "phar", "worker", "master", "NUMBER", "NUMBER", "server", "dev", "NUMBER", "dev", "tag", "vvv", "Could", "not", "open", "input", "file", "phar", "deployer", "NUMBER", "phar", "And", "this", "works", "php", "r", "echo", "file_get_contents", "phar", "home", "piotrek", "Vhosts", "deployer", "deployer", "NUMBER", "phar", "bin", "dep", "PHP_EOL", "NUMBER", "This", "one", "also", "works", "cd", "home", "piotrek", "Vhosts", "deployer", "php", "deployer", "NUMBER", "phar", "worker", "master", "NUMBER", "NUMBER", "server", "dev", "NUMBER", "dev", "tag", "vvv", "What", "can", "be", "wrong", "Could", "you", "change", "code", "a", "little", "so", "it", "won", "t", "use", "phar", "wrapper", "or", "some", "option", "to", "change", "it", "My", "PHP", "version", "PHP", "NUMBER", "NUMBER", "ubuntu", "NUMBER", "cli", "build", "Apr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Copyright", "c", "NUMBER", "NUMBER", "The", "PHP", "Group", "Zend", "Engine", "v", "NUMBER", "Copyright", "c", "NUMBER", "NUMBER", "Zend", "Technologies", "with", "Zend", "OPcache", "v", "NUMBER", "Copyright", "c", "NUMBER", "NUMBER", "by", "Zend", "Technologies", "with", "Xdebug", "v", "NUMBER", "Copyright", "c", "NUMBER", "NUMBER", "by", "Derick", "Rethans", "PHP", "config", "php", "i", "grep", "phar", "Registered", "PHP", "Streams", "https", "ftps", "compress", "NUMBER", "zlib", "compress", "NUMBER", "bzip", "NUMBER", "php", "file", "glob", "data", "http", "ftp", "phar", "zip", "Phar", "based", "phar", "archives", "enable", "Tar", "based", "phar", "archives", "enable", "ZIP", "based", "phar", "archives", "enable", "phar", "NUMBER", "cache_list", "no", "value", "no", "value", "phar", "NUMBER", "readonly", "On", "On", "phar", "NUMBER", "require_hash", "On", "On", "My", "OS", "Linux", "Mint", "NUMBER", "Thank", "you", "for", "help", "I", "think", "permissions", "be", "correct", "ls", "la", "deployer", "NUMBER", "phar", "rwxr", "xr", "x", "NUMBER", "piotrek", "piotrek", "NUMBER", "NUMBER", "M", "maj", "NUMBER", "NUMBER", "NUMBER", "deployer", "NUMBER", "phar", "id", "uid", "NUMBER", "piotrek", "gid", "NUMBER", "piotrek", "group", "NUMBER", "piotrek", "NUMBER", "adm", "NUMBER", "cdrom", "NUMBER", "sudo", "NUMBER", "dip", "NUMBER", "plugdev", "NUMBER", "lpadmin", "NUMBER", "sambashare", "Hello", "NUMBER", "I", "have", "downloaded", "the", "latest", "release", "from", "the", "website", "and", "I", "be", "trying", "to", "upload", "file", "to", "the", "server", "NUMBER", "The", "procedure", "goes", "like", "normal", "there", "be", "no", "error", "on", "the", "screen", "but", "there", "be", "no", "file", "on", "the", "server", "either", "NUMBER", "This", "recipe", "worked", "with", "the", "NUMBER", "x", "version", "of", "deployer", "NUMBER", "Maybe", "there", "have", "be", "some", "change", "to", "PhpSecLib", "This", "be", "the", "output", "from", "the", "upload", "file", "task", "I", "overrided", "it", "it", "be", "not", "from", "the", "common", "recipe", "NUMBER", "There", "be", "no", "error", "message", "NUMBER", "E", "ecuting", "task", "deploy", "upload", "file", "on", "staging", "Run", "ls", "var", "www", "staging", "release", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Upload", "file", "composer", "NUMBER", "json", "to", "release", "composer", "NUMBER", "json", "Upload", "file", "composer", "NUMBER", "lock", "to", "release", "composer", "NUMBER", "lock", "Upload", "from", "public", "to", "release", "public", "elfet", "I", "had", "problem", "with", "upload", "function", "too", "Mentioned", "here", "LINK", "Just", "test", "with", "the", "revert", "commit", "NUMBER", "It", "still", "do", "not", "upload", "anything", "to", "the", "server", "NUMBER", "This", "be", "how", "I", "be", "uploading", "upload", "composer", "NUMBER", "json", "release", "composer", "NUMBER", "json", "After", "I", "change", "it", "to", "this", "it", "worked", "upload", "composer", "NUMBER", "json", "var", "www", "website", "release", "composer", "NUMBER", "json", "In", "NUMBER", "x", "the", "second", "parameter", "use", "to", "be", "relative", "to", "the", "deploy_path", "of", "the", "server", "NUMBER", "Now", "we", "have", "to", "specify", "the", "full", "path", "PS", "it", "do", "not", "seem", "to", "be", "relate", "to", "the", "strreplace", "windows", "fix", "you", "revert", "NUMBER", "So", "here", "be", "what", "I", "came", "up", "with", "path", "env", "deploy_path", "upload", "composer", "NUMBER", "json", "path", "NUMBER", "release", "composer", "NUMBER", "json", "I", "use", "env", "deploy_path", "so", "it", "uses", "the", "deploy", "path", "of", "the", "server", "we", "be", "connected", "to", "NUMBER", "This", "be", "so", "because", "we", "can", "use", "the", "same", "task", "on", "different", "servers", "with", "different", "deploy", "paths", "NUMBER", "As", "discussed", "in", "pull", "request", "NUMBER", "The", "problem", "seems", "to", "be", "in", "symfony", "console", "NUMBER", "I", "have", "implement", "the", "progress", "bar", "as", "per", "the", "docs", "LINK", "The", "error", "be", "There", "was", "NUMBER", "error", "NUMBER", "Deployer", "FunctionsTest", "testUpload", "Argument", "NUMBER", "pass", "to", "Symfony", "Component", "Console", "Helper", "Helper", "strlenWithoutDecoration", "must", "implement", "interface", "Symfony", "Component", "Console", "Formatter", "OutputFormatterInterface", "null", "given", "call", "in", "home", "koce", "Projects", "deployer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Helper", "ProgressBar", "NUMBER", "php", "on", "line", "NUMBER", "and", "defined", "Yes", "but", "I", "can", "t", "find", "where", "the", "problem", "be", "I", "have", "implement", "the", "progress", "bar", "as", "per", "the", "docs", "NUMBER", "I", "get", "the", "output", "stream", "from", "deployer", "and", "pass", "it", "to", "the", "progress", "bar", "NUMBER", "The", "error", "be", "in", "the", "symfony", "code", "NUMBER", "Yes", "this", "error", "happens", "only", "when", "we", "run", "the", "test", "NUMBER", "Is", "this", "how", "we", "create", "the", "output", "stream", "for", "the", "test", "procedure", "LINK", "L", "NUMBER", "So", "this", "issue", "have", "a", "next", "problem", "NUMBER", "The", "ProgressBar", "should", "be", "configurable", "NUMBER", "As", "example", "php", "upload", "tmp", "temporary", "NUMBER", "file", "var", "www", "domain", "NUMBER", "com", "tmp", "temporary", "NUMBER", "file", "true", "The", "third", "parameter", "indicated", "for", "use", "ProgressBar", "NUMBER", "NUMBER", "How", "this", "work", "in", "parallel", "What", "about", "parallel", "Looks", "like", "this", "needs", "rebasing", "NUMBER", "Please", "rebase", "NUMBER", "I", "wanted", "to", "contribute", "to", "the", "documentation", "about", "global", "variables", "since", "there", "s", "almost", "nothing", "about", "them", "NUMBER", "But", "then", "I", "realized", "that", "even", "I", "don", "t", "really", "know", "that", "much", "so", "here", "be", "some", "question", "What", "be", "the", "difference", "between", "environment", "and", "global", "variables", "When", "should", "I", "use", "which", "elfet", "that", "sounds", "great", "NUMBER", "I", "ve", "be", "struggling", "with", "sharing", "variables", "from", "a", "sanity", "checking", "task", "in", "a", "parallel", "deployment", "NUMBER", "Currently", "I", "m", "listing", "out", "the", "servers", "by", "role", "that", "the", "deploy", "would", "affect", "and", "confirming", "branch", "tag", "NUMBER", "Unfortunately", "I", "can", "t", "keep", "all", "the", "logic", "there", "because", "that", "task", "be", "isolated", "from", "the", "other", "workers", "NUMBER", "screenshot", "from", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "LINK", "NUMBER", "b", "NUMBER", "e", "NUMBER", "NUMBER", "c", "NUMBER", "a", "NUMBER", "e", "NUMBER", "a", "NUMBER", "e", "NUMBER", "png", "Is", "this", "intentional", "I", "think", "that", "the", "icons", "should", "appear", "before", "the", "tasks", "description", "after", "a", "task", "finishes", "and", "not", "in", "the", "place", "of", "the", "letter", "x", "in", "Executing", "NUMBER", "I", "have", "no", "idea", "sorry", "NUMBER", "I", "can", "confirm", "it", "works", "perfectly", "on", "Mac", "screen", "shot", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "NUMBER", "LINK", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "e", "NUMBER", "c", "NUMBER", "c", "NUMBER", "c", "NUMBER", "png", "Hi", "I", "just", "debug", "about", "this", "problem", "it", "be", "about", "ascii", "cursor", "control", "char", "NUMBER", "based", "wiki", "LINK", "_escape_code", "I", "find", "NUMBER", "way", "to", "fix", "this", "on", "ubuntu", "no", "mac", "for", "test", "NUMBER", "will", "have", "NUMBER", "chars", "position", "so", "I", "have", "add", "NUMBER", "NUMBER", "D", "means", "move", "cursor", "left", "NUMBER", "char", "NUMBER", "or", "just", "add", "r", "to", "go", "back", "to", "line", "start", "position", "NUMBER", "php", "Deployer", "Console", "Output", "OutputWatcher", "line", "NUMBER", "this", "output", "write", "NUMBER", "k", "NUMBER", "NUMBER", "A", "NUMBER", "NUMBER", "D", "n", "false", "type", "or", "this", "output", "write", "NUMBER", "k", "NUMBER", "NUMBER", "A", "r", "n", "false", "type", "Deployer", "Executor", "Informer", "line", "NUMBER", "this", "output", "write", "NUMBER", "k", "NUMBER", "NUMBER", "A", "NUMBER", "NUMBER", "D", "TAG", "TAG", "n", "or", "this", "output", "write", "NUMBER", "k", "NUMBER", "NUMBER", "A", "r", "TAG", "TAG", "n", "any", "one", "can", "help", "to", "test", "on", "mac", "excellent", "This", "project", "has", "many", "pull", "request", "NUMBER", "I", "think", "it", "would", "be", "better", "if", "contributor", "squash", "multiple", "intermediate", "commit", "while", "developing", "before", "create", "pull", "request", "NUMBER", "To", "be", "best", "one", "pull", "request", "only", "has", "one", "commit", "NUMBER", "I", "do", "agree", "with", "the", "one", "PR", "feature", "mentality", "NUMBER", "I", "think", "squashing", "the", "commit", "should", "not", "be", "mandatory", "NUMBER", "Whether", "it", "s", "be", "necessary", "should", "be", "decided", "based", "on", "the", "particular", "PR", "itself", "I", "think", "NUMBER", "I", "m", "open", "minded", "about", "the", "issue", "though", "NUMBER", "This", "pull", "request", "be", "fix", "bug", "of", "pull", "request", "NUMBER", "NUMBER", "Note", "This", "code", "use", "php", "if", "len", "TAG", "it", "s", "performance", "better", "than", "php", "if", "NUMBER", "strpos", "name", "protectedName", "NUMBER", "NUMBER", "I", "use", "in", "my", "application", "Is", "there", "any", "way", "for", "run", "this", "test", "before", "deploy", "Currently", "i", "run", "manually", "this", "test", "with", "following", "script", "php", "app", "new", "Application", "Codeception", "Codecept", "VERSION", "app", "setAutoExit", "false", "app", "add", "new", "Build", "build", "app", "add", "new", "Run", "run", "app", "run", "new", "ArrayInput", "array", "build", "test", "isset", "opts", "t", "opts", "t", "coverage", "isset", "opts", "c", "coverage", "html", "coverage", "xml", "app", "run", "new", "StringInput", "run", "unit", "NUMBER", "test", "NUMBER", "NUMBER", "coverage", "Another", "problem", "be", "that", "composer", "execute", "with", "param", "no", "dev", "LINK", "L", "NUMBER", "leandrogehlen", "I", "think", "you", "can", "override", "this", "task", "for", "your", "case", "NUMBER", "Add", "this", "code", "to", "deploy", "NUMBER", "php", "file", "after", "line", "require", "recipe", "common", "NUMBER", "php", "php", "Installing", "vendors", "tasks", "NUMBER", "task", "deploy", "vendors", "function", "if", "commandExist", "composer", "composer", "composer", "else", "run", "cd", "release_path", "curl", "sS", "LINK", "php", "composer", "php", "composer", "NUMBER", "phar", "run", "cd", "release_path", "env_vars", "composer", "install", "dev", "verbose", "prefer", "dist", "optimize", "autoloader", "no", "progress", "no", "interaction", "desc", "Installing", "vendors", "i", "made", "what", "oanhnn", "suggested", "I", "think", "it", "could", "be", "created", "stage", "dependencies", "NUMBER", "This", "means", "the", "production", "stage", "occur", "after", "the", "test", "stage", "but", "if", "test", "fail", "do", "not", "will", "run", "production", "The", "problem", "of", "the", "test", "run", "locally", "that", "be", "will", "not", "be", "replicated", "deploy", "routine", "NUMBER", "thus", "it", "be", "necessary", "update", "sources", "and", "composer", "manually", "I", "add", "deploy", "vendors", "dev", "task", "NUMBER", "Why", "don", "t", "you", "add", "a", "task", "like", "this", "to", "common", "NUMBER", "php", "php", "task", "deploy", "vendors", "dev", "function", "if", "commandExist", "composer", "composer", "composer", "else", "run", "cd", "release_path", "curl", "sS", "LINK", "php", "composer", "php", "composer", "NUMBER", "phar", "run", "cd", "release_path", "composer", "install", "verbose", "prefer", "dist", "no", "progress", "no", "interaction", "desc", "Installing", "vendors", "including", "require", "dev", "kenjis", "i", "think", "that", "should", "be", "use", "be", "a", "param", "like", "set", "composer_args", "no", "dev", "elfet", "what", "do", "you", "think", "lasselehtinen", "We", "run", "the", "task", "composer", "install", "twice", "NUMBER", "One", "be", "for", "test", "the", "other", "be", "for", "deployment", "NUMBER", "So", "I", "think", "two", "tasks", "deploy", "vendors", "dev", "and", "deploy", "vendors", "be", "easy", "to", "understand", "NUMBER", "Is", "it", "possible", "to", "use", "set", "Hello", "I", "m", "trying", "to", "swap", "the", "database", "per", "release", "too", "NUMBER", "By", "doing", "to", "the", "following", "steps", "NUMBER", "NUMBER", "Export", "old", "database", "NUMBER", "Create", "new", "database", "suffixing", "with", "latest", "release", "int", "NUMBER", "Import", "old", "database", "into", "newly", "created", "one", "Step", "NUMBER", "and", "NUMBER", "or", "ok", "NUMBER", "Then", "on", "step", "NUMBER", "run", "mysql", "pmypwd", "e", "newDatabaseName", "TAG", "deploy_path", "shared", "oldDatabaseName", "NUMBER", "sql", "Sorry", "for", "the", "trouble", "again", "NUMBER", "smile", "Before", "commit", "we", "can", "run", "php", "cs", "fixer", "fix", "NUMBER", "and", "normalize", "all", "file", "of", "the", "project", "NUMBER", "This", "can", "help", "on", "change", "on", "header", "comment", "doing", "this", "only", "in", "NUMBER", "php_cs", "NUMBER", "Some", "fixers", "be", "commented", "because", "they", "need", "evaluation", "and", "test", "to", "validate", "if", "not", "alter", "application", "behavior", "NUMBER", "After", "accepted", "the", "PR", "just", "run", "php", "cs", "fixer", "fix", "NUMBER", "on", "project", "root", "NUMBER", "Standard", "code", "style", "and", "licence", "header", "change", "elfet", "check", "LINK", "and", "see", "the", "change", "that", "this", "will", "Dear", "gpupo", "Your", "idea", "use", "php", "cs", "fixer", "be", "very", "good", "but", "i", "think", "we", "should", "use", "code", "style", "follows", "PSR", "NUMBER", "LINK", "fig", "fig", "standards", "blob", "master", "accepted", "PSR", "NUMBER", "basic", "code", "standard", "NUMBER", "md", "and", "other", "rulers", "NUMBER", "I", "was", "see", "the", "change", "in", "P", "NUMBER", "PO", "NUMBER", "cebfbe", "LINK", "i", "think", "it", "had", "inconsequential", "change", "NUMBER", "And", "i", "think", "elfet", "should", "implement", "himself", "NUMBER", "Add", "progress", "indicator", "to", "the", "upload", "function", "when", "uploading", "to", "a", "directory", "elfet", "I", "have", "implement", "this", "with", "the", "Symfony", "progress", "bar", "NUMBER", "Will", "submit", "the", "pull", "request", "next", "monday", "NUMBER", "NUMBER", "I", "had", "issue", "where", "deploy", "writable", "be", "not", "actually", "change", "the", "configured", "directories", "writable", "NUMBER", "Here", "be", "the", "full", "output", "with", "vvv", "NUMBER", "The", "release", "be", "CentOS", "NUMBER", "Something", "wrong", "with", "the", "chmod", "detection", "here", "since", "it", "returns", "chmod", "miss", "operand", "Executing", "task", "deploy", "writable", "\u00d4\u00f1\u00c0", "on", "puuhax", "Run", "ps", "aux", "grep", "E", "a", "pache", "h", "ttpd", "_", "www", "w", "ww", "data", "n", "ginx", "grep", "v", "root", "head", "NUMBER", "cut", "d", "f", "NUMBER", "nginx", "Run", "cd", "usr", "share", "nginx", "html", "project", "release", "NUMBER", "chmod", "NUMBER", "NUMBER", "true", "chmod", "miss", "operand", "Try", "chmod", "help", "for", "more", "information", "NUMBER", "Run", "cd", "usr", "share", "nginx", "html", "project", "release", "NUMBER", "if", "hash", "setfacl", "NUMBER", "dev", "null", "then", "echo", "true", "fi", "true", "Run", "cd", "usr", "share", "nginx", "html", "project", "release", "NUMBER", "setfacl", "R", "m", "u", "nginx", "rwX", "m", "u", "whoami", "rwX", "storage", "vendor", "Run", "cd", "usr", "share", "nginx", "html", "project", "release", "NUMBER", "setfacl", "dR", "m", "u", "nginx", "rwX", "m", "u", "whoami", "rwX", "storage", "vendor", "do", "on", "puuhax", "Ok", "I", "have", "circumvented", "this", "problem", "by", "run", "this", "manually", "for", "now", "task", "storage", "writable", "function", "run", "cd", "release_path", "chmod", "R", "NUMBER", "storage", "run", "cd", "release_path", "chmod", "R", "NUMBER", "vendor", "root", "puuhax", "which", "setfacl", "usr", "bin", "setfacl", "root", "puuhax", "if", "hash", "setfacl", "NUMBER", "dev", "null", "then", "echo", "true", "fi", "true", "Hi", "That", "be", "the", "exact", "same", "command", "by", "that", "be", "run", "by", "deploy", "writable", "Well", "I", "run", "it", "manually", "anyway", "the", "end", "result", "be", "the", "same", "NUMBER", "One", "of", "package", "requires", "a", "subfolder", "to", "be", "writable", "NUMBER", "If", "run", "chmod", "R", "NUMBER", "vendor", "it", "runs", "fine", "NUMBER", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "UTC", "PHP", "Fatal", "error", "Uncaught", "exception", "ReflectionException", "with", "message", "Class", "bugsnag", "do", "not", "exist", "in", "usr", "share", "nginx", "html", "project", "release", "NUMBER", "vendor", "laravel", "framework", "src", "Illuminate", "Container", "Container", "NUMBER", "php", "NUMBER", "Hmm", "here", "the", "getfacl", "before", "and", "after", "run", "the", "recursive", "chmod", "NUMBER", "root", "puuhax", "current", "getfacl", "vendor", "file", "vendor", "owner", "root", "group", "root", "user", "rwx", "user", "root", "rwx", "user", "nginx", "rwx", "group", "r", "x", "mask", "rwx", "other", "r", "x", "default", "user", "rwx", "default", "user", "root", "rwx", "default", "user", "nginx", "rwx", "default", "group", "r", "x", "default", "mask", "rwx", "default", "other", "r", "x", "root", "puuhax", "current", "chmod", "R", "NUMBER", "vendor", "root", "puuhax", "current", "getfacl", "vendor", "file", "vendor", "owner", "root", "group", "root", "user", "rwx", "user", "root", "rwx", "user", "nginx", "rwx", "group", "r", "x", "mask", "rwx", "other", "rwx", "default", "user", "rwx", "default", "user", "root", "rwx", "default", "user", "nginx", "rwx", "default", "group", "r", "x", "default", "mask", "rwx", "default", "other", "r", "x", "Notice", "how", "the", "other", "be", "now", "change", "to", "rwx", "NUMBER", "Then", "I", "realized", "that", "php", "fpm", "be", "run", "on", "the", "username", "apache", "instead", "of", "nginx", "NUMBER", "Changing", "that", "and", "restarting", "php", "fpm", "did", "the", "trick", "NUMBER", "Hello", "I", "m", "trying", "to", "customise", "the", "deploy", "script", "use", "the", "demo", "task", "deploy", "deploy", "prepare", "deploy", "update_code", "deploy", "vendors", "deploy", "symlink", "deploy", "cleanup", "Now", "when", "run", "dep", "deploy", "staging", "vvv", "I", "get", "the", "following", "error", "with", "stacktrace", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Europe", "Berlin", "PHP", "Fatal", "error", "Uncaught", "exception", "LogicException", "with", "message", "An", "argument", "with", "name", "stage", "already", "exists", "NUMBER", "in", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Input", "InputDefinition", "NUMBER", "php", "NUMBER", "Stack", "trace", "NUMBER", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Input", "InputDefinition", "addArgument", "Object", "Symfony", "Component", "Console", "Input", "InputArgument", "NUMBER", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "argument", "stage", "NUMBER", "Run", "tasks", "only", "NUMBER", "NUMBER", "Users", "nicolaswidart", "Sites", "Asguard", "presentation", "site", "deploy", "NUMBER", "php", "NUMBER", "require", "phar", "usr", "loc", "NUMBER", "NUMBER", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "Users", "nicolasw", "NUMBER", "NUMBER", "usr", "local", "bin", "dep", "NUMBER", "require", "phar", "usr", "loc", "NUMBER", "NUMBER", "main", "throw", "in", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Input", "InputDefinition", "NUMBER", "php", "on", "line", "NUMBER", "Here", "be", "my", "full", "deploy", "NUMBER", "php", "file", "php", "TAG", "user", "forge", "identityFile", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "stage", "staging", "env", "deploy_path", "home", "forge", "staging", "NUMBER", "asgardcms", "NUMBER", "com", "set", "repository", "git", "github", "NUMBER", "com", "AsgardCms", "Website", "NUMBER", "git", "task", "deploy", "deploy", "prepare", "deploy", "update_code", "deploy", "vendors", "deploy", "symlink", "deploy", "cleanup", "Did", "I", "miss", "something", "Thanks", "Not", "sure", "if", "this", "be", "cause", "your", "problem", "but", "you", "don", "t", "need", "to", "include", "the", "common", "recipe", "if", "you", "include", "one", "of", "the", "framework", "recipes", "like", "in", "your", "case", "NUMBER", "Try", "remove", "it", "and", "see", "if", "it", "helps", "Also", "one", "minor", "thing", "the", "parameters", "to", "identityFile", "be", "required", "only", "if", "your", "ssh", "keys", "be", "not", "in", "their", "default", "place", "or", "private", "key", "has", "a", "password", "set", "NUMBER", "So", "you", "can", "do", "just", "identityFile", "NUMBER", "Hello", "thanks", "for", "you", "responses", "NUMBER", "When", "remove", "the", "require", "line", "I", "get", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Europe", "Berlin", "PHP", "Warning", "array_map", "An", "error", "occur", "while", "invoking", "the", "map", "callback", "in", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "on", "line", "NUMBER", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Europe", "Berlin", "PHP", "Stack", "trace", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Europe", "Berlin", "PHP", "NUMBER", "main", "usr", "local", "bin", "dep", "NUMBER", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Europe", "Berlin", "PHP", "NUMBER", "require", "usr", "local", "bin", "dep", "NUMBER", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Europe", "Berlin", "PHP", "NUMBER", "require", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Europe", "Berlin", "PHP", "NUMBER", "task", "Users", "nicolaswidart", "Sites", "Asguard", "presentation", "site", "deploy", "NUMBER", "php", "NUMBER", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Europe", "Berlin", "PHP", "NUMBER", "array_map", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Europe", "Berlin", "PHP", "Fatal", "error", "Uncaught", "exception", "RuntimeException", "with", "message", "Object", "deploy", "cleanup", "do", "not", "exist", "in", "ScenarioCollection", "NUMBER", "in", "phar", "usr", "local", "bin", "dep", "src", "Collection", "Collection", "NUMBER", "php", "NUMBER", "Stack", "trace", "NUMBER", "phar", "usr", "local", "bin", "dep", "src", "Task", "Scenario", "ScenarioCollection", "NUMBER", "php", "NUMBER", "Deployer", "Collection", "Collection", "get", "deploy", "cleanup", "NUMBER", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Scenario", "ScenarioCollection", "get", "deploy", "cleanup", "NUMBER", "internal", "function", "closure", "deploy", "cleanup", "NUMBER", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "array_map", "Object", "Closure", "Array", "NUMBER", "Users", "nicolaswidart", "Sites", "Asguard", "presentation", "site", "deploy", "NUMBER", "php", "NUMBER", "task", "deploy", "Array", "NUMBER", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "Users", "nicolasw", "NUMBER", "NUMBER", "usr", "local", "bin", "dep", "NUMBER", "require", "phar", "usr", "loc", "NUMBER", "NUMBER", "main", "throw", "in", "phar", "usr", "local", "bin", "dep", "src", "Collection", "Collection", "NUMBER", "php", "on", "line", "NUMBER", "That", "be", "because", "the", "symfony", "recipe", "the", "task", "name", "be", "cleanup", "not", "deploy", "cleanup", "NUMBER", "Don", "t", "know", "about", "the", "Symfony", "recipe", "but", "by", "default", "deploy", "runs", "the", "following", "tasks", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "create_cache_dir", "deploy", "shared", "deploy", "writable", "deploy", "assets", "deploy", "vendors", "deploy", "assetic", "dump", "deploy", "cache", "warmup", "deploy", "symlink", "cleanup", "desc", "Deploy", "your", "project", "So", "you", "can", "either", "use", "that", "or", "overwrite", "it", "like", "you", "did", "NUMBER", "But", "anyway", "you", "need", "to", "change", "the", "deploy", "cleanup", "to", "just", "cleanup", "NUMBER", "Ah", "ok", "thank", "you", "NUMBER", "Would", "be", "nice", "to", "have", "to", "docs", "update", "then", "smile", "LINK", "NUMBER", "Quick", "side", "question", "how", "could", "I", "specify", "a", "specific", "branch", "on", "a", "git", "repository", "set", "repository", "git", "github", "NUMBER", "com", "AsgardCms", "Website", "NUMBER", "git", "Thank", "you", "Edit", "side", "question", "answered", "here", "LINK", "I", "agree", "with", "the", "docs", "be", "incomplete", "NUMBER", "I", "just", "trying", "out", "deployer", "but", "lot", "of", "the", "stuff", "be", "miss", "or", "be", "just", "not", "explained", "NUMBER", "The", "branch", "thing", "be", "one", "I", "actually", "find", "it", "out", "by", "browsing", "through", "the", "source", "code", "NUMBER", "Hello", "I", "m", "trying", "to", "understand", "how", "to", "use", "the", "forwardAgent", "part", "of", "the", "deploy", "script", "NUMBER", "I", "cannot", "seem", "to", "find", "any", "documentation", "about", "this", "NUMBER", "I", "d", "like", "to", "use", "my", "public", "ssh", "key", "to", "log", "into", "a", "server", "naively", "I", "tried", "forwardAgent", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "but", "doesn", "t", "work", "NUMBER", "Could", "anyone", "point", "me", "in", "the", "right", "direction", "Thanks", "I", "m", "sorry", "I", "overlooked", "the", "server", "part", "LINK", "I", "also", "had", "to", "provide", "private", "key", "and", "passphrase", "NUMBER", "identityFile", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "NUMBER", "nWidart", "See", "more", "forwardAgent", "function", "in", "here", "LINK", "elfet", "I", "think", "we", "need", "more", "documents", "about", "server", "stage", "and", "setting", "up", "for", "authentication", "into", "server", "NUMBER", "I", "want", "to", "write", "a", "post", "processing", "of", "exception", "in", "v", "NUMBER", "How", "do", "I", "write", "a", "process", "corresponding", "to", "v", "NUMBER", "of", "the", "deploy", "rollback", "task", "Thank", "you", "for", "your", "quick", "reply", "NUMBER", "I", "want", "to", "delete", "new", "release", "if", "something", "goes", "wrong", "php", "task", "deploy", "rollback", "function", "if", "env", "get", "is_new_release", "false", "server", "config", "getName", "writeln", "TAG", "Rolling", "back", "to", "previous", "release", "on", "server", "server", "TAG", "releasePath", "env", "getReleasePath", "Remove", "release", "run", "rm", "rf", "releasePath", "else", "writeln", "TAG", "If", "you", "want", "to", "rollback", "run", "rollback", "task", "TAG", "In", "v", "NUMBER", "the", "deploy", "rollback", "task", "was", "call", "in", "rollbackOnDeploy", "of", "RunTaskCommand", "class", "when", "an", "exception", "be", "throw", "NUMBER", "If", "the", "new", "release", "be", "not", "delete", "when", "something", "goes", "wrong", "I", "think", "it", "becomes", "a", "state", "that", "can", "not", "be", "rollback", "NUMBER", "I", "use", "the", "common", "recipe", "and", "define", "the", "deploy", "task", "as", "following", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "vendors", "deploy", "symlink", "cleanup", "The", "Initial", "state", "of", "the", "release", "directory", "NUMBER", "NUMBER", "TAG", "set", "protected", "a", "NUMBER", "b", "NUMBER", "true", "env", "set", "protected", "NUMBER", "a", "some", "other", "value", "Good", "point", "I", "didn", "t", "think", "of", "the", "dot", "notation", "NUMBER", "I", "ll", "refactor", "the", "logic", "so", "it", "would", "handle", "such", "a", "situation", "NUMBER", "I", "like", "this", "one", "thing", "though", "setProtected", "should", "be", "setAsProtected", "NUMBER", "What", "be", "your", "thoughts", "on", "that", "Well", "if", "you", "really", "want", "I", "can", "implement", "it", "as", "setProtected", "it", "just", "sounds", "a", "bit", "off", "to", "me", "NUMBER", "Anyway", "here", "s", "a", "longer", "explanation", "why", "I", "think", "setProtected", "would", "be", "slightly", "off", "NUMBER", "setProtected", "NUMBER", "in", "a", "proper", "sentence", "would", "be", "Set", "this", "key", "protected", "NUMBER", "or", "even", "better", "Set", "this", "key", "to", "be", "protected", "NUMBER", "This", "implies", "that", "there", "s", "an", "already", "exist", "key", "which", "I", "now", "want", "to", "set", "to", "be", "protected", "NUMBER", "What", "the", "method", "really", "should", "mean", "be", "that", "I", "want", "to", "set", "a", "new", "key", "as", "a", "protected", "key", "NUMBER", "So", "the", "setAsProtected", "NUMBER", "would", "then", "mean", "Set", "this", "key", "as", "protected", "NUMBER", "which", "properly", "implies", "what", "I", "really", "meant", "NUMBER", "Here", "s", "some", "example", "which", "further", "illustrates", "what", "I", "think", "the", "difference", "be", "between", "the", "two", "names", "php", "This", "function", "sets", "an", "exist", "key", "to", "be", "protected", "NUMBER", "param", "string", "key", "The", "key", "which", "needs", "to", "be", "protected", "function", "setProtected", "key", "NUMBER", "Sets", "a", "new", "environment", "parameter", "as", "protected", "NUMBER", "param", "string", "key", "The", "parameter", "s", "key", "param", "string", "bool", "int", "array", "value", "The", "key", "s", "value", "function", "setAsProtected", "key", "value", "NUMBER", "Originally", "when", "you", "propose", "the", "setProtected", "method", "and", "I", "still", "didn", "t", "read", "the", "code", "examples", "I", "thought", "you", "meant", "this", "php", "env", "set", "server", "name", "config", "getName", "NUMBER", "env", "setProtected", "server", "Then", "again", "I", "can", "roll", "with", "setProtected", "if", "you", "really", "want", "NUMBER", "NUMBER", "Thanks", "I", "ll", "get", "to", "it", "as", "soon", "as", "I", "have", "some", "free", "time", "then", "NUMBER", "I", "add", "the", "modifications", "and", "test", "NUMBER", "One", "thing", "though", "the", "logic", "of", "the", "new", "test", "be", "to", "set", "something", "as", "protected", "with", "the", "setAsProtected", "method", "then", "check", "if", "the", "set", "method", "would", "work", "after", "that", "NUMBER", "Now", "this", "of", "course", "doesn", "t", "test", "what", "happens", "if", "I", "set", "new", "parameters", "with", "the", "setAsProtected", "method", "and", "then", "try", "to", "use", "it", "again", "instead", "of", "set", "NUMBER", "Of", "course", "since", "internally", "the", "setAsProtected", "method", "calls", "the", "set", "method", "it", "shouldn", "t", "be", "a", "problem", "but", "I", "thought", "it", "worth", "mentioning", "anyway", "NUMBER", "Note", "if", "this", "gets", "accepted", "I", "ll", "write", "the", "documentation", "for", "this", "and", "NUMBER", "the", "next", "week", "NUMBER", "ZeeCoder", "elfet", "Did", "you", "test", "with", "case", "php", "public", "function", "testContainingProtectedParam", "env", "new", "Environment", "env", "set", "not_protected", "env", "setAsProtected", "not_protected", "NUMBER", "protected", "value", "throw", "exception", "ok", "env", "setAsProtected", "not_protected", "value", "throw", "exception", "error", "env", "setAsProtected", "not_protect", "value", "Cause", "be", "LINK", "L", "NUMBER", "Please", "fix", "this", "problem", "hmm", "I", "can", "t", "fix", "it", "until", "monday", "I", "only", "have", "my", "mobile", "on", "the", "weekend", "NUMBER", "ZeeCoder", "I", "fix", "in", "PR", "NUMBER", "elfet", "Are", "all", "variables", "can", "be", "override", "What", "was", "so", "different", "set", "function", "I", "thought", "about", "that", "too", "because", "it", "s", "just", "so", "easy", "to", "implement", "it", "NUMBER", "But", "I", "think", "protected", "env", "vars", "be", "protected", "for", "a", "reason", "NUMBER", "Implementing", "an", "override", "method", "would", "let", "the", "users", "break", "things", "exactly", "what", "we", "want", "tot", "avoid", "NUMBER", "I", "think", "everything", "can", "be", "solve", "easily", "without", "overriding", "protected", "env", "vars", "NUMBER", "Also", "I", "think", "this", "discussion", "can", "be", "close", "the", "only", "thing", "needs", "to", "be", "do", "be", "add", "this", "to", "the", "documentation", "NUMBER", "Which", "I", "will", "do", "NUMBER", "Seems", "like", "the", "deploy", "shared", "was", "forgotten", "from", "the", "Laravel", "recipe", "NUMBER", "I", "have", "the", "following", "script", "php", "server", "main", "myserver", "NUMBER", "com", "stage", "producao", "env", "deploy_path", "usr", "share", "nginx", "html", "web", "app", "user", "admin", "pemFile", "NUMBER", "ssh", "key", "NUMBER", "pem", "that", "results", "in", "an", "exception", "php", "file_get_contents", "NUMBER", "ssh", "key", "NUMBER", "pem", "fail", "to", "open", "stream", "No", "such", "file", "or", "directory", "in", "phar", "C", "ProgramData", "Deployer", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "on", "line", "NUMBER", "My", "solution", "was", "php", "home", "isset", "_SERVER", "HOMEDRIVE", "_SERVER", "HOMEDRIVE", "NUMBER", "_SERVER", "HOMEPATH", "_SERVER", "HOME", "server", "main", "myserver", "NUMBER", "com", "stage", "producao", "env", "deploy_path", "usr", "share", "nginx", "html", "web", "app", "user", "admin", "pemFile", "home", "NUMBER", "NUMBER", "ssh", "key", "NUMBER", "pem", "Yes", "i", "ll", "do", "I", "implement", "the", "solution", "we", "aggreed", "upon", "in", "issue", "NUMBER", "The", "problem", "be", "that", "it", "breaks", "an", "exist", "test", "and", "I", "can", "t", "figure", "out", "why", "NUMBER", "Can", "someone", "help", "me", "out", "with", "this", "If", "this", "issue", "be", "resolve", "I", "ll", "add", "test", "for", "the", "new", "functionality", "too", "NUMBER", "Here", "s", "the", "output", "of", "phpunit", "bash", "PHPUnit", "NUMBER", "by", "Sebastian", "Bergmann", "and", "contributors", "NUMBER", "Configuration", "read", "from", "home", "zeecoder", "work", "deployer", "phpunit", "NUMBER", "xml", "NUMBER", "F", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Time", "NUMBER", "seconds", "Memory", "NUMBER", "Mb", "There", "was", "NUMBER", "failure", "NUMBER", "Deployer", "Server", "BuilderTest", "testEnv", "Expectation", "fail", "for", "method", "name", "be", "equal", "to", "TAG", "when", "invoked", "NUMBER", "time", "s", "Parameter", "NUMBER", "for", "invocation", "Deployer", "Server", "Environment", "set", "server", "Array", "NUMBER", "do", "not", "match", "expected", "value", "NUMBER", "Failed", "asserting", "that", "two", "strings", "be", "equal", "NUMBER", "Expected", "Actual", "name", "server", "home", "zeecoder", "work", "deployer", "src", "Server", "Builder", "NUMBER", "php", "NUMBER", "home", "zeecoder", "work", "deployer", "test", "src", "Server", "BuilderTest", "NUMBER", "php", "NUMBER", "usr", "share", "php", "PHPUnit", "TextUI", "Command", "NUMBER", "php", "NUMBER", "usr", "share", "php", "PHPUnit", "TextUI", "Command", "NUMBER", "php", "NUMBER", "FAILURES", "Tests", "NUMBER", "Assertions", "NUMBER", "Failures", "NUMBER", "I", "think", "it", "should", "be", "okay", "now", "NUMBER", "I", "had", "to", "redo", "this", "due", "to", "incompatibilities", "with", "the", "resent", "change", "NUMBER", "Also", "it", "contained", "NUMBER", "commit", "for", "something", "really", "simple", "NUMBER", "I", "think", "the", "recipies", "should", "use", "LINK", "for", "their", "shell", "command", "argument", "NUMBER", "In", "general", "cmd", "argument", "should", "be", "escaped", "somehow", "if", "not", "use", "escapeshellarg", "at", "least", "use", "single", "quotes", "for", "parameters", "which", "could", "contain", "spaces", "or", "escape", "the", "spaces", "As", "an", "example", "which", "should", "currently", "break", "only", "through", "looking", "at", "current", "code", "LINK", "L", "NUMBER", "Because", "they", "be", "just", "concatenated", "with", "an", "space", "and", "then", "directly", "set", "into", "the", "cmd", "line", "it", "will", "fail", "for", "folders", "with", "an", "space", "NUMBER", "Or", "be", "I", "wrong", "here", "Its", "just", "an", "observation", "I", "did", "while", "looking", "at", "the", "code", "for", "an", "other", "issue", "not", "test", "though", "NUMBER", "I", "just", "keep", "myselft", "to", "the", "linked", "sourcecode", "with", "this", "example", "dirs", "join", "some", "folder", "with", "spaces", "in", "the", "path", "some", "other", "folder", "without", "spaces", "echo", "sudo", "chmod", "a", "whoami", "allow", "delete", "write", "append", "file_inherit", "directory_inherit", "dirs", "would", "then", "expand", "to", "echo", "sudo", "chmod", "a", "whoami", "allow", "delete", "write", "append", "file_inherit", "directory_inherit", "some", "folder", "with", "spaces", "in", "the", "path", "some", "other", "folder", "without", "spaces", "where", "as", "it", "would", "try", "to", "chmod", "the", "folders", "some", "folder", "with", "spaces", "in", "the", "path", "some", "other", "folder", "without", "spaces", "but", "the", "expected", "behaviour", "would", "be", "some", "folder", "with", "spaces", "in", "the", "path", "some", "other", "folder", "without", "spaces", "So", "you", "say", "I", "have", "to", "escape", "the", "directory", "paths", "for", "things", "like", "writable", "dirs", "myself", "if", "they", "contain", "a", "space", "You", "can", "t", "escape", "shared_files", "because", "it", "uses", "dirname", "LINK", "L", "NUMBER", "For", "example", "TAG", "this", "doesn", "t", "tell", "you", "much", "about", "what", "s", "name", "be", "it", "and", "it", "also", "conflict", "with", "some", "test", "where", "the", "env", "name", "value", "NUMBER", "I", "thought", "about", "prefixing", "them", "like", "env", "server", "name", "NUMBER", "but", "it", "starts", "to", "feel", "like", "there", "s", "just", "too", "much", "magic", "involved", "that", "would", "happen", "under", "the", "hood", "NUMBER", "What", "do", "you", "think", "Oh", "I", "see", "so", "I", "could", "implement", "the", "following", "code", "in", "the", "Builder", "constructor", "php", "NUMBER", "env", "set", "server", "name", "config", "getName", "host", "config", "getHost", "NUMBER", "NUMBER", "So", "that", "later", "in", "a", "task", "I", "could", "access", "them", "as", "follows", "php", "serverName", "env", "server", "NUMBER", "name", "serverHost", "env", "server", "NUMBER", "host", "I", "would", "like", "that", "approach", "NUMBER", "One", "question", "though", "can", "I", "get", "the", "full", "array", "just", "by", "saying", "env", "server", "Okay", "I", "ll", "check", "out", "it", "later", "then", "NUMBER", "But", "about", "the", "Builder", "class", "do", "that", "look", "okay", "to", "you", "Because", "if", "it", "do", "I", "ll", "be", "sure", "to", "implement", "that", "feature", "and", "if", "that", "s", "do", "I", "think", "I", "ll", "create", "another", "pull", "request", "to", "fix", "the", "NUMBER", "party", "slack", "recipe", "too", "NUMBER", "I", "m", "closing", "this", "issue", "in", "favor", "of", "the", "NUMBER", "pull", "request", "NUMBER", "I", "m", "agree", "but", "output", "hasn", "t", "include", "echo", "password", "Why", "not", "use", "the", "Process", "constructors", "class", "fourth", "argument", "input", "to", "specify", "the", "input", "to", "STDIN", "In", "this", "way", "it", "should", "be", "possible", "to", "input", "the", "password", "like", "a", "user", "would", "do", "or", "be", "I", "wrong", "I", "think", "to", "echo", "an", "password", "ain", "t", "be", "an", "suitable", "solution", "NUMBER", "Too", "much", "possibilities", "of", "security", "risks", "NUMBER", "Like", "the", "mention", "cmd", "shown", "in", "top", "otherwise", "maybe", "stored", "in", "some", "way", "in", "proc", "I", "just", "did", "a", "little", "lookup", "and", "what", "may", "be", "a", "somehow", "better", "solution", "would", "be", "to", "run", "it", "as", "echo", "password", "sudo", "S", "v", "sudo", "command", "this", "way", "we", "would", "not", "have", "the", "password", "on", "a", "long", "run", "proccess", "but", "it", "would", "also", "mean", "that", "we", "need", "caching", "credentials", "support", "on", "the", "hosts", "site", "I", "guess", "its", "enable", "by", "default", "on", "most", "hosts", "NUMBER", "It", "also", "means", "we", "should", "not", "close", "the", "connection", "between", "several", "calls", "which", "we", "already", "do", "I", "guess", "NUMBER", "The", "big", "problem", "I", "see", "be", "what", "if", "argument", "NUMBER", "What", "if", "someone", "gets", "a", "grip", "of", "the", "sent", "command", "where", "the", "password", "be", "in", "like", "be", "on", "the", "host", "machine", "loogin", "for", "processes", "cmd", "s", "What", "if", "the", "administrator", "did", "not", "configure", "sudo", "to", "be", "restrictive", "enough", "like", "use", "ALL", "for", "sudo", "CMDs", "and", "through", "the", "previous", "leakage", "they", "may", "get", "full", "root", "rights", "Maybe", "if", "we", "push", "a", "temp", "file", "to", "the", "machine", "with", "the", "password", "in", "it", "pipe", "the", "content", "of", "that", "file", "as", "STDIN", "into", "the", "sudo", "may", "be", "a", "better", "solution", "NUMBER", "At", "least", "as", "far", "as", "we", "think", "about", "the", "attacker", "do", "not", "have", "the", "rights", "to", "read", "that", "password", "file", "which", "we", "can", "achieve", "by", "only", "having", "the", "mode", "set", "to", "NUMBER", "Then", "after", "doing", "the", "sudo", "S", "v", "if", "we", "go", "down", "that", "path", "we", "can", "maybe", "already", "delete", "this", "file", "again", "but", "have", "sudo", "access", "for", "like", "NUMBER", "minutes", "or", "so", "NUMBER", "depends", "on", "host", "auth", "cache", "configuration", "EDIT", "If", "not", "use", "the", "file", "approach", "phpseclib", "SFTP", "we", "should", "also", "make", "sure", "its", "not", "saved", "to", "the", "shell", "s", "history", "NUMBER", "As", "far", "for", "bash", "a", "single", "space", "before", "the", "command", "makes", "it", "invisible", "for", "the", "history", "as", "it", "gets", "not", "write", "to", "it", "NUMBER", "But", "what", "if", "the", "host", "do", "not", "use", "the", "bash", "But", "other", "shells", "with", "support", "for", "a", "history", "but", "don", "t", "use", "this", "ignorepattern", "Maybe", "through", "disabling", "the", "HISTFILE", "Defining", "a", "HISTIGNORE", "pattern", "Again", "what", "about", "maybe", "other", "shells", "Basically", "what", "I", "m", "searching", "for", "be", "the", "multistage", "function", "or", "something", "similar", "NUMBER", "I", "didn", "t", "find", "anything", "regard", "this", "in", "the", "documentation", "NUMBER", "Also", "be", "it", "possible", "now", "to", "declare", "multiple", "stages", "on", "a", "single", "server", "then", "deploy", "to", "there", "NUMBER", "For", "example", "dep", "deploy", "server", "stage", "I", "couldn", "t", "get", "this", "information", "from", "the", "documentation", "either", "NUMBER", "Hmm", "could", "you", "please", "explain", "to", "me", "what", "stages", "be", "exactly", "here", "I", "have", "a", "feeling", "that", "I", "have", "a", "different", "idea", "and", "I", "couldn", "t", "find", "an", "explanation", "in", "the", "docs", "NUMBER", "It", "seems", "to", "me", "that", "stages", "here", "be", "really", "a", "way", "to", "group", "servers", "NUMBER", "So", "if", "I", "have", "a", "server", "cluster", "which", "contains", "multiple", "servers", "for", "production", "and", "some", "for", "test", "purposes", "then", "by", "declaring", "for", "each", "of", "them", "which", "stage", "they", "be", "in", "I", "can", "deploy", "to", "production", "and", "development", "servers", "separately", "NUMBER", "Do", "I", "get", "this", "right", "Because", "if", "I", "do", "then", "my", "second", "question", "be", "kind", "of", "nonsensical", "NUMBER", "I", "m", "still", "curious", "though", "about", "how", "I", "can", "set", "which", "server", "should", "the", "deploy", "command", "deploy", "to", "by", "default", "NUMBER", "What", "I", "m", "trying", "to", "achieve", "be", "that", "run", "dep", "deploy", "should", "deploy", "to", "the", "development", "server", "by", "default", "NUMBER", "Would", "it", "be", "possible", "to", "add", "a", "way", "to", "define", "a", "default", "stage", "All", "my", "NUMBER", "x", "configs", "be", "setup", "with", "staging", "and", "production", "where", "staging", "be", "the", "default", "NUMBER", "I", "was", "hoping", "to", "be", "able", "to", "update", "the", "config", "file", "without", "having", "to", "update", "everyone", "s", "behaviour", "when", "they", "use", "the", "deployer", "Fixed", "the", "success", "sentence", "which", "was", "outputted", "when", "a", "new", "phar", "build", "was", "finished", "Added", "automatic", "environment", "variable", "registration", "to", "the", "server", "function", "host", "and", "name", "variables", "Added", "a", "has", "function", "so", "that", "the", "existence", "of", "a", "parameter", "can", "be", "checked", "NUMBER", "I", "m", "awaiting", "your", "opinions", "NUMBER", "Forgot", "to", "mention", "if", "this", "gets", "merge", "in", "then", "the", "documentation", "should", "definitely", "mention", "the", "automatically", "generate", "env", "variables", "NUMBER", "host", "name", "Same", "with", "the", "has", "function", "it", "must", "be", "listed", "in", "the", "Functions", "section", "of", "the", "docs", "NUMBER", "I", "ll", "keep", "that", "in", "mind", "next", "time", "NUMBER", "I", "ll", "check", "these", "issue", "as", "soon", "as", "I", "can", "NUMBER", "I", "refactored", "some", "things", "and", "played", "around", "the", "host", "and", "name", "environment", "settings", "NUMBER", "I", "discarded", "the", "latter", "idea", "because", "the", "first", "naive", "implementation", "would", "certainly", "cause", "issue", "in", "the", "future", "NUMBER", "I", "ll", "open", "a", "separate", "issue", "about", "the", "env", "variables", "NUMBER", "After", "NUMBER", "commit", "this", "PR", "has", "Spelling", "fix", "NUMBER", "Fixed", "the", "success", "sentence", "which", "was", "outputted", "when", "a", "new", "phar", "build", "was", "finished", "Added", "a", "has", "function", "so", "that", "the", "existence", "of", "a", "parameter", "can", "be", "checked", "NUMBER", "I", "think", "clear", "more", "if", "you", "re", "base", "before", "merge", "code", "NUMBER", "I", "can", "break", "this", "PR", "into", "two", "separate", "one", "if", "you", "think", "one", "for", "the", "spelling", "and", "an", "other", "for", "the", "has", "function", "NUMBER", "I", "add", "that", "global", "function", "since", "I", "wanted", "to", "check", "inside", "a", "task", "whether", "a", "global", "configuration", "array", "was", "set", "or", "not", "NUMBER", "I", "wanted", "to", "implement", "proper", "error", "handle", "which", "be", "as", "informative", "as", "it", "can", "be", "NUMBER", "The", "current", "get", "implementation", "throw", "an", "exception", "if", "the", "given", "key", "do", "not", "exist", "in", "the", "collection", "which", "be", "fine", "but", "I", "wanted", "a", "different", "error", "message", "NUMBER", "I", "can", "of", "course", "put", "the", "get", "call", "in", "a", "try", "catch", "block", "and", "throw", "my", "own", "exception", "but", "then", "there", "s", "the", "chance", "of", "catching", "exception", "not", "relate", "to", "the", "existence", "of", "the", "global", "variable", "I", "was", "trying", "to", "access", "NUMBER", "The", "task", "I", "was", "trying", "to", "implement", "was", "a", "slack", "notification", "task", "and", "with", "the", "has", "function", "I", "could", "do", "the", "following", "php", "Checking", "for", "the", "existence", "of", "the", "slack", "task", "configuration", "NUMBER", "If", "it", "doesn", "t", "exist", "I", "throw", "a", "custom", "exception", "with", "detailed", "information", "Actually", "it", "could", "be", "even", "more", "detailed", "by", "giving", "the", "expected", "array", "keys", "but", "this", "be", "only", "an", "example", "NUMBER", "if", "has", "slack", "throw", "new", "RuntimeException", "Missing", "slack", "parameter", "for", "the", "slack", "push", "success", "task", "NUMBER", "Please", "provide", "it", "use", "the", "set", "slack", "function", "NUMBER", "The", "slack", "global", "variable", "now", "surely", "exist", "NUMBER", "If", "this", "get", "call", "throw", "something", "that", "will", "not", "be", "relate", "to", "the", "existence", "of", "the", "variable", "NUMBER", "config", "get", "slack", "Validating", "the", "given", "configuration", "options", "goes", "here", "NUMBER", "In", "short", "I", "wanted", "to", "implement", "proper", "error", "handle", "inside", "a", "given", "task", "and", "I", "think", "a", "has", "function", "can", "make", "that", "very", "simple", "NUMBER", "Thanks", "NUMBER", "On", "a", "relate", "note", "would", "you", "consider", "add", "a", "simple", "slack", "task", "Because", "I", "could", "share", "what", "I", "have", "NUMBER", "Now", "that", "slack", "implementation", "be", "a", "perfect", "example", "why", "I", "wanted", "to", "access", "the", "host", "server", "configuration", "NUMBER", "Does", "it", "work", "in", "v", "NUMBER", "It", "uses", "the", "config", "function", "which", "I", "think", "do", "not", "exist", "anymore", "LINK", "On", "it", "NUMBER", "Edit", "I", "ll", "create", "an", "issue", "there", "when", "the", "config", "problem", "was", "solve", "NUMBER", "I", "m", "trying", "to", "re", "implement", "the", "following", "host", "config", "getHost", "Since", "the", "config", "function", "seems", "to", "be", "remove", "I", "tried", "to", "find", "the", "current", "alternative", "but", "nothing", "I", "tried", "so", "far", "worked", "NUMBER", "Okay", "with", "the", "latter", "code", "snippet", "I", "can", "access", "the", "server", "configuration", "NUMBER", "Simply", "setting", "and", "get", "an", "env", "variable", "wouldn", "t", "work", "because", "I", "need", "the", "configuration", "of", "the", "server", "which", "be", "under", "deployment", "NUMBER", "What", "were", "the", "reasons", "behind", "remove", "the", "config", "function", "That", "example", "code", "would", "be", "too", "redundant", "but", "setting", "the", "environment", "vars", "automatically", "when", "use", "the", "server", "function", "would", "solve", "the", "issue", "NUMBER", "I", "ll", "look", "into", "it", "NUMBER", "Closing", "this", "since", "the", "discussion", "has", "moved", "to", "the", "pull", "request", "s", "page", "NUMBER", "I", "tried", "the", "following", "command", "Migrating", "some", "tasks", "from", "v", "NUMBER", "to", "v", "NUMBER", "php", "task", "test", "test", "function", "var_dump", "env", "release_path", "desc", "test", "It", "throw", "a", "RuntimeException", "without", "any", "explanation", "NUMBER", "Trying", "to", "get", "an", "asd", "env", "variable", "do", "have", "a", "proper", "message", "hovewer", "Environment", "parameter", "asd", "do", "not", "exists", "NUMBER", "I", "run", "this", "task", "separately", "not", "as", "part", "of", "a", "deployment", "process", "dep", "test", "test", "target", "So", "I", "think", "I", "would", "not", "be", "able", "to", "access", "the", "env", "var", "anyway", "since", "no", "task", "could", "run", "that", "could", "ve", "set", "that", "env", "variable", "NUMBER", "But", "even", "then", "of", "course", "I", "should", "get", "a", "proper", "exception", "message", "NUMBER", "E", "ecuting", "task", "test", "test", "on", "emese", "server", "Run", "cd", "var", "www", "z_lon_heernew_dep", "NUMBER", "readlink", "var", "www", "z_lon_heernew_dep", "NUMBER", "release", "RuntimeException", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Remote", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Environment", "get", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "env", "at", "home", "zeecoder", "work", "z_lon_heernew", "NUMBER", "deployer", "test", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "I", "just", "run", "into", "a", "similar", "issue", "trying", "to", "execute", "a", "task", "outside", "a", "deploy", "NUMBER", "I", "m", "afraid", "that", "solution", "propose", "by", "elfet", "be", "just", "an", "ugly", "workaround", "NUMBER", "We", "should", "be", "able", "to", "execute", "any", "task", "outside", "a", "deploy", "think", "of", "executing", "only", "cache", "clearing", "or", "only", "database", "migrations", "etc", "NUMBER", "Obviously", "we", "cannot", "set", "a", "before", "for", "every", "single", "task", "No", "I", "want", "to", "execute", "a", "single", "task", "NUMBER", "Add", "once", "NUMBER", "Can", "you", "give", "an", "example", "Suppose", "you", "want", "to", "execute", "a", "single", "task", "that", "be", "already", "defined", "like", "database", "migrate", "in", "symfony", "php", "task", "NUMBER", "once", "But", "the", "task", "be", "already", "defined", "NUMBER", "See", "the", "symfony", "recipe", "there", "be", "a", "database", "migrate", "task", "NUMBER", "If", "I", "try", "to", "run", "dep", "database", "migrate", "foobar", "I", "get", "the", "error", "above", "You", "can", "override", "task", "NUMBER", "So", "your", "solution", "be", "to", "override", "every", "single", "task", "only", "to", "add", "a", "once", "After", "doing", "that", "every", "task", "I", "overridden", "stays", "with", "once", "so", "will", "I", "be", "able", "to", "use", "it", "without", "once", "This", "will", "be", "able", "with", "Events", "system", "form", "next", "Deployer", "v", "NUMBER", "Now", "you", "can", "use", "before", "and", "once", "combination", "NUMBER", "So", "can", "you", "give", "me", "an", "example", "Some", "code", "please", "I", "think", "this", "project", "could", "be", "way", "bigger", "if", "the", "spelling", "was", "better", "on", "the", "site", "NUMBER", "Example", "Deployer", "has", "very", "clean", "code", "and", "good", "test", "NUMBER", "should", "be", "something", "like", "Deployer", "has", "a", "very", "clean", "and", "well", "test", "code", "NUMBER", "IMHO", "sentences", "like", "this", "do", "not", "help", "the", "credibility", "of", "the", "project", "NUMBER", "What", "do", "you", "think", "elfet", "Excellent", "I", "ll", "see", "what", "I", "can", "do", "there", "NUMBER", "NUMBER", "parameter_name", "In", "deployer", "v", "NUMBER", "I", "had", "to", "copy", "the", "whole", "recipe", "to", "support", "the", "new", "symfony", "dir", "structure", "NUMBER", "Migrating", "to", "v", "NUMBER", "it", "feels", "very", "unprofessional", "so", "I", "made", "some", "change", "in", "it", "which", "makes", "it", "very", "easy", "to", "support", "projects", "adopting", "the", "new", "dir", "structure", "early", "on", "NUMBER", "Usage", "example", "from", "my", "deployer", "NUMBER", "php", "file", "php", "require", "recipe", "symfony", "NUMBER", "php", "Switching", "to", "the", "sf", "NUMBER", "dir", "structure", "set", "shared_dirs", "var", "logs", "set", "writable_dirs", "var", "cache", "var", "logs", "set", "bin_dir", "bin", "set", "var_dir", "var", "Awaiting", "you", "opinions", "NUMBER", "A", "bigger", "issue", "though", "be", "that", "you", "didn", "t", "update", "the", "downloadable", "phar", "NUMBER", "Tried", "it", "NUMBER", "NUMBER", "minutes", "ago", "NUMBER", "So", "now", "the", "documentation", "be", "out", "of", "sync", "with", "the", "executable", "NUMBER", "Didn", "t", "know", "that", "it", "s", "my", "mistake", "then", "NUMBER", "Deployer", "version", "NUMBER", "Remote", "host", "Ubuntu", "NUMBER", "LTS", "The", "title", "says", "it", "all", "I", "tried", "to", "run", "dep", "deploy", "but", "I", "get", "an", "error", "saying", "Shell", "on", "your", "server", "be", "not", "POSIX", "compliant", "NUMBER", "Please", "change", "to", "sh", "bash", "or", "similar", "NUMBER", "Usually", "you", "can", "change", "your", "shell", "to", "bash", "by", "run", "chsh", "s", "bin", "bash", "The", "actual", "error", "was", "that", "the", "directory", "specified", "as", "deploy_path", "did", "not", "exist", "on", "the", "remote", "server", "NUMBER", "Luckily", "I", "get", "a", "proper", "error", "right", "after", "the", "first", "one", "RuntimeException", "bash", "line", "NUMBER", "cd", "var", "www", "somefolder", "No", "such", "file", "or", "directory", "but", "the", "first", "one", "shouldn", "t", "have", "shown", "up", "in", "my", "opinion", "NUMBER", "Thanks", "for", "the", "fast", "reply", "NUMBER", "NUMBER", "Excellent", "thanks", "NUMBER", "Your", "requirements", "could", "not", "be", "resolve", "to", "an", "installable", "set", "of", "package", "NUMBER", "Problem", "NUMBER", "Installation", "request", "for", "deployer", "deployer", "NUMBER", "satisfiable", "by", "deployer", "deployer", "v", "NUMBER", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "Either", "switch", "the", "require", "to", "dev", "master", "or", "the", "package", "version", "tag", "NUMBER", "Please", "try", "with", "this", "composer", "NUMBER", "json", "file", "json", "require", "php", "NUMBER", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "deployer", "deployer", "NUMBER", "And", "run", "composer", "clear", "cache", "command", "before", "composer", "install", "command", "NUMBER", "Good", "luck", "It", "worked", "with", "what", "was", "said", "by", "oanhnn", "I", "don", "t", "mean", "to", "be", "that", "guy", "but", "a", "stable", "package", "shouldn", "t", "really", "be", "requiring", "an", "unstable", "dependency", "even", "if", "it", "be", "a", "specific", "commit", "NUMBER", "See", "the", "date", "of", "the", "commit", "LINK", "It", "be", "NUMBER", "Feb", "NUMBER", "There", "be", "no", "release", "containing", "the", "commit", "LINK", "ZeeCoder", "NUMBER", "I", "personally", "wouldn", "t", "include", "a", "dependent", "package", "into", "this", "one", "NUMBER", "That", "s", "a", "short", "sighted", "fix", "for", "what", "could", "become", "a", "bigger", "issue", "later", "on", "NUMBER", "I", "tried", "to", "track", "down", "where", "this", "referenced", "commit", "was", "merge", "into", "but", "have", "had", "no", "luck", "NUMBER", "What", "be", "in", "this", "commit", "s", "tree", "that", "be", "required", "and", "not", "in", "the", "master", "branch", "Has", "anyone", "tried", "run", "this", "use", "the", "phpseclib", "master", "branch", "I", "m", "more", "curious", "about", "why", "Deployer", "needs", "such", "a", "recent", "version", "of", "phpseclib", "in", "the", "first", "place", "NUMBER", "What", "essential", "feature", "was", "add", "in", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "that", "isn", "t", "available", "in", "the", "NUMBER", "tag", "The", "phpseclib", "repository", "be", "difficult", "to", "grasp", "NUMBER", "and", "NUMBER", "branch", "that", "be", "both", "be", "merge", "into", "master", "yet", "the", "latest", "tag", "be", "NUMBER", "Ugh", "NUMBER", "elfet", "NUMBER", "NUMBER", "The", "next", "release", "might", "be", "next", "year", "NUMBER", "Until", "then", "all", "users", "use", "Composer", "have", "to", "set", "the", "version", "of", "phpseclib", "to", "composer", "NUMBER", "json", "NUMBER", "Or", "might", "be", "github", "issue", "will", "be", "report", "again", "and", "again", "NUMBER", "NUMBER", "dev", "master", "won", "t", "work", "if", "a", "bug", "will", "be", "introduce", "NUMBER", "Dear", "all", "Fix", "version", "of", "phpseclib", "as", "a", "commit", "be", "my", "idea", "NUMBER", "It", "be", "temporary", "solution", "for", "issue", "NUMBER", "NUMBER", "As", "commit", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "deployer", "was", "run", "good", "NUMBER", "I", "m", "not", "sure", "a", "current", "stable", "version", "of", "phpseclib", "be", "good", "for", "deployer", "NUMBER", "it", "must", "be", "test", "NUMBER", "I", "m", "happy", "if", "someone", "can", "do", "it", "NUMBER", "Thank", "you", "Yep", "better", "than", "nothing", "v", "NUMBER", "still", "has", "this", "problem", "NUMBER", "I", "hope", "fix", "soon", "NUMBER", "Good", "No", "problem", "NUMBER", "By", "the", "way", "Package", "guzzle", "parser", "be", "abandoned", "you", "should", "avoid", "use", "it", "NUMBER", "Use", "guzzle", "guzzle", "instead", "NUMBER", "What", "s", "use", "guzzle", "parser", "This", "be", "it", "LINK", "client", "issue", "NUMBER", "TAG", "This", "be", "it", "LINK", "issuecomment", "NUMBER", "TAG", "There", "were", "some", "new", "release", "on", "phpseclib", "phpseclib", "on", "August", "NUMBER", "NUMBER", "Is", "the", "code", "you", "guys", "wanted", "in", "any", "of", "their", "release", "now", "Hmm", "I", "think", "so", "based", "on", "the", "commit", "LINK", "I", "think", "v", "NUMBER", "LINK", "should", "be", "the", "thing", "Deployer", "needs", "NUMBER", "Can", "you", "confirm", "this", "elfet", "This", "bug", "still", "occur", "NUMBER", "I", "was", "not", "able", "to", "install", "deployer", "from", "composer", "and", "the", "standalone", "phar", "version", "cannot", "self", "update", "NUMBER", "Using", "version", "NUMBER", "for", "deployer", "deployer", "NUMBER", "composer", "NUMBER", "json", "has", "be", "update", "Loading", "composer", "repositories", "with", "package", "information", "Updating", "dependencies", "including", "require", "dev", "Your", "requirements", "could", "not", "be", "resolve", "to", "an", "installable", "set", "of", "package", "NUMBER", "Problem", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "no", "matching", "package", "find", "NUMBER", "Conclusion", "don", "t", "install", "deployer", "deployer", "v", "NUMBER", "Conclusion", "don", "t", "install", "deployer", "deployer", "v", "NUMBER", "Conclusion", "don", "t", "install", "deployer", "deployer", "v", "NUMBER", "Conclusion", "don", "t", "install", "deployer", "deployer", "v", "NUMBER", "Conclusion", "remove", "symfony", "yaml", "v", "NUMBER", "Installation", "request", "for", "deployer", "deployer", "NUMBER", "satisfiable", "by", "deployer", "deployer", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Conclusion", "don", "t", "install", "symfony", "yaml", "v", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "symfony", "yaml", "NUMBER", "satisfiable", "by", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Can", "only", "install", "one", "of", "symfony", "yaml", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Installation", "request", "for", "symfony", "yaml", "NUMBER", "satisfiable", "by", "symfony", "yaml", "v", "NUMBER", "NUMBER", "Potential", "causes", "A", "typo", "in", "the", "package", "name", "The", "package", "be", "not", "available", "in", "a", "stable", "enough", "version", "according", "to", "your", "minimum", "stability", "setting", "see", "TAG", "for", "more", "details", "NUMBER", "Read", "TAG", "for", "further", "common", "problem", "NUMBER", "Installation", "fail", "revert", "NUMBER", "composer", "NUMBER", "json", "to", "its", "original", "content", "NUMBER", "Dunno", "if", "you", "targeting", "to", "Laravel", "NUMBER", "or", "NUMBER", "but", "at", "least", "for", "Laravel", "NUMBER", "I", "probably", "would", "add", "set", "shared_files", "NUMBER", "env", "Laravel", "NUMBER", "uses", "the", "phpdotenv", "LINK", "package", "NUMBER", "Normally", "you", "don", "t", "put", "this", "in", "the", "repo", "but", "create", "it", "once", "NUMBER", "Now", "with", "deployer", "you", "could", "put", "it", "in", "shared", "so", "you", "would", "only", "have", "to", "create", "it", "once", "and", "it", "would", "be", "linked", "after", "deployment", "NUMBER", "One", "another", "thing", "you", "might", "want", "to", "create", "a", "Laravel", "spesific", "php", "artisan", "migrate", "task", "NUMBER", "Also", "probably", "php", "artisan", "migrate", "rollback", "should", "be", "run", "if", "rollback", "be", "call", "NUMBER", "I", "write", "a", "blog", "post", "with", "laravel", "usage", "LINK", "your", "projects", "with", "zero", "downtime", "I", "basically", "have", "a", "NUMBER", "env", "file", "in", "the", "shared", "folder", "which", "I", "copy", "in", "the", "current", "dir", "after", "deployment", "NUMBER", "nWidart", "you", "have", "good", "post", "by", "i", "have", "some", "comments", "i", "can", "t", "comment", "on", "your", "blog", "NUMBER", "In", "current", "version", "NUMBER", "deployer", "use", "php", "server", "svr", "dev", "example", "NUMBER", "com", "NUMBER", "user", "username", "password", "pass", "not", "use", "php", "server", "svr", "dev", "user", "username", "pass", "We", "had", "a", "few", "issue", "with", "this", "problem", "NUMBER", "NUMBER", "I", "think", "we", "can", "use", "set", "shared_files", "NUMBER", "env", "to", "replace", "your", "environment", "task", "NUMBER", "NUMBER", "I", "think", "you", "should", "update", "your", "post", "and", "use", "laravel", "recipe", "for", "simple", "Thank", "you", "for", "your", "comments", "NUMBER", "NUMBER", "Cool", "will", "update", "NUMBER", "I", "only", "copied", "that", "from", "the", "docs", "as", "I", "use", "the", "ssh", "keys", "myself", "to", "log", "into", "the", "server", "NUMBER", "NUMBER", "Not", "sure", "since", "you", "still", "have", "to", "tell", "laravel", "where", "to", "look", "for", "this", "file", "NUMBER", "NUMBER", "Same", "as", "NUMBER", "I", "tried", "the", "laravel", "recipe", "but", "it", "didn", "t", "work", "that", "s", "why", "I", "did", "it", "the", "manual", "way", "NUMBER", "To", "move", "the", "storage", "directory", "into", "the", "shared", "folder", "would", "require", "a", "rewrite", "of", "the", "laravel", "Application", "class", "to", "overwrite", "those", "paths", "NUMBER", "In", "NUMBER", "this", "was", "just", "a", "config", "value", "to", "change", "sadly", "it", "s", "not", "the", "case", "anymore", "NUMBER", "nWidart", "I", "will", "debug", "laravel", "recipe", "with", "Laravel", "NUMBER", "sleepy", "It", "basically", "works", "it", "just", "a", "matter", "of", "extending", "the", "Application", "class", "of", "laravel", "to", "indicate", "new", "paths", "NUMBER", "That", "I", "haven", "t", "figured", "out", "yet", "NUMBER", "Though", "I", "still", "prefer", "to", "have", "my", "own", "deploy", "script", "to", "keep", "fill", "control", "over", "it", "instead", "of", "use", "the", "laravel", "recipe", "NUMBER", "Hello", "NUMBER", "I", "have", "find", "a", "problem", "run", "upload", "on", "windows", "and", "uploading", "a", "directory", "to", "a", "linux", "server", "NUMBER", "Lets", "say", "I", "be", "trying", "to", "upload", "a", "directory", "named", "module", "which", "contains", "a", "subdirectory", "call", "ApiTester", "NUMBER", "And", "lets", "say", "I", "have", "a", "file", "named", "Module", "NUMBER", "php", "in", "the", "ApiTester", "directory", "NUMBER", "I", "be", "uploading", "it", "with", "upload", "module", "module", "NUMBER", "When", "I", "execute", "the", "recipe", "on", "linux", "it", "runs", "ok", "but", "when", "I", "execute", "it", "on", "windows", "something", "strange", "happens", "NUMBER", "It", "creates", "the", "module", "directory", "but", "instead", "of", "creating", "an", "ApiTester", "subdirectory", "and", "a", "Module", "NUMBER", "php", "file", "in", "it", "it", "creates", "a", "file", "named", "ApiTester", "Module", "NUMBER", "php", "with", "a", "slash", "in", "its", "name", "in", "the", "module", "directory", "NUMBER", "I", "think", "this", "happens", "with", "the", "PhpSecLib", "backend", "because", "I", "do", "not", "have", "the", "ssh", "extension", "install", "on", "this", "machine", "NUMBER", "Edit", "I", "just", "want", "to", "add", "that", "this", "happened", "on", "a", "Windows", "NUMBER", "system", "NUMBER", "Awesome", "Thanks", "NUMBER", "beer", "Either", "still", "broken", "or", "be", "broken", "again", "in", "NUMBER", "I", "really", "think", "php", "remote", "str_replace", "remote", "should", "be", "php", "remote", "str_replace", "DIRECTORY_SEPARATOR", "remote", "Especially", "considering", "the", "comments", "on", "NUMBER", "f", "NUMBER", "be", "NUMBER", "Agree", "Can", "you", "do", "PR", "elfet", "yup", "NUMBER", "Hello", "NUMBER", "There", "be", "an", "error", "run", "deployer", "NUMBER", "downloaded", "from", "the", "website", "NUMBER", "PHP", "Fatal", "error", "Class", "Ssh", "Configuration", "not", "find", "in", "phar", "home", "koce", "www", "jirarepl", "deployer", "NUMBER", "phar", "src", "Server", "Remote", "SshExtension", "NUMBER", "php", "on", "line", "NUMBER", "Maybe", "the", "php", "ssh", "composer", "package", "be", "miss", "Current", "packagist", "name", "of", "deployer", "be", "deployer", "deployer", "but", "packagist", "name", "of", "recipes", "be", "deployphp", "recipes", "NUMBER", "I", "think", "you", "should", "rename", "packgist", "name", "to", "deployphp", "deployer", "NUMBER", "But", "your", "organization", "be", "deployphp", "NUMBER", "I", "think", "deployphp", "be", "more", "suitable", "NUMBER", "it", "looks", "like", "someone", "tried", "to", "create", "deployer", "organization", "as", "ghost", "organization", "NUMBER", "Have", "you", "tried", "contacts", "and", "report", "with", "github", "If", "not", "name", "deployer", "deployer", "do", "people", "think", "that", "it", "be", "deployer", "organization", "s", "elfet", "It", "s", "against", "GitHub", "s", "terms", "to", "take", "an", "account", "and", "not", "do", "anything", "with", "it", "NUMBER", "They", "can", "free", "it", "up", "for", "you", "NUMBER", "In", "this", "Pull", "Request", "Update", "class", "DotArray", "implement", "contructor", "by", "offsetSet", "method", "NUMBER", "php", "d", "new", "DotArray", "abc", "NUMBER", "xyz", "NUMBER", "var_dump", "d", "toArray", "array", "abc", "array", "xyz", "NUMBER", "change", "hasKey", "method", "for", "fix", "code", "duplications", "LINK", "ci", "NUMBER", "com", "g", "deployphp", "deployer", "indices", "NUMBER", "duplications", "NUMBER", "Add", "more", "test", "case", "for", "class", "DotArray", "When", "I", "download", "the", "NUMBER", "phar", "from", "LINK", "and", "run", "php", "deployer", "NUMBER", "phar", "V", "I", "get", "version", "NUMBER", "and", "the", "last", "in", "NUMBER", "be", "NUMBER", "I", "defined", "a", "custom", "task", "en", "my", "deploy", "NUMBER", "php", "script", "php", "task", "deploy", "clear_redis", "function", "run", "php", "release_path", "app", "console", "redis", "flushall", "env", "env", "no", "debug", "no", "interaction", "desc", "Redis", "flushall", "When", "the", "task", "be", "executed", "dep", "deploy", "vvv", "I", "get", "a", "RuntimeException", "the", "command", "run", "in", "the", "server", "be", "cd", "var", "www", "vhosts", "site", "NUMBER", "com", "httpdocs", "php", "release_path", "app", "console", "redis", "flushall", "env", "env", "no", "debug", "no", "interaction", "The", "release", "path", "be", "not", "replaced", "by", "physically", "path", "NUMBER", "Hi", "Before", "anything", "else", "thank", "your", "for", "your", "work", "I", "like", "how", "easy", "it", "be", "to", "start", "with", "your", "tool", "without", "reading", "tons", "of", "documentation", "I", "want", "to", "use", "this", "tool", "to", "set", "up", "new", "project", "both", "on", "deploiement", "server", "and", "on", "my", "local", "machine", "NUMBER", "Therefore", "I", "would", "like", "to", "have", "a", "way", "to", "control", "local", "current", "directory", "NUMBER", "Indeed", "runLocally", "cd", "my", "dir", "do", "not", "work", "NUMBER", "I", "think", "I", "can", "understand", "why", "but", "It", "would", "be", "nice", "to", "supply", "a", "locallyCD", "NUMBER", "Kind", "regards", "Perhaps", "you", "could", "use", "the", "local", "server", "to", "deploy", "the", "project", "on", "your", "machine", "Check", "this", "out", "LINK", "I", "think", "the", "test", "use", "it", "too", "NUMBER", "Hm", "even", "though", "I", "find", "a", "localServer", "function", "in", "the", "repository", "it", "throw", "me", "an", "error", "when", "I", "try", "to", "use", "it", "NUMBER", "I", "self", "update", "dep", "edit", "And", "the", "reason", "be", "that", "I", "had", "v", "NUMBER", "because", "I", "downloaded", "it", "from", "the", "doc", "link", "LINK", "which", "points", "to", "v", "NUMBER", "In", "v", "NUMBER", "there", "be", "no", "local", "or", "localServer", "so", "I", "will", "try", "to", "see", "with", "v", "NUMBER", "Okay", "so", "I", "tried", "to", "use", "the", "function", "localServer", "myServ", "for", "my", "local", "workflow", "NUMBER", "My", "rational", "was", "that", "use", "localServer", "allows", "me", "use", "run", "and", "cd", "function", "because", "they", "will", "be", "run", "on", "local", "host", "NUMBER", "However", "I", "get", "the", "following", "exception", "RuntimeException", "Environment", "parameter", "deploy_path", "do", "not", "exists", "NUMBER", "Which", "I", "find", "to", "be", "raise", "because", "I", "did", "not", "set", "the", "work", "path", "NUMBER", "Unfortunatly", "the", "Builder", "class", "no", "longer", "has", "the", "path", "method", "which", "be", "sadening", "me", "edit", "ok", "env", "deploy_path", "DIR", "did", "the", "trick", "NUMBER", "But", "you", "re", "not", "do", "with", "me", "yet", "I", "would", "be", "very", "happy", "if", "I", "could", "register", "tasks", "with", "the", "server", "I", "want", "NUMBER", "like", "task", "local", "init", "myLocalServe", "function", "etc", "of", "just", "simply", "be", "able", "to", "call", "server", "or", "serverLocal", "inside", "task", "callbacks", "NUMBER", "I", "be", "aware", "that", "be", "not", "very", "useful", "as", "I", "can", "have", "two", "separate", "file", "with", "local", "tasks", "and", "remote", "tasks", "but", "some", "deploiements", "requires", "local", "tasks", "such", "as", "run", "test", "locally", "before", "deploying", "NUMBER", "Dear", "lce", "fr", "On", "deployer", "v", "NUMBER", "please", "try", "php", "localServer", "localhost", "user", "deployer", "stage", "local", "env", "deploy_path", "var", "www", "apps", "app", "name", "env", "branch", "master", "task", "local", "init", "function", "etc", "onlyOn", "localhost", "Goodluck", "As", "describe", "in", "issue", "NUMBER", "the", "commands", "for", "deployment", "can", "fail", "with", "mysterious", "error", "when", "remote", "server", "be", "run", "a", "non", "POSIX", "shell", "like", "tcsh", "common", "on", "BSD", "systems", "NUMBER", "Added", "a", "simple", "check", "with", "expression", "if", "it", "fail", "user", "will", "see", "more", "friendly", "message", "explaining", "to", "switch", "to", "sh", "bash", "similar", "NUMBER", "Hi", "The", "deployer", "NUMBER", "X", "doesn", "t", "work", "when", "trying", "to", "deploy", "on", "server", "that", "do", "not", "use", "sh", "bash", "as", "a", "default", "shell", "like", "many", "BSD", "machines", "NUMBER", "Because", "of", "that", "commands", "like", "this", "run", "if", "d", "echo", "basePath", "then", "mkdir", "basePath", "fi", "true", "die", "with", "error", "like", "RuntimeException", "Illegal", "variable", "name", "NUMBER", "This", "can", "be", "simply", "prevented", "by", "add", "bang", "bin", "sh", "before", "the", "actual", "command", "NUMBER", "For", "example", "run", "bin", "sh", "n", "if", "d", "echo", "basePath", "then", "mkdir", "basePath", "fi", "true", "runs", "perfectly", "fine", "It", "doesn", "t", "work", "with", "version", "NUMBER", "though", "To", "prevent", "this", "from", "not", "work", "for", "people", "I", "d", "suggest", "doing", "something", "like", "echo", "SHELL", "before", "run", "the", "commands", "to", "make", "sure", "the", "shell", "we", "be", "connected", "to", "be", "compatible", "with", "the", "commands", "we", "run", "NUMBER", "For", "example", "bin", "tcsh", "be", "not", "common", "on", "FreeBSD", "This", "while", "issue", "can", "be", "simply", "solve", "by", "the", "user", "by", "setting", "a", "default", "shell", "for", "the", "user", "to", "something", "compatible", "sh", "bash", "etc", "NUMBER", "But", "giving", "people", "a", "warning", "would", "be", "nice", "NUMBER", "Will", "do", "I", "just", "notice", "that", "the", "exception", "be", "throw", "when", "deploy_path", "do", "not", "exist", "on", "the", "server", "NUMBER", "This", "will", "confuse", "people", "NUMBER", "Maybe", "we", "should", "check", "with", "tmp", "or", "home", "or", "something", "else", "NUMBER", "After", "task", "deploy", "writable", "we", "should", "restore", "work", "path", "NUMBER", "I", "tried", "run", "version", "NUMBER", "but", "the", "composer", "install", "doesn", "t", "work", "NUMBER", "So", "I", "switched", "to", "NUMBER", "beta", "NUMBER", "I", "have", "the", "following", "issue", "when", "trying", "to", "run", "vendor", "bin", "dep", "RuntimeException", "Object", "deploy", "start", "do", "not", "exist", "in", "ScenarioCollection", "NUMBER", "Happens", "on", "v", "NUMBER", "beta", "NUMBER", "and", "v", "NUMBER", "beta", "NUMBER", "NUMBER", "I", "tried", "use", "all", "NUMBER", "scenarios", "common", "composer", "and", "symfony", "and", "each", "of", "them", "gives", "this", "kind", "of", "issue", "NUMBER", "This", "basically", "means", "that", "there", "s", "no", "version", "of", "deployer", "that", "can", "be", "install", "with", "composer", "and", "use", "successfully", "Dear", "pbudzon", "Version", "v", "NUMBER", "beta", "NUMBER", "be", "out", "of", "date", "please", "try", "dev", "master", "I", "get", "the", "following", "error", "when", "run", "with", "dev", "master", "PHP", "Fatal", "error", "Call", "to", "undefined", "method", "Deployer", "Server", "Builder", "path", "Stack", "trace", "PHP", "Stack", "trace", "PHP", "NUMBER", "main", "Users", "paulina", "Sites", "pgsql", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "PHP", "NUMBER", "require", "Users", "paulina", "Sites", "pgsql", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "Triggered", "by", "calling", "server", "path", "in", "deploy", "NUMBER", "php", "NUMBER", "This", "PR", "change", "the", "run", "functionality", "a", "bit", "and", "allows", "for", "commands", "to", "be", "executed", "as", "a", "specific", "user", "NUMBER", "The", "runAs", "function", "which", "be", "basically", "the", "old", "run", "function", "with", "a", "few", "change", "allows", "a", "second", "parameter", "which", "be", "the", "username", "NUMBER", "It", "accepts", "the", "special", "username", "sudo", "it", "will", "be", "prepend", "as", "be", "to", "the", "command", "NUMBER", "If", "a", "false", "value", "null", "false", "etc", "NUMBER", "be", "given", "nothing", "will", "be", "prepended", "NUMBER", "Any", "other", "string", "values", "will", "be", "treated", "as", "usernames", "NUMBER", "A", "check", "will", "be", "performed", "to", "see", "if", "the", "username", "exists", "on", "the", "server", "use", "the", "getent", "passwd", "TAG", "command", "NUMBER", "If", "not", "a", "RunTimeException", "be", "throw", "NUMBER", "For", "a", "valid", "username", "all", "commands", "will", "be", "prepended", "with", "sudo", "u", "TAG", "NUMBER", "The", "run", "function", "be", "wrapper", "for", "the", "new", "runAs", "function", "NUMBER", "It", "will", "use", "the", "environment", "variable", "run_as", "as", "a", "username", "or", "null", "if", "that", "be", "not", "set", "NUMBER", "The", "runAsCurrent", "function", "be", "a", "wrapper", "for", "runAs", "and", "will", "force", "the", "command", "to", "be", "executed", "as", "the", "current", "user", "NUMBER", "Via", "the", "environment", "variable", "run_as", "it", "s", "possible", "to", "change", "the", "user", "for", "all", "run", "commands", "NUMBER", "Please", "share", "your", "ideas", "about", "this", "here", "NUMBER", "Replaces", "NUMBER", "oanhnn", "i", "agree", "it", "doesn", "t", "force", "this", "security", "restriction", "NUMBER", "However", "it", "s", "also", "not", "always", "possible", "to", "ssh", "as", "the", "user", "under", "which", "your", "webserver", "software", "runs", "NUMBER", "That", "could", "lead", "to", "permissions", "troubles", "NUMBER", "E", "NUMBER", "g", "NUMBER", "when", "wanting", "to", "delete", "older", "release", "etc", "NUMBER", "Next", "to", "that", "in", "your", "current", "common", "recipe", "you", "also", "allow", "users", "to", "run", "the", "writables", "command", "as", "sudo", "and", "the", "directories", "be", "chmodded", "to", "NUMBER", "That", "gave", "me", "the", "idea", "that", "you", "would", "allow", "your", "software", "to", "be", "more", "flexible", "then", "to", "strictly", "enforce", "secure", "methods", "NUMBER", "So", "this", "be", "just", "giving", "the", "user", "more", "options", "and", "it", "s", "still", "their", "responsibility", "to", "handle", "security", "in", "a", "good", "manner", "NUMBER", "On", "some", "servers", "I", "manage", "there", "be", "one", "user", "that", "be", "use", "to", "log", "in", "NUMBER", "This", "user", "be", "then", "able", "to", "run", "commands", "with", "sudo", "u", "username", "to", "deploy", "various", "websites", "NUMBER", "This", "allows", "a", "single", "ssh", "user", "but", "simultaneously", "allows", "websites", "to", "be", "owned", "by", "multiple", "other", "users", "for", "mpm", "NUMBER", "itk", "NUMBER", "So", "it", "would", "be", "very", "useful", "to", "be", "able", "to", "globally", "prefix", "commands", "with", "sudo", "u", "username", "for", "me", "threesquared", "I", "have", "the", "same", "setup", "on", "my", "servers", "NUMBER", "Every", "website", "have", "a", "user", "sudo", "permission", "to", "them", "be", "a", "no", "no", "NUMBER", "It", "would", "be", "very", "useful", "to", "run", "a", "command", "or", "task", "as", "another", "user", "NUMBER", "Like", "ansible", "become", "LINK", "NUMBER", "May", "be", "we", "need", "some", "more", "testable", "and", "safe", "solution", "NUMBER", "Maybe", "connect", "to", "server", "as", "another", "user", "to", "run", "task", "Proper", "PR", "replacing", "NUMBER", "The", "runLocally", "function", "currently", "do", "not", "return", "the", "process", "result", "but", "simply", "writes", "it", "to", "the", "output", "stream", "NUMBER", "Also", "it", "would", "be", "nice", "to", "be", "able", "to", "suppress", "it", "s", "output", "if", "I", "just", "want", "to", "get", "the", "result", "in", "a", "variable", "but", "do", "not", "want", "to", "see", "the", "result", "in", "the", "console", "NUMBER", "Maybe", "add", "it", "as", "a", "third", "parameter", "If", "this", "be", "ok", "with", "you", "I", "can", "create", "a", "pull", "request", "for", "this", "issue", "NUMBER", "This", "be", "my", "pull", "request", "as", "discussed", "in", "issue", "NUMBER", "This", "just", "happened", "to", "me", "NUMBER", "In", "the", "case", "of", "a", "fail", "deploy", "we", "may", "have", "a", "release", "symbolic", "link", "that", "points", "to", "a", "directory", "that", "do", "not", "exist", "NUMBER", "Now", "on", "the", "next", "deployment", "the", "deploy", "release", "task", "checks", "if", "the", "release", "directory", "exists", "with", "e", "release", "but", "it", "returns", "false", "because", "the", "directory", "the", "symbolic", "link", "points", "to", "do", "not", "exist", "NUMBER", "On", "the", "next", "step", "ln", "fail", "because", "the", "symbolic", "link", "be", "actually", "there", "NUMBER", "So", "my", "suggestion", "be", "to", "check", "if", "the", "release", "directory", "exists", "with", "the", "h", "or", "L", "option", "instead", "of", "e", "NUMBER", "In", "this", "PR", "Change", "specific", "requirement", "for", "environment", "variables", "follow", "the", "discussion", "in", "NUMBER", "NUMBER", "Environment", "variable", "name", "will", "be", "checked", "and", "only", "allow", "a", "z", "A", "Z", "NUMBER", "NUMBER", "underscore", "character", "_", "and", "dot", "character", "NUMBER", "NUMBER", "NUMBER", "If", "variable", "name", "having", "a", "dot", "character", "variables", "could", "be", "use", "in", "the", "future", "to", "be", "a", "property", "of", "an", "array", "env", "set", "env", "get", "Environment", "setDefault", "Environment", "getDefault", "be", "implement", "NUMBER", "php", "env", "abc", "NUMBER", "xyz", "NUMBER", "NUMBER", "NUMBER", "var_export", "env", "abc", "output", "array", "xyz", "array", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Environment", "variable", "parser", "for", "run", "command", "support", "below", "case", "abcxyz", "env", "abcxyz", "abc_xyz", "env", "abc_xyz", "abc", "NUMBER", "xyz", "env", "abc", "xyz", "Just", "some", "background", "info", "on", "this", "pull", "request", "NUMBER", "Dear", "elfet", "DotNotation", "be", "better", "than", "DotArray", "but", "i", "think", "NUMBER", "It", "need", "follow", "specific", "requirement", "for", "environment", "variables", "name", "will", "be", "checked", "and", "only", "allow", "a", "z", "A", "Z", "NUMBER", "NUMBER", "underscore", "character", "_", "and", "dot", "character", "NUMBER", "NUMBER", "It", "should", "implement", "ArrayAccess", "NUMBER", "Do", "not", "allow", "setValues", "and", "__construct", "in", "DotNotation", "NUMBER", "Users", "maybe", "have", "problem", "in", "below", "cases", "NUMBER", "php", "add", "to", "class", "DotNotationTest", "public", "function", "testContructor", "a", "new", "DotNotation", "abc", "NUMBER", "xyz", "NUMBER", "NUMBER", "a", "add", "abc", "xyz", "NUMBER", "NUMBER", "this", "assertSame", "xyz", "NUMBER", "NUMBER", "xyz", "NUMBER", "NUMBER", "a", "get", "abc", "public", "function", "testSetValues", "b", "new", "DotNotation", "b", "setValues", "abc", "NUMBER", "xyz", "NUMBER", "NUMBER", "b", "add", "abc", "xyz", "NUMBER", "NUMBER", "this", "assertSame", "xyz", "NUMBER", "NUMBER", "xyz", "NUMBER", "NUMBER", "b", "get", "abc", "elfet", "Yes", "i", "do", "work", "with", "this", "PR", "php", "env", "abc", "one", "two", "NUMBER", "env", "abc", "NUMBER", "one", "other", "NUMBER", "this", "assertSame", "two", "NUMBER", "other", "NUMBER", "env", "abc", "NUMBER", "one", "result", "true", "Sorry", "elfet", "your", "comment", "be", "correct", "NUMBER", "Current", "it", "dose", "work", "php", "env", "abc", "one", "two", "NUMBER", "env", "abc", "NUMBER", "one", "other", "NUMBER", "this", "assertSame", "two", "NUMBER", "other", "NUMBER", "env", "abc", "NUMBER", "one", "result", "false", "this", "assertSame", "other", "NUMBER", "env", "abc", "NUMBER", "one", "result", "true", "I", "was", "wrong", "when", "add", "to", "the", "end", "of", "the", "function", "test", "shit", "php", "public", "function", "testEnvironment", "Environment", "setDefault", "default", "default", "Environment", "setDefault", "callback", "function", "return", "callback", "env", "new", "Environment", "env", "set", "int", "NUMBER", "env", "set", "string", "value", "env", "set", "array", "NUMBER", "two", "env", "set", "parse", "be", "int", "this", "assertEquals", "NUMBER", "env", "get", "int", "this", "assertEquals", "value", "env", "get", "string", "this", "assertEquals", "NUMBER", "two", "env", "get", "array", "this", "assertEquals", "default", "env", "get", "no", "default", "this", "assertEquals", "default", "env", "get", "default", "this", "assertEquals", "default", "Environment", "getDefault", "default", "this", "assertEquals", "callback", "env", "get", "callback", "this", "assertEquals", "be", "NUMBER", "env", "get", "parse", "env", "set", "int", "NUMBER", "this", "assertEquals", "be", "NUMBER", "env", "get", "parse", "this", "setExpectedException", "RuntimeException", "Environment", "parameter", "so", "do", "not", "exists", "NUMBER", "env", "get", "so", "env", "set", "abc", "one", "two", "NUMBER", "env", "set", "abc", "NUMBER", "one", "other", "NUMBER", "this", "assertSame", "two", "NUMBER", "other", "NUMBER", "env", "get", "abc", "NUMBER", "one", "I", "will", "try", "NUMBER", "I", "see", "that", "you", "can", "connect", "to", "host", "via", "SSH", "keys", "but", "I", "don", "t", "see", "any", "function", "or", "set", "witch", "you", "can", "connect", "to", "git", "with", "SSH", "keys", "without", "password", "NUMBER", "maybe", "it", "s", "a", "future", "feature", "and", "i", "thin", "that", "it", "s", "really", "important", "NUMBER", "or", "maybe", "the", "libraru", "alredy", "have", "this", "and", "i", "don", "t", "see", "NUMBER", "Thanks", "If", "i", "try", "this", "I", "must", "specify", "config", "file", "I", "then", "the", "host", "connection", "it", "s", "refused", "because", "I", "use", "username", "and", "password", "NUMBER", "I", "have", "first", "connect", "to", "host", "with", "user", "and", "password", "it", "s", "a", "vagrant", "machine", "and", "for", "make", "the", "code_update", "git", "pull", "I", "must", "specify", "the", "repository", "but", "for", "auth", "in", "the", "repository", "I", "must", "connect", "via", "SSH", "Keys", "I", "see", "i", "will", "try", "this", "but", "please", "think", "about", "add", "a", "method", "for", "specify", "this", "parameters", "NUMBER", "thanks", "very", "much", "when", "I", "try", "to", "install", "the", "library", "via", "composer", "I", "recive", "this", "Installing", "elfet", "php", "ssh", "v", "NUMBER", "Downloading", "LINK", "ssh", "zipball", "NUMBER", "becf", "NUMBER", "cbf", "NUMBER", "df", "NUMBER", "a", "NUMBER", "dd", "NUMBER", "c", "NUMBER", "bf", "NUMBER", "Downloading", "connection", "NUMBER", "Failed", "Composer", "Downloader", "TransportException", "NUMBER", "The", "LINK", "ssh", "zipball", "NUMBER", "becf", "NUMBER", "cbf", "NUMBER", "df", "NUMBER", "a", "NUMBER", "dd", "NUMBER", "c", "NUMBER", "bf", "NUMBER", "file", "could", "not", "be", "downloaded", "HTTP", "NUMBER", "NUMBER", "Not", "Found", "Failed", "to", "download", "elfet", "php", "ssh", "from", "dist", "The", "LINK", "ssh", "zipball", "NUMBER", "becf", "NUMBER", "cbf", "NUMBER", "df", "NUMBER", "a", "NUMBER", "dd", "NUMBER", "c", "NUMBER", "bf", "NUMBER", "file", "could", "not", "be", "downloaded", "HTTP", "NUMBER", "NUMBER", "Not", "Found", "Now", "trying", "to", "download", "from", "source", "Installing", "elfet", "php", "ssh", "v", "NUMBER", "Cloning", "NUMBER", "becf", "NUMBER", "cbf", "NUMBER", "df", "NUMBER", "a", "NUMBER", "dd", "NUMBER", "c", "NUMBER", "bf", "NUMBER", "Executing", "command", "CWD", "git", "clone", "no", "checkout", "git", "github", "NUMBER", "com", "elfet", "php", "ssh", "NUMBER", "git", "srv", "www", "vhosts", "online", "gadget", "NUMBER", "local", "vendor", "elfet", "php", "ssh", "cd", "srv", "www", "vhosts", "online", "gadget", "NUMBER", "local", "vendor", "elfet", "php", "ssh", "git", "remote", "add", "composer", "git", "github", "NUMBER", "com", "elfet", "php", "ssh", "NUMBER", "git", "git", "fetch", "composer", "Executing", "command", "CWD", "git", "clone", "no", "checkout", "LINK", "ssh", "NUMBER", "git", "srv", "www", "vhosts", "online", "gadget", "NUMBER", "local", "vendor", "elfet", "php", "ssh", "cd", "srv", "www", "vhosts", "online", "gadget", "NUMBER", "local", "vendor", "elfet", "php", "ssh", "git", "remote", "add", "composer", "LINK", "ssh", "NUMBER", "git", "git", "fetch", "composer", "Username", "for", "LINK", "and", "in", "packagist", "This", "package", "be", "abandoned", "and", "no", "longer", "maintained", "NUMBER", "The", "author", "suggests", "use", "the", "herzult", "php", "ssh", "package", "instead", "NUMBER", "You", "need", "to", "run", "composer", "self", "update", "then", "composer", "clear", "cache", "NUMBER", "thanks", "but", "the", "problem", "it", "s", "the", "same", "continue", "try", "use", "elfet", "php", "ssh", "and", "request", "error", "RuntimeException", "Failed", "to", "clone", "git", "github", "NUMBER", "com", "elfet", "php", "ssh", "NUMBER", "git", "via", "git", "https", "ssh", "protocols", "aborting", "NUMBER", "git", "github", "NUMBER", "com", "elfet", "php", "ssh", "NUMBER", "git", "Cloning", "into", "srv", "www", "vhosts", "NUMBER", "vendor", "elfet", "php", "ssh", "NUMBER", "fatal", "remote", "error", "Repository", "not", "find", "NUMBER", "LINK", "ssh", "NUMBER", "git", "Cloning", "into", "srv", "www", "vhosts", "NUMBER", "vendor", "elfet", "php", "ssh", "NUMBER", "remote", "Invalid", "username", "or", "password", "NUMBER", "fatal", "Authentication", "fail", "for", "LINK", "ssh", "NUMBER", "git", "git", "github", "NUMBER", "com", "elfet", "php", "ssh", "NUMBER", "git", "Cloning", "into", "srv", "www", "vhosts", "NUMBER", "vendor", "elfet", "php", "ssh", "NUMBER", "Warning", "Permanently", "add", "github", "NUMBER", "com", "NUMBER", "RSA", "to", "the", "list", "of", "know", "hosts", "NUMBER", "Permission", "denied", "publickey", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "Exception", "trace", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Util", "Git", "NUMBER", "php", "NUMBER", "Composer", "Util", "Git", "throwException", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Util", "Git", "NUMBER", "php", "NUMBER", "Composer", "Util", "Git", "runCommand", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Downloader", "GitDownloader", "NUMBER", "php", "NUMBER", "Composer", "Downloader", "GitDownloader", "doDownload", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Downloader", "VcsDownloader", "NUMBER", "php", "NUMBER", "Composer", "Downloader", "VcsDownloader", "download", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Downloader", "DownloadManager", "NUMBER", "php", "NUMBER", "Composer", "Downloader", "DownloadManager", "download", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Installer", "LibraryInstaller", "NUMBER", "php", "NUMBER", "Composer", "Installer", "LibraryInstaller", "installCode", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Installer", "LibraryInstaller", "NUMBER", "php", "NUMBER", "Composer", "Installer", "LibraryInstaller", "install", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Installer", "InstallationManager", "NUMBER", "php", "NUMBER", "Composer", "Installer", "InstallationManager", "install", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Installer", "InstallationManager", "NUMBER", "php", "NUMBER", "Composer", "Installer", "InstallationManager", "execute", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Installer", "NUMBER", "php", "NUMBER", "Composer", "Installer", "doInstall", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Installer", "NUMBER", "php", "NUMBER", "Composer", "Installer", "run", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Command", "UpdateCommand", "NUMBER", "php", "NUMBER", "Composer", "Command", "UpdateCommand", "execute", "at", "phar", "usr", "bin", "composer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "bin", "composer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "bin", "composer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Console", "Application", "NUMBER", "php", "NUMBER", "Composer", "Console", "Application", "doRun", "at", "phar", "usr", "bin", "composer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "bin", "composer", "src", "Composer", "Console", "Application", "NUMBER", "php", "NUMBER", "Composer", "Console", "Application", "run", "at", "phar", "usr", "bin", "composer", "bin", "composer", "NUMBER", "require", "at", "usr", "bin", "composer", "NUMBER", "NUMBER", "NUMBER", "I", "only", "can", "use", "stable", "version", "nice", "now", "works", "so", "thanks", "very", "much", "Hi", "Just", "find", "composer", "have", "moved", "their", "composer", "installer", "location", "to", "be", "behind", "SSL", "NUMBER", "This", "means", "currently", "deployment", "will", "fail", "NUMBER", "New", "install", "command", "as", "on", "the", "composer", "website", "be", "now", "curl", "sS", "LINK", "php", "Cheers", "Alex", "Is", "there", "a", "way", "to", "make", "it", "work", "with", "private", "repos", "NUMBER", "I", "only", "find", "exemples", "use", "public", "repositories", "NUMBER", "I", "didn", "t", "tried", "it", "yet", "but", "it", "seems", "that", "we", "can", "t", "pass", "public", "key", "or", "whatever", "like", "for", "server", "function", "NUMBER", "The", "fact", "be", "my", "repository", "already", "knows", "my", "server", "key", "but", "the", "key", "contains", "a", "passphrase", "NUMBER", "I", "use", "dep", "deploy", "vvv", "on", "my", "local", "machine", "the", "connection", "to", "my", "server", "be", "ok", "but", "when", "cloning", "the", "repository", "it", "fail", "permission", "denied", "NUMBER", "So", "I", "manually", "did", "the", "git", "clone", "display", "with", "the", "vvv", "option", "on", "my", "server", "it", "asks", "for", "my", "key", "and", "the", "clone", "be", "a", "success", "NUMBER", "I", "m", "stuck", "NUMBER", "Dear", "creakiwi", "I", "also", "met", "a", "problem", "as", "you", "and", "I", "have", "to", "use", "feature", "forward", "agent", "successful", "to", "solve", "that", "problem", "NUMBER", "The", "first", "you", "need", "to", "setup", "your", "system", "support", "forward", "agent", "NUMBER", "On", "your", "local", "machine", "content", "file", "NUMBER", "ssh", "config", "Host", "TAG", "ForwardAgent", "yes", "On", "your", "server", "uncomment", "line", "AllowAgentForwarding", "yes", "in", "file", "etc", "ssh", "sshd_config", "to", "allow", "agent", "forwarding", "feature", "NUMBER", "AllowAgentForwarding", "yes", "AllowTcpForwarding", "yes", "GatewayPorts", "no", "X", "NUMBER", "Forwarding", "no", "Reload", "sshd", "service", "on", "your", "server", "NUMBER", "shell", "sudo", "service", "sshd", "restart", "Test", "forward", "agent", "from", "your", "local", "machine", "NUMBER", "ssh", "ssh", "add", "path", "to", "your", "key", "file", "ssh", "TAG", "TAG", "ssh", "add", "l", "Check", "your", "key", "really", "loaded", "NUMBER", "Finally", "use", "deployer", "v", "NUMBER", "and", "forward", "agent", "feature", "NUMBER", "php", "server", "your", "server", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "xxx", "NUMBER", "user", "username", "forwardAgent", "stage", "dev", "env", "deploy_path", "var", "www", "apps", "yourappname", "env", "branch", "master", "Wish", "you", "success", "Refs", "LINK", "ssh", "agent", "forwarding", "LINK", "example", "Thanks", "for", "you", "answer", "oanhnn", "I", "ll", "try", "that", "tonight", "NUMBER", "I", "m", "handle", "the", "creakiwi", "account", "NUMBER", "Your", "deployer", "example", "repo", "seems", "to", "be", "a", "good", "start", "thanks", "for", "your", "additional", "informations", "about", "ssh", "configuration", "NUMBER", "Hi", "I", "m", "use", "username", "password", "ssh", "server", "NUMBER", "user", "username", "password", "and", "set", "writable_use_sudo", "true", "Using", "sudo", "in", "writable", "commands", "And", "there", "was", "RuntimeException", "with", "sudo", "commands", "at", "deployment", "RuntimeException", "sudo", "no", "tty", "present", "and", "no", "askpass", "program", "specified", "Is", "there", "a", "solution", "for", "this", "or", "passwordless", "sudo", "be", "a", "must", "Thank", "you", "NUMBER", "Thanks", "elfet", "I", "think", "it", "would", "be", "unsafe", "when", "deploy", "user", "can", "change", "permission", "of", "directory", "and", "file", "without", "sudo", "password", "NUMBER", "Create", "for", "Deployer", "v", "NUMBER", "PR", "based", "on", "following", "PR", "LINK", "elfet", "I", "myself", "no", "longer", "need", "this", "feature", "smile", "I", "need", "it", "NUMBER", "My", "database", "file", "be", "gone", "and", "my", "site", "do", "not", "work", "NUMBER", "How", "do", "you", "guys", "handle", "data", "file", "to", "share", "without", "feature", "like", "this", "kenjis", "You", "can", "use", "function", "upload", "to", "create", "a", "task", "for", "your", "work", "yoursefl", "Why", "woudn", "t", "you", "add", "an", "alternative", "task", "say", "deploy", "shared_copy", "For", "my", "mind", "it", "s", "ridiculous", "to", "delete", "file", "stored", "in", "repository", "without", "checking", "if", "there", "be", "a", "local", "copy", "NUMBER", "oanhnn", "upload", "uploads", "file", "every", "time", "NUMBER", "But", "in", "my", "case", "the", "file", "be", "deployed", "from", "repository", "only", "the", "first", "deployment", "NUMBER", "elfet", "Do", "you", "mean", "to", "put", "the", "db", "file", "manually", "I", "don", "t", "like", "to", "do", "something", "manually", "on", "deployment", "NUMBER", "deploy", "shared_copy", "NUMBER", "Can", "someone", "please", "provide", "an", "example", "of", "how", "to", "use", "Deployer", "to", "deploy", "to", "a", "server", "from", "a", "remote", "Git", "repo", "I", "have", "gone", "through", "the", "documentation", "on", "the", "website", "NUMBER", "I", "understand", "the", "general", "principle", "of", "the", "tool", "but", "I", "still", "can", "t", "get", "going", "NUMBER", "Also", "will", "it", "only", "update", "the", "file", "that", "need", "update", "or", "will", "it", "write", "all", "the", "file", "from", "the", "repo", "to", "the", "server", "every", "time", "Thanks", "NUMBER", "Dear", "ksidibe", "Until", "new", "documents", "be", "completed", "you", "can", "refer", "to", "this", "repo", "LINK", "example", "NUMBER", "Thanks", "elfet", "and", "oanhnn", "NUMBER", "oanhnn", "I", "m", "checking", "out", "the", "repo", "you", "suggested", "NUMBER", "Thanks", "again", "NUMBER", "Dear", "ksidibe", "I", "have", "update", "the", "README", "file", "for", "the", "more", "understandable", "and", "hopes", "it", "will", "help", "you", "NUMBER", "ksidibe", "For", "use", "Deployer", "follow", "these", "steps", "Clone", "this", "repo", "to", "your_dir", "cd", "to", "your_dir", "run", "composer", "install", "run", "php", "NUMBER", "build", "This", "will", "create", "deployer", "NUMBER", "phar", "file", "NUMBER", "Create", "deploy", "NUMBER", "php", "file", "in", "which", "you", "will", "set", "server", "stage", "repository", "shared_dirs", "etc", "define", "additional", "tasks", "and", "main", "task", "NUMBER", "You", "can", "refer", "to", "oanhnn", "s", "deploy", "NUMBER", "php", "file", "LINK", "example", "blob", "master", "deploy", "NUMBER", "php", "Have", "a", "look", "at", "common", "recipe", "LINK", "to", "understand", "base", "tasks", "NUMBER", "To", "exec", "a", "task", "run", "php", "deployer", "NUMBER", "phar", "TAG", "TAG", "For", "example", "to", "exec", "main", "deploy", "task", "on", "dev", "stage", "run", "php", "deployer", "NUMBER", "php", "vvv", "deploy", "dev", "vvv", "be", "for", "debuging", "vanquang", "NUMBER", "Thanks", "a", "lot", "NUMBER", "You", "guys", "have", "be", "awesome", "NUMBER", "I", "m", "currently", "going", "through", "the", "suggestions", "you", "guys", "have", "made", "NUMBER", "Thanks", "NUMBER", "Glad", "to", "be", "helpful", "smile", "I", "m", "use", "deployer", "from", "master", "branch", "NUMBER", "My", "repo", "has", "around", "NUMBER", "file", "NUMBER", "This", "be", "my", "deploy", "task", "task", "deploy", "deploy", "prepare", "deploy", "release", "deploy", "update_code", "deploy", "shared", "deploy", "writable", "deploy", "symlink", "cleanup", "backend", "restart", "desc", "Deploy", "your", "project", "This", "be", "part", "of", "log", "when", "I", "deploy", "with", "vvv", "Executing", "task", "deploy", "update_code", "NUMBER", "do", "on", "dev", "Ok", "Executing", "task", "deploy", "shared", "Run", "cd", "deploy_path", "if", "d", "echo", "deploy_path", "release", "NUMBER", "app", "tmp", "then", "rm", "rf", "deploy_path", "release", "NUMBER", "app", "tmp", "fi", "Run", "cd", "deploy_path", "mkdir", "p", "deploy_path", "shared", "app", "tmp", "Run", "cd", "deploy_path", "mkdir", "p", "dirname", "deploy_path", "release", "NUMBER", "app", "tmp", "PHP", "Notice", "Unable", "to", "open", "channel", "in", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Notice", "Connection", "close", "prematurely", "in", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "NUMBER", "do", "on", "dev", "Ok", "Executing", "task", "deploy", "writable", "NUMBER", "do", "on", "dev", "Ok", "NUMBER", "Executing", "task", "success", "Successfully", "deployed", "Ok", "Though", "it", "seems", "to", "be", "successful", "NUMBER", "I", "can", "tell", "all", "run", "commands", "after", "PHP", "Notice", "Unable", "to", "open", "channel", "in", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Notice", "Connection", "close", "prematurely", "in", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "were", "unsuccessful", "NUMBER", "How", "can", "I", "tell", "that", "clone", "checkout", "command", "update_code", "has", "not", "finished", "but", "next", "tasks", "start", "At", "the", "time", "of", "deploy", "shared", "task", "run", "I", "logged", "in", "the", "deploy", "server", "and", "saw", "my", "release", "folder", "had", "less", "than", "NUMBER", "file", "NUMBER", "Some", "of", "my", "friends", "have", "also", "faced", "kind", "of", "this", "problem", "since", "yesterday", "NUMBER", "elfet", "For", "more", "information", "I", "had", "not", "install", "ssh", "NUMBER", "After", "installing", "ssh", "NUMBER", "there", "were", "few", "successful", "deployments", "along", "with", "unsuccessful", "ones", "NUMBER", "Is", "this", "problem", "relate", "to", "these", "issue", "LINK", "LINK", "elfet", "This", "problem", "happens", "after", "composer", "update", "NUMBER", "I", "ve", "cloned", "master", "branch", "again", "to", "test", "and", "deployment", "was", "successful", "NUMBER", "Then", "I", "run", "composer", "update", "and", "this", "problem", "occured", "again", "NUMBER", "This", "was", "the", "update", "log", "composer", "update", "Loading", "composer", "repositories", "with", "package", "information", "Updating", "dependencies", "including", "require", "dev", "Removing", "symfony", "finder", "v", "NUMBER", "Installing", "symfony", "finder", "v", "NUMBER", "Loading", "from", "cache", "Removing", "symfony", "console", "v", "NUMBER", "Installing", "symfony", "console", "v", "NUMBER", "Loading", "from", "cache", "Removing", "symfony", "process", "v", "NUMBER", "Installing", "symfony", "process", "v", "NUMBER", "Loading", "from", "cache", "Removing", "sebastian", "version", "NUMBER", "Installing", "sebastian", "version", "NUMBER", "Downloading", "NUMBER", "Removing", "sebastian", "environment", "NUMBER", "Installing", "sebastian", "environment", "NUMBER", "Downloading", "NUMBER", "Removing", "sebastian", "diff", "NUMBER", "Installing", "sebastian", "diff", "NUMBER", "Downloading", "NUMBER", "Removing", "symfony", "yaml", "v", "NUMBER", "Installing", "symfony", "yaml", "v", "NUMBER", "Downloading", "NUMBER", "Removing", "phpspec", "prophecy", "v", "NUMBER", "Installing", "phpspec", "prophecy", "NUMBER", "Downloading", "NUMBER", "Removing", "phpunit", "phpunit", "mock", "objects", "NUMBER", "Installing", "phpunit", "phpunit", "mock", "objects", "NUMBER", "Downloading", "NUMBER", "Removing", "phpunit", "php", "token", "stream", "NUMBER", "Installing", "phpunit", "php", "token", "stream", "NUMBER", "Downloading", "NUMBER", "Removing", "phpunit", "php", "file", "iterator", "NUMBER", "Installing", "phpunit", "php", "file", "iterator", "NUMBER", "Downloading", "NUMBER", "Removing", "phpunit", "php", "code", "coverage", "NUMBER", "Installing", "phpunit", "php", "code", "coverage", "NUMBER", "Downloading", "NUMBER", "Removing", "phpunit", "phpunit", "NUMBER", "Installing", "phpunit", "phpunit", "NUMBER", "Downloading", "NUMBER", "Removing", "herzult", "php", "ssh", "v", "NUMBER", "Installing", "herzult", "php", "ssh", "v", "NUMBER", "Downloading", "NUMBER", "Removing", "symfony", "debug", "v", "NUMBER", "Installing", "symfony", "debug", "v", "NUMBER", "Loading", "from", "cache", "Removing", "symfony", "expression", "language", "v", "NUMBER", "Installing", "symfony", "expression", "language", "v", "NUMBER", "Loading", "from", "cache", "Removing", "react", "socket", "client", "v", "NUMBER", "Installing", "react", "socket", "client", "v", "NUMBER", "Loading", "from", "cache", "Removing", "justinrainbow", "json", "schema", "NUMBER", "Installing", "justinrainbow", "json", "schema", "NUMBER", "Loading", "from", "cache", "Updating", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "NUMBER", "b", "NUMBER", "d", "NUMBER", "Checking", "out", "NUMBER", "b", "NUMBER", "d", "NUMBER", "dce", "NUMBER", "a", "NUMBER", "ef", "NUMBER", "f", "NUMBER", "a", "NUMBER", "ce", "NUMBER", "a", "NUMBER", "e", "NUMBER", "Maybe", "there", "was", "problem", "with", "some", "package", "update", "NUMBER", "Can", "you", "have", "a", "check", "Thank", "you", "NUMBER", "This", "problem", "be", "resolve", "when", "i", "fix", "version", "of", "phpseclib", "json", "require", "php", "NUMBER", "phpseclib", "phpseclib", "dev", "master", "NUMBER", "c", "NUMBER", "af", "NUMBER", "bf", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "deployer", "deployer", "dev", "master", "It", "s", "not", "I", "m", "from", "France", "and", "with", "Chrome", "I", "get", "this", "error", "ERR_EMPTY_RESPONSE", "It", "s", "really", "slow", "for", "me", "in", "the", "UK", "too", "but", "be", "work", "NUMBER", "It", "doesn", "t", "work", "for", "me", "at", "all", "even", "if", "I", "refresh", "several", "time", "NUMBER", "while", "use", "this", "under", "Windows", "server", "NUMBER", "NUMBER", "pubKey", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "null", "get", "an", "error", "PassPhrase", "D", "OpenServer", "userdata", "tmp", "hiddeninput", "NUMBER", "exe", "\u043d\u0435", "\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f", "\u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0439", "\u0438\u043b\u0438", "\u0432\u043d\u0435\u0448\u043d\u0435\u0439", "\u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439", "\u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u043e\u0439", "\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043e\u0439", "\u0438\u043b\u0438", "\u043f\u0430\u043a\u0435\u0442\u043d\u044b\u043c", "\u0444\u0430\u0439\u043b\u043e\u043c", "NUMBER", "Warning", "unlink", "D", "OpenServer", "userdata", "tmp", "hiddeninput", "NUMBER", "exe", "No", "such", "file", "or", "directory", "in", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Sy", "mfony", "Component", "Console", "Helper", "DialogHelper", "NUMBER", "php", "on", "line", "NUMBER", "Call", "Stack", "NUMBER", "NUMBER", "NUMBER", "main", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "require", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "bin", "dep", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Deployer", "run", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "Deployer", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Com", "ponent", "Console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Componen", "t", "Console", "Application", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Console", "RunTaskCommand", "execute", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Cons", "ole", "Command", "Command", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Console", "RunTaskCommand", "runSeries", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Task", "Runner", "run", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "call_user_func", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deplo", "yer", "NUMBER", "phar", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "closure", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "ph", "ar", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "run", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "recipe", "common", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Server", "Ssh", "NUMBER", "run", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Server", "Ssh", "NUMBER", "checkConnection", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "Server", "Ssh", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Server", "Ssh", "NUMBER", "connect", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "Server", "Ssh", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Deployer", "Server", "Configuration", "getPassPhrase", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "Server", "Ssh", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "askHiddenResponse", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "Server", "Configuration", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Symfony", "Component", "Console", "Helper", "DialogHelper", "askHiddenResponse", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "unlink", "phar", "D", "OpenServer", "modules", "php", "PHP", "NUMBER", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Helper", "DialogHelper", "NUMBER", "php", "NUMBER", "what", "can", "be", "do", "to", "avoid", "it", "deployer", "version", "NUMBER", "self", "update", "made", "why", "it", "s", "not", "newer", "php", "version", "PHP", "NUMBER", "cli", "build", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "windows", "NUMBER", "pro", "managed", "to", "make", "this", "by", "installing", "deployer", "from", "sources", "NUMBER", "maybe", "exe", "file", "be", "not", "include", "into", "phar", "archive", "or", "it", "cannot", "be", "executed", "from", "there", "Creating", "symlink", "to", "release", "the", "symlink", "swap", "be", "now", "a", "non", "atomic", "operation", "NUMBER", "To", "use", "ln", "fsn", "be", "not", "bad", "good", "enough", "NUMBER", "But", "n", "option", "be", "non", "standard", "and", "so", "be", "not", "recommended", "NUMBER", "Above", "all", "it", "s", "not", "sure", "ln", "f", "be", "atomic", "NUMBER", "It", "s", "sure", "mv", "be", "an", "atomic", "operation", "NUMBER", "mv", "Tf", "with", "T", "option", "may", "be", "the", "best", "bet", "NUMBER", "Thanks", "a", "lot", "NUMBER", "I", "m", "looking", "forward", "to", "NUMBER", "What", "Be", "able", "to", "access", "a", "remote", "server", "in", "a", "VPN", "throw", "a", "Bastion", "Jump", "Server", "Why", "To", "access", "the", "target", "servers", "from", "my", "local", "machine", "NUMBER", "_In", "my", "case_", "I", "access", "a", "jump", "server", "with", "ssh", "A", "user", "jump", "host", "Then", "access", "all", "my", "instances", "like", "ssh", "host", "NUMBER", "ssh", "host", "NUMBER", "ssh", "hots", "NUMBER", "to", "make", "the", "deployer", "flow", "i", "want", "NUMBER", "Note", "A", "enable", "forwarding", "of", "the", "authentication", "agent", "connection", "that", "means", "i", "don", "t", "have", "my", "pubKeys", "at", "any", "remote", "destination", "server", "neither", "a", "user", "name", "or", "password", "NUMBER", "elfet", "Hi", "Is", "this", "feature", "available", "in", "an", "alpha", "beta", "I", "can", "t", "get", "the", "git", "clone", "step", "to", "work", "without", "SSH", "Agent", "Forwarding", "NUMBER", "When", "I", "try", "to", "run", "the", "same", "command", "Deployer", "be", "run", "which", "I", "can", "see", "use", "vvv", "but", "manually", "via", "this", "command", "ssh", "A", "user", "host", "git", "clone", "etc", "then", "it", "works", "so", "I", "don", "t", "think", "it", "s", "an", "SSH", "configuration", "issue", "NUMBER", "My", "deploy", "NUMBER", "php", "looks", "like", "this", "php", "TAG", "user", "user", "forwardAgent", "You", "can", "use", "identity", "key", "ssh", "config", "or", "username", "password", "to", "auth", "on", "the", "server", "NUMBER", "stage", "production", "env", "deploy_path", "var", "www", "project_name", "Define", "the", "base", "path", "to", "deploy", "your", "project", "to", "NUMBER", "env", "branch", "master", "Specify", "the", "repository", "from", "which", "to", "download", "your", "project", "s", "code", "NUMBER", "The", "server", "needs", "to", "have", "git", "install", "for", "this", "to", "work", "NUMBER", "If", "you", "re", "not", "use", "a", "forward", "agent", "then", "the", "server", "has", "to", "be", "able", "to", "clone", "your", "project", "from", "this", "repository", "NUMBER", "set", "repository", "git", "github", "NUMBER", "com", "organisation", "project_name", "NUMBER", "git", "Did", "you", "config", "your", "server", "and", "your", "deployment", "PC", "to", "allow", "forward", "agent", "See", "my", "comment", "in", "issue", "NUMBER", "Or", "my", "example", "project", "oanhnn", "deployer", "example", "LINK", "example", "Hi", "oanhnn", "yeah", "it", "s", "all", "configured", "correctly", "I", "verify", "by", "run", "Deployer", "in", "verbose", "mode", "then", "copying", "those", "same", "commands", "and", "run", "them", "manually", "use", "ssh", "A", "NUMBER", "Dear", "Rylon", "If", "your", "config", "be", "correctly", "ssh", "and", "ssh", "A", "be", "same", "NUMBER", "Can", "you", "try", "it", "LINK", "example", "blob", "master", "docs", "enable", "feature", "ssh", "forward", "agent", "NUMBER", "md", "Hi", "oanhnn", "yes", "I", "ve", "tried", "that", "as", "well", "NUMBER", "All", "the", "commands", "work", "properly", "if", "I", "run", "them", "manually", "use", "ssh", "user", "host", "TAG", "with", "or", "without", "A", "NUMBER", "Same", "here", "I", "m", "get", "RuntimeException", "Permission", "denied", "publickey", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "but", "executing", "the", "exact", "same", "git", "clone", "command", "directly", "from", "the", "command", "line", "works", "fine", "NUMBER", "Ok", "let", "me", "try", "to", "help", "in", "debugging", "fix", "that", "NUMBER", "Here", "be", "what", "I", "m", "trying", "to", "do", "php", "TAG", "user", "kevin", "forwardAgent", "stage", "production", "env", "deploy_path", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "set", "repository", "git", "bitbucket", "NUMBER", "org", "bleeee", "download", "NUMBER", "blabla", "NUMBER", "com", "NUMBER", "git", "I", "ve", "raise", "the", "ssh", "LogLevel", "on", "the", "server", "to", "DEBUG", "NUMBER", "to", "get", "extra", "info", "and", "here", "be", "what", "happens", "With", "Deployer", "kevin", "ks", "workspace", "test", "test", "deployer", "deployer", "NUMBER", "phar", "deploy", "production", "vv", "Executing", "task", "deploy", "prepare", "on", "production", "Run", "echo", "NUMBER", "Run", "if", "d", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "then", "echo", "fi", "Run", "cd", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "if", "d", "release", "then", "mkdir", "release", "fi", "Run", "cd", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "if", "d", "shared", "then", "mkdir", "shared", "fi", "do", "on", "production", "Ok", "Executing", "task", "deploy", "release", "on", "production", "Run", "date", "Y", "m", "d", "H", "M", "S", "Run", "mkdir", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "release", "NUMBER", "Run", "cd", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "if", "h", "release", "then", "rm", "release", "fi", "Run", "ln", "s", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "release", "NUMBER", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "release", "do", "on", "production", "Ok", "Executing", "task", "deploy", "update_code", "on", "production", "Run", "readlink", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "release", "Run", "git", "clone", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "bleeee", "download", "NUMBER", "blabla", "NUMBER", "com", "NUMBER", "git", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "release", "NUMBER", "NUMBER", "NUMBER", "RuntimeException", "debug", "NUMBER", "ssh_connect", "needpriv", "NUMBER", "debug", "NUMBER", "Connecting", "to", "bitbucket", "NUMBER", "org", "NUMBER", "port", "NUMBER", "debug", "NUMBER", "Connection", "established", "NUMBER", "NUMBER", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_SERVICE_ACCEPT", "received", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_rsa", "nil", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_dsa", "nil", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_ecdsa", "nil", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_ed", "NUMBER", "nil", "debug", "NUMBER", "Authentications", "that", "can", "continue", "publickey", "debug", "NUMBER", "Next", "authentication", "method", "publickey", "debug", "NUMBER", "Trying", "private", "key", "home", "kevin", "NUMBER", "ssh", "id_rsa", "debug", "NUMBER", "Trying", "private", "key", "home", "kevin", "NUMBER", "ssh", "id_dsa", "debug", "NUMBER", "Trying", "private", "key", "home", "kevin", "NUMBER", "ssh", "id_ecdsa", "debug", "NUMBER", "Trying", "private", "key", "home", "kevin", "NUMBER", "ssh", "id_ed", "NUMBER", "debug", "NUMBER", "we", "did", "not", "send", "a", "packet", "disable", "method", "debug", "NUMBER", "No", "more", "authentication", "methods", "to", "try", "NUMBER", "Permission", "denied", "publickey", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "Very", "same", "command", "but", "directly", "from", "the", "command", "line", "kevin", "ks", "workspace", "test", "test", "deployer", "ssh", "A", "server", "NUMBER", "com", "git", "clone", "depth", "NUMBER", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "bleeee", "download", "NUMBER", "blabla", "NUMBER", "com", "NUMBER", "git", "var", "www", "download", "NUMBER", "blabla", "NUMBER", "com", "release", "NUMBER", "NUMBER", "NUMBER", "debug", "NUMBER", "ssh_connect", "needpriv", "NUMBER", "debug", "NUMBER", "Connecting", "to", "bitbucket", "NUMBER", "org", "NUMBER", "port", "NUMBER", "debug", "NUMBER", "Connection", "established", "NUMBER", "NUMBER", "debug", "NUMBER", "SSH", "NUMBER", "_MSG_SERVICE_ACCEPT", "received", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_rsa", "NUMBER", "x", "NUMBER", "fa", "NUMBER", "bc", "NUMBER", "b", "NUMBER", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_rsa", "nil", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_dsa", "nil", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_ecdsa", "nil", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_ed", "NUMBER", "nil", "debug", "NUMBER", "Authentications", "that", "can", "continue", "publickey", "debug", "NUMBER", "Next", "authentication", "method", "publickey", "debug", "NUMBER", "Offering", "RSA", "public", "key", "home", "kevin", "NUMBER", "ssh", "id_rsa", "debug", "NUMBER", "we", "sent", "a", "publickey", "packet", "wait", "for", "reply", "debug", "NUMBER", "Remote", "Forced", "command", "conq", "username", "kbsali", "NUMBER", "See", "how", "with", "deployer", "i", "m", "get", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_rsa", "nil", "while", "with", "ssh", "command", "debug", "NUMBER", "key", "home", "kevin", "NUMBER", "ssh", "id_rsa", "NUMBER", "x", "NUMBER", "fa", "NUMBER", "bc", "NUMBER", "b", "NUMBER", "To", "me", "that", "s", "where", "Deployer", "be", "fail", "NUMBER", "it", "be", "not", "properly", "forwarding", "the", "agent", "NUMBER", "Hope", "this", "helps", "NUMBER", "Thx", "as", "a", "work", "around", "i", "set", "the", "repo", "with", "my", "credentials", "php", "set", "repository", "LINK", "bitbucket", "NUMBER", "org", "bleeee", "download", "NUMBER", "blabla", "NUMBER", "com", "NUMBER", "git", "But", "that", "s", "not", "idea", "as", "it", "can", "not", "be", "commit", "to", "our", "repo", "NUMBER", "Thanks", "for", "that", "example", "kbsali", "that", "s", "exactly", "the", "same", "behaviour", "I", "m", "seeing", "here", "also", "NUMBER", "When", "downloading", "the", "version", "NUMBER", "beta", "NUMBER", "and", "use", "recipe", "common", "NUMBER", "php", "the", "argument", "function", "be", "miss", "NUMBER", "If", "I", "clone", "and", "build", "the", "v", "NUMBER", "b", "NUMBER", "everything", "be", "ok", "with", "the", "argument", "function", "NUMBER", "ok", "lets", "see", "if", "I", "understand", "this", "NUMBER", "So", "the", "v", "NUMBER", "b", "NUMBER", "be", "not", "including", "argument", "Is", "the", "beta", "some", "kind", "of", "reduced", "version", "of", "what", "will", "be", "release", "See", "LINK", "Summary", "Copies", "shared", "directories", "from", "source", "recursively", "without", "overwriting", "exist", "file", "Copies", "shared", "file", "from", "source", "if", "the", "file", "doesn", "t", "exists", "an", "empty", "one", "be", "created", "dirkluijk", "I", "think", "you", "should", "implement", "this", "feature", "as", "option", "copy", "or", "not", "NUMBER", "I", "agree", "with", "oanhnn", "there", "should", "be", "an", "option", "to", "enable", "this", "NUMBER", "Current", "method", "should", "be", "the", "default", "NUMBER", "Hm", "flexibility", "be", "great", "but", "I", "couldn", "t", "imagine", "a", "situation", "where", "you", "want", "empty", "file", "directories", "if", "the", "file", "and", "directories", "already", "exist", "in", "source", "control", "Because", "that", "would", "still", "be", "possible", "of", "they", "don", "t", "exist", "NUMBER", "Of", "course", "I", "could", "make", "it", "optional", "but", "I", "can", "t", "figure", "out", "how", "NUMBER", "It", "seems", "not", "possible", "to", "add", "additional", "options", "to", "a", "TaskCommand", "generate", "by", "task", "NUMBER", "And", "separate", "it", "from", "the", "current", "task", "be", "also", "not", "an", "option", "because", "this", "currently", "remove", "to", "exist", "file", "directories", "before", "creating", "the", "symlinks", "NUMBER", "Dear", "dirkluijk", "Source", "code", "checkout", "from", "git", "be", "deployed", "on", "stages", "NUMBER", "So", "that", "configure", "file", "shared_files", "shared_dirs", "be", "modify", "when", "deploy", "to", "a", "special", "stage", "NUMBER", "When", "re", "deploy", "on", "stage", "if", "copy", "original", "configure", "file", "you", "have", "modify", "it", "again", "NUMBER", "Are", "you", "want", "this", "I", "think", "we", "should", "generate", "configure", "file", "in", "first", "deploy", "and", "re", "generate", "it", "when", "stage", "have", "change", "NUMBER", "And", "we", "need", "a", "task", "to", "generate", "configure", "file", "instead", "of", "copy", "it", "from", "source", "code", "NUMBER", "You", "can", "implement", "this", "feature", "as", "option", "use", "env", "vars", "NUMBER", "Eg", "env", "copy_original_shared", "NUMBER", "php", "env", "copy_original_shared", "false", "task", "deploy", "shared", "function", "NUMBER", "if", "env", "copy_original_shared", "copy", "original", "shared", "file", "and", "dirs", "NUMBER", "oanhnn", "the", "file", "be", "only", "copied", "the", "first", "time", "the", "second", "time", "the", "file", "will", "not", "be", "overwritten", "thanks", "to", "the", "n", "flag", "NUMBER", "I", "think", "that", "s", "the", "desired", "behaviour", "NUMBER", "In", "this", "Pull", "request", "I", "will", "implement", "feature", "of", "issue", "NUMBER", "Change", "syntax", "for", "env", "vars", "to", "NUMBER", "and", "support", "allow", "whitespaces", "deploy_path", "and", "deploy_path", "return", "same", "value", "NUMBER", "Sorry", "by", "create", "other", "pull", "request", "NUMBER", "This", "pull", "request", "be", "rebase", "of", "PR", "NUMBER", "Dear", "elfet", "My", "pull", "request", "NUMBER", "has", "a", "problem", "NUMBER", "With", "old", "parser", "pattern", "NUMBER", "detected", "all", "cases", "abcxyz", "abc", "xyz", "abc_xyz", "abc", "NUMBER", "xyz", "abc", "zyx", "but", "new", "parser", "pattern", "s", "w", "s", "only", "detected", "cases", "abcxyz", "abc_xyz", "I", "can", "fix", "this", "but", "i", "want", "specific", "requirements", "for", "env", "var", "NUMBER", "I", "think", "we", "should", "only", "allow", "abcxyz", "abc_xyz", "abc", "NUMBER", "xyz", "I", "vote", "for", "same", "pattern", "as", "normal", "variables", "implement", "on", "NUMBER", "NUMBER", "Having", "a", "dot", "NUMBER", "on", "a", "variable", "could", "be", "use", "in", "the", "future", "to", "be", "a", "property", "of", "an", "array", "NUMBER", "gordalina", "Is", "your", "attention", "php", "env", "abc", "array", "xyz", "NUMBER", "echo", "env", "parse", "abc", "NUMBER", "xyz", "output", "NUMBER", "I", "didn", "t", "know", "about", "parse", "NUMBER", "Still", "I", "keep", "my", "opinion", "and", "would", "suggest", "make", "parse", "private", "and", "env", "would", "call", "parse", "here", "LINK", "L", "NUMBER", "This", "way", "properties", "be", "part", "of", "the", "DSL", "and", "the", "user", "doesn", "t", "need", "to", "know", "wether", "it", "be", "necessary", "to", "parse", "them", "or", "not", "NUMBER", "What", "be", "your", "thoughts", "oanhnn", "elfet", "I", "think", "NUMBER", "Method", "parse", "will", "be", "private", "NUMBER", "It", "be", "only", "call", "when", "use", "run", "NUMBER", "NUMBER", "When", "call", "env", "abc", "xyz", "or", "env", "set", "abc", "xyz", "variable", "abc", "will", "check", "and", "only", "allow", "a", "z", "A", "Z", "NUMBER", "NUMBER", "and", "underscore", "character", "_", "NUMBER", "When", "call", "env", "abc", "or", "env", "get", "abc", "variable", "abc", "will", "check", "and", "only", "allow", "a", "z", "A", "Z", "NUMBER", "NUMBER", "underscore", "character", "_", "and", "dot", "character", "NUMBER", "NUMBER", "If", "having", "a", "dot", "on", "variable", "abc", "could", "be", "use", "in", "the", "future", "to", "be", "a", "property", "of", "an", "array", "NUMBER", "oanhnn", "exactly", "In", "this", "Pull", "request", "I", "will", "implement", "feature", "of", "issue", "NUMBER", "Change", "syntax", "for", "env", "vars", "to", "NUMBER", "and", "support", "allow", "whitespaces", "deploy_path", "and", "deploy_path", "return", "same", "value", "NUMBER", "Sorry", "elfet", "I", "try", "make", "all", "commit", "to", "single", "commit", "by", "rebase", "but", "it", "be", "failure", "NUMBER", "Please", "implement", "this", "feature", "yourself", "NUMBER", "I", "think", "single", "be", "best", "This", "version", "improves", "command", "execution", "error", "detection", "See", "LINK", "ssh", "pull", "NUMBER", "Hello", "elfet", "Could", "you", "review", "this", "one", "please", "Main", "problem", "with", "php", "ssh", "NUMBER", "be", "that", "it", "relies", "on", "stderr", "to", "check", "if", "executed", "command", "fail", "or", "not", "BUT", "since", "a", "few", "weeks", "composer", "writes", "a", "lot", "of", "things", "to", "stderr", "that", "be", "not", "error", "see", "my", "previous", "comment", "for", "the", "reasons", "NUMBER", "Basically", "all", "deployer", "users", "that", "uses", "composer", "during", "deployment", "so", "a", "good", "majority", "of", "its", "users", "will", "get", "a", "RuntimeException", "during", "composer", "install", "step", "NUMBER", "I", "ve", "fix", "the", "problem", "on", "php", "ssh", "all", "you", "have", "to", "do", "now", "be", "to", "update", "deployer", "and", "then", "we", "can", "share", "a", "beers", "NUMBER", "NUMBER", "NUMBER", "Will", "be", "nicer", "if", "this", "package", "support", "proxy", "settings", "NUMBER", "elfet", "I", "try", "use", "deployer", "under", "proxy", "network", "but", "not", "work", "return", "a", "message", "to", "configure", "proxy", "in", "deployer", "NUMBER", "How", "can", "I", "connect", "to", "server", "where", "he", "be", "via", "NUMBER", "ssh", "connects", "with", "Deployer", "Server", "NUMBER", "loaclhost", "Server", "NUMBER", "Server", "NUMBER", "deployment", "server", "Thanks", "NUMBER", "Thanks", "pilotftzi", "gordalina", "elfet", "NUMBER", "Getting", "stuck", "with", "the", "update_code", "task", "generating", "this", "exception", "error", "actual", "paths", "and", "IP", "anonymised", "deployer", "deploy", "vvv", "Run", "task", "deploy", "start", "on", "server", "production", "Preparing", "server", "for", "deploy", "Run", "task", "deploy", "prepare", "on", "server", "production", "NUMBER", "if", "d", "echo", "var", "www", "myproject", "then", "mkdir", "var", "www", "myproject", "fi", "Password", "NUMBER", "NUMBER", "cd", "var", "www", "myproject", "if", "d", "release", "then", "mkdir", "release", "fi", "NUMBER", "NUMBER", "cd", "var", "www", "myproject", "if", "d", "shared", "then", "mkdir", "shared", "fi", "NUMBER", "Updating", "code", "Run", "task", "deploy", "update_code", "on", "server", "production", "NUMBER", "cd", "var", "www", "myproject", "git", "clone", "recursive", "q", "git", "github", "NUMBER", "com", "gituser", "gitproject", "NUMBER", "git", "var", "www", "myproject", "release", "NUMBER", "Run", "task", "deploy", "rollback", "on", "server", "production", "Rolling", "back", "to", "previous", "release", "on", "server", "production", "NUMBER", "cd", "var", "www", "myproject", "rm", "rf", "var", "www", "myproject", "release", "NUMBER", "NUMBER", "RuntimeException", "Permission", "denied", "publickey", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "deployer", "src", "Server", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "deployer", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Runner", "run", "at", "phar", "usr", "local", "bin", "deployer", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "runSeries", "at", "phar", "usr", "local", "bin", "deployer", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "execute", "at", "phar", "usr", "local", "bin", "deployer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "deployer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "deployer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "deployer", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "deployer", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "deployer", "NUMBER", "deploy", "dry", "run", "server", "NUMBER", "stage", "The", "server", "has", "a", "valid", "key", "run", "in", "ssh", "agent", "NUMBER", "I", "can", "SSH", "into", "it", "and", "run", "the", "clone", "command", "just", "fine", "cd", "var", "www", "myproject", "git", "clone", "recursive", "q", "git", "github", "NUMBER", "com", "gituser", "gitproject", "NUMBER", "git", "var", "www", "myproject", "release", "NUMBER", "Here", "be", "my", "super", "simple", "deploy", "NUMBER", "php", "again", "anonymised", "require", "recipe", "composer", "NUMBER", "php", "server", "production", "NUMBER", "NUMBER", "user", "root", "path", "var", "www", "myproject", "set", "repository", "git", "github", "NUMBER", "com", "gituser", "gitproject", "NUMBER", "git", "I", "m", "deploying", "from", "OS", "X", "NUMBER", "with", "PHP", "NUMBER", "and", "Deployer", "NUMBER", "Target", "machine", "be", "Ubuntu", "NUMBER", "with", "PHP", "NUMBER", "NUMBER", "ubuntu", "NUMBER", "Super", "grateful", "for", "some", "assistance", "get", "this", "to", "work", "Please", "run", "task", "php", "task", "check", "function", "run", "ssh", "add", "l", "to", "list", "add", "keys", "in", "your", "ssh", "agent", "and", "check", "this", "exist", "in", "Github", "keys", "I", "have", "the", "same", "error", "on", "Deployer", "NUMBER", "I", "can", "confirm", "this", "issue", "use", "the", "latest", "version", "from", "deployer", "NUMBER", "org", "NUMBER", "But", "add", "deployer", "deployer", "as", "a", "dev", "dependency", "and", "use", "that", "version", "be", "work", "as", "expected", "NUMBER", "daFish", "I", "will", "try", "this", "NUMBER", "Version", "NUMBER", "beta", "NUMBER", "php", "task", "deploy", "build", "package", "task", "build", "package", "function", "NUMBER", "once", "This", "currently", "ends", "up", "in", "an", "expception", "deployer", "NUMBER", "phar", "deploy", "vvv", "PHP", "Warning", "array_map", "An", "error", "occur", "while", "invoking", "the", "map", "callback", "in", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Stack", "trace", "PHP", "NUMBER", "main", "usr", "local", "bin", "deployer", "NUMBER", "phar", "NUMBER", "PHP", "NUMBER", "require", "usr", "local", "bin", "deployer", "NUMBER", "phar", "NUMBER", "PHP", "NUMBER", "require", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "PHP", "NUMBER", "task", "home", "krebs", "Workspace", "api", "wrapper", "deploy", "NUMBER", "php", "NUMBER", "PHP", "NUMBER", "array_map", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "PHP", "Fatal", "error", "Uncaught", "exception", "RuntimeException", "with", "message", "Object", "build", "package", "do", "not", "exist", "in", "ScenarioCollection", "NUMBER", "in", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "Collection", "Collection", "NUMBER", "php", "NUMBER", "Stack", "trace", "NUMBER", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "Task", "Scenario", "ScenarioCollection", "NUMBER", "php", "NUMBER", "Deployer", "Collection", "Collection", "get", "build", "package", "NUMBER", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Scenario", "ScenarioCollection", "get", "build", "package", "NUMBER", "internal", "function", "closure", "build", "package", "NUMBER", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "array_map", "Object", "Closure", "Array", "NUMBER", "home", "krebs", "Workspace", "api", "wrapper", "deploy", "NUMBER", "php", "NUMBER", "task", "deploy", "Array", "NUMBER", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "require", "home", "krebs", "Wor", "NUMBER", "NUMBER", "usr", "local", "bin", "deployer", "NUMBER", "phar", "NUMBER", "require", "phar", "usr", "loc", "NUMBER", "NUMBER", "main", "throw", "in", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "Collection", "Collection", "NUMBER", "php", "on", "line", "NUMBER", "The", "order", "should", "be", "irrelevant", "for", "the", "definition", "NUMBER", "Version", "NUMBER", "beta", "NUMBER", "php", "run", "mkdir", "p", "NUMBER", "last", "current", "new", "This", "be", "valid", "bash", "syntax", "and", "should", "create", "the", "three", "folders", "at", "once", "but", "it", "ends", "up", "in", "an", "exception", "NUMBER", "bash", "RuntimeException", "Environment", "parameter", "last", "current", "new", "do", "not", "exists", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Environment", "get", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "Server", "Environment", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Environment", "parse", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "home", "krebs", "Workspace", "api", "wrapper", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "Task", "Task", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Task", "run", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "Executor", "SeriesExecutor", "NUMBER", "php", "NUMBER", "Deployer", "Executor", "SeriesExecutor", "run", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "Console", "TaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "TaskCommand", "execute", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "deployer", "NUMBER", "phar", "bin", "dep", "NUMBER", "Vote", "NUMBER", "for", "php", "run", "cd", "deploy_path", "release", "NUMBER", "Because", "it", "like", "PHP", "template", "syntax", "Seems", "reasonable", "NUMBER", "Thats", "the", "Jinja", "NUMBER", "syntax", "which", "be", "taken", "over", "by", "several", "systems", "like", "twig", "and", "be", "pretty", "widespread", "for", "example", "see", "Ansible", "LINK", "_module", "NUMBER", "html", "NUMBER", "While", "you", "be", "at", "it", "It", "should", "allow", "whitespaces", "too", "smile", "foo", "NUMBER", "Maybe", "you", "can", "find", "a", "ready", "to", "use", "parser", "If", "I", "be", "not", "mistaken", "it", "be", "possible", "to", "have", "phpseclib", "output", "what", "be", "currently", "outputted", "when", "exec", "be", "call", "with", "a", "callback", "NUMBER", "This", "would", "allow", "us", "to", "follow", "the", "progression", "of", "a", "long", "run", "command", "which", "can", "let", "us", "know", "if", "there", "s", "a", "problem", "or", "if", "everything", "be", "work", "correctly", "NUMBER", "elfet", "No", "I", "ve", "never", "use", "phpseclib", "NUMBER", "But", "this", "page", "LINK", "callback", "from", "their", "documentation", "seems", "to", "show", "a", "simple", "example", "of", "how", "to", "do", "it", "NUMBER", "My", "guess", "be", "that", "there", "s", "more", "work", "than", "that", "to", "get", "it", "to", "work", "properly", "NUMBER", "I", "do", "not", "see", "myself", "work", "on", "this", "anytime", "soon", "so", "no", "NUMBER", "This", "be", "do", "to", "support", "applications", "which", "return", "a", "non", "zero", "exit", "status", "but", "do", "not", "output", "error", "message", "to", "stderr", "NUMBER", "Grunt", "LINK", "for", "example", "NUMBER", "It", "be", "not", "rare", "for", "developers", "to", "write", "to", "stdout", "instead", "of", "stderr", "and", "return", "a", "non", "zero", "exit", "status", "NUMBER", "I", "d", "say", "better", "always", "display", "both", "stdout", "and", "stderr", "when", "throw", "the", "RuntimeException", "NUMBER", "NUMBER", "elfet", "In", "regards", "to", "what", "specifically", "Version", "NUMBER", "support", "stage", "environments", "for", "deployment", "NUMBER", "The", "branch", "to", "use", "be", "set", "with", "environment", "parameter", "eg", "env", "branch", "master", "How", "do", "I", "set", "this", "to", "a", "specific", "stage", "environment", "Just", "put", "it", "to", "the", "stage", "definition", "like", "this", "server", "production", "myserver", "env", "deploy_path", "var", "www", "myweb", "user", "mydeployuser", "env", "branch", "master", "pubKey", "Seems", "to", "work", "perfectly", "Sorry", "for", "add", "another", "issue", "here", "As", "capistrano", "as", "this", "be", "a", "very", "common", "pratice", "to", "copy", "file", "between", "two", "deployments", "NUMBER", "A", "common", "use", "case", "be", "with", "composer", "and", "the", "vendor", "dir", "it", "can", "be", "simply", "copied", "to", "gain", "time", "NUMBER", "This", "can", "t", "be", "do", "if", "dependencies", "have", "change", "NUMBER", "You", "d", "either", "have", "to", "monitor", "composer", "NUMBER", "json", "lock", "between", "deployment", "and", "decide", "whether", "or", "not", "it", "has", "change", "needs", "to", "run", "composer", "install", "or", "blindly", "assume", "dependencies", "won", "t", "_ever_", "change", "don", "t", "do", "that", "NUMBER", "Furthermore", "what", "kind", "of", "use", "case", "do", "you", "have", "that", "makes", "composer", "takes", "_minutes_", "to", "install", "Are", "you", "use", "composer", "update", "by", "any", "chances", "Composer", "uses", "a", "cache", "mechanism", "which", "will", "make", "reinstalling", "the", "same", "libraries", "dependencies", "extremely", "fast", "since", "it", "will", "be", "similar", "to", "a", "folder", "copy", "so", "I", "don", "t", "see", "the", "point", "of", "that", "use", "case", "NUMBER", "Let", "me", "know", "if", "I", "m", "miss", "something", "NUMBER", "tomzx", "if", "you", "copy", "the", "entire", "directory", "composer", "check", "the", "state", "of", "dependancies", "NUMBER", "The", "composer", "install", "command", "be", "always", "executed", "to", "ensure", "that", "a", "change", "be", "taken", "in", "charge", "NUMBER", "Try", "this", "work", "Take", "a", "directory", "make", "a", "composer", "install", "in", "other", "part", "make", "a", "composer", "update", "which", "create", "change", "and", "copy", "the", "lock", "file", "in", "the", "first", "folder", "NUMBER", "The", "composer", "install", "update", "the", "dependencies", "naturally", "i", "think", "with", "checking", "composer", "NUMBER", "json", "of", "each", "dependencies", "NUMBER", "For", "times", "rm", "rf", "vendor", "time", "composer", "install", "real", "NUMBER", "m", "NUMBER", "s", "with", "only", "one", "dev", "dependancy", "and", "the", "case", "be", "the", "same", "with", "bower", "real", "NUMBER", "m", "NUMBER", "s", "so", "NUMBER", "s", "gain", "on", "just", "two", "directories", "and", "the", "use", "case", "could", "be", "make", "by", "another", "local", "ip", "databases", "or", "many", "other", "personnal", "stuff", "NUMBER", "i", "had", "retry", "the", "test", "after", "you", "affraid", "me", "and", "it", "s", "sure", "if", "the", "composer", "NUMBER", "lock", "change", "all", "dependencies", "be", "update", "NUMBER", "And", "to", "be", "honnestly", "it", "s", "a", "normal", "thing", "or", "composer", "wouldn", "t", "be", "a", "good", "package", "manager", "i", "don", "t", "know", "why", "i", "don", "t", "trust", "me", "in", "this", "case", "NUMBER", "the", "log", "composer", "install", "Loading", "composer", "repositories", "with", "package", "information", "Installing", "dependencies", "including", "require", "dev", "from", "lock", "file", "Removing", "doctrine", "doctrine", "bundle", "v", "NUMBER", "Installing", "doctrine", "doctrine", "bundle", "v", "NUMBER", "Downloading", "NUMBER", "Removing", "michelf", "php", "markdown", "NUMBER", "Installing", "michelf", "php", "markdown", "NUMBER", "Downloading", "NUMBER", "Removing", "sensio", "distribution", "bundle", "v", "NUMBER", "Installing", "sensio", "distribution", "bundle", "v", "NUMBER", "Downloading", "NUMBER", "Generating", "autoload", "file", "Updating", "the", "app", "config", "parameters", "NUMBER", "yml", "file", "Clearing", "the", "cache", "for", "the", "dev", "environment", "with", "debug", "true", "nicodmf", "I", "think", "you", "should", "use", "symbolic", "link", "shared_dirs", "and", "shared_files", "for", "release", "NUMBER", "php", "set", "shared_dirs", "app", "log", "app", "cache", "vendor", "web", "upload", "set", "shared_files", "app", "config", "parameters", "NUMBER", "yml", "composer", "NUMBER", "lock", "In", "the", "first", "deploy", "composer", "install", "all", "vendors", "will", "install", "to", "shared", "vendor", "folder", "and", "make", "content", "for", "composer", "NUMBER", "lock", "file", "NUMBER", "In", "next", "time", "deploy", "composer", "install", "will", "read", "shared", "composer", "NUMBER", "lock", "file", "and", "find", "install", "vendors", "in", "shared", "vendor", "NUMBER", "If", "vendors", "haven", "t", "any", "update", "it", "will", "not", "change", "and", "generating", "autoload", "file", "NUMBER", "I", "think", "current", "spec", "of", "deployment", "symfony", "project", "be", "ok", "NUMBER", "oanhnn", "If", "you", "make", "that", "you", "cannot", "have", "roolback", "In", "fact", "this", "technic", "be", "in", "capistrano", "and", "i", "think", "deployer", "has", "the", "same", "background", "NUMBER", "For", "symfony", "projects", "we", "be", "far", "to", "have", "all", "capifony", "features", "NUMBER", "But", "as", "capistrano", "NUMBER", "be", "ended", "that", "deployer", "be", "in", "php", "i", "think", "this", "project", "be", "a", "good", "place", "to", "give", "features", "presents", "in", "capifony", "NUMBER", "Afaik", "in", "capistrano", "NUMBER", "this", "task", "be", "actually", "a", "recipe", "and", "it", "be", "pretty", "simple", "failsafe", "stupid", "NUMBER", "wink", "NUMBER", "Indeed", "it", "simply", "copy", "file", "and", "folders", "from", "the", "current", "release", "to", "the", "release", "candidate", "NUMBER", "I", "think", "that", "s", "the", "best", "approach", "because", "it", "leaves", "the", "both", "release", "entirely", "independent", "NUMBER", "And", "as", "a", "recipe", "it", "be", "optional", "anyway", "NUMBER", "Like", "nicodmf", "mention", "Symlinks", "in", "this", "case", "be", "just", "wrong", "NUMBER", "Thats", "not", "what", "one", "want", "here", "NUMBER", "It", "would", "make", "more", "sense", "if", "that", "was", "set", "in", "the", "config", "and", "not", "at", "deploy", "time", "NUMBER", "Agree", "with", "tomzx", "I", "be", "just", "starting", "to", "use", "deployer", "and", "I", "think", "that", "copying", "the", "whole", "directory", "of", "the", "release", "and", "then", "performing", "a", "git", "pull", "be", "certainly", "better", "the", "doing", "every", "time", "a", "git", "clone", "NUMBER", "This", "will", "surely", "save", "time", "also", "with", "composer", "since", "it", "will", "have", "only", "to", "download", "the", "new", "dependencies", "specified", "in", "the", "composer", "NUMBER", "lock", "file", "and", "not", "all", "of", "them", "NUMBER", "Another", "option", "could", "be", "renaming", "the", "oldest", "release", "directory", "which", "would", "anyway", "be", "delete", "during", "the", "cleanup", "and", "start", "from", "there", "NUMBER", "In", "such", "a", "way", "we", "would", "save", "even", "the", "time", "of", "copying", "the", "whole", "release", "NUMBER", "In", "both", "cases", "I", "think", "that", "this", "should", "not", "be", "specified", "at", "deploy", "time", "but", "in", "configuration", "having", "various", "options", "to", "choose", "from", "NUMBER", "This", "can", "be", "acomplished", "use", "rsync", "recipe", "NUMBER", "there", "s", "task", "rsync", "warmup", "which", "do", "exactly", "what", "You", "need", "copies", "last", "release", "to", "new", "one", "NUMBER", "You", "don", "t", "have", "to", "rsync", "anything", "up", "there", "but", "simply", "after", "rsync", "warmup", "do", "git", "pull", "instead", "of", "git", "clone", "NUMBER", "In", "NUMBER", "x", "I", "add", "a", "feature", "for", "copy", "vendors", "based", "on", "the", "value", "of", "the", "parameter", "composer_copy_vendors", "NUMBER", "I", "just", "notice", "that", "it", "was", "miss", "in", "NUMBER", "x", "a", "few", "hours", "ago", "and", "start", "reimplementing", "it", "before", "I", "find", "this", "issue", "NUMBER", "The", "last", "NUMBER", "x", "release", "to", "have", "one", "was", "NUMBER", "It", "s", "not", "really", "clear", "which", "version", "of", "deployer", "NUMBER", "phar", "be", "linked", "from", "the", "deployer", "NUMBER", "org", "website", "NUMBER", "It", "would", "be", "good", "if", "each", "release", "had", "one", "so", "we", "could", "grab", "it", "from", "github", "NUMBER", "Also", "perhaps", "have", "two", "links", "on", "the", "website", "NUMBER", "One", "to", "latest", "NUMBER", "x", "and", "one", "to", "latest", "NUMBER", "x", "The", "Stable", "Link", "be", "not", "work", "np", "btw", "nice", "tool", "NUMBER", "The", "last", "NUMBER", "x", "release", "to", "have", "one", "was", "NUMBER", "Currently", "the", "phar", "file", "be", "NUMBER", "version", "I", "ve", "notice", "that", "all", "my", "deployments", "now", "fail", "because", "of", "composer", "NUMBER", "But", "composer", "be", "work", "fine", "however", "deployer", "seem", "to", "be", "fail", "NUMBER", "The", "problem", "appears", "to", "be", "because", "of", "this", "change", "in", "composer", "LINK", "It", "s", "now", "outputting", "a", "LOT", "of", "message", "on", "to", "stderr", "even", "when", "things", "work", "fine", "NUMBER", "I", "m", "be", "caught", "out", "by", "Loading", "composer", "repositories", "with", "package", "information", "NUMBER", "This", "has", "stopped", "me", "be", "able", "to", "deploy", "NUMBER", "The", "only", "work", "around", "I", "can", "see", "at", "the", "moment", "be", "to", "find", "an", "older", "composer", "NUMBER", "phar", "and", "put", "it", "in", "my", "repo", "so", "deployer", "doesn", "t", "download", "it", "NUMBER", "I", "m", "raising", "this", "with", "the", "composer", "project", "and", "it", "seems", "mad", "to", "throw", "every", "message", "out", "as", "an", "error", "NUMBER", "Issue", "on", "composer", "project", "LINK", "This", "be", "where", "the", "change", "be", "discussed", "LINK", "You", "can", "build", "new", "deployer", "NUMBER", "phar", "from", "NUMBER", "x", "branch", "NUMBER", "And", "run", "it", "without", "ssh", "NUMBER", "php", "extension", "NUMBER", "For", "me", "works", "fine", "as", "hot", "solution", "NUMBER", "Weird", "I", "tried", "it", "with", "the", "latest", "code", "earlier", "and", "still", "get", "an", "issue", "NUMBER", "But", "just", "build", "again", "and", "it", "works", "NUMBER", "Maybe", "a", "problem", "between", "keyboard", "and", "chair", "this", "end", "NUMBER", "elfet", "With", "the", "latest", "change", "I", "ve", "created", "an", "global", "variable", "call", "release_identifier", "which", "be", "more", "generic", "than", "before", "and", "allows", "users", "to", "redefine", "how", "they", "want", "their", "release", "identifier", "to", "work", "so", "they", "could", "use", "the", "old", "numbering", "system", "if", "they", "prefer", "it", "NUMBER", "Or", "the", "VCSs", "revision", "hash", "NUMBER", "Just", "saying", "smile", "But", "that", "would", "need", "a", "custom", "cleanup", "strategy", "as", "well", "NUMBER", "maybe", "ignore", "my", "hash", "suggestion", "but", "maybe", "somebody", "should", "mention", "this", "somewhere", "release", "identifiers", "must", "be", "fully", "ordered", "or", "something", "If", "I", "m", "not", "mistaken", "the", "way", "Capistrano", "do", "it", "be", "to", "append", "the", "release", "identifier", "at", "the", "end", "of", "a", "file", "containing", "the", "list", "of", "release", "when", "a", "release", "be", "successfully", "publish", "NUMBER", "Whatever", "the", "identifier", "be", "it", "ll", "be", "possible", "to", "figure", "out", "which", "release", "came", "before", "after", "which", "one", "based", "on", "the", "ordering", "in", "the", "file", "NUMBER", "It", "shouldn", "t", "be", "too", "hard", "to", "implement", "this", "feature", "if", "enough", "people", "want", "it", "NUMBER", "Just", "tried", "it", "myself", "Capistrano", "NUMBER", "keep", "a", "log", "of", "revision", "it", "deployed", "but", "that", "seems", "to", "be", "just", "a", "log", "NUMBER", "bash", "cat", "revisions", "NUMBER", "log", "Branch", "master", "at", "bdd", "NUMBER", "b", "deployed", "as", "release", "NUMBER", "by", "sebastian", "It", "still", "creates", "the", "actual", "deployments", "into", "folders", "based", "on", "the", "timestamp", "and", "delete", "them", "in", "order", "NUMBER", "However", "that", "doesn", "t", "me", "deployer", "can", "t", "do", "it", "differently", "smile", "Will", "be", "implement", "in", "Deployer", "v", "NUMBER", "At", "page", "LINK", "i", "can", "see", "information", "This", "function", "gets", "NUMBER", "parameters", "server", "server_name", "host", "port", "and", "return", "a", "Deployer", "Server", "Configuration", "object", "which", "contains", "the", "server", "configuration", "NUMBER", "But", "really", "function", "server", "now", "return", "Deployer", "Server", "Builder", "instance", "NUMBER", "Is", "it", "right", "Before", "i", "use", "v", "NUMBER", "I", "ve", "update", "deployer", "with", "self", "update", "command", "NUMBER", "When", "I", "did", "this", "deployer", "has", "downloaded", "NUMBER", "version", "NUMBER", "However", "this", "version", "NUMBER", "was", "NUMBER", "really", "NUMBER", "That", "s", "why", "old", "recepies", "weren", "t", "work", "NUMBER", "I", "ve", "build", "new", "deployer", "NUMBER", "phar", "from", "NUMBER", "x", "branch", "NUMBER", "Problem", "not", "resolve", "if", "extension", "ssh", "NUMBER", "enable", "LINK", "I", "ve", "tried", "run", "deployment", "process", "today", "and", "get", "empty", "RuntimeException", "on", "Installing", "vendors", "task", "NUMBER", "Installing", "vendors", "Run", "task", "deploy", "vendors", "on", "server", "main", "NUMBER", "NUMBER", "NUMBER", "cd", "var", "www", "release", "NUMBER", "if", "e", "var", "www", "release", "NUMBER", "composer", "NUMBER", "phar", "then", "echo", "true", "fi", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "cd", "var", "www", "release", "NUMBER", "curl", "s", "LINK", "php", "NUMBER", "NUMBER", "NUMBER", "usr", "bin", "env", "php", "NUMBER", "NUMBER", "NUMBER", "All", "settings", "correct", "for", "use", "Composer", "NUMBER", "NUMBER", "NUMBER", "Downloading", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Composer", "successfully", "install", "to", "var", "www", "release", "NUMBER", "composer", "NUMBER", "phar", "NUMBER", "NUMBER", "NUMBER", "Use", "it", "php", "composer", "NUMBER", "phar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "cd", "var", "www", "release", "NUMBER", "php", "composer", "NUMBER", "phar", "install", "no", "dev", "verbose", "prefer", "dist", "optimize", "autoloader", "no", "progress", "Run", "task", "deploy", "rollback", "on", "server", "main", "Rolling", "back", "to", "previous", "release", "on", "server", "main", "NUMBER", "NUMBER", "NUMBER", "cd", "var", "www", "rm", "rf", "var", "www", "release", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "RuntimeException", "Loading", "composer", "repositories", "with", "package", "information", "Installing", "dependencies", "from", "lock", "file", "Installing", "react", "promise", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "guzzlehttp", "streams", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "guzzlehttp", "ringphp", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Installing", "guzzlehttp", "guzzle", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "NUMBER", "Installing", "symfony", "console", "v", "NUMBER", "Loading", "from", "cache", "Extracting", "archive", "Generating", "optimized", "autoload", "file", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "vendor", "herzult", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Ssh", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Ssh", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "var", "www", "cs", "cp", "deploy", "vendor", "boomers", "deployer", "recipes", "src", "default", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Runner", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "runSeries", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "But", "this", "command", "php", "composer", "NUMBER", "phar", "install", "no", "dev", "verbose", "prefer", "dist", "optimize", "autoloader", "no", "progress", "works", "fine", "without", "deployer", "NUMBER", "Deployer", "version", "NUMBER", "Same", "problem", "here", "NUMBER", "Thanks", "NUMBER", "I", "ve", "update", "deployer", "to", "NUMBER", "and", "I", "experience", "the", "same", "problem", "NUMBER", "The", "NUMBER", "phar", "elfet", "proved", "be", "a", "NUMBER", "What", "to", "do", "now", "How", "be", "it", "fix", "We", "install", "deployer", "NUMBER", "use", "composer", "and", "we", "be", "still", "get", "the", "same", "error", "NUMBER", "Unfortunately", "not", "we", "re", "get", "still", "the", "same", "error", "NUMBER", "elfet", "I", "see", "that", "the", "fix", "be", "do", "inside", "the", "PhpSecLib", "class", "but", "the", "Ssh", "Exec", "class", "be", "trowing", "the", "exception", "NUMBER", "LINK", "ssh", "blob", "master", "src", "Ssh", "Exec", "NUMBER", "php", "L", "NUMBER", "If", "I", "set", "set", "use_ssh", "NUMBER", "false", "then", "it", "works", "so", "it", "s", "fix", "for", "the", "PhpSecLib", "server", "type", "and", "not", "the", "SSH", "NUMBER", "server", "type", "Done", "Composer", "now", "outputs", "non", "error", "message", "to", "stderr", "NUMBER", "The", "run", "function", "should", "be", "check", "the", "exit", "status", "of", "the", "command", "not", "the", "error", "output", "NUMBER", "Yep", "it", "was", "annoying", "but", "some", "applications", "use", "std", "error", "even", "though", "its", "not", "an", "error", "NUMBER", "Checking", "the", "exit", "status", "be", "a", "more", "reliable", "way", "to", "tell", "if", "the", "command", "was", "successful", "NUMBER", "NUMBER", "means", "Ok", "any", "other", "number", "means", "there", "was", "an", "error", "At", "the", "moment", "if", "you", "be", "in", "vvv", "mode", "debug", "you", "get", "a", "RuntimeException", "if", "there", "s", "an", "issue", "while", "run", "deployer", "NUMBER", "However", "I", "think", "it", "would", "be", "very", "useful", "to", "be", "able", "to", "inspect", "the", "complete", "output", "log", "of", "the", "comment", "if", "necessary", "NUMBER", "Here", "s", "an", "example", "of", "what", "be", "currently", "outputted", "NUMBER", "RuntimeException", "npm", "WARN", "package", "NUMBER", "json", "stripped", "NUMBER", "No", "repository", "field", "NUMBER", "npm", "WARN", "excluding", "symbolic", "link", "build", "defs", "config", "NUMBER", "json", "NUMBER", "defs", "config", "NUMBER", "j", "son", "sh", "NUMBER", "gm", "not", "find", "sh", "NUMBER", "convert", "not", "find", "npm", "WARN", "optional", "dep", "fail", "continuing", "gmsmith", "NUMBER", "sh", "NUMBER", "phantomjs", "not", "find", "npm", "WARN", "optional", "dep", "fail", "continuing", "phantomjssmith", "NUMBER", "npm", "WARN", "engine", "pngjs", "NUMBER", "wanted", "node", "NUMBER", "x", "current", "node", "NUMBER", "NUMBER", "npm", "NUMBER", "NUMBER", "util", "has_cairo_freetype", "NUMBER", "sh", "line", "NUMBER", "pkg", "config", "command", "not", "find", "gyp", "Call", "to", "NUMBER", "util", "has_cairo_freetype", "NUMBER", "sh", "returned", "exit", "status", "NUMBER", "while", "t", "rying", "to", "load", "binding", "NUMBER", "gyp", "gyp", "ERR", "configure", "error", "gyp", "ERR", "stack", "Error", "gyp", "fail", "with", "exit", "code", "NUMBER", "gyp", "ERR", "stack", "at", "ChildProcess", "NUMBER", "onCpExit", "usr", "lib", "node_modules", "npm", "node", "_modules", "node", "gyp", "lib", "configure", "NUMBER", "js", "NUMBER", "NUMBER", "gyp", "ERR", "stack", "at", "ChildProcess", "NUMBER", "emit", "events", "NUMBER", "js", "NUMBER", "NUMBER", "gyp", "ERR", "stack", "at", "Process", "NUMBER", "ChildProcess", "NUMBER", "_handle", "NUMBER", "onexit", "child_process", "NUMBER", "js", "NUMBER", "NUMBER", "gyp", "ERR", "System", "Linux", "NUMBER", "NUMBER", "generic", "gyp", "ERR", "command", "node", "usr", "lib", "node_modules", "npm", "node_modules", "node", "gyp", "bi", "n", "node", "gyp", "NUMBER", "js", "rebuild", "gyp", "ERR", "cwd", "var", "www", "test", "target", "release", "NUMBER", "node_modules", "grun", "t", "spritesmith", "node_modules", "spritesmith", "node_modules", "canvassmith", "node_module", "s", "canvas", "gyp", "ERR", "node", "v", "v", "NUMBER", "gyp", "ERR", "node", "gyp", "v", "v", "NUMBER", "gyp", "ERR", "not", "ok", "npm", "WARN", "optional", "dep", "fail", "continuing", "canvassmith", "NUMBER", "I", "suggest", "that", "by", "default", "a", "deployer", "server_name", "NUMBER", "log", "file", "be", "created", "in", "the", "folder", "where", "execution", "happened", "and", "which", "contains", "either", "the", "full", "log", "of", "all", "the", "commands", "up", "to", "this", "point", "or", "only", "of", "the", "command", "that", "fail", "NUMBER", "If", "cd", "was", "given", "release_path", "as", "target", "path", "it", "would", "attempt", "to", "run", "a", "command", "to", "figure", "out", "what", "the", "value", "of", "release_path", "be", "which", "in", "the", "process", "would", "also", "want", "to", "know", "the", "value", "of", "release_path", "and", "so", "on", "NUMBER", "The", "fix", "simply", "parses", "the", "value", "as", "it", "be", "given", "thus", "make", "the", "result", "static", "instead", "of", "a", "closure", "NUMBER", "If", "the", "shared", "paths", "do", "not", "exist", "in", "the", "release_path", "directory", "and", "those", "shared", "directories", "have", "a", "depth", "NUMBER", "the", "directory", "structure", "must", "be", "created", "before", "symlinking", "can", "be", "do", "NUMBER", "Hi", "I", "m", "currently", "use", "Deployer", "for", "deploying", "WordPress", "Bedrock", "instances", "NUMBER", "The", "common", "recipe", "fail", "on", "some", "settings", "but", "it", "be", "close", "Would", "it", "be", "ok", "to", "add", "a", "bedrock", "NUMBER", "php", "recipe", "to", "the", "repo", "dev", "master", "for", "merge", "I", "m", "not", "sure", "because", "Roots", "Bedrock", "be", "a", "very", "specific", "environment", "NUMBER", "It", "s", "all", "ok", "for", "me", "but", "I", "m", "sure", "it", "will", "create", "a", "lot", "of", "problem", "for", "other", "WordPress", "users", "No", "need", "for", "a", "Bedrock", "recipe", "The", "newly", "update", "common", "NUMBER", "php", "do", "exactly", "all", "things", "right", "NUMBER", "Thanks", "I", "will", "write", "a", "blog", "post", "to", "all", "this", "for", "us", "Bedrock", "developers", "Still", "get", "these", "error", "when", "composer", "update", "the", "dev", "master", "NUMBER", "fetched", "today", "NUMBER", "bash", "InvalidArgumentException", "Package", "be", "not", "install", "ext", "ssh", "NUMBER", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "src", "Composer", "Installer", "LibraryInstaller", "NUMBER", "php", "NUMBER", "Composer", "Installer", "LibraryInstaller", "uninstall", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "src", "Composer", "Installer", "InstallationManager", "NUMBER", "php", "NUMBER", "Composer", "Installer", "InstallationManager", "uninstall", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "src", "Composer", "Installer", "InstallationManager", "NUMBER", "php", "NUMBER", "Composer", "Installer", "InstallationManager", "execute", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "src", "Composer", "Installer", "NUMBER", "php", "NUMBER", "Composer", "Installer", "doInstall", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "src", "Composer", "Installer", "NUMBER", "php", "NUMBER", "Composer", "Installer", "run", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "src", "Composer", "Command", "UpdateCommand", "NUMBER", "php", "NUMBER", "Composer", "Command", "UpdateCommand", "execute", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "src", "Composer", "Console", "Application", "NUMBER", "php", "NUMBER", "Composer", "Console", "Application", "doRun", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "src", "Composer", "Console", "Application", "NUMBER", "php", "NUMBER", "Composer", "Console", "Application", "run", "at", "phar", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "bin", "composer", "NUMBER", "require", "at", "usr", "local", "Cellar", "composer", "NUMBER", "alpha", "NUMBER", "libexec", "composer", "NUMBER", "phar", "NUMBER", "composer", "update", "I", "always", "do", "as", "I", "use", "the", "Composer", "frequently", "Nope", "the", "same", "result", "NUMBER", "The", "binding", "to", "ext", "ssh", "NUMBER", "fail", "NUMBER", "The", "php", "NUMBER", "ssh", "NUMBER", "be", "install", "in", "my", "OSX", "NUMBER", "But", "what", "be", "ext", "ssh", "NUMBER", "But", "wait", "I", "have", "already", "do", "a", "full", "pull", "from", "the", "git", "NUMBER", "composer", "NUMBER", "json", "be", "the", "exact", "same", "as", "dev", "master", "json", "name", "deployer", "deployer", "description", "Deployment", "Tool", "license", "MIT", "authors", "name", "Anton", "Medvedev", "email", "anton", "elfet", "NUMBER", "ru", "autoload", "psr", "NUMBER", "Deployer", "src", "bin", "bin", "dep", "require", "php", "NUMBER", "elfet", "pure", "NUMBER", "symfony", "finder", "NUMBER", "symfony", "console", "NUMBER", "symfony", "process", "NUMBER", "kherge", "amend", "NUMBER", "herrera", "io", "version", "NUMBER", "phpseclib", "phpseclib", "dev", "master", "require", "dev", "phpunit", "phpunit", "NUMBER", "suggest", "herzult", "php", "ssh", "For", "SSH", "support", "through", "native", "SSH", "NUMBER", "extension", "ext", "sockets", "For", "parallel", "deployment", "provide", "ext", "ssh", "NUMBER", "If", "I", "move", "herzult", "php", "ssh", "to", "require", "dev", "then", "it", "all", "be", "ok", "NUMBER", "json", "name", "deployer", "deployer", "description", "Deployment", "Tool", "license", "MIT", "authors", "name", "Anton", "Medvedev", "email", "anton", "elfet", "NUMBER", "ru", "autoload", "psr", "NUMBER", "Deployer", "src", "bin", "bin", "dep", "require", "php", "NUMBER", "elfet", "pure", "NUMBER", "symfony", "finder", "NUMBER", "symfony", "console", "NUMBER", "symfony", "process", "NUMBER", "kherge", "amend", "NUMBER", "herrera", "io", "version", "NUMBER", "phpseclib", "phpseclib", "dev", "master", "require", "dev", "phpunit", "phpunit", "NUMBER", "herzult", "php", "ssh", "NUMBER", "suggest", "ext", "sockets", "For", "parallel", "deployment", "provide", "ext", "ssh", "NUMBER", "Adds", "a", "box", "NUMBER", "json", "file", "that", "should", "replace", "the", "configuration", "use", "in", "the", "build", "file", "NUMBER", "Removes", "the", "old", "build", "file", "since", "it", "be", "replaced", "by", "the", "configuration", "file", "NUMBER", "File", "size", "goes", "from", "NUMBER", "MB", "to", "NUMBER", "KB", "NUMBER", "Reference", "NUMBER", "Nice", "job", "tomzx", "Box", "really", "makes", "it", "simple", "to", "package", "an", "app", "NUMBER", "I", "would", "like", "to", "add", "that", "enabling", "gzip", "compression", "could", "lead", "to", "php", "installations", "without", "gzip", "extension", "enable", "to", "fail", "loading", "the", "phar", "NUMBER", "Also", "Composer", "had", "an", "issue", "LINK", "alpha", "NUMBER", "src", "Composer", "Compiler", "NUMBER", "php", "L", "NUMBER", "with", "this", "before", "NUMBER", "Regarding", "the", "size", "of", "the", "phar", "I", "guess", "we", "developers", "have", "reasonably", "fast", "bandwidth", "to", "transfer", "a", "larger", "file", "thus", "make", "it", "less", "relevant", "NUMBER", "elfet", "Why", "do", "you", "prefer", "your", "own", "build", "script", "to", "use", "a", "library", "that", "be", "use", "test", "by", "many", "What", "would", "make", "you", "change", "your", "mind", "I", "agree", "with", "tomzx", "NUMBER", "Nice", "job", "During", "the", "deployment", "i", "be", "use", "multiple", "tasks", "NUMBER", "All", "tasks", "be", "call", "internal", "during", "the", "deployment", "however", "i", "do", "not", "want", "to", "expose", "all", "tasks", "to", "CLI", "NUMBER", "It", "would", "be", "great", "if", "you", "can", "tag", "tasks", "as", "non", "public", "NUMBER", "Non", "public", "tasks", "should", "not", "be", "callable", "via", "CLI", "directly", "NUMBER", "thumbsup", "Hi", "At", "the", "moment", "we", "be", "still", "use", "Deployer", "NUMBER", "since", "we", "haven", "t", "had", "the", "time", "to", "upgrade", "to", "version", "NUMBER", "Unfortunately", "I", "ve", "notice", "today", "that", "elfet", "php", "ssh", "has", "be", "abandoned", "which", "results", "in", "a", "miss", "dependencies", "when", "update", "composer", "NUMBER", "Currently", "the", "only", "fix", "I", "can", "think", "of", "be", "creating", "our", "own", "checkout", "and", "change", "the", "dependency", "to", "herzult", "NUMBER", "Do", "you", "have", "a", "better", "idea", "for", "this", "Thanks", "in", "advance", "Jeroen", "NUMBER", "LINK", "project", "box", "NUMBER", "We", "could", "benefit", "from", "a", "few", "things", "such", "as", "gzip", "compression", "NUMBER", "It", "would", "also", "convert", "a", "build", "script", "into", "a", "simple", "configuration", "file", "NUMBER", "Closing", "see", "discussion", "NUMBER", "I", "can", "t", "find", "the", "stage", "functionallity", "in", "dev", "master", "v", "NUMBER", "Is", "there", "another", "way", "of", "usage", "Reference", "NUMBER", "I", "don", "t", "think", "Deployer", "falls", "into", "the", "library", "category", "NUMBER", "I", "think", "the", "tool", "category", "be", "more", "appropriate", "NUMBER", "One", "do", "not", "really", "make", "use", "of", "the", "deployer", "sources", "other", "than", "through", "the", "dep", "_binary_", "NUMBER", "I", "wouldn", "t", "pretend", "to", "know", "composer", "in", "depth", "but", "I", "believe", "that", "if", "you", "require", "a", "library", "that", "has", "a", "composer", "NUMBER", "lock", "it", "will", "not", "be", "considered", "during", "the", "dependency", "resolution", "step", "NUMBER", "Thus", "it", "shouldn", "t", "pose", "a", "problem", "to", "have", "one", "under", "version", "control", "NUMBER", "From", "composer", "s", "documentation", "LINK", "libraries", "NUMBER", "md", "lock", "file", "Lock", "file", "For", "your", "library", "you", "may", "commit", "the", "composer", "NUMBER", "lock", "file", "if", "you", "want", "to", "NUMBER", "This", "can", "help", "your", "team", "to", "always", "test", "against", "the", "same", "dependency", "version", "NUMBER", "However", "this", "lock", "file", "will", "not", "have", "any", "effect", "on", "other", "projects", "that", "depend", "on", "it", "NUMBER", "It", "only", "has", "an", "effect", "on", "the", "main", "project", "NUMBER", "If", "you", "do", "not", "want", "to", "commit", "the", "lock", "file", "and", "you", "be", "use", "git", "add", "it", "to", "the", "NUMBER", "gitignore", "NUMBER", "Hi", "I", "don", "t", "think", "it", "be", "a", "good", "idea", "to", "include", "vendors", "like", "it", "was", "do", "in", "f", "NUMBER", "b", "NUMBER", "a", "NUMBER", "b", "NUMBER", "fac", "NUMBER", "d", "NUMBER", "f", "NUMBER", "dd", "NUMBER", "f", "NUMBER", "eadf", "NUMBER", "c", "NUMBER", "e", "NUMBER", "c", "NUMBER", "I", "d", "suggest", "we", "revert", "this", "change", "and", "go", "back", "to", "how", "it", "was", "do", "before", "NUMBER", "Here", "be", "the", "reason", "why", "I", "think", "this", "deployer", "be", "not", "supposed", "to", "be", "include", "in", "a", "project", "use", "it", "as", "a", "composer", "dependency", "NUMBER", "Much", "like", "composer", "it", "should", "be", "distributed", "as", "a", "phar", "NUMBER", "This", "way", "users", "do", "not", "care", "about", "the", "minimum", "stability", "as", "the", "phar", "encapsulates", "all", "the", "requirements", "NUMBER", "Including", "future", "change", "will", "be", "a", "pain", "because", "it", "means", "we", "have", "to", "support", "integrate", "these", "change", "manually", "instead", "of", "simply", "build", "a", "phar", "with", "their", "latest", "revision", "NUMBER", "This", "brings", "me", "to", "the", "point", "that", "deployer", "should", "put", "its", "composer", "NUMBER", "lock", "file", "under", "revision", "NUMBER", "Finally", "going", "this", "route", "gives", "us", "a", "lot", "more", "flexibility", "NUMBER", "We", "can", "decide", "to", "switch", "library", "without", "having", "to", "care", "if", "it", "ll", "impact", "our", "users", "NUMBER", "Let", "me", "know", "what", "you", "think", "NUMBER", "I", "think", "we", "should", "look", "into", "what", "be", "suggested", "by", "Matthias", "Noback", "LINK", "and", "symfony", "NUMBER", "matthiasnoback", "NUMBER", "nl", "NUMBER", "NUMBER", "theres", "no", "such", "thing", "as", "an", "optional", "dependency", "NUMBER", "Basically", "have", "phpseclib", "as", "the", "main", "ssh", "handler", "and", "herzult", "php", "ssh", "as", "a", "suggested", "dependency", "NUMBER", "require", "phpseclib", "phpseclib", "dev", "master", "suggest", "herzult", "php", "ssh", "SSH", "support", "through", "ext", "ssh", "NUMBER", "As", "for", "phpseclib", "stability", "I", "believe", "you", "can", "replace", "the", "dev", "master", "dev", "to", "dev", "master", "and", "it", "ll", "be", "considered", "stable", "so", "no", "need", "to", "require", "it", "in", "the", "including", "composer", "NUMBER", "json", "NUMBER", "We", "should", "also", "try", "to", "encourage", "phpseclib", "to", "release", "a", "stable", "NUMBER", "x", "release", "so", "that", "we", "may", "depend", "on", "that", "instead", "of", "dev", "master", "NUMBER", "Reference", "phpseclib", "phpseclib", "NUMBER", "What", "do", "you", "mean", "by", "not", "so", "smooth", "NUMBER", "Awesome", "NUMBER", "But", "why", "not", "move", "the", "herzult", "php", "ssh", "to", "require", "dev", "Happy", "me", "Thanks", "Regarding", "issue", "with", "timeout", "run", "local", "tasks", "that", "requires", "long", "execution", "NUMBER", "This", "be", "a", "fix", "that", "allows", "the", "command", "to", "be", "attached", "with", "a", "timeout", "parameter", "optionally", "NUMBER", "fix", "spaces", "Sorry", "I", "m", "new", "to", "pull", "request", "NUMBER", "thanks", "Regarding", "setting", "the", "php", "timeout", "max_execution_time", "set_time_limit", "etc", "the", "Deployer", "gives", "me", "a", "timeout", "when", "transfering", "large", "file", "between", "remote", "and", "local", "NUMBER", "Symfony", "Component", "Process", "Exception", "ProcessTimedOutException", "The", "process", "NUMBER", "exceeded", "the", "timeout", "of", "NUMBER", "seconds", "NUMBER", "Any", "hint", "to", "increase", "the", "value", "of", "NUMBER", "s", "Making", "a", "pull", "request", "to", "fix", "this", "NUMBER", "What", "be", "a", "backtrace", "This", "issue", "be", "solve", "with", "my", "accepted", "merge", "NUMBER", "Thanks", "the", "same", "error", "Executing", "task", "deploy", "prepare", "Executing", "task", "deploy", "release", "Executing", "task", "deploy", "update_code", "Executing", "task", "deploy", "vendors", "Symfony", "Component", "Process", "Exception", "ProcessTimedOutException", "The", "process", "cd", "srv", "www", "xxxx", "dev", "NUMBER", "xxxxx", "NUMBER", "pl", "release", "NUMBER", "composer", "install", "no", "dev", "verbose", "prefer", "dist", "optimize", "autoloader", "no", "interaction", "exceeded", "the", "timeout", "of", "NUMBER", "seconds", "NUMBER", "You", "can", "add", "a", "timeout", "parameter", "to", "the", "task", "NUMBER", "thx", "NUMBER", "The", "documentation", "claims", "you", "can", "authenticate", "over", "SSH", "with", "a", "_public", "key_", "NUMBER", "It", "be", "impossible", "to", "authenticate", "with", "a", "public", "key", "NUMBER", "A", "private", "key", "be", "needed", "to", "connect", "to", "a", "foreign", "host", "over", "SSH", "NUMBER", "The", "following", "example", "from", "the", "documentation", "makes", "no", "sense", "php", "server", "NUMBER", "pubKey", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "pass", "phrase", "Here", "be", "the", "problem", "The", "method", "name", "implies", "that", "a", "public", "key", "can", "be", "use", "for", "authentication", "NUMBER", "As", "discussed", "this", "be", "impossible", "NUMBER", "The", "second", "parameter", "be", "a", "private", "key", "NUMBER", "That", "be", "you", "re", "passing", "a", "private", "key", "to", "a", "method", "named", "_pubKey_", "NUMBER", "This", "API", "makes", "no", "sense", "NUMBER", "I", "was", "considering", "use", "Deployer", "but", "I", "would", "be", "remiss", "to", "use", "software", "that", "be", "so", "chronically", "confused", "about", "secure", "authentication", "mechanisms", "NUMBER", "Hi", "Bilge", "I", "had", "the", "same", "questioning", "and", "find", "the", "following", "answer", "in", "the", "phpseclib", "documentation", "NUMBER", "Some", "private", "key", "formats", "define", "the", "public", "exponent", "and", "some", "don", "t", "NUMBER", "Those", "that", "don", "t", "define", "it", "be", "problematic", "when", "use", "in", "certain", "contexts", "NUMBER", "For", "example", "in", "SSH", "NUMBER", "RSA", "authentication", "works", "by", "sending", "the", "public", "key", "along", "with", "a", "message", "sign", "by", "the", "private", "key", "to", "the", "server", "NUMBER", "The", "SSH", "NUMBER", "server", "looks", "the", "public", "key", "up", "in", "an", "index", "of", "public", "keys", "and", "if", "it", "s", "present", "then", "proceeds", "to", "verify", "the", "signature", "NUMBER", "Problem", "be", "if", "your", "private", "key", "doesn", "t", "include", "the", "public", "exponent", "this", "won", "t", "work", "unless", "you", "manually", "add", "the", "public", "exponent", "NUMBER", "phpseclib", "try", "to", "guess", "if", "the", "key", "be", "use", "be", "the", "public", "key", "but", "in", "the", "event", "that", "it", "guesses", "incorrectly", "you", "might", "still", "want", "to", "explicitly", "set", "the", "key", "as", "be", "public", "NUMBER", "Note", "that", "it", "be", "a", "public", "private", "key", "authentication", "hence", "the", "name", "NUMBER", "I", "propose", "not", "use", "this", "project", "because", "you", "don", "t", "understand", "what", "you", "re", "doing", "NUMBER", "elfet", "I", "m", "not", "really", "sure", "what", "the", "problem", "be", "can", "I", "help", "somehow", "Okay", "so", "it", "works", "if", "I", "manually", "require", "phpseclib", "phpseclib", "NUMBER", "dev", "first", "so", "if", "you", "change", "the", "deployer", "package", "require", "to", "NUMBER", "dev", "instead", "of", "dev", "master", "dev", "maybe", "it", "ll", "work", "Hardcoding", "a", "dependency", "version", "be", "fine", "in", "my", "opinion", "NUMBER", "You", "can", "always", "change", "it", "if", "you", "need", "to", "update", "My", "issue", "with", "this", "though", "be", "that", "the", "phpseclib", "package", "apparently", "isn", "t", "in", "NUMBER", "x", "stable", "last", "stable", "be", "NUMBER", "and", "you", "re", "requiring", "NUMBER", "x", "dev", "so", "if", "you", "want", "to", "use", "deployer", "you", "need", "to", "specify", "minimum", "stability", "as", "dev", "in", "your", "composer", "file", "NUMBER", "Otherwise", "that", "dependency", "will", "fail", "Yes", "that", "works", "But", "the", "dev", "be", "the", "same", "as", "saying", "I", "want", "the", "dev", "beta", "stuff", "and", "not", "stable", "stuff", "but", "I", "guess", "that", "s", "because", "phpseclib", "has", "no", "stable", "package", "right", "When", "will", "this", "get", "to", "composer", "package", "I", "still", "experience", "the", "same", "error", "in", "NUMBER", "x", "composer", "require", "dev", "deployer", "deployer", "NUMBER", "NUMBER", "composer", "NUMBER", "json", "has", "be", "update", "Loading", "composer", "repositories", "with", "package", "information", "Updating", "dependencies", "including", "require", "dev", "Installing", "elfet", "php", "ssh", "v", "NUMBER", "Downloading", "connection", "NUMBER", "Failed", "to", "download", "elfet", "php", "ssh", "from", "dist", "The", "LINK", "ssh", "zipball", "NUMBER", "becf", "NUMBER", "cbf", "NUMBER", "df", "NUMBER", "a", "NUMBER", "dd", "NUMBER", "c", "NUMBER", "bf", "NUMBER", "file", "could", "not", "be", "downloaded", "HTTP", "NUMBER", "NUMBER", "Not", "Found", "Now", "trying", "to", "download", "from", "source", "Installing", "elfet", "php", "ssh", "v", "NUMBER", "Cloning", "NUMBER", "becf", "NUMBER", "cbf", "NUMBER", "df", "NUMBER", "a", "NUMBER", "dd", "NUMBER", "c", "NUMBER", "bf", "NUMBER", "RuntimeException", "Failed", "to", "clone", "git", "github", "NUMBER", "com", "elfet", "php", "ssh", "NUMBER", "git", "via", "git", "https", "ssh", "protocols", "aborting", "NUMBER", "git", "github", "NUMBER", "com", "elfet", "php", "ssh", "NUMBER", "git", "and", "when", "I", "try", "to", "install", "dev", "or", "NUMBER", "composer", "require", "dev", "deployer", "deployer", "NUMBER", "NUMBER", "NUMBER", "composer", "NUMBER", "json", "has", "be", "update", "Loading", "composer", "repositories", "with", "package", "information", "Updating", "dependencies", "including", "require", "dev", "Your", "requirements", "could", "not", "be", "resolve", "to", "an", "installable", "set", "of", "package", "NUMBER", "Problem", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "NUMBER", "dev", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "NUMBER", "dev", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "NUMBER", "dev", "no", "matching", "package", "find", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "NUMBER", "dev", "no", "matching", "package", "find", "NUMBER", "Installation", "request", "for", "deployer", "deployer", "NUMBER", "NUMBER", "satisfiable", "by", "deployer", "deployer", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "v", "NUMBER", "NUMBER", "Merge", "this", "to", "receive", "a", "badge", "indicating", "the", "number", "of", "issue", "in", "the", "ready", "column", "on", "your", "waffle", "NUMBER", "io", "board", "at", "LINK", "This", "was", "request", "by", "a", "real", "person", "user", "elfet", "on", "waffle", "NUMBER", "io", "we", "re", "not", "trying", "to", "spam", "you", "NUMBER", "Here", "s", "my", "take", "on", "the", "cd", "function", "NUMBER", "I", "ve", "also", "add", "a", "within", "function", "which", "allows", "the", "user", "to", "provide", "a", "callback", "php", "TAG", "workingPath", "run", "readlink", "deploy_path", "release", "cycle", "workingPath", "run", "readlink", "deploy_path", "release", "NUMBER", "Basically", "it", "try", "to", "resolve", "release_path", "by", "trying", "use", "itself", "in", "the", "process", "which", "ends", "up", "generating", "a", "loop", "NUMBER", "One", "possible", "way", "to", "fix", "this", "might", "be", "to", "make", "the", "release_path", "and", "current", "environment", "variables", "strings", "instead", "as", "such", "php", "Return", "release", "path", "NUMBER", "env", "release_path", "deploy_path", "release", "Return", "current", "release", "path", "NUMBER", "env", "current", "deploy_path", "current", "Basically", "any", "variable", "that", "would", "be", "use", "in", "the", "working_path", "be", "a", "closure", "callable", "a", "run", "cycle", "will", "occur", "NUMBER", "Thus", "a", "probably", "better", "fix", "would", "be", "to", "resolve", "directly", "the", "path", "given", "to", "cd", "when", "it", "be", "call", "NUMBER", "This", "way", "the", "working_path", "value", "be", "always", "a", "string", "with", "no", "environment", "variable", "that", "needs", "to", "be", "resolve", "NUMBER", "php", "function", "cd", "path", "env", "working_path", "env", "parse", "path", "At", "the", "moment", "the", "common", "NUMBER", "php", "file", "do", "not", "provide", "a", "way", "to", "clone", "deploy", "a", "specific", "branch", "revision", "it", "will", "clone", "the", "HEAD", "of", "the", "remote", "repository", "NUMBER", "I", "think", "it", "be", "critical", "for", "deployer", "to", "support", "the", "deployment", "of", "specific", "branch", "revision", "for", "it", "to", "be", "successful", "NUMBER", "Here", "be", "the", "requirements", "Support", "cloning", "with", "submodules", "If", "the", "deployment", "method", "be", "cloning", "prefer", "depth", "NUMBER", "already", "support", "Support", "checking", "out", "a", "specific", "branch", "revision", "Capistrano", "s", "take", "on", "this", "be", "to", "have", "a", "deploy_path", "repo", "directory", "where", "they", "clone", "the", "entire", "repository", "NUMBER", "When", "they", "want", "to", "deploy", "they", "only", "have", "to", "fetch", "the", "latest", "change", "from", "the", "repository", "checkout", "the", "appropriate", "branch", "revision", "and", "then", "rsync", "the", "folder", "to", "the", "release_path", "NUMBER", "It", "be", "a", "pretty", "elegant", "solution", "in", "that", "compare", "to", "cloning", "like", "we", "currently", "do", "it", "uses", "the", "fact", "that", "most", "of", "the", "repository", "be", "already", "available", "locally", "NUMBER", "The", "downside", "be", "that", "if", "your", "repository", "be", "big", "you", "ll", "have", "it", "hanging", "around", "in", "your", "deploy_path", "NUMBER", "Since", "clone", "checkout", "be", "already", "a", "task", "deploy", "update_code", "I", "think", "what", "makes", "the", "most", "sense", "would", "be", "to", "have", "this", "configurable", "as", "some", "sort", "of", "strategy", "LINK", "_pattern", "NUMBER", "I", "ll", "think", "a", "little", "bit", "more", "about", "the", "problem", "and", "I", "ll", "see", "if", "I", "can", "provide", "a", "PR", "NUMBER", "Reference", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "fb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "cc", "NUMBER", "b", "NUMBER", "b", "NUMBER", "c", "NUMBER", "I", "ve", "left", "a", "couple", "comments", "in", "the", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "fb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "cc", "NUMBER", "b", "NUMBER", "b", "NUMBER", "c", "NUMBER", "commit", "for", "you", "to", "review", "NUMBER", "I", "think", "it", "d", "be", "also", "nice", "to", "implement", "the", "alternative", "solution", "of", "cloning", "fetching", "from", "a", "repos", "folder", "and", "then", "rsync", "ing", "copying", "the", "repos", "content", "to", "the", "release", "folder", "NUMBER", "I", "have", "a", "question", "NUMBER", "I", "defined", "two", "servers", "dev", "svr", "and", "prod", "svr", "NUMBER", "My", "repo", "has", "two", "branch", "develop", "and", "master", "I", "want", "deploy", "branch", "develop", "on", "dev", "svr", "before", "merge", "to", "branch", "master", "and", "deploy", "on", "prod", "svr", "NUMBER", "Can", "you", "support", "my", "case", "I", "expect", "code", "php", "TAG", "env", "deploy_path", "var", "www", "apps", "dev", "user", "dev", "forwardAgent", "stage", "dev", "branch", "develop", "server", "prod", "svr", "NUMBER", "NUMBER", "env", "deploy_path", "var", "www", "apps", "prod", "user", "dev", "forwardAgent", "stage", "prod", "branch", "master", "NUMBER", "oanhnn", "With", "the", "current", "implementation", "no", "but", "that", "would", "indeed", "be", "interesting", "NUMBER", "I", "think", "it", "would", "be", "better", "to", "have", "branch", "as", "environment", "variables", "so", "it", "can", "be", "use", "like", "oanhnn", "suggests", "NUMBER", "If", "the", "user", "pass", "a", "tag", "which", "should", "have", "be", "a", "revision", "then", "it", "d", "force", "prefer", "that", "tag", "over", "the", "branch", "NUMBER", "thank", "you", "elfet", "Great", "I", "think", "that", "the", "following", "syntax", "be", "much", "nicer", "than", "the", "second", "one", "NUMBER", "php", "cd", "some_path", "run", "my_super_command", "in", "some_path", "php", "run", "cd", "some_path", "my_super_command", "Thus", "my", "question", "why", "was", "cd", "remove", "in", "v", "NUMBER", "Most", "tasks", "generally", "occur", "within", "a", "specific", "directory", "NUMBER", "I", "think", "the", "cd", "syntax", "follows", "the", "DRY", "Don", "t", "Repeat", "Yourself", "principle", "which", "be", "a", "good", "thing", "NUMBER", "Furthermore", "since", "your", "preference", "cd", "ing", "on", "every", "command", "still", "would", "work", "with", "cd", "support", "it", "would", "probably", "be", "better", "to", "have", "it", "than", "not", "NUMBER", "php", "cd", "some_path", "run", "my_super_command", "run", "my_super_command", "run", "my_super_command", "run", "my_super_command", "php", "run", "cd", "some_path", "my_super_command", "run", "cd", "some_path", "my_super_command", "run", "cd", "some_path", "my_super_command", "run", "cd", "some_path", "my_super_command", "I", "do", "understand", "that", "the", "removal", "of", "cd", "and", "the", "work", "path", "paradigm", "was", "to", "simplify", "the", "run", "function", "NUMBER", "I", "guess", "the", "problem", "be", "that", "the", "phpseclib", "and", "I", "assume", "the", "ssh", "NUMBER", "extension", "both", "run", "one", "off", "commands", "where", "you", "be", "back", "to", "the", "home", "directory", "after", "each", "command", "which", "means", "if", "we", "want", "emulate", "a", "work", "directory", "we", "have", "to", "do", "it", "ourselves", "NUMBER", "Hi", "Would", "love", "to", "add", "an", "option", "or", "argument", "to", "my", "task", "be", "it", "possible", "How", "can", "we", "pass", "a", "parameter", "to", "the", "task", "Thks", "This", "pull", "request", "include", "Implement", "SSH", "Agent", "Forwarding", "Feature", "NUMBER", "LINK", "Unit", "test", "for", "Builder", "forwardAgent", "method", "How", "to", "use", "php", "TAG", "forwardAgent", "I", "test", "and", "work", "good", "with", "my", "system", "NUMBER", "Here", "be", "my", "deployer", "NUMBER", "php", "file", "php", "TAG", "user", "dev", "forwardAgent", "set", "repository", "git", "github", "NUMBER", "com", "oanhnn", "slim", "skeleton", "NUMBER", "git", "set", "deploy_path", "var", "www", "apps", "slim", "env", "deploy_path", "get", "deploy_path", "task", "deploy", "start", "function", "run", "if", "d", "deploy_path", "then", "mkdir", "p", "deploy_path", "fi", "Success", "message", "task", "deploy", "end", "function", "host", "config", "getHost", "writeln", "TAG", "Successfully", "deployed", "on", "TAG", "TAG", "host", "TAG", "Main", "task", "task", "deploy", "deploy", "start", "deploy", "prepare", "deploy", "update_code", "deploy", "vendors", "deploy", "symlink", "cleanup", "deploy", "end", "desc", "Deploy", "your", "project", "Please", "allow", "forward", "agent", "function", "with", "ssh", "configure", "follow", "post", "LINK", "ssh", "agent", "forwarding", "I", "think", "you", "should", "change", "function", "server", "in", "function", "NUMBER", "php", "for", "always", "use", "PhpSecLib", "until", "SSH", "NUMBER", "extension", "support", "this", "feature", "oanhnn", "how", "be", "it", "that", "you", "have", "agent", "forwarding", "in", "phpseclib", "while", "it", "appears", "that", "the", "issue", "be", "not", "yet", "merge", "into", "master", "on", "their", "side", "Have", "you", "manually", "patched", "up", "your", "deployer", "installation", "with", "the", "current", "PR", "from", "there", "If", "so", "it", "means", "this", "PR", "be", "incomplete", "and", "will", "not", "work", "NUMBER", "Sorry", "I", "be", "vacationing", "Tet", "holiday", "NUMBER", "I", "have", "problem", "with", "forward", "agent", "when", "change", "from", "use", "capistrano", "to", "use", "deployer", "NUMBER", "I", "was", "waiting", "and", "follow", "this", "feature", "but", "i", "need", "this", "to", "deploy", "my", "project", "from", "bitbucket", "NUMBER", "org", "and", "can", "not", "wait", "longer", "NUMBER", "I", "was", "search", "solution", "and", "find", "issue", "NUMBER", "LINK", "on", "Laravel", "Framework", "NUMBER", "I", "was", "try", "implement", "this", "feature", "and", "success", "with", "my", "system", "NUMBER", "I", "think", "phpseclib", "was", "implement", "this", "feature", "but", "didn", "t", "create", "document", "and", "not", "yet", "merge", "NUMBER", "I", "be", "following", "this", "feature", "after", "Tet", "holiday", "NUMBER", "for", "YmdHis", "I", "agree", "that", "numbers", "be", "more", "readable", "and", "that", "ls", "l", "would", "list", "the", "modification", "time", "of", "the", "folder", "but", "the", "website", "LINK", "lists", "that", "the", "format", "be", "YmdHis", "NUMBER", "Furthermore", "the", "various", "deployment", "tool", "I", "ve", "seen", "capistrano", "rocketeers", "magallanes", "seem", "to", "prefer", "it", "over", "numbered", "release", "NUMBER", "I", "think", "it", "might", "be", "that", "if", "you", "be", "release", "to", "many", "servers", "at", "once", "and", "that", "the", "release", "name", "be", "YmdHis", "from", "the", "deploying", "machine", "then", "all", "remote", "servers", "will", "have", "this", "same", "folder", "name", "while", "a", "numbered", "release", "may", "not", "if", "servers", "be", "add", "with", "time", "and", "their", "release", "number", "do", "not", "match", "NUMBER", "Then", "it", "be", "not", "possible", "to", "figure", "out", "which", "release", "matches", "which", "on", "the", "remote", "server", "from", "a", "simple", "file", "listing", "NUMBER", "On", "the", "other", "hand", "though", "it", "would", "still", "be", "possible", "to", "have", "some", "sort", "of", "centralized", "numbering", "system", "so", "that", "any", "deployment", "to", "many", "server", "deploys", "to", "the", "same", "release", "folder", "number", "NUMBER", "NUMBER", "elfet", "that", "s", "why", "I", "said", "we", "get", "the", "timestamp", "datetime", "from", "the", "deployment", "machine", "aka", "your", "desktop", "laptop", "not", "the", "deployed", "at", "machine", "NUMBER", "This", "value", "be", "exactly", "the", "same", "for", "every", "deployment", "on", "every", "machine", "NUMBER", "Some", "simple", "like", "this", "in", "your", "recipe", "file", "php", "release", "date", "YmdHis", "task", "deploy", "release", "function", "use", "release", "releasePath", "deploy_path", "release", "release", "run", "mkdir", "releasePath", "run", "cd", "deploy_path", "if", "e", "release", "then", "rm", "release", "fi", "run", "ln", "s", "releasePath", "deploy_path", "release", "desc", "Prepare", "release", "Both", "approaches", "be", "valid", "NUMBER", "I", "would", "go", "for", "YmdHis", "because", "it", "s", "the", "standard", "in", "deployment", "tool", "NUMBER", "Incremental", "release", "number", "could", "be", "use", "if", "a", "parameter", "be", "set", "e", "NUMBER", "g", "NUMBER", "set", "release_naming", "incremental", "whereas", "the", "default", "would", "be", "timestamp", "NUMBER", "gordalina", "Agreed", "NUMBER", "I", "thought", "about", "the", "same", "thing", "but", "I", "decided", "against", "suggesting", "it", "for", "the", "sake", "of", "keep", "the", "system", "simple", "as", "we", "d", "have", "to", "handle", "both", "case", "and", "consider", "them", "when", "make", "any", "change", "in", "the", "future", "NUMBER", "tomzx", "I", "favor", "convention", "over", "configuration", "NUMBER", "The", "configuration", "option", "be", "a", "solution", "in", "case", "elfet", "has", "a", "strong", "opinion", "about", "incremental", "release", "names", "NUMBER", "elfet", "Looks", "like", "you", "went", "a", "bit", "fast", "there", "NUMBER", "The", "date", "call", "was", "supposed", "to", "be", "do", "outside", "of", "the", "task", "so", "that", "all", "servers", "would", "use", "the", "same", "timestamp", "NUMBER", "Create", "shared", "directories", "in", "the", "release", "path", "NUMBER", "Create", "writable", "directories", "if", "needed", "NUMBER", "NUMBER", "for", "atomic", "deploy", "Hi", "I", "m", "trying", "to", "use", "the", "Deployer", "NUMBER", "Beta", "NUMBER", "I", "have", "downloaded", "the", "archive", "build", "the", "phar", "installer", "it", "in", "bin", "directory", "NUMBER", "But", "then", "when", "I", "try", "to", "follow", "the", "Get", "Started", "example", "as", "soon", "as", "I", "add", "require", "recipe", "symfony", "NUMBER", "php", "I", "get", "these", "error", "whn", "I", "run", "dep", "PHP", "Warning", "array_map", "An", "error", "occur", "while", "invoking", "the", "map", "callback", "in", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "on", "line", "NUMBER", "And", "PHP", "Fatal", "error", "Uncaught", "exception", "RuntimeException", "with", "message", "Object", "deploy", "start", "do", "not", "exist", "in", "ScenarioCollection", "NUMBER", "in", "phar", "usr", "local", "bin", "dep", "src", "Collection", "Collection", "NUMBER", "php", "NUMBER", "Could", "you", "help", "Thks", "Thank", "you", "NUMBER", "ep", "by", "step", "I", "m", "trying", "to", "correct", "it", "NUMBER", "without", "doc", "not", "so", "easy", "And", "I", "have", "to", "say", "this", "project", "looks", "great", "Thank", "you", "I", "have", "a", "strange", "issue", "now", "NUMBER", "I", "almost", "managed", "to", "make", "everything", "work", "except", "that", "when", "I", "launch", "the", "dep", "deploy", "the", "deploy", "assetic", "dump", "task", "return", "an", "error", "Unable", "to", "find", "file", "CmfCreateBundle", "Resources", "public", "vendor", "hallo", "src", "hallo", "NUMBER", "coffee", "this", "file", "be", "downloaded", "during", "the", "vendor", "step", "it", "s", "a", "composer", "post", "install", "script", "Symfony", "Cmf", "Bundle", "CreateBundle", "Composer", "ScriptHandler", "downloadCreateAndCkeditor", "The", "strange", "thing", "be", "that", "if", "a", "relaunch", "the", "dep", "deploy", "assetic", "dump", "it", "works", "NUMBER", "Sorry", "it", "s", "not", "a", "problem", "with", "Deploy", "it", "s", "a", "problem", "of", "cache", "warmup", "and", "assetic", "NUMBER", "don", "t", "really", "understand", "but", "find", "a", "solution", "NUMBER", "There", "be", "no", "phars", "for", "NUMBER", "NUMBER", "and", "also", "NUMBER", "x", "release", "how", "do", "i", "update", "Just", "build", "them", "with", "the", "include", "build", "script", "Eg", "php", "NUMBER", "build", "Perhaps", "you", "need", "to", "enable", "the", "write", "mode", "for", "phar", "file", "in", "php", "NUMBER", "ini", "NUMBER", "I", "guess", "I", "could", "do", "just", "that", "but", "it", "s", "much", "more", "easy", "to", "just", "download", "it", "Thanks", "I", "ve", "build", "the", "latest", "package", "for", "deployer", "NUMBER", "phar", "and", "get", "this", "error", "when", "use", "the", "deployer", "PHP", "Fatal", "error", "Class", "Net_SFTP", "not", "find", "in", "phar", "usr", "local", "bin", "dep", "src", "Server", "Remote", "PhpSecLib", "NUMBER", "php", "on", "line", "NUMBER", "Any", "clue", "dev", "master", "checked", "out", "today", "SSH", "NUMBER", "miss", "in", "my", "php", "installation", "NUMBER", "Solved", "the", "error", "with", "bash", "brew", "install", "php", "NUMBER", "ssh", "NUMBER", "LINK", "server", "install", "phps", "ssh", "NUMBER", "extension", "on", "ubuntu", "and", "mac", "Like", "suggested", "here", "LINK", "What", "you", "guys", "think", "I", "have", "test", "and", "worked", "fine", "NUMBER", "Why", "download", "composer", "NUMBER", "phar", "to", "the", "release_path", "when", "you", "could", "should", "download", "it", "to", "the", "shared_path", "instead", "Also", "it", "d", "be", "nice", "if", "we", "could", "not", "pollute", "commands", "with", "framework", "specific", "environment", "variables", "such", "as", "SYMFONY_ENV", "NUMBER", "tomzx", "I", "m", "ok", "with", "that", "NUMBER", "NUMBER", "Awesome", "smile", "I", "m", "closing", "this", "for", "now", "in", "favor", "of", "LINK", "LINK", "textui", "NUMBER", "clioptions", "Before", "image", "LINK", "ae", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "da", "NUMBER", "b", "NUMBER", "f", "NUMBER", "e", "NUMBER", "png", "After", "image", "LINK", "ae", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "e", "NUMBER", "c", "NUMBER", "png", "depth", "create", "a", "shallow", "clone", "with", "a", "history", "truncated", "to", "a", "limited", "number", "of", "revisions", "NUMBER", "we", "have", "a", "very", "big", "main", "repository", "which", "be", "not", "a", "problem", "for", "a", "normal", "deploy", "via", "git", "but", "it", "be", "with", "this", "tool", "as", "it", "do", "not", "update", "the", "git", "on", "a", "central", "place", "but", "creates", "a", "complete", "new", "checkout", "on", "every", "run", "NUMBER", "LINK", "L", "NUMBER", "that", "reduces", "problem", "with", "big", "history", "but", "not", "with", "big", "checkouts", "NUMBER", "You", "would", "need", "to", "use", "something", "pull", "based", "or", "somehow", "allow", "usage", "of", "the", "reference", "flag", "NUMBER", "But", "this", "needs", "maybe", "some", "bigger", "refctoring", "NUMBER", "NUMBER", "be", "probably", "what", "you", "re", "looking", "for", "NUMBER", "Shallow", "clone", "solves", "my", "problem", "NUMBER", "How", "do", "I", "filter", "actions", "to", "only", "one", "server", "inside", "a", "task", "I", "m", "use", "the", "Deployer", "to", "pull", "data", "and", "file", "from", "the", "production", "to", "my", "Vagrant", "development", "environment", "Bedrock", "NUMBER", "In", "that", "case", "I", "just", "want", "to", "do", "the", "pull", "to", "this", "single", "machine", "and", "not", "to", "the", "server", "NUMBER", "I", "m", "really", "happy", "to", "use", "the", "Deployer", "instead", "of", "Capistrano", "NUMBER", "I", "m", "not", "a", "fan", "of", "Ruby", "Thanks", "NUMBER", "I", "m", "currently", "trying", "out", "master", "NUMBER", "d", "NUMBER", "f", "NUMBER", "e", "NUMBER", "a", "NUMBER", "f", "NUMBER", "a", "NUMBER", "ebbf", "NUMBER", "eda", "NUMBER", "a", "NUMBER", "cad", "NUMBER", "de", "and", "I", "get", "the", "following", "error", "run", "bash", "PHP", "Fatal", "error", "Call", "to", "undefined", "method", "Deployer", "Server", "Builder", "path", "in", "deploy", "NUMBER", "php", "on", "line", "NUMBER", "Here", "be", "the", "deploy", "NUMBER", "php", "stripped", "anything", "that", "isn", "t", "useful", "to", "this", "issue", "NUMBER", "php", "TAG", "user", "www", "data", "path", "var", "www", "test", "target", "It", "appears", "that", "NUMBER", "e", "NUMBER", "ca", "NUMBER", "a", "NUMBER", "ede", "NUMBER", "b", "NUMBER", "ee", "NUMBER", "fb", "NUMBER", "c", "you", "did", "a", "major", "refactoring", "which", "remove", "path", "from", "Configuration", "NUMBER", "What", "will", "be", "the", "way", "the", "path", "be", "defined", "in", "v", "NUMBER", "Will", "it", "be", "through", "set", "deploy_path", "var", "www", "test", "target", "Duplicate", "of", "NUMBER", "Actually", "this", "should", "be", "in", "an", "UPGRADING", "NUMBER", "md", "file", "like", "symfony", "do", "On", "qui", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "tomzx", "notifications", "github", "NUMBER", "com", "write", "Closed", "NUMBER", "LINK", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "event", "NUMBER", "Hi", "Please", "fix", "composer", "NUMBER", "json", "require", "section", "in", "the", "Deployer", "NUMBER", "It", "use", "old", "repo", "elfet", "php", "ssh", "that", "already", "droped", "NUMBER", "Hi", "It", "looks", "like", "there", "be", "still", "some", "issue", "with", "this", "NUMBER", "After", "i", "update", "composer", "requirements", "to", "deployphp", "deployer", "NUMBER", "it", "shows", "this", "error", "Your", "requirements", "could", "not", "be", "resolve", "to", "an", "installable", "set", "of", "package", "NUMBER", "Problem", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "NUMBER", "dev", "satisfiable", "by", "phpseclib", "phpseclib", "NUMBER", "x", "dev", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "NUMBER", "dev", "satisfiable", "by", "phpseclib", "phpseclib", "NUMBER", "x", "dev", "NUMBER", "Removal", "request", "for", "phpseclib", "phpseclib", "NUMBER", "dev", "Installation", "request", "for", "deployer", "deployer", "NUMBER", "satisfiable", "by", "deployer", "deployer", "v", "NUMBER", "NUMBER", "When", "i", "put", "this", "in", "my", "composer", "NUMBER", "json", "it", "works", "fine", "phpseclib", "phpseclib", "NUMBER", "dev", "Is", "this", "requirement", "to", "explicitly", "put", "_phpseclib_", "dependency", "to", "composer", "I", "m", "having", "the", "same", "problem", "whatever", "version", "I", "try", "to", "require", "right", "now", "NUMBER", "Missing", "elfet", "php", "ssh", "for", "NUMBER", "and", "phpseclib", "no", "matching", "package", "find", "for", "version", "above", "NUMBER", "This", "be", "just", "a", "proposal", "because", "i", "prefer", "more", "fluent", "like", "that", "php", "server", "name", "host", "ec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "my", "server", "NUMBER", "com", "port", "NUMBER", "path", "home", "dir", "dir", "user", "user", "pubKey", "NUMBER", "ssh", "name", "NUMBER", "pub", "NUMBER", "ssh", "name", "instead", "of", "php", "server", "name", "ec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "my", "server", "NUMBER", "com", "NUMBER", "path", "home", "dir", "dir", "user", "user", "pubKey", "NUMBER", "ssh", "name", "NUMBER", "pub", "NUMBER", "ssh", "name", "elfet", "Done", "smile", "elfet", "Yeah", "lets", "wait", "NUMBER", "smile", "Closes", "NUMBER", "Glad", "that", "you", "like", "it", "Yep", "i", "test", "both", "By", "the", "way", "nice", "job", "with", "the", "parallel", "executor", "NUMBER", "API", "to", "allow", "display", "that", "a", "task", "has", "fail", "but", "do", "not", "compromise", "the", "deployment", "NUMBER", "Example", "newrelic", "recipe", "LINK", "L", "NUMBER", "and", "slack", "recipe", "LINK", "L", "NUMBER", "Possible", "APIs", "writeln", "Task", "has", "fail", "ERROR", "the", "second", "argument", "could", "be", "OK", "default", "or", "ERROR", "writeError", "Task", "has", "fail", "error", "Task", "has", "fail", "this", "would", "be", "only", "for", "recoverable", "error", "as", "fatal", "error", "be", "throw", "exception", "elfet", "let", "me", "know", "what", "you", "think", "I", "agree", "totally", "on", "simple", "solutions", "We", "could", "use", "writeln", "TAG", "but", "it", "wouldn", "t", "fit", "into", "the", "way", "tasks", "be", "printed", "NUMBER", "E", "NUMBER", "g", "NUMBER", "A", "task", "name", "be", "display", "and", "at", "the", "end", "a", "green", "check", "be", "display", "it", "could", "print", "a", "red", "cross", "NUMBER", "A", "special", "exception", "could", "be", "throw", "for", "example", "Deployer", "Exception", "NonFatalException", "or", "something", "similar", "NUMBER", "Having", "a", "special", "exception", "would", "position", "the", "display", "logic", "in", "Deployer", "rather", "than", "the", "task", "itself", "as", "successful", "tasks", "do", "not", "have", "to", "write", "to", "the", "console", "a", "task", "which", "cause", "an", "error", "should", "not", "as", "well", "it", "follows", "the", "same", "principle", "NUMBER", "What", "do", "you", "think", "Yes", "i", "will", "Do", "you", "want", "me", "to", "make", "the", "same", "pull", "request", "against", "master", "Hi", "ppl", "I", "update", "my", "dep", "today", "and", "start", "get", "this", "message", "Call", "to", "undefined", "method", "Deployer", "Server", "Builder", "path", "this", "be", "my", "deploy", "NUMBER", "php", "require", "recipe", "common", "NUMBER", "php", "server", "main", "MYSERVER", "NUMBER", "path", "apps", "ewallet", "anyone", "has", "this", "thanks", "in", "advance", "i", "really", "do", "not", "know", "previous", "version", "but", "now", "i", "m", "use", "Deployer", "version", "NUMBER", "beta", "Hi", "I", "have", "a", "configuration", "file", "say", "config", "NUMBER", "php", "which", "be", "shared", "among", "release", "NUMBER", "The", "first", "time", "I", "deploy", "it", "be", "generate", "in", "the", "shared", "directory", "but", "it", "be", "still", "empty", "instead", "of", "having", "the", "original", "contents", "NUMBER", "If", "this", "be", "a", "bug", "I", "could", "provide", "a", "fix", "for", "this", "NUMBER", "update", "it", "looks", "like", "the", "same", "be", "happening", "with", "shared", "directories", "NUMBER", "They", "be", "empty", "as", "well", "NUMBER", "It", "looks", "like", "it", "was", "meant", "for", "generate", "file", "directories", "but", "I", "have", "some", "initial", "content", "stored", "in", "git", "NUMBER", "Nice", "will", "have", "a", "look", "at", "it", "soon", "in", "a", "few", "days", "NUMBER", "For", "now", "I", "have", "moved", "the", "initial", "contents", "manually", "NUMBER", "I", "have", "same", "problem", "and", "my", "solution", "be", "write", "a", "task", "configure", "php", "Make", "shared_dirs", "and", "configure", "file", "from", "template", "task", "configure", "function", "Compiler", "template", "of", "configure", "file", "param", "string", "contents", "return", "string", "compiler", "function", "contents", "if", "preg_match_all", "NUMBER", "contents", "matches", "foreach", "matches", "NUMBER", "as", "name", "value", "env", "get", "name", "if", "is_null", "value", "is_bool", "value", "is_array", "value", "is_string", "value", "value", "var_export", "value", "true", "contents", "str_replace", "NUMBER", "name", "NUMBER", "value", "contents", "return", "contents", "Create", "shared", "dir", "if", "do", "not", "exist", "foreach", "get", "shared_dirs", "as", "dir", "run", "mkdir", "p", "deploy_path", "shared", "dir", "finder", "new", "Symfony", "Component", "Finder", "Finder", "iterator", "finder", "file", "name", "NUMBER", "tpl", "in", "__DIR__", "NUMBER", "shared", "tmpDir", "sys_get_temp_dir", "var", "file", "Symfony", "Component", "Finder", "SplFileInfo", "foreach", "iterator", "as", "file", "success", "false", "Make", "tmp", "file", "tmpFile", "tempnam", "tmpDir", "tmp", "if", "empty", "tmpFile", "try", "contents", "compiler", "file", "getContents", "target", "preg_replace", "NUMBER", "tpl", "file", "getRelativePathname", "Put", "contents", "and", "upload", "tmp", "file", "to", "server", "if", "file_put_contents", "tmpFile", "contents", "NUMBER", "upload", "tmpFile", "shared", "NUMBER", "target", "success", "true", "catch", "Exception", "e", "success", "false", "Delete", "tmp", "file", "unlink", "tmpFile", "if", "success", "writeln", "sprintf", "TAG", "TAG", "s", "file", "getRelativePathname", "else", "writeln", "sprintf", "TAG", "TAG", "s", "file", "getRelativePathname", "and", "make", "template", "for", "configure", "file", "in", "shared", "folder", "same", "directory", "structure", "with", "shared", "folder", "on", "server", "NUMBER", "bin", "dep", "shared", "Config", "app", "NUMBER", "php", "NUMBER", "tpl", "vendor", "deploy", "NUMBER", "php", "And", "simple", "content", "of", "app", "NUMBER", "php", "NUMBER", "tpl", "file", "TAG", "user", "dev", "forwardAgent", "stage", "dev", "env", "deploy_path", "var", "www", "apps", "dev", "env", "branch", "develop", "env", "app", "NUMBER", "var", "NUMBER", "bool", "true", "env", "app", "NUMBER", "var", "NUMBER", "ring", "abc", "env", "app", "NUMBER", "var", "NUMBER", "integer", "NUMBER", "env", "app", "NUMBER", "var", "NUMBER", "float", "NUMBER", "env", "app", "NUMBER", "var", "NUMBER", "array", "array", "a", "NUMBER", "b", "NUMBER", "env", "app", "NUMBER", "var", "NUMBER", "null", "null", "env", "app", "NUMBER", "var", "NUMBER", "empty", "After", "run", "this", "task", "remote", "server", "has", "shared", "Config", "app", "NUMBER", "php", "with", "contents", "php", "TAG", "NUMBER", "b", "NUMBER", "null", "NULL", "empty", "elfet", "Should", "i", "put", "this", "task", "to", "common", "recipe", "oanhnn", "Cool", "recipe", "thanks", "While", "it", "could", "be", "useful", "for", "my", "use", "case", "I", "will", "try", "to", "implement", "the", "copy", "feature", "as", "describe", "above", "as", "well", "NUMBER", "I", "think", "it", "should", "be", "default", "behaviour", "NUMBER", "dirkluijk", "oanhnn", "elfet", "this", "be", "a", "cool", "feature", "but", "also", "a", "very", "specific", "one", "NUMBER", "I", "would", "say", "it", "could", "sit", "as", "a", "recipe", "either", "at", "core", "or", "i", "would", "vote", "for", "the", "NUMBER", "party", "external", "recipes", "project", "LINK", "NUMBER", "dirkluijk", "elfet", "gordalina", "I", "created", "a", "recipe", "for", "generate", "configure", "file", "LINK", "Can", "we", "close", "this", "issue", "I", "be", "closing", "thing", "issue", "but", "feel", "free", "to", "reopen", "if", "you", "think", "there", "needs", "to", "be", "more", "discussion", "NUMBER", "Changed", "output", "when", "cloning", "repository", "because", "of", "initialization", "of", "submodule", "NUMBER", "Git", "always", "output", "some", "text", "and", "this", "be", "actually", "considered", "as", "error", "NUMBER", "Update", "provide", "possibility", "to", "deploy", "repository", "with", "submodules", "NUMBER", "This", "fix", "issue", "NUMBER", "Tried", "configuring", "server", "with", "a", "pubkey", "and", "username", "password", "combination", "NUMBER", "Keep", "get", "this", "error", "RuntimeException", "Could", "not", "login", "with", "PhpSecLib", "NUMBER", "This", "did", "not", "work", "server", "development", "server", "NUMBER", "NUMBER", "path", "var", "www", "site", "NUMBER", "com", "user", "username", "pubKey", "NUMBER", "ssh", "site", "NUMBER", "pub", "NUMBER", "ssh", "site", "Neither", "did", "this", "server", "development", "server", "NUMBER", "NUMBER", "path", "var", "www", "site", "NUMBER", "com", "user", "username", "password", "When", "I", "SSH", "via", "terminal", "it", "all", "works", "fine", "with", "the", "provide", "certificate", "in", "NUMBER", "ssh", "NUMBER", "Any", "idea", "what", "s", "cause", "this", "error", "Latest", "NUMBER", "site", "NUMBER", "com", "git", "develop", "dep", "deploy", "vvv", "Preparing", "server", "for", "deploy", "Run", "task", "deploy", "prepare", "on", "server", "development", "server", "NUMBER", "cd", "var", "www", "dev", "NUMBER", "site", "NUMBER", "com", "cd", "deploy_path", "if", "d", "release", "then", "mkdir", "release", "fi", "RuntimeException", "Could", "not", "login", "with", "PhpSecLib", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "PhpSecLib", "connect", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "PhpSecLib", "checkConnection", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "PhpSecLib", "NUMBER", "php", "NUMBER", "Deployer", "Server", "PhpSecLib", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "Users", "user", "Development", "site", "NUMBER", "com", "deploy", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Runner", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "runSeries", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "dry", "run", "server", "NUMBER", "stage", "My", "mistake", "I", "m", "use", "v", "NUMBER", "Any", "idea", "what", "I", "m", "doing", "wrong", "Or", "be", "it", "a", "bug", "I", "have", "this", "same", "issue", "with", "v", "NUMBER", "the", "server", "needs", "something", "special", "in", "it", "I", "have", "the", "same", "problem", "how", "to", "fix", "it", "I", "downloaded", "install", "the", "phar", "file", "NUMBER", "via", "LINK", "use", "mv", "deployer", "NUMBER", "phar", "usr", "local", "bin", "dep", "chmod", "x", "usr", "local", "bin", "dep", "Now", "I", "m", "get", "these", "error", "PHP", "Warning", "array_map", "An", "error", "occur", "while", "invoking", "the", "map", "callback", "in", "phar", "usr", "local", "bin", "dep", "src", "Task", "TaskFactory", "NUMBER", "php", "on", "line", "NUMBER", "Warning", "array_map", "An", "error", "occur", "while", "invoking", "the", "map", "callback", "in", "phar", "usr", "local", "bin", "dep", "src", "Task", "TaskFactory", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Fatal", "error", "Uncaught", "exception", "RuntimeException", "with", "message", "Task", "deploy", "start", "do", "not", "defined", "NUMBER", "in", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "With", "tasks", "task", "deploy", "deploy", "start", "deploy", "prepare", "deploy", "update_code", "deploy", "vendors", "deploy", "symlink", "cleanup", "deploy", "end", "In", "deploy", "NUMBER", "php", "I", "also", "configured", "env", "shared_dirs", "writable_dirs", "assets", "auto_migrate", "servers", "stages", "and", "repository", "NUMBER", "Any", "idea", "how", "to", "fix", "this", "Okay", "just", "find", "out", "that", "I", "need", "to", "define", "all", "tasks", "manually", "also", "the", "tasks", "in", "recipes", "common", "NUMBER", "php", "NUMBER", "So", "to", "install", "you", "not", "only", "need", "to", "copy", "the", "phar", "file", "to", "usr", "local", "bin", "dep", "but", "you", "also", "need", "to", "clone", "this", "repo", "to", "your", "work", "dir", "for", "the", "recipes", "NUMBER", "Correct", "LINK", "Ok", "Think", "it", "s", "good", "to", "add", "this", "to", "the", "docs", "NUMBER", "Installation", "focuses", "only", "on", "the", "phar", "file", "cloning", "the", "git", "repo", "for", "including", "recipes", "be", "not", "mention", "yet", "NUMBER", "Hi", "I", "have", "problem", "in", "task", "deploy", "update_code", "when", "my", "repo", "be", "use", "some", "submodules", "NUMBER", "Deploy", "skript", "be", "trying", "to", "run", "something", "like", "this", "cd", "home", "user", "mytest", "git", "clone", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "owner", "repo", "NUMBER", "git", "home", "user", "mytest", "release", "NUMBER", "But", "it", "fail", "RuntimeException", "Cloning", "into", "htdocs", "somefolder", "NUMBER", "NUMBER", "Cloning", "into", "htdocs", "somefolder", "NUMBER", "NUMBER", "Cloning", "into", "htdocs", "somefolder", "NUMBER", "NUMBER", "Cloning", "into", "htdocs", "somefolder", "NUMBER", "NUMBER", "I", "be", "use", "_php", "ssh", "NUMBER", "_", "lib", "NUMBER", "I", "have", "tried", "to", "debug", "this", "issue", "and", "it", "fail", "in", "vendor", "elfet", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "when", "command", "returns", "something", "to", "output", "it", "will", "consider", "it", "as", "fail", "and", "NUMBER", "git", "command", "outputs", "information", "with", "Cloning", "into", "for", "submodules", "event", "you", "pass", "q", "variable", "NUMBER", "There", "be", "no", "permission", "problem", "I", "can", "run", "command", "that", "I", "mention", "on", "the", "top", "and", "it", "runs", "ok", "but", "output", "information", "about", "initialising", "submodules", "Anyone", "have", "any", "ideas", "how", "to", "fix", "this", "Here", "it", "be", "php", "vendor", "bin", "dep", "deploy", "update_code", "vvv", "Updating", "code", "Run", "task", "deploy", "update_code", "on", "server", "main", "mytest", "NUMBER", "sk", "cd", "home", "forge", "mytest", "git", "clone", "recursive", "q", "git", "bitbucket", "NUMBER", "org", "owner", "streamapp", "NUMBER", "git", "home", "forge", "mytest", "release", "NUMBER", "Run", "task", "deploy", "rollback", "on", "server", "main", "Rolling", "back", "to", "previous", "release", "on", "server", "main", "mytest", "NUMBER", "sk", "cd", "home", "forge", "mytest", "rm", "rf", "home", "forge", "mytest", "release", "NUMBER", "mytest", "NUMBER", "sk", "RuntimeException", "Cloning", "into", "htdocs", "somefolder", "NUMBER", "NUMBER", "Cloning", "into", "htdocs", "somefolder", "NUMBER", "NUMBER", "Cloning", "into", "htdocs", "somefolder", "NUMBER", "NUMBER", "Cloning", "into", "htdocs", "somefolder", "NUMBER", "NUMBER", "Exception", "trace", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "elfet", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "run", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "deployer", "deployer", "src", "Server", "Ssh", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Ssh", "NUMBER", "run", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "deployer", "deployer", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "deployer", "deployer", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "deployer", "deployer", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Runner", "run", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "deployer", "deployer", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "runSeries", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "deployer", "deployer", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "execute", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "deployer", "deployer", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "var", "www", "streamapp", "htdocs", "Nette", "libs", "vendor", "deployer", "deployer", "bin", "dep", "NUMBER", "deploy", "update_code", "dry", "run", "server", "NUMBER", "stage", "I", "think", "it", "will", "always", "fail", "when", "you", "use", "git", "command", "with", "submodules", "because", "he", "send", "output", "even", "if", "you", "use", "quiet", "option", "NUMBER", "Sorry", "for", "late", "answer", "NUMBER", "When", "I", "modify", "recipe", "common", "NUMBER", "php", "run", "git", "clone", "recursive", "q", "repository", "releasePath", "NUMBER", "NUMBER", "it", "be", "work", "NUMBER", "Right", "now", "i", "have", "few", "deployments", "with", "this", "change", "and", "it", "be", "looking", "stable", "for", "me", "NUMBER", "Shoud", "i", "create", "pull", "request", "for", "use", "it", "with", "default", "recipe", "Tasks", "like", "composer", "install", "can", "take", "really", "long", "NUMBER", "However", "in", "Symfony", "Component", "Process", "the", "method", "run", "uses", "a", "default", "timeout", "of", "NUMBER", "seconds", "NUMBER", "Sometimes", "this", "value", "be", "too", "low", "NUMBER", "In", "NUMBER", "we", "discussed", "just", "to", "set", "a", "higher", "timeout", "value", "NUMBER", "Deploying", "use", "Deployer", "Server", "Local", "Server", "i", "be", "run", "into", "a", "timeout", "NUMBER", "Tasks", "like", "composer", "install", "can", "take", "really", "long", "NUMBER", "However", "in", "Symfony", "Component", "Process", "the", "method", "run", "uses", "a", "default", "timeout", "of", "NUMBER", "seconds", "NUMBER", "Sometimes", "NUMBER", "s", "be", "too", "short", "NUMBER", "I", "suggest", "two", "solutions", "for", "this", "a", "set", "higher", "default", "values", "Deployer", "Server", "Local", "const", "TIMEOUT", "NUMBER", "b", "extend", "Deployer", "Server", "ServerInterface", "and", "add", "a", "new", "parameter", "to", "the", "run", "method", "inside", "function", "NUMBER", "php", "public", "function", "run", "command", "timeout", "NUMBER", "Please", "add", "this", "option", "for", "runLocally", "NUMBER", "Been", "trying", "to", "run", "deployment", "scripts", "on", "a", "new", "host", "NUMBER", "Some", "fail", "at", "installing", "vendors", "and", "some", "at", "dumping", "assets", "NUMBER", "The", "error", "returned", "didn", "t", "give", "me", "any", "help", "NUMBER", "It", "wasn", "t", "until", "I", "sshed", "in", "and", "trying", "to", "install", "manually", "that", "I", "find", "one", "of", "the", "problem", "was", "because", "I", "was", "miss", "php", "intl", "composer", "told", "me", "but", "this", "message", "wasn", "t", "relayed", "back", "through", "deployer", "and", "the", "other", "was", "php", "NUMBER", "apcu", "I", "get", "the", "message", "when", "doing", "it", "manually", "but", "it", "wasn", "t", "relayed", "through", "deployer", "NUMBER", "I", "was", "thinking", "that", "when", "deploying", "to", "a", "brand", "new", "host", "then", "miss", "libraries", "could", "be", "a", "common", "issue", "NUMBER", "So", "perhaps", "there", "be", "a", "way", "to", "improve", "the", "feedback", "when", "these", "processes", "fail", "NUMBER", "Ahh", "great", "NUMBER", "Will", "make", "a", "note", "of", "the", "change", "in", "V", "NUMBER", "so", "I", "can", "mention", "them", "at", "the", "end", "of", "my", "talk", "NUMBER", "At", "the", "moment", "I", "m", "not", "sure", "how", "long", "I", "have", "it", "s", "meant", "to", "be", "a", "NUMBER", "min", "jam", "session", "but", "so", "far", "not", "many", "have", "sign", "up", "so", "I", "might", "beg", "for", "more", "time", "NUMBER", "The", "symfony", "console", "has", "a", "configure", "method", "which", "should", "be", "use", "to", "configure", "the", "command", "NUMBER", "We", "felt", "the", "need", "to", "add", "some", "argument", "options", "to", "the", "console", "command", "during", "our", "development", "of", "our", "recipes", "NUMBER", "Maybe", "others", "need", "this", "functionality", "too", "NUMBER", "This", "would", "allow", "you", "to", "do", "something", "like", "this", "In", "a", "recipe", "php", "option", "tag", "array", "description", "Tag", "to", "checkout", "during", "git", "clone", "When", "deploying", "bash", "deployer", "NUMBER", "phar", "server", "prod", "tag", "v", "NUMBER", "cc", "mabrahamde", "Link", "provide", "in", "website", "to", "download", "the", "phar", "archive", "returns", "a", "NUMBER", "LINK", "Composer", "also", "throw", "an", "error", "when", "trying", "to", "install", "it", "from", "dist", "but", "be", "able", "to", "install", "it", "from", "sources", "NUMBER", "I", "cant", "download", "too", "I", "notice", "the", "release", "last", "night", "NUMBER", "doesn", "t", "have", "a", "phar", "file", "NUMBER", "I", "tried", "to", "build", "myself", "but", "get", "PHP", "Fatal", "error", "Class", "Net_SFTP", "not", "find", "in", "phar", "tmp", "deployer", "NUMBER", "deployer", "NUMBER", "phar", "src", "Server", "PhpSecLib", "NUMBER", "php", "on", "line", "NUMBER", "If", "i", "try", "to", "run", "the", "bin", "dep", "I", "get", "the", "same", "PHP", "Fatal", "error", "Class", "Net_SFTP", "not", "find", "in", "tmp", "deployer", "NUMBER", "src", "Server", "PhpSecLib", "NUMBER", "php", "on", "line", "NUMBER", "Is", "this", "a", "bug", "with", "the", "PhpSecLib", "stuff", "I", "m", "giving", "a", "talk", "to", "the", "Thailand", "PHP", "User", "s", "group", "next", "week", "about", "deployer", "but", "really", "could", "do", "with", "there", "be", "a", "work", "phar", "file", "NUMBER", "I", "did", "run", "composer", "install", "it", "won", "t", "build", "without", "it", "NUMBER", "I", "just", "downloaded", "your", "build", "and", "run", "it", "php", "deployer", "NUMBER", "phar", "deploy", "Preparing", "server", "for", "deploy", "NUMBER", "PHP", "Fatal", "error", "Class", "Net_SFTP", "not", "find", "in", "phar", "vagrant_data", "deployment", "smartnavigator", "deployer", "NUMBER", "phar", "src", "Server", "PhpSecLib", "NUMBER", "php", "on", "line", "NUMBER", "Same", "error", "as", "I", "get", "NUMBER", "I", "don", "t", "think", "I", "ll", "have", "time", "to", "show", "Deployer", "NUMBER", "It", "s", "just", "a", "short", "talk", "but", "will", "share", "any", "slides", "I", "have", "from", "it", "NUMBER", "It", "s", "the", "namespaces", "they", "have", "change", "in", "the", "latest", "version", "e", "NUMBER", "g", "new", "Net_SFTP", "this", "config", "getHost", "this", "config", "getPort", "should", "be", "new", "new", "phpseclib", "Net", "SFTP", "this", "config", "getHost", "this", "config", "getPort", "I", "m", "aware", "of", "the", "php", "ssh", "NUMBER", "extension", "but", "I", "m", "looking", "for", "an", "entire", "php", "solution", "so", "I", "can", "put", "the", "phar", "on", "any", "computer", "with", "a", "php", "interpreter", "and", "deploy", "stuff", "NUMBER", "Also", "we", "use", "PEM", "key", "file", "which", "as", "far", "as", "I", "m", "aware", "the", "ssh", "NUMBER", "extension", "doesn", "t", "support", "NUMBER", "Great", "thanks", "Did", "you", "rebuild", "the", "phar", "The", "source", "looks", "fix", "but", "the", "phar", "you", "offer", "be", "still", "broken", "NUMBER", "Great", "can", "confirm", "it", "s", "work", "elfet", "can", "you", "also", "fix", "it", "in", "the", "NUMBER", "version", "so", "we", "can", "use", "it", "in", "production", "please", "also", "add", "tag", "if", "merge", "NUMBER", "I", "have", "error", "installing", "deployer", "v", "NUMBER", "shell", "composer", "update", "Loading", "composer", "repositories", "with", "package", "information", "Updating", "dependencies", "including", "require", "dev", "Your", "requirements", "could", "not", "be", "resolve", "to", "an", "installable", "set", "of", "package", "NUMBER", "Problem", "NUMBER", "Installation", "request", "for", "deployer", "deployer", "NUMBER", "satisfiable", "by", "deployer", "deployer", "v", "NUMBER", "NUMBER", "deployer", "deployer", "v", "NUMBER", "requires", "phpseclib", "phpseclib", "NUMBER", "dev", "no", "matching", "package", "find", "NUMBER", "Potential", "causes", "A", "typo", "in", "the", "package", "name", "The", "package", "be", "not", "available", "in", "a", "stable", "enough", "version", "according", "to", "your", "minimum", "stability", "setting", "see", "TAG", "for", "more", "details", "NUMBER", "Read", "TAG", "for", "further", "common", "problem", "NUMBER", "I", "think", "this", "might", "be", "fix", "by", "json", "phpseclib", "phpseclib", "NUMBER", "dev", "elfet", "The", "correct", "solution", "would", "be", "to", "set", "the", "minimum", "stability", "not", "to", "require", "a", "dependency", "twice", "NUMBER", "Change", "the", "requirement", "to", "NUMBER", "dev", "as", "composer", "gives", "some", "issue", "when", "you", "specify", "the", "branch", "NUMBER", "elfet", "could", "you", "tag", "this", "NUMBER", "in", "the", "master", "Hi", "Anton", "The", "problem", "with", "the", "php", "NUMBER", "dev", "depency", "was", "that", "I", "get", "some", "error", "when", "I", "tried", "to", "install", "it", "globally", "composer", "require", "elfet", "deployer", "dev", "master", "NUMBER", "composer", "NUMBER", "json", "has", "be", "created", "Loading", "composer", "repositories", "with", "package", "information", "Updating", "dependencies", "including", "require", "dev", "Your", "requirements", "could", "not", "be", "resolve", "to", "an", "installable", "set", "of", "package", "NUMBER", "Problem", "NUMBER", "Installation", "request", "for", "elfet", "deployer", "dev", "master", "satisfiable", "by", "elfet", "deployer", "dev", "master", "NUMBER", "elfet", "deployer", "dev", "master", "requires", "phpseclib", "phpseclib", "dev", "php", "NUMBER", "no", "matching", "package", "find", "NUMBER", "Potential", "causes", "A", "typo", "in", "the", "package", "name", "The", "package", "be", "not", "available", "in", "a", "stable", "enough", "version", "according", "to", "your", "minimum", "stability", "setting", "see", "TAG", "for", "more", "details", "NUMBER", "Read", "TAG", "for", "further", "common", "problem", "NUMBER", "Installation", "fail", "deleting", "NUMBER", "composer", "NUMBER", "json", "NUMBER", "By", "requiring", "the", "alias", "of", "that", "branch", "this", "shoud", "be", "fix", "according", "to", "LINK", "issuecomment", "NUMBER", "I", "m", "also", "trying", "to", "do", "some", "minor", "refactoring", "ahead", "of", "the", "code", "coverage", "some", "methods", "have", "more", "than", "one", "responsibility", "so", "if", "we", "split", "this", "be", "up", "it", "will", "be", "easier", "to", "test", "NUMBER", "If", "you", "need", "any", "help", "let", "me", "know", "NUMBER", "Great", "tool", "by", "the", "way", "Inside", "deployer", "there", "be", "functionality", "for", "local", "deployment", "without", "ssh", "overhead", "NUMBER", "I", "like", "the", "idea", "of", "executing", "deployer", "directly", "on", "the", "server", "s", "NUMBER", "In", "this", "case", "you", "do", "not", "need", "to", "connect", "via", "ssh", "NUMBER", "You", "can", "execute", "all", "commands", "directly", "NUMBER", "Inside", "the", "master", "branch", "there", "be", "a", "function", "localServer", "NUMBER", "However", "it", "be", "not", "in", "the", "NUMBER", "x", "release", "NUMBER", "Building", "the", "phar", "from", "source", "doesn", "t", "result", "in", "a", "functional", "version", "NUMBER", "Clould", "you", "provide", "a", "functional", "phar", "file", "for", "local", "deployments", "the", "api", "has", "change", "somehow", "NUMBER", "how", "do", "you", "set", "server", "paths", "now", "how", "do", "you", "configure", "stages", "thanks", "I", "m", "use", "this", "build", "script", "LINK", "version", "NUMBER", "sh", "which", "was", "based", "off", "this", "article", "LINK", "php", "cli", "Also", "I", "add", "the", "self", "update", "command", "LINK", "As", "far", "as", "I", "can", "see", "it", "do", "not", "update", "everything", "automatically", "create", "phar", "add", "it", "to", "manifest", "commit", "publish", "a", "new", "tag", "and", "push", "everything", "to", "GH", "NUMBER", "Also", "you", "had", "this", "on", "your", "NUMBER", "task", "list", "LINK", "awesome", "i", "m", "not", "really", "experienced", "in", "wordpress", "and", "last", "time", "I", "deployed", "a", "zend", "app", "was", "NUMBER", "years", "ago", "NUMBER", "I", "don", "t", "think", "i", "m", "the", "best", "person", "to", "do", "it", "NUMBER", "btw", "you", "have", "in", "the", "tasklist", "a", "refactor", "of", "common", "symfony", "recipes", "what", "be", "you", "planning", "to", "do", "Is", "the", "PhpStorm", "license", "still", "available", "smirk", "I", "need", "some", "practice", "on", "unit", "test", "so", "NUMBER", "The", "phpseclib", "php", "NUMBER", "branch", "autoloads", "according", "to", "PSR", "NUMBER", "namespacing", "so", "the", "client", "encryptionalgorithms", "array", "isn", "t", "empty", "NUMBER", "Reference", "phpseclib", "phpseclib", "NUMBER", "Hi", "I", "have", "a", "quite", "simple", "build", "script", "NUMBER", "It", "just", "performs", "a", "git", "pull", "and", "runs", "some", "other", "scripts", "afterwards", "NUMBER", "My", "deploy", "NUMBER", "php", "php", "server", "myserver", "NUMBER", "path", "public_html", "user", "someuser", "Update", "project", "code", "task", "deploy", "update_code", "function", "run", "git", "reset", "hard", "run", "git", "pull", "origin", "master", "desc", "Updating", "code", "Update", "project", "dependencies", "task", "deploy", "update_dependencies", "function", "writeln", "Updating", "npm", "libraries", "NUMBER", "run", "npm", "update", "writeln", "Updating", "bower", "package", "NUMBER", "run", "bower", "update", "desc", "Updating", "dependencies", "Running", "gulp", "task", "deploy", "gulp", "function", "writeln", "Compiling", "LESS", "sources", "NUMBER", "run", "NUMBER", "node_modules", "NUMBER", "bin", "gulp", "desc", "Running", "gulp", "task", "deploy", "deploy", "update_code", "deploy", "update_dependencies", "deploy", "gulp", "When", "I", "run", "dep", "deploy", "vvv", "I", "get", "Updating", "code", "Run", "task", "deploy", "update_code", "on", "server", "myserver", "cd", "public_html", "git", "reset", "hard", "Password", "cd", "public_html", "git", "pull", "origin", "master", "Updating", "dependencies", "Run", "task", "deploy", "update_dependencies", "on", "server", "myserver", "Updating", "npm", "libraries", "NUMBER", "cd", "public_html", "npm", "update", "Updating", "bower", "package", "NUMBER", "cd", "public_html", "bower", "update", "Running", "gulp", "Run", "task", "deploy", "gulp", "on", "server", "myserver", "Compiling", "LESS", "sources", "NUMBER", "cd", "public_html", "NUMBER", "node_modules", "NUMBER", "bin", "gulp", "The", "git", "repo", "be", "not", "update", "NUMBER", "However", "manually", "entering", "the", "commands", "via", "SSH", "do", "work", "NUMBER", "Any", "ideas", "I", "have", "the", "contents", "of", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "already", "add", "ad", "deployment", "key", "to", "my", "repository", "Bitbucket", "be", "that", "what", "you", "mean", "git", "pull", "origin", "master", "works", "only", "when", "I", "execute", "it", "manually", "NUMBER", "Yes", "NUMBER", "Manually", "entering", "the", "git", "pull", "origin", "master", "command", "on", "my", "remote", "server", "do", "work", "although", "there", "be", "an", "error", "still", "not", "sure", "why", "NUMBER", "myuser", "myserver", "public_html", "cd", "public_html", "git", "pull", "origin", "master", "remote", "Counting", "objects", "NUMBER", "do", "NUMBER", "remote", "Compressing", "objects", "NUMBER", "NUMBER", "NUMBER", "do", "NUMBER", "remote", "Total", "NUMBER", "delta", "NUMBER", "reused", "NUMBER", "delta", "NUMBER", "Unpacking", "objects", "NUMBER", "NUMBER", "NUMBER", "do", "NUMBER", "From", "bitbucket", "NUMBER", "org", "my", "repository", "branch", "master", "FETCH_HEAD", "Updating", "NUMBER", "be", "NUMBER", "f", "NUMBER", "e", "NUMBER", "Fast", "forward", "index", "NUMBER", "html", "NUMBER", "NUMBER", "file", "change", "NUMBER", "insertions", "NUMBER", "deletions", "Error", "spawn", "EACCES", "at", "errnoException", "child_process", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Process", "NUMBER", "ChildProcess", "NUMBER", "_handle", "NUMBER", "onexit", "child_process", "NUMBER", "js", "NUMBER", "NUMBER", "I", "don", "t", "see", "how", "this", "error", "could", "possibly", "block", "Deployer", "so", "it", "might", "have", "nothing", "to", "do", "with", "it", "NUMBER", "Isn", "t", "there", "a", "way", "to", "have", "Deployer", "show", "the", "SSH", "output", "I", "remove", "the", "error", "by", "remove", "my", "work", "copy", "and", "cloning", "it", "again", "NUMBER", "but", "the", "problem", "still", "occur", "NUMBER", "It", "looks", "like", "it", "s", "an", "SSH", "issue", "after", "debugging", "I", "find", "that", "the", "commands", "be", "not", "executed", "NUMBER", "In", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "function", "exec", "command", "callback", "null", "NUMBER", "if", "this", "bitmap", "NET_SSH", "NUMBER", "_MASK_LOGIN", "return", "false", "returns", "false", "NUMBER", "Yeah", "I", "will", "try", "that", "NUMBER", "Thanks", "The", "documentation", "in", "website", "be", "for", "version", "NUMBER", "x", "and", "the", "API", "be", "not", "the", "same", "NUMBER", "thanks", "Expected", "by", "documentation", "that", "when", "the", "branch", "be", "set", "this", "wil", "be", "checkout", "LINK", "LINK", "use", "input", "options", "It", "do", "the", "same", "thing", "but", "it", "gives", "out", "a", "better", "exception", "object", "NUMBER", "first", "solution", "which", "comes", "into", "my", "mind", "test", "what", "the", "command", "composer", "NUMBER", "phar", "version", "returns", "maybe", "also", "allow", "to", "configure", "how", "the", "executable", "be", "named", "and", "where", "it", "should", "be", "I", "always", "install", "it", "as", "part", "of", "my", "environment", "directly", "after", "php", "gets", "install", "I", "would", "like", "to", "replace", "some", "configuration", "parameters", "in", "yaml", "file", "be", "there", "functionality", "present", "in", "deployer", "NUMBER", "Otherwise", "I", "would", "like", "to", "help", "to", "implement", "this", "NUMBER", "Just", "wondered", "if", "this", "would", "also", "allow", "for", "parameter", "setup", "on", "initial", "deployment", "Composer", "will", "die", "on", "symfony", "NUMBER", "installs", "if", "the", "db", "parameters", "be", "incorrect", "as", "it", "try", "to", "connect", "to", "any", "configured", "DB", "when", "warming", "the", "cache", "NUMBER", "This", "means", "on", "first", "deployment", "of", "a", "new", "code", "base", "the", "deployer", "will", "die", "unless", "the", "parameters", "in", "parameters", "NUMBER", "yml", "NUMBER", "dist", "be", "correct", "NUMBER", "Those", "who", "don", "t", "want", "to", "store", "db", "passwords", "in", "their", "repositories", "will", "run", "into", "problem", "NUMBER", "Composer", "will", "actually", "prompt", "for", "values", "to", "put", "into", "parameters", "NUMBER", "yml", "on", "first", "install", "NUMBER", "I", "remember", "when", "I", "use", "to", "use", "capifony", "that", "it", "would", "relay", "these", "prompts", "back", "to", "the", "user", "NUMBER", "Any", "chance", "this", "functionality", "will", "be", "adopted", "Ok", "I", "ll", "look", "into", "the", "interaction", "thing", "NUMBER", "But", "I", "just", "did", "a", "new", "deployment", "and", "composer", "fail", "because", "it", "couldn", "t", "find", "symfony", "db", "what", "the", "db", "name", "was", "set", "to", "in", "parameters", "NUMBER", "yml", "NUMBER", "dist", "in", "my", "mysql", "server", "NUMBER", "When", "update", "the", "db", "name", "to", "the", "correct", "one", "then", "it", "proceeds", "fine", "NUMBER", "Perhaps", "you", "already", "have", "the", "correct", "db", "credentials", "in", "the", "parameters", "NUMBER", "yml", "NUMBER", "dist", "NUMBER", "Nope", "there", "be", "no", "database", "migration", "to", "be", "do", "NUMBER", "Also", "as", "far", "as", "I", "m", "aware", "you", "can", "t", "run", "migration", "before", "you", "ve", "run", "composer", "as", "it", "needs", "all", "the", "dependencies", "composer", "downloads", "NUMBER", "And", "composer", "fail", "at", "cache", "stage", "NUMBER", "Perhaps", "it", "s", "something", "specific", "to", "things", "I", "ve", "do", "in", "my", "entities", "NUMBER", "I", "m", "use", "JMS", "serializer", "with", "doctrine", "NUMBER", "Yes", "it", "s", "possible", "to", "implement", "this", "for", "Symfony", "NUMBER", "deploy", "NUMBER", "Now", "Deployer", "runs", "composer", "with", "no", "interaction", "key", "and", "this", "be", "good", "solution", "NUMBER", "But", "it", "s", "really", "easy", "to", "implement", "parameters", "NUMBER", "yml", "creation", "NUMBER", "I", "didn", "t", "get", "it", "can", "you", "please", "give", "an", "example", "It", "would", "be", "very", "helpful", "for", "initial", "deploy", "NUMBER", "I", "run", "into", "the", "same", "thing", "NUMBER", "This", "article", "explains", "why", "doctrine", "try", "connect", "to", "db", "on", "cache", "clearing", "LINK", "NUMBER", "NUMBER", "cacheclear", "command", "checks", "every", "database", "connection", "Why", "it", "s", "run", "composer", "install", "without", "interaction", "event", "if", "I", "ve", "override", "it", "like", "dev", "server", "server", "dev", "host", "NUMBER", "user", "user", "identityFile", "stage", "dev", "env", "deploy_path", "var", "www", "html", "env", "branch", "develop", "env", "env_vars", "SYMFONY_ENV", "dev", "env", "env", "dev", "env", "composer_options", "install", "As", "discussed", "over", "e", "mail", "the", "PR", "NUMBER", "When", "I", "run", "dep", "self", "update", "I", "get", "Herrera", "Json", "Exception", "FileException", "file_get_contents", "LINK", "fail", "to", "open", "stream", "HTTP", "request", "fail", "HTTP", "NUMBER", "NUMBER", "Not", "Found", "Hello", "Is", "there", "any", "reason", "to", "reqiure", "PHP", "NUMBER", "besides", "short", "array", "notation", "Are", "you", "going", "to", "implement", "SSH", "Agent", "forwarding", "for", "authentication", "Thanks", "Looks", "like", "that", "src", "Deployer", "NUMBER", "php", "was", "critically", "damaged", "by", "last", "modification", "NUMBER", "LINK", "setParameter", "method", "and", "many", "others", "be", "gone", "NUMBER", "Got", "it", "thx", "NUMBER", "Is", "it", "possible", "to", "exclude", "ignore", "file", "paths", "when", "use", "the", "upload", "function", "Thats", "great", "Thank", "you", "NUMBER", "elfet", "Is", "this", "possible", "in", "the", "version", "NUMBER", "now", "Now", "But", "it", "s", "possible", "by", "rsync", "NUMBER", "If", "you", "need", "upload", "function", "you", "can", "implement", "if", "by", "yourself", "as", "plugin", "for", "Deployer", "NUMBER", "Instead", "of", "excluding", "file", "I", "have", "add", "a", "task", "that", "runs", "before", "the", "upload", "task", "NUMBER", "In", "this", "task", "I", "remove", "all", "file", "not", "needed", "for", "upload", "NUMBER", "This", "seems", "to", "work", "pretty", "well", "php", "Delete", "all", "ignored", "file", "before", "uploading", "the", "release", "to", "the", "server", "NUMBER", "task", "customNamespace", "upload", "clean", "function", "assets", "implode", "array_map", "function", "asset", "return", "local_release_path", "asset", "get", "customNamespace_ignored_files", "Run", "with", "rf", "parameter", "so", "we", "can", "clean", "directories", "as", "well", "runLocally", "find", "assets", "exec", "rm", "rf", "dev", "null", "true", "desc", "Remove", "ignored", "file", "and", "php", "before", "your", "upload", "task", "customNamespace", "upload", "clean", "Is", "it", "possible", "to", "deploy", "a", "specific", "tag", "instead", "of", "the", "last", "commit", "on", "master", "Would", "be", "useful", "to", "make", "rollback", "NUMBER", "You", "use", "Symfony", "Component", "Console", "Helper", "DialogHelper", "in", "NUMBER", "Deployer", "release", "NUMBER", "Now", "be", "deprecate", "NUMBER", "LINK", "L", "NUMBER", "php", "The", "Dialog", "class", "provides", "helpers", "to", "interact", "with", "the", "user", "NUMBER", "author", "Fabien", "Potencier", "TAG", "deprecate", "Deprecated", "since", "version", "NUMBER", "to", "be", "remove", "in", "NUMBER", "Use", "the", "question", "helper", "instead", "NUMBER", "class", "DialogHelper", "extend", "InputAwareHelper", "Thanks", "for", "make", "that", "an", "exception", "that", "be", "now", "breaking", "my", "build", "for", "no", "avoidable", "reason", "since", "this", "be", "buried", "in", "some", "deep", "dependency", "This", "change", "makes", "it", "possible", "to", "change", "the", "path", "to", "the", "file", "describing", "the", "deployment", "tasks", "In", "my", "case", "I", "would", "like", "to", "use", "a", "different", "path", "to", "php", "than", "the", "standard", "NUMBER", "So", "I", "had", "a", "property", "phpPath", "to", "the", "server", "configuration", "and", "a", "function", "php", "to", "get", "it", "NUMBER", "I", "also", "rewrite", "tasks", "that", "use", "php", "to", "use", "the", "php", "function", "NUMBER", "src", "Server", "PhpSecLib", "NUMBER", "php", "in", "line", "NUMBER", "set_include_path", "be", "call", "but", "it", "overwrites", "the", "include", "path", "settings", "from", "phpseclib", "itself", "NUMBER", "i", "commented", "out", "that", "line", "of", "code", "and", "now", "everything", "it", "works", "i", "dont", "see", "this", "line", "of", "code", "be", "helpfull", "anyhow", "phpseclib", "set", "s", "its", "include", "path", "via", "composer", "The", "documentation", "mention", "branch", "param", "but", "it", "s", "not", "ready", "after", "self", "update", "NUMBER", "Even", "with", "pre", "params", "or", "upgrade", "params", "NUMBER", "Did", "not", "tried", "with", "composer", "NUMBER", "I", "cloned", "the", "repos", "and", "did", "my", "own", "build", "but", "would", "have", "be", "easier", "with", "composer", "Thanks", "NUMBER", "This", "should", "happen", "sometime", "in", "the", "future", "NUMBER", "Documentation", "here", "LINK", "a", "repository", "lol", "looks", "good", "to", "me", "NUMBER", "Hello", "there", "I", "ve", "downloaded", "deployer", "NUMBER", "phar", "and", "then", "followed", "the", "instructions", "but", "if", "I", "run", "the", "dep", "command", "I", "get", "an", "error", "message", "No", "command", "dep", "find", "I", "ve", "add", "usr", "local", "bin", "dep", "to", "the", "path", "but", "it", "didn", "t", "change", "anything", "NUMBER", "Do", "you", "know", "what", "I", "ve", "miss", "please", "It", "was", "already", "in", "home", "xxx", "Documents", "google", "cloud", "sdk", "bin", "usr", "local", "sbin", "usr", "local", "bin", "usr", "sbin", "usr", "bin", "sbin", "bin", "usr", "games", "usr", "local", "games", "usr", "local", "bin", "dep", "home", "xxx", "NUMBER", "rvm", "bin", "home", "corentin", "NUMBER", "rvm", "bin", "Stil", "have", "the", "problem", "make", "sure", "you", "have", "the", "dep", "file", "in", "usr", "local", "bin", "and", "that", "be", "executable", "chmod", "x", "usr", "local", "bin", "dep", "Hello", "Can", "I", "execute", "some", "tasks", "before", "and", "after", "create", "build", "for", "deploying", "remove", "build", "Thanks", "php", "before", "deploy", "start", "function", "your", "code", "before", "deploy", "starts", "after", "deploy", "end", "function", "your", "code", "after", "deploy", "ends", "Sorry", "I", "forgot", "write", "about", "server", "I", "want", "execute", "before", "and", "after", "tasks", "on", "local", "server", "NUMBER", "for", "example", "local", "start", "server", "NUMBER", "deploy", "start", "server", "NUMBER", "deploy", "start", "server", "NUMBER", "deploy", "start", "NUMBER", "server", "NUMBER", "deploy", "end", "server", "NUMBER", "deploy", "end", "server", "NUMBER", "deploy", "end", "local", "end", "Thanks", "you", "can", "use", "the", "runLocally", "LINK", "function", "hmm", "bun", "it", "s", "doubtful", "decision", "NUMBER", "I", "want", "run", "full", "task", "with", "all", "function", "copy", "run", "cd", "etc", "NUMBER", "And", "I", "want", "run", "one", "time", "before", "all", "deploying", "and", "one", "time", "after", "NUMBER", "I", "don", "t", "know", "if", "that", "s", "possible", "maybe", "elfet", "will", "shed", "some", "light", "on", "this", "NUMBER", "Although", "having", "deployments", "made", "on", "a", "one", "by", "one", "server", "makes", "some", "sense", "especially", "when", "deployment", "be", "parallelized", "NUMBER", "I", "want", "be", "ensured", "what", "all", "servers", "have", "on", "build", "all", "dependencies", "all", "compiled", "file", "etc", "NUMBER", "if", "you", "execute", "task", "create", "build", "on", "all", "servers", "you", "can", "t", "be", "ensure", "what", "you", "have", "the", "one", "build", "on", "all", "servers", "Thanks", "The", "current", "default", "parameter", "for", "passphrase", "be", "an", "empty", "string", "the", "check", "to", "know", "wether", "or", "not", "to", "prompt", "the", "user", "for", "an", "actual", "passphrase", "doesn", "t", "work", "NUMBER", "Currently", "deployer", "deploys", "in", "a", "synchronous", "manner", "this", "works", "well", "with", "few", "servers", "but", "when", "the", "more", "servers", "we", "be", "deploying", "the", "longer", "it", "takes", "NUMBER", "Running", "every", "task", "in", "every", "server", "asynchronously", "will", "make", "this", "much", "faster", "NUMBER", "Initial", "experiments", "gave", "me", "a", "NUMBER", "x", "speed", "up", "NUMBER", "seconds", "compared", "to", "NUMBER", "seconds", "with", "only", "two", "servers", "this", "speed", "up", "increases", "with", "every", "server", "add", "NUMBER", "Issues", "I", "don", "t", "think", "it", "be", "even", "possible", "to", "install", "dependencies", "on", "windows", "because", "it", "depends", "on", "spork", "LINK", "which", "requires", "ext", "pcntl", "and", "ext", "posix", "NUMBER", "This", "issue", "be", "easily", "solve", "no", "async", "on", "windows", "Tasks", "which", "require", "user", "input", "be", "also", "run", "asynchronously", "which", "makes", "the", "cli", "interface", "unintuitive", "NUMBER", "This", "can", "also", "be", "solve", "NUMBER", "Other", "issue", "that", "I", "m", "not", "aware", "of", "I", "was", "looking", "into", "the", "deploy", "branch", "but", "couldn", "t", "find", "anything", "on", "it", "have", "you", "start", "development", "Closing", "because", "its", "already", "implement", "Currently", "there", "be", "no", "way", "for", "tasks", "to", "display", "an", "error", "without", "halting", "the", "whole", "deployment", "process", "NUMBER", "Such", "behaviour", "be", "sometimes", "needed", "NUMBER", "For", "example", "on", "the", "newrelic", "recipe", "if", "the", "task", "fail", "it", "should", "display", "an", "error", "but", "not", "really", "halt", "the", "whole", "deployment", "NUMBER", "The", "case", "for", "newrelic", "be", "a", "use", "case", "After", "the", "deployment", "ends", "you", "can", "notify", "a", "third", "party", "that", "it", "was", "ok", "but", "if", "the", "notification", "itself", "fail", "deployer", "should", "let", "the", "user", "know", "instead", "of", "showing", "the", "checkmark", "NUMBER", "Maybe", "instead", "of", "returning", "false", "one", "could", "raise", "an", "exception", "a", "specific", "one", "like", "NonFatalException", "with", "a", "message", "that", "can", "be", "display", "to", "the", "user", "in", "the", "end", "or", "something", "NUMBER", "What", "you", "think", "To", "avoid", "rollback", "i", "thought", "it", "would", "be", "nice", "if", "writable", "dirs", "would", "be", "automatically", "created", "if", "not", "find", "NUMBER", "Chris", "On", "dev", "server", "i", "be", "use", "the", "phar", "version", "dep", "self", "update", "should", "update", "it", "to", "last", "push", "cause", "it", "say", "be", "already", "up", "to", "date", "Ok", "I", "really", "like", "your", "tool", "start", "use", "it", "NUMBER", "days", "ago", "and", "i", "m", "really", "loving", "it", "yet", "i", "ll", "keep", "an", "eye", "on", "you", "and", "i", "d", "like", "to", "help", "as", "much", "as", "i", "can", "Thanks", "for", "answer", "Chris", "LINK", "L", "NUMBER", "javascript", "file", "src", "function", "NUMBER", "php", "Why", "do", "you", "want", "to", "disable", "this", "Without", "it", "you", "would", "have", "to", "require", "it", "in", "your", "deploy", "NUMBER", "php", "NUMBER", "Thanks", "BTW", "that", "about", "move", "function", "to", "namespace", "Or", "wait", "when", "PHP", "NUMBER", "become", "more", "popular", "I", "think", "it", "be", "too", "early", "to", "use", "this", "feature", "NUMBER", "For", "example", "the", "current", "ubuntu", "has", "only", "PHP", "NUMBER", "in", "official", "repositories", "Of", "course", "it", "s", "a", "great", "idea", "My", "thoughts", "on", "it", "Release", "NUMBER", "x", "for", "PHP", "NUMBER", "this", "allow", "legacy", "applications", "which", "already", "use", "deployer", "to", "keep", "use", "it", "NUMBER", "Release", "NUMBER", "x", "for", "PHP", "NUMBER", "for", "new", "features", "projects", "Why", "be", "you", "proposing", "to", "increment", "PHP", "version", "be", "there", "any", "feature", "you", "want", "to", "use", "Regarding", "Symfony", "Fabien", "Potencier", "write", "about", "Symfony", "NUMBER", "Roadmap", "LINK", "NUMBER", "NUMBER", "the", "roadmap", "and", "chose", "PHP", "NUMBER", "based", "on", "a", "survey", "NUMBER", "Mind", "you", "that", "Symfony", "NUMBER", "will", "only", "be", "release", "Nov", "NUMBER", "I", "m", "not", "saying", "that", "deployer", "should", "do", "the", "same", "it", "s", "just", "interesting", "to", "see", "other", "points", "of", "view", "NUMBER", "gordalina", "do", "you", "agree", "with", "these", "LINK", "version", "NUMBER", "php", "NUMBER", "jun", "NUMBER", "end", "of", "official", "support", "of", "php", "NUMBER", "and", "will", "only", "security", "support", "next", "year", "DropSQL", "I", "agree", "but", "we", "also", "know", "that", "a", "significant", "amount", "of", "people", "do", "not", "care", "for", "that", "and", "a", "tool", "library", "should", "be", "compatible", "NUMBER", "see", "LINK", "php", "NUMBER", "all", "it", "was", "the", "best", "information", "I", "could", "find", "about", "php", "usage", "elfet", "by", "no", "means", "upgrade", "to", "php", "NUMBER", "but", "make", "a", "release", "for", "php", "NUMBER", "before", "you", "do", "NUMBER", "patie", "iMac", "NUMBER", "www", "clients", "xxx", "project", "dep", "deploy", "Preparing", "server", "for", "deploy", "NUMBER", "Password", "If", "you", "want", "to", "rollback", "run", "rollback", "task", "RuntimeException", "Illegal", "variable", "name", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "vendor", "elfet", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Ssh", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Ssh", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Runner", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "runSeries", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "dry", "run", "server", "NUMBER", "stage", "in", "deploy", "i", "have", "only", "this", "but", "tried", "also", "other", "ways", "TAG", "path", "home", "html", "project", "public_html", "user", "patie", "set", "repository", "git", "bitbucket", "NUMBER", "org", "xxx", "project", "NUMBER", "git", "ip", "path", "and", "repository", "be", "of", "course", "other", "in", "my", "deploy", "NUMBER", "php", "there", "be", "other", "problem", "im", "on", "latest", "OSX", "PHP", "NUMBER", "cli", "any", "idea", "where", "be", "problem", "patie", "iMac", "NUMBER", "www", "clients", "xxx", "project", "dep", "deploy", "vvv", "Run", "task", "deploy", "start", "on", "server", "main", "Preparing", "server", "for", "deploy", "Run", "task", "deploy", "prepare", "on", "server", "main", "NUMBER", "if", "d", "echo", "home", "html", "project", "public_html", "then", "mkdir", "home", "html", "project", "public_html", "fi", "Password", "Run", "task", "deploy", "rollback", "on", "server", "main", "If", "you", "want", "to", "rollback", "run", "rollback", "task", "RuntimeException", "Illegal", "variable", "name", "NUMBER", "Exception", "trace", "at", "phar", "usr", "local", "bin", "dep", "vendor", "elfet", "php", "ssh", "src", "Ssh", "Exec", "NUMBER", "php", "NUMBER", "Ssh", "Exec", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Server", "Ssh", "NUMBER", "php", "NUMBER", "Deployer", "Server", "Ssh", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "function", "NUMBER", "php", "NUMBER", "run", "at", "phar", "usr", "local", "bin", "dep", "recipe", "common", "NUMBER", "php", "NUMBER", "closure", "at", "n", "a", "n", "a", "call_user_func", "at", "phar", "usr", "local", "bin", "dep", "src", "Task", "Runner", "NUMBER", "php", "NUMBER", "Deployer", "Task", "Runner", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "runSeries", "at", "phar", "usr", "local", "bin", "dep", "src", "Console", "RunTaskCommand", "NUMBER", "php", "NUMBER", "Deployer", "Console", "RunTaskCommand", "execute", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Command", "Command", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Command", "Command", "run", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRunCommand", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "doRun", "at", "phar", "usr", "local", "bin", "dep", "vendor", "symfony", "console", "Symfony", "Component", "Console", "Application", "NUMBER", "php", "NUMBER", "Symfony", "Component", "Console", "Application", "run", "at", "phar", "usr", "local", "bin", "dep", "src", "Deployer", "NUMBER", "php", "NUMBER", "Deployer", "Deployer", "run", "at", "phar", "usr", "local", "bin", "dep", "bin", "dep", "NUMBER", "require", "at", "usr", "local", "bin", "dep", "NUMBER", "deploy", "dry", "run", "server", "NUMBER", "stage", "Moved", "to", "LINK", "Assetic", "dump", "will", "warmup", "cache", "if", "it", "hasn", "t", "be", "warmed", "so", "having", "cache", "warmup", "after", "ascetic", "dump", "be", "redundant", "By", "ban", "you", "mean", "its", "something", "you", "dont", "want", "To", "run", "symfony", "console", "commands", "without", "needing", "in", "only", "a", "command", "NUMBER", "Also", "makes", "it", "useful", "when", "auto", "detecting", "the", "correct", "path", "to", "the", "console", "file", "i", "m", "add", "that", "functionality", "right", "now", "NUMBER", "elfet", "have", "a", "read", "at", "the", "function", "and", "let", "me", "know", "what", "you", "think", "Yeah", "I", "don", "t", "feel", "much", "comfortable", "add", "a", "new", "function", "especially", "because", "it", "pollutes", "the", "global", "scope", "and", "introduces", "a", "new", "way", "of", "add", "functionality", "NUMBER", "Do", "you", "have", "any", "other", "way", "where", "this", "can", "be", "accomplished", "This", "might", "be", "interesting", "to", "move", "to", "its", "own", "recipe", "like", "symfony", "extra", "NUMBER", "Should", "I", "wait", "for", "the", "new", "environment", "concept", "As", "I", "understand", "elfet", "be", "preparing", "for", "a", "v", "NUMBER", "relase", "which", "be", "great", "but", "the", "timing", "be", "unknown", "NUMBER", "I", "also", "think", "that", "having", "a", "more", "more", "stable", "release", "schedule", "would", "allow", "new", "features", "to", "become", "available", "to", "the", "general", "public", "NUMBER", "If", "we", "take", "the", "Symfony", "Release", "Process", "LINK", "rationale", "especially", "the", "rationale", "although", "it", "be", "overkill", "for", "this", "project", "we", "can", "reuse", "some", "parts", "of", "it", "NUMBER", "For", "example", "Major", "release", "can", "be", "release", "at", "any", "random", "time", "especially", "because", "of", "having", "BC", "breaks", "Minor", "release", "be", "good", "for", "release", "new", "features", "e", "NUMBER", "g", "NUMBER", "which", "could", "happen", "on", "a", "monthly", "basis", "Patch", "release", "be", "awesome", "to", "fix", "bug", "NUMBER", "Also", "considering", "other", "console", "based", "applications", "such", "as", "composer", "although", "it", "has", "some", "beta", "release", "when", "update", "composer", "it", "always", "update", "itself", "to", "the", "latest", "master", "version", "which", "be", "perfect", "to", "roll", "out", "features", "NUMBER", "I", "propose", "we", "start", "a", "discussion", "about", "this", "NUMBER", "that", "solution", "works", "if", "you", "have", "deployer", "set", "as", "a", "dependency", "but", "for", "a", "console", "application", "not", "so", "much", "NUMBER", "Symfony", "NUMBER", "console", "command", "location", "be", "bin", "console", "and", "not", "app", "console", "Add", "elfet", "deployer", "NUMBER", "dev", "to", "composer", "in", "order", "to", "fetch", "master", "branch", "NUMBER", "This", "also", "would", "remove", "a", "warning", "when", "requiring", "dev", "master", "and", "validating", "the", "composer", "NUMBER", "json", "console", "composer", "validate", "NUMBER", "composer", "NUMBER", "json", "be", "valid", "but", "with", "a", "few", "warnings", "See", "LINK", "schema", "NUMBER", "md", "for", "details", "on", "the", "schema", "require", "NUMBER", "elfet", "deployer", "unbound", "version", "constraints", "dev", "master", "dev", "should", "be", "avoided", "Same", "purpose", "as", "LINK", "but", "more", "generic", "BTW", "be", "there", "a", "recipe", "documentation", "somewhere", "that", "lists", "configuration", "variables", "that", "be", "available", "THANKS", "Configuration", "php", "deploy", "NUMBER", "php", "TAG", "asd", "NUMBER", "app_name", "your", "app", "name", "or", "application_id", "NUMBER", "Configuration", "Use", "it", "by", "add", "set", "ignore_platform_reqs", "true", "inside", "deploy", "NUMBER", "php", "Usage", "See", "LINK", "tl", "dr", "It", "s", "usefull", "to", "ignore", "platform", "requirements", "when", "you", "use", "container", "with", "volumes", "or", "want", "to", "install", "them", "with", "hhvm", "Ok", "Please", "provide", "current", "options", "without", "ignore", "platform", "reqs", "as", "default", "options", "NUMBER", "It", "s", "quite", "convenient", "in", "order", "not", "to", "miss", "one", "Thanks", "deployer", "NUMBER", "org", "will", "be", "better", "than", "deployer", "NUMBER", "in", "Issue", "NUMBER", "Will", "accept", "relative", "or", "absolute", "paths", "NUMBER", "Example", "usage", "php", "bin", "deploy", "file", "home", "alex", "sites", "deploy", "scripts", "wordpress", "NUMBER", "php", "deploy", "php", "bin", "deploy", "file", "deploy", "scripts", "anothersite", "NUMBER", "php", "deploy", "php", "bin", "deploy", "fdeploy", "scripts", "wordpress", "NUMBER", "php", "deploy", "Hold", "off", "on", "the", "merge", "I", "find", "a", "bug", "NUMBER", "from", "LINK", "realpath", "returns", "FALSE", "on", "failure", "e", "NUMBER", "g", "NUMBER", "if", "the", "file", "do", "not", "exist", "NUMBER", "So", "if", "we", "ve", "already", "determined", "the", "realpath", "call", "has", "fail", "it", "saves", "us", "from", "doing", "any", "other", "checks", "both", "variants", "php", "is_file", "file", "is_readable", "file", "and", "php", "file", "false", "is_file", "file", "is_readable", "file", "have", "same", "behaviors", "is_file", "and", "is_readable", "returns", "false", "if", "have", "parameter", "false", "Your", "condition", "var", "false", "be", "superfluous", "NUMBER", "If", "you", "have", "another", "opinion", "say", "please", "Check", "this", "line", "deployFile", "realpath", "optionFile", "I", "m", "use", "realpath", "in", "order", "to", "create", "an", "absolute", "path", "to", "the", "file", "no", "matter", "if", "you", "give", "it", "a", "relative", "path", "file", "scripts", "site", "NUMBER", "php", "or", "an", "absolute", "one", "file", "var", "deploy", "site", "NUMBER", "php", "NUMBER", "Realpath", "will", "return", "false", "if", "the", "file", "do", "not", "exist", "or", "if", "the", "function", "fail", "for", "any", "other", "reason", "NUMBER", "Therefore", "by", "doing", "a", "simple", "check", "to", "see", "if", "deployFile", "be", "already", "false", "I", "save", "from", "having", "to", "hit", "the", "filesystem", "again", "by", "calling", "is_file", "NUMBER", "If", "realpath", "be", "false", "already", "then", "calling", "is_file", "be", "superfluous", "and", "just", "leads", "to", "a", "wasted", "filesystem", "call", "NUMBER", "I", "guess", "it", "s", "a", "matter", "of", "which", "be", "more", "wasteful", "a", "call", "to", "the", "file", "system", "or", "a", "boolean", "comparison", "NUMBER", "Thanks", "AlexStansfield", "I", "understood", "your", "opinion", "it", "s", "a", "small", "optimization", "NUMBER", "But", "I", "think", "will", "be", "better", "don", "t", "use", "small", "optimizations", "and", "have", "more", "cleared", "code", "NUMBER", "Thanks", "Anton", "ok", "I", "will", "remove", "it", "Due", "to", "the", "way", "that", "Symfony", "Component", "Console", "Input", "ArgvInput", "works", "this", "be", "actually", "a", "lot", "harder", "to", "implement", "than", "expected", "NUMBER", "I", "m", "not", "sure", "if", "there", "be", "a", "nice", "way", "without", "creating", "our", "own", "Input", "class", "NUMBER", "The", "reason", "be", "that", "it", "s", "pretty", "strict", "about", "the", "options", "and", "argument", "pass", "to", "it", "NUMBER", "However", "deploy", "NUMBER", "php", "file", "itself", "add", "options", "and", "argument", "NUMBER", "So", "if", "I", "try", "to", "use", "the", "name", "of", "the", "stage", "I", "want", "to", "deploy", "to", "the", "script", "fail", "on", "too", "many", "argument", "as", "it", "s", "not", "imported", "the", "deploy", "NUMBER", "php", "file", "yet", "so", "doesn", "t", "the", "stage", "argument", "hasn", "t", "be", "defined", "NUMBER", "Good", "luck", "The", "SYMFONY_ENV", "variable", "be", "not", "taken", "into", "consideration", "in", "the", "composer", "install", "process", "NUMBER", "With", "export", "yes", "NUMBER", "I", "think", "the", "code", "was", "fine", "as", "it", "was", "because", "it", "althought", "set", "the", "environment", "var", "for", "that", "one", "process", "NUMBER", "But", "as", "it", "s", "not", "your", "actual", "environment", "from", "the", "current", "terminal", "session", "be", "it", "I", "don", "t", "think", "it", "s", "bad", "either", "NUMBER", "hacfi", "I", "m", "agree", "the", "first", "code", "be", "better", "but", "this", "don", "t", "work", "because", "sub", "processes", "commands", "don", "t", "know", "the", "variable", "and", "cache", "clear", "be", "a", "subprocess", "of", "composer", "elfet", "hacfi", "see", "LINK", "elfet", "with", "SYMFONY_ENV", "without", "export", "the", "env", "be", "always", "the", "dev", "environnement", "in", "composer", "subscript", "NUMBER", "So", "by", "exemple", "i", "have", "fixture", "bundle", "in", "composer", "require", "dev", "The", "bundle", "doesn", "t", "install", "in", "vendor", "for", "the", "prod", "environnement", "normal", "But", "in", "appKernel", "the", "fixture", "call", "be", "in", "dev", "environnement", "NUMBER", "As", "the", "SYMFONY_ENV", "variable", "doesn", "t", "live", "in", "the", "composer", "subscripts", "The", "default", "env", "be", "use", "and", "fixture", "try", "to", "be", "loaded", "At", "this", "moment", "a", "bug", "stop", "the", "deploy", "process", "NUMBER", "Trying", "to", "run", "composer", "install", "will", "produce", "this", "error", "message", "Installing", "kherge", "amend", "NUMBER", "Downloading", "connection", "NUMBER", "Could", "not", "fetch", "LINK", "amend", "zipball", "d", "NUMBER", "de", "NUMBER", "b", "NUMBER", "b", "NUMBER", "a", "NUMBER", "f", "NUMBER", "d", "NUMBER", "ddc", "NUMBER", "enter", "your", "GitHub", "credentials", "to", "access", "private", "repos", "The", "credentials", "will", "be", "swapped", "for", "an", "OAuth", "token", "stored", "in", "Users", "nicholasruunu", "NUMBER", "composer", "config", "NUMBER", "json", "your", "password", "will", "not", "be", "stored", "To", "revoke", "access", "to", "this", "token", "you", "can", "visit", "LINK", "Username", "nicholasruunu", "Password", "Downloading", "connection", "NUMBER", "Composer", "Downloader", "TransportException", "The", "LINK", "amend", "zipball", "d", "NUMBER", "de", "NUMBER", "b", "NUMBER", "b", "NUMBER", "a", "NUMBER", "f", "NUMBER", "d", "NUMBER", "ddc", "NUMBER", "file", "could", "not", "be", "downloaded", "HTTP", "NUMBER", "NUMBER", "Not", "Found", "Have", "improved", "writable", "dirs", "functionality", "giving", "a", "few", "options", "acl", "chmod", "and", "chmod_bad", "NUMBER", "I", "also", "fix", "the", "typo", "of", "writeable", "to", "writable", "NUMBER", "Naturally", "this", "could", "mess", "with", "people", "s", "scripts", "but", "as", "this", "be", "a", "development", "version", "it", "should", "be", "possible", "to", "give", "them", "a", "heads", "up", "when", "it", "becomes", "stable", "NUMBER", "In", "my", "case", "I", "have", "different", "ssh", "keys", "on", "my", "deploy", "host", "and", "my", "git", "repository", "NUMBER", "For", "that", "I", "use", "forward_agent", "option", "in", "ruby", "lib", "net", "ssh", "NUMBER", "I", "have", "researched", "that", "and", "unfortunately", "find", "that", "libssh", "NUMBER", "and", "therefore", "pecl_ssh", "NUMBER", "don", "t", "support", "forwarding", "agent", "NUMBER", "Only", "it", "prevents", "me", "to", "use", "deployer", "in", "my", "projects", "NUMBER", "elfet", "Do", "you", "have", "any", "ideas", "how", "to", "bypass", "it", "Hmm", "imho", "uploading", "my", "private", "keys", "on", "server", "be", "bad", "thing", "ForwardAgent", "yes", "yes", "it", "was", "in", "my", "config", "file", "NUMBER", "Libssh", "NUMBER", "has", "unofficial", "patches", "for", "forwarding", "agent", "NUMBER", "Maybe", "it", "will", "appear", "in", "pecl_ssh", "NUMBER", "in", "the", "future", "NUMBER", "elfet", "thank", "you", "NUMBER", "I", "will", "think", "how", "it", "can", "be", "solve", "NUMBER", "jekill", "one", "way", "to", "solve", "it", "be", "by", "use", "deploy", "keys", "NUMBER", "You", "run", "a", "ssh", "keygen", "on", "the", "server", "and", "add", "the", "public", "key", "to", "github", "bitbucket", "gitlab", "NUMBER", "I", "ve", "be", "looking", "into", "agent", "forwarding", "with", "deployer", "NUMBER", "in", "and", "it", "seems", "libssh", "NUMBER", "support", "it", "now", "but", "the", "pecl", "extension", "doesn", "t", "unfortunately", "NUMBER", "Hello", "do", "I", "understand", "it", "right", "that", "at", "the", "moment", "only", "way", "to", "use", "deployer", "be", "the", "manually", "add", "ssh", "keys", "from", "deployment", "servers", "to", "my", "git", "repository", "Was", "this", "issue", "solve", "somehow", "Adding", "two", "useful", "composer", "options", "NUMBER", "composer_copy_vendors", "will", "copy", "the", "vendors", "file", "from", "the", "previous", "release", "before", "run", "a", "composer", "install", "composer_update", "will", "run", "composer", "update", "rather", "than", "composer", "install", "I", "totally", "agree", "but", "it", "s", "a", "feature", "I", "ve", "seen", "people", "use", "in", "capifony", "so", "I", "add", "it", "NUMBER", "I", "wouldn", "t", "use", "it", "myself", "so", "happy", "to", "not", "have", "it", "accepted", "NUMBER", "The", "copy", "vendors", "though", "be", "something", "I", "d", "like", "to", "see", "NUMBER", "I", "can", "remove", "the", "update", "option", "and", "push", "a", "new", "commit", "so", "you", "can", "merge", "the", "copy", "vendors", "feature", "if", "you", "d", "prefer", "NUMBER", "With", "update", "the", "docs", "do", "you", "mean", "the", "README", "NUMBER", "md", "or", "the", "docs", "on", "deployer", "NUMBER", "in", "Also", "regard", "the", "update", "action", "it", "s", "definitely", "bad", "practice", "to", "use", "on", "a", "test", "staging", "or", "production", "server", "NUMBER", "I", "can", "see", "a", "use", "case", "for", "people", "who", "want", "to", "deploy", "to", "a", "development", "server", "and", "might", "want", "the", "latest", "dependencies", "when", "it", "s", "do", "NUMBER", "Anyway", "have", "remove", "it", "now", "NUMBER", "I", "don", "t", "know", "where", "that", "be", "NUMBER", "ok", "find", "it", "I", "just", "be", "trying", "out", "the", "ability", "to", "specify", "a", "different", "branch", "for", "each", "stage", "as", "documented", "here", "LINK", "I", "just", "checked", "out", "the", "master", "branch", "even", "though", "I", "configured", "the", "develop", "branch", "NUMBER", "It", "doesn", "t", "seem", "to", "do", "anything", "with", "the", "branch", "option", "you", "set", "in", "the", "deployer", "NUMBER", "I", "search", "for", "term", "branch", "and", "get", "no", "results", "NUMBER", "Is", "this", "something", "that", "has", "not", "yet", "be", "implement", "AlexStansfield", "I", "run", "into", "this", "problem", "and", "I", "solve", "it", "by", "overwriting", "the", "task", "call", "update_code", "with", "the", "following", "code", "php", "task", "deploy", "update_code", "function", "InputInterface", "input", "basePath", "config", "getPath", "repository", "get", "repository", "false", "if", "false", "repository", "throw", "new", "RuntimeException", "You", "have", "to", "specify", "repository", "NUMBER", "release", "date", "Ymd", "NUMBER", "substr", "string", "time", "NUMBER", "releasePath", "basePath", "release", "release", "branch", "input", "getOption", "branch", "env", "setReleasePath", "releasePath", "env", "set", "is_new_release", "true", "run", "git", "clone", "recursive", "q", "repository", "releasePath", "b", "NUMBER", "branch", "run", "chmod", "R", "g", "w", "releasePath", "desc", "Updating", "code", "from", "branch", "option", "branch", "b", "Set", "the", "deployed", "branch", "master", "Hey", "thanks", "NUMBER", "I", "solve", "it", "pretty", "much", "the", "same", "way", "a", "few", "hours", "ago", "NUMBER", "just", "back", "from", "dinner", "and", "about", "to", "do", "a", "pull", "request", "NUMBER", "Ok", "I", "ve", "not", "be", "in", "the", "position", "of", "wanting", "to", "make", "a", "pull", "request", "when", "I", "already", "have", "an", "open", "one", "before", "NUMBER", "So", "my", "commit", "ended", "up", "on", "the", "pull", "request", "above", "NUMBER", "Just", "seeing", "if", "I", "can", "work", "out", "how", "to", "separate", "them", "out", "NUMBER", "Got", "it", "see", "above", "Removed", "two", "unnecessary", "config", "fetches", "from", "the", "writeable_dirs", "task", "NUMBER", "Also", "fix", "some", "places", "in", "symfony", "recipe", "where", "it", "s", "setting", "default", "values", "which", "could", "overwrite", "a", "user", "s", "own", "configuration", "e", "NUMBER", "g", "NUMBER", "if", "they", "specifically", "set", "no", "writable", "dirs", "or", "assets", "NUMBER", "Just", "realised", "the", "way", "the", "get", "checks", "to", "see", "if", "it", "should", "use", "the", "defaults", "that", "if", "they", "set", "an", "empty", "array", "for", "the", "writeable", "dirs", "or", "assets", "that", "won", "t", "get", "overwritten", "by", "the", "defaults", "in", "the", "get", "call", "NUMBER", "However", "I", "think", "putting", "the", "defaults", "in", "the", "get", "seems", "redundant", "as", "they", "be", "be", "set", "in", "the", "recipe", "anyway", "NUMBER", "Sorry", "about", "the", "extra", "commit", "wasn", "t", "sure", "how", "to", "separate", "out", "the", "pull", "request", "NUMBER", "Sorted", "it", "out", "now", "NUMBER", "So", "I", "guess", "the", "pull", "request", "was", "really", "aimed", "at", "version", "NUMBER", "x", "as", "we", "re", "looking", "for", "a", "replacement", "to", "capifony", "ASAP", "so", "not", "sure", "if", "this", "pull", "request", "be", "good", "for", "that", "NUMBER", "Should", "I", "make", "any", "further", "pull", "request", "against", "branch", "NUMBER", "x", "How", "stable", "will", "master", "be", "I", "m", "add", "features", "like", "branch", "and", "copy_vendors", "because", "I", "need", "them", "now", "NUMBER", "But", "if", "master", "be", "going", "to", "become", "unstable", "in", "the", "near", "future", "as", "you", "rewrite", "core", "parts", "of", "the", "deployer", "I", "d", "rather", "use", "NUMBER", "x", "Just", "a", "question", "why", "Deployer", "do", "a", "non", "atomic", "swap", "with", "rm", "then", "ln", "s", "instead", "of", "creating", "a", "temp", "link", "and", "then", "doing", "mv", "T", "See", "LINK", "deploys", "at", "etsy", "Thanks", "Great", "Can", "you", "push", "the", "v", "NUMBER", "branch", "as", "develop", "on", "Github", "Or", "be", "it", "too", "early", "Do", "you", "have", "an", "ETA", "BTW", "your", "package", "be", "so", "intuitive", "I", "managed", "deploying", "an", "app", "with", "atomic", "swapping", "in", "like", "NUMBER", "minutes", "Estimated", "Time", "of", "Arrival", "NUMBER", "If", "you", "have", "one", "On", "Wed", "Oct", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Anton", "notifications", "github", "NUMBER", "com", "write", "It", "be", "too", "early", "for", "v", "NUMBER", "to", "publish", "NUMBER", "Will", "try", "to", "finish", "first", "parts", "as", "soon", "as", "possible", "NUMBER", "A", "little", "busy", "on", "main", "work", "NUMBER", "What", "be", "ETA", "NUMBER", "\u00ee\u00ea\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Mattia", "Trapani", "notifications", "github", "NUMBER", "com", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Great", "Can", "you", "push", "the", "v", "NUMBER", "branch", "as", "develop", "on", "Github", "Or", "be", "it", "too", "early", "Do", "you", "have", "an", "ETA", "BTW", "your", "package", "be", "so", "intuitive", "I", "managed", "deploying", "an", "app", "with", "atomic", "swapping", "in", "like", "NUMBER", "minutes", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "And", "you", "be", "doing", "a", "great", "job", "Thanks", "Ping", "me", "if", "I", "can", "help", "Il", "mercoled\u00ec", "NUMBER", "ottobre", "NUMBER", "Anton", "notifications", "github", "NUMBER", "com", "ha", "scritto", "Noup", "NUMBER", "I", "m", "work", "on", "this", "at", "my", "free", "time", "NUMBER", "NUMBER", "\u043e\u043a\u0442", "NUMBER", "NUMBER", "\u0433", "NUMBER", "\u0432", "NUMBER", "NUMBER", "Mattia", "Trapani", "TAG", "TAG", "\u043d\u0430\u043f\u0438\u0441\u0430\u043b", "\u0430", "Estimated", "Time", "of", "Arrival", "NUMBER", "If", "you", "have", "one", "On", "Wed", "Oct", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Anton", "TAG", "TAG", "write", "It", "be", "too", "early", "for", "v", "NUMBER", "to", "publish", "NUMBER", "Will", "try", "to", "finish", "first", "parts", "as", "soon", "as", "possible", "NUMBER", "A", "little", "busy", "on", "main", "work", "NUMBER", "What", "be", "ETA", "NUMBER", "\u00ee\u00ea\u00f2", "NUMBER", "NUMBER", "\u00e3", "NUMBER", "\u00e2", "NUMBER", "NUMBER", "Mattia", "Trapani", "TAG", "TAG", "\u00ed\u00e0\u00ef\u00e8\u00f1\u00e0\u00eb", "\u00e0", "Great", "Can", "you", "push", "the", "v", "NUMBER", "branch", "as", "develop", "on", "Github", "Or", "be", "it", "too", "early", "Do", "you", "have", "an", "ETA", "BTW", "your", "package", "be", "so", "intuitive", "I", "managed", "deploying", "an", "app", "with", "atomic", "swapping", "in", "like", "NUMBER", "minutes", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Hello", "I", "do", "the", "following", "task", "php", "task", "git", "update", "function", "run", "git", "fetch", "run", "git", "checkout", "master", "dev", "run", "git", "pull", "origin", "Then", "I", "run", "the", "task", "on", "console", "win", "NUMBER", "powershell", "NUMBER", "I", "ve", "get", "the", "following", "message", "under", "the", "console", "If", "you", "want", "to", "rollback", "run", "rollback", "task", "RuntimeException", "Switched", "to", "branch", "master", "dev", "git", "update", "dry", "run", "server", "NUMBER", "stage", "I", "checked", "the", "the", "server", "and", "it", "was", "run", "correctly", "NUMBER", "Please", "let", "me", "know", "if", "it", "be", "a", "bug", "or", "somethings", "Rgs", "Cheers", "Phuc", "Thx", "for", "your", "reply", "The", "whole", "deploy", "NUMBER", "php", "file", "php", "server", "local", "NUMBER", "NUMBER", "path", "root", "user", "root", "abc", "NUMBER", "task", "testit", "function", "date", "new", "DateTime", "run", "pwd", "run", "mkdir", "test", "NUMBER", "date", "getTimestamp", "desc", "Test", "it", "task", "git", "update", "function", "run", "git", "fetch", "run", "git", "checkout", "master", "dev", "run", "git", "pull", "origin", "Please", "let", "me", "know", "Rgs", "Phuc", "Indeed", "testit", "be", "work", "The", "git", "update", "task", "be", "work", "but", "it", "show", "up", "the", "RunTimeExecution", "as", "in", "my", "first", "comment", "I", "be", "also", "get", "Runtime", "exception", "when", "run", "a", "simple", "git", "task", "NUMBER", "Update", "Code", "Task", "task", "git", "function", "run", "git", "pull", "desc", "Updating", "code", "from", "git", "repository", "Group", "Tasks", "task", "deploy", "git", "This", "gives", "a", "Runtime", "Exception", "From", "repo", "url", "change", "by", "me", "here", "abed", "NUMBER", "a", "NUMBER", "cc", "NUMBER", "ddef", "master", "origin", "master", "I", "m", "trying", "to", "deploy", "use", "a", "private", "Bitbucket", "repository", "NUMBER", "I", "ve", "set", "Git", "access", "via", "SSH", "as", "instructed", "at", "Bitbucket", "LINK", "up", "SSH", "for", "Git", "When", "I", "try", "to", "deploy", "it", "gives", "me", "RuntimeException", "Permission", "denied", "publickey", "NUMBER", "fatal", "Could", "not", "read", "from", "remote", "repository", "NUMBER", "Please", "make", "sure", "you", "have", "the", "correct", "access", "rights", "and", "the", "repository", "exists", "NUMBER", "Which", "means", "it", "connects", "succesfully", "to", "the", "server", "but", "it", "cannot", "access", "the", "remote", "repo", "NUMBER", "It", "s", "weird", "because", "I", "try", "to", "clone", "my", "repo", "manually", "and", "it", "works", "fine", "NUMBER", "I", "have", "tried", "and", "it", "works", "NUMBER", "Note", "that", "the", "repository", "be", "be", "cloned", "via", "the", "SSH", "repo", "URL", "NUMBER", "I", "set", "up", "the", "SSH", "key", "as", "it", "said", "in", "the", "Bitbucket", "guide", "so", "it", "doesn", "t", "ask", "me", "for", "a", "password", "everytime", "I", "clone", "NUMBER", "Somehow", "deployer", "isn", "t", "use", "that", "ssh", "key", "It", "s", "weird", "because", "I", "m", "logging", "as", "the", "same", "user", "in", "my", "VPS", "NUMBER", "ssh", "T", "git", "bitbucket", "NUMBER", "org", "gives", "me", "logged", "in", "as", "glend_gjermeni", "NUMBER", "You", "can", "use", "git", "or", "hg", "to", "connect", "to", "Bitbucket", "NUMBER", "Shell", "access", "be", "disabled", "NUMBER", "which", "means", "everything", "be", "good", "to", "clone", "a", "repo", "NUMBER", "TAG", "path", "home", "glend", "public_html", "xxxx", "NUMBER", "glend", "NUMBER", "me", "Define", "base", "path", "to", "d", "user", "glend", "Define", "SSH", "user", "name", "and", "password", "NUMBER", "You", "can", "skip", "password", "and", "it", "will", "be", "asked", "Also", "you", "can", "connect", "to", "server", "SSH", "via", "publ", "Specify", "repository", "from", "which", "to", "download", "your", "projects", "code", "NUMBER", "Server", "has", "to", "be", "able", "clone", "your", "project", "from", "this", "repository", "NUMBER", "set", "repository", "git", "bitbucket", "NUMBER", "org", "skoolidevelopment", "xxxx", "NUMBER", "git", "If", "I", "m", "not", "mistaken", "those", "keys", "be", "for", "accessing", "the", "server", "not", "th", "erepository", "itself", "NUMBER", "Unfortunately", "I", "don", "t", "have", "the", "keys", "and", "they", "be", "only", "generate", "on", "droplet", "creation", "at", "DigitalOcean", "Is", "there", "another", "workaround", "I", "ve", "get", "the", "same", "issue", "with", "a", "private", "bit", "bucket", "repo", "NUMBER", "Are", "SSH", "keys", "not", "be", "forwarded", "This", "works", "fine", "with", "Capistrano", "NUMBER", "I", "have", "same", "problem", "and", "my", "solution", "be", "forward", "agent", "feature", "NUMBER", "Please", "try", "it", "NUMBER", "php", "server", "dev", "server", "NUMBER", "NUMBER", "user", "dev", "forwardAgent", "stage", "dev", "env", "deploy_path", "var", "www", "apps", "dev", "env", "branch", "develop", "And", "config", "your", "system", "support", "forward", "agent", "feature", "NUMBER", "Ref", "LINK", "example", "I", "be", "having", "the", "same", "issue", "with", "bitbucket", "keys", "NUMBER", "I", "can", "run", "the", "git", "clone", "command", "that", "be", "run", "by", "deploy", "update_code", "exactly", "when", "do", "manually", "NUMBER", "Anyone", "find", "any", "solutions", "Dear", "willmcl", "Please", "show", "you", "native", "command", "on", "shell", "and", "error", "on", "use", "deployer", "NUMBER", "elfet", "deployer", "now", "has", "a", "Chat", "Room", "on", "Gitter", "elfet", "has", "just", "created", "a", "chat", "room", "NUMBER", "You", "can", "visit", "it", "here", "LINK", "LINK", "_source", "badge", "utm_medium", "badge", "utm_campaign", "pr", "badge", "content", "body_link", "NUMBER", "This", "pull", "request", "add", "this", "badge", "to", "your", "README", "NUMBER", "md", "Gitter", "LINK", "Chat", "NUMBER", "svg", "LINK", "_source", "badge", "utm_medium", "badge", "utm_campaign", "pr", "badge", "utm_content", "body_badge", "Happy", "chatting", "NUMBER", "PS", "Click", "here", "LINK", "out", "if", "you", "would", "prefer", "not", "to", "receive", "automatic", "pull", "request", "from", "Gitter", "in", "future", "NUMBER", "Hey", "there", "I", "m", "still", "trying", "to", "determine", "what", "permissions", "be", "needed", "on", "the", "remote", "server", "for", "use", "deployer", "The", "user", "I", "m", "use", "be", "fo", "and", "the", "user", "Nginx", "uses", "be", "the", "standard", "www", "data", "NUMBER", "When", "everything", "deployed", "checking", "the", "permissions", "it", "s", "fo", "fo", "but", "shouldn", "t", "it", "be", "fo", "www", "data", "I", "ve", "add", "the", "user", "fo", "to", "the", "www", "data", "group", "NUMBER", "I", "just", "get", "a", "forbidden", "error", "when", "trying", "to", "access", "the", "site", "after", "deploying", "NUMBER", "Any", "help", "be", "appreciated", "Thanks", "Hello", "It", "would", "be", "interesting", "to", "be", "able", "to", "specify", "the", "deploy", "file", "as", "an", "argument", "to", "the", "dep", "deploy", "command", "for", "example", "with", "dep", "deploy", "file", "acme", "NUMBER", "php", "NUMBER", "I", "d", "like", "it", "so", "I", "wouldn", "t", "put", "a", "deploy", "NUMBER", "php", "file", "in", "every", "project", "but", "have", "all", "centralized", "NUMBER", "jmsche", "I", "would", "go", "with", "f", "f", "file", "would", "be", "great", "Personally", "I", "d", "say", "dep", "deploy", "file", "acme", "NUMBER", "php", "and", "dep", "deploy", "f", "acme", "NUMBER", "php", "Would", "be", "perfect", "NUMBER", "i", "m", "happy", "to", "add", "this", "as", "I", "could", "do", "with", "the", "feature", "NUMBER", "Will", "it", "be", "file", "and", "f", "NUMBER", "Although", "I", "have", "read", "the", "docs", "twice", "I", "still", "can", "t", "figure", "it", "how", "deploy", "use", "ftp", "server", "could", "your", "please", "help", "in", "that", "I", "install", "deployer", "through", "composer", "composer", "require", "elfet", "deployer", "NUMBER", "after", "that", "I", "call", "vendor", "bin", "dep", "and", "there", "be", "only", "NUMBER", "availible", "options", "help", "list", "self", "update", "When", "call", "dep", "deploy", "Error", "be", "Command", "deploy", "not", "exists", "NUMBER", "Same", "error", "here", "NUMBER", "Also", "have", "the", "deploy", "NUMBER", "php", "script", "NUMBER", "Yes", "but", "it", "won", "t", "allow", "me", "to", "run", "dep", "command", "as", "it", "s", "not", "listed", "as", "available", "command", "NUMBER", "I", "m", "use", "the", "symfony", "recipe", "but", "would", "like", "to", "change", "one", "of", "the", "tasks", "NUMBER", "The", "way", "the", "recipe", "be", "write", "means", "there", "s", "no", "way", "of", "change", "that", "task", "without", "needing", "to", "rewrite", "the", "whole", "recipe", "NUMBER", "I", "have", "a", "slightly", "different", "custom", "setup", "so", "for", "me", "it", "would", "be", "handy", "to", "be", "able", "to", "override", "a", "task", "e", "NUMBER", "g", "NUMBER", "deploy", "update_code", "while", "keep", "all", "other", "tasks", "unchanged", "NUMBER", "Currently", "it", "seems", "that", "you", "can", "add", "function", "to", "a", "task", "but", "that", "wouldn", "t", "be", "ideal", "if", "you", "want", "to", "change", "code", "be", "executed", "in", "a", "task", "NUMBER", "My", "workaround", "has", "be", "to", "duplicate", "the", "recipe", "and", "make", "change", "which", "be", "okay", "but", "isn", "t", "ideal", "because", "it", "may", "not", "be", "in", "keep", "with", "your", "future", "code", "update", "NUMBER", "Doesn", "t", "it", "work", "if", "you", "do", "the", "following", "php", "TAG", "getPath", "repository", "get", "repository", "false", "if", "false", "repository", "throw", "new", "RuntimeException", "You", "have", "to", "specify", "repository", "NUMBER", "release", "date", "Ymd", "NUMBER", "substr", "string", "time", "NUMBER", "releasePath", "basePath", "release", "release", "env", "setReleasePath", "releasePath", "env", "set", "is_new_release", "true", "run", "git", "clone", "recursive", "q", "repository", "releasePath", "run", "chmod", "R", "g", "w", "releasePath", "Add", "more", "stuff", "desc", "Updating", "code", "elfet", "al", "NUMBER", "d", "I", "would", "favor", "task", "task", "you", "wish", "to", "override", "closure", "would", "be", "the", "most", "fluent", "API", "On", "your", "website", "you", "make", "the", "following", "statement", "Deploy", "your", "code", "to", "all", "servers", "you", "want", "it", "support", "deploy", "via", "copy", "or", "via", "VCS", "like", "git", "or", "via", "rsync", "NUMBER", "However", "I", "be", "unable", "to", "see", "how", "exactly", "one", "would", "deploy", "via", "copy", "or", "rsync", "NUMBER", "It", "be", "unclear", "from", "the", "documentation", "or", "from", "the", "source", "code", "NUMBER", "Could", "you", "please", "give", "an", "example", "deploy", "NUMBER", "php", "file", "showing", "how", "this", "can", "be", "do", "Or", "do", "one", "have", "to", "write", "the", "custom", "tasks", "run", "all", "the", "appropriate", "rsync", "or", "copy", "commands", "Any", "examples", "on", "the", "copy", "strategy", "via", "ssh", "elfet", "I", "will", "take", "over", "this", "issue", "already", "have", "work", "code", "for", "deploy", "via", "copy", "only", "need", "to", "refactor", "it", "a", "bit", "NUMBER", "I", "can", "see", "this", "documentation", "I", "ve", "tried", "to", "do", "it", "today", "and", "it", "s", "problematic", "NUMBER", "First", "of", "all", "we", "can", "t", "get", "user", "for", "server", "so", "no", "way", "to", "specify", "user", "for", "remote", "host", "instead", "have", "to", "define", "user", "twice", "NUMBER", "overriding", "update_code", "be", "only", "part", "measure", "if", "You", "want", "to", "have", "proper", "cpy", "rsync", "operations", "NUMBER", "First", "You", "have", "to", "prepare", "local", "release", "path", "then", "override", "vendors", "or", "other", "taks", "that", "installs", "deps", "to", "remote", "and", "finally", "rsync", "everything", "At", "first", "I", "was", "tempted", "to", "use", "upload", "from", "function", "NUMBER", "php", "however", "it", "do", "not", "allow", "You", "to", "set", "some", "fine", "grained", "include", "excludes", "so", "that", "left", "me", "with", "rsync", "run", "locally", "to", "remote", "double", "defining", "user", "NUMBER", "Want", "to", "have", "a", "look", "at", "my", "recipe", "or", "shall", "I", "PR", "that", "stuff", "or", "both", "Sure", "smiling_imp", "Let", "me", "just", "clear", "code", "and", "I", "ll", "PR", "it", "against", "deployphp", "recipes", "I", "ve", "add", "a", "PR", "for", "this", "and", "stripped", "helluva", "lots", "of", "our", "own", "special", "purpose", "code", "NUMBER", "Looks", "ok", "on", "our", "end", "and", "I", "hope", "it", "s", "ok", "for", "others", "smiling_imp", "Now", "that", "rsync", "recipe", "be", "in", "IMO", "nice", "shape", "I", "wanted", "to", "ask", "everybody", "about", "deployment", "strategies", "that", "would", "use", "rsync", "and", "some", "of", "my", "ideas", "that", "would", "speed", "up", "my", "PR", "ed", "recipe", "very", "nicely", "NUMBER", "My", "work", "flow", "So", "my", "work", "flow", "and", "rationale", "for", "it", "be", "cause", "by", "one", "common", "thing", "Most", "of", "our", "customers", "use", "shared", "hosting", "on", "which", "there", "s", "no", "git", "no", "sudo", "capabilities", "installing", "composer", "be", "nightmarish", "and", "you", "can", "completely", "forget", "about", "Node", "based", "stuff", "like", "gulp", "or", "bower", "NUMBER", "After", "get", "Deployer", "to", "work", "nicely", "and", "rsync", "everything", "the", "work", "flow", "I", "m", "enjoying", "right", "now", "be", "this", "Work", "on", "development", "machine", "and", "preview", "suff", "locally", "Rsync", "stuff", "to", "dev", "preview", "hosting", "NUMBER", "that", "be", "handle", "via", "deployer", "NUMBER", "I", "could", "add", "tiny", "tasks", "to", "PR", "if", "anyone", "be", "interested", "in", "rsyncing", "from", "devel", "dir", "instead", "of", "build", "everything", "everytime", "in", "temporary", "dir", "Deploy", "to", "staging", "machine", "where", "we", "can", "run", "everything", "NUMBER", "This", "be", "mostly", "very", "nice", "and", "very", "typical", "deploy", "where", "everything", "be", "on", "remote", "NUMBER", "In", "capifony", "it", "was", "deployment", "scm", "production", "And", "finally", "the", "use", "case", "from", "my", "recipe", "get", "code", "from", "scm", "locally", "temporary", "run", "all", "compile", "like", "things", "locally", "push", "compiled", "release", "and", "dist", "file", "via", "rsync", "to", "production", "NUMBER", "so", "this", "be", "deployment", "production", "One", "thing", "that", "could", "speed", "up", "my", "recipe", "be", "to", "copy", "everything", "from", "last", "release", "instead", "of", "creating", "new", "folder", "and", "then", "rsync", "to", "new", "release", "dir", "NUMBER", "In", "most", "cases", "obviously", "depending", "on", "what", "be", "deployed", "that", "move", "could", "result", "in", "huge", "speedup", "because", "then", "rsync", "could", "work", "like", "rsync", "should", "sending", "only", "change", "NUMBER", "Ok", "to", "sum", "up", "recent", "PRs", "to", "recipes", "repo", "There", "s", "two", "separate", "recipes", "One", "be", "local", "that", "one", "can", "use", "as", "basis", "for", "local", "clone", "strategy", "NUMBER", "For", "simple", "copy", "deploy", "one", "can", "take", "local", "clone", "and", "use", "upload", "function", "copy", "it", "to", "server", "NUMBER", "if", "I", "understood", "correctly", "the", "whole", "point", "of", "copy", "deploy", "Second", "be", "rsync", "that", "allows", "one", "to", "rsync", "anything", "from", "local", "to", "remote", "NUMBER", "Combining", "local", "and", "rsync", "gives", "one", "perfect", "local", "copy", "rsync", "NUMBER", "Those", "two", "recipes", "also", "cover", "shared", "hosting", "woes", "where", "one", "can", "hardly", "do", "anything", "except", "log", "into", "server", "and", "do", "some", "basic", "commands", "NUMBER", "Only", "problem", "I", "see", "it", "s", "hard", "to", "see", "thisconnection", "in", "docs", "NUMBER", "Maybe", "we", "could", "whip", "out", "some", "examples", "What", "be", "the", "current", "state", "of", "the", "copy", "task", "Could", "you", "please", "link", "the", "PR", "you", "mention", "johnny", "bit", "Thanks", "webdevilopers", "look", "into", "deployphp", "recipes", "there", "you", "ll", "find", "rsync", "recipe", "as", "well", "as", "local", "recipe", "NUMBER", "The", "docs", "also", "help", "a", "lot", "NUMBER", "Thanks", "johnny", "bit", "NUMBER", "I", "looked", "at", "LINK", "and", "not", "sure", "if", "this", "solves", "my", "use", "case", "NUMBER", "Instead", "of", "pulling", "a", "git", "clone", "on", "my", "target", "remote", "server", "I", "have", "to", "clone", "it", "locally", "because", "git", "has", "to", "be", "behind", "our", "firewall", "NUMBER", "Magallanes", "MagePHP", "featured", "a", "tar", "archive", "that", "could", "then", "be", "push", "to", "remote", "NUMBER", "It", "would", "then", "be", "unzipped", "and", "handle", "there", "NUMBER", "Do", "you", "think", "this", "be", "covered", "or", "be", "i", "looking", "for", "a", "different", "task", "recipe", "Thanks", "in", "advance", "Well", "no", "NUMBER", "There", "s", "no", "such", "feature", "now", "NUMBER", "My", "approach", "with", "local", "and", "rsync", "recipes", "was", "to", "use", "local", "to", "compile", "suff", "locally", "then", "rsync", "it", "to", "remote", "since", "rsyncing", "be", "waaay", "faster", "than", "uploading", "NUMBER", "GB", "worth", "of", "compiled", "data", "every", "dam", "time", "NUMBER", "Even", "with", "tar", "zip", "archives", "that", "would", "take", "considerable", "amount", "of", "data", "to", "be", "uploaded", "NUMBER", "Currently", "if", "You", "would", "like", "it", "this", "way", "you", "could", "use", "local", "recipe", "to", "compile", "locally", "then", "wirte", "task", "to", "create", "archive", "an", "then", "use", "upload", "function", "out", "of", "deployer", "and", "viola", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "GMT", "NUMBER", "NUMBER", "webDEVILopers", "notifications", "github", "NUMBER", "com", "Thanks", "johnny", "bit", "LINK", "bit", "NUMBER", "I", "looked", "at", "LINK", "and", "not", "sure", "if", "this", "solves", "my", "use", "case", "NUMBER", "Instead", "of", "pulling", "a", "git", "clone", "on", "my", "target", "remote", "server", "I", "have", "to", "clone", "it", "locally", "because", "git", "has", "to", "be", "behind", "our", "firewall", "NUMBER", "Magallanes", "MagePHP", "featured", "a", "tar", "archive", "that", "could", "then", "be", "push", "to", "remote", "NUMBER", "It", "would", "then", "be", "unzipped", "and", "handle", "there", "NUMBER", "Do", "you", "think", "this", "be", "covered", "or", "be", "i", "looking", "for", "a", "different", "task", "recipe", "Thanks", "in", "advance", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Pozdrawiam", "Hubert", "Kowalski", "Thanks", "for", "the", "comment", "johnny", "bit", "Clear", "to", "me", "now", "Maybe", "I", "will", "have", "to", "convince", "my", "guys", "to", "make", "the", "GIT", "accessible", "by", "the", "remote", "anyway", "The", "only", "reason", "i", "did", "local", "and", "rsync", "be", "because", "I", "work", "with", "customers", "that", "have", "hosting", "on", "shared", "environments", "NUMBER", "and", "i", "m", "still", "pondering", "whether", "to", "do", "ftp", "recipe", "or", "not", "since", "i", "also", "have", "cheapasses", "that", "get", "cheapest", "hosting", "without", "even", "ssh", "access", "convince", "guys", "to", "allow", "git", "accessible", "byremote", "since", "git", "can", "authorize", "via", "ssh", "an", "publickeys", "if", "needed", "it", "s", "easier", "that", "way", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "GMT", "NUMBER", "NUMBER", "webDEVILopers", "notifications", "github", "NUMBER", "com", "Thanks", "for", "the", "comment", "johnny", "bit", "LINK", "bit", "Clear", "to", "me", "now", "Maybe", "I", "will", "have", "to", "convince", "my", "guys", "to", "make", "the", "GIT", "accessible", "by", "the", "remote", "anyway", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Pozdrawiam", "Hubert", "Kowalski", "NUMBER", "smile", "Nice", "work", "btw", "NUMBER", "One", "static", "reference", "was", "miss", "change", "to", "access", "non", "static", "variable", "this", "deployer", "stages", "Hi", "Looks", "like", "the", "documentation", "page", "isn", "t", "work", "any", "more", "NUMBER", "The", "navigation", "on", "the", "left", "won", "t", "redirect", "me", "to", "another", "page", "on", "Chrome", "and", "Safari", "on", "Mac", "NUMBER", "It", "links", "for", "example", "to", "examples", "NUMBER", "Hope", "you", "can", "fix", "this", "so", "I", "can", "read", "a", "bit", "more", "about", "this", "awesome", "tool", "Thanks", "Jeroen", "NUMBER", "Nice", "NUMBER", "Seems", "to", "be", "work", "now", "Going", "to", "examples", "NUMBER", "html", "now", "NUMBER", "i", "have", "a", "submodule", "in", "my", "git", "repository", "it", "s", "not", "really", "common", "but", "i", "needed", "a", "recursive", "clone", "NUMBER", "maybe", "a", "nice", "feature", "to", "have", "for", "the", "update_code", "task", "there", "was", "a", "bug", "in", "the", "cleanup", "task", "wrong", "orderning", "of", "the", "release", "directory", "cause", "this", "NUMBER", "now", "there", "be", "a", "new", "function", "didn", "t", "want", "to", "break", "older", "code", "which", "let", "the", "ls", "command", "sort", "by", "time", "One", "more", "enhancement", "php", "runWithParameters", "some", "NUMBER", "sh", "param", "anything_else", "foo", "zoo", "Should", "be", "converted", "to", "php", "run", "some", "NUMBER", "sh", "param", "foo", "anything_else", "zoo", "This", "was", "an", "initial", "idea", "and", "then", "I", "saw", "that", "run", "have", "different", "second", "argument", "NUMBER", "LINK", "L", "NUMBER", "_Raw_", "parameter", "seems", "little", "bit", "hacky", "maybe", "move", "it", "to", "runRemotely", "At", "the", "end", "there", "might", "be", "run", "runLocally", "and", "runRemotely", "and", "all", "of", "them", "could", "have", "parameters", "as", "second", "argument", "NUMBER", "note", "Already", "made", "this", "pull", "request", "as", "it", "hold", "significant", "refactoring", "and", "wanted", "to", "share", "and", "get", "some", "opinions", "Bugs", "x", "dry", "run", "option", "doesn", "t", "share", "env", "NUMBER", "x", "dry", "run", "option", "still", "executes", "runLocally", "upload", "commands", "NUMBER", "LocalInterface", "Local", "Introduction", "of", "a", "Local", "system", "concept", "was", "needed", "to", "be", "able", "to", "replace", "the", "actions", "NUMBER", "Local", "works", "much", "like", "Server", "but", "doesn", "t", "connect", "has", "an", "environment", "or", "config", "NUMBER", "By", "default", "a", "Local", "will", "be", "created", "and", "managed", "by", "the", "Deployer", "instance", "NUMBER", "Environment", "Environment", "doesn", "t", "hold", "the", "current", "environment", "anymore", "instead", "Runner", "has", "its", "current", "ServerInterface", "and", "LocalInterface", "NUMBER", "It", "makes", "more", "sense", "to", "remember", "the", "current", "server", "than", "the", "current", "environment", "NUMBER", "Shortcut", "to", "the", "environment", "still", "exists", "NUMBER", "The", "Environment", "do", "not", "know", "which", "server", "it", "belongs", "to", "it", "be", "just", "a", "container", "for", "parameters", "Runner", "Now", "holds", "the", "current", "server", "and", "local", "NUMBER", "These", "be", "static", "for", "now", "goal", "be", "to", "have", "the", "Deployer", "govern", "these", "NUMBER", "getReleases", "get", "setReleasePath", "moved", "to", "AbstractServer", "As", "the", "Environment", "be", "just", "a", "parameter", "container", "I", "moved", "these", "methods", "to", "AbstractServer", "which", "also", "makes", "more", "sense", "in", "my", "opinion", "NUMBER", "Renamed", "DryRun", "to", "DryRunServer", "with", "the", "introduction", "of", "DryRunLocal", "it", "be", "better", "to", "have", "distinctive", "names", "NUMBER", "function", "Changed", "many", "of", "the", "function", "to", "support", "the", "new", "setup", "but", "retained", "their", "functionality", "NUMBER", "runLocally", "now", "uses", "the", "Local", "instance", "which", "can", "be", "a", "DryRunLocal", "Tests", "As", "there", "be", "hardly", "any", "exist", "test", "for", "these", "functionalities", "it", "will", "take", "some", "time", "to", "get", "everything", "properly", "test", "NUMBER", "elfet", "I", "see", "this", "weekend", "will", "be", "intensive", "for", "you", "Possible", "to", "run", "simple", "shell", "commands", "directly", "without", "creating", "callback", "NUMBER", "php", "task", "name", "shellCommand", "example", "task", "deploy", "cache", "warmup", "php", "releasepath", "app", "console", "assetic", "dump", "env", "env", "no", "debug", "This", "would", "automatically", "provide", "some", "default", "behaviour", "for", "a", "task", "and", "could", "replace", "many", "simple", "tasks", "NUMBER", "The", "current", "functionality", "for", "ReferenceTask", "could", "be", "remove", "to", "an", "alias", "function", "php", "function", "alias", "name", "alias", "Deployer", "tasks", "name", "new", "ReferenceTask", "Deployer", "tasks", "alias", "That", "s", "true", "but", "we", "could", "handle", "this", "by", "checking", "if", "the", "shellCommand", "be", "the", "name", "of", "a", "Task", "if", "it", "be", "the", "alias", "function", "will", "be", "call", "NUMBER", "I", "think", "it", "will", "be", "extremely", "rare", "a", "taskname", "matches", "something", "you", "wish", "to", "execute", "on", "the", "server", "NUMBER", "It", "be", "something", "that", "should", "be", "considered", "if", "you", "want", "to", "have", "Deployer", "configured", "by", "YAML", "file", "NUMBER", "I", "don", "t", "see", "big", "difference", "between", "what", "be", "already", "exists", "PHP", "task", "deploy", "cache", "warmup", "php", "releasepath", "app", "console", "assetic", "dump", "env", "env", "no", "debug", "task", "deploy", "cache", "warmup", "function", "run", "php", "releasepath", "app", "console", "assetic", "dump", "env", "env", "no", "debug", "LINK", "L", "NUMBER", "I", "think", "there", "should", "be", "distinction", "like", "we", "have", "with", "shared_dirs", "shared_files", "NUMBER", "Probably", "more", "intelligent", "way", "be", "to", "get", "rid", "of", "such", "difference", "and", "have", "only", "one", "shared", "option", "witch", "will", "able", "to", "guess", "be", "given", "argument", "a", "file", "or", "a", "directory", "NUMBER", "set", "shared", "app", "logs", "app", "config", "parameters", "NUMBER", "yml", "set", "writable", "app", "logs", "app", "logs", "app", "public", "whatever", "Slash", "at", "the", "end", "treated", "as", "directory", "file", "otherwise", "NUMBER", "Asterisk", "explicitly", "says", "that", "it", "be", "recursive", "NUMBER", "There", "be", "improved", "permissions", "on", "writable", "directories", "from", "PR", "NUMBER", "Perhaps", "this", "solves", "the", "main", "issue", "here", "NUMBER", "The", "use", "of", "many", "static", "variables", "makes", "it", "difficult", "to", "write", "extensive", "test", "for", "complicated", "scenarios", "or", "functionality", "or", "single", "function", "Suggest", "to", "change", "to", "a", "more", "test", "friendly", "function", "NUMBER", "php", "use", "Deployer", "get", "to", "get", "the", "current", "instance", "php", "Deployer", "servers", "Deployer", "get", "servers", "Deployer", "servers", "main", "Deployer", "get", "servers", "main", "classes", "the", "Deployer", "be", "needed", "in", "a", "few", "classes", "so", "injecting", "it", "through", "the", "constructor", "would", "allow", "it", "to", "be", "mocked", "NUMBER", "php", "class", "RunTaskCommand", "extend", "BaseCommand", "NUMBER", "protected", "deployer", "public", "function", "__construct", "name", "Deployer", "deployer", "TaskInterface", "task", "NUMBER", "To", "be", "more", "consistent", "in", "naming", "NUMBER", "Probably", "better", "way", "be", "to", "rename", "this", "issue", "to", "make", "an", "alias", "NUMBER", "For", "me", "two", "letters", "doesn", "t", "give", "anything", "but", "in", "terms", "of", "naming", "it", "be", "more", "clear", "NUMBER", "Composer", "composer", "NUMBER", "json", "PHPUnit", "phpunit", "NUMBER", "xml", "And", "so", "on", "NUMBER", "How", "about", "add", "new", "option", "config", "deploy", "er", "NUMBER", "php", "a", "config", "option", "would", "be", "welcome", "NUMBER", "Issue", "NUMBER", "be", "relate", "to", "config", "option", "as", "well", "NUMBER", "I", "don", "t", "see", "any", "problem", "in", "possible", "usage", "like", "config", "deploy", "er", "NUMBER", "php", "or", "config", "deploy", "er", "NUMBER", "yaml", "What", "do", "you", "think", "about", "to", "create", "default", "deploy", "task", "for", "common", "recipe", "similar", "to", "LINK", "symfony", "recipe", "for", "non", "symfony", "oriented", "projects", "I", "spent", "additional", "time", "to", "figure", "out", "that", "there", "be", "no", "such", "default", "task", "NUMBER", "Also", "tasks", "in", "symfony", "recipe", "should", "be", "prefixed", "accordingly", "like", "symfony", "assets", "and", "so", "on", "NUMBER", "vendor", "bin", "dep", "deploy", "Preparing", "server", "for", "deploy", "NUMBER", "Notice", "No", "compatible", "server", "to", "client", "encryption", "algorithms", "find", "in", "var", "www", "project", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "Updating", "code", "NUMBER", "Creating", "cache", "dir", "NUMBER", "Creating", "symlinks", "for", "shared", "file", "NUMBER", "Make", "writeable", "dirs", "NUMBER", "Normalizing", "asset", "timestamps", "NUMBER", "Installing", "vendors", "NUMBER", "Dumping", "assets", "NUMBER", "Migrating", "database", "NUMBER", "Warming", "up", "cache", "NUMBER", "Creating", "symlink", "to", "release", "NUMBER", "Cleaning", "up", "old", "release", "NUMBER", "Successfully", "deployed", "on", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "Seems", "Deployer", "successfully", "finished", "but", "there", "be", "_nothing_", "on", "destination", "server", "NUMBER", "I", "ve", "install", "ssh", "NUMBER", "extension", "and", "NUMBER", "If", "you", "want", "to", "use", "pem", "file", "switch", "to", "use", "PhpSecLib", "NUMBER", "zap", "Now", "the", "question", "be", "how", "can", "I", "do", "that", "except", "uninstalling", "the", "extension", "Probably", "a", "configuration", "options", "should", "do", "this", "NUMBER", "For", "reference", "LINK", "This", "fix", "doesn", "t", "solve", "notice", "ignorance", "but", "the", "reason", "of", "_No", "compatible", "server", "to", "client", "encryption", "algorithms", "found_", "Are", "you", "going", "to", "pull", "my", "change", "Again", "the", "phpseclib", "raise", "notices", "instead", "of", "error", "and", "therefore", "deployer", "doesn", "t", "fail", "NUMBER", "This", "be", "not", "relate", "with", "include_path", "issue", "NUMBER", "vendor", "bin", "dep", "deploy", "Preparing", "server", "for", "deploy", "NUMBER", "PHP", "Notice", "Cannot", "connect", "to", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "Error", "NUMBER", "Connection", "timed", "out", "in", "nowhere", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "Notice", "Cannot", "connect", "to", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "xx", "NUMBER", "Error", "NUMBER", "Connection", "timed", "out", "in", "nowhere", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "Updating", "code", "NUMBER", "Creating", "symlinks", "for", "shared", "file", "NUMBER", "Make", "writeable", "dirs", "NUMBER", "Installing", "vendors", "NUMBER", "Creating", "symlink", "to", "release", "NUMBER", "Cleaning", "up", "old", "release", "NUMBER", "PHP", "Notice", "Connection", "close", "prematurely", "in", "nowhere", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "Notice", "Connection", "close", "prematurely", "in", "nowhere", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "PHP", "Warning", "fclose", "expects", "parameter", "NUMBER", "to", "be", "resource", "boolean", "given", "in", "nowhere", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "Warning", "fclose", "expects", "parameter", "NUMBER", "to", "be", "resource", "boolean", "given", "in", "nowhere", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "I", "was", "get", "this", "because", "of", "an", "error", "in", "my", "configuration", "NUMBER", "I", "was", "not", "specify", "a", "password", "for", "the", "ssh", "key", "defaults", "the", "password", "to", "a", "blank", "string", "rather", "than", "prompting", "for", "it", "NUMBER", "I", "fix", "this", "by", "setting", "the", "password", "null", "and", "everything", "worked", "again", "NUMBER", "The", "issue", "I", "had", "were", "I", "didn", "t", "get", "an", "error", "message", "telling", "me", "what", "the", "problem", "was", "just", "the", "No", "compatible", "server", "to", "client", "encryption", "algorithms", "notice", "and", "then", "it", "report", "a", "successful", "deployment", "NUMBER", "This", "be", "a", "little", "scary", "in", "my", "opinion", "NUMBER", "We", "want", "to", "use", "deployer", "NUMBER", "in", "but", "be", "stuck", "with", "capifony", "until", "we", "can", "trust", "it", "to", "tell", "us", "the", "correct", "outcome", "NUMBER", "As", "I", "understand", "it", "the", "ssh", "NUMBER", "extension", "doesn", "t", "support", "pem", "file", "which", "we", "currently", "use", "NUMBER", "Also", "the", "advantage", "for", "us", "with", "deployer", "NUMBER", "in", "over", "capifony", "be", "the", "fact", "that", "we", "can", "download", "a", "phar", "file", "and", "all", "we", "need", "be", "a", "php", "interpreter", "to", "deploy", "code", "NUMBER", "Unfortunately", "make", "sure", "everyone", "install", "a", "pecl", "extension", "means", "we", "might", "as", "well", "stick", "with", "capifony", "NUMBER", "Do", "you", "have", "a", "time", "frame", "for", "v", "NUMBER", "and", "will", "you", "be", "continuing", "to", "develop", "v", "NUMBER", "I", "wanted", "to", "add", "a", "copy_vendors", "setting", "we", "use", "it", "in", "capifony", "to", "speed", "up", "deployment", "but", "if", "v", "NUMBER", "development", "has", "ceased", "I", "ll", "just", "wait", "to", "see", "what", "v", "NUMBER", "brings", "NUMBER", "I", "ve", "created", "a", "pull", "request", "that", "should", "stop", "deployer", "from", "continuing", "if", "there", "be", "an", "error", "during", "login", "NUMBER", "NUMBER", "There", "be", "no", "_deployer", "NUMBER", "php_", "in", "root", "NUMBER", "vendor", "bin", "dep", "NUMBER", "Console", "displays", "Deployer", "version", "__VERSION__", "require", "elfet", "deployer", "NUMBER", "Your", "requirements", "could", "not", "be", "resolve", "to", "an", "installable", "set", "of", "package", "NUMBER", "Problem", "NUMBER", "elfet", "php", "ssh", "v", "NUMBER", "requires", "ext", "ssh", "NUMBER", "the", "request", "PHP", "extension", "ssh", "NUMBER", "be", "miss", "from", "your", "system", "NUMBER", "elfet", "deployer", "v", "NUMBER", "requires", "elfet", "php", "ssh", "NUMBER", "satisfiable", "by", "elfet", "php", "ssh", "v", "NUMBER", "NUMBER", "Installation", "request", "for", "elfet", "deployer", "NUMBER", "satisfiable", "by", "elfet", "deployer", "v", "NUMBER", "NUMBER", "Another", "try", "NUMBER", "clone", "master", "repo", "NUMBER", "composer", "install", "Your", "requirements", "could", "not", "be", "resolve", "to", "an", "installable", "set", "of", "package", "NUMBER", "Problem", "NUMBER", "Installation", "request", "for", "elfet", "php", "ssh", "v", "NUMBER", "satisfiable", "by", "elfet", "php", "ssh", "v", "NUMBER", "NUMBER", "elfet", "php", "ssh", "v", "NUMBER", "requires", "ext", "ssh", "NUMBER", "the", "request", "PHP", "extension", "ssh", "NUMBER", "be", "miss", "from", "your", "system", "NUMBER", "This", "commit", "LINK", "ssh", "commit", "NUMBER", "da", "NUMBER", "bdbb", "NUMBER", "be", "NUMBER", "beafdff", "NUMBER", "b", "NUMBER", "a", "NUMBER", "c", "NUMBER", "bd", "NUMBER", "f", "NUMBER", "f", "should", "be", "marked", "as", "release", "to", "able", "require", "it", "as", "stable", "NUMBER", "As", "many", "devs", "do", "I", "m", "searching", "for", "PHP", "replacement", "of", "Capistrano", "to", "be", "more", "consistent", "NUMBER", "Deployer", "seems", "pretty", "thin", "and", "clear", "NUMBER", "BTW", "there", "be", "another", "tool", "LINK", "So", "far", "one", "feature", "from", "it", "seems", "to", "me", "important", "YAML", "configuration", "NUMBER", "Such", "language", "agnostic", "way", "makes", "life", "easier", "to", "non", "php", "dev", "users", "NUMBER", "I", "understand", "that", "Deployer", "API", "be", "very", "light", "to", "be", "use", "directly", "NUMBER", "Also", "it", "s", "not", "documented", "how", "can", "be", "use", "different", "environment", "configs", "NUMBER", "In", "Magallanes", "it", "s", "more", "clear", "NUMBER", "mage", "config", "the", "main", "general", "NUMBER", "yml", "configuration", "file", "be", "stored", "here", "NUMBER", "NUMBER", "mage", "config", "environments", "the", "environments", "configuration", "file", "be", "here", "NUMBER", "NUMBER", "mage", "logs", "logs", "if", "enable", "be", "saved", "there", "NUMBER", "NUMBER", "mage", "tasks", "and", "custom", "tasks", "be", "stored", "over", "here", "NUMBER", "I", "think", "there", "be", "no", "easy", "way", "of", "write", "tasks", "in", "YAML", "but", "at", "least", "configuration", "could", "be", "do", "server", "main", "site", "NUMBER", "com", "path", "home", "user", "site", "NUMBER", "com", "user", "user", "pubKey", "server", "main", "host", "site", "NUMBER", "com", "path", "home", "user", "site", "NUMBER", "com", "user", "user", "pubKey", "NUMBER", "Most", "recent", "change", "stage", "development", "array", "development", "server", "array", "branch", "develop", "true", "stage", "development", "server", "dev", "server", "options", "branch", "develop", "Tasks", "php", "tasks", "name", "deploy", "type", "group", "tasks", "deploy", "start", "deploy", "upload_code", "deploy", "end", "before", "after", "name", "deploy", "prod", "type", "reference", "id", "deploy", "name", "php", "fpm", "restart", "type", "task", "run", "server", "command", "service", "php", "NUMBER", "fpm", "restart", "name", "local", "echo", "type", "task", "run", "local", "command", "echo", "local", "command", "I", "suggest", "only", "allowing", "simply", "tasks", "to", "be", "defined", "through", "the", "yaml", "config", "NUMBER", "this", "should", "be", "commands", "that", "can", "be", "directly", "by", "the", "run", "or", "runLocally", "and", "don", "t", "require", "any", "additional", "logic", "NUMBER", "many", "tasks", "could", "be", "write", "like", "this", "but", "then", "that", "s", "up", "to", "the", "user", "edit", "forgot", "before", "after", "Won", "t", "this", "produce", "some", "mess", "like", "oh", "some", "tasks", "be", "possible", "to", "write", "in", "config", "but", "some", "not", "Well", "the", "idea", "would", "be", "to", "only", "have", "custom", "task", "when", "you", "want", "different", "behaviour", "or", "complex", "processing", "aka", "you", "need", "addition", "php", "code", "NUMBER", "Regardless", "of", "defining", "tasks", "through", "YAML", "it", "should", "be", "possible", "to", "import", "them", "NUMBER", "php", "tasks", "type", "import", "source", "TAG", "Yeah", "you", "should", "keep", "it", "simple", "NUMBER", "Some", "summary", "so", "far", "alias", "have", "agreed", "YAML", "for", "settings", "agreement", "not", "reached", "YAML", "for", "task", "definition", "disagreed", "Helper", "library", "that", "might", "facilitate", "implementation", "LINK", "io", "php", "wise", "I", "think", "the", "major", "advantage", "deployer", "has", "be", "the", "fact", "that", "you", "re", "write", "code", "to", "deploy", "NUMBER", "I", "think", "most", "use", "cases", "have", "at", "least", "one", "small", "snippet", "of", "code", "and", "implement", "this", "with", "yaml", "would", "suck", "NUMBER", "Make", "it", "possible", "to", "add", "custom", "options", "for", "each", "task", "NUMBER", "deploy", "NUMBER", "php", "php", "task", "deploy", "update_code", "function", "Symfony", "Component", "Console", "Input", "InputInterface", "input", "branch", "input", "hasOption", "branch", "input", "getOption", "branch", "get", "branch", "false", "NUMBER", "desc", "Update", "local", "codebase", "option", "branch", "b", "task", "deploy", "NUMBER", "option", "branch", "b", "cli", "dep", "deploy", "b", "develop", "or", "dep", "deploy", "branch", "develop", "This", "be", "nice", "feature", "but", "it", "makes", "possible", "to", "deploy", "_develop_", "branch", "to", "prod", "server", "NUMBER", "For", "example", "I", "have", "a", "task", "deploy", "prod", "and", "such", "command", "dep", "deploy", "prod", "b", "develop", "will", "do", "a", "bad", "job", "NUMBER", "So", "I", "vote", "for", "per", "configuration", "only", "branch", "definition", "NUMBER", "Point", "of", "this", "pull", "request", "be", "to", "make", "it", "possible", "to", "add", "custom", "options", "how", "you", "use", "it", "be", "up", "to", "you", "NUMBER", "There", "be", "not", "automation", "on", "overwriting", "configuration", "you", "still", "have", "to", "manually", "decide", "how", "and", "when", "the", "option", "be", "use", "NUMBER", "On", "a", "general", "not", "it", "be", "indeed", "best", "not", "to", "allow", "people", "to", "chose", "their", "branch", "when", "deploying", "to", "production", "but", "in", "many", "cases", "on", "other", "environments", "it", "can", "be", "handy", "to", "be", "able", "to", "deploy", "a", "feature", "branch", "NUMBER", "Okay", "make", "sense", "NUMBER", "A", "quick", "attempt", "at", "add", "multistage", "support", "which", "works", "deploy", "NUMBER", "php", "It", "be", "important", "to", "define", "your", "stages", "after", "you", "have", "defined", "your", "servers", "the", "stage", "be", "a", "list", "of", "servernames", "which", "be", "retrieved", "from", "the", "defined", "servers", "NUMBER", "php", "stage", "name", "array", "servername", "NUMBER", "servername", "NUMBER", "NUMBER", "array", "key", "value", "default", "stage", "develop", "array", "development", "array", "branch", "develop", "true", "stage", "production", "array", "production", "options", "array", "branch", "master", "stage", "test", "array", "test", "set", "branch", "develop", "commandline", "php", "dep", "my", "task", "stage", "server", "server", "dryrun", "Sorry", "todo", "s", "were", "do", "just", "didn", "t", "edit", "the", "comment", "NUMBER", "Added", "support", "for", "options", "per", "stage", "so", "that", "you", "can", "define", "a", "branch", "per", "stage", "NUMBER", "Will", "write", "test", "and", "docs", "for", "this", "This", "line", "LINK", "L", "NUMBER", "requires", "PHP", "NUMBER", "according", "to", "these", "note", "LINK", "features", "NUMBER", "php", "I", "wanted", "to", "submit", "a", "PR", "but", "be", "still", "reading", "the", "code", "and", "familiarizing", "Thank", "you", "elfet", "for", "fix", "that", "even", "though", "it", "s", "such", "a", "small", "point", "Hi", "there", "First", "of", "all", "thanks", "for", "this", "awesome", "toolkit", "It", "really", "rocks", "My", "production", "server", "has", "bash", "console", "NUMBER", "There", "be", "an", "issue", "with", "deleting", "shared", "folders", "in", "codebase", "NUMBER", "Somewhy", "bash", "do", "not", "expand", "in", "the", "following", "command", "cd", "webroot", "production", "if", "d", "webroot", "production", "release", "NUMBER", "core", "modules", "error", "media", "then", "rm", "rf", "webroot", "production", "release", "NUMBER", "core", "modules", "error", "media", "fi", "and", "do", "not", "delete", "the", "directory", "so", "symlink", "do", "not", "work", "NUMBER", "After", "googling", "I", "ve", "find", "this", "LINK", "directory", "expansion", "within", "an", "argument", "So", "I", "ve", "change", "the", "expression", "to", "this", "if", "d", "echo", "webroot", "production", "release", "NUMBER", "core", "modules", "error", "media", "then", "echo", "exists", "fi", "and", "it", "worked", "as", "expected", "NUMBER", "This", "be", "default", "Jelastic", "apache", "NUMBER", "web", "server", "NUMBER", "uname", "a", "says", "this", "Linux", "apache", "NUMBER", "NUMBER", "afs", "prod", "script", "NUMBER", "NUMBER", "ab", "NUMBER", "NUMBER", "SMP", "Sat", "Jun", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "MSK", "NUMBER", "x", "NUMBER", "_", "NUMBER", "x", "NUMBER", "_", "NUMBER", "x", "NUMBER", "_", "NUMBER", "GNU", "Linux", "No", "it", "be", "not", "Jelastic", "bug", "it", "be", "a", "bash", "console", "issue", "NUMBER", "Yes", "I", "can", "create", "PR", "NUMBER", "May", "you", "rebuild", "this", "tool", "with", "my", "change", "so", "they", "would", "be", "available", "through", "Composer", "Thanks", "NUMBER", "Hi", "I", "m", "trying", "to", "test", "a", "deployment", "with", "ssh", "git", "but", "I", "cannot", "figure", "out", "the", "proper", "way", "to", "use", "my", "NUMBER", "pem", "private", "key", "that", "lets", "me", "SSH", "into", "AWS", "instances", "NUMBER", "This", "be", "normally", "do", "with", "ssh", "i", "key", "NUMBER", "pem", "or", "similar", "NUMBER", "I", "ve", "tried", "setting", "be", "as", "both", "a", "public", "and", "a", "private", "key", "to", "no", "avail", "NUMBER", "Also", "it", "seems", "that", "deployer", "be", "not", "properly", "recognizing", "the", "fact", "that", "phpseclib", "be", "fail", "in", "this", "case", "NUMBER", "I", "was", "looking", "at", "that", "function", "before", "posting", "it", "do", "not", "seem", "to", "work", "properly", "NUMBER", "The", "NUMBER", "pem", "file", "I", "have", "be", "not", "an", "x", "NUMBER", "it", "be", "a", "private", "RSA", "key", "like", "BEGIN", "RSA", "PRIVATE", "KEY", "NUMBER", "key", "NUMBER", "END", "RSA", "PRIVATE", "KEY", "I", "ve", "tried", "setting", "that", "to", "both", "the", "public", "and", "private", "key", "to", "no", "avail", "NUMBER", "openssl_pkey_get_public", "returns", "false", "on", "that", "NUMBER", "So", "do", "you", "have", "any", "decisions", "how", "to", "deploy", "on", "AWS", "Cool", "I", "looked", "at", "the", "code", "you", "change", "and", "it", "seems", "fairly", "obvious", "but", "it", "doesn", "t", "seem", "to", "work", "for", "me", "NUMBER", "josh", "orangeslice", "projects", "seaglass", "master", "dep", "deploy", "Preparing", "server", "for", "deploy", "NUMBER", "Password", "Updating", "code", "NUMBER", "Installing", "vendors", "NUMBER", "Creating", "symlink", "to", "release", "NUMBER", "Cleaning", "up", "old", "release", "NUMBER", "Successfully", "deployed", "on", "banzai", "NUMBER", "aws", "But", "nothing", "actually", "happens", "NUMBER", "There", "be", "no", "password", "not", "sure", "why", "it", "s", "prompting", "for", "that", "NUMBER", "I", "hit", "enter", "at", "the", "password", "prompt", "and", "everything", "completes", "without", "error", "but", "nothing", "be", "copied", "or", "checked", "out", "NUMBER", "Redacted", "code", "from", "deploy", "file", "php", "TAG", "user", "ubuntu", "path", "www", "repo", "deploytest", "setPemFile", "NUMBER", "ssh", "aws", "NUMBER", "pem", "I", "m", "happy", "to", "contribute", "as", "necessary", "to", "make", "this", "work", "NUMBER", "Ah", "a", "simple", "error", "on", "my", "part", "NUMBER", "Works", "flawlessly", "now", "NUMBER", "Thanks", "so", "much", "for", "add", "this", "NUMBER", "Good", "news", "NUMBER", "Thanks", "a", "lot", "The", "php", "ssh", "dependency", "has", "a", "hard", "dependency", "on", "the", "ssh", "extension", "NUMBER", "Possible", "solution", "be", "to", "make", "php", "ssh", "a", "suggest", "instead", "of", "a", "require", "NUMBER", "Is", "it", "possible", "to", "deploy", "multiple", "stages", "to", "multiple", "environments", "easily", "like", "it", "s", "do", "with", "capistrano", "cap", "staging", "deploy", "cap", "production", "deploy", "I", "d", "like", "to", "deploy", "my", "staging", "git", "branch", "to", "another", "server", "then", "my", "master", "branch", "NUMBER", "Only", "this", "branch", "and", "the", "server", "settings", "need", "to", "be", "different", "NUMBER", "Think", "this", "can", "be", "close", "see", "LINK", "stages", "Ok", "thanks", "Hi", "Would", "it", "be", "hard", "to", "implement", "a", "special", "task", "that", "runs", "only", "on", "one", "server", "last", "one", "NUMBER", "Let", "s", "say", "i", "m", "deploying", "application", "to", "NUMBER", "servers", "NUMBER", "and", "want", "to", "run", "a", "task", "after", "all", "the", "servers", "be", "deployed", "NUMBER", "The", "task", "should", "run", "on", "last", "server", "in", "the", "queue", "NUMBER", "I", "need", "to", "clear", "some", "remote", "cache", "server", "throught", "an", "api", "call", "and", "run", "it", "on", "all", "servers", "seems", "like", "a", "bad", "solution", "NUMBER", "The", "easiest", "solution", "would", "be", "to", "add", "some", "kind", "of", "env", "variable", "that", "I", "could", "check", "by", "config", "lastServer", "and", "run", "a", "task", "only", "if", "this", "returns", "true", "NUMBER", "Best", "regards", "Pawel", "Well", "this", "would", "work", "NUMBER", "but", "it", "s", "such", "an", "ugly", "solution", "NUMBER", "So", "I", "ended", "up", "modifying", "it", "a", "little", "bit", "NUMBER", "so", "that", "i", "don", "t", "have", "to", "know", "the", "name", "of", "the", "host", "NUMBER", "deploy", "NUMBER", "php", "php", "Array", "of", "servers", "NUMBER", "servers", "NUMBER", "foreach", "servers", "as", "server", "Define", "server", "for", "deploy", "NUMBER", "server", "server", "name", "server", "host", "user", "root", "setWwwUser", "web", "path", "path", "pubKey", "Find", "the", "last", "one", "if", "each", "servers", "set", "last_server_name", "server", "name", "recipie", "custom", "NUMBER", "php", "php", "task", "one", "function", "if", "get", "last_server_name", "false", "config", "getName", "Do", "your", "stuff", "NUMBER", "This", "will", "work", "better", "since", "i", "don", "t", "have", "to", "hardcode", "the", "name", "of", "the", "server", "into", "php", "NUMBER", "If", "the", "list", "of", "server", "change", "NUMBER", "it", "will", "still", "work", "NUMBER", "Sounds", "good", "NUMBER", "but", "NUMBER", "when", "will", "it", "fire", "NUMBER", "after", "all", "servers", "be", "deployed", "will", "it", "be", "possible", "to", "pass", "a", "variable", "by", "calling", "deploy", "NUMBER", "php", "php", "set", "some_variables", "NUMBER", "recipe", "custom", "NUMBER", "php", "php", "var", "get", "some_variable", "Great", "NUMBER", "so", "I", "can", "place", "it", "at", "the", "end", "NUMBER", "and", "it", "will", "fire", "as", "the", "last", "one", "NUMBER", "this", "would", "be", "perfect", "NUMBER", "task", "once", "makes", "sence", "NUMBER", "while", "work", "on", "DryRun", "for", "local", "commands", "I", "ve", "implement", "this", "a", "slightly", "php", "task", "once", "server", "local", "_not", "final", "code_", "php", "private", "function", "runSeries", "Runner", "runner", "array", "servers", "InputInterface", "input", "OutputInterface", "output", "taskName", "runner", "getName", "taskName", "empty", "taskName", "UnNamed", "taskName", "if", "runner", "once", "local", "this", "runTaskLocally", "runner", "taskName", "input", "output", "elseif", "null", "runner", "once", "server", "servers", "runner", "once", "this", "runTaskOnServer", "server", "runner", "taskName", "input", "output", "else", "foreach", "servers", "as", "name", "server", "this", "runTaskOnServer", "server", "runner", "taskName", "input", "output", "private", "function", "runTaskLocally", "Runner", "runner", "taskName", "InputInterface", "input", "OutputInterface", "output", "if", "OutputInterface", "VERBOSITY_VERBOSE", "TAG", "getVerbosity", "output", "writeln", "Run", "task", "TAG", "taskName", "TAG", "TAG", "locally", "TAG", "Run", "task", "NUMBER", "runner", "run", "input", "private", "function", "runTaskOnServer", "ServerInterface", "server", "Runner", "runner", "taskName", "InputInterface", "input", "OutputInterface", "output", "NUMBER", "this", "would", "run", "once", "local", "independent", "from", "servers", "and", "once", "servername", "on", "a", "specific", "server", "Capistrano", "have", "roles", "So", "you", "can", "specify", "roles", "to", "each", "server", "and", "then", "specify", "roles", "to", "tasks", "NUMBER", "For", "example", "php", "server", "server", "NUMBER", "roles", "array", "frontend", "upload", "server", "server", "NUMBER", "roles", "array", "frontend", "server", "server", "NUMBER", "roles", "array", "backend", "server", "server", "NUMBER", "roles", "array", "backend", "server", "server", "NUMBER", "roles", "array", "backend", "server", "server", "NUMBER", "roles", "array", "backend", "crontab", "primary", "crontab", "work", "here", "and", "primary", "means", "that", "tasks", "to", "migrate", "database", "or", "some", "other", "migrate", "task", "should", "be", "executed", "here", "not", "on", "each", "servers", "Then", "you", "specify", "roles", "on", "task", "task", "Reload", "nginx", "have", "roles", "frontend", "and", "upload", "because", "each", "of", "these", "roles", "uses", "nginx", "other", "servers", "do", "not", "have", "nginx", "task", "Reload", "php", "NUMBER", "fpm", "have", "roles", "backend", "because", "this", "role", "uses", "php", "NUMBER", "fpm", "other", "servers", "do", "not", "have", "php", "NUMBER", "fpm", "task", "Refresh", "crontab", "have", "roles", "crontab", "because", "this", "role", "manages", "crontab", "tasks", "other", "servers", "do", "not", "have", "crontab", "tasks", "NUMBER", "Only", "this", "server", "runs", "tasks", "periodically", "NUMBER", "task", "Migrate", "have", "roles", "primary", "because", "this", "role", "manages", "runs", "some", "migrate", "script", "to", "migrate", "environment", "database", "caches", "etc", "NUMBER", "This", "role", "do", "not", "need", "to", "be", "invoked", "on", "each", "servers", "NUMBER", "task", "Warmup", "caches", "have", "roles", "primary", "because", "this", "role", "do", "not", "need", "to", "be", "invoked", "on", "each", "servers", "Then", "we", "have", "simple", "deploy", "scenario", "NUMBER", "deply", "NUMBER", "scm", "NUMBER", "NUMBER", "Refresh", "crontab", "Migrate", "Reload", "php", "NUMBER", "fpm", "Warmup", "caches", "Reload", "nginx", "As", "I", "understand", "this", "project", "do", "not", "have", "roles", "yet", "It", "be", "very", "old", "solution", "and", "was", "implement", "in", "capistrano", "from", "first", "dates", "AFAIK", "NUMBER", "It", "be", "very", "important", "thing", "when", "you", "have", "more", "then", "one", "server", "for", "your", "deployment", "NUMBER", "I", "was", "looking", "for", "some", "other", "product", "and", "find", "this", "one", "but", "i", "can", "not", "use", "it", "because", "i", "have", "NUMBER", "servers", "with", "different", "roles", "and", "different", "software", "But", "seems", "like", "there", "be", "not", "difficult", "to", "implement", "it", "NUMBER", "Also", "vote", "for", "once", "feature", "useful", "when", "you", "prepare", "deb", "archive", "locally", "and", "only", "then", "distribute", "it", "across", "servers", "NUMBER", "NUMBER", "on", "once", "as", "I", "just", "migrated", "from", "Rocketeer", "to", "Deployer", "and", "I", "have", "a", "build", "task", "to", "set", "up", "my", "application", "before", "moving", "it", "to", "my", "servers", "and", "right", "now", "it", "runs", "that", "for", "every", "server", "I", "have", "in", "the", "stage", "instead", "of", "once", "NUMBER", "Correct", "grammatical", "error", "My", "apologies", "for", "the", "extra", "diff", "noise", "at", "line", "NUMBER", "I", "just", "use", "the", "GitHub", "web", "editor", "There", "be", "no", "alter", "command", "that", "I", "can", "find", "NUMBER", "It", "seems", "this", "should", "be", "the", "after", "command", "I", "m", "sure", "this", "was", "build", "with", "with", "Symfony", "in", "mind", "heck", "its", "build", "use", "Symfony", "components", "but", "to", "make", "be", "easier", "for", "people", "to", "adapt", "this", "to", "other", "frameworks", "could", "the", "most", "basic", "deployment", "steps", "like", "prepare", "symlink", "and", "rollback", "be", "in", "a", "separate", "recipe", "and", "then", "layer", "Symfony", "specifics", "on", "top", "of", "that", "For", "a", "freeform", "project", "instead", "of", "require", "recipe", "symfony", "NUMBER", "php", "you", "could", "just", "require", "recipe", "basic", "NUMBER", "php", "and", "get", "the", "meat", "and", "potatoes", "of", "the", "tool", "NUMBER", "If", "you", "ever", "plan", "on", "shipping", "more", "default", "recipes", "for", "other", "frameworks", "this", "could", "also", "help", "cut", "down", "on", "duplication", "since", "everything", "will", "leverage", "the", "basics", "but", "each", "framework", "will", "handle", "assets", "and", "caches", "differently", "NUMBER", "I", "just", "wanted", "to", "say", "thanks", "for", "this", "Hello", "this", "PR", "add", "NUMBER", "function", "ask", "askConfirmation", "askHiddenResponse", "exemple", "TAG", "get", "from", "to", "here", "all", "my", "change", "but", "something", "be", "wrong", "LINK", "I", "hope", "you", "have", "understood", "the", "problem", "NUMBER", "thanks", "in", "advance", "Fixes", "execute", "cd", "path", "was", "not", "escaped", "Improvements", "run", "and", "runLocally", "now", "returns", "output", "and", "both", "take", "variadic", "argument", "and", "automatically", "escapes", "NUMBER", "No", "BC", "break", "introduce", "NUMBER", "Oh", "my", "I", "push", "my", "original", "wip", "branch", "not", "the", "passing", "one", "NUMBER", "Should", "be", "alright", "now", "NUMBER", "Hello", "I", "m", "trying", "to", "use", "deployer", "but", "I", "have", "an", "issue", "with", "the", "ignore", "command", "NUMBER", "This", "be", "my", "list", "of", "file", "to", "ignore", "ignore", "deployment", "cache", "_", "log", "_", "nbproject", "sessions", "operator", "_", "sessions", "webapp", "_", "sessions", "driverAPI", "_", "sessions", "driver", "_", "sessions", "mobile", "But", "if", "I", "do", "this", "it", "ignore", "the", "entire", "folder", "for", "cache", "log", "and", "sessions", "instead", "of", "ignoring", "only", "their", "content", "NUMBER", "Also", "if", "I", "just", "say", "ignore", "log", "it", "will", "ignore", "any", "folder", "with", "the", "name", "log", "in", "my", "project", "not", "just", "the", "one", "in", "root", "NUMBER", "after", "every", "be", "a", "but", "github", "editor", "seems", "to", "remove", "them", "or", "at", "least", "I", "don", "t", "see", "them", "in", "my", "browser", "That", "would", "be", "great", "NUMBER", "If", "you", "create", "a", "behaviour", "like", "in", "NUMBER", "gitignore", "file", "why", "not", "add", "an", "option", "to", "even", "use", "the", "gitignores", "preg_quote", "do", "not", "work", "like", "you", "think", "LINK", "_quote", "the", "second", "argument", "add", "to", "the", "list", "you", "write", "NUMBER", "elfet", "I", "have", "a", "few", "minor", "improvement", "planned", "will", "compile", "and", "bump", "version", "right", "after", "that", "NUMBER", "Hi", "I", "be", "trying", "to", "test", "this", "script", "but", "i", "get", "an", "issue", "all", "the", "team", "get", "the", "same", "issue", "in", "the", "office", "I", "ve", "follow", "your", "very", "simple", "doc", "and", "I", "get", "this", "message", "when", "I", "launch", "cmd", "InvalidArgumentException", "Command", "prod", "be", "not", "defined", "NUMBER", "Usually", "we", "didnot", "have", "problem", "with", "symfony", "console", "on", "our", "symfony", "project", "NUMBER", "Is", "there", "a", "special", "step", "for", "windows", "seven", "we", "miss", "Thanks", "I", "run", "this", "command", "with", "the", "cmd", "or", "gitbash", "shell", "that", "work", "fine", "Here", "be", "the", "deploy", "NUMBER", "php", "content", "LINK", "Thanks", "Got", "the", "same", "issue", "but", "it", "works", "when", "I", "add", "the", "description", "param", "so", "callback", "param", "be", "the", "third", "NUMBER", "jmsche", "so", "how", "look", "the", "cmd", "you", "use", "Like", "this", "LINK", "jmsche", "yes", "it", "work", "perfectly", "Thanks", "Regarding", "the", "code", "if", "no", "third", "param", "be", "given", "the", "second", "should", "be", "taken", "as", "the", "callback", "function", "NUMBER", "I", "didn", "t", "go", "very", "deep", "in", "the", "code", "but", "that", "s", "what", "I", "assume", "from", "examples", "and", "certain", "code", "parts", "NUMBER", "You", "re", "welcome", "elfet", "I", "get", "same", "descriptionOrCallback", "problem", "NUMBER", "Got", "this", "error", "yesterday", "on", "my", "first", "try", "with", "deployer", "PHP", "Notice", "No", "compatible", "server", "to", "client", "encryption", "algorithms", "find", "in", "NUMBER", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "I", "get", "it", "fix", "by", "update", "vendors", "and", "rebuilding", "PHAR", "archive", "NUMBER", "Hope", "this", "can", "help", "Hi", "any", "news", "about", "this", "I", "m", "only", "get", "this", "error", "use", "the", "NUMBER", "phar", "file", "NUMBER", "Using", "the", "Composer", "way", "of", "installation", "do", "not", "result", "in", "this", "error", "NUMBER", "okay", "I", "get", "this", "error", "with", "phar", "NUMBER", "and", "I", "find", "that", "people", "had", "the", "same", "issue", "with", "phpseclib", "in", "phar", "too", "LINK", "I", "get", "this", "error", "use", "composer", "and", "PHP", "NUMBER", "NUMBER", "ubuntu", "NUMBER", "I", "ve", "run", "into", "that", "issue", "now", "I", "ve", "install", "deployer", "via", "composer", "version", "NUMBER", "Here", "be", "my", "deploy", "NUMBER", "php", "it", "s", "pretty", "basic", "require", "recipe", "symfony", "NUMBER", "php", "server", "staging", "server", "my_server", "NUMBER", "url", "path", "var", "www", "html", "deploy", "NUMBER", "in", "user", "foo", "bar", "pubKey", "NUMBER", "ssh", "id_rsa", "NUMBER", "pub", "NUMBER", "ssh", "id_rsa", "null", "stage", "staging", "array", "staging", "server", "array", "branch", "master", "true", "set", "repository", "git", "my", "repo", "NUMBER", "git", "I", "ve", "get", "two", "notices", "PHP", "Notice", "No", "compatible", "server", "to", "client", "encryption", "algorithms", "find", "in", "var", "www", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "NUMBER", "Notice", "No", "compatible", "server", "to", "client", "encryption", "algorithms", "find", "in", "var", "www", "vendor", "phpseclib", "phpseclib", "phpseclib", "Net", "SSH", "NUMBER", "php", "on", "line", "NUMBER", "Am", "I", "doing", "something", "wrong", "I", "try", "both", "user", "password", "way", "and", "pubkey", "NUMBER", "By", "the", "way", "my", "private", "key", "doesn", "t", "have", "pass", "phrase", "NUMBER", "I", "run", "deploy", "script", "on", "Vagrant", "virtual", "machine", "OS", "Ubuntu", "NUMBER", "LTS", "elfet", "I", "have", "the", "same", "issue", "only", "I", "need", "to", "connect", "to", "my", "EC", "NUMBER", "with", "a", "PEM", "file", "NUMBER", "Any", "idea", "why", "it", "doesnt", "work", "Hallo", "this", "be", "a", "simple", "improvement", "of", "upload", "task", "that", "allows", "uploading", "file", "from", "window", "machine", "NUMBER", "Class", "Utils", "Path", "was", "taken", "from", "Gaufrette", "LINK", "it", "s", "possible", "add", "support", "for", "LINK", "_extension", "and", "maybe", "optional", "use", "python", "style", "decorator", "a", "la", "Fabric", "LINK", "decorators", "TAG", "parallel", "task", "TAG", "I", "wanted", "to", "suggest", "pssh", "too", "But", "I", "think", "it", "requires", "to", "rethink", "deployer", "architecture", "NUMBER", "Objected", "solution", "for", "pssh_extension", "LINK", "_extension", "LINK", "This", "change", "allow", "works", "with", "many", "server", "at", "once", "NUMBER", "Allows", "to", "call", "several", "connect", "NUMBER", "Allows", "to", "group", "servers", "and", "make", "change", "on", "servers", "from", "particular", "group", "It", "be", "especially", "important", "when", "many", "identical", "servers", "work", "with", "general", "database", "server", "and", "we", "want", "at", "first", "update", "application", "file", "on", "all", "app", "servers", "and", "then", "run", "database", "migration", "on", "the", "single", "server", "NUMBER", "We", "use", "this", "fork", "in", "some", "SaaS", "project", "for", "deploying", "and", "other", "bulk", "actions", "Parameter", "argv", "introduce", "for", "work", "with", "input", "argument", "and", "options", "NUMBER", "I", "prefer", "to", "use", "PSR", "NUMBER", "Sorry", "for", "my", "code", "NUMBER", "I", "also", "modify", "your", "implementation", "to", "use", "RemoteGroup", "class", "NUMBER", "Ok", "NUMBER", "May", "be", "this", "be", "better", "NUMBER", "Just", "in", "our", "problem", "almost", "all", "commands", "executes", "for", "group", "of", "servers", "and", "in", "your", "implementation", "we", "get", "double", "nesting", "of", "function", "almost", "everywhere", "NUMBER", "But", "it", "looks", "more", "elegant", "Please", "update", "this", "example", "LINK", "_multiserver", "NUMBER", "php", "else", "NUMBER", "And", "make", "please", "NUMBER", "release", "I", "will", "check", "during", "this", "week", "NUMBER", "Hi", "I", "look", "at", "your", "change", "of", "my", "pull", "request", "and", "they", "be", "not", "very", "comfortable", "in", "usage", "For", "example", "input", "data", "connect", "job", "NUMBER", "domain", "NUMBER", "com", "user", "rsa", "NUMBER", "ssh", "id_rsa", "job", "connect", "node", "NUMBER", "domain", "NUMBER", "com", "user", "rsa", "NUMBER", "ssh", "id_rsa", "node", "connect", "node", "NUMBER", "domain", "NUMBER", "com", "user", "rsa", "NUMBER", "ssh", "id_rsa", "node", "connect", "node", "NUMBER", "domain", "NUMBER", "com", "user", "rsa", "NUMBER", "ssh", "id_rsa", "node", "Then", "I", "want", "to", "make", "cd", "on", "all", "servers", "NUMBER", "In", "my", "realization", "I", "just", "made", "cd", "some", "folder", "In", "your", "realization", "I", "must", "make", "something", "similar", "group", "job", "function", "cd", "some", "folder", "group", "node", "function", "cd", "some", "folder", "When", "I", "have", "a", "several", "connections", "I", "want", "to", "execute", "commands", "by", "default", "on", "all", "servers", "NUMBER", "I", "think", "it", "s", "more", "coherent", "NUMBER", "Oh", "I", "will", "try", "new", "version", "thanks", "NUMBER", "It", "be", "likely", "that", "I", "understood", "incorrectly", "NUMBER", "Executing", "be", "ok", "NUMBER", "I", "notice", "that", "no", "output", "from", "command", "run", "NUMBER", "It", "be", "ok"], "text_count": [0, 35053, 8483, 4161, 2495, 245, 2976, 22, 146, 4317, 4240, 9446, 5451, 3177, 3868, 1635, 0, 0, 0, 0, 11933, 3553, 1612, 1166, 2784, 1582, 0, 0, 0, 0, 23503, 13244, 10457, 300, 5289, 1601, 0, 0, 0, 0, 26185, 79, 11421, 9705, 6761, 0, 0, 0, 0, 0, 6853, 3006, 3841, 2011, 2713, 1232, 2854, 0, 0, 0, 25278, 1314, 20861, 2007, 0, 0, 0, 0, 0, 0, 16726, 1704, 12284, 5000, 1930, 0, 0, 0, 0, 0, 31511, 12237, 2371, 15411, 1361, 1320, 0, 0, 0, 0, 1693, 8293, 837, 0, 0, 0, 0, 0, 0, 0, 26727, 4761, 17378, 5121, 0, 0, 0, 0, 0, 0, 63419, 91878, 2443, 4957, 928, 1699, 0, 0, 0, 0, 134709, 1745, 97559, 4183, 21562, 32464]}]