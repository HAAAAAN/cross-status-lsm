[{"repo": "fluentd", "type": "elite", "title": "", "number of text": 559, "text": "  Thanks for pointing this out!\n\nTo be clear, Fluentd itself doesn't depend on uuidtools.\nfluent-mixin-config-placeholders depends on uuidtools to generate unique id.\nSo, https://github.com/tagomoris/fluent-mixin-config-placeholders repository is better place than here.\n  Using array for error count consumes lots of memory when\nretry_limit is large. We don't use an item in @error_history,\nso we can use simply number count instead of array based approach.\n\n@frsyuki Could you check this PR?\n @tagomoris @sonots Do you also check this PR? Maybe no problem, but it is buffer related so double-check is better.\n  Good catch!\n  Could you add tests to SyslogParser?\n Thanks!\n  In DetachMultiProcessMixin.\nSame as https://github.com/fluent/fluentd/pull/191\n\n@frsyuki Could you check this?\n  This option is useful for flushing beffered events.\nIn the future, we will provide more general approaches to handle\nuser actions using unix domain socket or similar plugin.\n\nSee #279 thread.\n @sonots @sabottenda Did you try the option? If no problem, I will merge this PR and release new Fluentd version.\n @sabottenda Thanks for the confirmation!\n  This problem should be solved by this PR > https://github.com/fluent/fluentd/pull/375\nCould you try master code?\n @Spredzy Currently, there is no nightly build but package builder is open > https://github.com/repeatedly/omnibus-td-agent\n\nI will release Fluentd v0.10.52 after https://github.com/fluent/fluentd/issues/378 issue is fixed.\nAfter that, we will release new version.\n  Simplify require modules.\nIt also fixes #374 \n  Could you show me the part of your configuration example?\nI want to use it for testing.\n  Fixed. Please try master branch!\n  So if users set `time_default_curret false`, users throw away events which don't have `time` field, right?\n `time_default_current` seems unclear for me.\nHow about `time_use_current_when_missing`?\nIt's too long but this feature is for plugin developers. So long name seems acceptable.\n Or keep shorter code, `time_return_nil_when_missing` or similar name is an another approach.\n It's acceptable for me.\n @tagomoris You should also change test code.\n  You must use `/opt/td-agent/embedded/bin/fluent-gem`, not `fluent-gem`.\nSee this FAQ: http://docs.fluentd.org/articles/faq#i-installed-td-agent-and-want-to-add-custom-plugins-how-do-i-do-it\nThis is for td-agent but you can replace td-agent installed path with td-agent 2 installed path.\n\nAnd please follow CONTRIBUTING guideline: https://github.com/fluent/fluentd/blob/master/CONTRIBUTING.md\n\nThis is for other users and clear project management.\nGithub issue is not searchable so mixing questions, bugs and feature requests are not good for other users and developers.\nIf you have a question, please use Fluentd ML instead.\n\nSorry, close this issue for now.\n\nThanks.\n Ah, I forgot to mention one.\n\nThis is Fluentd repository, not td-agent.\nIf you have a bug of td-agent, use correct repository.\ntd-agent: https://github.com/treasure-data/td-agent\ntd-agent 2: https://github.com/repeatedly/omnibus-td-agent\n > The separation between fluent(d)/td-agent wasn't clear to me.\n\nSorry, but these projects are definitely different.\nFluentd is a core of Fluent OSS project and maintained by community contributors.\ntd-agent is a Treasure Data Agent including Fluentd and maintained by Treasure Data.\nI am on both projects so creating td-agent issue on Fluentd is not critical. I can manage it :)\nI want the feature which transfers issues to another project...\n\n> uninstalled rvm, reinstalled td-agent, installed plugin using full path, finally works. Thanks.\n\nAh, I see. Glad to hear that!\nHmm... we need RVM expert to resolve this RVM problem.\n  General approach for resolving https://github.com/fluent/fluentd/issues/363\n\n@kiyoto Could you check this PR?\n @kiyoto Thank you for testing.\n\n> I noticed that for TCP + format none, the \"\\n\" at the end is preserved\n\nHm. I can remove `@delimiter` from message easily.\nDoes in_tail removes `\\n`? If so, keep same behaviour is better.\n I also add \"source_host_key\" option to add source host to records.\nI'm not sure this is useful or not in general.\nIf users use `in_udp` or `in_tcp` for various sources, it might be useful for detecting log source.\n @frsyuki @kiyoto @tagomoris @sonots Do you have any concern to merge this PR?\n No. Old TcpInput is obsoleted since 2 and half years ago so there is no users.\nThis PR introduces new TcpInput to handle general TCP access instead of old obsoleted TcpInput.\n @kiyoto Follow in_tail way. Now in_udp and in_tcp removes a delimiter from message. Please check.\n If there is no problem, I will merge this PR ~~tomorrow~~ today.\n  It seems a bug of `TextFormatter` so this patch approach is not good.\nHow about adding `localtime` and `utc` config_param or\nsimply adding `@localtime = true` before `conf['utc']` in configure?\n Why?\nTextFormatter receives `conf` at `configure`.\nSo if the user specifies `localtime` / `utc`, these parameters are also passed to TextFormatter#configure.\n @sonots I noticed that the incosisntent exists in Fluentd.\nThe default `@localtime` in TimeSlicedOutput is `true` but the default `@localtime` in SetTimeKeyMixin  is `nil`.\nI think TimeSlicedOutput behaviour is correct so TextFormatter should follow.\n @sonots It is better but it breaks some user contents. So let's keep existence behaviour.\n  Thx!\n  For easy to deploy and setting. See this comment https://github.com/fluent/fluentd/pull/347#issuecomment-46038879\n\nExample:\n\n``` conf\n<system>\n  log_level error # same as -q option\n</system>\n```\n\nRemaining discussions:\n- Configuration name, use `<system>` for now.\n- What command line options should be set? Supported lists:\n  - log_level\n  - suppress_repeated_stacktrace\n  - emit_error_log_interval\n  - suppress_config_dump\n\nWhat do you think?\n @tagomoris Okay.\n\n@kiyoto @sonots How about this change? `system` is good for element name?\n  Pattern mismatch log should be warn for early detection.\nWe can disable this message by `log_level error` in production.\n\nhttps://groups.google.com/d/msg/fluentd/ZRreaaRFR2U/ineHN8FOGI0J\n Applied\n  I don't want to add new functionality to `in_foward` because it cause the inconsistency with `out_forward`.\n\nI have two ideas:\n- Support `without_priority` like option in `in_syslog`\n- Add new `in_udp` / `in_tcp` or `in_transport` like plugin to support arbitrary udp / tcp event\n\nIn general, `in_udp` / `in_tcp` plugin useful for other logging mechanizm.\nFor example, Netflow sends own format with udp / tcp protocol.\n I'm considering which is better separating protocol or setting protocol via options.\n\n``` conf\n<source>\n  type udp\n  format /.../\n</source>\n```\n\nor \n\n``` conf\n<source>\n  type event # or better name\n  protocol_type udp # or tcp or unix?\n</source>\n```\n\nI think former case is good for users. it is clear plugin name.\n Merged #368. So I closed this issue.\n  Hmm... `log_level warn` is not fit for this case?\n > The option also suppresses other logs such as other warnings and backtraces\n\nImportant logs are also ignored? If so, we should raise the level of such logs.\nI am considering incomplete `warn` message changed to `error`.\n @sabottenda I see. I understood your case.\nOn my personal opinion, I want to make plugins simple because it is a philosophy of Fluentd.\nSo I add new option to existence plugin carefully.\n\nFor now, this option seems to cover rare case because some users avoid this problem with `log_level error` per plugin.\nIf more users want this feature, I will re-consider supporting it in in_tail.\nWhat do you think?\n  Don't use issues for asking questions first.\nCould you post these to Fluentd ML?\nSee: https://github.com/fluent/fluentd/blob/master/CONTRIBUTING.md\n\nClose this issue for now.\n  This feature seems to be realized by DSL configuration.\n\nP.S.\nIn my personal opinion, hostname separation is not good for system management.\nHostname is sometimes changed so using hostname as filename is so error prone.\nI think role based separation is good and there are popular tools which support role based management, e.g. Chef, Ansible and etc.\n I'm not sure.\n\n@tagomoris Do you hit a problem to support  `include` feature in DSL?\n Another idea,  `source` or `match` passes `self` to block.\n\n``` rb\nsource { |s|\n  s.include \"/path/to/configuration\"\n}\n```\n\nHow about this? It reduces reserved variable.\n @tagomoris Ah, I forgot this case. Hmm...\nI don't use DSL configuration so I follow user's opinion.\n  I don't understand Upstart's behaviour correctly. \nUpstart removes log file and create a new file with same name?\nin_tail can't track log rotation mechanizm correctly with `*`, you mentioned compressed case, so we write `You should not use '*' with log rotation` in the documentation.\n\n`*` is needed to tail the file in Upstart case?\nI need more time to check this PR how affect popular `*` case.\n So, Upstart case is enough with fixed `path foo.log` path config?\n\n>  in_tail's format \n\nformat? path?\n\n> Fluentd try to read a rotated file from beginning if in_tail's format also matches the rotated file name\n\nIt depends on the configuration. If `read_from_head` is `true`, in_tail reads from the beginning when detects new file. When path contains `*`, in_tail starts to watch rotated file as new file and almost users use `read_from_head true` with `*`.\n > I see. So if I can write an accurate configuration which does not match rotated files, there are no reasons to prohibit \\* path.\n\nYes so using `*.log` is better than `*`. `*` is useful but it is danger :(\n\n> Are there other documentations about a compressed case?\n\nNot yet. We need document improvements...\n  Thanks!\n  Github has Contributing guidelines feature: https://github.com/blog/1184-contributing-guidelines\n\nAdding CONTRIBUTING.md helps users to choose better actions.\nThis is a prototype. We need to improve the words in the document.\n\nWhat do you think?\n\nedit:\nI referred to AngularJS and FactoryGirl CONTRIBUTING.md\n Applied reviews!\n @yyamano Fixed!\n  If you have a good format, please send a PR.\n  We can't accept this PR because this change breaks all existence environments.\nI am considering better way so I close this PR for now.\n  This change is needed for supporting multi events in one log.\nCurrent `TextParser#parse`(`XXXParser#call`) API is below:\n\n``` rb\ntime, record = parser.parse(text)\n```\n\nIn this API, we can't treat netflow like multi-event log without trick.\nWe have several approaches to resolve the problem:\n1. parser.parse returns `array` value\n2. parser.parse receives EventStream object\n3. parser.parse accepts block\n\nI compared above approaches and I think 3 is better.\n\nAt 1, users should check return value type. It seems complicated\nAt 2, I can't imagine the clear API\nAt 3, users write only `parser.parse(text) { |time, record| ... }` to accept popular one event log and multi-event log\n\nSo I decided to use 3. and `TextParser#parse` supports two call approaches, `t, r = parser.parse(text)` and `parser.parse(text) { |t, r| ... }`.\n\nWhat do you think?\n\nedit:\n\nI added old API support code to each `call` method.\nSo there is no compatibility problem with Fluent::TextParser::XXXParser.\nBut I will remove this old API in the future... maybe v1? \n @tagomoris I consider old API support in `call` but XXXParser in TextParser is not used in user code because users use `TextParser#parse`.\n`TextParser#parse` supports old API so I think this change doesn't break user code.\n\nOf course, if input plugins use XXXParser directly, `call` should support old API.\n > Why did you fix built-in plugins which uses TextParser#parse in this pull-req?\n\nThe change of built-in plugin is only to use block based approach instead of `t, r = @parser.parse(text)`\n\n> but in_syslog is needed to support multi events?\n\nI don't know but some products send own format via syslog protocol.\nSo to support multi-event parsing in `in_syslog` may be useful.\n Okay, just added old API support to each `call`.\n If no problem, I will include this change in v0.10.50.\n  thanks!\n  Do you have a example which doesn't work in this case?\n Merged!\n  Good!\n  This is a testbed for `shutdown` improvement.\nCurrent `Engine#shutdown` calles plugin's `shutdown` in parallel.\nThe merit is fast shutdown and it works on almost cases, but it has one problem that output plugin may be closed before input plugin shutdown.\n\nTo resolve the problem calls input shutdown before output shutdown.\nThe demerit is taking more time to shutdown Fluentd if input and output have long time shutdown. \n\nIn addition, I consider adding timeout to each plugin shutdown.\nFor keeping compatibility, default is no timeout but add `--shutdown-timeout SECONDS` like option to Fluentd.\n\nWhat do you think?\n > Fluentd currently doesn't have filter plugins. So the change doesn't always fix the issue.\n\nYeah but merging this PR resolves Input plugin issue at least.\nWe have a plan to support filter mechanism for v1.\nAfter that, current Output emit problem will be resolved.\n\n> I think later or sooner fluentd.conf needs to have top-level configuration parameters for Fluentd core.\n\nIt seems good idea. Currently, fluentd command options are messy.\n Added comment for future work.\n There is no counter opinion for this PR.\nI will merge this PR today and I will consider `--shutdown-timeout` and specifying Fluentd options in configuration file.\n  Good catch!\n\nYou don't need to post above apologetic comment before conversation.\n  Please execute `bundle install` first.\nAfter that, try 'bundle exec rake build'.\n np. I will add this commands to README later!\n  Ah, hmm...\n\n> Or may it be necessary to check the queue size at the beginning of BasicBuffer#emit ? (not after checking storable?)\n\nThe merit of current implementation, Fluentd tries to process events as much as possible, queued chunks + chunk in `@map`.\nI don't know which is the best but it works fine.\n  I can't find portable command to get group id so use `Etc` module instead.\n\n@munangst Could you test this branch on your environment?\nI tested on my Ubuntu and it seems work.\n I tested this PR with replacing td-agent's fluentd and it works.\n  I see. I understood the problem.\n\nI checked the Ruby libraries and found Etc module.\nHere is the result on my env:\n\n``` rb\n> Etc.getgrnam('staff').gid\u2028\n=> 20\n> Etc.getpwnam('repeatedly').uid\u2028\n=> 501\n```\n\n@munangst Using Etc instead of calling `id` command is good for you or do you have an another idea to resolve this problem?\n @munangst I just merged the PR to fix this problem. Thanks for the report!\n  Could you add a test?\nI will check it later.\n Ah, wait.\nI don't understand the situation correctly.\n\n`read_from_head` is for existence file, not new file.\nWhy do you tail new file with `read_from_head`?\nRaising an exception is safer for detecting wrong path setting.\n > For example, I may want to collect apache, memcache, and syslog on one set of VMs, and memcache, mysql, and syslog on another set. It's easiest for me to just use the same config file for both sets of VMs, and enabling read_from_head makes it so that installation order doesn't matter.\n\nI see. So you want to tail some fixed path files, not using `*`, right?\n Thanks! Just merged.\n  How about other format like regexp, csv?\nAnd I can't judge which is better, array or LF separated values for text format.\n\n```\n[{json1}, {json2}]\n```\n\nor \n\n```\n{json1}\\n\n{json2}\\n\n```\n My concern is in_http will be used in IoT environment.\nSome embedded devises doesn't have json or msgpack library and these devises can't call HTTP request per event to reduce access costs.\nSo if we spread Fluentd on such environment, in_http should support batch mode for other formats.\n\nBTW, supporting json / msgpack array with `default` is good.\n  Implemented `out_file`, `json`, `ltsv`, `onekey` as built-in formats.\nI want feedback for APIs or lacking feature.\n @tagomoris @sonots @kiyoto I finished the first implementation of TextFormatter.\nCould you review this?\n > TextFormatter module and each formatter implementation classes are in separated files.\n\nIt seems like Java packages...\nHm, current Fluentd structure uses putting related classes into same file.\nIf we separate classes into each file, maybe another issue is better.\n @tagomoris Do you have an idea for file name? `fluent/formatter/json.rb` ? `fluent/formatter/json_formatter.rb?`\n I will separate files later.\n Use `single_value` instead of `onekey` for clear name.\nI forgot to include this change to this PR...\n\nhttps://github.com/fluent/fluentd/commit/72d7dab05fd3eb160bd73ffb505d312ce04fdf2b\n  I don't understand what the problem is.\n`symlink_path` is for watching the file content in realtime so created symlink points to buffered file.\nThis behaviour is already mentioned by @sabottenda and expected I think.\n Can we close this issue?\n > The default buffer_type of out_file is 'memory', then it would not create buffer symlink.\n\nNo. out_file is TimeSlicedOutput so the default buffer_type is 'file'.\n  I sometimes mentioned this feature in issue and ML so no counter opinion\n  Fixing #327 and #330 \n\nI want to discuss option name.\nCurrently using `path_increment`.\n Yeah, I know.\nBut Ruby's GzipReader has a bug(https://bugs.ruby-lang.org/issues/9790)\nand calling gunzip is not portable testing...\n Fluentd will support Windows environment and Windows doesn't have `gunzip` command by default.\n @tagomoris My first implementation seems `append` but `append` seems general name. Hmm....\n@kiyoto @hkmurakami Do you have any suggestion?\n\n@yyamano Ah... yeah. It should be fixed or wrapped with `if`.\n Use GzipReader for testing.\n If we choose 'numbering', maybe 'path_numbering' or similar is better for clear name.\n Here is the list:\n- append\n- path_increment\n- path_numbering\n I decided to use `append` because we already used `compress` for file compression.\n`append` is similar to this option and meaning is clear in out_file context.\n  I implemented first version of `format` support in `in_http`.\n\nThis implementation doesn't support `field_name` option and assumes body is entire content like header provided json behaviour.\n\nhttps://github.com/fluent/fluentd/blob/cd3e4461695543d16c18c0d7f873d0522506ee1e/lib/fluent/plugin/in_http.rb#L259\n\n@kiyoto What do you think? Do we need `field_name` option?\nExistence `default` behaviour can accept json / msgpack without explicit format so need `json` or `msgpack` identifier in HTTP body.\nBut with `format` option, we already specified body format in configuration so `field_name` seems redundant.\n  You set unique index to your MongoDB collection and \nyou send same key to such collection.\nI don't understand why you send duplicate key to unique indexed collection.\n\n> The issues impact fluentd normal work?\n\nIt depends on your situation. Fluentd creates each thread for each buffered output plugin\nso out_mongo doesn't block the other plugins.\n\nP.S.\n\nThis is not Fluentd issue so please don't open each plugin issue on Fluentd repository.\nEach plugin repository is best place.\n  Separating files is expected behaviour in out_file.\nTimeSlicedOutput sometimes create bigger file.\nIn this case, this behaviour makes the concurrent script easier.\n\nHmm.. if  merge feature is popular request, then we will consider such feature.\n @tagomoris Hmm... do you know how many users use fluent-plugin-file-alternative?\nIf many users use non-compress mode, then we can port merging file feature into `out_file`.\n @loveshell Did you test this PR on your environment? You didn't call `close` method of GzipWriter so this PR seems broken.\n I already opened other PR which contains more better implementation so close this issue.\n  Thx!\n  Maybe, setting buffer_chunk_limit value to tooooooo large value helps the problem.\n\nhttp://docs.fluentd.org/articles/out_file\n\nAnd if you have a question, please post it on Fluentd ML first.\n\nhttps://groups.google.com/forum/#!forum/fluentd\n Yes. out_file flushes files when reached `buffer_chunk_limit` or passed `time_slice_format` time.\nIf you want to check out_file's content in realtime, please use `symlink_path` with `buffer_type file`.\n\nhttp://docs.fluentd.org/articles/out_file#symlinkpath\n @cloud-sec Maybe, you can use fluent-plugin-file-alternative to merge same time slice into same file > https://github.com/tagomoris/fluent-plugin-file-alternative\n Already fixed.\n  I'm not sure this is a bug of Fluentd or fluent-plugin-elb-log or fluent-plugin-elasicsearch.\nIf this is a bug of Fluentd itself, I will investigate it.\nPlease use `out_stdout` instead of `out_elasitcsearch` or insert `out_copy` with `out_stdout` plugin to investigate the problem.\n\nIf the problem is fluent-plugin-elb-log, please repost the issue on fluent-plugin-elb-log repository.\n Github's form uses Markdown so you can use ``` for pasting the your configuration or logs.\nSee > https://help.github.com/articles/github-flavored-markdown\n It seems not Fluentd's bug so close temporary.\nIf Fluentd has the problem, please reopen it.\n  https://groups.google.com/d/msg/fluentd/ZjxODonIJJo/ZGkqoRn9Wv8J\n\nFrom above thread, \"--use-v1-config\" has `include` related bug.\nFixing the bug is easy but I have one concern.\n\nAt v11, new configuration uses `@include`, not `include`.\nMaybe `@` means the system specific identifier, e.g. `@ERROR` for error stream.\n\nIntroducing `@` makes some features simply.\nWe can use `@include xxx` instead of `<include xxx>` in `<source>`.\n\nWhat do you think?\nShould we add `@` prefix for system features?\n We can support both `include` and `@include` and recommend `@include` syntax.\n @sonots Yes. `<include xxx>` is for specific case so my plan is integrated into `@include`.\n @yyamano Almost old configuration works with V1 format. This is why I leave `foo bar` syntax, not only `foo \"bar\"` for string type.\nSupporting `include` and warn the message is good for reducing the migration cost.\n  I'm not familiar with GlusterFS.\nIs this a bug of out_file or GlusterFS needs special thing?\nFor example, permission, specific client or etc?\n\nMaybe, there is no GlusterFS users in Fluentd maintainers.\nSo we can't fix GlusterFS specific problem.\nOf course, patches are welcome!\n From above discussions, this is not out_file's bug so I close the issue.\nBut maybe, we can keep the discussion if there is more useful information.\n  @yyamano Maybe, you refer the v11's source code.\nv11 branch is dead branch for now.\n  Hmm... I see.\nSome plugins seem to be depended on `$log` initialization at `lib/fluent/test.rb`.\nForcing change to all plugin authors may be difficulit.\n\nOne idea is adding `$log ||= Fluent::Log.new(Fluent::Test::DummyLogDevice.new, Fluent::Log::LEVEL_WARN)` statement to `lib/fluent/helper.rb`.\n\nWhat do you think?\n @tagomoris What do you think?\n @tagomoris It means '`test/helper.rb` should be in `fluent/plugin/test`'?\n Yes. Fixing this issue is better for now.\n\n@sonots Could you test `$log ||= Fluent::Log.new(Fluent::Test::DummyLogDevice.new, Fluent::Log::LEVEL_WARN)` instead? \nMaybe, using `DummyLogDevice` is better than `STDOUT`.\n @sonots After this change, your tests are passed?\n  Hmm.. the problem seems to convert CRLF to LF automatically in Ruby's File.\nHow about specify File::BINARY in `File.open` argument?\n  Fluentd doesn't now work on JRuby because dependent gems don't work.\nBut I think time to support JRuby because Cool.io starts to support JRuby\n\nHere are the tasks:\n- Cool.io: https://github.com/tarcieri/cool.io/issues/32\n- msgpack-jruby: I'm not sure how to support msgpack-jruby seamlessly\n  - Revived this issue > https://github.com/msgpack/msgpack-ruby/issues/3\n- Fix GVL dependent code: Can we use `thread_safe` gem? > https://github.com/headius/thread_safe\n\nIf you have any suggestion, please let me know!\n If you are interested in Cool.io on JRuby, please check this branch > https://github.com/taichi/cool.io/tree/support_jruby\n Here are our JRuby support plan.\n\n## Fluentd\n\nFluentd keeps simple. We have a plan to introduce Actor and other utilities. After that, plugin developers easy to write plugins for CRuby and JRuby.\nWe will provide `fluentd.jar` so you can easy to run Fluentd on your Java environment.\n\n## td-agent\n\ntd-agent will bundle JRE or JDK and you can choose Ruby runtime at start.\nDefault is CRuby but setting `TD_AGENT_RUNTIME=jruby` or similar variable changes the Ruby runtime in td-agent.\n  In old configuration, we can specify parameters with empty string:\n\n``` aconf\n<match mongo.**>\n  type mongo\n  tag_mapped\n  # others\n</match>\n```\n\nbut v1 can't. This format is popular so v1 should support this.\n  I have an another idea.\nHow about class method?\n\n``` rb\nmodule Fluent\n  class Supervisor\n    def self.default_options\n      {\n        # same as DEFAULT_OPTIONS\n      }\n    end\n  ...\nend\n```\n\nThis approach avoids `Marshal.load(Marshal.dump())` hack.\n Okay. Could you squash a commits?\n  Quick reply from my view point for the patch:\n- We can't merge this patch because it breaks several plugins, e.g. fluent-plugin-mongo and  tag_mapped like approach plugins,\n- `chunk_key` is achieved by current key argument. I can't see the merit of this approach excluding human readable.\n  Please see the V1 configuration document before use `--use-v1-config`.\n\nhttp://docs.fluentd.org/articles/config-file#v1-format\n Please escape **all** `\\` character.\n > i sloved it\n\nGood :)\n  Currently, some plugins implement own format feature, e.g. format to json, none and etc.\nProviding format feature officially reduces the deplicated routines.\nWe have `TextParser` to share the parse routines.\nI think we can use same approarch like `TextFormatter` with `Fluent::Registry`.\n\nWhat do you think?\n > -1 for the naming\n\n`Fluent::Registry` is internal class and already implemented. So It is outside the scope of this issue.\n @kiyoto If you have a good idea for `Fluent::Registry`, please open new issue :)\n  By `chunk_size_warn` option and `chunk_size_limit`.\n\nCurrently, buffer plugin show logs of large chunk data for 1 time emit.\nBut buffer cannot show these logs with tags and where from. It is not useful to investigate real troubles.\n\nAdd options to show where these large chunk comes from, and to drop these abnormal chunk (if specified).\n Tests fixed\n Pushed fixed code.\n @kiyoto @sonots @frsyuki Could you have a good idea for option names?\n  Related with #287 \n - Base classes are `Fluent::Plugin::Buffer::Base` and `Input::Base`, `Output::Base`\n  - Plugins are like `Fluent::Plugin::Awesome::Output`\n    - in `fluent-plugin-awesome` gem\n    - in `lib/fluent/plugin/awesome/output.rb`\n- How about file path collision in fluentd repository?\n- Using `Fluentd::` prefix or not?\n- Change plugin gem naming rule?\n Callback based start-up checking:\n\n``` ruby\ndef start\n  @thread = Thread.new { @started = true  }  # use actor actually\nend\n\ndef check_start?\n  @started\nend\n```\n\nWe need some feature to support checking threads actually started or not, by callback (from fluentd engine, or test library).\n Buffer plugins should have some additional hook points to:\n- count emitted records\n- check chunk size\n- check elapsed time\n\nFinally, both of output plugins and buffer plugins should be able to determine when buffers should be flushed.\n v11 branch has new implementations. > https://github.com/fluent/fluentd/tree/v11/lib/fluentd/plugin\nWe can merge these API ideas.\n  - remove setting global logger in lib/fluent/test.rb\n  - developer cannot understand when this assignment happen\n  - global logger assignment exists in test/helper\n- dummy logger should contain messages that logger writes\n  - to assert logger's output from core/plugin tests\n- test dummy logger is set in default in create_driver\n  - to test logger message in configure\n DummyLogDevice\n- suppresses the plugin's log **on console**\n- store logs on its instance variable to test logs are written or not\n :+1:\n  I agree showing diff is good idea and we can't break the current format.\n\nI think supporting format at each plugin is not good idea.\nSo implementing Formatter like TextParser seems more flexible.\n @sonots Did you release this `stdout` as a plugin?\n I don't understand how this option is useful for other users.\n\n@tagomoris @frsyuki @kiyoto @kzk \nWhat do you think? If you okay, I will merge it.\n  I have 2 ideas to support this issue.\n- Fixed format by setting `format` in http configuration\n  - Should reject other format when format is specified.\n- Support `format` parameter via URL request parameter\n  - Keep current behaviour. Current in_http accepts both msgpack and json format.\n\nWhich is better?\n @kiyoto So in_http's behaviour is like below?\n- if `format` is not specified, then the behaviour is same as current implementation\n- if `format` is specified, then check the format\n I will implement this after release td-agent2.\n My enhancement plan:\n1. support `format` option\n2. support batch mode\n3. support gzip/deflate compression\n `format` option is implemented.\nI will try to implement 2 and 3 ideas later.\n  :+1: to current v1 behavior\n  LGTM\n  Variations should be a parser plugin, not bundled parser, i think.\n LGTM\n  Extend DSL to configure parameters of plugins, to define nested sections with its parameter name/type definitions.\nAdd proxy object as receiver of `config_*` methods to implement this to configure recursively with config element trees.\n- definition example\n\n``` ruby\n# class GreatNoodleReportPlugin\nconfig_param :name, :string, default: \"frsyuki\"\nconfig_section :userinfo, required: true, multi: false do # for just 1 <userinfo> section\n  config_param :address, :string\n  config_param :age, :integer\n  config_param :admin, default: false\nend\nconfig_section :noodle, param_name: :noodles, required: false, multi: true do # for any times of <noodle NAME> sections\n  config_argument :name, :string # section argument NAME required (default option is also available)\n  config_param :cost, :integer\n  config_section :shop, param_name: 'shops' do # string value is also acceptable\n    config_argument :magazine_page do |val|\n      raise Fluent::ConfigError, \"magazine_page argument is required\" if val.nil? || val.empty?\n      val.to_i\n    end\n    config_param :name, :string, default: nil\n    config_param :stars, :integer, default: nil\n  end\nend\n```\n- configuration example\n\n``` apache\n<source>\n  type great_noodle_report\n  name repeatedly\n  <userinfo>\n    address Marunouchi\n    age 99\n    admin false\n  </userinfo>\n  <noodle ramen>\n    cost 600\n    <shop 50>\n      name ten-ichi\n      stars 5\n    </shop>\n    <shop 51>\n      stars 1\n    </shop>\n  </noodle>\n  <noodle tsukemen>\n    cost 800\n    <shop 32>\n      stars 800\n    </shop>\n  </noodle>\n</source>\n```\n- ruby code to use these values\n\n``` ruby\n# in plugin's instance methods\n@name #=> \"repeatedly\"\n@userinfo.age #=> 99\n\n@noodles # Array(size 2), not \"noodle\" by param_name\n\n@noodles[1].name #=> \"tsukemen\"\n@noodles[1].cost #=> 800\n@noodles[1][:cost] #=> 800\n@noodles[1].shops # Array(size 1)\n@noodles[1].shops.first.stars #=> 800\n```\n\nNOTES:\n- Max nest depth is not limited\n- Both of v1 and traditional configuration syntax may be supported\n  - This patch does NOT touch internals of Parser, Element or types\n #295 \n Add some utility methods of Fluent::Config::Section, and its specs\n Fixed and pushed 1e068cef5d9ed33c261a374cdbc2e79ada6ac869\n- broken syntax and check test pass on 1.9.3/2.0.0\n `config_argument` is required to specify default values and/or required/optional, rather than to parse values.\n Just pushed code that shrink dup code, and add tests for 2 or more default value setting.\n Oh, what's happen...? > TravisCI\n I cannot understand why tests fails on TravisCI. (Ruby 2.1.0 on my laptop ends with success.)\n I see. Thanks!\n  Related issues are closed.\nSo this pull request is also closed.\n  Under current version of fluentd, plugins implements sub-sections in configurations on their own. It requires calls of `Config.bool_value` or others, without `config_param` or other utilities methods for configuration parameters.\n\nThis is proposal of API to manage sub sections of plugin configurations:\n\n``` apacheconf\n# plugin conf\n<match *>\n  type ...\n  <default>\n    required true\n    name DEFAULT\n    power 100\n  </default>\n  <child A>\n    name A\n    power 60\n  </child>\n  <child B>\n    name B\n    <item X>\n      name X\n    </item>\n  </child>\n</match>\n```\n\n``` ruby\n# plugin impl\n  config_section :default, required: true, multi: false do\n    config_param :required, :bool, default: false\n    config_param :name, :string\n    config_param :power, :integer\n  end\n  config_section :child, param_name: 'children', required: false, multi: true do\n    config_param :name, :string\n    config_param :power, :integer, default: nil\n    config_section :item do\n      config_param :name\n    end\n  end\n\n  def configure(conf)\n    super\n    @default #=> Config::Element\n    @children #=> [Config::Element, ... ]\n    @children.first.name #=> String\n    @children.first.item #=> [Config::Element, ... ]\n\n    @default + @children.first #=> merged element\n  end\n```\n\nMy options for this implementations are:\n- only for v1-config? or for both of traditional and v1?\n- needs any restrictions for nested level? or unlimited?\n\nHow do you consider about this idea?: @repeatedly @frsyuki @sonots\n I've just considered that:\n`@children.first` should be a instance of `Config::Element`? or Hash (w/ symbol keys)? or Object instance w/ specified methods by `config_param`?\n Now I'm trying to add `Fluent::Config::Section` class for members of `@children`, which returns configured parameters as `@children.first.attr_name`.\n `Fluent::Config::Element` instances exists in the object tree of `conf`, but all instance variables from `config_param` are not `Element` instances, aren't they?\n\nFurthermore, parameter values by config_param should be ruby objects in instance variables. Root object is now plugin instance. Containers for sub sections should be a object, not Hash-like containers.\n #298 merged.\n  'new config' (`--use-new-config` and `fluent/config/new_parser`) is bad name. What is the name of next version of `new`? What time we call it as `non-new`?\n I propose `v1-config` or `strict-config`.\n Good work! :clap: \n  Could you post the question on ML first?\nIf the problem is the bug of Fluentd, please reopen it.\n np. If you have any question, please post it on ML :)\n  Please post to ML first.\n\nhttps://groups.google.com/group/fluentd\n\nIf this is a bug of Fluentd, then reopen it.\n Could you create a patch?\nWe don't have Solaris environment.\n  After merged https://github.com/fluent/fluentd/pull/277, we will release new Fluentd version.\nAfter that, we will also release new td-agent.\n  v11 has new configuration format.\nIt is useful and it resolves several problems on old configuration format.\n\nI have a plan to port this format but we need to discuss its implementation.\nThe main problem is parameter typing.\nThere are two approach:\n- Parser returns typed value and next layer(e.g. `config_param`) receives such value and check the type.\n- Parser returns string value and next layer(e.g. `config_param`) receives string value and convert value to any type.\n\nI don't know the details of v11 configuration implementatin.\n\n@frsyuki @tagomoris @sonots\nDo you have any suggestion? You are the v11 branch committers.\n Okay, latter case is better. I will implement it.\n\nAnd next disscussion is arry / hash literal.\nFrom above spec, `[a,b]` array is converted to `[\"a\", \"b\"]`.\nThis seems not popular, so I think JSON's array / object or Ruby's array / Hash is better.\n\nWhat do you think?\n  Since Fluentd v0.10.50, input plugins are stopped before output plugins so the stability is better than before.\n\nI want to avoid adding SIGNAL because handling SIGNAL is hard on some environments and SIGNAL slot is limited.\nBetter approach seems to provide option or another agent plugin. Hmm...\n `--without-source` is good for most cases?\nIf so, I will implement it.\n I'm not sure how much time do we need to implement unix domain socket approach.\n\n@tagomoris @sonots Can you estimate the implementation cost?\n I send `--without-source` option PR. See: https://github.com/fluent/fluentd/pull/377\n  Good catch!\n  Last step of #269 , merge in_tail_ex into in_tail.\nThe different from original in_tail_ex is below:\n- `refresh_interval` is `60` by default. The user should set `refresh_interval XXs` for watching new files\n- expand_date is always `true`\n- `read_from_head` is `false` by default. So you should set `true` when emulates original `in_tail_ex`.\n\nThis pull request changes in_tail internal, so I need some testers.\n## UPDATED (Mar/28/2014)\n\nrefresh_interval changed from `nil` to `60` seconds.\n @frsyuki I added cleaup code for PositionFile. Could you check it again?\n I will merge this pull request in half an hour later.\n  Thank you for trying Windows branch!\n\n@okahashi117 @MasayukiKiyota Could you check this problem?\n  @frsyuki Could you check this pull request. You are the first author of this plugin.\n It seems no problem, so just merged.\n\n@frsyuki If you have any comment, please comment it here.\n  > The second issue is that shutdown of plugins are blocked because in_tail plugin contiues to reading logs. \n\nFrom this patch, Fluentd doesn't wait the apache / nginx shutdown log flush?\n @sabottenda Yeah. Chaging in_tail behavior needs more discussion I think. The first case, I can merge it soon.\n @sabottenda Could you remove in_tail patch from this pull request? I have a plan to release new fluentd. After removed in_tail patch, I can merge this pull request.\n Thank you!\n  I don't have a Solaris machine and knowledge.\nIf you can fix the problem of Cool.io gems, please send a pull request to Cool.io.\n So, upgrading gcc resolves the problem?\n Okay. gcc 3.x is too old.\nI decided to stop such old version support.\n  First step of https://github.com/fluent/fluentd/issues/269, merging in_tail_multiline feature.\nThe different from original in_tail_multiline is below:\n- 'format multiline' is required.\n- Use `format1 /multiline regexp/` instead of `format /multiline regexp/`.\n- No automatic flush. At shutdown phase, remaining lines are flushed.\n\nThe configuration example of https://github.com/tomohisaota/fluent-plugin-tail-multiline#case-where-first-line-does-not-have-any-name-capture case:\n\n``` aconf\n<source>\n  type tail\n  path /path/to/tail/file\n  tag tail.multiline\n\n  format multiline\n  format_firstline /----/\n  format1 /time=(?<time>\\d{4}-\\d{1,2}-\\d{1,2} \\d{1,2}:\\d{1,2}:\\d{1,2}).*message=(?<message>.*)/\n</source>\n```\n\nNeed feedback:\n- `format_firstline` name. Is there more better parameter name?\n- `none` support is needed?\n\n@tomohisaota Could you check this changes?\n > In short, \"@line_buffer\" should be defined per parser, not per plugin.\n> And it seems that new code has same problem.\n\nAh, good catch. I will fix this problem.\nThanks!\n I fixed the problem.\n\nAnd I changed `receive_lines` callback signature to take TailWatcher instance for supporting multiline and ex plugin.\nIt breaks the compatibility, so I will change class name like below:\n\n``` ruby\nclass Fluent\n  class NewTailInput < Input\n    register_input('tail', self)\n    ...\n  end\n\n  # for other existence plugins.\n  class TailInput < Input\n    ...\n  end\nend\n```\n first line is adjective, so `firstline_format` or `format_startline` seems better.\n\n@kiyoto @hkmurakami\nDo you have any suggestion?\n @frsyuki Could you check this pull request? If no problem, I will merge it.\n  From our experiences, some Fluentd users use in_tail_ex or in_tail_multiline instead of in_tail.\nAnd for advanced use-case, some users want more rich in_tail plugin which has in_tail_ex and in_tail_multiline combination.\n\nI think providing these features in in_tail is better for Fluentd users.\nWhat do you think?\n\n@yosisa\n@tomohisaota\n @yosisa Do you have any concern?\nI will finish in_tail_multiline merge soon.\nAfter that, I want to merge in_tail_ex features into in_tail.\n Okay. I just merged the pull request that supports in_tail_multiline feature.\nNext step is in_tail_ex merge.\n @graysky Yes. I will pull request it after tomorrow lecture.\nAnd I have a plan for releasing fluentd 0.10.45 in this week.\n @graysky I just did pull request. Could you check the code and test the your environment?\n Just merged two pull requests.\n  Could you post your question to Fluentd ML first?\n\nhttp://groups.google.com/group/fluentd\n I close this ticket temporary. If this is a bug of Fluentd parser, reopen it.\n Hi f0,\n\nIt seems '775: Mar 4 12:54:53.248 CET:' is invalid time format.\nWhy '775: ' is included?\n\n> Time.strptime('Mar  4 12:00:48 111', '%b %d %H:%M:%S')\n> => 2014-03-04 12:00:48 +0900\n> Time.strptime('775: Mar  4 12:00:48 111', '%b %d %H:%M:%S')\n> ArgumentError: invalid strptime format - `%b %d %H:%M:%S'\n\nCisco's devise always add this number to syslog log?\n\nThanks,\nMasahiro\n\nOn Tue, Mar 4, 2014 at 9:11 PM, f0 notifications@github.com wrote:\n\n> Hi,\n> \n> i try to use fluentd with the in_syslog plugin for logs from network\n> devices (cisco), i have installed in fedora20 with gem, and this is the\n> config:\n> \n> bash-4.2# fluentd -vv --conf=/etc/fluent/fluent.conf\n> 2014-03-04 10:53:05 +0000 [info]: fluent/supervisor.rb:171:supervise: starting fluentd-0.10.44\n> 2014-03-04 10:53:05 +0000 [info]: fluent/supervisor.rb:273:read_config: reading config file path=\"/etc/fluent/fluent.conf\"\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'file'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'memory'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'debug_agent'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'exec'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'forward'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'gc_stat'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'http'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'monitor_agent'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'object_space'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'status'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'tcp'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'unix'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'syslog'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'tail'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'copy'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'exec'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'exec_filter'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'file'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'forward'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'null'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'roundrobin'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'stdout'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'tcp'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'unix'\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'test'\n> 2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:85:block in configure: gem 'fluent-plugin-elasticsearch' version '0.2.0'\n> 2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:85:block in configure: gem 'fluentd' version '0.10.44'\n> 2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:89:configure: using configuration file: <ROOT>\n>   <source>\n>     type syslog\n>     port 5140\n>     bind 0.0.0.0\n>     tag syslog\n>     log_level debug\n>   </source>\n>   <match syslog.**>\n>     type elasticsearch\n>     host 10.61.9.20\n>     port 9200\n>     logstash_format true\n>     flush_interval 10s\n>   </match>\n>   <match fluent.**>\n>     type elasticsearch\n>     host 10.61.9.20\n>     port 9200\n>     logstash_format true\n>     flush_interval 10s\n>   </match>\n> </ROOT>\n> 2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:99:block in configure: adding source type=\"syslog\"\n> 2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:115:block in configure: adding match pattern=\"syslog.**\" type=\"elasticsearch\"\n> 2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'elasticsearch'\n> 2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:115:block in configure: adding match pattern=\"fluent.**\" type=\"elasticsearch\"\n> 2014-03-04 10:53:05 +0000 [debug]: plugin/in_syslog.rb:183:listen: listening syslog socket on 0.0.0.0:5140 with udp\n> \n> now if i send syslog messages from devices, or via logger command i got\n> these error:\n> \n> 2014-03-04 11:54:11 +0000 [warn]: plugin/in_syslog.rb:176:rescue in receive_data: \"<189>775: Mar  4 12:54:53.248 CET: %LINK-5-CHANGED: Interface GigabitEthernet2/0/18, changed state to administratively down\" error=\"invalid strptime format - `%b %d %H:%M:%S'\"\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/share/ruby/time.rb:394:in`strptime'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:28:in `block in initialize'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in`call'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `parse'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:164:in`block in receive_data'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `each'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in`receive_data'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `call'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in`on_readable'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/io.rb:170:in `on_readable'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in`run_once'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run'\n> 2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:118:in`run'\n> 2014-03-04 11:54:12 +0000 [debug]: fluent/supervisor.rb:345:block in install_main_process_signal_handlers: fluentd main process get SIGINT\n> 2014-03-04 11:54:12 +0000 [debug]: fluent/supervisor.rb:348:block in install_main_process_signal_handlers: getting start to shutdown main process\n> 2014-03-04 11:54:12 +0000 [debug]: fluent/supervisor.rb:224:block in install_supervisor_signal_handlers: fluentd supervisor process get SIGINT\n> 2014-03-04 11:54:12 +0000 [debug]: fluent/supervisor.rb:345:block in install_main_process_signal_handlers: fluentd main process get SIGINT\n> \n> 2014-03-04 12:00:48 +0000 [warn]: plugin/in_syslog.rb:176:rescue in receive_data: \"<5>Mar  4 12:00:48 111: ssss\\x00\" error=\"invalid strptime format - `%b %d %H:%M:%S'\"\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/share/ruby/time.rb:394:in`strptime'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:28:in `block in initialize'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in`call'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `parse'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:164:in`block in receive_data'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `each'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in`receive_data'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `call'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in`on_readable'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/io.rb:170:in `on_readable'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in`run_once'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run'\n> 2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:118:in`run'\n> 2014-03-04 12:01:05 +0000 [debug]: fluent/supervisor.rb:345:block in install_main_process_signal_handlers: fluentd main process get SIGINT\n> 2014-03-04 12:01:05 +0000 [debug]: fluent/supervisor.rb:348:block in install_main_process_signal_handlers: getting start to shutdown main process\n> 2014-03-04 12:01:05 +0000 [debug]: fluent/supervisor.rb:224:block in install_supervisor_signal_handlers: fluentd supervisor process get SIGINT\n> 2014-03-04 12:01:05 +0000 [debug]: fluent/supervisor.rb:345:block in install_main_process_signal_handlers: fluentd main process get SIGINT\n> \n> ideas?\n> \n> regards f0\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/fluent/fluentd/issues/268\n> .\n  Hmm. Merge seems no problem, but potentially this pull request is not needed.\nBy this pull request, the problem is moved to Ruby's sort order.\n\nSeparating configuration which depends on inclusion order of '*' is bad approach generally.\nI think you should re-consider your separating granularity of configurations.\n No, no, no. Tool is not related.\nI mean, if your configuration has different behaviour between\n\n``` aconf\ninclude a.conf\ninclude b.conf\n```\n\nand\n\n``` aconf\ninclude b.conf\ninclude a.conf\n```\n\n, this is bad. In this case, you have a same or overriding <match> directive across configurations, so you should reconsider tag routing.\nI'm not sure why base, web and xxx modules have same match.\n  Awesome work!\nBut I am of two minds about merging this pull request.\n1. Fluentd supports 1.9. Mixing the code which only works on 2.0 is very confusing.\n2. This code is hacky, e.g. Thread.current for separating specs, need `using` in target code.\n3. We are considering v1 with v11 codes. After merging v11, this code could be supported naturally.\n\nOne possible idea. Releasing this code as an another gem, fluentd-spec?\n  Thx!\n  Could you check this plugin?\n\nhttps://github.com/sonots/fluent-plugin-keep-forward\n  Ah, I forgot to update it. Thank you :+1: \n  You are right. Thx!\n  `TCPSocket.open(listen_address, @port) {|sock| }` is for stopping event loop.\nIf a connection causes a timeout, does it still affect event loop?\n Ruby bugs related with this issue:\n\nhttps://bugs.ruby-lang.org/issues/9525\n  Adding `log_level` option to plugin configuration.\nIt enables setting log_level separeted from global log level.\n\n``` conf\n<source>\n  type tail\n  ...\n  log_level error # can prevent \"pattern not match\"\n</source>\n```\n\nThis doesn't break existence plugins because a plugin can still use `$log` and `Input` /  `Output` use `$log` object in `log` method by default.\nIf plugin auther tries to support log_level, then needed action is only using `log` instead of `$log` and upgrading plugin's version with latest fluentd dependency.\n\nNeed some tests with actual configuration but tests now are passed.\n @frsyuki I know but log rotation is an another issue.\nMultiprocess safe logger is available since 2.1.0, so Fluentd can't depend on such logger (or should use https://github.com/sonots/process_safe_logger ?).\n I wrote an article about `log_level` parameter for plugin developers.\n\nhttp://repeatedly.github.io/2014/02/new-log-level-parameter/\n  Parsers in Fluent::TextParser are utility library.\nCurrent implementaion depends on `$log` and it causes hard to use by other script.\n\nI think $log should be removed from each Parsers.\n\nPros:\n- code becomes simply\n- other script can use without explicit $log instantiation.\n\nCons:\n- breaking compatibility with -v option because logging position is changed\n  First step of https://github.com/fluent/fluentd/issues/250\n\nI removed obsolete features and applying fluentd core format to codes.\nAdditionally, I created spec directory for newest plugins.\nWe have a plan to replace test framework with RSpec, so I think this is not a problem.\n\n@sonots Could you check the code?\n Temporary closed. After introduced actual Filter mechanizm,\nI re-implemented grep filter.\n  This change breaks the record format user expects, so adding options is better.\n`add_http_header true/false` or `include_headers foo,bar,baz`.\n just merged. Thx!\n  Fluentd developers discussed the release plan about next Fluentd.\nWe are now developing v11 but we noticed some features can be merged into v10 without breaking compatibility.\n\nOn the other hand, current Fluentd versioning is very confusing.\nWe call v0.10.x v10 stable version and v0.11.x v11 next major version but\nincreased version number is minor version, not major version.\n\nFor clear versioning and Fluentd core improvment, I want to release v1 which extends v0.10.x with some v0.11 features.\n\nHere is the tasks:\n## Must\n- Support new configuratin format\n  - ~~v1 format~~: https://github.com/fluent/fluentd/pull/293\n  - system configuration: https://github.com/fluent/fluentd/pull/365\n- Support Gemfile based plugin managemant\n  - ~~add `--gemfile` option~~: https://github.com/fluent/fluentd/pull/261\n- Migration to non global APIs, e.g. `$log` to `log`, `Engin.emit` to `emit`. Keep global APIs for existing plugins\n  - ~~Migrating `log`~~: https://github.com/fluent/fluentd/pull/255\n- Support filter and label feature for flexible event handling.\n  - Filter\n  - Error stream\n## Nice to have\n- Introducing Actor\n- Replace server core with ServerEngine\n- etc...\n\nIf you have any question, please let me know!\n My plan is releasing v1 after finished to implement Filter mechanizm.\n`ServerEngine` and other nice features are introduced in v1.x minor versions.\n Road map is here: https://github.com/fluent/fluentd/wiki/V1-Roadmap\n  From our Fluentd / td-agent experience, we decided to bundle several filter-like plugins.\nHaving checked some use-cases, following plugins seem useful.\n- Modify record (e.g. record-modifier, record-reformer)\n- Select record (e.g. grep)\n- Handle tag (e.g. rewrite-tag-filter)\n\ngrep plugin is very simple, so merging into fluentd core is easy.\nrecord-modifier and record-reformer are bit different, so merging features are needed first.\nrewrite-tag-filter is already bundled in td-agent.\n\nI don't want to bundle the plugin which has many gem dependencies.\nSo bundle grep and modify record type plugin is good as the first step in v1 release.\n\nWhat do you think?\n @tagomoris @frsyuki @kzk @kiyoto @hotchpotch \n\nIf you have any question, please let me know!\n\nI will try to port fluent-plugin-grep into core first.\n  I think less use-cases than SetXXXKeyMixin.\n`Fluent::TextParser` handles non-typed format like CSV, TSV and etc.\nThis is why I added `TypeConverter` to `Fluent::TextParser`.\n\nOn the other hand, almost existence input plugins know the record value types, e.g. sql, systemd, mongo_tail, ...\n fluent-mixin-type-converter seems good approach and I close this issue now.\n  I will check the code later.\n\nOne thing: Maybe, `start_reading_head` seems not good for configuration name.\n@kiyoto Do you have a good name for this behaviour?\n `read_from_beginning` or `read_from_top` ?\n @sonots You are right. pos_file is most important.\n I think in_tail should print the warning when `read_from_head` is `true` without `pos_file` parameter.\n Deleted 2 tests are not important?\nI'm not sure why these tests are failed on travis-ci, but travis-ci uses 64bit Linux to run tests.\nThe failed reason is travis-ci problem or Linux problem?\n Hm. Could you check same tests on Ruby 2.0.0 and Linux?\nIf this error occurred in Linux, we can't release such feature because almost Fluentd users use Linux.\n\nFor example, https://github.com/fluent/fluentd/pull/245 this pull request fails on Linux at first.\nWe detected that the cause is the different thread implementation between Linux and Mac.\nMaybe, your case is similar to this.\n  Fluentd itself has --user and --group option to specify user and group.\n\nhttps://github.com/fluent/fluentd/blob/master/lib/fluent/command/fluentd.rb#L70\n\nHow about set \"/etc/default/td-agent\" with following content?\n\n``` sh\nDAEMON_ARGS=\"--group adm\"\n```\n\nThis DAEMON_ARGS is used in td-agent.init.\n I may mis-understand the your opinion.\n\n> We'd prefer not to run fluentd as root,\n\nWhat does this sentence mean?\nCould you tell me the detail of your requirement?\n\nI checked the td-agent status on ubuntu:\n\n``` sh\n# check user and group of td-agent process\n$ ps -eo '%c %p %u %g' | grep td-agent\nruby              721 td-agent td-agent\nruby              724 td-agent td-agent\n\n# check permission of logs\n$ ls -l /var/log/td-agent/\n-rw-r----- 1 td-agent td-agent  4992 Jan 16 02:02 td-agent.log\n```\n  Need test which checks `@writer_current_position` value in test/output.rb.\n I will merge this pull request after investigated why travis-ci failed with `instance_variable_get`...\n  Does this really solve the problem?\nI applied your patch and try same configuration but still failed.\n\n``` diff\ndiff --git a/lib/fluent/config.rb b/lib/fluent/config.rb\nindex a006e75..4edca80 100644\n--- a/lib/fluent/config.rb\n+++ b/lib/fluent/config.rb\n@@ -168,7 +168,7 @@ module Fluent\n           line.force_encoding('UTF-8')\n           @i += 1\n           line.lstrip!\n-          line.gsub!(/\\s*(?:\\#.*)?$/,'')\n+          if  /\\s*(?:\\\\#.*)?$/.match(line)[0].length==1 then line.gsub!(/\\s*(?:\\#.*)?$/,'') end\n           if line.empty?\n             next\n           elsif m = /^\\<([a-zA-Z0-9_]+)\\s*(.+?)?\\>$/.match(line)\n```\n\n```\n% RUBYLIB=~/dev/fluentd/fluentd/lib fluentd -c tail_test.conf\n2014-01-03 23:36:40 +0900 [info]: starting fluentd-0.10.42\n2014-01-03 23:36:40 +0900 [info]: reading config file path=\"tail_test.conf\"\n2014-01-03 23:36:40 +0900 [info]: gem 'fluentd' version '0.10.39'\n2014-01-03 23:36:40 +0900 [info]: using configuration file: <ROOT>\n  <source>\n    type tail\n    path /Users/repeatedly/tmp/fluentd/foo\n    pos_file /Users/repeatedly/tmp/fluentd/pos\n    format /(?<yewu>[a-zA-Z0-9_\\/\\.\\-]*)\n    tag tail.test\n  </source>\n  <source>\n    type forward\n  </source>\n  <match **>\n    type stdout\n  </match>\n</ROOT>\n2014-01-03 23:36:40 +0900 [info]: adding source type=\"tail\"\n2014-01-03 23:36:40 +0900 [error]: config error file=\"tail_test.conf\" error=\"Unknown format template '/(?<yewu>[a-zA-Z0-9_\\\\/\\\\.\\\\-]*)'\"\n2014-01-03 23:36:40 +0900 [info]: process finished code=256\n2014-01-03 23:36:40 +0900 [warn]: process died within 1 second. exit.\n```\n  This issue seems a simply question.\nCould you use mailing list for such purpose?\n\nhttps://groups.google.com/forum/#!forum/fluentd\n  This is known issue and next version already solved this problem.\n\nhttps://github.com/fluent/fluentd/issues/107#issuecomment-13671225\n  > Hmm, I should commit directly, with this pull-request comment on commit comment.\n\nWait. Your commit breaks tests because you did typo.\nAt least, please wait a travis-ci response.\n  I think `try_flush_interval` name is enough for this case.\nThis option is very rare and almost users never use this feature.\n  @mrb Thank you for the pull request. I will check Code Climate later.\n Ah, I forgot to merge this. Thx!\n  Sorry, I don't understand your situation correctly.\n\n>  i transfer an wrong structure events to the fluentd service\n\nIf input plugin receives wrong format event, then input plugin rejects such event with dumping log.\nCould you show me the example?\n\n> can multiple threads let the new events output and retrying at the same time ? and now fluentd support multiple threads ?\n\nBufferedOutput has `num_threads` option to flush the buffer's chunks in a parallel fashion.\n\nhttp://docs.fluentd.org/articles/out_forward\n quick reply:\n\n> Then i used num_threads && set to 3 , like : num_threads 3, but it didn't work, the problem still continue.\n\nSorry for confusing. `num_threads` now effects only IO bound performance.\nSo yes for \"now fluentd support multiple threads\"\nbut no yet for \"can multiple threads let the new events output and retrying at the same time ?\"\nSorry, it's my mistake.\n\n> This log will be blocked to output to mysql until fluentd retry's stoped.\n\nIf you may be possible to insert such lacked record, then mysql doesn't seem fit your case.\n Maybe problem is here: https://github.com/fluent/fluentd/blob/master/lib/fluent/output.rb#L243\nI will check why round robin is still TODO.\n  For https://github.com/fluent/fluentd/issues/234\n I don't know why above test failed on travis-ci...\n @frsyuki I improve TcpHandler. Please re-check.\n  I checked in_tail and this code uses several following block:\n\n``` rb\nif env_check\n  # Linux / Mac code\nelse\n  # windows code\nend\n```\n\nThis seems messy and there are some dead code.\nWindows and Linux are different policy / implementation.\nSo separating code is better for maintenance and performance.\n If you fix several technical problems, please re-consider this issue.\n Okay, I close this issue temporary.\n  From v11, restarting worker keeps socket resource to accept the request from clients.\nI think the requirement depends on system architecture.\nSomeone wants to reject the client request for forwarding to other servers.\n\nSelecting keep / re-create (same as v10) is better.\n  If you have any suggestion for fluentd documentation, please use https://github.com/fluent/fluentd-docs repository.\n  Another approach of https://github.com/fluent/fluentd/pull/224\n @sonots @tagomoris Added '1' support in bool conversion.\n If there is no comment, I will merge this pull request tomorrow.\n  I merge this pull request manually.\n  Sorry, current our td-agent supports only squeeze and lenny yet.\n\n> provide the debian source package so that one can repack the .deb?\n\nWe provides debian source package. \n\n``` sh\n% sudo apt-get source td-agent\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nNeed to get 13.3 MB of source archives.\nGet:1 http://packages.treasure-data.com/precise/ precise/contrib td-agent 1.1.18-1 (dsc) [965 B]\nGet:2 http://packages.treasure-data.com/precise/ precise/contrib td-agent 1.1.18-1 (tar) [1892 kB]\nGet:3 http://packages.treasure-data.com/precise/ precise/contrib td-agent 1.1.18-1 (diff) [11.4 MB]\nFetched 13.3 MB in 11s (1165 kB/s)                                                                                                                                                                                                                                                  \ndpkg-source: warning: extracting unsigned source package (td-agent_1.1.18-1.dsc)\ndpkg-source: info: extracting td-agent in td-agent-1.1.18\ndpkg-source: info: unpacking td-agent_1.1.18.orig.tar.gz\ndpkg-source: info: unpacking td-agent_1.1.18-1.debian.tar.gz\ndpkg-source: info: applying debian-changes-1.1.18-1\n```\n\nAbove is 'apt-get source' result on Ubuntu Precise. Can't you get source package on Debian Wheezy?\n  This is an enhancement for **RegexpParser**.\n\nMany users use **RegexpParser** for own log format in **in_tail** plugin.\nUnlike **Apache2Parser**, **RegexpParser** doesn't cast the value.\nIn this result, **in_tail** user needs type casting mechanizm after collects events.\n\nAdding type cast to **RegexpParser** helps such users for performance and configuration simplicity.\nMy proposal is below.\n\nSpecify type and format in named capture of `format` option:\nConfiguration format is `<name|type|format>` like below\n\n```\nformat /^(?<host>[^ ]*) [^ ]* (?<user|string>[^ ]*) \\[(?<time>[^\\]]*)\\] \\[(?<date|time|%d/%b/%Y:%H:%M:%S %z>[^\\]]*)\\] \"(?<flag|bool>\\S+)(?: +(?<paths|array>[^ ]*) +\\S*)?\" (?<code|float>[^ ]*) (?<size|integer>[^ ]*)$/\n```\n\nSupported types:\n- string (same as no specify)\n- bool (`true` and `yes` string converted to `true`)\n- integer\n- float\n- time (specify time_format via 3rd format)\n- array (specify separator via 3rd format. default is `,`)\n\nNew other configuration:\n\nAdd `name_separator` option to specify `<name|type>`'s separator. default is `|`.\n\nWhat do you think?\n @sonots \n\nYeah. My first implementation supports `0` to `false` or `1` to `true` but removes temporary because `0` and `1` are `true` in Ruby.\nThis is a discussion point for other users.\n @sonots I'm not sure the details of Perl. `0` is `false`, otherwise 'true' ?\nHow handle the number to boolean conversion is better?\n- 0 is false, otherwise true\n- 0 is false, 1 is true, otherwise false\n- etc?\n @sonots @frsyuki @tagomoris Do you have any concern?\n @tagomoris Do you think adding 'types' like paramter like below?\n\n```\ntypes foo:integer bar:array\n```\n @sonots \n- `yes` is false?\n- `no` is true?\n Close this issue because https://github.com/fluent/fluentd/pull/229 is merged.\n  Relatead to https://github.com/fluent/fluentd/issues/221 issue.\n\nRemaining discussion is dump message.\nCurrent logs:\n\n```\n2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:154:rescue in emit_stream: emit transaction failed  error_class=RuntimeError error=#<RuntimeError: syslog>\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/out_stdout.rb:43:in `emit'\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/match.rb:36:in `emit'\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/engine.rb:151:in `emit_stream'\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/engine.rb:131:in `emit'\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_object_space.rb:111:in `on_timer'\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_object_space.rb:37:in `call'\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_object_space.rb:37:in `on_timer'\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run_once'\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run'\n  2013-12-04 15:05:53 +0900 [warn]: fluent/engine.rb:140:emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_object_space.rb:63:in `run'\n2013-12-04 15:05:53 +0900 [error]: plugin/in_object_space.rb:113:rescue in on_timer: object space failed to emit error=\"foo.bar\" error_class=\"RuntimeError\" tag=\"foo\" record=\"{...}\"\n2013-12-04 15:05:55 +0900 [warn]: fluent/engine.rb:154:rescue in emit_stream: emit transaction failed  error_class=RuntimeError error=#<RuntimeError: syslog>\n  2013-12-04 15:05:55 +0900 [warn]: plugin/in_object_space.rb:111:on_timer: suppressed same stacktrace\n```\n @frsyuki @tagomoris @sonots please check!\n  I got some reviews and passed in https://github.com/fluent/fluentd/issues/220\nPlease someone merge :)\n  Related to https://github.com/fluent/fluentd/issues/220\n\nImprove Logger like syslogd suppression.\n @frsyuki \nI pushed commits to logger-suppression branch.\n\nhttps://github.com/fluent/fluentd/commit/993eb27285844384fb638a8e28991ff56b948410\n\nThis commit suppresses only stacktrace. Maybe option name change or error message suppression is needed.\n Changing option name and implemenetain to `--suppress-repeated-stacktrace-interval`.\nPlease re-check.\n\nhttps://github.com/fluent/fluentd/compare/logger-suppression\nhttps://github.com/fluent/fluentd/commit/3667b57180c9245150c9ddbae2da19cf82f04411\n Does anyone have a comment or suggestion?\n @frsyuki \n\n> How do you suppress regular messages (non-stacktrace messages)?\n\nIf suppress these messages, we should provide another option.\n@sonots says \"We are checking error rate using error message, so we don't need error message suppression\".\n\n@thekorn \n\nHmm... do you want `--stacktrace-level` option like `--log-level`?\n\n@tagomoris \n\nAlways print or syslog like `... and suppressed repeated xxx same tracktrace` with interval?\n @tagomoris @thekorn \nI see. I understood... but\nthat change seems difficult because many fluentd users use the stacktrace for debugging and reporting in production.\n\nI think we have following candidates to suppress stacktrace.\n- tagomoris suggested suppression\n\n[stacktrace lines]\n   ... suppress same stacktrace\n   ... suppress same stacktrace\n[other stacktrace lines...]\n- syslog like suppression\n\n[stacktrace lines...]\n   ... repeated n times\n[other stacktrace lines...]\n   ... repeated n times\n- interval suppression (now logger-suppression impl)\n\n[stacktrace lines...]\n[stacktrace lines...] # output within specified interval\n[other stacktrace lines...]\n\ntagomoris's suppression is clear than others.\ninterval or syslog suppression is less size than tagomoris's suppression.\n\nWe should decide the suppression style.\n @sonots You have a same problem with stacktrace. Which approach is good for you?\n Hm... other users don't seem to have strong opinion.\nI select tagomoris approach first.\nIt is clear and easy to implement than others.\n\nFuture plans:\n- disable stacktrace dump (Markus)\n- more suppression by interval or other condition \n Close this issue. \nPlease open new issue for new option or others.\n  Currently, Fluentd and its plugin dumps log message and stacktrace.\nStacktrace is useful for debugging but it sometimes bloats log file size.\n\nFor example, when user hits 'queue size exceeds limit' error Fluentd generates tooooo large error message with same stacktrace.\nWe know why BufferQueueLimitError occur, so we don't need these stacktrace.\n\nWe should disable these stacktrace to reduce log size and clear logs.\n @tagomoris @sonots @frsyuki \n\nOne idea is input plugin should not dump a stacktrace for `emit` exception.\n`emit` mainly raises buffer related exceptions, so we can ignore these stacktraces.\nAt first, applying changes to bundled plugin seems reasonable.\n\nWhat do you think?\n I pushed above changes to fix-stacktrace-explosion branch.\nThis is not potential fix but fixes log size bloating in several environments.\n\n> It should be possible for logger to suppress the repeated messages.\n\nYeah. I opened new issue > https://github.com/fluent/fluentd/issues/221\n Related pull request is merged.\n  Seems good. Waiting travis-ci.\n  Hi,\n\nCould you paste your error log?\n @UijunLee Thank you! What is the encoding of slow query log? UTF-8 or other?\n JSON needs UTF-8 string but slow query log seems not UTF8?\n Hmm... that's strange.\nOkay, I try to reproduce the problem on my environment.\n\nCould you upload slow query log file, only problem lines, on somewhere?\nVia this github form, I can't get actual log.\n Ah, okay. It's a problem of Ruby's JSON library.\nFluentd mainly uses Yajl library.\nIt can dump above string into JSON but standard JSON which out-http plugin uses seems not.\n\nHmm...\n @UijunLee Because fluentd doesn't know application requirement.\nAFAIK, almost log collectors treat the logs as a ASCII(binary) by default.\nI heard a company applies encoding filter to collected logs.\n\nI will send pull request to out-http plugin later.\n\n> is it OK? if you want that log file, I can send you this log by email or something.\n\nSorry, it is reproduced on my environment. So uploading logs is not needed. Thank you!\n I sent pull request to out-http and added `char_encoding` parameter to fluent-plugin-record-modifier.\n\nhttps://github.com/repeatedly/fluent-plugin-record-modifier#char_encoding\n @ento Thank you!\n Close!\n  Thank you!\n  Same as https://github.com/fluent/fluentd/issues/208\n We plan to release new version in this month.\nMaybe, earlier next week.\n I will release Fluentd 0.10.40 today or tomorrow.\nI close this issue.\n  Only ruby block seems enough for me.\n`ruby` keyword is needed?\n  This is a regression of 0.10.39 and already fixed by https://github.com/fluent/fluentd/commit/f7105bc435abd5f4e74f13c5e05c625808ba1912 \nWill be fixed at next release.\n\nLatest td-agent includes above commit.\n  I can't have the gist of this issue.\nWhat does 'directory' mean?\nCreated by out_file?\n  Sorry for late reply.\n\nIn our enviroment, we can't reproduce this problem.\nNeed more information to resolve...\n @aknapp what is the status of this issue? Does @sabottenda's comment resolve your problem?\n @sabottenda has already figured out this issue. Closed.\n  >  I hope out_forward support bwlimit option. But It has very big impact for applying bwlimit patch. so I split it at this time.\n\nI agree bandwidth limitation is useful but adding this feature to `out_forward` is terrible because `out_forward` plugin is fluentd core.\nWe need more tests and brush up to merge this feature.\n I close this issue temporary.\nAfter tested on your environment and checked the quality,\nplease reopen this issue :)\n  Does someone have a strong contrary opinion for `embed`?\nI think `include` is good for keeping consistency.\n `include` in `<source>` or `<match>` breaks existence plugin, so we can't introduce `include`.\n\nMy proposal:\n\nIntroducing new `<include path />` directive. We can use this directive at any place, \nbut `include path` is allowed instead of `<include path />` when the directive is under the root, it means out-side of `<source>` or `<match>`.\n\nWhat do you think?\n @kentaro @kenjiskywalker @tagomoris My implementation is here: https://github.com/fluent/fluentd/tree/add-new-include-directive\nCould you check this?\n @kenjiskywalker @kentaro Do you have any comment? If nothing, I will merge at 30 minutes later.\n @kentaro Sorry. We need to release new version, so I use my pull request instead of yours.\n  hmm...\n\n@sabottenda Could you check this problem? \n  In english.\n\nI tried to process \"/var/log/messages\" using in_tail on CentOS but current 'format syslog' doesn't work.\n\n```\n2013-09-08 06:58:57 +0900 [error]: forward error: invalid strptime format - `%b %d %H:%M:%S'\n```\n\nPull request may resolve this problem.\n\nP.S.\n\nin_tail document on fluentd.org describes wrong code.\n @bokutin Thank you for the pull request :+1: \nI will check it later.\n\nP.S.\nIf you can, please open the pull request in english.\nBecause fluentd maintainers are not only japanese.\nIt's not mandatory, but may resolve the problem quickly :)\n Could you show me mismatched log example?\n I tried your patch but matching still failed.\n\n``` rb\nparser = Fluent::TextParser::RegexpParser.new(/^(?<time>[^ ]*\\s+[^ ]* [^ ]*) (?<host>[^ ]*) (?<ident>[a-zA-Z0-9_\\/\\.\\-]*)(?:\\[(?<pid>[0-9]+)\\])?[^\\:]*\\: *(?<message>.*)$/, {'time_format'=>\"%b %d %H:%M:%S\"})\np parser.call('Sep 8 04:31:19 hogeserver last message repeated 14 times') # failed\n```\n\nThis log is important in the first place?\nThis log itself doesn't have received log content. \nMaintain env dependent rare format is hard...\n\nWhat do you think?\n > \u305f\u3060 last message repeated n times \u3092\u5410\u3044\u305fCentOS\u306f\u5b9f\u306b\u6a19\u6e96\u7684\u306a\u69cb\u6210\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u3082\u306e\u3067\u3057\u3066\u3001\u3088\u304f\u3042\u308b\u3082\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\nI know but if supports this format, we should research other OS's syslog, rsyslong and syslog-ng.\nIt seems less merit.\n\nClosed this pull request for now.\n  > It's double disk I/O load.\n\nIs this a critical?\nIf you want none-buffered file output, you can write `NoneBufferedFileOuput` using `Output` type easily.\n I see.\n`out_file` plugin uses TimeSlicedOutput to separate files by time range.\nSo if you don't need such feature and avoid IO related system calls,\nthen non-buffered plugin maybe useful.\n  It is acceptable for me.\n\nDoes anyone have objection?\n ping @tagomoris @frsyuki @kzk \n\nDo you see any problems?\n  `format raw` seems mismatch name.\nFor me, `raw` represents 'No transformation and emit logs directly' like splunk.\n\nI want more clear name...\n `format none` or `format plain` are candidate.\n\nFor me, `plain` seems to be similar to `raw`.\nSo :+1: for `format none`.\n\nI wait a day for decision.\n `none` wins!\n  Yes. Providing config_param in buffer layer means user can set such configuration without output plugin.\nBut in this case, main agent is output plugin, not buffer plugin.\nSo I think buffer plugin should not provide config_param for this cases.\n  This is known issue and your patch is good, but this patch breaks backward compatibility.\n`out_copy` is widely used so we want to keep the current behaviour in v10 version.\n\nHow about 'deep_copy' option in `out_copy` plugin?\n After apply avobe, I will merge it.\n  Thanks for your good patch!\n  :+1:\n I think input plugin has the responsibility because Fluentd's event is consist of time, tag and record.\nSo input plugin should not emit `nil` record.\nBut the world is ugly, not beautiful. We should validate or skip invalid record on both side.\n\nTechnically, smart implementation seems hard in v10.\nLuckily, this situation is rare so I think ad-hoc patch is enough. \n One more, I don't understand the situation correctly.\nWhen does MessagePackEventStream contain `nil` record?\nAlmost fluent-loggers ignore `nil` record and emit / in_forward / in_http also ignore `nil` record.\nSo, following flow should not inject `nil` record into EventStream.\n\nlogger -> fluentd -> fluentd\n  :+1:\n  Nice patch!\n  Hey, please, please, please indent in `module` and `class`...\n  merged!\n  Show installed plugins and these versions on execution:\n- search fluent-plugin-*.gemspec\n- parse these gemspecs\n- show results on logs\n  Feature request for fluentd.org & fluentd itself, to:\n- collect plugin list and its gemspec (fluentd.org)\n- parse gemspec and show type_\\* list and provide its metadata by JSON (fluentd.org)\n- parse configuration file and refer these json from fluentd.org\n- install plugins needed in configuration file\n  Sorry for the late reply.\n\nHm, sounds reasonable at one log file case.\nWe need to check and add it tests.\nPlease wait...\n Sorry, I am busy now.\nI will consider this feature at fluentd 0.10.41, not next version.\n @suzukaze \nWe can't accept only new behaviour because almost users expect existence behaviour.\n @imkira Yeah. It's preferable that configuration parameters are same but \"read_all\" is not clear for me.\n @imkira If you have a opinion for this issue, please post the comment on this pull request > https://github.com/fluent/fluentd/pull/247\n https://github.com/fluent/fluentd/pull/277 also resolves this issue.\n  Maybe, your benchmark is wrong.\nPlease try follwoing code:\n\n``` rb\nrequire 'benchmark'\n\ndef convert_type1(record)\n  record.each do |key, value|\n    if value == value.to_i.to_s\n      record[key] = value.to_i\n    elsif value == value.to_f.to_s\n      record[key] = value.to_f\n    end\n  end\n  record\nend\n\ndef convert_type2(record)\n  record.each do |key, value|\n    if (Integer(value) rescue false)\n      record[key] = value.to_i\n    elsif (Float(value) rescue false)\n      record[key] = value.to_f\n    end\n  end\n  record\nend\n\ndef convert_type3(record)\n  record.each do |key, value|\n    if (int_value = Integer(value) rescue false)\n      record[key] = int_value\n    elsif (float_value = Float(value) rescue false)\n      record[key] = float_value\n    end\n  end\n  record\nend\n\nrecord = {\"int\" => \"123\", \"float\" => \"12.34\", \"str\" => \"13498734hoge\", \"msg\" => \"/path/to\"}\nn = 10000\nBenchmark.bmbm do |x|\n  x.report { n.times { convert_type1(record.dup) } }\n  x.report { n.times { convert_type2(record.dup) } }\n  x.report { n.times { convert_type3(record.dup) } }\nend\n```\n\nIn my env, result is below:\n\n```\n% ruby --version\nruby 1.9.3p385 (2013-02-06 revision 39114) [x86_64-darwin12.2.1]\n% ruby b.rb\nRehearsal ------------------------------------\n   0.070000   0.000000   0.070000 (  0.068451)\n   0.560000   0.020000   0.580000 (  0.577230)\n   0.560000   0.020000   0.580000 (  0.582787)\n--------------------------- total: 1.230000sec\n\n       user     system      total        real\n   0.070000   0.000000   0.070000 (  0.068951)\n   0.540000   0.020000   0.560000 (  0.560255)\n   0.530000   0.020000   0.550000 (  0.555380)\n\n% ruby --version\nruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-darwin12.4.0]\n% ruby b.rb\nRehearsal ------------------------------------\n   0.080000   0.000000   0.080000 (  0.077255)\n   0.280000   0.010000   0.290000 (  0.286506)\n   0.260000   0.010000   0.270000 (  0.273608)\n--------------------------- total: 0.640000sec\n\n       user     system      total        real\n   0.080000   0.000000   0.080000 (  0.075255)\n   0.260000   0.010000   0.270000 (  0.267902)\n   0.280000   0.000000   0.280000 (  0.276650)\n```\n Auto casting is one of type conversion.\nSo `type_convert` plugin is more general than 'autocast' plugin.\n\nExample:\n\n```\n<match **>\n  type type_convert\n  auto_convert true # like autocast\n</match>\n\n<match **>\n  type type_convert\n  convert_rules key1:float, key2:integer, key3:time\n</match\n```\n\nWhat do you think?\n Now parser has `types` option and this approach is better to avoid unexpected behaviour.\n  When does event have NaN?\n What do you think about adding output_type option?\nFor example, when output_type is `json` plugin prints Yajl.dump result.\nAnd when output_type is `hash` plugin prints Ruby's hash.\n  > I've deleted the output file 'results.txt' when it was under being used by fluentd.\n\nIn file output plugin, fluentd doesn't write the events to `/Users/junyoung/results.txt` file.\n`path` configuration is prefix, so fluentd generates the new file like `/Users/junyoung/result.txt.20130731_0.log`.\n If you hit problem again, please reopen this issue.\n  I heard some people try to run fluentd on Rubinius.\nIn addition, Rubinius supports C extension correctly.\nI think testing Rubinius is good for Fluentd.\nBut Rubinius test is not important so I want optional testing on Travis-CI...\n Passed CI and just merged. Thanks!\n  Regarding https://github.com/treasure-data/td-agent/issues/6 , we can't use actual run because some plugin , e.g. in_tail, may update the state.\nSo we need specific mode to check configuration or other status.\n Above commit, if setup is correct, return code is 0:\n\n``` sh\n% ./bin/fluentd --dry-run -c ~/tmp/fluentd/hoge.conf \n2013-06-23 03:56:20 +0900 [info]: reading config file path=\"/Users/repeatedly/tmp/fluentd/hoge.conf\"\n2013-06-23 03:56:20 +0900 [info]: using configuration file: <ROOT>\n...\n2013-06-23 03:56:20 +0900 [info]: adding match pattern=\"fluent.**\" type=\"stdout\"\n% echo $?                                          \n0\n```\n\notherwise, return code is 1:\n\n``` sh\n% ./bin/fluentd --dry-run -c ~/tmp/fluentd/foo.conf\n2013-06-23 03:56:10 +0900 [info]: reading config file path=\"/Users/repeatedly/tmp/fluentd/foo.conf\"\n2013-06-23 03:56:10 +0900 [info]: using configuration file: <ROOT>\n...\n2013-06-23 03:56:10 +0900 [error]: Dry run failed: Unknown input plugin 'foo'. Run 'gem search -rd fluent-plugin' to find plugins\n% echo $?                                                    \n1\n```\n @kenjiskywalker Thank you for checking!\n  Seems ok. @frsyuki ?\n  Thank you!\n\nCould you merge above commits into 1 commits?\nAfter that, I will merge this pull request.\n Just merged :+1: \n\nThanks!\n  We can specify lower value than 1 in heartbeat_interval.\nDon't we need to care such case?\n  Hi Zhiwen,\n\nCould you paste the entire log?\nMaybe forward or other plugin cause the error.\n\nMasahiro\n Thank you!\n\n```\n2013-05-30 13:48:02 +0800 [info]: starting fluentd-0.10.33\n2013-05-30 13:48:02 +0800 [info]: reading config file path=\"/home/www/fluentd/conf/app-log.conf\"\n2013-05-30 13:48:02 +0800 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24225\n    bind 0.0.0.0\n  </source>\n  <match applog.**>\n    type forest\n    subtype webhdfs\n    remove_prefix applog\n    <template>\n      host 10.10.1.1\n      port 50070\n      username hadoop\n      path /applog/${tag}/%Y%m%d/%H.log\n      flush_interval 60s\n      read_timeout 100\n      field_separator TAB\n      output_include_time false\n      output_include_tag false\n      output_data_type attr:all\n    </template>\n    <case dw.**>\n      path /applog/${tag}/%Y%m%d/%H_%M.log\n      flush_interval 30s\n    </case>\n  </match>\n</ROOT>\n2013-05-30 13:48:02 +0800 [info]: adding source type=\"forward\"\n2013-05-30 13:48:02 +0800 [info]: adding match pattern=\"applog.**\" type=\"forest\"\n2013-05-30 13:48:02 +0800 [info]: listening fluent socket on 0.0.0.0:24225\n2013-05-30 13:48:02 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:02 +0800 [info]: out_forest plants new output: webhdfs for tag 'corp.ais.storagelog'\n2013-05-30 13:48:02 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:02 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.pro_tag_data_collect'\n2013-05-30 13:48:02 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:02 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.pic_speed'\n2013-05-30 13:48:02 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:02 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.del_data_collect'\n2013-05-30 13:48:12 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:12 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.jingjia_stop_data_collect'\n2013-05-30 13:48:13 +0800 [info]: restarting\n2013-05-30 13:48:13 +0800 [info]: shutting down fluentd\n2013-05-30 13:48:14 +0800 [info]: process finished code=0\n```\n\nIn this case, Fluentd restarted but your configuration doesn't use copy plugin.\nDid you shutdown fluentd manually?\n I see. I asked @tagomoris, author of webhdfs and forest plugin, but he said \"I use similar configuration (copy + (forest+webhdfs, forward) but no problem.\"\nSo, you may hit very rare case or your environment has some problems.\n\n`process finished code=6` is always occurred?\n I'm not sure.\n\nCould you change webhdfs plugin to other plugin and retry?\nAnd could you paste the your posted data?\n\nI will try to reproduce this issue.\n No response. I closed this issue for now.\nIf you hit the problem again, please reopen this issue.\n  Currently, there is no such feature.\nDo you have a problem?\n I see.\nI think such case is minor in fluentd (alomost cases, fluentd doesn't share logs with multi users)\nbut I agree sometimes occur.\n\nI am thinking about configuration format because Windows file permission is different from Linux and Mac.\nNeed to dig Windows architecture and Ruby on Windows...\n `0444` format seems to work on Windows?\nI will try it.\n BTW, in my env, out_file's file permission is 644.\nI checked out_file plugin and this plugin doesn't modify file permission. So\n\n> Right now, they seem to be 666\n\nJust curious this permission.\n fujiwara-san found following line.\n\nhttps://github.com/fluent/fluentd/blob/master/lib/fluent/supervisor.rb#L119\n\nMaybe, this causes 666 permission when uses fluentd daemonize mechanism.\nHmm...\n @fujiwara @aknapp \n\nI will implement fujiwara's 1 first. After that, we should consider 2 approach.\n  @abecciu \n\nThank you for the pull request :+1: \n\nCould you paste your configuration and used gem versions (e.g. fluentd, msgpack and etc)?\nSome users use out_copy with TimeSlicedOutput but I first heard this case.\n @abecciu Thank you!\n\nI'm in RubyKaigi now. After back to home, I will test later.\n @abecciu \n\nI tried your code.\nMaybe, this issue seems MessagePack 0.5.x related bug because your test is passed with MessagePack 0.4.7 (ruby version is \"ruby 1.9.3p385 (2013-02-06 revision 39114) [x86_64-darwin12.2.1]\").\n\ncc: @frsyuki \n\n``` rb\n  def test_msgpack_es_emit_bug\n    d = Fluent::Test::OutputTestDriver.new(Fluent::CopyOutput)\n    u = MessagePack::Unpacker.new\n\n    outputs = %w(p1 p2).map do |pname|\n      p = Fluent::Plugin.new_output('test')\n      p.configure('name' => pname)\n      p.define_singleton_method(:emit) do |tag, es, chain|\n        es.each do |time, record|\n          super(tag, [[time, record]], chain)\n        end\n      end\n      p\n    end\n\n    d.instance.instance_eval { @outputs = outputs }\n\n    time = Time.parse(\"2013-05-26 06:37:22 UTC\").to_i\n    if MessagePack::VERSION > '0.5.0'\n      #  1) Failure:\n      #  test_msgpack_es_emit_bug(CopyOutputTest) [test/plugin/out_copy.rb:91]:91<[[1369550242, {\"a\" = >1}], [1369550242, {\"a\" = >2}]]> expected but was\n      #  <[[1369550242, {\"a\" = >1}]]>.'\n      packer = MessagePack::Packer.new('')\n      packer.pack([time, { \"a\" => 1 }])\n      packer.pack([time, { \"a\" => 2 }])\n      es = Fluent::MessagePackEventStream.new(packer.to_s, u)\n    else\n      # 3 tests, 12 assertions, 0 failures, 0 errors, 0 skips\n      events = \"#{[time, { \"a\" => 1 }].to_msgpack}#{[time, { \"a\" => 2 }].to_msgpack}\"\n      es = Fluent::MessagePackEventStream.new(events, u)\n    end\n\n    d.instance.emit('test', es, Fluent::NullOutputChain.instance)\n\n    d.instance.outputs.each { |o|\n      assert_equal [\n        [time, {\"a\"=>1}],\n        [time, {\"a\"=>2}],\n      ], o.events\n    }\n  end\n```\n @abecciu Thanks!\n\nI will commit MessagePackEventStream handling for MessagePack 4.x version.\n @kzk @frsyuki I pushed msgpack4 related commit to prevent-msgpack4-degression branch . Please check\n\nhttps://github.com/fluent/fluentd/commit/00aa4950569441b85292ad2b52b4b60726f79f79\n  This seems fluent-plugin-webhdfs related issue.\nCould you move this issue to https://github.com/fluent/fluent-plugin-webhdfs ?\n  Is this a top level configuration? Where is the test?\n Could you merge above commits into one commit?\nAfter that, I will merge this pull request.\n  I and sada checked. Seems good!\n  \"warn\" is not \"error\", so this behaviour is expected.\nIn this case, \"warn\" means \"You may make a typo because this plugin doesn't have such parameter\".\n  Could you show me the example log?\n  merged!\n  Can we close this issue?\n  > LTSVParser always use current time when time_key wasn't set even thouth set time_format.\n\nThis seems ValuesParser behaviour, not LTSVParser.\nBut your last commit fixes this problem I think, right?\n Okay, merged.\n  This pull request has compatibility issue.\nIn v11, internal \"fluent\" will be removed.\n\nSorry, we can't merge this pull request for now.\n  Maybe, this is not a Fluentd issue.\n@kiyoto suggests monitoring service and other systems are exist, e.g. [haikanko](https://github.com/sonots/haikanko)\n  Good catch!\n  Revived https://github.com/fluent/fluentd/pull/61\n  What do you mean?\nFluentd 0.10.33 is not released yet.\n  It looks same as HTTP include directive.\n\nhttp://docs.fluentd.org/articles/config-file#3-include-directive\n\nWhat is the difference?\n  What is the status?\nCan we close this issue or still leak memory?\n  Maybe, we need two '= 4.7' and '>= 5.4' versions.\nWhat do you think?\n @repeatedly \nDo you mean changing the dependency to (~> 0.4.7 OR ~> 0.5.4)? Thus I think it's ok.\nProbably we can use `gemspec.add_dependency \"msgpack\", \"~> 0.4.7\", \"~> 0.5.4\"`\n @tagomoris @hotchpotch \nMerged! Thank you! I added \"< 0.6.0\" dependency as well to emulate \"~> 0.4.7 OR ~> 0.5.4\" dependency exactly. Because of the hot issues on msgpack, 0.6 will include a big change.\n Here is the change to add \"< 0.6.0\" dependency:  https://github.com/fluent/fluentd/commit/dfd93b08b16c2685f456c33b0423f52c85d6945f\n  I first heard this issue.\nCould you reduce the cause of this case?\n\nFor example:\n- invoke fluentd without sudo\n- remove non-related source or match\n- degrade the fluentd version\n- etc...\n  Is this for safety use of tag?\nFor example, HandleTagNameMixin modifies tag itself.\n Okay, merged.\n\nThanks!\n  I checked \"bundle exec rspec\" is broken. Thanks!\n  It's a limitation of v10 configuration.\nv11 has already solved this issue.\n\nIntroducing escape character is difficult because it breaks backward compatibility.\n  Good catch!\n  Could you paste the your sample log?\nI want to add parser tests.\n Good catch!\n  Deplicated pull request? \n\nhttps://github.com/fluent/fluentd/pull/103\n I see.\n\nPersonally, I like #103 because its implementation reuses ValuesParser and including tests.\nI will discussion these pull requests with other maintainers.\n I merged #103 .\nThanks for the pull request!\n  LGTM :+1: \n Merged. Thanks!\n  \"[#{LOG_TEXT[level]}] #{time.strftime(@time_format)} \" is better for me because the line head is easy to parse.\n Sorry, I forgot the stacktrace log, which has two spaces at the line head.\nSo I use your first suggestion.\n Pushed. \n\nLog example is below!\n\n```\n2013-02-07 16:05:51 +0900 [info]: fluent/engine.rb:70:block in configure: adding source type=\"forward\"\n2013-02-07 16:05:51 +0900 [info]: fluent/engine.rb:86:block in configure: adding match pattern=\"hoge.*\" type=\"stdout\"\n2013-02-07 16:05:51 +0900 [info]: plugin/in_forward.rb:63:listen: listening fluent socket on 0.0.0.0:24224\n2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:122:rescue in emit_stream: emit transaction failed  error=\"\"\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/out_stdout.rb:25:in `emit'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/match.rb:38:in `emit'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/engine.rb:120:in `emit_stream'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:129:in `on_message'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:180:in `feed_each'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:180:in `on_read_msgpack'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:168:in `call'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:168:in `on_read'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/io.rb:108:in `on_readable'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/io.rb:170:in `on_readable'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/loop.rb:96:in `run_once'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/loop.rb:96:in `run'\n  2013-02-07 16:05:58 +0900 [warn]: fluent/engine.rb:123:rescue in emit_stream: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:78:in `run'\n2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:182:rescue in on_read_msgpack: forward error: \n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/out_stdout.rb:25:in `emit'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/match.rb:38:in `emit'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/engine.rb:120:in `emit_stream'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:129:in `on_message'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:180:in `feed_each'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:180:in `on_read_msgpack'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:168:in `call'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:168:in `on_read'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/io.rb:108:in `on_readable'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/io.rb:170:in `on_readable'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/loop.rb:96:in `run_once'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/loop.rb:96:in `run'\n  2013-02-07 16:05:58 +0900 [error]: plugin/in_forward.rb:183:rescue in on_read_msgpack: /Users/repeatedly/devel/fluent/fluentd/lib/fluent/plugin/in_forward.rb:78:in `run'\n```\n  How do we treat Proc like option in non-DSL configuration?\n\nDSL format:\n\n``` rb\nmatch 'foo' {\n  type :bar\n  callback ->(matched) {\n      ...\n  }\n}\n```\n\nExistence conf format:\n\n```\n<match foo>\n  type bar\n  callback ????\n</match>\n```\n Configuration DSL is relatively heavy feature.\nI think that it may be good to invite someone to committer, who want this feature.\n Just added configuration DSL on v11 branch.\nString and some other primitives only supported for Config::Element attributes.\n\n``` ruby\nworker {\n  hostname = \"myhostname\"\n\n  (0..9).each { |i|\n    source {\n      type :tail\n      path \"/var/log/httpd/access.part#{i}.log\"\n\n      filter ('bar.**') {\n        type :hoge\n        val1 \"moge\"\n        val2 [\"foo\", \"bar\", \"baz\"]\n        val3 10\n        id :hoge\n\n        subsection {\n          foo \"bar\"\n        }\n        subsection {\n          foo \"baz\"\n        }\n      }\n\n      filter ('foo.**') {\n        type \"pass\"\n      }\n\n      match ('{foo,bar}.**') {\n        type \"file\"\n        path \"/var/log/httpd/access.#{hostname}.#{i}.log\"\n      }\n    }\n  }\n}\n```\n I committed Config DSL as backport on v10 from v11 branch at 456eaa6b0b634ef5fa6c5c5c4fdf2b33d782383f .\nLimitations are:\n- All values will be converted as string (v10 configuration element has no types)\n  - And then, will be converted for each types in configure()\n  - Regexp, callback, and other logics are not permitted\n- All configuration attributes can accepts only one string value\n  - Hashes and arrays unavailable (evaluated as string by #to_s)\n- `include` doesn't works in curent version\n\n``` ruby\n# for config.rb with fluentd v0.10.x\nhostname = \"myhostname\"\n\n(0..9).each do |i|\n  source {\n    type :tail\n    path \"/var/log/httpd/access.part#{i}.log\"\n    format '/^...$/' # hash available in pattern! yay!\n    time_format \"%d/%b/%Y:%H:%M:%S %z\"\n    tag \"foo.x\"\n  }\nend\n\nmatch ('{foo,bar}.**') {\n  type :copy\n  store {\n    type :stdout\n  }\n  store {\n    type :forward\n    flush_interval 1\n    server {\n      host \"myserver2.local\"\n    }\n    server {\n      host hostname  #=> \"myhostname\"\n      port 24223\n      standby true\n      # backup fluentd process\n    }\n  }\n}\n```\n  We know some users want millisecond precision time.\nSo we consider millisecond precision in v11.\nBut introducing this causes the backward compatibility issue.\nWe now correct use cases and requirements.\n\nIn v10, I don't know the detail. @frsyuki ?\n One idea is providing \"time_unit\" or similar option in Fluentd core.\nI am now considering how to support such option smoothly.\n  I believe the log says the time of next retry. Could you give me your last 100 lines of your logs?\n In my environment, the number of error result is 9. It is same as your conf.\nCould you show me the full logs and full conf? \n Okay. I closed this issue.\n  ok\n  Maybe you should consider setting up OS parameters.\n\n```\n1) max file descriptors (ulimit -n)\n```\n\nPlease ensure you have enough number of file descriptors available. Please modify /etc/security/limits.conf > http://www.cyberciti.biz/faq/linux-increase-the-maximum-number-of-open-files/\n\n```\n2) Increase the client port range\n3) Enable TIME_WAIT recycling\n4) Disable iptables if you\u2019re using connection tracking\n```\n\nBasically, please follow this blog. > http://code.mixpanel.com/2010/10/29/gevent-the-good-the-bad-the-ugly/\n BTW, are you using very short period of flush_interval at the forwarder?\n > http://docs.fluentd.org/articles/before-install\n\nI've written the document about OS settings. Could you follow the instruction and try again?\n\nThanks -K\n @pauldavidgilligan ping? Can I close this issue?\n  Thanks, we still recommend to use 1.9.3 though.\n Fluentd should work on 1.9.3, 2.0 and 2.1.\nIf you have a plugin which supports only 2.0 and 2.1, you should use Ruby 2.x or open an issue for supporting 1.9.3.\n  Good catch!\n @tagomoris ++\n  Recently we've got many requests of having 'pixel tracking' feature of in_http. This enables Fluentd users to put the data in an easy way (like from HTML pages).\n  We never met such situations. Could you give us your full configuration files?\n Paul,\n\nThanks for the clear description. The file buffer could be a bottle neck in this case. For further discussion, can we talk on IM like Skype? My Skype address is kzk_mover.\n\nAnd also I really want to have 'Exact' configuration file copy and 'Logs'. Trouble shooting this kind of problem without any configuration file and logs are hard for me.\n I've looked at the configuration, but unfortunately no significant mistake was found. Several questions.\n- Does your node saturate any resources like CPU / memory?\n- If you can, could you send me a source code of bidder output plugin?\n- Could you change the buffer configuration to 'memory'? Since we haven't seen anyone who uses file buffer with 10k/sec traffic.\n\nAnd reply to your questions.\n\n> why does fluents @ P not read and resend the buffer files on the disk during re-start ? I see fluentd touching the timestamps but it is very very slow to clear the file backlog.\n\nIt should flush the buffers and it only flushes with the speed of the disk.\n\n> If the timeout worked, i.e. if we set it very short I would expect the CPU load to increase but this is not changing as expected so maybe we have a configuration issue ? logs are still sent very slow.\n\nIt should surely increase the CPU load but it still batches the message. Also in_forward is doing heavy optimization when receiving logs from out_forward (no deserialization occurs).\n\n> What should we use as the buffer/queue sizes ? P receives 2 x W and D receives 4 x W under normal conditions.\n\nUsually larger buffer_queue_limit and buffer_chunk_limit is preferred.\n @repeatedly @frsyuki any comments on this?\n @pauldavidgilligan \nDid you hit same problem on only forward or only bidder?\nWe need to identify a cause of this and organize the information.\n Is there any progress?\nCan we close this issue?\n  Thanks for the pull request. BTW, this document says 'If the format is not indicated, it defaults to \"combined\". Is your format is default on your specific distribution, or it's widely used format?\n ah, ok. As long as 'combined' format of nginx is defined and it's the default log format, this pull request sounds reasonable. Will check the code.\n Thanks! Confirmed it worked on my environment too. Thanks for the pull request!\n @sgessa \n\nJFYI to change size field type.\nhttps://groups.google.com/d/msg/fluentd/fUvJdxFU_bk/kwiSsq55rZsJ\n  Could you give me a pointer of Scribe's document? Will take a look at it.\n OK I understand.\n\nWe also might want to have modified version of out_file, just adding recent entries to the files instead of slicing logs by time_slice_format.\n I'm not sure about the detail behavior of Scribe.\n\nIn fluentd, my implementation idea is simple:\n1. out_file writes chunk to file.\n2. after wrote the file, re-link symlink to written file.\n\niterates above operations for nomarl file and gz file.\nIs it enough?\n ^ is first implementation.\nout_file doesn't provide non buffered mode, so out_file can't implement Scribe like each event tailing.\n\nIf you set symlink_path in out_file, out_file plugin creates symlink with suffix to point to latest file.\nWe can use `tail -F` to watch written logs.\n  Thanks for the pull request again.\nBut this feature seems to be general problem.\nI am thinking about adding field to input record in Input plugin side.\nPlease wait.\n This problem is the one of 'Adding custom field to input record before tag routing'.\nSo I said 'general problem'.\n @baepiff @zackangelo \n\nChanging Engine.emit APIs breaks backward compatibility.\nSo I released new filter plugin to resolve this issue.\n\nhttps://github.com/repeatedly/fluent-plugin-record-modifier\n\nWhat do you think about this plugin?\nDo you see any problems?\n Some users use above plugin to add hostname. So close this pull request.\n\nFYI, v11 has filter layer so v11 has already fixed this pull request in an efficient way.\n  The pull request mentioned above has some performance issue, so it's not merged yet. Separately, do you think having only password authentication works fine for you?\n\nWe're now collecting user's requirements because it's difficult to maintain the compatibility once we introduced auth future at in_forward/out_forward.\n - Encryption\n\nDo you test Stunnel or similar project?\nI didn't test yet, but it provides encryption functionality to existence programs.\n\nSupport encryption is difficult because each user has own requirement...\n @tagomoris is now working to implement the new plugin, which supports the authentication and encryption.\nIf you're interested in this plugin, please contact @tagomoris .\n @tagomoris announced fluent-plugin-secure-forward. \n\nhttps://github.com/tagomoris/fluent-plugin-secure-forward\n\nI close this issue.\n  Hi, @baepiff \n\nCould you separate hostname patch, and nginx patch, and request again? I'll look at nginx one.\n  Thanks for the report!\nNext time, please open a docs related issue at fluentd-docs repository.\n\nhttps://github.com/fluent/fluentd-docs\n  fluentd works fine with your conf on my Mac.\n\nMac OS X 10.8.2\nruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.2] (installed via rbenv)\nfluentd 0.10.28\n\nSo, this problem seems to be environment dependent.\nWe need more reduced case to fix this issue.\nCould you test on latest ruby 1.9.3 version?\n This apparently seems like Ruby's bug. Could you try with other versions of Ruby?\n\n> [BUG] pthread_cond_wait: Invalid argument (EINVAL)\n\nClose this issue, because this seems not related to Fluentd.\n Sounds like thig bug: http://bugs.ruby-lang.org/issues/6825\n  And fluent-plugin-s3 v0.2.3 is released. > https://rubygems.org/gems/fluent-plugin-s3\n  > So why set default encoding to ASCII-8BIT \n\n@frsyuki ?\n\nAs ad hoc measure, you can set `Encoding.default_internal` to `nil` before requires 'mime/types'.\nYes, this encoding problem is important for fluentd.\nfrsyuki and other users discussed this problem for next version.\n- mime/types\n\nIMHO, mime/types should specify UTF-8 internal encoding at file reading.\nBecause some mime types contain umlaut characters.\nSome encodings can't treat umlaut, e.g. japanese encodings.\n Close this issue because this is not Fluentd's problem. Need fix at mimetypes gem.\n  How's your fluentd cluster going?\n Okay. I merge this pull request soon.\n  Hmm... I will check the Fluentd and related plugins.\nPlease need more time.\n Thanks for the check!\nI will check out_forward.\n I will fix this problem. Please wait.\nhttps://github.com/fluent/fluentd/issues/75\n I fixed this issue but current implementation doesn't support IPv6 / IPv4 mixed environment.\nDo you have following configuration?\n\n``` conf\n<match pattern>\n  type forward\n  #...\n\n  <server>\n    name myserver1\n    host 192.168.1.3\n    port 24224\n    weight 60\n  </server>\n  <server>\n    name myserver2\n    host 2001:db8::2\n    port 24224\n    weight 60\n  </server>\n</match>\n```\n\nIf we support above configuration, each node should have own udp socket.\n  \u5831\u544a\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\u4f8b\u5916\u51e6\u7406\u306b\u629c\u3051\u304c\u3042\u308a\u307e\u3057\u305f\u2026\n45f58de9f507af35081f0c11be75575db2538ca2 \u3067\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002\n  Regexp must have at least one named captures (?<NAME>PATTERN).\nIt uses the NAME part of a named capture as a key of a JSON record.\n\nHere is documents: http://fluentd.org/doc/plugin.html#tail\n  Fixed at 7a1af71204cb3fcdfc3b20fe79f3dbacbbc91f98\n  Thank you!\nI merged ce1c410cce08e301e3450fa1049fbb0de7946d40 and b773e4d6b9a8a4a469aff4d79c53d65a762adb0a.\n  Awesome patch. I've merged. I'll release patched version today.\nThank you!\n  Fixed at 7d37c7c8fc253dd56524ba0a1b19fffed0515256.\n257557c6afc6ad8149473bf2afd122caea51ba2a might also help.\n  Hey! Awesome patch!\n  Please check ce1c410cce08e301e3450fa1049fbb0de7946d40.\n  Great!!!!!!!\n Current Fluentd already had in_syslog test.\nSo I ported in_gc_stat and in_status from your tests!\n  #59 \u3068\u4f75\u305b\u3066 fe63930e1ea4c70ad0b38719c69a3222ce08faa2 \u3068 f4cfbc5cf77e6e854313e39181a7d8e0d9bbf27d \u3067\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002\n\u7d30\u304b\u3044\u3067\u3059\u304c NullPositionEntry \u3068\u3044\u3046\u540d\u524d\u304c\u5b9f\u4f53\u3092\u8868\u3055\u306a\u304f\u306a\u3063\u305f\u306e\u3067 MemoryPositionEntry \u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n  I agree jeweler is obsoleted and bundler is better.\nBut when we once switched to bundler, it caused a problem for RPM/deb packaging.\n(b8871f81a4fc0258051ae0cc9f584c01a07c8f7e and 165a572b471235eee4e51548b1f265ff582b0ced)\nSo we need to fix the packaging scripts first at the same time.\n Sorry, this issue is taking time...\n https://github.com/treasure-data/td-agent/commit/8e21c23a7dd7145a2f39dc48f3521b36d403bcfa\n\nI tried above commit and building td-agent RPM succeeded on CentOS 6.4.\n\nI am now trying deb package with bundler based fluentd.\nBut unfortunately, I can't build the deb package in the first place.\nNeed more time...\n @suupic \n\n> build rpm use td-agnet's build script, it works fine\n\nWhich branch did you use, master or bundler-fluentd-support?\n  \u3054\u5831\u544a\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u307e\u305a\u304b\u3063\u305f\u3067\u3059\u306d\u2026\n973a5dafe080fe1663cb52c161a7c0ba59c47547 \u3067\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002\u5909\u66f4\u306f\u6b21\u306e\u30ea\u30ea\u30fc\u30b9\u306b\u542b\u3081\u307e\u3059\u3002\n  \u691c\u8a3c\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002fe63930e1ea4c70ad0b38719c69a3222ce08faa2 \u3067\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002\u3053\u308c\u3067\u3069\u3046\u3067\u3057\u3087\u3046\uff1f\n  I'm so surprised some objects could raise errors at the `class` method...\nAnyway, thank you for your pull-req! I've merged.\n  ouch! thank you!\n  @tagomoris announced fluent-plugin-secure-forward. Please use this plugin if you need authentication and encryption.\n\nhttps://github.com/tagomoris/fluent-plugin-secure-forward\n  Thanks!\n  Thank you! I implemented your idea at 6780da634cb63949f8a49d7d295d2acae37f01dc.\n  Thanks! I've merged on 20c19960e6d2b46669b9e70d3e347fa629a8aed6.\n\nI changed the configuration syntax as following:\n\n```\n<match foo.**>\n  type roundrobin\n  <store> # A\n    type bar\n    weight 3\n    # ...\n  </store>\n  <store> # B\n    type bar\n    weight 3\n    # ...\n  </store>\n  <store> # C\n    type bar\n    weight 1\n    # ...\n  </store>\n</match>\n```\n\nAnd also I changed the roundrobin algorithm for better performance.\n\nPlease check 2623b143aee22b8c58c9f444d343421866148199 for the changes.\n  Great! Thank you.\n  Thank you! What a poor bug...\n  7d37c7c8fc253dd56524ba0a1b19fffed0515256 \u3067\u3001TCP\u306b\u3088\u308b\u30c7\u30fc\u30bf\u9001\u4fe1\u306e\u6210\u529f\u3082 heartbeat \u3068\u3057\u3066\u6271\u3046\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\u30c7\u30fc\u30bf\u306e\u9001\u53d7\u4fe1\u304c\u6210\u529f\u3057\u3066\u3044\u308c\u3070\u3001detach \u3055\u308c\u308b\u3053\u3068\u306f\u7121\u304f\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nphi_threshold \u306e\u8abf\u7bc0\u3082\u8a66\u3057\u3066\u307f\u3066\u4e0b\u3055\u3044\u3002\n\nAt 7d37c7c8fc253dd56524ba0a1b19fffed0515256, out_forward assumes successful data transfer via TCP as a successful heartbeat. It should not detach nodes any loger if data transfer succeeds.\nAdjusting phi_threshold might help as well.\n  I implemented dns cache. out_forward newly supports \"expire_dns_cache\" option.\n\ndefault behavior: out_forward caches resolved host name and invalidates it only when the node becomes not available.\nexpire_dns_cache > 0: out_forward caches resolved host name and invalidates it when the node becomes not available or the specified expired time passed.\nexpire_dns_cache = 0: out_forward doesn't cache resolved host name.\n connection keepalive is another problem.\n  Thank you for your report. I fixed this problem at 9642198d6eb0aa654feb9e72e3c276e3a5783a6b.\n  Great!!!\n  I think it was tough work to clear legal procedures to make your patch open:-)\n\nI understood the filtering/validating feature at the input-side is important.\nBut your proposal is too big to add just a filtering feature into the in_tail plugin. I believe the plugin mechanism should be simple to keep simplicity of Fluentd.\nIt needs more examples or estimations of use-cases to add a new type of plugins.\n\nYou can do same thing by extending `TailInput` and overriding the `parse_line` method (ref. http://fluentd.org/doc/devel.html#custom-parser-for-tail-input-plugin).\n > Input-time restriction is useful when the the owners of fluentd's instances are different.\n\nSo, you can't trust the sender of logs at all, right? I imagine you need \"multi-tenant\" capability.\n\nTo satisfy your needs, the input plugin will need following features:\na) authentication\nb) size/structure/semantics validation of records (validation per records)\nc) bandwidth limitation (validation over multiple records)\n\nIn my opinion, a) should be done at the boundary of the \"untrusted zone\" and \"trusted zone\" not to allow unauthorized users to consume resources of the \"trusted zone\". And b) should be done at the boundary of the \"frontend system\" and \"backend system\". Because these validations tend to be complex and slow task because it needs be strict to prevent potential security holes.\nSo they have different requirements than backend aggregation system which needs simplicity and high performance.\n\nin/out_forward plugins and Fluentd's emit/write mechanisms are optimized for availability and performance. I think it's difficult to add validation features without degrading these benefits.\nSo it will be a another input plugin like in_secure_forward rather than a kind of add-ons.\n  Thank you for your perfect codes!\nI've merged HandleTagNameMixin. It will be included in the next release.\n  Thank you for your detailed report. I'll check the problem.\n The problem is reproduced on my environment.\nUnfortunately, it's hard to resolve and may take time to fix. For now, please downgrade the version of fluentd to 0.10.10 which is a stable version:\n\n```\n$ gem uninstall fluentd\n$ gem install fluentd -v 0.10.10\n```\n\nI'll fix this problem at the next version.\n I released v0.10.13 that fixed this problem.\nPlease check it out!\n  Current Fluentd's code is as following (pseudo code):\n\n```\nif current_buffer_chunk.size + new_data.size <= buffer_chunk_limit\n  current_buffer_chunk << new_data\n  return\n## this check is disabled:\n#elsif new_data.size > buffer_size_limit\n#  error: received data too large\nelsif multi_event_stream.size > buffer_chunk_limit\n    error: queue size exceeds limit\nend\ncurrent_buffer_chunk = create_new_chunk\ncurrent_buffer_chunk << new_data\n```\n\nDo you mean that \"new_data.size > buffer_size_limit\" check is needed?\nThe reason why the check is disabled is that whole new_data is thrown away even if each records are small.\nAny ideas?\n I commented about your pull-req at #42.\nFiltering or something simliar features will be useful but its context will be the different from this problem.\n To solve this problem, we need to understand following problems:\n\na) ObjectBufferedOutput (including out_forward) collects multiple chunks into one chunk for optimization. Thus a size of chunk tends to be large.\nb) Fluentd has a transaction mechanism that make it possible to guarantee the atomicity of one call of `emit`. It's enabled by the BufferedOutput class which is the base class of buffered output plugins.\nc) Buffer plugins can't divide a chunk into multiple records because it doesn't know boundaries of records.\n\nThuns the current code can't raise exceptions nor throwing away the chunk.\n\nI'm trying to implement following solution:\n1. Divide buffer plugins' `emit` method into `open`->`append`->`append`->\u2026->`close`\n2. Change `BufferedOutput#format_stream` method as following:\n\n``` ruby\n@buffer.open {|con|\n  es.each {|time,record|\n    begin\n      con.append format(tag, time, record)\n    rescue\n      # logging\n    end\n  }\n}\n```\n1. `ObjectBufferedOutput#emit` fallbacks to non-optimized routine that calls `BufferedOutput#format_stream` if the optimized routine raised BufferChunkLimitError.\n > you'll change the current chunk format\n\nNo. First, even current chunk format doesn't include any specifications for boundaries, headers or bodies. BufferedOutput plugins define the format.\n\nSee following pseudo codes of `Buffer#open`:\n\n``` ruby\nclass Connection < Struct.new(:key, :buffer)\n  def append(data)\n    @buffer.append(key, data)\n  end\nend\n\ndef open(key, &block)\n  synchronize do  # cost of this mutex is expensive\n    yield Connection.new(key, self)\n  end\nend\n\ndef append(key, data)\n  chunk = get_current_top_chunk\n\n  # buffer plugins can check buffer_chunk_limit per record\n  if chunk.size + data.size > @buffer_chunk_limit\n    # raise error\n  end\n\n  ...\nend\n```\n\n> \"The non-optimized routine\" means \"the routine which processes per-record (not per-chunk)\", doesn't it?\n\n(Almost) yes. The non-optimized routine appends data into the buffer per-record regardless of the atomic unit of one `emit`.\n\n(Note that \"per-chunk\" is not an exact expression because the word \"chunk\" is used in the different context. Don't confuse the buffer chunk used in buffer plugins, with an unit of emit used by input plugins.)\n Temporary closed. Maybe, need to redesign core.\n  stat\u3092\u4f7f\u3046\u3079\u304d\u3068\u3053\u308d\u3092lstat\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u4fee\u6b63\u3057\u307e\u3057\u305f\uff01 \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\nhttps://github.com/fluent/fluentd/commit/5d582d87488ca9e9703c8823b2fb4a145bb4115d\n  Your understanding is right. The external program reads TSV from stdin and writes TSV to stdout.\nI updated the document a little: http://fluentd.org/doc/plugin.html#exec-filter\n\nThe error in the test case was caused because the external program took longer time than expected (0.1 seconds). I extended the sleep time to 0.5 seconds.\n  Thank you! I've merged.\nI don't know it's allowed by specification of the HTTP but will be useful.\n  Added you to the contributors' list! Thanks! Further contribution is welcome :-)\n\nae623a25456150001b73142e75452a263ba9c33a\n  Could you give me your configuration file? Or this configuration doesn't also show anything?\n\n```\n<source>\n  type http\n  port 8888\n</source>\n<match **>\n  type stdout\n</match>\n```\n ok, but thanks for your report!\n  merged, thx!\n I've added you to the contributors list( 755e52f79fd4a621d14095c78b55f092b907ead0 ). thanks for your contribution!\n  first of all, thanks for your kind report. we'll be looking at it.\n thx @frsyuki \n  fixed at 2689cd27345468d8b2d5ffe608b702477f9e8951\n\nthx @frsyuki \n  Sorry for the late response. But late is better than nothing. The new documentation site already fixed this problem:) > http://docs.fluentd.org/articles/in_exec\n  OK! I've merged.\n  Thank you! It's very nice patch.\nI added a few codes to support -i '-' option to read config from STDIN.\n  Thank you! I fixed at d269dcc3dfe7135f89aa643a5732e2a5d7ab217b.\n  Thank you! I've merged.\nIt's very fine implementation, and certainly useful for developers.\n  \u3053\u308c\u306f\u6c17\u4ed8\u3044\u3066\u3044\u307e\u305b\u3093\u3067\u3057\u305f\uff01\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\u30de\u30fc\u30b8\u3057\u307e\u3057\u305f\uff01\n  Tahnk you! Fixed at 044133674c6c6d3e6f6ebf7605a2779648fda879\n  Thank you.\n\nFirst, I agree with you that \"msgpack_map\" is useful in some cases. It will widen design choice. But in this case, you can do the map operation in the \"format\" method.\nGenerally, \"write(chunk)\" method shouldn't process records. Instead, just do writing. There are two reasons:\n1. \"write(chunk)\" method will be called multiple times when it is retried.\n2. \"format\" method can raise an error to input plugin (and client applications) if the record is invalid. But \"write(chunk)\" method can't.\n\n(There is also advantage. Since \"write(chunk)\" method is called in the different thread of input plugin, processing records in \"write(chunk)\" method will reduce latency of Engine.emit)\n\nSecond, it's difficult to improve performance. One way to improve performance of \"#map\" is creating a map with specified size and reduce overhead of memory allocation. But in this case, no one can know size of map before deserializing (note that msgpack_each does streaming deserialization).\n\nSo, how do you think? msgpack_map is still useful?\n  Merged! Thank you!\n  Should be fixed at b8871f81a4fc0258051ae0cc9f584c01a07c8f7e. Thank you!\n  \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01 \u30de\u30fc\u30b8\u3057\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u5fc5\u8981\u3067\u3059\u306d\u2026\n\u30b7\u30f3\u30d7\u30eb\u306a\u5909\u66f4\u3067\u3068\u3066\u3082\u52a9\u304b\u308a\u307e\u3059^^;\n  Thank you for your detailed report!\nI fixed at 1be6b61402b5afc283089706f47d50c7c5222a39\n  Thank you! fixed.\n  Thank you! Just merged.\n  \u30de\u30fc\u30b8\u3057\u307e\u3057\u305f\uff01 \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u30021.8\u5bfe\u5fdc\u306e\u4e88\u5b9a\u306f\u307e\u3063\u305f\u304f\u306a\u3044\u3067\u3059\u3002\n\u3082\u3057\u826f\u304b\u3063\u305f\u3089\u3001\u3053\u306e\u307e\u307e\u30b3\u30df\u30c3\u30bf\u306b\u306a\u308a\u307e\u305b\u3093\u304b\uff1f \u76f4\u63a5\u30b3\u30df\u30c3\u30c8\u3067\u304d\u305f\u65b9\u304c\u65e9\u3044\u3067\u3057\u3087\u3046^^; \u7279\u306b\u30b3\u30a2\u90e8\u5206\u3092\u6539\u5584\u3059\u308b\u4eba\u304c\u4e0d\u8db3\u3057\u3066\u3044\u308b\u306e\u3067\u2026\u3002\n \u304a\u304a\u304a\uff01 \u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059^^;\n  Thanks!\n  Thank you!\n  The problem also affected depended gems (jeweler, rake, bundle, etc). It may cause problems.\nSo I fixed the install process at 16948fde62d6eafee49a4e7280819fc7b554040c.\n", "text_all_count": 19143, "text_word_token": ["Thanks", "for", "point", "this", "out", "To", "be", "clear", "Fluentd", "itself", "doesn", "t", "depend", "on", "uuidtools", "NUMBER", "fluent", "mixin", "config", "placeholders", "depends", "on", "uuidtools", "to", "generate", "unique", "id", "NUMBER", "So", "LINK", "mixin", "config", "placeholders", "repository", "be", "better", "place", "than", "here", "NUMBER", "Using", "array", "for", "error", "count", "consumes", "lots", "of", "memory", "when", "retry_limit", "be", "large", "NUMBER", "We", "don", "t", "use", "an", "item", "in", "error_history", "so", "we", "can", "use", "simply", "number", "count", "instead", "of", "array", "based", "approach", "NUMBER", "frsyuki", "Could", "you", "check", "this", "PR", "tagomoris", "sonots", "Do", "you", "also", "check", "this", "PR", "Maybe", "no", "problem", "but", "it", "be", "buffer", "relate", "so", "double", "check", "be", "better", "NUMBER", "Good", "catch", "Could", "you", "add", "test", "to", "SyslogParser", "Thanks", "In", "DetachMultiProcessMixin", "NUMBER", "Same", "as", "LINK", "frsyuki", "Could", "you", "check", "this", "This", "option", "be", "useful", "for", "flushing", "beffered", "events", "NUMBER", "In", "the", "future", "we", "will", "provide", "more", "general", "approaches", "to", "handle", "user", "actions", "use", "unix", "domain", "socket", "or", "similar", "plugin", "NUMBER", "See", "NUMBER", "thread", "NUMBER", "sonots", "sabottenda", "Did", "you", "try", "the", "option", "If", "no", "problem", "I", "will", "merge", "this", "PR", "and", "release", "new", "Fluentd", "version", "NUMBER", "sabottenda", "Thanks", "for", "the", "confirmation", "This", "problem", "should", "be", "solve", "by", "this", "PR", "LINK", "Could", "you", "try", "master", "code", "Spredzy", "Currently", "there", "be", "no", "nightly", "build", "but", "package", "builder", "be", "open", "LINK", "td", "agent", "I", "will", "release", "Fluentd", "v", "NUMBER", "after", "LINK", "issue", "be", "fix", "NUMBER", "After", "that", "we", "will", "release", "new", "version", "NUMBER", "Simplify", "require", "modules", "NUMBER", "It", "also", "fix", "NUMBER", "Could", "you", "show", "me", "the", "part", "of", "your", "configuration", "example", "I", "want", "to", "use", "it", "for", "test", "NUMBER", "Fixed", "NUMBER", "Please", "try", "master", "branch", "So", "if", "users", "set", "time_default_curret", "false", "users", "throw", "away", "events", "which", "don", "t", "have", "time", "field", "right", "time_default_current", "seems", "unclear", "for", "me", "NUMBER", "How", "about", "time_use_current_when_missing", "It", "s", "too", "long", "but", "this", "feature", "be", "for", "plugin", "developers", "NUMBER", "So", "long", "name", "seems", "acceptable", "NUMBER", "Or", "keep", "shorter", "code", "time_return_nil_when_missing", "or", "similar", "name", "be", "an", "another", "approach", "NUMBER", "It", "s", "acceptable", "for", "me", "NUMBER", "tagomoris", "You", "should", "also", "change", "test", "code", "NUMBER", "You", "must", "use", "opt", "td", "agent", "embedded", "bin", "fluent", "gem", "not", "fluent", "gem", "NUMBER", "See", "this", "FAQ", "LINK", "i", "install", "td", "agent", "and", "want", "to", "add", "custom", "plugins", "how", "do", "i", "do", "it", "This", "be", "for", "td", "agent", "but", "you", "can", "replace", "td", "agent", "install", "path", "with", "td", "agent", "NUMBER", "install", "path", "NUMBER", "And", "please", "follow", "CONTRIBUTING", "guideline", "LINK", "This", "be", "for", "other", "users", "and", "clear", "project", "management", "NUMBER", "Github", "issue", "be", "not", "searchable", "so", "mixing", "question", "bug", "and", "feature", "request", "be", "not", "good", "for", "other", "users", "and", "developers", "NUMBER", "If", "you", "have", "a", "question", "please", "use", "Fluentd", "ML", "instead", "NUMBER", "Sorry", "close", "this", "issue", "for", "now", "NUMBER", "Thanks", "NUMBER", "Ah", "I", "forgot", "to", "mention", "one", "NUMBER", "This", "be", "Fluentd", "repository", "not", "td", "agent", "NUMBER", "If", "you", "have", "a", "bug", "of", "td", "agent", "use", "correct", "repository", "NUMBER", "td", "agent", "LINK", "data", "td", "agent", "td", "agent", "NUMBER", "LINK", "td", "agent", "The", "separation", "between", "fluent", "d", "td", "agent", "wasn", "t", "clear", "to", "me", "NUMBER", "Sorry", "but", "these", "projects", "be", "definitely", "different", "NUMBER", "Fluentd", "be", "a", "core", "of", "Fluent", "OSS", "project", "and", "maintained", "by", "community", "contributors", "NUMBER", "td", "agent", "be", "a", "Treasure", "Data", "Agent", "including", "Fluentd", "and", "maintained", "by", "Treasure", "Data", "NUMBER", "I", "be", "on", "both", "projects", "so", "creating", "td", "agent", "issue", "on", "Fluentd", "be", "not", "critical", "NUMBER", "I", "can", "manage", "it", "I", "want", "the", "feature", "which", "transfers", "issue", "to", "another", "project", "NUMBER", "uninstalled", "rvm", "reinstalled", "td", "agent", "install", "plugin", "use", "full", "path", "finally", "works", "NUMBER", "Thanks", "NUMBER", "Ah", "I", "see", "NUMBER", "Glad", "to", "hear", "that", "Hmm", "NUMBER", "we", "need", "RVM", "expert", "to", "resolve", "this", "RVM", "problem", "NUMBER", "General", "approach", "for", "resolving", "LINK", "kiyoto", "Could", "you", "check", "this", "PR", "kiyoto", "Thank", "you", "for", "test", "NUMBER", "I", "notice", "that", "for", "TCP", "format", "none", "the", "n", "at", "the", "end", "be", "preserved", "Hm", "NUMBER", "I", "can", "remove", "delimiter", "from", "message", "easily", "NUMBER", "Does", "in_tail", "remove", "n", "If", "so", "keep", "same", "behaviour", "be", "better", "NUMBER", "I", "also", "add", "source_host_key", "option", "to", "add", "source", "host", "to", "records", "NUMBER", "I", "m", "not", "sure", "this", "be", "useful", "or", "not", "in", "general", "NUMBER", "If", "users", "use", "in_udp", "or", "in_tcp", "for", "various", "sources", "it", "might", "be", "useful", "for", "detecting", "log", "source", "NUMBER", "frsyuki", "kiyoto", "tagomoris", "sonots", "Do", "you", "have", "any", "concern", "to", "merge", "this", "PR", "No", "NUMBER", "Old", "TcpInput", "be", "obsoleted", "since", "NUMBER", "and", "half", "years", "ago", "so", "there", "be", "no", "users", "NUMBER", "This", "PR", "introduces", "new", "TcpInput", "to", "handle", "general", "TCP", "access", "instead", "of", "old", "obsoleted", "TcpInput", "NUMBER", "kiyoto", "Follow", "in_tail", "way", "NUMBER", "Now", "in_udp", "and", "in_tcp", "remove", "a", "delimiter", "from", "message", "NUMBER", "Please", "check", "NUMBER", "If", "there", "be", "no", "problem", "I", "will", "merge", "this", "PR", "tomorrow", "today", "NUMBER", "It", "seems", "a", "bug", "of", "TextFormatter", "so", "this", "patch", "approach", "be", "not", "good", "NUMBER", "How", "about", "add", "localtime", "and", "utc", "config_param", "or", "simply", "add", "localtime", "true", "before", "conf", "utc", "in", "configure", "Why", "TextFormatter", "receives", "conf", "at", "configure", "NUMBER", "So", "if", "the", "user", "specifies", "localtime", "utc", "these", "parameters", "be", "also", "pass", "to", "TextFormatter", "configure", "NUMBER", "sonots", "I", "notice", "that", "the", "incosisntent", "exists", "in", "Fluentd", "NUMBER", "The", "default", "localtime", "in", "TimeSlicedOutput", "be", "true", "but", "the", "default", "localtime", "in", "SetTimeKeyMixin", "be", "nil", "NUMBER", "I", "think", "TimeSlicedOutput", "behaviour", "be", "correct", "so", "TextFormatter", "should", "follow", "NUMBER", "sonots", "It", "be", "better", "but", "it", "breaks", "some", "user", "contents", "NUMBER", "So", "let", "s", "keep", "existence", "behaviour", "NUMBER", "Thx", "For", "easy", "to", "deploy", "and", "setting", "NUMBER", "See", "this", "comment", "LINK", "issuecomment", "NUMBER", "Example", "conf", "TAG", "log_level", "error", "same", "as", "q", "option", "TAG", "Remaining", "discussions", "Configuration", "name", "use", "TAG", "for", "now", "NUMBER", "What", "command", "line", "options", "should", "be", "set", "Supported", "lists", "log_level", "suppress_repeated_stacktrace", "emit_error_log_interval", "suppress_config_dump", "What", "do", "you", "think", "tagomoris", "Okay", "NUMBER", "kiyoto", "sonots", "How", "about", "this", "change", "system", "be", "good", "for", "element", "name", "Pattern", "mismatch", "log", "should", "be", "warn", "for", "early", "detection", "NUMBER", "We", "can", "disable", "this", "message", "by", "log_level", "error", "in", "production", "NUMBER", "LINK", "Applied", "I", "don", "t", "want", "to", "add", "new", "functionality", "to", "in_foward", "because", "it", "cause", "the", "inconsistency", "with", "out_forward", "NUMBER", "I", "have", "two", "ideas", "Support", "without_priority", "like", "option", "in", "in_syslog", "Add", "new", "in_udp", "in_tcp", "or", "in_transport", "like", "plugin", "to", "support", "arbitrary", "udp", "tcp", "event", "In", "general", "in_udp", "in_tcp", "plugin", "useful", "for", "other", "logging", "mechanizm", "NUMBER", "For", "example", "Netflow", "sends", "own", "format", "with", "udp", "tcp", "protocol", "NUMBER", "I", "m", "considering", "which", "be", "better", "separating", "protocol", "or", "setting", "protocol", "via", "options", "NUMBER", "conf", "TAG", "type", "udp", "format", "NUMBER", "TAG", "or", "conf", "TAG", "type", "event", "or", "better", "name", "protocol_type", "udp", "or", "tcp", "or", "unix", "TAG", "I", "think", "former", "case", "be", "good", "for", "users", "NUMBER", "it", "be", "clear", "plugin", "name", "NUMBER", "Merged", "NUMBER", "So", "I", "close", "this", "issue", "NUMBER", "Hmm", "NUMBER", "log_level", "warn", "be", "not", "fit", "for", "this", "case", "The", "option", "also", "suppresses", "other", "logs", "such", "as", "other", "warnings", "and", "backtraces", "Important", "logs", "be", "also", "ignored", "If", "so", "we", "should", "raise", "the", "level", "of", "such", "logs", "NUMBER", "I", "be", "considering", "incomplete", "warn", "message", "change", "to", "error", "NUMBER", "sabottenda", "I", "see", "NUMBER", "I", "understood", "your", "case", "NUMBER", "On", "my", "personal", "opinion", "I", "want", "to", "make", "plugins", "simple", "because", "it", "be", "a", "philosophy", "of", "Fluentd", "NUMBER", "So", "I", "add", "new", "option", "to", "existence", "plugin", "carefully", "NUMBER", "For", "now", "this", "option", "seems", "to", "cover", "rare", "case", "because", "some", "users", "avoid", "this", "problem", "with", "log_level", "error", "per", "plugin", "NUMBER", "If", "more", "users", "want", "this", "feature", "I", "will", "re", "consider", "support", "it", "in", "in_tail", "NUMBER", "What", "do", "you", "think", "Don", "t", "use", "issue", "for", "ask", "question", "first", "NUMBER", "Could", "you", "post", "these", "to", "Fluentd", "ML", "See", "LINK", "Close", "this", "issue", "for", "now", "NUMBER", "This", "feature", "seems", "to", "be", "realized", "by", "DSL", "configuration", "NUMBER", "P", "NUMBER", "S", "NUMBER", "In", "my", "personal", "opinion", "hostname", "separation", "be", "not", "good", "for", "system", "management", "NUMBER", "Hostname", "be", "sometimes", "change", "so", "use", "hostname", "as", "filename", "be", "so", "error", "prone", "NUMBER", "I", "think", "role", "based", "separation", "be", "good", "and", "there", "be", "popular", "tool", "which", "support", "role", "based", "management", "e", "NUMBER", "g", "NUMBER", "Chef", "Ansible", "and", "etc", "NUMBER", "I", "m", "not", "sure", "NUMBER", "tagomoris", "Do", "you", "hit", "a", "problem", "to", "support", "include", "feature", "in", "DSL", "Another", "idea", "source", "or", "match", "pass", "self", "to", "block", "NUMBER", "rb", "source", "s", "s", "NUMBER", "include", "path", "to", "configuration", "How", "about", "this", "It", "reduces", "reserved", "variable", "NUMBER", "tagomoris", "Ah", "I", "forgot", "this", "case", "NUMBER", "Hmm", "NUMBER", "I", "don", "t", "use", "DSL", "configuration", "so", "I", "follow", "user", "s", "opinion", "NUMBER", "I", "don", "t", "understand", "Upstart", "s", "behaviour", "correctly", "NUMBER", "Upstart", "remove", "log", "file", "and", "create", "a", "new", "file", "with", "same", "name", "in_tail", "can", "t", "track", "log", "rotation", "mechanizm", "correctly", "with", "you", "mention", "compressed", "case", "so", "we", "write", "You", "should", "not", "use", "with", "log", "rotation", "in", "the", "documentation", "NUMBER", "be", "needed", "to", "tail", "the", "file", "in", "Upstart", "case", "I", "need", "more", "time", "to", "check", "this", "PR", "how", "affect", "popular", "case", "NUMBER", "So", "Upstart", "case", "be", "enough", "with", "fix", "path", "foo", "NUMBER", "log", "path", "config", "in_tail", "s", "format", "format", "path", "Fluentd", "try", "to", "read", "a", "rotated", "file", "from", "beginning", "if", "in_tail", "s", "format", "also", "matches", "the", "rotated", "file", "name", "It", "depends", "on", "the", "configuration", "NUMBER", "If", "read_from_head", "be", "true", "in_tail", "reads", "from", "the", "beginning", "when", "detects", "new", "file", "NUMBER", "When", "path", "contains", "in_tail", "starts", "to", "watch", "rotated", "file", "as", "new", "file", "and", "almost", "users", "use", "read_from_head", "true", "with", "NUMBER", "I", "see", "NUMBER", "So", "if", "I", "can", "write", "an", "accurate", "configuration", "which", "do", "not", "match", "rotated", "file", "there", "be", "no", "reasons", "to", "prohibit", "path", "NUMBER", "Yes", "so", "use", "NUMBER", "log", "be", "better", "than", "NUMBER", "be", "useful", "but", "it", "be", "danger", "Are", "there", "other", "documentations", "about", "a", "compressed", "case", "Not", "yet", "NUMBER", "We", "need", "document", "improvement", "NUMBER", "Thanks", "Github", "has", "Contributing", "guidelines", "feature", "LINK", "contribute", "guidelines", "Adding", "CONTRIBUTING", "NUMBER", "md", "helps", "users", "to", "choose", "better", "actions", "NUMBER", "This", "be", "a", "prototype", "NUMBER", "We", "need", "to", "improve", "the", "words", "in", "the", "document", "NUMBER", "What", "do", "you", "think", "edit", "I", "referred", "to", "AngularJS", "and", "FactoryGirl", "CONTRIBUTING", "NUMBER", "md", "Applied", "reviews", "yyamano", "Fixed", "If", "you", "have", "a", "good", "format", "please", "send", "a", "PR", "NUMBER", "We", "can", "t", "accept", "this", "PR", "because", "this", "change", "breaks", "all", "existence", "environments", "NUMBER", "I", "be", "considering", "better", "way", "so", "I", "close", "this", "PR", "for", "now", "NUMBER", "This", "change", "be", "needed", "for", "support", "multi", "events", "in", "one", "log", "NUMBER", "Current", "TextParser", "parse", "XXXParser", "call", "API", "be", "below", "rb", "time", "record", "parser", "NUMBER", "parse", "text", "In", "this", "API", "we", "can", "t", "treat", "netflow", "like", "multi", "event", "log", "without", "trick", "NUMBER", "We", "have", "several", "approaches", "to", "resolve", "the", "problem", "NUMBER", "parser", "NUMBER", "parse", "returns", "array", "value", "NUMBER", "parser", "NUMBER", "parse", "receives", "EventStream", "object", "NUMBER", "parser", "NUMBER", "parse", "accepts", "block", "I", "compared", "above", "approaches", "and", "I", "think", "NUMBER", "be", "better", "NUMBER", "At", "NUMBER", "users", "should", "check", "return", "value", "type", "NUMBER", "It", "seems", "complicated", "At", "NUMBER", "I", "can", "t", "imagine", "the", "clear", "API", "At", "NUMBER", "users", "write", "only", "parser", "NUMBER", "parse", "text", "time", "record", "NUMBER", "to", "accept", "popular", "one", "event", "log", "and", "multi", "event", "log", "So", "I", "decided", "to", "use", "NUMBER", "and", "TextParser", "parse", "support", "two", "call", "approaches", "t", "r", "parser", "NUMBER", "parse", "text", "and", "parser", "NUMBER", "parse", "text", "t", "r", "NUMBER", "NUMBER", "What", "do", "you", "think", "edit", "I", "add", "old", "API", "support", "code", "to", "each", "call", "method", "NUMBER", "So", "there", "be", "no", "compatibility", "problem", "with", "Fluent", "TextParser", "XXXParser", "NUMBER", "But", "I", "will", "remove", "this", "old", "API", "in", "the", "future", "NUMBER", "maybe", "v", "NUMBER", "tagomoris", "I", "consider", "old", "API", "support", "in", "call", "but", "XXXParser", "in", "TextParser", "be", "not", "use", "in", "user", "code", "because", "users", "use", "TextParser", "parse", "NUMBER", "TextParser", "parse", "support", "old", "API", "so", "I", "think", "this", "change", "doesn", "t", "break", "user", "code", "NUMBER", "Of", "course", "if", "input", "plugins", "use", "XXXParser", "directly", "call", "should", "support", "old", "API", "NUMBER", "Why", "did", "you", "fix", "build", "in", "plugins", "which", "uses", "TextParser", "parse", "in", "this", "pull", "req", "The", "change", "of", "build", "in", "plugin", "be", "only", "to", "use", "block", "based", "approach", "instead", "of", "t", "r", "parser", "NUMBER", "parse", "text", "but", "in_syslog", "be", "needed", "to", "support", "multi", "events", "I", "don", "t", "know", "but", "some", "products", "send", "own", "format", "via", "syslog", "protocol", "NUMBER", "So", "to", "support", "multi", "event", "parsing", "in", "in_syslog", "may", "be", "useful", "NUMBER", "Okay", "just", "add", "old", "API", "support", "to", "each", "call", "NUMBER", "If", "no", "problem", "I", "will", "include", "this", "change", "in", "v", "NUMBER", "thanks", "Do", "you", "have", "a", "example", "which", "doesn", "t", "work", "in", "this", "case", "Merged", "Good", "This", "be", "a", "testbed", "for", "shutdown", "improvement", "NUMBER", "Current", "Engine", "shutdown", "calles", "plugin", "s", "shutdown", "in", "parallel", "NUMBER", "The", "merit", "be", "fast", "shutdown", "and", "it", "works", "on", "almost", "cases", "but", "it", "has", "one", "problem", "that", "output", "plugin", "may", "be", "close", "before", "input", "plugin", "shutdown", "NUMBER", "To", "resolve", "the", "problem", "calls", "input", "shutdown", "before", "output", "shutdown", "NUMBER", "The", "demerit", "be", "taking", "more", "time", "to", "shutdown", "Fluentd", "if", "input", "and", "output", "have", "long", "time", "shutdown", "NUMBER", "In", "addition", "I", "consider", "add", "timeout", "to", "each", "plugin", "shutdown", "NUMBER", "For", "keep", "compatibility", "default", "be", "no", "timeout", "but", "add", "shutdown", "timeout", "SECONDS", "like", "option", "to", "Fluentd", "NUMBER", "What", "do", "you", "think", "Fluentd", "currently", "doesn", "t", "have", "filter", "plugins", "NUMBER", "So", "the", "change", "doesn", "t", "always", "fix", "the", "issue", "NUMBER", "Yeah", "but", "merge", "this", "PR", "resolve", "Input", "plugin", "issue", "at", "least", "NUMBER", "We", "have", "a", "plan", "to", "support", "filter", "mechanism", "for", "v", "NUMBER", "After", "that", "current", "Output", "emit", "problem", "will", "be", "resolve", "NUMBER", "I", "think", "later", "or", "sooner", "fluentd", "NUMBER", "conf", "needs", "to", "have", "top", "level", "configuration", "parameters", "for", "Fluentd", "core", "NUMBER", "It", "seems", "good", "idea", "NUMBER", "Currently", "fluentd", "command", "options", "be", "messy", "NUMBER", "Added", "comment", "for", "future", "work", "NUMBER", "There", "be", "no", "counter", "opinion", "for", "this", "PR", "NUMBER", "I", "will", "merge", "this", "PR", "today", "and", "I", "will", "consider", "shutdown", "timeout", "and", "specify", "Fluentd", "options", "in", "configuration", "file", "NUMBER", "Good", "catch", "You", "don", "t", "need", "to", "post", "above", "apologetic", "comment", "before", "conversation", "NUMBER", "Please", "execute", "bundle", "install", "first", "NUMBER", "After", "that", "try", "bundle", "exec", "rake", "build", "NUMBER", "np", "NUMBER", "I", "will", "add", "this", "commands", "to", "README", "later", "Ah", "hmm", "NUMBER", "Or", "may", "it", "be", "necessary", "to", "check", "the", "queue", "size", "at", "the", "beginning", "of", "BasicBuffer", "emit", "not", "after", "checking", "storable", "The", "merit", "of", "current", "implementation", "Fluentd", "try", "to", "process", "events", "as", "much", "as", "possible", "queued", "chunks", "chunk", "in", "map", "NUMBER", "I", "don", "t", "know", "which", "be", "the", "best", "but", "it", "works", "fine", "NUMBER", "I", "can", "t", "find", "portable", "command", "to", "get", "group", "id", "so", "use", "Etc", "module", "instead", "NUMBER", "munangst", "Could", "you", "test", "this", "branch", "on", "your", "environment", "I", "test", "on", "my", "Ubuntu", "and", "it", "seems", "work", "NUMBER", "I", "test", "this", "PR", "with", "replacing", "td", "agent", "s", "fluentd", "and", "it", "works", "NUMBER", "I", "see", "NUMBER", "I", "understood", "the", "problem", "NUMBER", "I", "checked", "the", "Ruby", "libraries", "and", "find", "Etc", "module", "NUMBER", "Here", "be", "the", "result", "on", "my", "env", "rb", "Etc", "NUMBER", "getgrnam", "staff", "NUMBER", "gid", "NUMBER", "Etc", "NUMBER", "getpwnam", "repeatedly", "NUMBER", "uid", "NUMBER", "munangst", "Using", "Etc", "instead", "of", "calling", "id", "command", "be", "good", "for", "you", "or", "do", "you", "have", "an", "another", "idea", "to", "resolve", "this", "problem", "munangst", "I", "just", "merge", "the", "PR", "to", "fix", "this", "problem", "NUMBER", "Thanks", "for", "the", "report", "Could", "you", "add", "a", "test", "I", "will", "check", "it", "later", "NUMBER", "Ah", "wait", "NUMBER", "I", "don", "t", "understand", "the", "situation", "correctly", "NUMBER", "read_from_head", "be", "for", "existence", "file", "not", "new", "file", "NUMBER", "Why", "do", "you", "tail", "new", "file", "with", "read_from_head", "Raising", "an", "exception", "be", "safer", "for", "detecting", "wrong", "path", "setting", "NUMBER", "For", "example", "I", "may", "want", "to", "collect", "apache", "memcache", "and", "syslog", "on", "one", "set", "of", "VMs", "and", "memcache", "mysql", "and", "syslog", "on", "another", "set", "NUMBER", "It", "s", "easiest", "for", "me", "to", "just", "use", "the", "same", "config", "file", "for", "both", "sets", "of", "VMs", "and", "enabling", "read_from_head", "makes", "it", "so", "that", "installation", "order", "doesn", "t", "matter", "NUMBER", "I", "see", "NUMBER", "So", "you", "want", "to", "tail", "some", "fix", "path", "file", "not", "use", "right", "Thanks", "Just", "merge", "NUMBER", "How", "about", "other", "format", "like", "regexp", "csv", "And", "I", "can", "t", "judge", "which", "be", "better", "array", "or", "LF", "separated", "values", "for", "text", "format", "NUMBER", "json", "NUMBER", "json", "NUMBER", "or", "json", "NUMBER", "n", "json", "NUMBER", "n", "My", "concern", "be", "in_http", "will", "be", "use", "in", "IoT", "environment", "NUMBER", "Some", "embedded", "devises", "doesn", "t", "have", "json", "or", "msgpack", "library", "and", "these", "devises", "can", "t", "call", "HTTP", "request", "per", "event", "to", "reduce", "access", "costs", "NUMBER", "So", "if", "we", "spread", "Fluentd", "on", "such", "environment", "in_http", "should", "support", "batch", "mode", "for", "other", "formats", "NUMBER", "BTW", "support", "json", "msgpack", "array", "with", "default", "be", "good", "NUMBER", "Implemented", "out_file", "json", "ltsv", "onekey", "as", "build", "in", "formats", "NUMBER", "I", "want", "feedback", "for", "APIs", "or", "lacking", "feature", "NUMBER", "tagomoris", "sonots", "kiyoto", "I", "finished", "the", "first", "implementation", "of", "TextFormatter", "NUMBER", "Could", "you", "review", "this", "TextFormatter", "module", "and", "each", "formatter", "implementation", "classes", "be", "in", "separated", "file", "NUMBER", "It", "seems", "like", "Java", "package", "NUMBER", "Hm", "current", "Fluentd", "structure", "uses", "putting", "relate", "classes", "into", "same", "file", "NUMBER", "If", "we", "separate", "classes", "into", "each", "file", "maybe", "another", "issue", "be", "better", "NUMBER", "tagomoris", "Do", "you", "have", "an", "idea", "for", "file", "name", "fluent", "formatter", "json", "NUMBER", "rb", "fluent", "formatter", "json_formatter", "NUMBER", "rb", "I", "will", "separate", "file", "later", "NUMBER", "Use", "single_value", "instead", "of", "onekey", "for", "clear", "name", "NUMBER", "I", "forgot", "to", "include", "this", "change", "to", "this", "PR", "NUMBER", "LINK", "I", "don", "t", "understand", "what", "the", "problem", "be", "NUMBER", "symlink_path", "be", "for", "watching", "the", "file", "content", "in", "realtime", "so", "created", "symlink", "points", "to", "buffered", "file", "NUMBER", "This", "behaviour", "be", "already", "mention", "by", "sabottenda", "and", "expected", "I", "think", "NUMBER", "Can", "we", "close", "this", "issue", "The", "default", "buffer_type", "of", "out_file", "be", "memory", "then", "it", "would", "not", "create", "buffer", "symlink", "NUMBER", "No", "NUMBER", "out_file", "be", "TimeSlicedOutput", "so", "the", "default", "buffer_type", "be", "file", "NUMBER", "I", "sometimes", "mention", "this", "feature", "in", "issue", "and", "ML", "so", "no", "counter", "opinion", "Fixing", "NUMBER", "and", "NUMBER", "I", "want", "to", "discuss", "option", "name", "NUMBER", "Currently", "use", "path_increment", "NUMBER", "Yeah", "I", "know", "NUMBER", "But", "Ruby", "s", "GzipReader", "has", "a", "bug", "LINK", "lang", "NUMBER", "org", "issue", "NUMBER", "and", "calling", "gunzip", "be", "not", "portable", "test", "NUMBER", "Fluentd", "will", "support", "Windows", "environment", "and", "Windows", "doesn", "t", "have", "gunzip", "command", "by", "default", "NUMBER", "tagomoris", "My", "first", "implementation", "seems", "append", "but", "append", "seems", "general", "name", "NUMBER", "Hmm", "NUMBER", "kiyoto", "hkmurakami", "Do", "you", "have", "any", "suggestion", "yyamano", "Ah", "NUMBER", "yeah", "NUMBER", "It", "should", "be", "fix", "or", "wrapped", "with", "if", "NUMBER", "Use", "GzipReader", "for", "test", "NUMBER", "If", "we", "choose", "numbering", "maybe", "path_numbering", "or", "similar", "be", "better", "for", "clear", "name", "NUMBER", "Here", "be", "the", "list", "append", "path_increment", "path_numbering", "I", "decided", "to", "use", "append", "because", "we", "already", "use", "compress", "for", "file", "compression", "NUMBER", "append", "be", "similar", "to", "this", "option", "and", "meaning", "be", "clear", "in", "out_file", "context", "NUMBER", "I", "implement", "first", "version", "of", "format", "support", "in", "in_http", "NUMBER", "This", "implementation", "doesn", "t", "support", "field_name", "option", "and", "assumes", "body", "be", "entire", "content", "like", "header", "provide", "json", "behaviour", "NUMBER", "LINK", "_http", "NUMBER", "rb", "L", "NUMBER", "kiyoto", "What", "do", "you", "think", "Do", "we", "need", "field_name", "option", "Existence", "default", "behaviour", "can", "accept", "json", "msgpack", "without", "explicit", "format", "so", "need", "json", "or", "msgpack", "identifier", "in", "HTTP", "body", "NUMBER", "But", "with", "format", "option", "we", "already", "specified", "body", "format", "in", "configuration", "so", "field_name", "seems", "redundant", "NUMBER", "You", "set", "unique", "index", "to", "your", "MongoDB", "collection", "and", "you", "send", "same", "key", "to", "such", "collection", "NUMBER", "I", "don", "t", "understand", "why", "you", "send", "duplicate", "key", "to", "unique", "indexed", "collection", "NUMBER", "The", "issue", "impact", "fluentd", "normal", "work", "It", "depends", "on", "your", "situation", "NUMBER", "Fluentd", "creates", "each", "thread", "for", "each", "buffered", "output", "plugin", "so", "out_mongo", "doesn", "t", "block", "the", "other", "plugins", "NUMBER", "P", "NUMBER", "S", "NUMBER", "This", "be", "not", "Fluentd", "issue", "so", "please", "don", "t", "open", "each", "plugin", "issue", "on", "Fluentd", "repository", "NUMBER", "Each", "plugin", "repository", "be", "best", "place", "NUMBER", "Separating", "file", "be", "expected", "behaviour", "in", "out_file", "NUMBER", "TimeSlicedOutput", "sometimes", "create", "bigger", "file", "NUMBER", "In", "this", "case", "this", "behaviour", "makes", "the", "concurrent", "script", "easier", "NUMBER", "Hmm", "NUMBER", "if", "merge", "feature", "be", "popular", "request", "then", "we", "will", "consider", "such", "feature", "NUMBER", "tagomoris", "Hmm", "NUMBER", "do", "you", "know", "how", "many", "users", "use", "fluent", "plugin", "file", "alternative", "If", "many", "users", "use", "non", "compress", "mode", "then", "we", "can", "port", "merge", "file", "feature", "into", "out_file", "NUMBER", "loveshell", "Did", "you", "test", "this", "PR", "on", "your", "environment", "You", "didn", "t", "call", "close", "method", "of", "GzipWriter", "so", "this", "PR", "seems", "broken", "NUMBER", "I", "already", "opened", "other", "PR", "which", "contains", "more", "better", "implementation", "so", "close", "this", "issue", "NUMBER", "Thx", "Maybe", "setting", "buffer_chunk_limit", "value", "to", "tooooooo", "large", "value", "helps", "the", "problem", "NUMBER", "LINK", "_file", "And", "if", "you", "have", "a", "question", "please", "post", "it", "on", "Fluentd", "ML", "first", "NUMBER", "LINK", "forum", "fluentd", "Yes", "NUMBER", "out_file", "flushes", "file", "when", "reached", "buffer_chunk_limit", "or", "pass", "time_slice_format", "time", "NUMBER", "If", "you", "want", "to", "check", "out_file", "s", "content", "in", "realtime", "please", "use", "symlink_path", "with", "buffer_type", "file", "NUMBER", "LINK", "_file", "symlinkpath", "cloud", "sec", "Maybe", "you", "can", "use", "fluent", "plugin", "file", "alternative", "to", "merge", "same", "time", "slice", "into", "same", "file", "LINK", "plugin", "file", "alternative", "Already", "fix", "NUMBER", "I", "m", "not", "sure", "this", "be", "a", "bug", "of", "Fluentd", "or", "fluent", "plugin", "elb", "log", "or", "fluent", "plugin", "elasicsearch", "NUMBER", "If", "this", "be", "a", "bug", "of", "Fluentd", "itself", "I", "will", "investigate", "it", "NUMBER", "Please", "use", "out_stdout", "instead", "of", "out_elasitcsearch", "or", "insert", "out_copy", "with", "out_stdout", "plugin", "to", "investigate", "the", "problem", "NUMBER", "If", "the", "problem", "be", "fluent", "plugin", "elb", "log", "please", "repost", "the", "issue", "on", "fluent", "plugin", "elb", "log", "repository", "NUMBER", "Github", "s", "form", "uses", "Markdown", "so", "you", "can", "use", "for", "pasting", "the", "your", "configuration", "or", "logs", "NUMBER", "See", "LINK", "flavored", "markdown", "It", "seems", "not", "Fluentd", "s", "bug", "so", "close", "temporary", "NUMBER", "If", "Fluentd", "has", "the", "problem", "please", "reopen", "it", "NUMBER", "LINK", "From", "above", "thread", "use", "v", "NUMBER", "config", "has", "include", "relate", "bug", "NUMBER", "Fixing", "the", "bug", "be", "easy", "but", "I", "have", "one", "concern", "NUMBER", "At", "v", "NUMBER", "new", "configuration", "uses", "include", "not", "include", "NUMBER", "Maybe", "means", "the", "system", "specific", "identifier", "e", "NUMBER", "g", "NUMBER", "ERROR", "for", "error", "stream", "NUMBER", "Introducing", "makes", "some", "features", "simply", "NUMBER", "We", "can", "use", "include", "xxx", "instead", "of", "TAG", "in", "TAG", "NUMBER", "What", "do", "you", "think", "Should", "we", "add", "prefix", "for", "system", "features", "We", "can", "support", "both", "include", "and", "include", "and", "recommend", "include", "syntax", "NUMBER", "sonots", "Yes", "NUMBER", "TAG", "be", "for", "specific", "case", "so", "my", "plan", "be", "integrated", "into", "include", "NUMBER", "yyamano", "Almost", "old", "configuration", "works", "with", "V", "NUMBER", "format", "NUMBER", "This", "be", "why", "I", "leave", "foo", "bar", "syntax", "not", "only", "foo", "bar", "for", "string", "type", "NUMBER", "Supporting", "include", "and", "warn", "the", "message", "be", "good", "for", "reducing", "the", "migration", "cost", "NUMBER", "I", "m", "not", "familiar", "with", "GlusterFS", "NUMBER", "Is", "this", "a", "bug", "of", "out_file", "or", "GlusterFS", "needs", "special", "thing", "For", "example", "permission", "specific", "client", "or", "etc", "Maybe", "there", "be", "no", "GlusterFS", "users", "in", "Fluentd", "maintainers", "NUMBER", "So", "we", "can", "t", "fix", "GlusterFS", "specific", "problem", "NUMBER", "Of", "course", "patches", "be", "welcome", "From", "above", "discussions", "this", "be", "not", "out_file", "s", "bug", "so", "I", "close", "the", "issue", "NUMBER", "But", "maybe", "we", "can", "keep", "the", "discussion", "if", "there", "be", "more", "useful", "information", "NUMBER", "yyamano", "Maybe", "you", "refer", "the", "v", "NUMBER", "s", "source", "code", "NUMBER", "v", "NUMBER", "branch", "be", "dead", "branch", "for", "now", "NUMBER", "Hmm", "NUMBER", "I", "see", "NUMBER", "Some", "plugins", "seem", "to", "be", "depended", "on", "log", "initialization", "at", "lib", "fluent", "test", "NUMBER", "rb", "NUMBER", "Forcing", "change", "to", "all", "plugin", "authors", "may", "be", "difficulit", "NUMBER", "One", "idea", "be", "add", "log", "Fluent", "Log", "NUMBER", "new", "Fluent", "Test", "DummyLogDevice", "NUMBER", "new", "Fluent", "Log", "LEVEL_WARN", "statement", "to", "lib", "fluent", "helper", "NUMBER", "rb", "NUMBER", "What", "do", "you", "think", "tagomoris", "What", "do", "you", "think", "tagomoris", "It", "means", "test", "helper", "NUMBER", "rb", "should", "be", "in", "fluent", "plugin", "test", "Yes", "NUMBER", "Fixing", "this", "issue", "be", "better", "for", "now", "NUMBER", "sonots", "Could", "you", "test", "log", "Fluent", "Log", "NUMBER", "new", "Fluent", "Test", "DummyLogDevice", "NUMBER", "new", "Fluent", "Log", "LEVEL_WARN", "instead", "Maybe", "use", "DummyLogDevice", "be", "better", "than", "STDOUT", "NUMBER", "sonots", "After", "this", "change", "your", "test", "be", "pass", "Hmm", "NUMBER", "the", "problem", "seems", "to", "convert", "CRLF", "to", "LF", "automatically", "in", "Ruby", "s", "File", "NUMBER", "How", "about", "specify", "File", "BINARY", "in", "File", "NUMBER", "open", "argument", "Fluentd", "doesn", "t", "now", "work", "on", "JRuby", "because", "dependent", "gems", "don", "t", "work", "NUMBER", "But", "I", "think", "time", "to", "support", "JRuby", "because", "Cool", "NUMBER", "io", "starts", "to", "support", "JRuby", "Here", "be", "the", "tasks", "Cool", "NUMBER", "io", "LINK", "msgpack", "jruby", "I", "m", "not", "sure", "how", "to", "support", "msgpack", "jruby", "seamlessly", "Revived", "this", "issue", "LINK", "ruby", "issue", "NUMBER", "Fix", "GVL", "dependent", "code", "Can", "we", "use", "thread_safe", "gem", "LINK", "_safe", "If", "you", "have", "any", "suggestion", "please", "let", "me", "know", "If", "you", "be", "interested", "in", "Cool", "NUMBER", "io", "on", "JRuby", "please", "check", "this", "branch", "LINK", "_jruby", "Here", "be", "our", "JRuby", "support", "plan", "NUMBER", "Fluentd", "Fluentd", "keep", "simple", "NUMBER", "We", "have", "a", "plan", "to", "introduce", "Actor", "and", "other", "utilities", "NUMBER", "After", "that", "plugin", "developers", "easy", "to", "write", "plugins", "for", "CRuby", "and", "JRuby", "NUMBER", "We", "will", "provide", "fluentd", "NUMBER", "jar", "so", "you", "can", "easy", "to", "run", "Fluentd", "on", "your", "Java", "environment", "NUMBER", "td", "agent", "td", "agent", "will", "bundle", "JRE", "or", "JDK", "and", "you", "can", "choose", "Ruby", "runtime", "at", "start", "NUMBER", "Default", "be", "CRuby", "but", "setting", "TD_AGENT_RUNTIME", "jruby", "or", "similar", "variable", "change", "the", "Ruby", "runtime", "in", "td", "agent", "NUMBER", "In", "old", "configuration", "we", "can", "specify", "parameters", "with", "empty", "string", "aconf", "TAG", "type", "mongo", "tag_mapped", "others", "TAG", "but", "v", "NUMBER", "can", "t", "NUMBER", "This", "format", "be", "popular", "so", "v", "NUMBER", "should", "support", "this", "NUMBER", "I", "have", "an", "another", "idea", "NUMBER", "How", "about", "class", "method", "rb", "module", "Fluent", "class", "Supervisor", "def", "self", "NUMBER", "default_options", "same", "as", "DEFAULT_OPTIONS", "end", "NUMBER", "end", "This", "approach", "avoids", "Marshal", "NUMBER", "load", "Marshal", "NUMBER", "dump", "hack", "NUMBER", "Okay", "NUMBER", "Could", "you", "squash", "a", "commit", "Quick", "reply", "from", "my", "view", "point", "for", "the", "patch", "We", "can", "t", "merge", "this", "patch", "because", "it", "breaks", "several", "plugins", "e", "NUMBER", "g", "NUMBER", "fluent", "plugin", "mongo", "and", "tag_mapped", "like", "approach", "plugins", "chunk_key", "be", "achieved", "by", "current", "key", "argument", "NUMBER", "I", "can", "t", "see", "the", "merit", "of", "this", "approach", "excluding", "human", "readable", "NUMBER", "Please", "see", "the", "V", "NUMBER", "configuration", "document", "before", "use", "use", "v", "NUMBER", "config", "NUMBER", "LINK", "file", "v", "NUMBER", "format", "Please", "escape", "all", "character", "NUMBER", "i", "sloved", "it", "Good", "Currently", "some", "plugins", "implement", "own", "format", "feature", "e", "NUMBER", "g", "NUMBER", "format", "to", "json", "none", "and", "etc", "NUMBER", "Providing", "format", "feature", "officially", "reduces", "the", "deplicated", "routines", "NUMBER", "We", "have", "TextParser", "to", "share", "the", "parse", "routines", "NUMBER", "I", "think", "we", "can", "use", "same", "approarch", "like", "TextFormatter", "with", "Fluent", "Registry", "NUMBER", "What", "do", "you", "think", "NUMBER", "for", "the", "naming", "Fluent", "Registry", "be", "internal", "class", "and", "already", "implement", "NUMBER", "So", "It", "be", "outside", "the", "scope", "of", "this", "issue", "NUMBER", "kiyoto", "If", "you", "have", "a", "good", "idea", "for", "Fluent", "Registry", "please", "open", "new", "issue", "By", "chunk_size_warn", "option", "and", "chunk_size_limit", "NUMBER", "Currently", "buffer", "plugin", "show", "logs", "of", "large", "chunk", "data", "for", "NUMBER", "time", "emit", "NUMBER", "But", "buffer", "cannot", "show", "these", "logs", "with", "tags", "and", "where", "from", "NUMBER", "It", "be", "not", "useful", "to", "investigate", "real", "troubles", "NUMBER", "Add", "options", "to", "show", "where", "these", "large", "chunk", "comes", "from", "and", "to", "drop", "these", "abnormal", "chunk", "if", "specified", "NUMBER", "Tests", "fix", "Pushed", "fix", "code", "NUMBER", "kiyoto", "sonots", "frsyuki", "Could", "you", "have", "a", "good", "idea", "for", "option", "names", "Related", "with", "NUMBER", "Base", "classes", "be", "Fluent", "Plugin", "Buffer", "Base", "and", "Input", "Base", "Output", "Base", "Plugins", "be", "like", "Fluent", "Plugin", "Awesome", "Output", "in", "fluent", "plugin", "awesome", "gem", "in", "lib", "fluent", "plugin", "awesome", "output", "NUMBER", "rb", "How", "about", "file", "path", "collision", "in", "fluentd", "repository", "Using", "Fluentd", "prefix", "or", "not", "Change", "plugin", "gem", "naming", "rule", "Callback", "based", "start", "up", "checking", "ruby", "def", "start", "thread", "Thread", "NUMBER", "new", "start", "true", "use", "actor", "actually", "end", "def", "check_start", "start", "end", "We", "need", "some", "feature", "to", "support", "checking", "threads", "actually", "start", "or", "not", "by", "callback", "from", "fluentd", "engine", "or", "test", "library", "NUMBER", "Buffer", "plugins", "should", "have", "some", "additional", "hook", "points", "to", "count", "emitted", "records", "check", "chunk", "size", "check", "elapse", "time", "Finally", "both", "of", "output", "plugins", "and", "buffer", "plugins", "should", "be", "able", "to", "determine", "when", "buffers", "should", "be", "flushed", "NUMBER", "v", "NUMBER", "branch", "has", "new", "implementations", "NUMBER", "LINK", "We", "can", "merge", "these", "API", "ideas", "NUMBER", "remove", "setting", "global", "logger", "in", "lib", "fluent", "test", "NUMBER", "rb", "developer", "cannot", "understand", "when", "this", "assignment", "happen", "global", "logger", "assignment", "exists", "in", "test", "helper", "dummy", "logger", "should", "contain", "message", "that", "logger", "writes", "to", "assert", "logger", "s", "output", "from", "core", "plugin", "test", "test", "dummy", "logger", "be", "set", "in", "default", "in", "create_driver", "to", "test", "logger", "message", "in", "configure", "DummyLogDevice", "suppresses", "the", "plugin", "s", "log", "on", "console", "store", "logs", "on", "its", "instance", "variable", "to", "test", "logs", "be", "write", "or", "not", "NUMBER", "I", "agree", "showing", "diff", "be", "good", "idea", "and", "we", "can", "t", "break", "the", "current", "format", "NUMBER", "I", "think", "support", "format", "at", "each", "plugin", "be", "not", "good", "idea", "NUMBER", "So", "implement", "Formatter", "like", "TextParser", "seems", "more", "flexible", "NUMBER", "sonots", "Did", "you", "release", "this", "stdout", "as", "a", "plugin", "I", "don", "t", "understand", "how", "this", "option", "be", "useful", "for", "other", "users", "NUMBER", "tagomoris", "frsyuki", "kiyoto", "kzk", "What", "do", "you", "think", "If", "you", "okay", "I", "will", "merge", "it", "NUMBER", "I", "have", "NUMBER", "ideas", "to", "support", "this", "issue", "NUMBER", "Fixed", "format", "by", "setting", "format", "in", "http", "configuration", "Should", "reject", "other", "format", "when", "format", "be", "specified", "NUMBER", "Support", "format", "parameter", "via", "URL", "request", "parameter", "Keep", "current", "behaviour", "NUMBER", "Current", "in_http", "accepts", "both", "msgpack", "and", "json", "format", "NUMBER", "Which", "be", "better", "kiyoto", "So", "in_http", "s", "behaviour", "be", "like", "below", "if", "format", "be", "not", "specified", "then", "the", "behaviour", "be", "same", "as", "current", "implementation", "if", "format", "be", "specified", "then", "check", "the", "format", "I", "will", "implement", "this", "after", "release", "td", "agent", "NUMBER", "My", "enhancement", "plan", "NUMBER", "support", "format", "option", "NUMBER", "support", "batch", "mode", "NUMBER", "support", "gzip", "deflate", "compression", "format", "option", "be", "implement", "NUMBER", "I", "will", "try", "to", "implement", "NUMBER", "and", "NUMBER", "ideas", "later", "NUMBER", "NUMBER", "to", "current", "v", "NUMBER", "behavior", "LGTM", "Variations", "should", "be", "a", "parser", "plugin", "not", "bundled", "parser", "i", "think", "NUMBER", "LGTM", "Extend", "DSL", "to", "configure", "parameters", "of", "plugins", "to", "define", "nested", "sections", "with", "its", "parameter", "name", "type", "definitions", "NUMBER", "Add", "proxy", "object", "as", "receiver", "of", "config_", "methods", "to", "implement", "this", "to", "configure", "recursively", "with", "config", "element", "trees", "NUMBER", "definition", "example", "ruby", "class", "GreatNoodleReportPlugin", "config_param", "name", "string", "default", "frsyuki", "config_section", "userinfo", "required", "true", "multi", "false", "do", "for", "just", "NUMBER", "TAG", "section", "config_param", "address", "string", "config_param", "age", "integer", "config_param", "admin", "default", "false", "end", "config_section", "noodle", "param_name", "noodles", "required", "false", "multi", "true", "do", "for", "any", "times", "of", "TAG", "sections", "config_argument", "name", "string", "section", "argument", "NAME", "required", "default", "option", "be", "also", "available", "config_param", "cost", "integer", "config_section", "shop", "param_name", "shops", "do", "string", "value", "be", "also", "acceptable", "config_argument", "magazine_page", "do", "val", "raise", "Fluent", "ConfigError", "magazine_page", "argument", "be", "required", "if", "val", "NUMBER", "nil", "val", "NUMBER", "empty", "val", "NUMBER", "to_i", "end", "config_param", "name", "string", "default", "nil", "config_param", "stars", "integer", "default", "nil", "end", "end", "configuration", "example", "apache", "TAG", "type", "great_noodle_report", "name", "repeatedly", "TAG", "address", "Marunouchi", "age", "NUMBER", "admin", "false", "TAG", "TAG", "cost", "NUMBER", "TAG", "name", "ten", "ichi", "stars", "NUMBER", "TAG", "TAG", "stars", "NUMBER", "TAG", "TAG", "TAG", "cost", "NUMBER", "TAG", "stars", "NUMBER", "TAG", "TAG", "TAG", "ruby", "code", "to", "use", "these", "values", "ruby", "in", "plugin", "s", "instance", "methods", "name", "repeatedly", "userinfo", "NUMBER", "age", "NUMBER", "noodles", "Array", "size", "NUMBER", "not", "noodle", "by", "param_name", "noodles", "NUMBER", "NUMBER", "name", "tsukemen", "noodles", "NUMBER", "NUMBER", "cost", "NUMBER", "noodles", "NUMBER", "cost", "NUMBER", "noodles", "NUMBER", "NUMBER", "shops", "Array", "size", "NUMBER", "noodles", "NUMBER", "NUMBER", "shops", "NUMBER", "first", "NUMBER", "ars", "NUMBER", "NOTES", "Max", "nest", "depth", "be", "not", "limited", "Both", "of", "v", "NUMBER", "and", "traditional", "configuration", "syntax", "may", "be", "support", "This", "patch", "do", "NOT", "touch", "internals", "of", "Parser", "Element", "or", "types", "NUMBER", "Add", "some", "utility", "methods", "of", "Fluent", "Config", "Section", "and", "its", "specs", "Fixed", "and", "push", "NUMBER", "e", "NUMBER", "cef", "NUMBER", "d", "NUMBER", "ed", "NUMBER", "c", "NUMBER", "a", "NUMBER", "cdbc", "NUMBER", "e", "NUMBER", "ada", "NUMBER", "ac", "NUMBER", "broken", "syntax", "and", "check", "test", "pass", "on", "NUMBER", "NUMBER", "config_argument", "be", "required", "to", "specify", "default", "values", "and", "or", "required", "optional", "rather", "than", "to", "parse", "values", "NUMBER", "Just", "push", "code", "that", "shrink", "dup", "code", "and", "add", "test", "for", "NUMBER", "or", "more", "default", "value", "setting", "NUMBER", "Oh", "what", "s", "happen", "NUMBER", "TravisCI", "I", "cannot", "understand", "why", "test", "fail", "on", "TravisCI", "NUMBER", "Ruby", "NUMBER", "on", "my", "laptop", "ends", "with", "success", "NUMBER", "I", "see", "NUMBER", "Thanks", "Related", "issue", "be", "close", "NUMBER", "So", "this", "pull", "request", "be", "also", "close", "NUMBER", "Under", "current", "version", "of", "fluentd", "plugins", "implement", "sub", "sections", "in", "configurations", "on", "their", "own", "NUMBER", "It", "requires", "calls", "of", "Config", "NUMBER", "bool_value", "or", "others", "without", "config_param", "or", "other", "utilities", "methods", "for", "configuration", "parameters", "NUMBER", "This", "be", "proposal", "of", "API", "to", "manage", "sub", "sections", "of", "plugin", "configurations", "apacheconf", "plugin", "conf", "TAG", "type", "NUMBER", "TAG", "required", "true", "name", "DEFAULT", "power", "NUMBER", "TAG", "TAG", "name", "A", "power", "NUMBER", "TAG", "TAG", "name", "B", "TAG", "name", "X", "TAG", "TAG", "TAG", "ruby", "plugin", "impl", "config_section", "default", "required", "true", "multi", "false", "do", "config_param", "required", "bool", "default", "false", "config_param", "name", "string", "config_param", "power", "integer", "end", "config_section", "child", "param_name", "children", "required", "false", "multi", "true", "do", "config_param", "name", "string", "config_param", "power", "integer", "default", "nil", "config_section", "item", "do", "config_param", "name", "end", "end", "def", "configure", "conf", "super", "default", "Config", "Element", "children", "Config", "Element", "NUMBER", "children", "NUMBER", "first", "NUMBER", "name", "String", "children", "NUMBER", "first", "NUMBER", "item", "Config", "Element", "NUMBER", "default", "children", "NUMBER", "first", "merge", "element", "end", "My", "options", "for", "this", "implementations", "be", "only", "for", "v", "NUMBER", "config", "or", "for", "both", "of", "traditional", "and", "v", "NUMBER", "needs", "any", "restrictions", "for", "nested", "level", "or", "unlimited", "How", "do", "you", "consider", "about", "this", "idea", "repeatedly", "frsyuki", "sonots", "I", "ve", "just", "considered", "that", "children", "NUMBER", "first", "should", "be", "a", "instance", "of", "Config", "Element", "or", "Hash", "w", "symbol", "keys", "or", "Object", "instance", "w", "specified", "methods", "by", "config_param", "Now", "I", "m", "trying", "to", "add", "Fluent", "Config", "Section", "class", "for", "members", "of", "children", "which", "returns", "configured", "parameters", "as", "children", "NUMBER", "first", "NUMBER", "attr_name", "NUMBER", "Fluent", "Config", "Element", "instances", "exists", "in", "the", "object", "tree", "of", "conf", "but", "all", "instance", "variables", "from", "config_param", "be", "not", "Element", "instances", "aren", "t", "they", "Furthermore", "parameter", "values", "by", "config_param", "should", "be", "ruby", "objects", "in", "instance", "variables", "NUMBER", "Root", "object", "be", "now", "plugin", "instance", "NUMBER", "Containers", "for", "sub", "sections", "should", "be", "a", "object", "not", "Hash", "like", "container", "NUMBER", "NUMBER", "merge", "NUMBER", "new", "config", "use", "new", "config", "and", "fluent", "config", "new_parser", "be", "bad", "name", "NUMBER", "What", "be", "the", "name", "of", "next", "version", "of", "new", "What", "time", "we", "call", "it", "as", "non", "new", "I", "propose", "v", "NUMBER", "config", "or", "strict", "config", "NUMBER", "Good", "work", "clap", "Could", "you", "post", "the", "question", "on", "ML", "first", "If", "the", "problem", "be", "the", "bug", "of", "Fluentd", "please", "reopen", "it", "NUMBER", "np", "NUMBER", "If", "you", "have", "any", "question", "please", "post", "it", "on", "ML", "Please", "post", "to", "ML", "first", "NUMBER", "LINK", "If", "this", "be", "a", "bug", "of", "Fluentd", "then", "reopen", "it", "NUMBER", "Could", "you", "create", "a", "patch", "We", "don", "t", "have", "Solaris", "environment", "NUMBER", "After", "merge", "LINK", "we", "will", "release", "new", "Fluentd", "version", "NUMBER", "After", "that", "we", "will", "also", "release", "new", "td", "agent", "NUMBER", "v", "NUMBER", "has", "new", "configuration", "format", "NUMBER", "It", "be", "useful", "and", "it", "resolve", "several", "problem", "on", "old", "configuration", "format", "NUMBER", "I", "have", "a", "plan", "to", "port", "this", "format", "but", "we", "need", "to", "discuss", "its", "implementation", "NUMBER", "The", "main", "problem", "be", "parameter", "typing", "NUMBER", "There", "be", "two", "approach", "Parser", "returns", "typed", "value", "and", "next", "layer", "e", "NUMBER", "g", "NUMBER", "config_param", "receives", "such", "value", "and", "check", "the", "type", "NUMBER", "Parser", "returns", "string", "value", "and", "next", "layer", "e", "NUMBER", "g", "NUMBER", "config_param", "receives", "string", "value", "and", "convert", "value", "to", "any", "type", "NUMBER", "I", "don", "t", "know", "the", "details", "of", "v", "NUMBER", "configuration", "implementatin", "NUMBER", "frsyuki", "tagomoris", "sonots", "Do", "you", "have", "any", "suggestion", "You", "be", "the", "v", "NUMBER", "branch", "committers", "NUMBER", "Okay", "latter", "case", "be", "better", "NUMBER", "I", "will", "implement", "it", "NUMBER", "And", "next", "disscussion", "be", "arry", "hash", "literal", "NUMBER", "From", "above", "spec", "a", "b", "array", "be", "converted", "to", "a", "b", "NUMBER", "This", "seems", "not", "popular", "so", "I", "think", "JSON", "s", "array", "object", "or", "Ruby", "s", "array", "Hash", "be", "better", "NUMBER", "What", "do", "you", "think", "Since", "Fluentd", "v", "NUMBER", "input", "plugins", "be", "stopped", "before", "output", "plugins", "so", "the", "stability", "be", "better", "than", "before", "NUMBER", "I", "want", "to", "avoid", "add", "SIGNAL", "because", "handle", "SIGNAL", "be", "hard", "on", "some", "environments", "and", "SIGNAL", "slot", "be", "limited", "NUMBER", "Better", "approach", "seems", "to", "provide", "option", "or", "another", "agent", "plugin", "NUMBER", "Hmm", "NUMBER", "without", "source", "be", "good", "for", "most", "cases", "If", "so", "I", "will", "implement", "it", "NUMBER", "I", "m", "not", "sure", "how", "much", "time", "do", "we", "need", "to", "implement", "unix", "domain", "socket", "approach", "NUMBER", "tagomoris", "sonots", "Can", "you", "estimate", "the", "implementation", "cost", "I", "send", "without", "source", "option", "PR", "NUMBER", "See", "LINK", "Good", "catch", "Last", "step", "of", "NUMBER", "merge", "in_tail_ex", "into", "in_tail", "NUMBER", "The", "different", "from", "original", "in_tail_ex", "be", "below", "refresh_interval", "be", "NUMBER", "by", "default", "NUMBER", "The", "user", "should", "set", "refresh_interval", "XXs", "for", "watching", "new", "file", "expand_date", "be", "always", "true", "read_from_head", "be", "false", "by", "default", "NUMBER", "So", "you", "should", "set", "true", "when", "emulates", "original", "in_tail_ex", "NUMBER", "This", "pull", "request", "change", "in_tail", "internal", "so", "I", "need", "some", "testers", "NUMBER", "UPDATED", "Mar", "NUMBER", "NUMBER", "refresh_interval", "change", "from", "nil", "to", "NUMBER", "seconds", "NUMBER", "frsyuki", "I", "add", "cleaup", "code", "for", "PositionFile", "NUMBER", "Could", "you", "check", "it", "again", "I", "will", "merge", "this", "pull", "request", "in", "half", "an", "hour", "later", "NUMBER", "Thank", "you", "for", "trying", "Windows", "branch", "okahashi", "NUMBER", "MasayukiKiyota", "Could", "you", "check", "this", "problem", "frsyuki", "Could", "you", "check", "this", "pull", "request", "NUMBER", "You", "be", "the", "first", "author", "of", "this", "plugin", "NUMBER", "It", "seems", "no", "problem", "so", "just", "merge", "NUMBER", "frsyuki", "If", "you", "have", "any", "comment", "please", "comment", "it", "here", "NUMBER", "The", "second", "issue", "be", "that", "shutdown", "of", "plugins", "be", "blocked", "because", "in_tail", "plugin", "contiues", "to", "reading", "logs", "NUMBER", "From", "this", "patch", "Fluentd", "doesn", "t", "wait", "the", "apache", "nginx", "shutdown", "log", "flush", "sabottenda", "Yeah", "NUMBER", "Chaging", "in_tail", "behavior", "needs", "more", "discussion", "I", "think", "NUMBER", "The", "first", "case", "I", "can", "merge", "it", "soon", "NUMBER", "sabottenda", "Could", "you", "remove", "in_tail", "patch", "from", "this", "pull", "request", "I", "have", "a", "plan", "to", "release", "new", "fluentd", "NUMBER", "After", "remove", "in_tail", "patch", "I", "can", "merge", "this", "pull", "request", "NUMBER", "Thank", "you", "I", "don", "t", "have", "a", "Solaris", "machine", "and", "knowledge", "NUMBER", "If", "you", "can", "fix", "the", "problem", "of", "Cool", "NUMBER", "io", "gems", "please", "send", "a", "pull", "request", "to", "Cool", "NUMBER", "io", "NUMBER", "So", "upgrading", "gcc", "resolve", "the", "problem", "Okay", "NUMBER", "gcc", "NUMBER", "x", "be", "too", "old", "NUMBER", "I", "decided", "to", "stop", "such", "old", "version", "support", "NUMBER", "First", "step", "of", "LINK", "merge", "in_tail_multiline", "feature", "NUMBER", "The", "different", "from", "original", "in_tail_multiline", "be", "below", "format", "multiline", "be", "required", "NUMBER", "Use", "format", "NUMBER", "multiline", "regexp", "instead", "of", "format", "multiline", "regexp", "NUMBER", "No", "automatic", "flush", "NUMBER", "At", "shutdown", "phase", "remaining", "lines", "be", "flushed", "NUMBER", "The", "configuration", "example", "of", "LINK", "plugin", "tail", "multiline", "case", "where", "first", "line", "do", "not", "have", "any", "name", "capture", "case", "aconf", "TAG", "type", "tail", "path", "path", "to", "tail", "file", "tag", "tail", "NUMBER", "multiline", "format", "multiline", "format_firstline", "format", "NUMBER", "time", "TAG", "d", "NUMBER", "d", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "NUMBER", "message", "TAG", "NUMBER", "TAG", "Need", "feedback", "format_firstline", "name", "NUMBER", "Is", "there", "more", "better", "parameter", "name", "none", "support", "be", "needed", "tomohisaota", "Could", "you", "check", "this", "change", "In", "short", "line_buffer", "should", "be", "defined", "per", "parser", "not", "per", "plugin", "NUMBER", "And", "it", "seems", "that", "new", "code", "has", "same", "problem", "NUMBER", "Ah", "good", "catch", "NUMBER", "I", "will", "fix", "this", "problem", "NUMBER", "Thanks", "I", "fix", "the", "problem", "NUMBER", "And", "I", "change", "receive_lines", "callback", "signature", "to", "take", "TailWatcher", "instance", "for", "support", "multiline", "and", "ex", "plugin", "NUMBER", "It", "breaks", "the", "compatibility", "so", "I", "will", "change", "class", "name", "like", "below", "ruby", "class", "Fluent", "class", "NewTailInput", "TAG", "Time", "NUMBER", "rptime", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "b", "d", "H", "M", "S", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Time", "NUMBER", "rptime", "NUMBER", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "b", "d", "H", "M", "S", "ArgumentError", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "Cisco", "s", "devise", "always", "add", "this", "number", "to", "syslog", "log", "Thanks", "Masahiro", "On", "Tue", "Mar", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "f", "NUMBER", "notifications", "github", "NUMBER", "com", "write", "Hi", "i", "try", "to", "use", "fluentd", "with", "the", "in_syslog", "plugin", "for", "logs", "from", "network", "devices", "cisco", "i", "have", "install", "in", "fedora", "NUMBER", "with", "gem", "and", "this", "be", "the", "config", "bash", "NUMBER", "fluentd", "vv", "conf", "etc", "fluent", "fluent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "supervise", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "read_config", "reading", "config", "file", "path", "etc", "fluent", "fluent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "buffer", "plugin", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "buffer", "plugin", "memory", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "debug_agent", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "exec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "gc_stat", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "http", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "monitor_agent", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "object_space", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "status", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "tcp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "unix", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "syslog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "tail", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "exec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "exec_filter", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "null", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "roundrobin", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "stdout", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "tcp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "unix", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "test", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "gem", "fluent", "plugin", "elasticsearch", "version", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "gem", "fluentd", "version", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "configure", "use", "configuration", "file", "TAG", "TAG", "type", "syslog", "port", "NUMBER", "bind", "NUMBER", "tag", "syslog", "log_level", "debug", "TAG", "TAG", "type", "elasticsearch", "host", "NUMBER", "port", "NUMBER", "logstash_format", "true", "flush_interval", "NUMBER", "s", "TAG", "TAG", "type", "elasticsearch", "host", "NUMBER", "port", "NUMBER", "logstash_format", "true", "flush_interval", "NUMBER", "s", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "source", "type", "syslog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "match", "pattern", "syslog", "NUMBER", "type", "elasticsearch", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "elasticsearch", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "match", "pattern", "fluent", "NUMBER", "type", "elasticsearch", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "listen", "listening", "syslog", "socket", "on", "NUMBER", "NUMBER", "with", "udp", "now", "if", "i", "send", "syslog", "message", "from", "devices", "or", "via", "logger", "command", "i", "get", "these", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "rescue", "in", "receive_data", "TAG", "NUMBER", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "CET", "LINK", "NUMBER", "CHANGED", "Interface", "GigabitEthernet", "NUMBER", "NUMBER", "NUMBER", "change", "state", "to", "administratively", "down", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "share", "ruby", "time", "NUMBER", "rb", "NUMBER", "in", "strptime", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "block", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "fluentd", "main", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "get", "start", "to", "shutdown", "main", "process", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_supervisor_signal_handlers", "fluentd", "supervisor", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "fluentd", "main", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "rescue", "in", "receive_data", "TAG", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "ssss", "x", "NUMBER", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "share", "ruby", "time", "NUMBER", "rb", "NUMBER", "in", "strptime", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "block", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "fluentd", "main", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "get", "start", "to", "shutdown", "main", "process", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_supervisor_signal_handlers", "fluentd", "supervisor", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "fluentd", "main", "process", "get", "SIGINT", "ideas", "regards", "f", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "NUMBER", "Hmm", "NUMBER", "Merge", "seems", "no", "problem", "but", "potentially", "this", "pull", "request", "be", "not", "needed", "NUMBER", "By", "this", "pull", "request", "the", "problem", "be", "moved", "to", "Ruby", "s", "sort", "order", "NUMBER", "Separating", "configuration", "which", "depends", "on", "inclusion", "order", "of", "be", "bad", "approach", "generally", "NUMBER", "I", "think", "you", "should", "re", "consider", "your", "separating", "granularity", "of", "configurations", "NUMBER", "No", "no", "no", "NUMBER", "Tool", "be", "not", "relate", "NUMBER", "I", "mean", "if", "your", "configuration", "has", "different", "behaviour", "between", "aconf", "include", "a", "NUMBER", "conf", "include", "b", "NUMBER", "conf", "and", "aconf", "include", "b", "NUMBER", "conf", "include", "a", "NUMBER", "conf", "this", "be", "bad", "NUMBER", "In", "this", "case", "you", "have", "a", "same", "or", "overriding", "TAG", "directive", "across", "configurations", "so", "you", "should", "reconsider", "tag", "routing", "NUMBER", "I", "m", "not", "sure", "why", "base", "web", "and", "xxx", "modules", "have", "same", "match", "NUMBER", "Awesome", "work", "But", "I", "be", "of", "two", "minds", "about", "merge", "this", "pull", "request", "NUMBER", "NUMBER", "Fluentd", "support", "NUMBER", "Mixing", "the", "code", "which", "only", "works", "on", "NUMBER", "be", "very", "confusing", "NUMBER", "NUMBER", "This", "code", "be", "hacky", "e", "NUMBER", "g", "NUMBER", "Thread", "NUMBER", "current", "for", "separating", "specs", "need", "use", "in", "target", "code", "NUMBER", "NUMBER", "We", "be", "considering", "v", "NUMBER", "with", "v", "NUMBER", "code", "NUMBER", "After", "merge", "v", "NUMBER", "this", "code", "could", "be", "support", "naturally", "NUMBER", "One", "possible", "idea", "NUMBER", "Releasing", "this", "code", "as", "an", "another", "gem", "fluentd", "spec", "Thx", "Could", "you", "check", "this", "plugin", "LINK", "plugin", "keep", "forward", "Ah", "I", "forgot", "to", "update", "it", "NUMBER", "Thank", "you", "NUMBER", "You", "be", "right", "NUMBER", "Thx", "TCPSocket", "NUMBER", "open", "listen_address", "port", "sock", "be", "for", "stopping", "event", "loop", "NUMBER", "If", "a", "connection", "causes", "a", "timeout", "do", "it", "still", "affect", "event", "loop", "Ruby", "bug", "relate", "with", "this", "issue", "LINK", "lang", "NUMBER", "org", "issue", "NUMBER", "Adding", "log_level", "option", "to", "plugin", "configuration", "NUMBER", "It", "enable", "setting", "log_level", "separeted", "from", "global", "log", "level", "NUMBER", "conf", "TAG", "type", "tail", "NUMBER", "log_level", "error", "can", "prevent", "pattern", "not", "match", "TAG", "This", "doesn", "t", "break", "existence", "plugins", "because", "a", "plugin", "can", "still", "use", "log", "and", "Input", "Output", "use", "log", "object", "in", "log", "method", "by", "default", "NUMBER", "If", "plugin", "auther", "try", "to", "support", "log_level", "then", "needed", "action", "be", "only", "use", "log", "instead", "of", "log", "and", "upgrading", "plugin", "s", "version", "with", "latest", "fluentd", "dependency", "NUMBER", "Need", "some", "test", "with", "actual", "configuration", "but", "test", "now", "be", "pass", "NUMBER", "frsyuki", "I", "know", "but", "log", "rotation", "be", "an", "another", "issue", "NUMBER", "Multiprocess", "safe", "logger", "be", "available", "since", "NUMBER", "so", "Fluentd", "can", "t", "depend", "on", "such", "logger", "or", "should", "use", "LINK", "_safe_logger", "NUMBER", "I", "write", "an", "article", "about", "log_level", "parameter", "for", "plugin", "developers", "NUMBER", "LINK", "log", "level", "parameter", "Parsers", "in", "Fluent", "TextParser", "be", "utility", "library", "NUMBER", "Current", "implementaion", "depends", "on", "log", "and", "it", "causes", "hard", "to", "use", "by", "other", "script", "NUMBER", "I", "think", "log", "should", "be", "remove", "from", "each", "Parsers", "NUMBER", "Pros", "code", "becomes", "simply", "other", "script", "can", "use", "without", "explicit", "log", "instantiation", "NUMBER", "Cons", "breaking", "compatibility", "with", "v", "option", "because", "logging", "position", "be", "change", "First", "step", "of", "LINK", "I", "remove", "obsolete", "features", "and", "applying", "fluentd", "core", "format", "to", "code", "NUMBER", "Additionally", "I", "created", "spec", "directory", "for", "newest", "plugins", "NUMBER", "We", "have", "a", "plan", "to", "replace", "test", "framework", "with", "RSpec", "so", "I", "think", "this", "be", "not", "a", "problem", "NUMBER", "sonots", "Could", "you", "check", "the", "code", "Temporary", "close", "NUMBER", "After", "introduce", "actual", "Filter", "mechanizm", "I", "re", "implement", "grep", "filter", "NUMBER", "This", "change", "breaks", "the", "record", "format", "user", "expects", "so", "add", "options", "be", "better", "NUMBER", "add_http_header", "true", "false", "or", "include_headers", "foo", "bar", "baz", "NUMBER", "just", "merge", "NUMBER", "Thx", "Fluentd", "developers", "discussed", "the", "release", "plan", "about", "next", "Fluentd", "NUMBER", "We", "be", "now", "developing", "v", "NUMBER", "but", "we", "notice", "some", "features", "can", "be", "merge", "into", "v", "NUMBER", "without", "breaking", "compatibility", "NUMBER", "On", "the", "other", "hand", "current", "Fluentd", "version", "be", "very", "confusing", "NUMBER", "We", "call", "v", "NUMBER", "x", "v", "NUMBER", "stable", "version", "and", "v", "NUMBER", "x", "v", "NUMBER", "next", "major", "version", "but", "increase", "version", "number", "be", "minor", "version", "not", "major", "version", "NUMBER", "For", "clear", "version", "and", "Fluentd", "core", "improvment", "I", "want", "to", "release", "v", "NUMBER", "which", "extend", "v", "NUMBER", "x", "with", "some", "v", "NUMBER", "features", "NUMBER", "Here", "be", "the", "tasks", "Must", "Support", "new", "configuratin", "format", "v", "NUMBER", "format", "LINK", "system", "configuration", "LINK", "Support", "Gemfile", "based", "plugin", "managemant", "add", "gemfile", "option", "LINK", "Migration", "to", "non", "global", "APIs", "e", "NUMBER", "g", "NUMBER", "log", "to", "log", "Engin", "NUMBER", "emit", "to", "emit", "NUMBER", "Keep", "global", "APIs", "for", "exist", "plugins", "Migrating", "log", "LINK", "Support", "filter", "and", "label", "feature", "for", "flexible", "event", "handle", "NUMBER", "Filter", "Error", "stream", "Nice", "to", "have", "Introducing", "Actor", "Replace", "server", "core", "with", "ServerEngine", "etc", "NUMBER", "If", "you", "have", "any", "question", "please", "let", "me", "know", "My", "plan", "be", "release", "v", "NUMBER", "after", "finished", "to", "implement", "Filter", "mechanizm", "NUMBER", "ServerEngine", "and", "other", "nice", "features", "be", "introduce", "in", "v", "NUMBER", "x", "minor", "version", "NUMBER", "Road", "map", "be", "here", "LINK", "Roadmap", "From", "our", "Fluentd", "td", "agent", "experience", "we", "decided", "to", "bundle", "several", "filter", "like", "plugins", "NUMBER", "Having", "checked", "some", "use", "cases", "following", "plugins", "seem", "useful", "NUMBER", "Modify", "record", "e", "NUMBER", "g", "NUMBER", "record", "modifier", "record", "reformer", "Select", "record", "e", "NUMBER", "g", "NUMBER", "grep", "Handle", "tag", "e", "NUMBER", "g", "NUMBER", "rewrite", "tag", "filter", "grep", "plugin", "be", "very", "simple", "so", "merge", "into", "fluentd", "core", "be", "easy", "NUMBER", "record", "modifier", "and", "record", "reformer", "be", "bit", "different", "so", "merge", "features", "be", "needed", "first", "NUMBER", "rewrite", "tag", "filter", "be", "already", "bundled", "in", "td", "agent", "NUMBER", "I", "don", "t", "want", "to", "bundle", "the", "plugin", "which", "has", "many", "gem", "dependencies", "NUMBER", "So", "bundle", "grep", "and", "modify", "record", "type", "plugin", "be", "good", "as", "the", "first", "step", "in", "v", "NUMBER", "release", "NUMBER", "What", "do", "you", "think", "tagomoris", "frsyuki", "kzk", "kiyoto", "hotchpotch", "If", "you", "have", "any", "question", "please", "let", "me", "know", "I", "will", "try", "to", "port", "fluent", "plugin", "grep", "into", "core", "first", "NUMBER", "I", "think", "less", "use", "cases", "than", "SetXXXKeyMixin", "NUMBER", "Fluent", "TextParser", "handles", "non", "typed", "format", "like", "CSV", "TSV", "and", "etc", "NUMBER", "This", "be", "why", "I", "add", "TypeConverter", "to", "Fluent", "TextParser", "NUMBER", "On", "the", "other", "hand", "almost", "existence", "input", "plugins", "know", "the", "record", "value", "types", "e", "NUMBER", "g", "NUMBER", "sql", "systemd", "mongo_tail", "NUMBER", "fluent", "mixin", "type", "converter", "seems", "good", "approach", "and", "I", "close", "this", "issue", "now", "NUMBER", "I", "will", "check", "the", "code", "later", "NUMBER", "One", "thing", "Maybe", "start_reading_head", "seems", "not", "good", "for", "configuration", "name", "NUMBER", "kiyoto", "Do", "you", "have", "a", "good", "name", "for", "this", "behaviour", "read_from_beginning", "or", "read_from_top", "sonots", "You", "be", "right", "NUMBER", "pos_file", "be", "most", "important", "NUMBER", "I", "think", "in_tail", "should", "print", "the", "warning", "when", "read_from_head", "be", "true", "without", "pos_file", "parameter", "NUMBER", "Deleted", "NUMBER", "test", "be", "not", "important", "I", "m", "not", "sure", "why", "these", "test", "be", "fail", "on", "travis", "ci", "but", "travis", "ci", "uses", "NUMBER", "bit", "Linux", "to", "run", "test", "NUMBER", "The", "fail", "reason", "be", "travis", "ci", "problem", "or", "Linux", "problem", "Hm", "NUMBER", "Could", "you", "check", "same", "test", "on", "Ruby", "NUMBER", "and", "Linux", "If", "this", "error", "occur", "in", "Linux", "we", "can", "t", "release", "such", "feature", "because", "almost", "Fluentd", "users", "use", "Linux", "NUMBER", "For", "example", "LINK", "this", "pull", "request", "fail", "on", "Linux", "at", "first", "NUMBER", "We", "detected", "that", "the", "cause", "be", "the", "different", "thread", "implementation", "between", "Linux", "and", "Mac", "NUMBER", "Maybe", "your", "case", "be", "similar", "to", "this", "NUMBER", "Fluentd", "itself", "has", "user", "and", "group", "option", "to", "specify", "user", "and", "group", "NUMBER", "LINK", "L", "NUMBER", "How", "about", "set", "etc", "default", "td", "agent", "with", "following", "content", "sh", "DAEMON_ARGS", "group", "adm", "This", "DAEMON_ARGS", "be", "use", "in", "td", "agent", "NUMBER", "init", "NUMBER", "I", "may", "mis", "understand", "the", "your", "opinion", "NUMBER", "We", "d", "prefer", "not", "to", "run", "fluentd", "as", "root", "What", "do", "this", "sentence", "mean", "Could", "you", "tell", "me", "the", "detail", "of", "your", "requirement", "I", "checked", "the", "td", "agent", "status", "on", "ubuntu", "sh", "check", "user", "and", "group", "of", "td", "agent", "process", "ps", "eo", "c", "p", "u", "g", "grep", "td", "agent", "ruby", "NUMBER", "td", "agent", "td", "agent", "ruby", "NUMBER", "td", "agent", "td", "agent", "check", "permission", "of", "logs", "ls", "l", "var", "log", "td", "agent", "rw", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Jan", "NUMBER", "NUMBER", "NUMBER", "td", "agent", "NUMBER", "log", "Need", "test", "which", "checks", "writer_current_position", "value", "in", "test", "output", "NUMBER", "rb", "NUMBER", "I", "will", "merge", "this", "pull", "request", "after", "investigated", "why", "travis", "ci", "fail", "with", "instance_variable_get", "NUMBER", "Does", "this", "really", "solve", "the", "problem", "I", "applied", "your", "patch", "and", "try", "same", "configuration", "but", "still", "fail", "NUMBER", "diff", "diff", "git", "a", "lib", "fluent", "config", "NUMBER", "rb", "b", "lib", "fluent", "config", "NUMBER", "rb", "index", "a", "NUMBER", "e", "NUMBER", "edca", "NUMBER", "NUMBER", "a", "lib", "fluent", "config", "NUMBER", "rb", "b", "lib", "fluent", "config", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "module", "Fluent", "line", "NUMBER", "force_encoding", "UTF", "NUMBER", "i", "NUMBER", "line", "NUMBER", "lstrip", "line", "NUMBER", "gsub", "s", "NUMBER", "if", "s", "NUMBER", "NUMBER", "match", "line", "NUMBER", "NUMBER", "length", "NUMBER", "then", "line", "NUMBER", "gsub", "s", "NUMBER", "end", "if", "line", "NUMBER", "empty", "next", "elsif", "m", "TAG", "NUMBER", "match", "line", "RUBYLIB", "dev", "fluentd", "fluentd", "lib", "fluentd", "c", "tail_test", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "tail_test", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "gem", "fluentd", "version", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "tail", "path", "Users", "repeatedly", "tmp", "fluentd", "foo", "pos_file", "Users", "repeatedly", "tmp", "fluentd", "pos", "format", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "tag", "tail", "NUMBER", "test", "TAG", "TAG", "type", "forward", "TAG", "TAG", "type", "stdout", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "tail", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "config", "error", "file", "tail_test", "NUMBER", "conf", "error", "Unknown", "format", "template", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "process", "finished", "code", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "process", "died", "within", "NUMBER", "second", "NUMBER", "exit", "NUMBER", "This", "issue", "seems", "a", "simply", "question", "NUMBER", "Could", "you", "use", "mailing", "list", "for", "such", "purpose", "LINK", "forum", "fluentd", "This", "be", "know", "issue", "and", "next", "version", "already", "solve", "this", "problem", "NUMBER", "LINK", "issuecomment", "NUMBER", "Hmm", "I", "should", "commit", "directly", "with", "this", "pull", "request", "comment", "on", "commit", "comment", "NUMBER", "Wait", "NUMBER", "Your", "commit", "breaks", "test", "because", "you", "did", "typo", "NUMBER", "At", "least", "please", "wait", "a", "travis", "ci", "response", "NUMBER", "I", "think", "try_flush_interval", "name", "be", "enough", "for", "this", "case", "NUMBER", "This", "option", "be", "very", "rare", "and", "almost", "users", "never", "use", "this", "feature", "NUMBER", "mrb", "Thank", "you", "for", "the", "pull", "request", "NUMBER", "I", "will", "check", "Code", "Climate", "later", "NUMBER", "Ah", "I", "forgot", "to", "merge", "this", "NUMBER", "Thx", "Sorry", "I", "don", "t", "understand", "your", "situation", "correctly", "NUMBER", "i", "transfer", "an", "wrong", "structure", "events", "to", "the", "fluentd", "service", "If", "input", "plugin", "receives", "wrong", "format", "event", "then", "input", "plugin", "rejects", "such", "event", "with", "dumping", "log", "NUMBER", "Could", "you", "show", "me", "the", "example", "can", "multiple", "threads", "let", "the", "new", "events", "output", "and", "retrying", "at", "the", "same", "time", "and", "now", "fluentd", "support", "multiple", "threads", "BufferedOutput", "has", "num_threads", "option", "to", "flush", "the", "buffer", "s", "chunks", "in", "a", "parallel", "fashion", "NUMBER", "LINK", "_forward", "quick", "reply", "Then", "i", "use", "num_threads", "set", "to", "NUMBER", "like", "num_threads", "NUMBER", "but", "it", "didn", "t", "work", "the", "problem", "still", "continue", "NUMBER", "Sorry", "for", "confusing", "NUMBER", "num_threads", "now", "effect", "only", "IO", "bound", "performance", "NUMBER", "So", "yes", "for", "now", "fluentd", "support", "multiple", "threads", "but", "no", "yet", "for", "can", "multiple", "threads", "let", "the", "new", "events", "output", "and", "retrying", "at", "the", "same", "time", "Sorry", "it", "s", "my", "mistake", "NUMBER", "This", "log", "will", "be", "blocked", "to", "output", "to", "mysql", "until", "fluentd", "retry", "s", "stoped", "NUMBER", "If", "you", "may", "be", "possible", "to", "insert", "such", "lacked", "record", "then", "mysql", "doesn", "t", "seem", "fit", "your", "case", "NUMBER", "Maybe", "problem", "be", "here", "LINK", "L", "NUMBER", "I", "will", "check", "why", "round", "robin", "be", "still", "TODO", "NUMBER", "For", "LINK", "I", "don", "t", "know", "why", "above", "test", "fail", "on", "travis", "ci", "NUMBER", "frsyuki", "I", "improve", "TcpHandler", "NUMBER", "Please", "re", "check", "NUMBER", "I", "checked", "in_tail", "and", "this", "code", "uses", "several", "following", "block", "rb", "if", "env_check", "Linux", "Mac", "code", "else", "windows", "code", "end", "This", "seems", "messy", "and", "there", "be", "some", "dead", "code", "NUMBER", "Windows", "and", "Linux", "be", "different", "policy", "implementation", "NUMBER", "So", "separating", "code", "be", "better", "for", "maintenance", "and", "performance", "NUMBER", "If", "you", "fix", "several", "technical", "problem", "please", "re", "consider", "this", "issue", "NUMBER", "Okay", "I", "close", "this", "issue", "temporary", "NUMBER", "From", "v", "NUMBER", "restarting", "worker", "keep", "socket", "resource", "to", "accept", "the", "request", "from", "clients", "NUMBER", "I", "think", "the", "requirement", "depends", "on", "system", "architecture", "NUMBER", "Someone", "wants", "to", "reject", "the", "client", "request", "for", "forwarding", "to", "other", "servers", "NUMBER", "Selecting", "keep", "re", "create", "same", "as", "v", "NUMBER", "be", "better", "NUMBER", "If", "you", "have", "any", "suggestion", "for", "fluentd", "documentation", "please", "use", "LINK", "docs", "repository", "NUMBER", "Another", "approach", "of", "LINK", "sonots", "tagomoris", "Added", "NUMBER", "support", "in", "bool", "conversion", "NUMBER", "If", "there", "be", "no", "comment", "I", "will", "merge", "this", "pull", "request", "tomorrow", "NUMBER", "I", "merge", "this", "pull", "request", "manually", "NUMBER", "Sorry", "current", "our", "td", "agent", "support", "only", "squeeze", "and", "lenny", "yet", "NUMBER", "provide", "the", "debian", "source", "package", "so", "that", "one", "can", "repack", "the", "NUMBER", "deb", "We", "provides", "debian", "source", "package", "NUMBER", "sh", "sudo", "apt", "get", "source", "td", "agent", "Reading", "package", "lists", "NUMBER", "Done", "Building", "dependency", "tree", "Reading", "state", "information", "NUMBER", "Done", "Need", "to", "get", "NUMBER", "MB", "of", "source", "archives", "NUMBER", "Get", "NUMBER", "LINK", "data", "NUMBER", "com", "precise", "precise", "contrib", "td", "agent", "NUMBER", "NUMBER", "dsc", "NUMBER", "B", "Get", "NUMBER", "LINK", "data", "NUMBER", "com", "precise", "precise", "contrib", "td", "agent", "NUMBER", "NUMBER", "tar", "NUMBER", "kB", "Get", "NUMBER", "LINK", "data", "NUMBER", "com", "precise", "precise", "contrib", "td", "agent", "NUMBER", "NUMBER", "diff", "NUMBER", "MB", "Fetched", "NUMBER", "MB", "in", "NUMBER", "s", "NUMBER", "kB", "s", "dpkg", "source", "warning", "extracting", "unsigned", "source", "package", "td", "agent_", "NUMBER", "NUMBER", "dsc", "dpkg", "source", "info", "extracting", "td", "agent", "in", "td", "agent", "NUMBER", "dpkg", "source", "info", "unpacking", "td", "agent_", "NUMBER", "orig", "NUMBER", "tar", "NUMBER", "gz", "dpkg", "source", "info", "unpacking", "td", "agent_", "NUMBER", "NUMBER", "debian", "NUMBER", "tar", "NUMBER", "gz", "dpkg", "source", "info", "applying", "debian", "change", "NUMBER", "NUMBER", "Above", "be", "apt", "get", "source", "result", "on", "Ubuntu", "Precise", "NUMBER", "Can", "t", "you", "get", "source", "package", "on", "Debian", "Wheezy", "This", "be", "an", "enhancement", "for", "RegexpParser", "NUMBER", "Many", "users", "use", "RegexpParser", "for", "own", "log", "format", "in", "in_tail", "plugin", "NUMBER", "Unlike", "Apache", "NUMBER", "Parser", "RegexpParser", "doesn", "t", "cast", "the", "value", "NUMBER", "In", "this", "result", "in_tail", "user", "needs", "type", "casting", "mechanizm", "after", "collects", "events", "NUMBER", "Adding", "type", "cast", "to", "RegexpParser", "helps", "such", "users", "for", "performance", "and", "configuration", "simplicity", "NUMBER", "My", "proposal", "be", "below", "NUMBER", "Specify", "type", "and", "format", "in", "named", "capture", "of", "format", "option", "Configuration", "format", "be", "TAG", "like", "below", "format", "TAG", "TAG", "TAG", "TAG", "TAG", "S", "TAG", "S", "TAG", "TAG", "Supported", "types", "string", "same", "as", "no", "specify", "bool", "true", "and", "yes", "string", "converted", "to", "true", "integer", "float", "time", "specify", "time_format", "via", "NUMBER", "format", "array", "specify", "separator", "via", "NUMBER", "format", "NUMBER", "default", "be", "New", "other", "configuration", "Add", "name_separator", "option", "to", "specify", "TAG", "s", "separator", "NUMBER", "default", "be", "NUMBER", "What", "do", "you", "think", "sonots", "Yeah", "NUMBER", "My", "first", "implementation", "support", "NUMBER", "to", "false", "or", "NUMBER", "to", "true", "but", "remove", "temporary", "because", "NUMBER", "and", "NUMBER", "be", "true", "in", "Ruby", "NUMBER", "This", "be", "a", "discussion", "point", "for", "other", "users", "NUMBER", "sonots", "I", "m", "not", "sure", "the", "details", "of", "Perl", "NUMBER", "NUMBER", "be", "false", "otherwise", "true", "How", "handle", "the", "number", "to", "boolean", "conversion", "be", "better", "NUMBER", "be", "false", "otherwise", "true", "NUMBER", "be", "false", "NUMBER", "be", "true", "otherwise", "false", "etc", "sonots", "frsyuki", "tagomoris", "Do", "you", "have", "any", "concern", "tagomoris", "Do", "you", "think", "add", "types", "like", "paramter", "like", "below", "types", "foo", "integer", "bar", "array", "sonots", "yes", "be", "false", "no", "be", "true", "Close", "this", "issue", "because", "LINK", "be", "merge", "NUMBER", "Relatead", "to", "LINK", "issue", "NUMBER", "Remaining", "discussion", "be", "dump", "message", "NUMBER", "Current", "logs", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "emit", "transaction", "fail", "error_class", "RuntimeError", "error", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "devel", "fluent", "fluentd", "lib", "fluent", "plugin", "out_stdout", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "devel", "fluent", "fluentd", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "devel", "fluent", "fluentd", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "devel", "fluent", "fluentd", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "devel", "fluent", "fluentd", "lib", "fluent", "plugin", "in_object_space", "NUMBER", "rb", "NUMBER", "in", "on_timer", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "devel", "fluent", "fluentd", "lib", "fluent", "plugin", "in_object_space", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "devel", "fluent", "fluentd", "lib", "fluent", "plugin", "in_object_space", "NUMBER", "rb", "NUMBER", "in", "on_timer", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "emit_stream", "Users", "repeatedly", "devel", "fluent", "fluentd", "lib", "fluent", "plugin", "in_object_space", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "plugin", "in_object_space", "NUMBER", "rb", "NUMBER", "rescue", "in", "on_timer", "object", "space", "fail", "to", "emit", "error", "foo", "NUMBER", "bar", "error_class", "RuntimeError", "tag", "foo", "record", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "emit", "transaction", "fail", "error_class", "RuntimeError", "error", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_object_space", "NUMBER", "rb", "NUMBER", "on_timer", "suppressed", "same", "stacktrace", "frsyuki", "tagomoris", "sonots", "please", "check", "I", "get", "some", "reviews", "and", "pass", "in", "LINK", "Please", "someone", "merge", "Related", "to", "LINK", "Improve", "Logger", "like", "syslogd", "suppression", "NUMBER", "frsyuki", "I", "push", "commit", "to", "logger", "suppression", "branch", "NUMBER", "LINK", "This", "commit", "suppresses", "only", "stacktrace", "NUMBER", "Maybe", "option", "name", "change", "or", "error", "message", "suppression", "be", "needed", "NUMBER", "Changing", "option", "name", "and", "implemenetain", "to", "suppress", "repeated", "stacktrace", "interval", "NUMBER", "Please", "re", "check", "NUMBER", "LINK", "suppression", "LINK", "Does", "anyone", "have", "a", "comment", "or", "suggestion", "frsyuki", "How", "do", "you", "suppress", "regular", "message", "non", "stacktrace", "message", "If", "suppress", "these", "message", "we", "should", "provide", "another", "option", "NUMBER", "sonots", "says", "We", "be", "checking", "error", "rate", "use", "error", "message", "so", "we", "don", "t", "need", "error", "message", "suppression", "NUMBER", "thekorn", "Hmm", "NUMBER", "do", "you", "want", "stacktrace", "level", "option", "like", "log", "level", "tagomoris", "Always", "print", "or", "syslog", "like", "NUMBER", "and", "suppressed", "repeated", "xxx", "same", "tracktrace", "with", "interval", "tagomoris", "thekorn", "I", "see", "NUMBER", "I", "understood", "NUMBER", "but", "that", "change", "seems", "difficult", "because", "many", "fluentd", "users", "use", "the", "stacktrace", "for", "debugging", "and", "report", "in", "production", "NUMBER", "I", "think", "we", "have", "following", "candidates", "to", "suppress", "stacktrace", "NUMBER", "tagomoris", "suggested", "suppression", "stacktrace", "lines", "NUMBER", "suppress", "same", "stacktrace", "NUMBER", "suppress", "same", "stacktrace", "other", "stacktrace", "lines", "NUMBER", "syslog", "like", "suppression", "stacktrace", "lines", "NUMBER", "NUMBER", "repeated", "n", "times", "other", "stacktrace", "lines", "NUMBER", "NUMBER", "repeated", "n", "times", "interval", "suppression", "now", "logger", "suppression", "impl", "stacktrace", "lines", "NUMBER", "stacktrace", "lines", "NUMBER", "output", "within", "specified", "interval", "other", "stacktrace", "lines", "NUMBER", "tagomoris", "s", "suppression", "be", "clear", "than", "others", "NUMBER", "interval", "or", "syslog", "suppression", "be", "less", "size", "than", "tagomoris", "s", "suppression", "NUMBER", "We", "should", "decide", "the", "suppression", "style", "NUMBER", "sonots", "You", "have", "a", "same", "problem", "with", "stacktrace", "NUMBER", "Which", "approach", "be", "good", "for", "you", "Hm", "NUMBER", "other", "users", "don", "t", "seem", "to", "have", "strong", "opinion", "NUMBER", "I", "select", "tagomoris", "approach", "first", "NUMBER", "It", "be", "clear", "and", "easy", "to", "implement", "than", "others", "NUMBER", "Future", "plan", "disable", "stacktrace", "dump", "Markus", "more", "suppression", "by", "interval", "or", "other", "condition", "Close", "this", "issue", "NUMBER", "Please", "open", "new", "issue", "for", "new", "option", "or", "others", "NUMBER", "Currently", "Fluentd", "and", "its", "plugin", "dumps", "log", "message", "and", "stacktrace", "NUMBER", "Stacktrace", "be", "useful", "for", "debugging", "but", "it", "sometimes", "bloats", "log", "file", "size", "NUMBER", "For", "example", "when", "user", "hits", "queue", "size", "exceeds", "limit", "error", "Fluentd", "generates", "tooooo", "large", "error", "message", "with", "same", "stacktrace", "NUMBER", "We", "know", "why", "BufferQueueLimitError", "occur", "so", "we", "don", "t", "need", "these", "stacktrace", "NUMBER", "We", "should", "disable", "these", "stacktrace", "to", "reduce", "log", "size", "and", "clear", "logs", "NUMBER", "tagomoris", "sonots", "frsyuki", "One", "idea", "be", "input", "plugin", "should", "not", "dump", "a", "stacktrace", "for", "emit", "exception", "NUMBER", "emit", "mainly", "raises", "buffer", "relate", "exception", "so", "we", "can", "ignore", "these", "stacktraces", "NUMBER", "At", "first", "applying", "change", "to", "bundled", "plugin", "seems", "reasonable", "NUMBER", "What", "do", "you", "think", "I", "push", "above", "change", "to", "fix", "stacktrace", "explosion", "branch", "NUMBER", "This", "be", "not", "potential", "fix", "but", "fix", "log", "size", "bloating", "in", "several", "environments", "NUMBER", "It", "should", "be", "possible", "for", "logger", "to", "suppress", "the", "repeated", "message", "NUMBER", "Yeah", "NUMBER", "I", "opened", "new", "issue", "LINK", "Related", "pull", "request", "be", "merge", "NUMBER", "Seems", "good", "NUMBER", "Waiting", "travis", "ci", "NUMBER", "Hi", "Could", "you", "paste", "your", "error", "log", "UijunLee", "Thank", "you", "What", "be", "the", "encoding", "of", "slow", "query", "log", "UTF", "NUMBER", "or", "other", "JSON", "needs", "UTF", "NUMBER", "string", "but", "slow", "query", "log", "seems", "not", "UTF", "NUMBER", "Hmm", "NUMBER", "that", "s", "strange", "NUMBER", "Okay", "I", "try", "to", "reproduce", "the", "problem", "on", "my", "environment", "NUMBER", "Could", "you", "upload", "slow", "query", "log", "file", "only", "problem", "lines", "on", "somewhere", "Via", "this", "github", "form", "I", "can", "t", "get", "actual", "log", "NUMBER", "Ah", "okay", "NUMBER", "It", "s", "a", "problem", "of", "Ruby", "s", "JSON", "library", "NUMBER", "Fluentd", "mainly", "uses", "Yajl", "library", "NUMBER", "It", "can", "dump", "above", "string", "into", "JSON", "but", "standard", "JSON", "which", "out", "http", "plugin", "uses", "seems", "not", "NUMBER", "Hmm", "NUMBER", "UijunLee", "Because", "fluentd", "doesn", "t", "know", "application", "requirement", "NUMBER", "AFAIK", "almost", "log", "collectors", "treat", "the", "logs", "as", "a", "ASCII", "binary", "by", "default", "NUMBER", "I", "heard", "a", "company", "applies", "encoding", "filter", "to", "collected", "logs", "NUMBER", "I", "will", "send", "pull", "request", "to", "out", "http", "plugin", "later", "NUMBER", "be", "it", "OK", "if", "you", "want", "that", "log", "file", "I", "can", "send", "you", "this", "log", "by", "email", "or", "something", "NUMBER", "Sorry", "it", "be", "reproduced", "on", "my", "environment", "NUMBER", "So", "uploading", "logs", "be", "not", "needed", "NUMBER", "Thank", "you", "I", "sent", "pull", "request", "to", "out", "http", "and", "add", "char_encoding", "parameter", "to", "fluent", "plugin", "record", "modifier", "NUMBER", "LINK", "plugin", "record", "modifier", "char_encoding", "ento", "Thank", "you", "Close", "Thank", "you", "Same", "as", "LINK", "We", "plan", "to", "release", "new", "version", "in", "this", "month", "NUMBER", "Maybe", "earlier", "next", "week", "NUMBER", "I", "will", "release", "Fluentd", "NUMBER", "today", "or", "tomorrow", "NUMBER", "I", "close", "this", "issue", "NUMBER", "Only", "ruby", "block", "seems", "enough", "for", "me", "NUMBER", "ruby", "keyword", "be", "needed", "This", "be", "a", "regression", "of", "NUMBER", "and", "already", "fix", "by", "LINK", "Will", "be", "fix", "at", "next", "release", "NUMBER", "Latest", "td", "agent", "include", "above", "commit", "NUMBER", "I", "can", "t", "have", "the", "gist", "of", "this", "issue", "NUMBER", "What", "do", "directory", "mean", "Created", "by", "out_file", "Sorry", "for", "late", "reply", "NUMBER", "In", "our", "enviroment", "we", "can", "t", "reproduce", "this", "problem", "NUMBER", "Need", "more", "information", "to", "resolve", "NUMBER", "aknapp", "what", "be", "the", "status", "of", "this", "issue", "Does", "sabottenda", "s", "comment", "resolve", "your", "problem", "sabottenda", "has", "already", "figured", "out", "this", "issue", "NUMBER", "Closed", "NUMBER", "I", "hope", "out_forward", "support", "bwlimit", "option", "NUMBER", "But", "It", "has", "very", "big", "impact", "for", "applying", "bwlimit", "patch", "NUMBER", "so", "I", "split", "it", "at", "this", "time", "NUMBER", "I", "agree", "bandwidth", "limitation", "be", "useful", "but", "add", "this", "feature", "to", "out_forward", "be", "terrible", "because", "out_forward", "plugin", "be", "fluentd", "core", "NUMBER", "We", "need", "more", "test", "and", "brush", "up", "to", "merge", "this", "feature", "NUMBER", "I", "close", "this", "issue", "temporary", "NUMBER", "After", "test", "on", "your", "environment", "and", "checked", "the", "quality", "please", "reopen", "this", "issue", "Does", "someone", "have", "a", "strong", "contrary", "opinion", "for", "embed", "I", "think", "include", "be", "good", "for", "keep", "consistency", "NUMBER", "include", "in", "TAG", "or", "TAG", "breaks", "existence", "plugin", "so", "we", "can", "t", "introduce", "include", "NUMBER", "My", "proposal", "Introducing", "new", "TAG", "directive", "NUMBER", "We", "can", "use", "this", "directive", "at", "any", "place", "but", "include", "path", "be", "allow", "instead", "of", "TAG", "when", "the", "directive", "be", "under", "the", "root", "it", "means", "out", "side", "of", "TAG", "or", "TAG", "NUMBER", "What", "do", "you", "think", "kentaro", "kenjiskywalker", "tagomoris", "My", "implementation", "be", "here", "LINK", "new", "include", "directive", "Could", "you", "check", "this", "kenjiskywalker", "kentaro", "Do", "you", "have", "any", "comment", "If", "nothing", "I", "will", "merge", "at", "NUMBER", "minutes", "later", "NUMBER", "kentaro", "Sorry", "NUMBER", "We", "need", "to", "release", "new", "version", "so", "I", "use", "my", "pull", "request", "instead", "of", "yours", "NUMBER", "hmm", "NUMBER", "sabottenda", "Could", "you", "check", "this", "problem", "In", "english", "NUMBER", "I", "tried", "to", "process", "var", "log", "message", "use", "in_tail", "on", "CentOS", "but", "current", "format", "syslog", "doesn", "t", "work", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "forward", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "Pull", "request", "may", "resolve", "this", "problem", "NUMBER", "P", "NUMBER", "S", "NUMBER", "in_tail", "document", "on", "fluentd", "NUMBER", "org", "describes", "wrong", "code", "NUMBER", "bokutin", "Thank", "you", "for", "the", "pull", "request", "NUMBER", "I", "will", "check", "it", "later", "NUMBER", "P", "NUMBER", "S", "NUMBER", "If", "you", "can", "please", "open", "the", "pull", "request", "in", "english", "NUMBER", "Because", "fluentd", "maintainers", "be", "not", "only", "japanese", "NUMBER", "It", "s", "not", "mandatory", "but", "may", "resolve", "the", "problem", "quickly", "Could", "you", "show", "me", "mismatched", "log", "example", "I", "tried", "your", "patch", "but", "matching", "still", "fail", "NUMBER", "rb", "parser", "Fluent", "TextParser", "RegexpParser", "NUMBER", "new", "TAG", "s", "TAG", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "TAG", "NUMBER", "NUMBER", "TAG", "NUMBER", "time_format", "b", "d", "H", "M", "S", "p", "parser", "NUMBER", "call", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "hogeserver", "last", "message", "repeated", "NUMBER", "times", "fail", "This", "log", "be", "important", "in", "the", "first", "place", "This", "log", "itself", "doesn", "t", "have", "received", "log", "content", "NUMBER", "Maintain", "env", "dependent", "rare", "format", "be", "hard", "NUMBER", "What", "do", "you", "think", "\u305f\u3060", "last", "message", "repeated", "n", "times", "\u3092\u5410\u3044\u305fCentOS\u306f\u5b9f\u306b\u6a19\u6e96\u7684\u306a\u69cb\u6210\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u3082\u306e\u3067\u3057\u3066", "\u3088\u304f\u3042\u308b\u3082\u306e\u3060\u3068\u601d\u3044\u307e\u3059", "I", "know", "but", "if", "support", "this", "format", "we", "should", "research", "other", "OS", "s", "syslog", "rsyslong", "and", "syslog", "ng", "NUMBER", "It", "seems", "less", "merit", "NUMBER", "Closed", "this", "pull", "request", "for", "now", "NUMBER", "It", "s", "double", "disk", "I", "O", "load", "NUMBER", "Is", "this", "a", "critical", "If", "you", "want", "none", "buffered", "file", "output", "you", "can", "write", "NoneBufferedFileOuput", "use", "Output", "type", "easily", "NUMBER", "I", "see", "NUMBER", "out_file", "plugin", "uses", "TimeSlicedOutput", "to", "separate", "file", "by", "time", "range", "NUMBER", "So", "if", "you", "don", "t", "need", "such", "feature", "and", "avoid", "IO", "relate", "system", "calls", "then", "non", "buffered", "plugin", "maybe", "useful", "NUMBER", "It", "be", "acceptable", "for", "me", "NUMBER", "Does", "anyone", "have", "objection", "ping", "tagomoris", "frsyuki", "kzk", "Do", "you", "see", "any", "problem", "format", "raw", "seems", "mismatch", "name", "NUMBER", "For", "me", "raw", "represents", "No", "transformation", "and", "emit", "logs", "directly", "like", "splunk", "NUMBER", "I", "want", "more", "clear", "name", "NUMBER", "format", "none", "or", "format", "plain", "be", "candidate", "NUMBER", "For", "me", "plain", "seems", "to", "be", "similar", "to", "raw", "NUMBER", "So", "NUMBER", "for", "format", "none", "NUMBER", "I", "wait", "a", "day", "for", "decision", "NUMBER", "none", "wins", "Yes", "NUMBER", "Providing", "config_param", "in", "buffer", "layer", "means", "user", "can", "set", "such", "configuration", "without", "output", "plugin", "NUMBER", "But", "in", "this", "case", "main", "agent", "be", "output", "plugin", "not", "buffer", "plugin", "NUMBER", "So", "I", "think", "buffer", "plugin", "should", "not", "provide", "config_param", "for", "this", "cases", "NUMBER", "This", "be", "know", "issue", "and", "your", "patch", "be", "good", "but", "this", "patch", "breaks", "backward", "compatibility", "NUMBER", "out_copy", "be", "widely", "use", "so", "we", "want", "to", "keep", "the", "current", "behaviour", "in", "v", "NUMBER", "version", "NUMBER", "How", "about", "deep_copy", "option", "in", "out_copy", "plugin", "After", "apply", "avobe", "I", "will", "merge", "it", "NUMBER", "Thanks", "for", "your", "good", "patch", "NUMBER", "I", "think", "input", "plugin", "has", "the", "responsibility", "because", "Fluentd", "s", "event", "be", "consist", "of", "time", "tag", "and", "record", "NUMBER", "So", "input", "plugin", "should", "not", "emit", "nil", "record", "NUMBER", "But", "the", "world", "be", "ugly", "not", "beautiful", "NUMBER", "We", "should", "validate", "or", "skip", "invalid", "record", "on", "both", "side", "NUMBER", "Technically", "smart", "implementation", "seems", "hard", "in", "v", "NUMBER", "Luckily", "this", "situation", "be", "rare", "so", "I", "think", "ad", "hoc", "patch", "be", "enough", "NUMBER", "One", "more", "I", "don", "t", "understand", "the", "situation", "correctly", "NUMBER", "When", "do", "MessagePackEventStream", "contain", "nil", "record", "Almost", "fluent", "loggers", "ignore", "nil", "record", "and", "emit", "in_forward", "in_http", "also", "ignore", "nil", "record", "NUMBER", "So", "following", "flow", "should", "not", "inject", "nil", "record", "into", "EventStream", "NUMBER", "logger", "fluentd", "fluentd", "NUMBER", "Nice", "patch", "Hey", "please", "please", "please", "indent", "in", "module", "and", "class", "NUMBER", "merge", "Show", "install", "plugins", "and", "these", "version", "on", "execution", "search", "fluent", "plugin", "NUMBER", "gemspec", "parse", "these", "gemspecs", "show", "results", "on", "logs", "Feature", "request", "for", "fluentd", "NUMBER", "org", "fluentd", "itself", "to", "collect", "plugin", "list", "and", "its", "gemspec", "fluentd", "NUMBER", "org", "parse", "gemspec", "and", "show", "type_", "list", "and", "provide", "its", "metadata", "by", "JSON", "fluentd", "NUMBER", "org", "parse", "configuration", "file", "and", "refer", "these", "json", "from", "fluentd", "NUMBER", "org", "install", "plugins", "needed", "in", "configuration", "file", "Sorry", "for", "the", "late", "reply", "NUMBER", "Hm", "sounds", "reasonable", "at", "one", "log", "file", "case", "NUMBER", "We", "need", "to", "check", "and", "add", "it", "test", "NUMBER", "Please", "wait", "NUMBER", "Sorry", "I", "be", "busy", "now", "NUMBER", "I", "will", "consider", "this", "feature", "at", "fluentd", "NUMBER", "not", "next", "version", "NUMBER", "suzukaze", "We", "can", "t", "accept", "only", "new", "behaviour", "because", "almost", "users", "expect", "existence", "behaviour", "NUMBER", "imkira", "Yeah", "NUMBER", "It", "s", "preferable", "that", "configuration", "parameters", "be", "same", "but", "read_all", "be", "not", "clear", "for", "me", "NUMBER", "imkira", "If", "you", "have", "a", "opinion", "for", "this", "issue", "please", "post", "the", "comment", "on", "this", "pull", "request", "LINK", "LINK", "also", "resolve", "this", "issue", "NUMBER", "Maybe", "your", "benchmark", "be", "wrong", "NUMBER", "Please", "try", "follwoing", "code", "rb", "require", "benchmark", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "key", "value", "if", "value", "value", "NUMBER", "to_i", "NUMBER", "to_s", "record", "key", "value", "NUMBER", "to_i", "elsif", "value", "value", "NUMBER", "to_f", "NUMBER", "to_s", "record", "key", "value", "NUMBER", "to_f", "end", "end", "record", "end", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "key", "value", "if", "Integer", "value", "rescue", "false", "record", "key", "value", "NUMBER", "to_i", "elsif", "Float", "value", "rescue", "false", "record", "key", "value", "NUMBER", "to_f", "end", "end", "record", "end", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "key", "value", "if", "int_value", "Integer", "value", "rescue", "false", "record", "key", "int_value", "elsif", "float_value", "Float", "value", "rescue", "false", "record", "key", "float_value", "end", "end", "record", "end", "record", "int", "NUMBER", "float", "NUMBER", "str", "NUMBER", "hoge", "msg", "path", "to", "n", "NUMBER", "Benchmark", "NUMBER", "bmbm", "do", "x", "x", "NUMBER", "report", "n", "NUMBER", "times", "convert_type", "NUMBER", "record", "NUMBER", "dup", "x", "NUMBER", "report", "n", "NUMBER", "times", "convert_type", "NUMBER", "record", "NUMBER", "dup", "x", "NUMBER", "report", "n", "NUMBER", "times", "convert_type", "NUMBER", "record", "NUMBER", "dup", "end", "In", "my", "env", "result", "be", "below", "ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "ruby", "b", "NUMBER", "rb", "Rehearsal", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "total", "NUMBER", "sec", "user", "system", "total", "real", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "ruby", "b", "NUMBER", "rb", "Rehearsal", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "total", "NUMBER", "sec", "user", "system", "total", "real", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Auto", "casting", "be", "one", "of", "type", "conversion", "NUMBER", "So", "type_convert", "plugin", "be", "more", "general", "than", "autocast", "plugin", "NUMBER", "Example", "TAG", "type", "type_convert", "auto_convert", "true", "like", "autocast", "TAG", "TAG", "type", "type_convert", "convert_rules", "key", "NUMBER", "float", "key", "NUMBER", "integer", "key", "NUMBER", "time", "TAG", "I", "ve", "delete", "the", "output", "file", "results", "NUMBER", "txt", "when", "it", "was", "under", "be", "use", "by", "fluentd", "NUMBER", "In", "file", "output", "plugin", "fluentd", "doesn", "t", "write", "the", "events", "to", "Users", "junyoung", "results", "NUMBER", "txt", "file", "NUMBER", "path", "configuration", "be", "prefix", "so", "fluentd", "generates", "the", "new", "file", "like", "Users", "junyoung", "result", "NUMBER", "txt", "NUMBER", "_", "NUMBER", "log", "NUMBER", "If", "you", "hit", "problem", "again", "please", "reopen", "this", "issue", "NUMBER", "I", "heard", "some", "people", "try", "to", "run", "fluentd", "on", "Rubinius", "NUMBER", "In", "addition", "Rubinius", "support", "C", "extension", "correctly", "NUMBER", "I", "think", "test", "Rubinius", "be", "good", "for", "Fluentd", "NUMBER", "But", "Rubinius", "test", "be", "not", "important", "so", "I", "want", "optional", "test", "on", "Travis", "CI", "NUMBER", "Passed", "CI", "and", "just", "merge", "NUMBER", "Thanks", "Regarding", "LINK", "data", "td", "agent", "issue", "NUMBER", "we", "can", "t", "use", "actual", "run", "because", "some", "plugin", "e", "NUMBER", "g", "NUMBER", "in_tail", "may", "update", "the", "state", "NUMBER", "So", "we", "need", "specific", "mode", "to", "check", "configuration", "or", "other", "status", "NUMBER", "Above", "commit", "if", "setup", "be", "correct", "return", "code", "be", "NUMBER", "sh", "NUMBER", "bin", "fluentd", "dry", "run", "c", "tmp", "fluentd", "hoge", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "Users", "repeatedly", "tmp", "fluentd", "hoge", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "fluent", "NUMBER", "type", "stdout", "echo", "NUMBER", "otherwise", "return", "code", "be", "NUMBER", "sh", "NUMBER", "bin", "fluentd", "dry", "run", "c", "tmp", "fluentd", "foo", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "Users", "repeatedly", "tmp", "fluentd", "foo", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dry", "run", "fail", "Unknown", "input", "plugin", "foo", "NUMBER", "Run", "gem", "search", "rd", "fluent", "plugin", "to", "find", "plugins", "echo", "NUMBER", "kenjiskywalker", "Thank", "you", "for", "checking", "Seems", "ok", "NUMBER", "frsyuki", "Thank", "you", "Could", "you", "merge", "above", "commit", "into", "NUMBER", "commit", "After", "that", "I", "will", "merge", "this", "pull", "request", "NUMBER", "Just", "merge", "NUMBER", "Thanks", "We", "can", "specify", "lower", "value", "than", "NUMBER", "in", "heartbeat_interval", "NUMBER", "Don", "t", "we", "need", "to", "care", "such", "case", "Hi", "Zhiwen", "Could", "you", "paste", "the", "entire", "log", "Maybe", "forward", "or", "other", "plugin", "cause", "the", "error", "NUMBER", "Masahiro", "Thank", "you", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "home", "www", "fluentd", "conf", "app", "log", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "bind", "NUMBER", "TAG", "TAG", "type", "forest", "subtype", "webhdfs", "remove_prefix", "applog", "TAG", "host", "NUMBER", "port", "NUMBER", "username", "hadoop", "path", "applog", "tag", "Y", "m", "d", "H", "NUMBER", "log", "flush_interval", "NUMBER", "s", "read_timeout", "NUMBER", "field_separator", "TAB", "output_include_time", "false", "output_include_tag", "false", "output_data_type", "attr", "all", "TAG", "TAG", "path", "applog", "tag", "Y", "m", "d", "H_", "M", "NUMBER", "log", "flush_interval", "NUMBER", "s", "TAG", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "applog", "NUMBER", "type", "forest", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "listening", "fluent", "socket", "on", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "corp", "NUMBER", "ais", "NUMBER", "oragelog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "pro_tag_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "pic_speed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "del_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "jingjia_stop_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "restarting", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "shutting", "down", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "process", "finished", "code", "NUMBER", "In", "this", "case", "Fluentd", "restarted", "but", "your", "configuration", "doesn", "t", "use", "copy", "plugin", "NUMBER", "Did", "you", "shutdown", "fluentd", "manually", "I", "see", "NUMBER", "I", "asked", "tagomoris", "author", "of", "webhdfs", "and", "forest", "plugin", "but", "he", "said", "I", "use", "similar", "configuration", "copy", "forest", "webhdfs", "forward", "but", "no", "problem", "NUMBER", "So", "you", "may", "hit", "very", "rare", "case", "or", "your", "environment", "has", "some", "problem", "NUMBER", "process", "finished", "code", "NUMBER", "be", "always", "occur", "I", "m", "not", "sure", "NUMBER", "Could", "you", "change", "webhdfs", "plugin", "to", "other", "plugin", "and", "retry", "And", "could", "you", "paste", "the", "your", "posted", "data", "I", "will", "try", "to", "reproduce", "this", "issue", "NUMBER", "No", "response", "NUMBER", "I", "close", "this", "issue", "for", "now", "NUMBER", "If", "you", "hit", "the", "problem", "again", "please", "reopen", "this", "issue", "NUMBER", "Currently", "there", "be", "no", "such", "feature", "NUMBER", "Do", "you", "have", "a", "problem", "I", "see", "NUMBER", "I", "think", "such", "case", "be", "minor", "in", "fluentd", "alomost", "cases", "fluentd", "doesn", "t", "share", "logs", "with", "multi", "users", "but", "I", "agree", "sometimes", "occur", "NUMBER", "I", "be", "thinking", "about", "configuration", "format", "because", "Windows", "file", "permission", "be", "different", "from", "Linux", "and", "Mac", "NUMBER", "Need", "to", "dig", "Windows", "architecture", "and", "Ruby", "on", "Windows", "NUMBER", "NUMBER", "format", "seems", "to", "work", "on", "Windows", "I", "will", "try", "it", "NUMBER", "BTW", "in", "my", "env", "out_file", "s", "file", "permission", "be", "NUMBER", "I", "checked", "out_file", "plugin", "and", "this", "plugin", "doesn", "t", "modify", "file", "permission", "NUMBER", "So", "Right", "now", "they", "seem", "to", "be", "NUMBER", "Just", "curious", "this", "permission", "NUMBER", "fujiwara", "san", "find", "following", "line", "NUMBER", "LINK", "L", "NUMBER", "Maybe", "this", "causes", "NUMBER", "permission", "when", "uses", "fluentd", "daemonize", "mechanism", "NUMBER", "Hmm", "NUMBER", "fujiwara", "aknapp", "I", "will", "implement", "fujiwara", "s", "NUMBER", "first", "NUMBER", "After", "that", "we", "should", "consider", "NUMBER", "approach", "NUMBER", "abecciu", "Thank", "you", "for", "the", "pull", "request", "NUMBER", "Could", "you", "paste", "your", "configuration", "and", "use", "gem", "version", "e", "NUMBER", "g", "NUMBER", "fluentd", "msgpack", "and", "etc", "Some", "users", "use", "out_copy", "with", "TimeSlicedOutput", "but", "I", "first", "heard", "this", "case", "NUMBER", "abecciu", "Thank", "you", "I", "m", "in", "RubyKaigi", "now", "NUMBER", "After", "back", "to", "home", "I", "will", "test", "later", "NUMBER", "abecciu", "I", "tried", "your", "code", "NUMBER", "Maybe", "this", "issue", "seems", "MessagePack", "NUMBER", "x", "relate", "bug", "because", "your", "test", "be", "pass", "with", "MessagePack", "NUMBER", "ruby", "version", "be", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "NUMBER", "cc", "frsyuki", "rb", "def", "test_msgpack_es_emit_bug", "d", "Fluent", "Test", "OutputTestDriver", "NUMBER", "new", "Fluent", "CopyOutput", "u", "MessagePack", "Unpacker", "NUMBER", "new", "outputs", "w", "p", "NUMBER", "p", "NUMBER", "NUMBER", "map", "do", "pname", "p", "Fluent", "Plugin", "NUMBER", "new_output", "test", "p", "NUMBER", "configure", "name", "pname", "p", "NUMBER", "define_singleton_method", "emit", "do", "tag", "es", "chain", "es", "NUMBER", "each", "do", "time", "record", "super", "tag", "time", "record", "chain", "end", "end", "p", "end", "d", "NUMBER", "instance", "NUMBER", "instance_eval", "outputs", "outputs", "time", "Time", "NUMBER", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "UTC", "NUMBER", "to_i", "if", "MessagePack", "VERSION", "NUMBER", "NUMBER", "Failure", "test_msgpack_es_emit_bug", "CopyOutputTest", "test", "plugin", "out_copy", "NUMBER", "rb", "NUMBER", "NUMBER", "TAG", "NUMBER", "NUMBER", "a", "NUMBER", "expected", "but", "was", "TAG", "NUMBER", "NUMBER", "packer", "MessagePack", "Packer", "NUMBER", "new", "packer", "NUMBER", "pack", "time", "a", "NUMBER", "packer", "NUMBER", "pack", "time", "a", "NUMBER", "es", "Fluent", "MessagePackEventStream", "NUMBER", "new", "packer", "NUMBER", "to_s", "u", "else", "NUMBER", "test", "NUMBER", "assertions", "NUMBER", "failures", "NUMBER", "error", "NUMBER", "skips", "events", "time", "a", "NUMBER", "NUMBER", "to_msgpack", "time", "a", "NUMBER", "NUMBER", "to_msgpack", "es", "Fluent", "MessagePackEventStream", "NUMBER", "new", "events", "u", "end", "d", "NUMBER", "instance", "NUMBER", "emit", "test", "es", "Fluent", "NullOutputChain", "NUMBER", "instance", "d", "NUMBER", "instance", "NUMBER", "outputs", "NUMBER", "each", "o", "assert_equal", "time", "a", "NUMBER", "time", "a", "NUMBER", "o", "NUMBER", "events", "end", "abecciu", "Thanks", "I", "will", "commit", "MessagePackEventStream", "handle", "for", "MessagePack", "NUMBER", "x", "version", "NUMBER", "kzk", "frsyuki", "I", "push", "msgpack", "NUMBER", "relate", "commit", "to", "prevent", "msgpack", "NUMBER", "degression", "branch", "NUMBER", "Please", "check", "LINK", "This", "seems", "fluent", "plugin", "webhdfs", "relate", "issue", "NUMBER", "Could", "you", "move", "this", "issue", "to", "LINK", "plugin", "webhdfs", "Is", "this", "a", "top", "level", "configuration", "Where", "be", "the", "test", "Could", "you", "merge", "above", "commit", "into", "one", "commit", "After", "that", "I", "will", "merge", "this", "pull", "request", "NUMBER", "I", "and", "sada", "checked", "NUMBER", "Seems", "good", "warn", "be", "not", "error", "so", "this", "behaviour", "be", "expected", "NUMBER", "In", "this", "case", "warn", "means", "You", "may", "make", "a", "typo", "because", "this", "plugin", "doesn", "t", "have", "such", "parameter", "NUMBER", "Could", "you", "show", "me", "the", "example", "log", "merge", "Can", "we", "close", "this", "issue", "LTSVParser", "always", "use", "current", "time", "when", "time_key", "wasn", "t", "set", "even", "thouth", "set", "time_format", "NUMBER", "This", "seems", "ValuesParser", "behaviour", "not", "LTSVParser", "NUMBER", "But", "your", "last", "commit", "fix", "this", "problem", "I", "think", "right", "Okay", "merge", "NUMBER", "This", "pull", "request", "has", "compatibility", "issue", "NUMBER", "In", "v", "NUMBER", "internal", "fluent", "will", "be", "remove", "NUMBER", "Sorry", "we", "can", "t", "merge", "this", "pull", "request", "for", "now", "NUMBER", "Maybe", "this", "be", "not", "a", "Fluentd", "issue", "NUMBER", "kiyoto", "suggests", "monitoring", "service", "and", "other", "systems", "be", "exist", "e", "NUMBER", "g", "NUMBER", "haikanko", "LINK", "Good", "catch", "Revived", "LINK", "What", "do", "you", "mean", "Fluentd", "NUMBER", "be", "not", "release", "yet", "NUMBER", "It", "looks", "same", "as", "HTTP", "include", "directive", "NUMBER", "LINK", "file", "NUMBER", "include", "directive", "What", "be", "the", "difference", "What", "be", "the", "status", "Can", "we", "close", "this", "issue", "or", "still", "leak", "memory", "Maybe", "we", "need", "two", "NUMBER", "and", "NUMBER", "version", "NUMBER", "What", "do", "you", "think", "repeatedly", "Do", "you", "mean", "change", "the", "dependency", "to", "NUMBER", "OR", "NUMBER", "Thus", "I", "think", "it", "s", "ok", "NUMBER", "Probably", "we", "can", "use", "gemspec", "NUMBER", "add_dependency", "msgpack", "NUMBER", "NUMBER", "tagomoris", "hotchpotch", "Merged", "Thank", "you", "I", "add", "TAG", "NUMBER", "OR", "NUMBER", "dependency", "exactly", "NUMBER", "Because", "of", "the", "hot", "issue", "on", "msgpack", "NUMBER", "will", "include", "a", "big", "change", "NUMBER", "Here", "be", "the", "change", "to", "add", "TAG", "matched", "NUMBER", "Existence", "conf", "format", "TAG", "type", "bar", "callback", "TAG", "Configuration", "DSL", "be", "relatively", "heavy", "feature", "NUMBER", "I", "think", "that", "it", "may", "be", "good", "to", "invite", "someone", "to", "committer", "who", "want", "this", "feature", "NUMBER", "Just", "add", "configuration", "DSL", "on", "v", "NUMBER", "branch", "NUMBER", "String", "and", "some", "other", "primitives", "only", "support", "for", "Config", "Element", "attributes", "NUMBER", "ruby", "worker", "hostname", "myhostname", "NUMBER", "NUMBER", "each", "i", "source", "type", "tail", "path", "var", "log", "httpd", "access", "NUMBER", "part", "i", "NUMBER", "log", "filter", "bar", "NUMBER", "type", "hoge", "val", "NUMBER", "moge", "val", "NUMBER", "foo", "bar", "baz", "val", "NUMBER", "NUMBER", "id", "hoge", "subsection", "foo", "bar", "subsection", "foo", "baz", "filter", "foo", "NUMBER", "type", "pass", "match", "foo", "bar", "NUMBER", "type", "file", "path", "var", "log", "httpd", "access", "NUMBER", "hostname", "NUMBER", "i", "NUMBER", "log", "I", "commit", "Config", "DSL", "as", "backport", "on", "v", "NUMBER", "from", "v", "NUMBER", "branch", "at", "NUMBER", "eaa", "NUMBER", "b", "NUMBER", "b", "NUMBER", "ef", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "c", "NUMBER", "c", "NUMBER", "fdf", "NUMBER", "b", "NUMBER", "d", "NUMBER", "f", "NUMBER", "Limitations", "be", "All", "values", "will", "be", "converted", "as", "string", "v", "NUMBER", "configuration", "element", "has", "no", "types", "And", "then", "will", "be", "converted", "for", "each", "types", "in", "configure", "Regexp", "callback", "and", "other", "logics", "be", "not", "permitted", "All", "configuration", "attributes", "can", "accepts", "only", "one", "string", "value", "Hashes", "and", "arrays", "unavailable", "evaluated", "as", "string", "by", "to_s", "include", "doesn", "t", "works", "in", "curent", "version", "ruby", "for", "config", "NUMBER", "rb", "with", "fluentd", "v", "NUMBER", "x", "hostname", "myhostname", "NUMBER", "NUMBER", "each", "do", "i", "source", "type", "tail", "path", "var", "log", "httpd", "access", "NUMBER", "part", "i", "NUMBER", "log", "format", "NUMBER", "hash", "available", "in", "pattern", "yay", "time_format", "d", "b", "Y", "H", "M", "S", "z", "tag", "foo", "NUMBER", "x", "end", "match", "foo", "bar", "NUMBER", "type", "copy", "store", "type", "stdout", "store", "type", "forward", "flush_interval", "NUMBER", "server", "host", "myserver", "NUMBER", "local", "server", "host", "hostname", "myhostname", "port", "NUMBER", "standby", "true", "backup", "fluentd", "process", "We", "know", "some", "users", "want", "millisecond", "precision", "time", "NUMBER", "So", "we", "consider", "millisecond", "precision", "in", "v", "NUMBER", "But", "introduce", "this", "causes", "the", "backward", "compatibility", "issue", "NUMBER", "We", "now", "correct", "use", "cases", "and", "requirements", "NUMBER", "In", "v", "NUMBER", "I", "don", "t", "know", "the", "detail", "NUMBER", "frsyuki", "One", "idea", "be", "provide", "time_unit", "or", "similar", "option", "in", "Fluentd", "core", "NUMBER", "I", "be", "now", "considering", "how", "to", "support", "such", "option", "smoothly", "NUMBER", "I", "believe", "the", "log", "says", "the", "time", "of", "next", "retry", "NUMBER", "Could", "you", "give", "me", "your", "last", "NUMBER", "lines", "of", "your", "logs", "In", "my", "environment", "the", "number", "of", "error", "result", "be", "NUMBER", "It", "be", "same", "as", "your", "conf", "NUMBER", "Could", "you", "show", "me", "the", "full", "logs", "and", "full", "conf", "Okay", "NUMBER", "I", "close", "this", "issue", "NUMBER", "ok", "Maybe", "you", "should", "consider", "setting", "up", "OS", "parameters", "NUMBER", "NUMBER", "max", "file", "descriptors", "ulimit", "n", "Please", "ensure", "you", "have", "enough", "number", "of", "file", "descriptors", "available", "NUMBER", "Please", "modify", "etc", "security", "limits", "NUMBER", "conf", "LINK", "increase", "the", "maximum", "number", "of", "open", "file", "NUMBER", "Increase", "the", "client", "port", "range", "NUMBER", "Enable", "TIME_WAIT", "recycling", "NUMBER", "Disable", "iptables", "if", "you", "re", "use", "connection", "track", "Basically", "please", "follow", "this", "blog", "NUMBER", "LINK", "the", "good", "the", "bad", "the", "ugly", "BTW", "be", "you", "use", "very", "short", "period", "of", "flush_interval", "at", "the", "forwarder", "LINK", "install", "I", "ve", "write", "the", "document", "about", "OS", "settings", "NUMBER", "Could", "you", "follow", "the", "instruction", "and", "try", "again", "Thanks", "K", "pauldavidgilligan", "ping", "Can", "I", "close", "this", "issue", "Thanks", "we", "still", "recommend", "to", "use", "NUMBER", "though", "NUMBER", "Fluentd", "should", "work", "on", "NUMBER", "NUMBER", "and", "NUMBER", "If", "you", "have", "a", "plugin", "which", "support", "only", "NUMBER", "and", "NUMBER", "you", "should", "use", "Ruby", "NUMBER", "x", "or", "open", "an", "issue", "for", "support", "NUMBER", "Good", "catch", "tagomoris", "Recently", "we", "ve", "get", "many", "request", "of", "having", "pixel", "track", "feature", "of", "in_http", "NUMBER", "This", "enable", "Fluentd", "users", "to", "put", "the", "data", "in", "an", "easy", "way", "like", "from", "HTML", "pages", "NUMBER", "We", "never", "met", "such", "situations", "NUMBER", "Could", "you", "give", "us", "your", "full", "configuration", "file", "Paul", "Thanks", "for", "the", "clear", "description", "NUMBER", "The", "file", "buffer", "could", "be", "a", "bottle", "neck", "in", "this", "case", "NUMBER", "For", "further", "discussion", "can", "we", "talk", "on", "IM", "like", "Skype", "My", "Skype", "address", "be", "kzk_mover", "NUMBER", "And", "also", "I", "really", "want", "to", "have", "Exact", "configuration", "file", "copy", "and", "Logs", "NUMBER", "Trouble", "shooting", "this", "kind", "of", "problem", "without", "any", "configuration", "file", "and", "logs", "be", "hard", "for", "me", "NUMBER", "I", "ve", "looked", "at", "the", "configuration", "but", "unfortunately", "no", "significant", "mistake", "was", "find", "NUMBER", "Several", "question", "NUMBER", "Does", "your", "node", "saturate", "any", "resources", "like", "CPU", "memory", "If", "you", "can", "could", "you", "send", "me", "a", "source", "code", "of", "bidder", "output", "plugin", "Could", "you", "change", "the", "buffer", "configuration", "to", "memory", "Since", "we", "haven", "t", "seen", "anyone", "who", "uses", "file", "buffer", "with", "NUMBER", "k", "sec", "traffic", "NUMBER", "And", "reply", "to", "your", "question", "NUMBER", "why", "do", "fluents", "P", "not", "read", "and", "resend", "the", "buffer", "file", "on", "the", "disk", "during", "re", "start", "I", "see", "fluentd", "touching", "the", "timestamps", "but", "it", "be", "very", "very", "slow", "to", "clear", "the", "file", "backlog", "NUMBER", "It", "should", "flush", "the", "buffers", "and", "it", "only", "flushes", "with", "the", "speed", "of", "the", "disk", "NUMBER", "If", "the", "timeout", "worked", "i", "NUMBER", "e", "NUMBER", "if", "we", "set", "it", "very", "short", "I", "would", "expect", "the", "CPU", "load", "to", "increase", "but", "this", "be", "not", "change", "as", "expected", "so", "maybe", "we", "have", "a", "configuration", "issue", "logs", "be", "still", "sent", "very", "slow", "NUMBER", "It", "should", "surely", "increase", "the", "CPU", "load", "but", "it", "still", "batches", "the", "message", "NUMBER", "Also", "in_forward", "be", "doing", "heavy", "optimization", "when", "receiving", "logs", "from", "out_forward", "no", "deserialization", "occur", "NUMBER", "What", "should", "we", "use", "as", "the", "buffer", "queue", "sizes", "P", "receives", "NUMBER", "x", "W", "and", "D", "receives", "NUMBER", "x", "W", "under", "normal", "conditions", "NUMBER", "Usually", "larger", "buffer_queue_limit", "and", "buffer_chunk_limit", "be", "preferred", "NUMBER", "repeatedly", "frsyuki", "any", "comments", "on", "this", "pauldavidgilligan", "Did", "you", "hit", "same", "problem", "on", "only", "forward", "or", "only", "bidder", "We", "need", "to", "identify", "a", "cause", "of", "this", "and", "organize", "the", "information", "NUMBER", "Is", "there", "any", "progress", "Can", "we", "close", "this", "issue", "Thanks", "for", "the", "pull", "request", "NUMBER", "BTW", "this", "document", "says", "If", "the", "format", "be", "not", "indicated", "it", "defaults", "to", "combined", "NUMBER", "Is", "your", "format", "be", "default", "on", "your", "specific", "distribution", "or", "it", "s", "widely", "use", "format", "ah", "ok", "NUMBER", "As", "long", "as", "combined", "format", "of", "nginx", "be", "defined", "and", "it", "s", "the", "default", "log", "format", "this", "pull", "request", "sounds", "reasonable", "NUMBER", "Will", "check", "the", "code", "NUMBER", "Thanks", "Confirmed", "it", "worked", "on", "my", "environment", "too", "NUMBER", "Thanks", "for", "the", "pull", "request", "sgessa", "JFYI", "to", "change", "size", "field", "type", "NUMBER", "LINK", "_bk", "kwiSsq", "NUMBER", "rZsJ", "Could", "you", "give", "me", "a", "pointer", "of", "Scribe", "s", "document", "Will", "take", "a", "look", "at", "it", "NUMBER", "OK", "I", "understand", "NUMBER", "We", "also", "might", "want", "to", "have", "modify", "version", "of", "out_file", "just", "add", "recent", "entries", "to", "the", "file", "instead", "of", "slicing", "logs", "by", "time_slice_format", "NUMBER", "I", "m", "not", "sure", "about", "the", "detail", "behavior", "of", "Scribe", "NUMBER", "In", "fluentd", "my", "implementation", "idea", "be", "simple", "NUMBER", "out_file", "writes", "chunk", "to", "file", "NUMBER", "NUMBER", "after", "write", "the", "file", "re", "link", "symlink", "to", "write", "file", "NUMBER", "iterates", "above", "operations", "for", "nomarl", "file", "and", "gz", "file", "NUMBER", "Is", "it", "enough", "be", "first", "implementation", "NUMBER", "out_file", "doesn", "t", "provide", "non", "buffered", "mode", "so", "out_file", "can", "t", "implement", "Scribe", "like", "each", "event", "tailing", "NUMBER", "If", "you", "set", "symlink_path", "in", "out_file", "out_file", "plugin", "creates", "symlink", "with", "suffix", "to", "point", "to", "latest", "file", "NUMBER", "We", "can", "use", "tail", "F", "to", "watch", "write", "logs", "NUMBER", "Thanks", "for", "the", "pull", "request", "again", "NUMBER", "But", "this", "feature", "seems", "to", "be", "general", "problem", "NUMBER", "I", "be", "thinking", "about", "add", "field", "to", "input", "record", "in", "Input", "plugin", "side", "NUMBER", "Please", "wait", "NUMBER", "This", "problem", "be", "the", "one", "of", "Adding", "custom", "field", "to", "input", "record", "before", "tag", "routing", "NUMBER", "So", "I", "said", "general", "problem", "NUMBER", "baepiff", "zackangelo", "Changing", "Engine", "NUMBER", "emit", "APIs", "breaks", "backward", "compatibility", "NUMBER", "So", "I", "release", "new", "filter", "plugin", "to", "resolve", "this", "issue", "NUMBER", "LINK", "plugin", "record", "modifier", "What", "do", "you", "think", "about", "this", "plugin", "Do", "you", "see", "any", "problem", "Some", "users", "use", "above", "plugin", "to", "add", "hostname", "NUMBER", "So", "close", "this", "pull", "request", "NUMBER", "FYI", "v", "NUMBER", "has", "filter", "layer", "so", "v", "NUMBER", "has", "already", "fix", "this", "pull", "request", "in", "an", "efficient", "way", "NUMBER", "The", "pull", "request", "mention", "above", "has", "some", "performance", "issue", "so", "it", "s", "not", "merge", "yet", "NUMBER", "Separately", "do", "you", "think", "having", "only", "password", "authentication", "works", "fine", "for", "you", "We", "re", "now", "collecting", "user", "s", "requirements", "because", "it", "s", "difficult", "to", "maintain", "the", "compatibility", "once", "we", "introduce", "auth", "future", "at", "in_forward", "out_forward", "NUMBER", "Encryption", "Do", "you", "test", "Stunnel", "or", "similar", "project", "I", "didn", "t", "test", "yet", "but", "it", "provides", "encryption", "functionality", "to", "existence", "program", "NUMBER", "Support", "encryption", "be", "difficult", "because", "each", "user", "has", "own", "requirement", "NUMBER", "tagomoris", "be", "now", "work", "to", "implement", "the", "new", "plugin", "which", "support", "the", "authentication", "and", "encryption", "NUMBER", "If", "you", "re", "interested", "in", "this", "plugin", "please", "contact", "tagomoris", "NUMBER", "tagomoris", "announced", "fluent", "plugin", "secure", "forward", "NUMBER", "LINK", "plugin", "secure", "forward", "I", "close", "this", "issue", "NUMBER", "Hi", "baepiff", "Could", "you", "separate", "hostname", "patch", "and", "nginx", "patch", "and", "request", "again", "I", "ll", "look", "at", "nginx", "one", "NUMBER", "Thanks", "for", "the", "report", "Next", "time", "please", "open", "a", "docs", "relate", "issue", "at", "fluentd", "docs", "repository", "NUMBER", "LINK", "docs", "fluentd", "works", "fine", "with", "your", "conf", "on", "my", "Mac", "NUMBER", "Mac", "OS", "X", "NUMBER", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "install", "via", "rbenv", "fluentd", "NUMBER", "So", "this", "problem", "seems", "to", "be", "environment", "dependent", "NUMBER", "We", "need", "more", "reduced", "case", "to", "fix", "this", "issue", "NUMBER", "Could", "you", "test", "on", "latest", "ruby", "NUMBER", "version", "This", "apparently", "seems", "like", "Ruby", "s", "bug", "NUMBER", "Could", "you", "try", "with", "other", "version", "of", "Ruby", "BUG", "pthread_cond_wait", "Invalid", "argument", "EINVAL", "Close", "this", "issue", "because", "this", "seems", "not", "relate", "to", "Fluentd", "NUMBER", "Sounds", "like", "thig", "bug", "LINK", "lang", "NUMBER", "org", "issue", "NUMBER", "And", "fluent", "plugin", "s", "NUMBER", "v", "NUMBER", "be", "release", "NUMBER", "LINK", "plugin", "s", "NUMBER", "So", "why", "set", "default", "encoding", "to", "ASCII", "NUMBER", "BIT", "frsyuki", "As", "ad", "hoc", "measure", "you", "can", "set", "Encoding", "NUMBER", "default_internal", "to", "nil", "before", "requires", "mime", "types", "NUMBER", "Yes", "this", "encoding", "problem", "be", "important", "for", "fluentd", "NUMBER", "frsyuki", "and", "other", "users", "discussed", "this", "problem", "for", "next", "version", "NUMBER", "mime", "types", "IMHO", "mime", "types", "should", "specify", "UTF", "NUMBER", "internal", "encoding", "at", "file", "reading", "NUMBER", "Because", "some", "mime", "types", "contain", "umlaut", "characters", "NUMBER", "Some", "encodings", "can", "t", "treat", "umlaut", "e", "NUMBER", "g", "NUMBER", "japanese", "encodings", "NUMBER", "Close", "this", "issue", "because", "this", "be", "not", "Fluentd", "s", "problem", "NUMBER", "Need", "fix", "at", "mimetypes", "gem", "NUMBER", "How", "s", "your", "fluentd", "cluster", "going", "Okay", "NUMBER", "I", "merge", "this", "pull", "request", "soon", "NUMBER", "Hmm", "NUMBER", "I", "will", "check", "the", "Fluentd", "and", "relate", "plugins", "NUMBER", "Please", "need", "more", "time", "NUMBER", "Thanks", "for", "the", "check", "I", "will", "check", "out_forward", "NUMBER", "I", "will", "fix", "this", "problem", "NUMBER", "Please", "wait", "NUMBER", "LINK", "I", "fix", "this", "issue", "but", "current", "implementation", "doesn", "t", "support", "IPv", "NUMBER", "IPv", "NUMBER", "mix", "environment", "NUMBER", "Do", "you", "have", "following", "configuration", "conf", "TAG", "type", "forward", "NUMBER", "TAG", "name", "myserver", "NUMBER", "host", "NUMBER", "port", "NUMBER", "weight", "NUMBER", "TAG", "TAG", "name", "myserver", "NUMBER", "host", "NUMBER", "db", "NUMBER", "NUMBER", "port", "NUMBER", "weight", "NUMBER", "TAG", "TAG", "If", "we", "support", "above", "configuration", "each", "node", "should", "have", "own", "udp", "socket", "NUMBER", "\u5831\u544a\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059", "\u4f8b\u5916\u51e6\u7406\u306b\u629c\u3051\u304c\u3042\u308a\u307e\u3057\u305f", "NUMBER", "f", "NUMBER", "de", "NUMBER", "f", "NUMBER", "af", "NUMBER", "f", "NUMBER", "c", "NUMBER", "be", "NUMBER", "db", "NUMBER", "ca", "NUMBER", "\u3067\u4fee\u6b63\u3057\u307e\u3057\u305f", "Regexp", "must", "have", "at", "least", "one", "named", "captures", "TAG", "PATTERN", "NUMBER", "It", "uses", "the", "NAME", "part", "of", "a", "named", "capture", "as", "a", "key", "of", "a", "JSON", "record", "NUMBER", "Here", "be", "documents", "LINK", "tail", "Fixed", "at", "NUMBER", "a", "NUMBER", "af", "NUMBER", "cb", "NUMBER", "fcdfc", "NUMBER", "b", "NUMBER", "fe", "NUMBER", "f", "NUMBER", "dbacbbc", "NUMBER", "f", "NUMBER", "Thank", "you", "I", "merge", "ce", "NUMBER", "c", "NUMBER", "cce", "NUMBER", "e", "NUMBER", "e", "NUMBER", "fa", "NUMBER", "fbb", "NUMBER", "de", "NUMBER", "d", "NUMBER", "and", "b", "NUMBER", "e", "NUMBER", "d", "NUMBER", "b", "NUMBER", "a", "NUMBER", "a", "NUMBER", "a", "NUMBER", "aff", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "a", "NUMBER", "adb", "NUMBER", "a", "NUMBER", "Awesome", "patch", "NUMBER", "I", "ve", "merge", "NUMBER", "I", "ll", "release", "patched", "version", "today", "NUMBER", "Thank", "you", "Fixed", "at", "NUMBER", "d", "NUMBER", "c", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "dd", "NUMBER", "ba", "NUMBER", "a", "NUMBER", "b", "NUMBER", "fffed", "NUMBER", "NUMBER", "c", "NUMBER", "afc", "NUMBER", "ad", "NUMBER", "bf", "NUMBER", "afd", "NUMBER", "caea", "NUMBER", "ba", "NUMBER", "a", "might", "also", "help", "NUMBER", "Hey", "Awesome", "patch", "Please", "check", "ce", "NUMBER", "c", "NUMBER", "cce", "NUMBER", "e", "NUMBER", "e", "NUMBER", "fa", "NUMBER", "fbb", "NUMBER", "de", "NUMBER", "d", "NUMBER", "Great", "Current", "Fluentd", "already", "had", "in_syslog", "test", "NUMBER", "So", "I", "ported", "in_gc_stat", "and", "in_status", "from", "your", "test", "NUMBER", "\u3068\u4f75\u305b\u3066", "fe", "NUMBER", "e", "NUMBER", "ea", "NUMBER", "c", "NUMBER", "ad", "NUMBER", "b", "NUMBER", "c", "NUMBER", "a", "NUMBER", "ce", "NUMBER", "faa", "NUMBER", "\u3068", "f", "NUMBER", "cfbc", "NUMBER", "cf", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "a", "NUMBER", "d", "NUMBER", "e", "NUMBER", "d", "NUMBER", "bbf", "NUMBER", "d", "\u3067\u5bfe\u5fdc\u3057\u307e\u3057\u305f", "\u7d30\u304b\u3044\u3067\u3059\u304c", "NullPositionEntry", "\u3068\u3044\u3046\u540d\u524d\u304c\u5b9f\u4f53\u3092\u8868\u3055\u306a\u304f\u306a\u3063\u305f\u306e\u3067", "MemoryPositionEntry", "\u306b\u5909\u66f4\u3057\u307e\u3057\u305f", "I", "agree", "jeweler", "be", "obsoleted", "and", "bundler", "be", "better", "NUMBER", "But", "when", "we", "once", "switched", "to", "bundler", "it", "cause", "a", "problem", "for", "RPM", "deb", "packaging", "NUMBER", "b", "NUMBER", "f", "NUMBER", "a", "NUMBER", "fc", "NUMBER", "ae", "NUMBER", "cc", "NUMBER", "f", "NUMBER", "c", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "e", "and", "NUMBER", "a", "NUMBER", "b", "NUMBER", "eee", "NUMBER", "e", "NUMBER", "b", "NUMBER", "f", "NUMBER", "ff", "NUMBER", "b", "NUMBER", "ced", "So", "we", "need", "to", "fix", "the", "packaging", "scripts", "first", "at", "the", "same", "time", "NUMBER", "Sorry", "this", "issue", "be", "taking", "time", "NUMBER", "LINK", "data", "td", "agent", "commit", "NUMBER", "e", "NUMBER", "c", "NUMBER", "a", "NUMBER", "dd", "NUMBER", "a", "NUMBER", "f", "NUMBER", "dc", "NUMBER", "f", "NUMBER", "b", "NUMBER", "d", "NUMBER", "bcfa", "I", "tried", "above", "commit", "and", "build", "td", "agent", "RPM", "succeeded", "on", "CentOS", "NUMBER", "I", "be", "now", "trying", "deb", "package", "with", "bundler", "based", "fluentd", "NUMBER", "But", "unfortunately", "I", "can", "t", "build", "the", "deb", "package", "in", "the", "first", "place", "NUMBER", "Need", "more", "time", "NUMBER", "suupic", "build", "rpm", "use", "td", "agnet", "s", "build", "script", "it", "works", "fine", "Which", "branch", "did", "you", "use", "master", "or", "bundler", "fluentd", "support", "\u3054\u5831\u544a\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059", "\u3053\u308c\u306f\u307e\u305a\u304b\u3063\u305f\u3067\u3059\u306d", "NUMBER", "a", "NUMBER", "dafe", "NUMBER", "fe", "NUMBER", "cb", "NUMBER", "c", "NUMBER", "a", "NUMBER", "c", "NUMBER", "ba", "NUMBER", "c", "NUMBER", "\u3067\u4fee\u6b63\u3057\u307e\u3057\u305f", "\u5909\u66f4\u306f\u6b21\u306e\u30ea\u30ea\u30fc\u30b9\u306b\u542b\u3081\u307e\u3059", "\u691c\u8a3c\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059", "fe", "NUMBER", "e", "NUMBER", "ea", "NUMBER", "c", "NUMBER", "ad", "NUMBER", "b", "NUMBER", "c", "NUMBER", "a", "NUMBER", "ce", "NUMBER", "faa", "NUMBER", "\u3067\u5bfe\u5fdc\u3057\u307e\u3057\u305f", "\u3053\u308c\u3067\u3069\u3046\u3067\u3057\u3087\u3046", "I", "m", "so", "surprised", "some", "objects", "could", "raise", "error", "at", "the", "class", "method", "NUMBER", "Anyway", "thank", "you", "for", "your", "pull", "req", "I", "ve", "merge", "NUMBER", "ouch", "thank", "you", "tagomoris", "announced", "fluent", "plugin", "secure", "forward", "NUMBER", "Please", "use", "this", "plugin", "if", "you", "need", "authentication", "and", "encryption", "NUMBER", "LINK", "plugin", "secure", "forward", "Thanks", "Thank", "you", "I", "implement", "your", "idea", "at", "NUMBER", "da", "NUMBER", "cb", "NUMBER", "f", "NUMBER", "a", "NUMBER", "d", "NUMBER", "d", "NUMBER", "d", "NUMBER", "acae", "NUMBER", "f", "NUMBER", "dc", "NUMBER", "Thanks", "I", "ve", "merge", "on", "NUMBER", "c", "NUMBER", "e", "NUMBER", "d", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "d", "NUMBER", "e", "NUMBER", "fa", "NUMBER", "a", "NUMBER", "aed", "NUMBER", "I", "change", "the", "configuration", "syntax", "as", "following", "TAG", "type", "roundrobin", "TAG", "A", "type", "bar", "weight", "NUMBER", "NUMBER", "TAG", "TAG", "B", "type", "bar", "weight", "NUMBER", "NUMBER", "TAG", "TAG", "C", "type", "bar", "weight", "NUMBER", "NUMBER", "TAG", "TAG", "And", "also", "I", "change", "the", "roundrobin", "algorithm", "for", "better", "performance", "NUMBER", "Please", "check", "NUMBER", "b", "NUMBER", "aee", "NUMBER", "b", "NUMBER", "c", "NUMBER", "c", "NUMBER", "f", "NUMBER", "d", "NUMBER", "for", "the", "change", "NUMBER", "Great", "Thank", "you", "NUMBER", "Thank", "you", "What", "a", "poor", "bug", "NUMBER", "NUMBER", "d", "NUMBER", "c", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "dd", "NUMBER", "ba", "NUMBER", "a", "NUMBER", "b", "NUMBER", "fffed", "NUMBER", "\u3067", "TCP\u306b\u3088\u308b\u30c7\u30fc\u30bf\u9001\u4fe1\u306e\u6210\u529f\u3082", "heartbeat", "\u3068\u3057\u3066\u6271\u3046\u3088\u3046\u306b\u3057\u307e\u3057\u305f", "\u30c7\u30fc\u30bf\u306e\u9001\u53d7\u4fe1\u304c\u6210\u529f\u3057\u3066\u3044\u308c\u3070", "detach", "\u3055\u308c\u308b\u3053\u3068\u306f\u7121\u304f\u306a\u308b\u3068\u601d\u3044\u307e\u3059", "phi_threshold", "\u306e\u8abf\u7bc0\u3082\u8a66\u3057\u3066\u307f\u3066\u4e0b\u3055\u3044", "At", "NUMBER", "d", "NUMBER", "c", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "dd", "NUMBER", "ba", "NUMBER", "a", "NUMBER", "b", "NUMBER", "fffed", "NUMBER", "out_forward", "assumes", "successful", "data", "transfer", "via", "TCP", "as", "a", "successful", "heartbeat", "NUMBER", "It", "should", "not", "detach", "nodes", "any", "loger", "if", "data", "transfer", "succeeds", "NUMBER", "Adjusting", "phi_threshold", "might", "help", "as", "well", "NUMBER", "I", "implement", "dns", "cache", "NUMBER", "out_forward", "newly", "support", "expire_dns_cache", "option", "NUMBER", "default", "behavior", "out_forward", "caches", "resolve", "host", "name", "and", "invalidates", "it", "only", "when", "the", "node", "becomes", "not", "available", "NUMBER", "expire_dns_cache", "NUMBER", "out_forward", "caches", "resolve", "host", "name", "and", "invalidates", "it", "when", "the", "node", "becomes", "not", "available", "or", "the", "specified", "expired", "time", "pass", "NUMBER", "expire_dns_cache", "NUMBER", "out_forward", "doesn", "t", "cache", "resolve", "host", "name", "NUMBER", "connection", "keepalive", "be", "another", "problem", "NUMBER", "Thank", "you", "for", "your", "report", "NUMBER", "I", "fix", "this", "problem", "at", "NUMBER", "d", "NUMBER", "eb", "NUMBER", "aa", "NUMBER", "feb", "NUMBER", "e", "NUMBER", "e", "NUMBER", "c", "NUMBER", "e", "NUMBER", "a", "NUMBER", "a", "NUMBER", "b", "NUMBER", "Great", "I", "think", "it", "was", "tough", "work", "to", "clear", "legal", "procedures", "to", "make", "your", "patch", "open", "I", "understood", "the", "filtering", "validating", "feature", "at", "the", "input", "side", "be", "important", "NUMBER", "But", "your", "proposal", "be", "too", "big", "to", "add", "just", "a", "filtering", "feature", "into", "the", "in_tail", "plugin", "NUMBER", "I", "believe", "the", "plugin", "mechanism", "should", "be", "simple", "to", "keep", "simplicity", "of", "Fluentd", "NUMBER", "It", "needs", "more", "examples", "or", "estimations", "of", "use", "cases", "to", "add", "a", "new", "type", "of", "plugins", "NUMBER", "You", "can", "do", "same", "thing", "by", "extending", "TailInput", "and", "overriding", "the", "parse_line", "method", "ref", "NUMBER", "LINK", "custom", "parser", "for", "tail", "input", "plugin", "NUMBER", "Input", "time", "restriction", "be", "useful", "when", "the", "the", "owners", "of", "fluentd", "s", "instances", "be", "different", "NUMBER", "So", "you", "can", "t", "trust", "the", "sender", "of", "logs", "at", "all", "right", "I", "imagine", "you", "need", "multi", "tenant", "capability", "NUMBER", "To", "satisfy", "your", "needs", "the", "input", "plugin", "will", "need", "following", "features", "a", "authentication", "b", "size", "structure", "semantics", "validation", "of", "records", "validation", "per", "records", "c", "bandwidth", "limitation", "validation", "over", "multiple", "records", "In", "my", "opinion", "a", "should", "be", "do", "at", "the", "boundary", "of", "the", "untrusted", "zone", "and", "trusted", "zone", "not", "to", "allow", "unauthorized", "users", "to", "consume", "resources", "of", "the", "trusted", "zone", "NUMBER", "And", "b", "should", "be", "do", "at", "the", "boundary", "of", "the", "frontend", "system", "and", "backend", "system", "NUMBER", "Because", "these", "validations", "tend", "to", "be", "complex", "and", "slow", "task", "because", "it", "needs", "be", "strict", "to", "prevent", "potential", "security", "holes", "NUMBER", "So", "they", "have", "different", "requirements", "than", "backend", "aggregation", "system", "which", "needs", "simplicity", "and", "high", "performance", "NUMBER", "in", "out_forward", "plugins", "and", "Fluentd", "s", "emit", "write", "mechanisms", "be", "optimized", "for", "availability", "and", "performance", "NUMBER", "I", "think", "it", "s", "difficult", "to", "add", "validation", "features", "without", "degrading", "these", "benefits", "NUMBER", "So", "it", "will", "be", "a", "another", "input", "plugin", "like", "in_secure_forward", "rather", "than", "a", "kind", "of", "add", "ons", "NUMBER", "Thank", "you", "for", "your", "perfect", "code", "I", "ve", "merge", "HandleTagNameMixin", "NUMBER", "It", "will", "be", "include", "in", "the", "next", "release", "NUMBER", "Thank", "you", "for", "your", "detailed", "report", "NUMBER", "I", "ll", "check", "the", "problem", "NUMBER", "The", "problem", "be", "reproduced", "on", "my", "environment", "NUMBER", "Unfortunately", "it", "s", "hard", "to", "resolve", "and", "may", "take", "time", "to", "fix", "NUMBER", "For", "now", "please", "downgrade", "the", "version", "of", "fluentd", "to", "NUMBER", "which", "be", "a", "stable", "version", "gem", "uninstall", "fluentd", "gem", "install", "fluentd", "v", "NUMBER", "I", "ll", "fix", "this", "problem", "at", "the", "next", "version", "NUMBER", "I", "release", "v", "NUMBER", "that", "fix", "this", "problem", "NUMBER", "Please", "check", "it", "out", "Current", "Fluentd", "s", "code", "be", "as", "following", "pseudo", "code", "if", "current_buffer_chunk", "NUMBER", "size", "new_data", "NUMBER", "size", "TAG", "buffer_size_limit", "error", "received", "data", "too", "large", "elsif", "multi_event_stream", "NUMBER", "size", "buffer_chunk_limit", "error", "queue", "size", "exceeds", "limit", "end", "current_buffer_chunk", "create_new_chunk", "current_buffer_chunk", "TAG", "buffer_size_limit", "check", "be", "needed", "The", "reason", "why", "the", "check", "be", "disabled", "be", "that", "whole", "new_data", "be", "throw", "away", "even", "if", "each", "records", "be", "small", "NUMBER", "Any", "ideas", "I", "commented", "about", "your", "pull", "req", "at", "NUMBER", "Filtering", "or", "something", "simliar", "features", "will", "be", "useful", "but", "its", "context", "will", "be", "the", "different", "from", "this", "problem", "NUMBER", "To", "solve", "this", "problem", "we", "need", "to", "understand", "following", "problem", "a", "ObjectBufferedOutput", "including", "out_forward", "collects", "multiple", "chunks", "into", "one", "chunk", "for", "optimization", "NUMBER", "Thus", "a", "size", "of", "chunk", "tends", "to", "be", "large", "NUMBER", "b", "Fluentd", "has", "a", "transaction", "mechanism", "that", "make", "it", "possible", "to", "guarantee", "the", "atomicity", "of", "one", "call", "of", "emit", "NUMBER", "It", "s", "enable", "by", "the", "BufferedOutput", "class", "which", "be", "the", "base", "class", "of", "buffered", "output", "plugins", "NUMBER", "c", "Buffer", "plugins", "can", "t", "divide", "a", "chunk", "into", "multiple", "records", "because", "it", "doesn", "t", "know", "boundaries", "of", "records", "NUMBER", "Thuns", "the", "current", "code", "can", "t", "raise", "exception", "nor", "throw", "away", "the", "chunk", "NUMBER", "I", "m", "trying", "to", "implement", "following", "solution", "NUMBER", "Divide", "buffer", "plugins", "emit", "method", "into", "open", "append", "append", "close", "NUMBER", "Change", "BufferedOutput", "format_stream", "method", "as", "following", "ruby", "buffer", "NUMBER", "open", "con", "es", "NUMBER", "each", "time", "record", "begin", "con", "NUMBER", "append", "format", "tag", "time", "record", "rescue", "logging", "end", "NUMBER", "ObjectBufferedOutput", "emit", "fallbacks", "to", "non", "optimized", "routine", "that", "calls", "BufferedOutput", "format_stream", "if", "the", "optimized", "routine", "raise", "BufferChunkLimitError", "NUMBER", "you", "ll", "change", "the", "current", "chunk", "format", "No", "NUMBER", "First", "even", "current", "chunk", "format", "doesn", "t", "include", "any", "specifications", "for", "boundaries", "headers", "or", "bodies", "NUMBER", "BufferedOutput", "plugins", "define", "the", "format", "NUMBER", "See", "following", "pseudo", "code", "of", "Buffer", "open", "ruby", "class", "Connection", "TAG", "buffer_chunk_limit", "raise", "error", "end", "NUMBER", "end", "The", "non", "optimized", "routine", "means", "the", "routine", "which", "processes", "per", "record", "not", "per", "chunk", "doesn", "t", "it", "Almost", "yes", "NUMBER", "The", "non", "optimized", "routine", "appends", "data", "into", "the", "buffer", "per", "record", "regardless", "of", "the", "atomic", "unit", "of", "one", "emit", "NUMBER", "Note", "that", "per", "chunk", "be", "not", "an", "exact", "expression", "because", "the", "word", "chunk", "be", "use", "in", "the", "different", "context", "NUMBER", "Don", "t", "confuse", "the", "buffer", "chunk", "use", "in", "buffer", "plugins", "with", "an", "unit", "of", "emit", "use", "by", "input", "plugins", "NUMBER", "Temporary", "close", "NUMBER", "Maybe", "need", "to", "redesign", "core", "NUMBER", "stat\u3092\u4f7f\u3046\u3079\u304d\u3068\u3053\u308d\u3092lstat\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f", "\u4fee\u6b63\u3057\u307e\u3057\u305f", "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059", "LINK", "Your", "understanding", "be", "right", "NUMBER", "The", "external", "program", "reads", "TSV", "from", "stdin", "and", "writes", "TSV", "to", "stdout", "NUMBER", "I", "update", "the", "document", "a", "little", "LINK", "exec", "filter", "The", "error", "in", "the", "test", "case", "was", "cause", "because", "the", "external", "program", "took", "longer", "time", "than", "expected", "NUMBER", "seconds", "NUMBER", "I", "extend", "the", "sleep", "time", "to", "NUMBER", "seconds", "NUMBER", "Thank", "you", "I", "ve", "merge", "NUMBER", "I", "don", "t", "know", "it", "s", "allow", "by", "specification", "of", "the", "HTTP", "but", "will", "be", "useful", "NUMBER", "Added", "you", "to", "the", "contributors", "list", "Thanks", "Further", "contribution", "be", "welcome", "ae", "NUMBER", "a", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "ba", "NUMBER", "c", "NUMBER", "a", "Could", "you", "give", "me", "your", "configuration", "file", "Or", "this", "configuration", "doesn", "t", "also", "show", "anything", "TAG", "type", "http", "port", "NUMBER", "TAG", "TAG", "type", "stdout", "TAG", "ok", "but", "thanks", "for", "your", "report", "merge", "thx", "I", "ve", "add", "you", "to", "the", "contributors", "list", "NUMBER", "e", "NUMBER", "f", "NUMBER", "fd", "NUMBER", "a", "NUMBER", "d", "NUMBER", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "b", "NUMBER", "ead", "NUMBER", "NUMBER", "thanks", "for", "your", "contribution", "first", "of", "all", "thanks", "for", "your", "kind", "report", "NUMBER", "we", "ll", "be", "looking", "at", "it", "NUMBER", "thx", "frsyuki", "fix", "at", "NUMBER", "cd", "NUMBER", "d", "NUMBER", "b", "NUMBER", "d", "NUMBER", "ffe", "NUMBER", "b", "NUMBER", "f", "NUMBER", "e", "NUMBER", "thx", "frsyuki", "Sorry", "for", "the", "late", "response", "NUMBER", "But", "late", "be", "better", "than", "nothing", "NUMBER", "The", "new", "documentation", "site", "already", "fix", "this", "problem", "LINK", "_exec", "OK", "I", "ve", "merge", "NUMBER", "Thank", "you", "It", "s", "very", "nice", "patch", "NUMBER", "I", "add", "a", "few", "code", "to", "support", "i", "option", "to", "read", "config", "from", "STDIN", "NUMBER", "Thank", "you", "I", "fix", "at", "d", "NUMBER", "dcc", "NUMBER", "dfe", "NUMBER", "f", "NUMBER", "aa", "NUMBER", "a", "NUMBER", "e", "NUMBER", "a", "NUMBER", "d", "NUMBER", "ab", "NUMBER", "b", "NUMBER", "Thank", "you", "I", "ve", "merge", "NUMBER", "It", "s", "very", "fine", "implementation", "and", "certainly", "useful", "for", "developers", "NUMBER", "\u3053\u308c\u306f\u6c17\u4ed8\u3044\u3066\u3044\u307e\u305b\u3093\u3067\u3057\u305f", "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059", "\u30de\u30fc\u30b8\u3057\u307e\u3057\u305f", "Tahnk", "you", "Fixed", "at", "NUMBER", "c", "NUMBER", "c", "NUMBER", "d", "NUMBER", "e", "NUMBER", "f", "NUMBER", "ebf", "NUMBER", "a", "NUMBER", "fda", "NUMBER", "Thank", "you", "NUMBER", "First", "I", "agree", "with", "you", "that", "msgpack_map", "be", "useful", "in", "some", "cases", "NUMBER", "It", "will", "widen", "design", "choice", "NUMBER", "But", "in", "this", "case", "you", "can", "do", "the", "map", "operation", "in", "the", "format", "method", "NUMBER", "Generally", "write", "chunk", "method", "shouldn", "t", "process", "records", "NUMBER", "Instead", "just", "do", "write", "NUMBER", "There", "be", "two", "reasons", "NUMBER", "write", "chunk", "method", "will", "be", "call", "multiple", "times", "when", "it", "be", "retried", "NUMBER", "NUMBER", "format", "method", "can", "raise", "an", "error", "to", "input", "plugin", "and", "client", "applications", "if", "the", "record", "be", "invalid", "NUMBER", "But", "write", "chunk", "method", "can", "t", "NUMBER", "There", "be", "also", "advantage", "NUMBER", "Since", "write", "chunk", "method", "be", "call", "in", "the", "different", "thread", "of", "input", "plugin", "processing", "records", "in", "write", "chunk", "method", "will", "reduce", "latency", "of", "Engine", "NUMBER", "emit", "Second", "it", "s", "difficult", "to", "improve", "performance", "NUMBER", "One", "way", "to", "improve", "performance", "of", "map", "be", "creating", "a", "map", "with", "specified", "size", "and", "reduce", "overhead", "of", "memory", "allocation", "NUMBER", "But", "in", "this", "case", "no", "one", "can", "know", "size", "of", "map", "before", "deserializing", "note", "that", "msgpack_each", "do", "streaming", "deserialization", "NUMBER", "So", "how", "do", "you", "think", "msgpack_map", "be", "still", "useful", "Merged", "Thank", "you", "Should", "be", "fix", "at", "b", "NUMBER", "f", "NUMBER", "a", "NUMBER", "fc", "NUMBER", "ae", "NUMBER", "cc", "NUMBER", "f", "NUMBER", "c", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "e", "NUMBER", "Thank", "you", "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059", "\u30de\u30fc\u30b8\u3057\u307e\u3057\u305f", "\u3053\u308c\u306f\u5fc5\u8981\u3067\u3059\u306d", "\u30b7\u30f3\u30d7\u30eb\u306a\u5909\u66f4\u3067\u3068\u3066\u3082\u52a9\u304b\u308a\u307e\u3059", "Thank", "you", "for", "your", "detailed", "report", "I", "fix", "at", "NUMBER", "be", "NUMBER", "b", "NUMBER", "b", "NUMBER", "afc", "NUMBER", "f", "NUMBER", "d", "NUMBER", "c", "NUMBER", "c", "NUMBER", "a", "NUMBER", "Thank", "you", "fix", "NUMBER", "Thank", "you", "Just", "merge", "NUMBER", "\u30de\u30fc\u30b8\u3057\u307e\u3057\u305f", "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059", "NUMBER", "\u5bfe\u5fdc\u306e\u4e88\u5b9a\u306f\u307e\u3063\u305f\u304f\u306a\u3044\u3067\u3059", "\u3082\u3057\u826f\u304b\u3063\u305f\u3089", "\u3053\u306e\u307e\u307e\u30b3\u30df\u30c3\u30bf\u306b\u306a\u308a\u307e\u305b\u3093\u304b", "\u76f4\u63a5\u30b3\u30df\u30c3\u30c8\u3067\u304d\u305f\u65b9\u304c\u65e9\u3044\u3067\u3057\u3087\u3046", "\u7279\u306b\u30b3\u30a2\u90e8\u5206\u3092\u6539\u5584\u3059\u308b\u4eba\u304c\u4e0d\u8db3\u3057\u3066\u3044\u308b\u306e\u3067", "\u304a\u304a\u304a", "\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059", "Thanks", "Thank", "you", "The", "problem", "also", "affected", "depended", "gems", "jeweler", "rake", "bundle", "etc", "NUMBER", "It", "may", "cause", "problem", "NUMBER", "So", "I", "fix", "the", "install", "process", "at", "NUMBER", "fde", "NUMBER", "d", "NUMBER", "eafee", "NUMBER", "a", "NUMBER", "e", "NUMBER", "fc", "NUMBER", "b", "NUMBER", "c", "NUMBER"], "text_count": [0, 5110, 1396, 845, 477, 71, 704, 1, 4, 550, 409, 1289, 859, 482, 599, 268, 0, 0, 0, 0, 1768, 665, 275, 114, 384, 251, 0, 0, 0, 0, 3871, 2115, 1796, 106, 899, 148, 0, 0, 0, 0, 5035, 14, 2431, 2316, 905, 0, 0, 0, 0, 0, 1078, 682, 622, 311, 454, 181, 445, 0, 0, 0, 3861, 170, 3306, 272, 0, 0, 0, 0, 0, 0, 2681, 215, 1748, 957, 514, 0, 0, 0, 0, 0, 5309, 2595, 450, 1835, 231, 484, 0, 0, 0, 0, 171, 1456, 144, 0, 0, 0, 0, 0, 0, 0, 3908, 840, 2273, 1021, 0, 0, 0, 0, 0, 0, 8328, 14812, 265, 969, 84, 417, 0, 0, 0, 0, 20617, 55, 14897, 238, 2640, 5130]}, {"repo": "fluentd", "type": "nonelite", "title": "", "number of text": 881, "text": "  fluentd depends [uuidtools](https://github.com/sporkmonger/uuidtools), which runs in to error when there is no `ifconfig`. (for instance when running inside a Docker container)\n\nFix is already available in uuidtools for quite some time, [though it has not been released](https://github.com/sporkmonger/uuidtools/issues/24).\n\nRunning fluentd without ifconfig will cause errors like this:\n\n```\nUsage: ip [ OPTIONS ] OBJECT { COMMAND | help }\n       ip [ -force ] -batch filename\nwhere  OBJECT := { link | addr | addrlabel | route | rule | neigh | ntable |\n                   tunnel | tuntap | maddr | mroute | mrule | monitor | xfrm |\n                   netns }\n       OPTIONS := { -V[ersion] | -s[tatistics] | -d[etails] | -r[esolve] |\n                    -f[amily] { inet | inet6 | ipx | dnet | link } |\n                    -l[oops] { maximum-addr-flush-attempts } |\n                    -o[neline] | -t[imestamp] | -b[atch] [filename] |\n                    -rc[vbuf] [size]}\n2014-07-18 04:02:53 +0000 [error]: fluent/supervisor.rb:258:rescue in main_process: unexpected error error=\"undefined method `split' for nil:NilClass\"\n  2014-07-18 04:02:53 +0000 [error]: fluent/supervisor.rb:220:fork: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/uuidtools-2.1.4/lib/uuidtools.rb:611:in `first_mac'\n  2014-07-18 04:02:53 +0000 [error]: fluent/supervisor.rb:220:fork: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/uuidtools-2.1.4/lib/uuidtools.rb:630:in `mac_address'\n  2014-07-18 04:02:53 +0000 [error]: fluent/supervisor.rb:220:fork: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/uuidtools-2.1.4/lib/uuidtools.rb:244:in `block in timestamp_create'\n  2014-07-18 04:02:53 +0000 [error]: fluent/supervisor.rb:220:fork: <internal:prelude>:10:in `synchronize'\n  2014-07-18 04:02:53 +0000 [error]: fluent/supervisor.rb:220:fork: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/uuidtools-2.1.4/lib/uuidtools.rb:234:in `timestamp_create'\n  2014-07-18 04:02:53 +0000 [error]: fluent/supervisor.rb:220:fork: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-mixin-config-placeholders-0.2.4/lib/fluent/mixin/config_placeholders.rb:34:in `uuid_timestamp'\n  2014-07-18 04:02:53 +0000 [error]: fluent/supervisor.rb:220:fork: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-mixin-config-placeholders-0.2.4/lib/fluent/mixin/config_placeholders.rb:77:in `block (2 levels) in configure'\n  2014-07-18 04:02:53 +0000 [error]: fluent/supervisor.rb:220:fork: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-mixin-config-placeholders-0.2.4/lib/fluent/mixin/config_placeholders.rb:38:in `call'\n[snip]\n```\n\nThis is a note to this known problem and a reminder for fluentd developers to import new version of uuidtools when it is released.\n I am experiencing the same issue.\nThe context is I'm trying to run fluentd + fluent-plugin-s3 in Docker. Docker in recent released has deprecated 'ifconfig' and only provide `ip` command in container.\n  Looks good :+1: \n I ran this branch with [fluentd-benchmark/one_forward](https://github.com/fluent/fluentd-benchmark/tree/master/one_forward), and it looked no problem occured \n LGTM\n    In some cases, there is no ':' after the pid, the following log would fail to parse\n\n```\n<77>Jul 11 15:14:01 my.example.com run-parts(/etc/cron.daily)[8231] finished logrotate\n```\n\nresulting in\n\n```\n\"_source\": {\n    \"data\": \"<77>Jul 11 15:14:01 my.example.com run-parts(/etc/cron.daily)[8231] finished logrotate\",\n    \"message\": \"invalid syslog message data=\\\"<77>Jul 11 15:14:01 my.example.com run-parts(/etc/cron.daily)[8231] finished logrotate\\\"\",\n    \"@timestamp\": \"2014-07-11T19:14:01+00:00\"\n  },\n```\n\nThis PR aims to make those ':' after the pid optional\n  Looks good. It should consider to sue ServerEngine::SignalThread.\n  :+1: @sabottenda Does this satisfy your needs?\n LGTM. Thanks!\n I confirmed it worked fine.\n  URI was not initialized causing the following error on run\n\n```\n/opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:127:in `eval_include': uninitialized constant Fluent::Config::V1Parser::URI (NameError)\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:121:in `parse_include'\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:95:in `parse_element'\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:40:in `parse!'\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:30:in `parse'\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config.rb:30:in `parse'\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/supervisor.rb:364:in `apply_system_config'\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/supervisor.rb:110:in `initialize'\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/command/fluentd.rb:160:in `new'\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/command/fluentd.rb:160:in `<top (required)>'\n        from /opt/td-agent/embedded/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from /opt/td-agent/embedded/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/bin/fluentd:6:in `<top (required)>'\n        from /opt/td-agent/embedded/bin/fluentd:23:in `load'\n        from /opt/td-agent/embedded/bin/fluentd:23:in `<top (required)>'\n        from /usr/sbin/td-agent:7:in `load'\n        from /usr/sbin/td-agent:7:in `<main>'\n```\n True, it should work with master now.\n\nQuick question. Do you have any nightly build of your packages ? CI publicly accessible ?\n  Error seems to have resolved!\n  I'm trying td-agent 2.0.3.\nAs a result of running the configtest, it became such a result.\n\n> service td-agent confgtest\n> /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:126:in `eval_include': uninitialized constant Fluent::Config::V1Parser::URI (NameError)\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:121:in`parse_include'\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:95:in `parse_element'\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:40:in`parse!'\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config/v1_parser.rb:30:in `parse'\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/config.rb:30:in`parse'\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/supervisor.rb:364:in `apply_system_config'\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/supervisor.rb:110:in`initialize'\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/command/fluentd.rb:160:in `new'\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/lib/fluent/command/fluentd.rb:160:in`<top (required)>'\n>         from /opt/td-agent/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n>         from /opt/td-agent/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in`require'\n>         from /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.51/bin/fluentd:6:in `<top (required)>'\n>         from /opt/td-agent/embedded/bin/fluentd:23:in`load'\n>         from /opt/td-agent/embedded/bin/fluentd:23:in `<top (required)>'\n>         from /usr/sbin/td-agent:7:in`load'\n>         from /usr/sbin/td-agent:7:in `<main>'\n  I want to use v1 configuration in the test of the plug-in.\n thanks!\n  - By setting current time, caller cannot know \"time\" is from whether parse result or current time\n  - it brings troubles especially in case for filter plugins like fluent-plugin-parser\n- naming problem:\n  - 'time_' prefix seems important for me\n Ah, yes. But it is not expected.\nSo I'll re-fix `time_default_current` as non-conifg_param parameter.\n Re-pushed with fix.\n How about `estimate_current_event`?\n I changed configuration parameter attribute name from `time_default_current` to `estimate_current_event`.\n ouch\n fixed.\n  Installed td-agent using this dmg: http://packages.treasuredata.com/2/macosx/td-agent-2.0.2-0.dmg\n\nThen I ran `fluent-gem install fluent-plugin-forest` after which `fluent-gem list` returns:\n\n```\n...\nfluent-plugin-forest (0.2.4)\n...\n```\n\nBut then `td-agent --dry-run` fails with:\n\n```\n2014-06-26 14:49:27 +0100 [error]: config error file=\"/etc/td-agent/td-agent.conf\" error=\"Unknown output plugin 'forest'. Run 'gem search -rd fluent-plugin' to find plugins\"\n```\n\nWhat's the correct method to install fluentd plugins for this dmg package?\n\nPreviously I was using homebrew package, maintained my Gemfile and everything was working. Doesn't look like this new `td-agent` respects `--gemfile` option because when I create a `Gemfile` with the necessary dependencies it does install them somewhere on startup but fluent/td-agent still doesn't run in the right \"environment\".\n Sorry for posting in the wrong place, thanks for the links. I was using the full paths too and nothing works, will continue where you redirected me. The separation between fluent(d)/td-agent wasn't clear to me.\n\nUpdate. Found this thread - https://groups.google.com/forum/#!msg/fluentd/ekODAaJuS9M/GiHscqhC3Q8J , uninstalled rvm, reinstalled td-agent, installed plugin using full path, finally works. Thanks.\n   I will take a closer look and test today. It might be a good idea to check with @frsyuki why the standard socket library wasn't used initially.\n @repeatedly \n\nI tested this locally on Ubuntu Precise VM.\n- Checked that it can handle both UDP and TCP payloads with csv/regex.\n- I noticed that for TCP + format none, the \"\\n\" at the end is preserved. I suppose this is an expected behavior?\n- Most importantly, I checked that this works with syslog! Hooray! I will write a new solution page once this patch lands.\n I think that using TcpInput directly is obsolete now.\nIf it is correct, we should add warn logs for direct use (maybe both of tcp/udp).\n I see.\n  reported by http://qiita.com/murachi1208/items/39e3ef65ad859e2d9705\n > simply adding @localtime = true before conf['utc'] in configure?\n\nokay, I will fix in this way. \n\nEDIT: Well, no. This is not enough because the parameter must be passed from out_file. \n Ah, understand. \n @repeatedly so, like this?\n @repeatedly Let me make sure. Do you mean that `SetTimeKeyMixin` should also be fixed?\n fixed\n Test failed, but it looks it is not related with this commit ...\n  Self-explanatory.\n  :+1: \nBut fix for DSL is not included. (I'll fix it after merge.)\n  LGTM!\n  in_syslog has two parsing logics:\n1. If a `format` parameter is provided, then it parses the leading <pri> and uses the provided format for the rest of the message.\n2. If no `format` parameter is provided, it uses the default syslog message format, which also starts with &lt;pri&gt;.\n\nThis means that in_syslog barfs if the incoming message does not start with &lt;pri&gt;. This may happen if the user has custom syslog format that does not start with &lt;pri&gt;.\n\nShould in_syslog support this? Or should it be in_forward?\n I agree with you on in_/out_forward. They should be primarily for Fluentd-to-Fluentd.\nI like your second idea better.\n If no one is using `in_tcp` anymore, I personally think the first one is better: I think \"type <protocol_type>\" is always more clear than \"type <some artificial name>\".\n :+1: \n  Add `suppress_parse_error_log` option to in_tail plugin. This is a same feature to fluent-plugin-parser.\n I'm using in_tail with log_level option to ignore parsing errors for now. The option also suppresses other logs such as other warnings and backtraces, so I think it's better to be a new option.\n My use case for this option is:\n- Parsing a part of logs just matched by format, and ignore unmatched lines.\n- Collecting almost all system logs even including debug log. I use Fluentd with -v option in production.\n\nTherefore I want to ignore only this warning.\n\nIf it's not good,  I will use  `format none` and fluent-plugin-parser to accomplish the purpose.\n FYI: https://github.com/fluent/fluentd/issues/98\n Of course I know it's difficult to write perfect regexp. Acutualy I don't want to miss _unintended_ mismatch.\nI had an idea of a regexp format to ignore lines such as `ignore_format`, but it's a little complex feature to in_tail plugin, so this is a simple alternative I think.\n I issued #98 a year ago. My understanding at present is that `format` in `in_tail` is not something to filter logs. I can understand clearly that a log which does not match a regexp is just an exception.\n > My understanding at present is that format in in_tail is not something to filter logs. I can understand clearly that a log which does not match a regexp is just an exception.\n\nI agree with you. It's right design I think.\n\nIn my case, I should use a format which matches whole line like a `none` to parse a part of logs. ex: `/^(?:(?<time>[^ ]+) (?<foo>[^ ]+) (?<bar>[^ ]+)|(?<ignored>.*))$/` But I can parse it, and filter in latter phase without this patch.\n\n@repeatedly I follow your decision. If you decided, please close this request.\n > If more users want this feature, I will re-consider supporting it in in_tail.\n\nOkay, I look forward to another request from other users.\n  Yesterday I changed the rsyslog's template \n$template CFormat,\"%timegenerated% %HOSTNAME% %syslogtag%%msg:::sp-if-no-1st-sp%%msg:::drop-last-lf%\\n\"\nto\n$template CFormat,\"%timegenerated% %HOSTNAME% %syslogseverity-text% %syslogtag%%msg:::sp-if-no-1st-sp%%msg:::drop-last-lf%\\n\".\nAfter that, fluentd stopped taking the logs from this host. No mail notification, not sent any data to elasticsearch.\nSystem: ubuntu 12.04.04, fluentd 0.10.50\n OK.\n  Hi @repeatedly \n\nHow about to support hostname or short hostname placeholder in include directive?\nThis  feature would bring us more flexible configuration management!\n## specification\n- '/etc/td-agent' directory files are same in all servers.\n- to select load file on startup fluentd, it uses hostname\n## use case\n\nIt is a way to switch behavior even though these are same configuration.\n- [use case 1] fetch configuration from provisioning http server on startup.\n- [use case 2] keep all server configuration as static file at '/etc/td-agent' directory from git repository.\n#### sample configuration of use case 1\n\n```\n$ cat /etc/td-agent/td-agent.conf\n\ninclude http://my-provisioning-server:8080/fluent/#{hostname}.conf\n```\n\nOR\n\n```\n$ cat /etc/td-agent/td-agent.rb\n\ninclude {\n  http://my-provisioning-server:8080/fluent/#{Socket.gethostname}.conf\n}\n```\n#### sample configuration of use case 2\n\n```\n$ ls /etc/td-agent/\ntd-agent.conf\nvms3021.conf\nvms3022.conf\nvms3023.conf\nvms3024.conf\n...snip...\n```\n\n```\n$ cat /etc/td-agent/td-agent.conf\n\ninclude /etc/td-agent/#{short_hostname}.conf\n```\n\nOR\n\n```\n$ cat /etc/td-agent/td-agent.rb\n\ninclude {\n  /etc/td-agent/#{Socket.gethostname.split('.')[0]}.conf\n}\n```\n\nThanks.\n I agree to your opinion.\nAt this time, it seems like DSL configuration does not support include directive.\nWould you please tell me any example to load external configuration with DSL?\n\nI have tried with this dsl. but it won't work because include method does not defined in lib/fluent/config/dsl.rb\n\n```\n$ cat /etc/td-agent/td-agent.rb\n\ninclude(\"/etc/td-agent/${ENV['FLUENTD_ROLE']}.conf\")\n```\n It's just because lack of idea/time. External dsl configuration file can be included by `require`.\n Thank you for your comment, @repeatedly, @tagomoris .\nOh, I'll try it soon.\n @tagomoris \nHow do I load configuration with external uri?\n It seems better to emulate `@include` of v1 configuration syntax, because configuration attribute name like `@name` is invalid.\n\nThere may be 2 options:\n- Add instance variable `@include`, and set lambda to include external uri into it. For example in configuration file:\n\n``` ruby\n@include.(\"/path/to/configuration\")\n```\n- Add instance variable `@sys`, `@syntax` or others such like these, and call `include` of this variable:\n\n``` ruby\n@sys.include \"/path/to/configuration\"\n```\n\nLatter one is better for the case which configuration files needs more @ keywords. Do you have any ideas about the number of keywords? @repeatedly \n @repeatedly How is it implemented on ROOT element?\n  When I use in_tail plugin to watch multi files like in_tail_ex, following errors happen on log rotation.\n\n```\n2014-06-19 21:34:53 +0900 [error]: plugin/in_tail.rb:573:rescue in on_notify: bignum too big to convert into `long'\n  2014-06-19 21:34:53 +0900 [error]: plugin/in_tail.rb:324:attach: /home/sabo/work/fluentd/fluentd/lib/fluent/plugin/in_tail.rb:376:in `seek'\n  2014-06-19 21:34:53 +0900 [error]: plugin/in_tail.rb:324:attach: /home/sabo/work/fluentd/fluentd/lib/fluent/plugin/in_tail.rb:376:in `on_rotate'\n```\n\nThe position of PositionFile is updated to 0xffffffffffffffff after log rotation to show it is a unwatched file. If next generated file to be watched has same inode to the old rotated file, the value is used as current position of the new file. This patch fixes the problem by checking the position file has valid position.\n\n**complete process to reproduce  the bug**\n\n```\n<source>\n  type tail\n  format none\n  tag test\n  path ./log/*.log\n  pos_file ./pos\n  refresh_interval 5s\n</source>\n```\n\n```\n# logging\n$ echo 'foo' >> log/foo.log\n# wating a second\n# show position file\n$ cat pos\n./log/foo.log   0000000000000004    002002cb\n\n# remove watching file\n$ rm log/foo.log\n# wating refresh inteval\n# show position file\n$ cat pos \n./log/foo.log   ffffffffffffffff    002002cb\n\n# re-logging (case ERROR on in_tail)\n$ echo 'bar' >> log/foo.log\n```\n\nThis problem also happens when rotated file is compressed immediately. (ex: using `logrotate`)\n If you know a real case, use Upstart and tail the logs with the option. You will find many errors after log rotation.\n\n```\npath /var/log/upstart/*.log\n```\n Sorry for misleading example. It's just a simplified case which triggers same problem. Upstart's log rotation behavior is that it renames a log file with suffix and compresses the file like following.\n`mv foo.log foo.log.1 && gzip foo.log.1`\nThis behavior seems just removing file from Fluentd's perspective.\n\n> You should not use '*' with log rotation because it may cause the log duplication. In such case, you should separate in_tail plugin configuration.\n\nI may have wrong idea of this note in document, this means Fluentd try to read a rotated file from beginning if in_tail's format also matches the rotated file name, doesn't it?\n > So, Upstart case is enough with fixed path foo.log path config?\n\nYes. But it can simplify a configuration to tail all logs generated by Upstart.\n\n> > in_tail's format\n> \n> format? path?\n\nIt's path, sorry.\n\n> It depends on the configuration. If read_from_head is true, in_tail reads from the beginning when detects new file. When path contains *, in_tail starts to watch rotated file as new file and almost users use read_from_head true with *.\n\nI see. So if I can write an accurate configuration which does not match rotated files, there are no reasons to prohibit `*` path.\n\n> in_tail can't track log rotation mechanizm correctly with _, you mentioned compressed case, so we write You should not use '_' with log rotation in the documentation.\n\nAre there other documentations about a compressed case?\n ping :)\n  DRb is unsafe by default.\nDefault `fluentd.conf` should be listen on localhost only like default td-agent.conf.\n\nsee security section of DRb document: http://docs.ruby-lang.org/en/2.1.0/DRb.html#module-DRb-label-Security (English)\nand my blog post (eval from remote): http://blog.n-z.jp/blog/2014-06-13-fluentd-drb.html (Japanese)\n  :+1: \n\nOne more item should be added of patch section.\n- Run all tests before send pull request by `bundle exec rake test`\n :+1: \n > Here is the guidelines!\n\nHere are the guidelines!\n  I've seen a couple of Fluentd write-ups that hand-coded Apache error log regexes. Perhaps it is time to support it out of the box like `format apache_error`.\n  Changed TimeParser to not truncate milliseconds.\nSee discussion here:\nhttps://groups.google.com/forum/#!msg/fluentd/BIYUtwICFYY/KA_tkTkgJP0J\n\nNote! This will probably break things, and is completely untested from my side...\n  3 (parser.parse accepts block) seems good idea for me, but I think we should not break old API.\nIt seems better that doing `yield` if `block_given?` is true,  and returns `time, record` if false.\n I cannot understand what you meant.\nWhy did you fix built-in plugins which uses `TextParser#parse` in this pull-req?\n Ah, I found the reason from code, it seems for multi events parsing... (but `in_syslog` is needed to support multi events?)\n  `should` syntax is deprecated in RSpec 3. Use expect syntax in order to suppress warnings.\n  `format multiline` in in_tail plugin without `format_firstline` option does not work. \nIn multiline mode, record is emitted only when input line is matched to regex, but the input line passed to regex is always single line, so it never match without `format_firstline` option.\nInput line is handled [here](https://github.com/fluent/fluentd/blob/06d176bd00f345d227a7f34d0aa86bd874cf3dc7/lib/fluent/plugin/in_tail.rb#L260-L271) and regex is set [here](https://github.com/fluent/fluentd/blob/06d176bd00f345d227a7f34d0aa86bd874cf3dc7/lib/fluent/parser.rb#L388).\n\nI don't know `format_firstline` is required.  What case the option is better for?\n I used this configuration:\n\n```\n<source>\n  type tail\n  path ./multi.txt\n  pos_file ./multi.pos\n  format multiline\n  format1 /(?<var1>foo)\\n/\n  format2 /(?<var2>bar)\\n/\n  format3 /(?<var3>baz)/\n  tag foo\n</source>\n```\n\nand then, stored some logs:\n\n```\n$ echo foo >> multi.txt; echo bar >> multi.txt; echo baz >> multi.txt;\n$ echo foo >> multi.txt; echo bar >> multi.txt; echo baz >> multi.txt;\n```\n\nand received warnings from fluentd:\n\n```\n2014-06-14 19:58:27 +0900 [warn]: plugin/in_tail.rb:267:block in parse_multilines: got incomplete line before first line from ./multi.txt: nil\n2014-06-14 19:58:27 +0900 [warn]: plugin/in_tail.rb:267:block in parse_multilines: got incomplete line before first line from ./multi.txt: nil\n2014-06-14 19:58:27 +0900 [warn]: plugin/in_tail.rb:267:block in parse_multilines: got incomplete line before first line from ./multi.txt: nil\n2014-06-14 20:00:12 +0900 [warn]: plugin/in_tail.rb:267:block in parse_multilines: got incomplete line before first line from ./multi.txt: nil\n2014-06-14 20:00:12 +0900 [warn]: plugin/in_tail.rb:267:block in parse_multilines: got incomplete line before first line from ./multi.txt: nil\n2014-06-14 20:00:12 +0900 [warn]: plugin/in_tail.rb:267:block in parse_multilines: got incomplete line before first line from ./multi.txt: nil\n```\n\nThis case works with this patch.\n Sorry for sending pull request without test. I add a test case for that.\n  Use next major version of RSpec. This change fixes deprecated sysntax reported as error.\n`should` syntax is also deprecated, use `expect` syntax instead. If you want to use `expect` syntax from now, I will also fix it.\n  :+1:  for both this patch and `--shutdown-timeout SECONDS`\n This change itself looks ok. Good improvement. But many output plugins emits records because Fluentd currently doesn't have filter plugins. So the change doesn't always fix the issue.\n\nShutdown timeout sounds very good idea.\nRegarding configuration, I think later or sooner fluentd.conf needs to have top-level configuration parameters for Fluentd core. Setting parameters in cmdline (meaning in different configuration file in CentOS/Debian) needs more work to configure Fluentd correctly.\n  What `u1 & u1` means?\n Ruby \u8aad\u3081\u306a\u3044\u306e\u3067\u3001\u3053\u308c\u306a\u3093\u304b\u306e\u30a4\u30c7\u30a3\u30aa\u30e0\u3060\u3063\u305f\u3089\u3054\u3081\u3093\u306a\u3055\u3044\u3002\n  I run the build process documented [here](http://docs.fluentd.org/articles/install-from-source).\nBut I can't install.\n\n```\n$ ruby -v\nruby 2.0.0p451 (2014-02-24 revision 45167) [universal.x86_64-darwin13]\n$ git clone https://github.com/fluent/fluentd.git\nCloning into 'fluentd'...\nremote: Reusing existing pack: 7834, done.\nremote: Total 7834 (delta 0), reused 0 (delta 0)\nReceiving objects: 100% (7834/7834), 5.99 MiB | 1.15 MiB/s, done.\nResolving deltas: 100% (3962/3962), done.\nChecking connectivity... done.\n$ cd fluentd/\n$ rake build\nrake aborted!\ncannot load such file -- bundler/gem_tasks\n/Users/inada-n/work/fluentd/Rakefile:2:in `<top (required)>'\n(See full trace by running task with --trace)\n$ rake build --trace\nrake aborted!\ncannot load such file -- bundler/gem_tasks\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n/Users/inada-n/work/fluentd/Rakefile:2:in `<top (required)>'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rake/rake_module.rb:25:in `load'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rake/rake_module.rb:25:in `load_rakefile'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rake/application.rb:604:in `raw_load_rakefile'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rake/application.rb:89:in `block in load_rakefile'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rake/application.rb:160:in `standard_exception_handling'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rake/application.rb:88:in `load_rakefile'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rake/application.rb:72:in `block in run'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rake/application.rb:160:in `standard_exception_handling'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rake/application.rb:70:in `run'\n/usr/bin/rake:37:in `<main>'\n```\n Danke!\n  It happens particularly in the case using many kinds of tags, or in the case `try_flush`(`enqueue_buffer`) called frequently.\n\n``` ruby\nrequire 'fluent/load'\nrequire 'logger'\nlogger = Logger.new(STDOUT)\n$log = Fluent::Log.new(logger.instance_variable_get(:@logdev).dev, logger.level)\nrequire 'fluent/plugin/buf_memory'\n\nbuf = Fluent::MemoryBuffer.new\nbuf.start\n\n# fill the queue with chunk\nbuf.buffer_queue_limit.times do\n  chunk = buf.new_chunk('hoge')\n  buf.enqueue(chunk)\n  buf.instance_variable_get(:@queue) << chunk\nend\n\n# queue size reaches limit\np buf.queue_size # => 64\n\n# new events are emitted (with tag which is not included in @map.keys)\n10000.times do |i|\n  tag = i.to_s\n  data = {value: i}.to_msgpack\n  chain = Fluent::NullOutputChain.instance\n  buf.emit(tag, data, chain)\nend\n\n# same as Output#enqueue_buffer\nbuf.keys.each {|key| buf.push(key) }\n\n# queue size exceeds limit\np buf.queue_size # => 10064\n```\n\nI wonder why is the queue size not checked in `BasicBuffer#push`.\nhttps://github.com/fluent/fluentd/blob/v0.10.49/lib/fluent/buffer.rb#L244\n\nOr may it be necessary to check the queue size at the beginning of `BasicBuffer#emit` ? (not after checking `storable?`)\nhttps://github.com/fluent/fluentd/blob/v0.10.49/lib/fluent/buffer.rb#L165-L183\n Thanks for reply.\nI worried about memory exhausting by growth of `@map` and queue size.\n(Particularly, in the case that forwarding is not working well by a high load and so on.)\nHowever, I thought over that it may be what should/can be avoided by the tuning of the parameter.\n  Sorry for the delay -- I tested this today and it works for me as well. Thanks for the quick fix!\n  In supervisor.rb the \"id -g\" command is used several times like this:\n\n```\n        chgid = @chgroup ? `id -g #{@chgroup}`.to_i : nil\n```\n\nThe intent seems to be to translate the group name (as specified in the --group command line flag) to a numeric GID. However, the \"id -g\" command doesn't actually do this; the argument is always a **username** and the \"-g\" flag prints that user's default group. See \"id --help\":\n\n```\nUsage: id [OPTION]... [USERNAME]\nPrint user and group information for the specified USERNAME,\nor (when USERNAME omitted) for the current user.\n\n[...]\n  -g, --group     print only the effective group ID\n[...]\n```\n\nTherefore this wrong in one of two ways:\n- if the name of the group isn't also a valid user, it fails and causes fluentd not to start\n- if the name of the group **is** a valid user, it silently prints the wrong GID if the user's default group is not the same as the GID of the group with the same name\n Hmm good catch...\n @repeatedly yup that seems like it would work. My test case was trying to set --group=adm on a Debian system; without a fix fluentd prints the mysterious message\n\n```\nid: adm: No such user\n```\n\nand exits.\n  File::Stat.new(path) raises an Errno::ENOENT exception if a file doesn't exist. The existing behavior if read_from_head isn't enabled is to not crash and simply not tail the file. This patch extends that behavior to the case where read_from_head is enabled.\n Test added. I'm sorry for not including it initially.\n\n`read_from_head` does not only upload existing logs in a file, it also causes in_tail to tail all logs added to the file while fluentd is running.\n\nIt seems useful to enable `read_from_head` in many cases so that it doesn't matter if fluentd starts before or after the application whose logs you want to tail, or so that you can have a common configuration file with many paths listed, some of which are useful on some of your VMs and some of which are useful on others.\n\nFor example, I may want to collect apache, memcache, and syslog on one set of VMs, and memcache, mysql, and syslog on another set. It's easiest for me to just use the same config file for both sets of VMs, and enabling `read_from_head` makes it so that installation order doesn't matter.\n Done. Users still won't be warned if a file specified without read_from_head doesn't exist, but they will be warned if they have read_from_head enabled.\n  This is per https://github.com/fluent/fluentd/issues/335\n For other formats, I don't think it should be handled by in_http itself but by the (nascent) `parser_*.rb` familiy of plugins. If someone wanted to parse\n\n```\njson1\\n\njson2\\n\n```\n\nThen, that person should write a parser plugin that can be used outside of HTTP (Although, it might be tricky to differentiate between that and `format json`).\n\nAlso, if you are writing a logger, I think it is easier to put everything in an array and call JSON/MessagePack serialization methods than \"formatting\" for in_http with line feeds.\n @repeatedly \n\n> So if we spread Fluentd on such environment, in_http should support batch mode for other formats.\n\nI agree. But I am not 100% sure if it should be specific to in_http.\n\nIdeally, we want a meta parser that can batch-parse repeated units of the same format. In\n\n```\njson1\\n\njson2\\n\njson3\\n\n...\n```\n\njsonN are the repeated formats with \"\\n\" as the \"delimiter\" for the formats. Then, there should be a natural way to extend JSONParser so that it can handle this.\n\nI am not sure what the interface should look like, though.\n  It looks good, but it seems better that TextFormatter module and each formatter implementation classes are in separated files.\n I thinks that formatter implementations in separated files will be a good example for plugin developers.\n `fluent/formatter/json` seems better for me.\n  I found a problem that I've used out_file plugin and flush_interval parameter together in fluentd (0.10.48)\n\n[1]. configure fluentd\n\n```\n$ cat fluentd.conf\n<source>\n  type forward\n</source>\n\n<match test>\n  type file\n  path /tmp/bug\n  symlink_path /tmp/bug.json\n  flush_interval 5s\n</match>\n```\n\n[2]. starting up fluentd\n\n```\n$ fluentd -c fluentd.conf\n```\n\n[3]. emit message\n\n```\necho '{\"int\":111,\"time\":\"2014/05/30 15:56:22\",\"foo\":\"bar22\"}' | fluent-cat test\n```\n\nI could see the stdout message before flushed.\n\n```\n2014-05-30 15:56:22 +0900 test: {\"int\":111,\"foo\":\"bar22\"}\n```\n\n[4]. symlink has missing path\n\nI have checked `bug.20140530.b4fa98c814254a821` was existed before flushed.\n\n```\n$ ls -alh|grep bug\n-rw-r--r--   1 y-ken  y-ken    85B  5 30 16:13 bug.20140530_0.log\nlrwxr-xr-x   1 y-ken  y-ken    80B  5 30 16:13 bug.json -> /tmp/bug.20140530.b4fa98c814254a821\n```\n Looks same problem as #201 .\n Yes, I think this is same or similar problem as #201.\n`symlink_path`'s symlink points a `buffer file` created by _buf_file_, not _out_file_.\n\n```\n bug.json -> /tmp/bug.20140530.b4fa98c814254a821\n```\n\nThe `bug.json` points the last buffer file. No new buffer file is created, so the symlink keeps pointing last one.\n I see. But I feel something wrong behavior which might be my misunderstand. I'll check it later.\n Hi @repeatedly \n\nThis issue has caused by using the default buffer_type behavior.\nThe default buffer_type of out_file is 'memory', then it would not create buffer symlink.\nIt it the reason why I felt something wrong.\n\nSo, I suggest to raise Fluent::ConfigError when 'buffer_type memory' and 'symlink_path' defined together in out_file.\n I'm sorry. It's no problem at all.\n  This is not a feature request per se, but more like a discussion for supporting the ability to POST multiple records.\n\nCurrently, I believe in_http can only accept HTTP requests with a single Fluentd event. Hence, there is a one to one map between HTTP request and Fluentd event.\n\nWould it be more scalable to allow the sender to batch multiple requests into a single HTTP POST? I imagine something like this\n\n```\ncurl -X post fluentd_host.com/foo/bar -d \"[{\\\"name\\\":\"first record\"}, {\\\"name\\\":\\\"second record\\\"}]\"\n```\n\nHappy to hear what other people think.\n This would be nice feature. I've heard some people wants this.\n @repeatedly Any thoughts?\n I am thinking something like this: https://github.com/kiyoto/fluentd/commit/282c4f8929ed076e138ca04c5dcae686b6e8dffe\n @repeatedly cool. i will add tests and send a PR\n I think https://github.com/fluent/fluentd/pull/338 is on its way to getting merged. Closing this discussion thread.\n  Tests should check the written file content that it can be uncompressed successfully by ruby-code and 'gunzip' command.\n What do you mean by non portable?\n option name options: `append false`, `sparse_file true`..\n We already use sed and grep with non standard options in test_out_exec_filter.rb. \nDo we want to fix it too?\n What about 'numbering true|false' for the option name?\n `path_numbering` sounds fine for me.\n  :+1: In particular, this would encourage people to use POST over GET (I don't think it's semantically correct to use in_http with GET)\n  temporarily failed to flush the buffer. error_class=\"Mongo::OperationFailure\" error=\"11000: E11000 duplicate key error index:\n\nThe issues impact fluentd normal work?\n   I think split files should be custom, should not to do default\nother log collector ,for example logstash all to do this way\n I think that the default behavior should NOT be changed for `out_file`. It breaks users' environments and batch jobs.\n\nFor future implementations, I'll note about some point of view:\n- Fluentd's file buffers are actually files in file systems, and rename at flushing provides great performance enhancement\n  - This feature requires separated files, not appending.\n  - Current `out_file` does NOT move, does write once more\n- Appending may bring some confusing behavior on multi-process / multi-thread environment\n  - This is not so big problem for Fluentd because FileBufferPlugin brings more huge problems for multi-process configurations (when same buffer path specified)\n\nAs a fluentd's user, I want to append logs to existing files on my disk, so I'd released `fluent-plugin-file-alternative`, that appends log data int existing files (for non-compressed files only).\n I am also using file-alternetive to append logs. \n I don't know how many users use fluent-plugin-file-alternative :-(\n yes\uff0cforget close method\n\nhttps://github.com/loveshell/fluent-plugin-file-alternative/commit/39c2b14e3802bcc4db1905424d058aafa6f1f25e\n  `fluent-debug` can't handle invalid option correctory.\n\n```\n$ ./bin/fluent-debug -p\n/Users/uu59/works/td/fluentd/lib/fluent/command/debug.rb:47:in `rescue in <top (required)>': undefined method `usage' for main:Object (NoMethodError)\n        from /Users/uu59/works/td/fluentd/lib/fluent/command/debug.rb:40:in `<top (required)>'\n        from /Users/uu59/.rbenv/versions/2.1.0/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from /Users/uu59/.rbenv/versions/2.1.0/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from ./bin/fluent-debug:6:in `<main>'\n```\n\n\u2193 fixed\n\n```\n$ ./bin/fluent-debug -p\nUsage: fluent-debug [options]\n    -h, --host HOST                  fluent host (default: 127.0.0.1)\n    -p, --port PORT                  debug_agent tcp port (default: 24230)\n    -u, --unix PATH                  use unix socket instead of tcp\nerror: missing argument: -p\n```\n  hi,i use fluentd to collect my weblog and write file\n\n```\n<source>\ntype forward\n</source>\n<match weblog>\n  type file\n  path /tmp/a\n</match>\n```\n\n i want log write to /tmp/a \nbut it generate some log \n\n```\na.20140526_0.log\na.20140526_1.log\na.20140526_2.log\n```\n\ni only want to a.20140526.log,it's not merge\n not buffer limit, my mean is out file.\n if only set buffer_chunk_limit ,and out file is not flush.and i can't get my log on time\n so it can't compression\n I submitted a patch for this problem @cloud-sec https://github.com/fluent/fluentd/pull/330 \n    Hello,\nI've already posted this info in Fluentd Google Group\nhttps://groups.google.com/forum/?hl=en#!topic/fluentd/z8XvkiSgogk\nI think this is a bug, so I post it here too.\n\nI'm currently testing Fluentd + elb_log  plugin to import logs from Amazon S3 bucket for Amazon ELB into Elasticsearch.  I have configured the whole chain but finally noticed that significant portion of log records (>10%) get lost in transition. I found some relevant error messages in the Elastic's log then decided to disconnect  Elasticsearch in order to debug the rest of chain.\n\nHere are some of my system and config details:\nroot@logserver:/var/log/td-agent# dpkg -l | grep td-agent ; cat /etc/issue\nii  td-agent                         1.1.19-1                          A data collector agent for Treasure Data\nUbuntu 12.04.4 LTS\n\n/etc/td-agent/td-agent.conf :\n<source>\n  type elb_log\n  access_key_id     XXXXXXXXXXXXXX\n  secret_access_key   21233wertzzzzzzzzzzz999999aaaaa\n  s3_endpoint       s3.amazonaws.com\n  s3_bucketname     XXXXXXXXXXXX-logs\n  s3_prefix         logs\n  timestamp_file    /tmp/elb_last_at.dat\n  refresh_interval  300\n</source>\n\n<match elb.**>\n# type elasticsearch\n# type_name access_log\n# index_name elb_idx\n# logstash_format true\n# logstash_prefix adserving\n# include_tag_key true\n# tag_key @log_name\n\n  type copy\n  <store>\n    type file\n    path /var/log/td-agent/td-elb-out.log\n  </store>\n</match>\n\nWhen I check through\nroot@logserver:/var/log/td-agent# pwd ; ls -al td-elb*\n/var/log/td-agent\n-rw-r--r-- 1 td-agent td-agent 7813678 May 22 19:55 td-elb-out.log.20140522.b4fa0155c8f3d25c7\n  -- I see some ELB log JSON records have \"time\" field broken - which confuses the Elasticsearch. i.e. :\n\n2014-05-22T18:32:28+00:00       elb.access      {\"account_id\":\"009090909090\",\"region\":\"us-east-1\",\"logfile_date\":\"2014/05/22\",\"logfile_elb_name\":\"qqq-www-eeee-com\",\"elb_ip_address\":\"11.22.33.44\",\"logfile_hash\":\"1z2rty3a\",\"time\":\"-22T17:56:01.491164+0000\",\"elb\":\"qqq-www-eeee-com\",\"client\":\"37.111.222.111\",\"client_port\":\"36399\",\"backend\":\"10.111.111.222\",\"backend_port\":\"80\",\"request_processing_time\":9.3e-05,\"backend_processing_time\":0.002196,\"response_processing_time\":5.2e-05,\"elb_status_code\":\"302\",\"backend_status_code\":\"302\",\"received_bytes\":0,\"sent_bytes\":492,\"request_method\":\"GET\",\"request_uri\":\"http://aaaa.abbbbbb.com:80/offer?prod=91&ref=4989201&q=%5BBindassmp3.com%5D+-+55+Hum+Bhool+Gaye+Har+Baat++-+%5BBindassmp3.com%5D\",\"request_protocol\":\"HTTP/1.1\"}\n\n2014-05-22T18:32:28+00:00       elb.access      {\"account_id\":\"009090909090\",\"region\":\"us-east-1\",\"logfile_date\":\"2014/05/22\",\"logfile_elb_name\":\"qqq-www-eeee-com\",\"elb_ip_address\":\"11.22.33.44\",\"logfile_hash\":\"1z2rty3a\",\"time\":\"+0000\",\"elb\":\"qqq-www-eeee-com\",\"client\":\"22.33.44.11\",\"client_port\":\"50023\",\"backend\":\"10.111.111.222\",\"backend_port\":\"80\",\"request_processing_time\":6.5e-05,\"backend_processing_time\":0.001902,\"response_processing_time\":4.8e-05,\"elb_status_code\":\"200\",\"backend_status_code\":\"200\",\"received_bytes\":0,\"sent_bytes\":432,\"request_method\":\"GET\",\"request_uri\":\"http://aaaa.abbbbbb.com:80/smart_ad/display?ref=4949941&q=KEYWORD&smart_ad_id=1472\",\"request_protocol\":\"HTTP/1.1\"}\n\n2014-05-22T18:32:28+00:00       elb.access      {\"account_id\":\"009090909090\",\"region\":\"us-east-1\",\"logfile_date\":\"2014/05/22\",\"logfile_elb_name\":\"qqq-www-eeee-com\",\"elb_ip_address\":\"11.22.33.44\",\"logfile_hash\":\"1z2rty3a\",\"time\":\".087759+0000\",\"elb\":\"qqq-www-eeee-com\",\"client\":\"11.122.11.11\",\"client_port\":\"59129\",\"backend\":\"10.111.111.222\",\"backend_port\":\"80\",\"request_processing_time\":7.6e-05,\"backend_processing_time\":0.002078,\"response_processing_time\":4.7e-05,\"elb_status_code\":\"200\",\"backend_status_code\":\"200\",\"received_bytes\":0,\"sent_bytes\":394,\"request_method\":\"GET\",\"request_uri\":\"http://aaaa.abbbbbb.com:80/smart_ad/display?ref=4972981&q=KEYWORD&smart_ad_id=1781\",\"request_protocol\":\"HTTP/1.1\"}\n\n   --  as you see, the \"time\" field from time to time receives a random part of the time stamp of original ELB log entry which always looks like \"2014-05-23T11:40:30.413799Z\".  Then I went to 'elb-log' plugin code to inspect it:     https://github.com/shinsaka/fluent-plugin-elb-log/blob/master/lib/fluent/plugin/in_elb_log.rb\nI'm SysAdmin with some scripting experience, not Ruby programmer. Still, the plugin code doesn't seem to look complicated, it is pretty clean and well written, so I've checked some relevant parts of it:\nline 5:\n ACCESSLOG_REGEXP = /^(?<time>.+?) (?<elb>.+?) (?<client>.+):(?<client_port>.+) (?<backend>.+):(?<backend_port>.+) (?<request_processing_time>.+?) (?<backend_processing_time>.+?) (?<response_processing_time>.+?) (?<elb_status_code>.+?) (?<backend_status_code>.+?) (?<received_bytes>.+?) (?<sent_bytes>.+?) \\\"(?<request_method>.+?) (?<request_uri>.+?) (?<request_protocol>.+?)\\\"$/\n- against the original ELB log entry the one which resulted the broken \"time\" field output.  The RegExp seem to work fine.\n  Here is line 108 (responsible for modification):\n  \n  ```\n  record = {\n    time: line_match[:time].gsub(/Z/, \"+0000\"),\n  ```\n  \n  -- it doesn't seem to represent any problem.   Then the record gets sent to Fluentd (line 126):\n  \n  Fluent::Engine.emit(\"elb.access\", Fluent::Engine.now, record_common.merge(record))\n  \n  -- from this point I'm unable to trace what's happening next.   \n\nI would highly appreciate if you could shed more light on the mentioned problem. Please fix this bug or help me to find a solution.\n\n Looking for your feedback.\n\nThank you in advance.\n Hi,\nyes, I did, to investigate I was using the following:\n <match elb.**>\n   type copy\n   <store>\n     type file\n     path /var/log/td-agent/td-elb-out.log\n   </store>\n </match>\n Today I have also compared the size of the above mentioned 'td-elb-out.log' output file against corresponding Amazon ELB text log files and It looks like over 90% of the input data was magically lost in processing.  I'll also contact the 'elb-log' plugin author with this problem.\nThanks for feedback.\n sorry, I don't know why does it format such a weird way here on GitHub, don't know how to fix/bypass this problem.\n  `@` syntax looks nice for me, but I do not think supporting `include` in three ways (`include`, and `<include xxx>`, and `@include`) is good idea. Should remove `<include xxx>` syntax?\n Do we really want to keep backward compatibility for `include`?\nOnly `@include` is enough to me. The compatibility is already broken and I want to have simple and clean syntax for v1.\n :+1: for both fo `@include` and `include` (without `<include>`)\n OK. +1 for @include and include with warning.\n  OS:Centos 6.3\nversion:td-agent-1.1.19-0.x86_64\nwrite normal directory is ok,but when i write to glusterfs directory found error\n\nconfigure:\n\n```\n<source>\ntype forward\n</source>\n<match apache.access>\n  type file\n  path /glusterfs/newlog_system/weblog\n  time_slice_format %Y%m%d\n  time_slice_wait 10m\n  time_format %Y-%m-%d %H:%M:%S\n  compress gzip\n</match>\n```\n\n```\n2014-05-23 12:06:51 +0800 [error]: forward error error=#<Errno::EINVAL: Invalid argument - (/glusterfs/newlog_system/weblog.20140523.b4fa095b81b8ba875, /glusterfs/newlog_system/weblog.20140523.q4fa095b81b8ba875)> error_class=Errno::EINVAL\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/plugin/buf_file.rb:71:in `rename'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/plugin/buf_file.rb:71:in `mv'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/plugin/buf_file.rb:176:in `enqueue'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/buffer.rb:201:in `block (2 levels) in emit'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/buffer.rb:200:in `block in emit'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/buffer.rb:168:in `emit'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/output.rb:528:in `block in emit'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/event.rb:166:in `feed_each'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/event.rb:166:in `each'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/output.rb:518:in `emit'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/match.rb:36:in `emit'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/engine.rb:152:in `emit_stream'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/plugin/in_forward.rb:125:in `on_message'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/plugin/in_forward.rb:193:in `feed_each'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/plugin/in_forward.rb:193:in `on_read_msgpack'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/io.rb:108:in `on_readable'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/io.rb:170:in `on_readable'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run_once'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run'\n  2014-05-23 12:06:51 +0800 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/plugin/in_forward.rb:85:in `run'\n^C\n```\n SOGA\uff0cI will try to slove it\n Historically, GlusterFS sometimes cannot get along with Apache.\nAt first I would like to know is your construction. Which version of GlusterFS and Apache are you using?\nAnd the 2nd, could you tell me your purpose of using GlusterFS, storing only access.log or storing not only access.log but also your web contents?\n first:\n1.this is a fluentd server reviced agent weblog. and writed to /glusterfs/newlog_system/ directory.\n2.and use glusterfs version 3.4.2\n2nd: not only access.log.\n\nnewlog_system is empty\nkugou_data and wdj_data is not empty\n\n```\n[root@localhost ~]# df -h\nFilesystem            Size  Used Avail Use% Mounted on\n/dev/sda2              34G  5.3G   27G  17% /\ntmpfs                  32G     0   32G   0% /dev/shm\n/dev/sda1             194M   55M  130M  30% /boot\n/dev/sda4             241G  125M  241G   1% /cache/logs\n/dev/mapper/flashcache_dev_md0\n                       22T  3.9T   18T  18% /cache/cache\n1.2.2.1:/storage\n                      153T  1.4G  153T   1% /glusterfs\n\n[root@loaclhost ~]# ls /glusterfs/\nkugou_data  newlog_system  wdj_data\n[root@localhost ~]# ls /glusterfs/newlog_system/\n```\n Got it.\nI concern that GlusterFS FUSE cannot handle the system calls of fluentd buffered output, such as mmap (I don't know if fluentd uses mmap or not). I will try it on my lab. Wait a while.\n It looks File.rename throws Errno::EINVAL. Could you try to rename via command line?\n\n% ruby -e 'File.rename(\"/glusterfs/newlog_system/weblog.20140523.b4fa095b81b8ba875\", \"/glusterfs/newlog_system/weblog.20140523.q4fa095b81b8ba875\")'\n i rm it ,now try two count.\nconfigure is same so on\n\n```\n[root@localhost ~]# ls -la /glusterfs/newlog_system/\ntotal 13724\ndrwxr-xr-x 2 td-agent td-agent     465 May 23  2014 .\ndrwxr-xr-x 6 root     root      172032 May 23 11:43 ..\n-rw-rw-rw- 1 td-agent td-agent  961686 May 23 15:53 weblog.20140523_0.log.gz\n-rw-rw-rw- 1 td-agent td-agent  969746 May 23 15:54 weblog.20140523_1.log.gz\n-rw-rw-rw- 1 td-agent td-agent  943360 May 23  2014 weblog.20140523_2.log.gz\n-rw-r--r-- 1 td-agent td-agent 2616599 May 23  2014 weblog.20140523.b4fa0c8cf4806133f\n-rw-r--r-- 1 td-agent td-agent 8388432 May 23  2014 weblog.20140523.q4fa0c8c9d9541f62\n```\n\n```\n2014-05-23 15:55:26 +0800 [warn]: temporarily failed to flush the buffer. next_retry=2014-05-23 15:55:33 +0800 error_class=\"Errno::ENOENT\" error=\"No such file or directory - /glusterfs/newlog_system/weblog.20140523_3.log.gz\" instance=70329739866780\n```\n I'm testing frequent GET requests but I cannot see the error log. It does not seem that this problem always arises.\nI will wait for getting the logs of td-agent for a while.\n\nAs @yyamano said, your td-agent seemed to fail rename /glusterfs/newlog_system/weblog.20140523.b4fa095b81b8ba875 . I guess it was because the file was not written on the GlusterFS volume completely since it handles files asynchronously.\nIf you turn off the feature of GlusterFS, try following settings.\n\n```\n# gluster volume set <volume name> performance.write-behind off\n# gluster volume set <volume name> performance.open-behind off\n# gluster volume set <volume name> performance.strict-write-ordering on\n# gluster volume set <volume name> performance.lazy-open no\n```\n\nSee `gluster volume set help` if you'd like to see other modifications.\n I could not reproduce it in a day under frequent http GET requests (1K requests in a sec, td-agent creates archives of access_log every 8 minute) and heavy background loads (8KiB files are created and read continuously) with cheap machines (BayTrail-D and HDD, not SSD).\nMy GlusterFS is 3.5.0, not 3.4.x, with no configulation so I recommend 3.5.0 if you reproduce the same problem.\nI will keep my test as long as I can.\n I'm a bit intersted in this issue. Can you share more about the setup of Gluster, its size and in case it is using replicas, how many of them? How many Gluster nodes are you using and how many records per seconds are being written to the files?\nAfter having the error, does eventually recover after backing off and retrying or do you fix it manually?\nThanks in advance!\n I continue to look at on Monday to the company\n @keithseahus \nmodify configure\n\n```\n# gluster volume set <volume name> performance.write-behind off\n# gluster volume set <volume name> performance.open-behind off\n# gluster volume set <volume name> performance.strict-write-ordering on\n# gluster volume set <volume name> performance.lazy-open no\n```\n\ntoday\uff0crestart fluentd write to glusterfs\uff0cerror is later\u3002\n\n```\n  <source>\n    type forward\n  </source>\n  <match apache.access>\n    type file\n    path /glusterfs/newlog_system/weblog\n    time_slice_format %Y%m%d\n    time_slice_wait 10m\n    time_format %Y-%m-%d %H:%M:%S\n    compress gzip\n    buffer_type file\n    buffer_path /var/log/td-agent/myapp.*.buffer\n  </match>\n</ROOT>\n2014-05-25 08:48:31 +0800 [info]: adding source type=\"forward\"\n2014-05-25 08:48:31 +0800 [info]: adding match pattern=\"apache.access\" type=\"file\"\n2014-05-25 08:48:31 +0800 [info]: listening fluent socket on 0.0.0.0:24224\n2014-05-25 09:05:02 +0800 [warn]: temporarily failed to flush the buffer. next_retry=2014-05-25 09:05:02 +0800 error_class=\"Errno::ENOENT\" error=\"No such file or directory - /glusterfs/newlog_system/weblog.20140525_18.log.gz\" instance=70170728002380\n  2014-05-25 09:05:02 +0800 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/plugin/out_file.rb:98:in `open'\n  2014-05-25 09:05:02 +0800 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/plugin/out_file.rb:98:in `write'\n  2014-05-25 09:05:02 +0800 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/buffer.rb:296:in `write_chunk'\n  2014-05-25 09:05:02 +0800 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/buffer.rb:276:in `pop'\n  2014-05-25 09:05:02 +0800 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/output.rb:310:in `try_flush'\n  2014-05-25 09:05:02 +0800 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.45/lib/fluent/output.rb:132:in `run'\n2014-05-25 09:05:03 +0800 [warn]: temporarily failed to flush the buffer. next_retry=2014-05-25 09:05:04 +0800 error_class=\"Errno::ENOENT\" error=\"No such file or directory - /glusterfs/newlog_system/weblog.20140525_18.log.gz\" instance=70170728002380\n  2014-05-25 09:05:03 +0800 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-\n```\n\nThank you all for your help, salute\n  I found @secondary_limit is not defined and incremented in buffered_output.rb by code inspection. It seems a bug.\n\n% pwd\n/Users/yyamano/work/fluentd/fluentd/lib\n% grep -R secondary_limit .\n./fluentd/plugin/buffered_output.rb:          elsif retry_count <= @flush_retry_limit + @secondary_limit\n I'm so sorry. I completely forgot that I checked out the v11 branch.\n  revert https://github.com/fluent/fluentd/commit/b24184bf444e3753fc9df0df0e6325abe93ed5db because tests of my plugins fail. \n\nSee https://travis-ci.org/sonots/fluent-plugin-elapsed-time/jobs/25352227, or\nhttps://travis-ci.org/sonots/fluent-plugin-measure_time/jobs/25350912. The test is failing at https://github.com/fluent/fluentd/blob/550e1f4553df2100d0de351d4d33baafd87ecf11/lib/fluent/plugin.rb#L72 because `$log` is nil. \n\nPlease let me know if there are better ways to fix this problem. \n That's because you does not set `$log` in your spec helper, like:\n- https://github.com/fluent/fluentd/blob/550e1f4553df2100d0de351d4d33baafd87ecf11/test/helper.rb#L30\n- https://github.com/fluent/fluentd/blob/550e1f4553df2100d0de351d4d33baafd87ecf11/spec/spec_helper.rb#L60\n I think Fluentd should provide $log as a test framework anyway.\n This issue is about testing, but `$log` setting in `lib/fluent/test.rb` may affect to runtime code (in worst case).\nAnd all test helpers which fluentd provides have no problem. `test/helper.rb` and `spec/helper.rb` provides `$log` in default.\n3rd party plugins which does not use helpers provided from fluentd itself, should take own cost in their helpers.\n @repeatedly It may be good way, but I think it is not needed now. Current version of plugin test libraries does not work well in some cases (ex: It does NOT do `Engine.emit` actually). If we provide test helper in `lib` at once, it makes us to prohibit to change helper library behavior or to change dependency of test libraries (test/unit -> rspec).\n This change is breaking the backward compatibility and lots of plugins are getting affects.\nFor example, fluent-plugin-mongo, and fluent-plugin-elasticsearch also fails in test. \n\nThis issue is about testing, but if we decide to break the compatibility, we had to announce about this as we did it for `log` instance method before. We may also need to write a documentation page to explain how to write tests plugins as `$log` must be defined. \n 1. I changed to use `Fluent::Test::DummyLogDevice.new`, but kept the log level for the backward compatibility (default uses LEVEL_TRACE)\n2. I defined delegations `out` and `out=` for PluginLogger. \n\nThis is because there is a behavioral difference about `log` between runtime and testing caused by the change at https://github.com/fluent/fluentd/commit/b24184bf444e3753fc9df0df0e6325abe93ed5db#diff-11193d96f15fd472415e15b1c787938eR35. \nIn the case of runtime, `log` is an instance of `Fluent::Logger` first (actually, `$log`), and `log` is switched to be an instance of PluginLogger if `log_level` is configured. However, in the case of testing, `log` is an instance of TestLogger which is a subclass of PluginLogger from first. If we write tests which expect that `log` responds to `out`, and `out=` as before, test fails without delegations. \n @repeatedly Yes, see https://travis-ci.org/sonots/fluentd-plugin-ci/builds/25438513\n  In the file containing CRLF, below code gets unexpected results.\n\n``` ruby\nfile.each_line {|line|\n  p \"pos=#{file.seek}, bytesize=#{line.bytesize}\"\n  # => pos=69, bytesize=68\n  # => expected results = pos=68, bytesize=68\n}\n```\n\nIn the file containing only LF, upper code gets expected results.\nSo I removed the code for computing `seek` from `file.pos` and `line.bytesize`.\n `File::BINARY` gets expected results. `File::RDWR|File::CREAT` gets unexpected.\n\n``` ruby\np \"File.open File:BINARY\"\nfile = File.open(\"test.txt\", File::BINARY)\nfile.each_line {|line|\n  p \"pos=#{file.pos}, size=#{line.bytesize}\"\n}\nfile.close\n\np \"File.open File::RDWR|File::CREAT\"\nfile = File.open(\"test.txt\", File::RDWR|File::CREAT)\nfile.each_line {|line|\n  p \"pos=#{file.pos}, size=#{line.bytesize}\"\n}\nfile.close\n```\n\n`text.txt`\n\n```\n123[CRLF]\n4567[CRLF]\n89012\n```\n\nresults\n\n```\n\"File.open File:BINARY\"\n\"pos=5, size=5\"\n\"pos=11, size=6\"\n\"pos=16, size=5\"\n\"File.open File::RDWR|File::CREAT\"\n\"pos=5, size=4\"\n\"pos=11, size=5\"\n\"pos=16, size=5\"\n```\n via http://www.ruby-doc.org/core-2.1.0/IO.html#method-c-new-label-IO+Open+Mode\n\n```\n\"b\"  Binary file mode\n     Suppresses EOL <-> CRLF conversion on Windows. And\n     sets external encoding to ASCII-8BIT unless explicitly\n     specified.\n```\n\nSo specifying File::BINARY may solve this problem.\n   LGTM\n   :+1: It works as expected. thanks!\n done :star: \n  A key name of chunk can be specified in 4th argument of `BufferedOutput#emit` in BufferedOutput class, but no one use this argument and no hook point for setting the value. It is good to be able to configure it from plugins like `format`.\n\nIf this feature is available, plugins can determine how to handle chunks depending on the chunk key. For instance, destination server is determined by the tag. I know the example can be achieved by using fluent-plugin-forest. Though I think it is easy to provide a plugin with built-in features like fluent-plugin-hash-forward.\n\nActually I want to set the key name from _log data_, but it is inefficient to call `chunk_key` for each message just like `format`.  For that purpose, I think Mixin approach is better and allow `format` to also return a key name of chunk. How do you think about it?\n I read fluent-plugin-mongo [implementation](https://github.com/fluent/fluent-plugin-mongo/blob/f7a989dcfdf4a46b6fd0008f96fa8b8a95b35f51/lib/fluent/plugin/out_mongo.rb#L103-L110), so it's enough for the purpose definitely.\nI'll close this PR, thanks.\n  [root@localhost tmp]# cat 1.conf\n\n```\n<source>\n  type tail\n  path /logs/*access.log\n  tag apache.access\n  pos_file /var/log/td-agent/httpd-access.log.pos\n  time_format %d/%b/%Y:%H:%M:%S %z\n  format /^(?<remote>[^ ]*) (?<host>[^ ]*) (?<user>[^ ]*) \\[(?<time>[^\\]]*)\\] \"(?<method>\\S+)(?: +(?<path>[^\\\"]*) +\\S*)?\" (?<code>[^ ]*) (?<size>[^ ]*)(?: \"(?<referer>[^\\\"]*)\" \"(?<agent>[^\\\"]*)\")?$/\nformat nginx\n</source>\n<match apache.access>\n  type   forward \n  host   1.1.1.1\n</match>\n\n```\n\n[root@localhost tmp]# /usr/lib64/fluent/ruby/bin/fluentd -c 1.conf --use-v1-config \n\n```\n2014-05-05 15:59:29 +0800 [info]: starting fluentd-0.10.46\n2014-05-05 15:59:29 +0800 [info]: reading config file path=\"1.conf\"\n2014-05-05 15:59:29 +0800 [error]: config error file=\"1.conf\" error=\"unexpected back-slash escape character 'S' at 1.conf line 7,90\\n  6:   time_format %d/%b/%Y:%H:%M:%S %z\\n  7:   format /^(?<client_ip>[^ ]*) (?<host>[^ ]*) (?<user>[^ ]*) \\\\[(?<date>[^\\\\]]*)\\\\] \\\"(?<method>\\\\S+)(?: +(?<url>[^\\\\\\\"]*) +\\\\S*)?\\\" (?<code>[^ ]*) (?<size>[^ ]*)(?: \\\"(?<referer>[^\\\\\\\"]*)\\\" \\\"(?<agent>[^\\\\\\\"]*)\\\")?$/\\n\\n     ------------------------------------------------------------------------------------------^\\n  8: format nginx\\n\"\n2014-05-05 15:59:29 +0800 [info]: process finished code=256\n2014-05-05 15:59:29 +0800 [warn]: process died within 1 second. exit.\n```\n unexpected back-slash escape character 'S' at 1.conf line 7,90\n\ncan you help me?\n\nI haven't found the problem studying the document\n ```\nformat /^(?<client_ip>[^ ]*) (?<es>[^ ]*) (?<ss>[^ ]*) \\[(?<date>[^\\]]*)\\] \"(?<method>\\\\S+)(?: +(?<url>[^\\\"]*) +\\\\S*)?\" (?<code>[^ ]*) (?<size>[^ ]*)(?: \"(?<referer>[^\\\"]*)\" \"(?<agent>[^\\\"]*)\") (?<hit_status>[^ ]*)/\n```\n\ni writed \\\\ instead of \\,and still error\n ```\nformat /^(?<remote>[^ ]*) (?<host>[^ ]*) (?<user>[^ ]*) \\\\[(?<time>[^\\\\]]*)\\\\] \"(?<method>\\\\S+)(?: +(?<path>[^\\\\\"]*) +\\\\S*)?\" (?<code>[^ ]*) (?<size>[^ ]*)(?: \"(?<referer>[^\\\\\"]*)\" \"(?<agent>[^\\\\\"]*)\")?$/\n```\n\nstill **same error**\n\n \"unexpected back-slash escape character 'S' at 1.conf line 7,90\"\n sorry,i test diffrent conf file .\ni sloved it,thx for you help.\n  +1 for the idea, -1 for the naming (\"Registry\" sounds confusing to me, and for Windows folks, it means something completely different.\n @repeatedly hah. my ignorance!\n +1 for idea.\nMy `fluent-mixin-plaintextformatter` is doing like you mean, and I'll fix it to use `TextFormatter` after this issue solved.\nhttps://github.com/tagomoris/fluent-mixin-plaintextformatter\n  All tests are filed on travis-ci. Please check.\n  Output plugin should be able to overwrite buffer chunk key, to:\n- determine forwarding host by chunk key in `out_forward`\n- become buffer file human readable in `out_file`\n\n#314 \n  Does `DummyLogDevice` suppress the plugin's log, right?\n Maybe, `DummyLogDevice` seems to not good name but\nI can't think of the good name. So merge it for now.\n  Current `out_stdout` outputs messages as\n\n```\n2010-05-04 12:02:01 +0900 test: {\"test\":\"test\"}\n```\n\nwhere the time expresses the time parameter of messages, i.e., the time when the message is created or, the time written in application logs. \n\n`current_time` option enables to output the current time of _logging_ which looks like\n\n```\n2014-04-24 18:49:23 +0900 2010-05-04 12:02:01 +0900 test: {\"test\":\"test\"}\n```\n\nso that we can tell the latency between receiving (logging) and sending (creating) of messages. \n\nPS. I am still wondering the log format and the option name. \n The idea sounds reasonable, but -1 for the current change.\n\nIf the log contains multiple times subsequently, it's really confusing as a user, . I have never seen such logs before. Could you work on proposing some formats, which is more obvious?\n\nAnd do you think we can break the backword compatibility of log format, without adding the option? (cc/ @repeatedly @frsyuki @tagomoris)\n > without adding option\n\nI do not think we can break the backward compatibility because someone would be using the stdout logs for system monitoring already. \n\nOne idea: How about LTSV format like\n\n```\ncurrent_time:xxx[tab]time:xxxx[tab]tag:xxxx[tab]record:xxxx\n```\n\nbut we may need another option to specify the format. \n\nALL: Any idea for a nice format?\n Yes, I released as https://github.com/sonots/fluent-plugin-stdout_ex for now, but I am still wondering how to merge it into fluentd without breaking the backward compatibility. \n @repeatedly @kzk As a final thought, I renamed the option to `log_header`. I thought an option is mandatory to keep backward compatibility, but I think this option can be default `true` on v1. \n\n`log_header true` uses `$log.info`, so it outputs the current logging time: \n\n```\n2014-04-24 18:49:23 +0900 [info]: 2010-05-04 12:02:01 +0900 test: {\"test\":\"test\"}\n```\n\n`log_header false` uses `$log.write` (original behavior): \n\n```\n2010-05-04 12:02:01 +0900 test: {\"test\":\"test\"}\n```\n\nAny opinions?\n @repeatedly ping!\n It seems better to use `SetTimeKeyMixin` rather than to change output format, to show original time of event.\nIf we do so, `current_time` option simply do print current time on time field.\n I feel all logs of fluentd should keep the same format as much as possible as:\n\n```\n2014-04-24 18:49:23 +0900 [info]: blah blah\n```\n\nCurrently, only out_stdout outputs in the different manner. \nAnd, I think log should always output the logging time. It is not special thing. \n  ## Idea\n\nAt the moment, [in_http](http://docs.fluentd.org/articles/in_http) supports msgpack and JSON formatted data. What about supporting arbitrary text-format with user-defined format? I have something like this in mind:\n\n```\n<source>\n  type in_http\n  port 8888\n  field_name foobar\n  format /^(?<field_1>\\d+):(?<field_2>\\w+)$/\n</source>\n...\n$ curl -X POST -d \"foobar=123456:awesome\" fluentd.example.com/test/\n# this would be parsed as {\"field\":\"123456\", \"field_2\":\"awesome}\n```\n## Background\n\nOne user is considering to send data from embedded devices to Fluentd via HTTP. However, these devices aren't very programmable and can't output data in JSON (or msgpack).\n\nThis idea is to allow these users to send data to Fluentd. This might be a good feature to make Fluentd a useful tool for IoT.\n Only one line? or need multi-line support like CSV file?\n :+1:\nIt's interesting to send data from embedded devices since I was previously embedded system engineer. \n If we support multiple lines, msgpack and json also should support array types.\n @repeatedly I like the first one better. If each HTTP request needs to specify a format, this feature would be cumbersome to use. Also, I can easily imagine the programmers on the application side forgetting to specify the `format` field in their logging code.\n\nThe other reason is even custom-formatted log messages don't change their formats very often. If a message is getting rejected, chances are good it's a problem on the sender's side.\n re: multi-line, I don't think the first version needs it.\n @repeatedly that would be my vote. If we are going to support `format csv/tsv`, then we need something  like `header` for parameter, i.e.,\n\n```\n<source>\n  type http\n  format csv\n  header user_id,action,time,some_field\n</source>\n```\n\nThis example would reject the message unless it is\n1. a valid CSV\n2. with 4 fields.\n  This is not critical issue but I want feedbacks.\nI am now checking old configurations with `--use-v1-config`.\nAlmost configurations work but `format /pattern/` sometimes fails because\n`\\` is interpreted as escape character in v1 format.\n\nIf you want to use `\\` included pattern, you should write:\n- `/foo\\bar/` in old config.\n- `/foo\\\\bar/` in v1 config.\n\nShould v1 format also allow `/foo\\bar/` in `/pattern/` configuration?\n Question: In the above example, what does `/foo\\bar/` match?\n I think the v1 format behavior is more general as a regular expression, so in my opinion, current v1 behavior is fine. \n @kiyoto `foo\\bar`\n I forgot to say my opinion.\n\nPotentially, v1 format doesn't have a compatibility with old one, e.g. `\"foo\"` is interpreted as `foo`.\nSo I think supporting special case for `/foo\\bar/` is not needed.\n Okay, keep current behaviour and I wrote this note to docs.fluentd.org.\n  If the user changes `buf_file` to `buf_memory` with `flush_at_shutdown false`,\nthe user may discard buffered chunks unexpectedly.\nI think printing warn message is better.\n\n@sonots @tagomoris Please check.\n LGTM\n  From this change, we can load 3rd party parser which\nlocated in fluent/plugin/parser_xxx.rb automatically.\n After merged, should we create contribute based fluent-plugin-parser-collections which collects minior but useful parsers?\n LGTM both :+1: \n\nAre there any plan to be bundled parser for fluent-plugin-parser-collections?\n\n(e.x. which i have just brainstormed) \n- [squid](http://blog.glidenote.com/blog/2012/07/15/fluentd-regex-debug/)\n- [elasticsearch](https://github.com/y-ken/fluent-plugin-tail-addon-format/blob/master/lib/fluent/plugin/in_tail_addon_format.rb#L5-L8)\n- [postgresql](http://chopl.in/blog/2013/06/07/postgresql_csv_log_with_fluentd.html)\n- [mysql slow query](http://studio3104.hatenablog.com/entry/20120706/1341540874)\n- [fortigate](https://github.com/yteraoka/fluent-plugin-fortigate-log-parser)\n- [glusterfs](http://www.nttpc.co.jp/company/r_and_d/technology/gluster_fs_fluentd.html)\n- [postfix](http://inokara.hateblo.jp/entry/2013/07/11/071017)\n- [qmail](https://gist.github.com/netmarkjp/2881651)\n- /var/log/cron\n- /var/log/secure\n Travis-CI passed.\n  @tagomoris Travis-CI is failed with Ruby 1.9 / 2.0. Could you check this?\n I'm now considering how to support `config_argument`.\nMaybe, `config_argument` is only used with `string` type like `<match pattern>`, not used array, hash and other primitives.\nSo implementing `config_param` level complexity seems overengineering I think.\n\n`Element` provide `arg` accessor for `<foo bar>`'s `bar`.\nSo providing similar API or integrating `config_section` with `:argument_name` option seem to be more maintanable.\n ![lgtm](http://i.imgur.com/v9wvB.gif)\n If someone doesn't have any question, I will merge this PR tomorrow.\n Retries tests and tests are passed.\nMaybe, Ruby or Travis-CI environment has a ObjectSpace related bug.\n Merged. Good work :+1: \nIf found the bug, we will handle it using new issue.\n  https://github.com/fluent/fluentd/blob/master/lib/fluent/buffer.rb#L182\n\nRaising an exception at this point will break the chain, so in the context of a CopyOutput being used, if one plugin type runs into a problem, it causes all to fail.\n\nOne reasonable use case would be: I have the copy plugin sending my data to S3 and ElasticSearch, if the ElasticSearch cluster goes down, I'm ok to lose that data provided that I know it will still be sent to S3. This type of configuration - based on copy - helps (that is, would help) reduce SPFs in logging.\n\nAnother point is, why would BasicBuffer ever raise an exception, losing data is a big thing and I understand it should 'fail loudly', but not at the cost of other outputs.\n\nThis code is really easy to change (error logging instead of raising), but if you feel like another solution is needed, I'm willing to submit a pull-request.\n Maybe, adding `buffer_ignore_exceeded_chunk` or similar option is better.\nRaising exeception is needed because some plugins return an error to the client for fail over.\n @repeatedly do you think that should be available only to `BasicBuffer` or be a property of `CopyOutput`? My reasoning is that the contract for failing is only different for `out_copy`.\n @dterror `CopyOutput` itself can't handle above case because `CopyOutput` is simple output and doesn't touch a store's plugin.\nHow about following configuration?\n\n``` aconf\n<match foo.bar.*>\n  type copy\n\n  <store>\n    type s3\n    #...\n  </store>\n  <store>\n    type elasticsearch\n    buffer_ignore_exceeded_chunk true # output error to log, not raise an exception.\n    #...\n  </store>\n</match>\n```\n I was thinking of something like (in out_copy) (needs to be made more sophisticated):\n\n``` ruby\n    def emit(tag, es, chain)\n      begin\n         chain.next\n       rescue Exception => e\n          raise e unless @ignore_individual_errors\n          chain.next\n       end\n    end\n```\n\nBut I'm ok with your idea, too. Let me know what you think and I'll implement it.\n I see. Maybe implementing I and your ideas is good for covering more cases.\n\nWe have a plan to implement error stream which sends error record to another plugin.\nBut it needs more time so implementing `ignore_individual_errors` parameter is good for now.\n\nCould you send `ignore_individual_errors` pull request?\n sure, will work on it\n  > only for v1-config? or for both of traditional and v1?\n\nNeed both because if only v1, the user hard to use this configuration.\n Sounds good idea!\nI don't think we should limit nesting level.\n :+1: \n- Both v1 and traditional config is better (anyone can say better, though ;-).\n- Seems unlimited is fine. Users will restrict by themselves if they want. \n I have a plan to release new Fluentd in this week(or weekend).\nIf you want to include this feature in this version, please send pull request ASAP :+1: \n > @children.first should be a instance of Config::Element? or Hash (w/ symbol keys)? or Object instance w/ specified methods by config_param?\n\nMaybe, `Element` is better for consistency because current implementaion uses `Element` for `<>` syntax.\n\nhttps://github.com/fluent/fluentd/blob/master/lib/fluent/config/parser.rb#L41\n I see.\n\nfluient-plugin-sql uses sub `<>` sections.\n\nhttps://github.com/fluent/fluent-plugin-sql/blob/f94d7bda3123118a5794b24554e6fd256bd899ac/lib/fluent/plugin/in_sql.rb#L136\n\nIf you can keep this use-cases, please feel free to add best class for `config_section`.\n  Please refer to https://github.com/fluent/fluentd/issues/280 first.\n\nI applied above issue result to new configuration format.\nThis pull request includes several refactoring to share old and new format code.\n\nCurrent implemention uses `yajl` for parsing array and hash, so\nthe user can't add trailinig commas and can't write `#` comment.\nI don't know these features are must or not.\n\n@frsyuki @tagomoris @sonots \nPlease check this pull request.\n\nV1 configuration document is [here](http://docs.fluentd.org/articles/config-file#v1-format)\n @tagomoris Maybe, `v1-config` is better because I want to deprecate old format after released v1.\n Renamed to V1.\n Does someone have more suggestions?\n Good work! :clap:\n  Installed td-agent on my Ubuntu system, and started it. Now trying to get it to work with Fluent PHP Logger, but it is missing td-agent.sock.\n\nThe only thing in /var/run/td-agent/ folder is td-agent.pid. Permission of the folder is drwxrwxrwx, and ownership is td-agent:td-agent.\n\nAdded to td-agent.conf the UNIX input source.\n<source>\ntype unix\npath /var/run/td-agent/td-agent.sock\n</source>\n\nAny idea why the td-agent.sock isn't being created?\n I resolved it. Thanks for replying.\n\nSorry for the trouble.\n  Hi I am getting following error while running fluentd tail-ex plugin :\n\n2014-03-26 03:24:33 -0700 [error]: fluent/supervisor.rb:210:rescue in main_process: unexpected error error=\"undefined method `split' for nil:NilClass\"\n\nOperating system is solaris 10 sparc:\n\nFollowing is the source configuration file \n\n   <source>\n  type tail_ex\n  format none\n  path /export/home/scp/log/*.log\n  pos_file /export/home/scp/output/HLR.log.pos\n  tag td.hlr\n  refresh_interval 5\n   </source>\n\nPlease provide some suggestions.\n Yes it seems a bug to me , please check.I also posted it on google group you mentioned\n Please reopen it, it is a bug and not work on solaris system\n  Hello,\n\nAre you guys planning on releasing the latest version of fluentd with the td-agent RPM?\n\nWould like to take advantage of Per Plugin Log:\nhttp://docs.fluentd.org/articles/logging#per-plugin-log-fluentd-v01043-and-above\n  @repeatedly these spec files describe how v11 parser works:\n- https://github.com/fluent/fluentd/blob/v11/spec/config/literal_parser_spec.rb\n- https://github.com/fluent/fluentd/blob/v11/spec/config/config_parser_spec.rb\n\ne don't have to add typed literals to config files because it's too early optimization, in my opinion. My idea is:\n- Parser returns string values and `config_param` converts the strings to typed values\n\nImplementation idea is:\n- Modify `LiteralParser#parse_literal` to not parse typed values\n  - comment-out L31-L58 from https://github.com/fluent/fluentd/blob/v11/lib/fluentd/config/literal_parser.rb#L28\n- Engine.parse_config uses the new parser\n +1 to \"Parser returns string values and `config_param` converts the strings to typed values\".\n\nWith this approach, we can do this:\n- traditional plugins (inherits `Fluent::InputPlugin` or others) can recognize it as same with traditional format.\n- new type plugins (ex: `Fluentd::Plugin::Input` or other) can recognize it as typed values\n +1 to json array/object. It's more popular than ruby's one for many users.\n Me too. + 1 to json array/object. \nBTW, will type names be :array and :object, or :array and :hash? As one of users, I feel the latter is better. \n I merged the implementation pull request.\n  I want to work fluentd without input plugins if the configuration has `<source>` options. It means the Fluentd does not receive new messages and only work with current remaining buffers. The use case is:\n- Flushing all buffers without receiving new messages for retiring servers.\n- Debugging output plugins\n\nOf course this feature is accomplished by modifying configurations manually, but I want it to be supported officially. For example, it is difficult to modify a part of configurations for specific servers if they are provided via http.\n\nThere are two candidates for the implementation I think.\n- Fluentd starts normally, then send signal such as a `SIGUSR2` to a working process to disable input plugins.\n- Fluentd starts with a option such as a `--without-source` to disable input plugins.\n\nI think second one is better because first one requires new signal.\n\nActually it is good for debugging purpose that disabled input plugin is selectable, but I don't care it for now.\n\nAre there any comments or objections for this feature?\n +1 for this feature request\n :+1: My colleague also said as he wants the same feature. I think `SIGUSR2` is fine. \n This feature can be implemented without signals, so I think we should not use signals.\n+1 for a new command line option.\n +1 for a new command line option.\nsignal handling is hard to implement on top of JRuby.\n @sabottenda In the first use case, is restarting fluentd with --without-source acceptable? Could you explain the context in a little bit more detail?\nI prefer --without-source option, but not sure if it meets all your needs.\n Another thing comes to my mind. It might be overkill for the use cases, but providing web apis to control fluentd would be nice to me.\n Let me talk about the usecase of my colleague. \nHe wants this to make sure all buffer is flushed before shutdown.\nTo do so, input must be stopped before shutdown because, otherwise, we never can make sure all buffer is flushed. He is actually having a problem that some chunks are lost with the current Fluentd on shutdown and tweaking (only)  in_forward to let it stops receiving new data by sending signal.\n\nRestarting Fluentd with --without-source does not satisfy this use case. \n One another option is to use debug_agent instead of signal.\nI remember that the debug_agent would become default.\n\nBut, I do not like that another port is used as default, and I believe some users should have same opinions. The solution about this is to use UNIX domain socket in the default, but unix domain socket does not work on windows. Hmm...\n Thanks sonots. That's my use case too. But, if the feature is implemented with --without-source option, I was planning to do the following\n-> Shutdown fluentd. We may still be left with some buffer data (not sure if I will lose some data here!)\n-> Start fluentd again with --without-source option\n-> Shutdown again ensuring that the entire buffer is flushed\n\nOne thing with user signals is, what if fluentd has to support \"n\" different features ( not sure if it will ever have to) like this. You cant have n different USR signals, rt? I am new to fluentd, so please correct me if I have understood something wrong here. Thanks for your support.\n @sriramflydata In the case of mem_buffer, it does not work...\n > He wants this to make sure all buffer is flushed before shutdown.\n\nThis is exactly what i want. In _my_ case, it is acceptable to restart fluentd with command line option such as `--without-source` because I don't use mem_buffer for such case.\n As a future option, we can use unix domain sockets on path with pid (for only unix-like OSs ...) for fluentd daemon controls, instead of signals.\nTCP ports are also available for this purpose, but port number selection is another confusing points, especially for multi-process environment.\n Using a named pipe would be good, as a future option?\n Implementation of RPC layer on HTTP is not so difficult, but we need more gem dependencies, especially rack. That brings some troubles for maintenance.\nWithout HTTP, we are needed to design text/binary protocol from scratch, and it will needs more time, and it is not an easy work.\n  I often use `--setup` option to create initial configuration file. The file created by the setup option uses obsoleted `host` option in out_forward, so the following warnins occur when Fluentd starts with the configuration. If there is no reason to keep it, please fix it.\n\n```\n2014-03-22 16:38:27 +0900 [warn]: 'host' option in forward output is obsoleted. Use '<server> host xxx </server>' instead.\n```\n  @repeatedly Sorry for being late to review this big change.\nI think overall implementation is good, as long as we can notice all users that path pattern must not include rotated files to not cause duplicated records.\n If we repeat refresh_interval, pos_file size increases for ever. Usually it doesn't matter because pos_file is small. However, it's better to have a cleanup code. For example, we can set 0xffffffff to pos on `stop_watchers`, and remove those lines on `start`.\n The other code looks good to me :+1:\n I reviewed. The others look good!\n @repeatedly @frsyuki I am curious, what is the reason for this limitation: \"as long as we can notice all users that path pattern must not include rotated files to not cause duplicated records.\"\n\nIs there any way around this? I was hoping to watch stdout files which are being rotated.\n @wsorenson Because in_tail can't track file rotation correctly with `*` glob pattern.\nWe use inode for file tracking but some rotation tools change the inode with file compression or something.\nin_tail doesn't know the rotation tool implementation, so including rotation file in `*` causes the log duplication.\n\n> Is there any way around this? I was hoping to watch stdout files which are being rotated.\n\nSimple way is separating log path. For example:\n\n``` aconf\n<source>\n  type tail\n  path /path/to/rotation/file,/path/to/rotation/never-macth-unique-prefix-*,/path/to/dynamic/*,\n</source>\n```\n @repeatedly what about the case where the files are simply rotated with copytruncate?\n\nI assume it handles this by noticing the underlying file size has gone down?\n @wsorenson Yes. in_tail checks inode change or file size reduction.\nThe code is here: https://github.com/fluent/fluentd/blob/master/lib/fluent/plugin/in_tail.rb#L540 \n  Installed fluentd with the following:\n- install ruby 193 using rubyinstaller\n- install devkit from rubyinstaller website\n- download zip of windows branch:\n  https://github.com/fluent/fluentd/archive/windows.zip\n- install fluentd:\n  gem install pkg/fluentd-0.10.42.gem\n- add RUBY_INSTALL_DIR = 'C:/Ruby193' to C:\\Ruby193\\lib\\ruby\\gems\\1.9.1\\gems\\fluentd-0.10.42\\lib\\fluent\\env.rb\n- fluentd -s conf\n- fluentd -c conf/fluent.conf\n\nfluent.conf:\n\n```\n<source>\n  type tail_multiline\n  path C:\\fluentd\\hello.txt\n  tag jvm\n  format /^(?<time>\\d\\d\\d\\d-(\\d)?\\d-(\\d)?\\d \\d\\d:\\d\\d:\\d\\d)[ ]{1,3}(?<message>.*)$/\n  time_format %Y-%m-%d %H:%M:%S\n</source>\n\n<match jvm>\n    type stdout\n</match>\n```\n\nUsing Windows Server 2012 64bits\n It was satisfactory at Windows7 64bit.\nSince it checks by WindowsServer2012, please wait a little. \n\nReply to this email directly or view it on GitHub.\n FYI: Seeing same issue on Server 2008 32bits.\n Let me know how I can help with testing.\n Hi.\nIt seems a problem of combination of cool.io. and Windows. We're still checking. \n Are you able to reproduce? I'm using a m1.small instance on AWS.\n When commenting this section I'm no longer seeing the issue:\n\n```\n# built-in TCP input\n# $ echo <json> | fluent-cat <tag>\n<source>\n  type forward\n</source>\n```\n cool.io makes it. I posted it with a sample code.\nhttps://github.com/tarcieri/cool.io/issues/27\n @okahashi117 I found the problem and send PR to resolve the problem.\nOn my environment, your program works. Please try this patch.\n\nhttps://github.com/tarcieri/cool.io/pull/31\n how can I test the patch without having to compile cool.io?\n @amagnus Currently nothing.\nIf you already setup DevKit, you can easy to build Cool.io with `rake` command.\n\nOn the other hand, after @okahashi117 or @MasayukiKiyota checked the patch on their environment, I will release Cool.io 1.2.3 for Windows environment.\n @okahashi117 @MasayukiKiyota @amagnus I uploaded cool.io 1.2.3 for Windows gem to Dropbox > http://dl.dropbox.com/u/374829/cool.io-1.2.3-x86-mingw32.gem\nThis gem is built on my new Ubuntu cross-compiling environment so I want to test this gem works on Windows.\nBut I don't have Windows machine on hand so could you test this gem on your Windows machine?\n\nIf works correctly, I will push this gem to rubygems.org.\nAfter that, you can install this gem via `gem install`.\n @repeatedly I tested it on Windows Server 2012(64bit), Windows 8(32bit) and 7(32bit). \nWorks fine.\n @okahashi117 Thank you for the testing! I will release the gem later.\n @okahashi117 @MasayukiKiyota @amagnus Just registered on rubygems. You can install fixed version via `gem install` command.\n  I've noticed that @timeout paramter at https://github.com/fluent/fluentd/blob/d5b4dc16e061d4f0faf6b63a6107220137653b06/lib/fluent/plugin/in_forward.rb#L151 was always nil. \n\nMEMO: Since linger_timeout is 0, in_forward returns RST instead of FIN. This is effective to clear TIME_WAIT sockets at src. See http://stackoverflow.com/questions/3757289/tcp-option-so-linger-zero-when-its-required\n @frsyuki I want to know whether in_forward is sending RST by setting timeout 0 _intentionally_ or not.\n Good catch, @sonots!!\nIt's completely unintentional.\n oh ...\n Let me keep the linger_timeout to be default 0, because fluentd's out_forward connect(2) everytime to send data, and would result in lots of TIME_WAIT sockets if it neatly receives FIN. \n\nFYI: TIME_WAIT sits 60 seconds in Linux as default, we need to tweak linux kernel source codes to shorten it. In our production environment, we shortened to 3 seconds for example. \n Added comments about this at this commit https://github.com/fluent/fluentd/commit/443650b6b275e7e9f3a5afca2315019556439c38\n  This patch fixes two issues which cause a unstoppable process.\n\nThe first one is that SIGTERM is ignored when it is called before starting default loop in engine.rb.  If you send SIGTERM immediately after starting fluentd, _@default_loop_ is not set and the signal is ignored.  \n`synchronize` method cannot be used in trap block, so I use a variable without semaphore for cheking the state.\n\nThe second issue is that shutdown of plugins are blocked because in_tail plugin contiues to reading logs. Shutdown of in_tail is blocked [here](https://github.com/fluent/fluentd/blob/master/lib/fluent/plugin/in_tail.rb#L80). `IOHandler` keep reading logs independently in while loop if there are unread logs, so I fixed to stop reading on shutdown phaze.\n > > ```\n> > The second issue is that shutdown of plugins are blocked because in_tail plugin contiues to reading logs.\n> > ```\n> \n> From this patch, Fluentd doesn't wait the apache / nginx shutdown log flush?\n\nSorry for late reply. The answer is yes, I think so. Hmm, the question means you expect in_tail plugin reads all remaining logs before shutting down, right?  I think if all logs are flushed at that time, new logs come in one after another after Fluentd is stopped.\n\nMy use case is I want to stop Fluentd immediately for maintenance or debugging. Fluentd takes much time to stop on very high traffic servers or servers using slow output plugins. However, it eventually stops when it receives signal, so it is not a severe issue.\n\nAnyway, if in_tail plugin is expected to read all remaining logs before shutting down, this patch breaks backward compatibility. I want to fix only first issue for now.\n Just removed the commit from my branch.\n  Host and architecture:\n    SunOS <hostname> 5.10 Generic_147440-01 sun4u sparc SUNW,Sun-Fire-V240\n\nRuby:\n\n```\nbash-4.2$ ruby --version\nruby 1.9.3p545 (2014-02-24 revision 45159) [sparc-solaris2.10]\n```\n\nError detail:\n\n<pre>\nERROR:  Error installing fluentd-0.10.44.gem:\n        ERROR: Failed to build gem native extension.\n\n        /opt/local/bin/ruby extconf.rb\nchecking for rb_thread_blocking_region()... yes\nchecking for rb_thread_alone()... yes\nchecking for rb_str_set_len()... yes\nchecking for clock_gettime() in -lrt... yes\nchecking for sys/select.h... yes\nchecking for poll.h... yes\nchecking for sys/epoll.h... no\nchecking for sys/event.h... no\nchecking for port.h... yes\nchecking for sys/resource.h... yes\nchecking for sysctlbyname() in sys/param.h,sys/sysctl.h... no\ncreating Makefile\n\n...\n...\n...\n...\n...\n...\n\n\n./libev/ev.c:3252: warning: control reaches end of non-void function\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 963: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 1010: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 1019: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 1062: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 1076: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 1127: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 1148: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 1157: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 1161: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 1171: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 6265: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 6403: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 9951: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 10027: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 12910: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 12919: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 12923: error: cannot use v8plus instructions in a non-v8plus target binary\n/usr/ccs/bin/as: \"/var/tmp//ccjQQ8rr.s\", line 12933: error: cannot use v8plus instructions in a non-v8plus target binary\n*** Error code 1\nThe following command caused the error:\ngcc -I. -I/opt/local/include/ruby-1.9.1/sparc-solaris2.10 -I/opt/local/include/ruby-1.9.1/ruby/backward -I/opt/local/include/ruby-1.9.1 -I. -DRUBY_VERSION_CODE=193 -DHAVE_RB_THREAD_BLOCKING_REGION -DHAVE_RB_THREAD_BLOCKING_REGION -DHAVE_RB_THREAD_ALONE -DHAVE_RB_THREAD_ALONE -DHAVE_RB_STR_SET_LEN -DHAVE_RB_STR_SET_LEN -DHAVE_SYS_SELECT_H -DEV_USE_SELECT -DHAVE_POLL_H -DEV_USE_POLL -DHAVE_PORT_H -DEV_USE_PORT -DHAVE_SYS_RESOURCE_H -DHAVE_SYS_RESOURCE_H  -D_FILE_OFFSET_BITS=64  -I/usr/local/lib/include -fPIC -O3 -ggdb -Wall -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC  -o libev.o -c libev.c\nmake: Fatal error: Command failed for target `libev.o'\n\n\nGem files will remain installed in /opt/local/lib/ruby/gems/1.9.1/gems/cool.io-1.2.1 for inspection.\n</pre>\n\n I think there a problem while compiling the cool.io rubygem. It seems that \n -xarch=generic compiles as sparcv8, which does not include them, hence the compiler error. If you want to compile it, you will need to specify:\n-xarch=v8plus\n\nLink:\n\nhttps://community.oracle.com/thread/1921154?start=0&tstart=0\n I was able to run it by upgrading the bash to v4.3 and gcc version to 4.8.2. \nEarlier I had bash version 3.2 and gcc version 3.4.3. \n Yes it does.\nOn 14 Mar 2014 14:58, \"Masahiro Nakagawa\" notifications@github.com wrote:\n\n> So, upgrading gcc resolves the problem?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/fluent/fluentd/issues/272#issuecomment-37629415\n> .\n  I agree that automatic flush is not needed.\n\nBut I forgot to mention that my original code has a bug in handling multiple files.\nhttps://github.com/tomohisaota/fluent-plugin-tail-multiline/issues/7\nIn short, \"@line_buffer\" should be defined per parser, not per plugin.\nAnd it seems that new code has same problem.\n\nBTW, I am Objective-C programmer, and am using Ruby just for Fluentd.\nSo I will feel much safer it somebody else would do the code review.\n\nThanks.\n  I love that idea :+1: \n As I requested this on the mailing list, a big :+1: from me. \n I also agree with you, It's nice idea!\n @repeatedly are you actively working on the in_tail_ex merge? If not, I may be able to help. It is a feature we would benefit from having.\n @repeatedly Awesome. Sure, I'll try this out today\n  Hi,\n\ni try to use fluentd with the in_syslog plugin for logs from network devices (cisco), i have installed in fedora20 with gem, and this is the config:\n\n```\nbash-4.2# fluentd -vv --conf=/etc/fluent/fluent.conf\n2014-03-04 10:53:05 +0000 [info]: fluent/supervisor.rb:171:supervise: starting fluentd-0.10.44\n2014-03-04 10:53:05 +0000 [info]: fluent/supervisor.rb:273:read_config: reading config file path=\"/etc/fluent/fluent.conf\"\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'file'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'memory'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'debug_agent'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'exec'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'forward'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'gc_stat'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'http'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'monitor_agent'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'object_space'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'status'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'tcp'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'unix'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'syslog'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'tail'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'copy'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'exec'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'exec_filter'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'file'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'forward'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'null'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'roundrobin'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'stdout'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'tcp'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'unix'\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'test'\n2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:85:block in configure: gem 'fluent-plugin-elasticsearch' version '0.2.0'\n2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:85:block in configure: gem 'fluentd' version '0.10.44'\n2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:89:configure: using configuration file: <ROOT>\n  <source>\n    type syslog\n    port 5140\n    bind 0.0.0.0\n    tag syslog\n    log_level debug\n  </source>\n  <match syslog.**>\n    type elasticsearch\n    host 10.61.9.20\n    port 9200\n    logstash_format true\n    flush_interval 10s\n  </match>\n  <match fluent.**>\n    type elasticsearch\n    host 10.61.9.20\n    port 9200\n    logstash_format true\n    flush_interval 10s\n  </match>\n</ROOT>\n2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:99:block in configure: adding source type=\"syslog\"\n2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:115:block in configure: adding match pattern=\"syslog.**\" type=\"elasticsearch\"\n2014-03-04 10:53:05 +0000 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'elasticsearch'\n2014-03-04 10:53:05 +0000 [info]: fluent/engine.rb:115:block in configure: adding match pattern=\"fluent.**\" type=\"elasticsearch\"\n2014-03-04 10:53:05 +0000 [debug]: plugin/in_syslog.rb:183:listen: listening syslog socket on 0.0.0.0:5140 with udp\n```\n\nnow if i send syslog messages from devices, or via logger command i got these error:\n\n```\n2014-03-04 11:54:11 +0000 [warn]: plugin/in_syslog.rb:176:rescue in receive_data: \"<189>775: Mar  4 12:54:53.248 CET: %LINK-5-CHANGED: Interface GigabitEthernet2/0/18, changed state to administratively down\" error=\"invalid strptime format - `%b %d %H:%M:%S'\"\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/share/ruby/time.rb:394:in `strptime'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:28:in `block in initialize'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `call'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `parse'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:164:in `block in receive_data'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `each'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `receive_data'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `call'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `on_readable'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/io.rb:170:in `on_readable'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run_once'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run'\n2014-03-04 11:54:11 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:118:in `run'\n2014-03-04 11:54:12 +0000 [debug]: fluent/supervisor.rb:345:block in install_main_process_signal_handlers: fluentd main process get SIGINT\n2014-03-04 11:54:12 +0000 [debug]: fluent/supervisor.rb:348:block in install_main_process_signal_handlers: getting start to shutdown main process\n2014-03-04 11:54:12 +0000 [debug]: fluent/supervisor.rb:224:block in install_supervisor_signal_handlers: fluentd supervisor process get SIGINT\n2014-03-04 11:54:12 +0000 [debug]: fluent/supervisor.rb:345:block in install_main_process_signal_handlers: fluentd main process get SIGINT\n\n\n2014-03-04 12:00:48 +0000 [warn]: plugin/in_syslog.rb:176:rescue in receive_data: \"<5>Mar  4 12:00:48 111: ssss\\x00\" error=\"invalid strptime format - `%b %d %H:%M:%S'\"\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/share/ruby/time.rb:394:in `strptime'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:28:in `block in initialize'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `call'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `parse'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:164:in `block in receive_data'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `each'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `receive_data'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `call'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `on_readable'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/io.rb:170:in `on_readable'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run_once'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run'\n2014-03-04 12:00:48 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:118:in `run'\n2014-03-04 12:01:05 +0000 [debug]: fluent/supervisor.rb:345:block in install_main_process_signal_handlers: fluentd main process get SIGINT\n2014-03-04 12:01:05 +0000 [debug]: fluent/supervisor.rb:348:block in install_main_process_signal_handlers: getting start to shutdown main process\n2014-03-04 12:01:05 +0000 [debug]: fluent/supervisor.rb:224:block in install_supervisor_signal_handlers: fluentd supervisor process get SIGINT\n2014-03-04 12:01:05 +0000 [debug]: fluent/supervisor.rb:345:block in install_main_process_signal_handlers: fluentd main process get SIGINT\n```\n\nideas?\n\nregards f0\n Hi,\n\nthis number is increasing, so i assume its always added\n\n```\n2014-03-04 10:54:08 +0000 [warn]: plugin/in_syslog.rb:176:rescue in receive_data: \"<187>770: Mar  4 11:54:51.144 CET: %LINK-3-UPDOWN: Interface GigabitEthernet2/0/18, changed state to down\" error=\"invalid strptime format - `%b %d %H:%M:%S'\"\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/share/ruby/time.rb:394:in `strptime'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:28:in `block in initialize'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `call'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `parse'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:164:in `block in receive_data'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `each'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `receive_data'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `call'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `on_readable'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/io.rb:170:in `on_readable'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run_once'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run'\n  2014-03-04 10:54:08 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:118:in `run'\n2014-03-04 10:54:30 +0000 [warn]: plugin/in_syslog.rb:176:rescue in receive_data: \"<189>771: Mar  4 11:55:11.595 CET: %SYS-5-CONFIG_I: Configured from console by wieck on vty0 (10.61.203.67)\" error=\"invalid strptime format - `%b %d %H:%M:%S'\"\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/share/ruby/time.rb:394:in `strptime'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:28:in `block in initialize'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `call'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/parser.rb:44:in `parse'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:164:in `block in receive_data'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `each'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:158:in `receive_data'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `call'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:216:in `on_readable'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/io.rb:170:in `on_readable'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run_once'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/cool.io-1.2.1/lib/cool.io/loop.rb:96:in `run'\n  2014-03-04 10:54:30 +0000 [debug]: plugin/in_syslog.rb:216:call: /usr/local/share/gems/gems/fluentd-0.10.44/lib/fluent/plugin/in_syslog.rb:118:in `run'\n```\n  Since the Dir#glob returns results in a different order given different operating system, We need to call Array#sort to guarantee the inclusion order.\n What troubles are there about mis-ordered fluentd configurations?\nI cannot imagine such cases.\n I think that sorting files by alphabetic name order is good idea. There are no reason not to sort these.\n Managing configurations by hand is maybe fine and have no troubles. However, with provisioning tools such as Puppet, Chef or etc, may face the difficulties with its ordering.\n\nConsider the case which includes files provided by different modules(Puppet case), like as following:\n\n``` text\n/etc/td-agent\n\u251c\u2500\u2500 conf.d\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 00-in_http.conf(provided by base module)\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 00-in_tail-ltsv.httpd.access.conf(provided by web module)\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 20-out_mongo_replset-xxx.conf(provided by xxx module)\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 99-forward-aggregator.conf(provided by base module)\n\u2514\u2500\u2500 td-agent.conf\n```\n\nManaging these order is pretty hard to do, since each module has no way to know other modules configuration.(well, it's possible but hard to do, thou)\n\nIf fluentd support this feature(like as apache include), each module just need to name config files alphabeticaly orderd.\n Ah, I see... sorry it's my bad:(\nI'm ashamed to say that since we use `**` match for forwarding 99-forward-aggregator.conf as above, I thought it is nice that fluentd guarantee the ordering. But yes, in that case, as you mentioned, it's MUST move `**` forward to last of the config.\n\ntd-agent.conf\n\n```\ninclude conf.d/*.conf\n<match **>\n  type forward\n  :\n</match>\n```\n\nBut anyway I think it's good to guarantee the sort if there is no block case. \n  - using Refinements to override Fluent::Engine.emit\n  - rspec style plugin testing is only for Ruby 2.0.0 or later\n- we need event_router to hook emits from plugins\n  - it also needed for EventStream (ErrorStreams)\n For ruby versions, ruby community strongly recommends to use 2.0.x or later.\nhttps://www.ruby-lang.org/en/news/2014/01/10/ruby-1-9-3-will-end-on-2015/\n\nMerging v11 have many barriers like implementations of new syntax configuration, actors, socket managers, event streams and so on.\nThis style test drivers (plugin calls actual `emit()` and test driver stubs it) cannot be implemented for v10 style Fluent::Input/Output, without refinements or other hacky methods.\n\nThis test driver is hacky, in fact, but we cannot get test drivers that calls real Engine.emit without hacky code.\n Released as gem.\nhttps://rubygems.org/gems/fluent-helper-plugin-spec\nhttps://github.com/tagomoris/fluent-helper-plugin-spec\n  This patch enables us to check the instance variable without running `undef_method instance_variable_get`.\n\nbefore\n\n``` ruby\nirb(main):001:0> out = Engine.match('hoge').output\n=> #<Fluent::ForwardOutput:0xb4b2a7a0>\nirb(main):002:0> class << out\nirb(main):003:1>  undef_method :instance_variables\nirb(main):004:1>  undef_method :instance_variable_get\nirb(main):005:1> end\n=> #<Class:#<DRb::DRbObject:0x934458c>>\nirb(main):006:0> out.instance_variables\n=> [:@log_level, :@buffer_type, :@flush_interval, :@try_flush_interval, :@retry_limit, :@retry_wait, :@max_retry_wait, :@num_threads, :@queued_chunk_flush_interval, :@send_timeout, :@heartbeat_type, :@heartbeat_interval, :@recover_wait, :@hard_timeout, :@expire_dns_cache, :@phi_threshold, :@port, :@host, :@log, :@next_flush_time, :@last_retry_time, :@next_retry_time, :@error_history, :@secondary_limit, :@emit_count, :@nodes, :@id, :@config, :@buffer, :@writers, :@writer_current_position, :@writers_size, :@rand_seed, :@weight_array, :@rr, :@loop, :@usock, :@hb, :@timer, :@thread]\nirb(main):007:0> buffer = out.instance_variable_get(:@buffer)\n=> #<Fluent::FileBuffer:0xb4b29094>\nirb(main):008:0> buffer.instance_variables\n=> [:@uri, :@ref]\n\n```\n\n\u2193\nafter\n\n``` ruby\nirb(main):001:0> out = Engine.match('hoge').output\n=> #<Fluent::ForwardOutput:0xb4b2a7a0>\nirb(main):002:0> out.instance_variables\n=> [:@log_level, :@buffer_type, :@flush_interval, :@try_flush_interval, :@retry_limit, :@retry_wait, :@max_retry_wait, :@num_threads, :@queued_chunk_flush_interval, :@send_timeout, :@heartbeat_type, :@heartbeat_interval, :@recover_wait, :@hard_timeout, :@expire_dns_cache, :@phi_threshold, :@port, :@host, :@log, :@next_flush_time, :@last_retry_time, :@next_retry_time, :@error_history, :@secondary_limit, :@emit_count, :@nodes, :@id, :@config, :@buffer, :@writers, :@writer_current_position, :@writers_size, :@rand_seed, :@weight_array, :@rr, :@loop, :@usock, :@hb, :@timer, :@thread]\nirb(main):003:0> buffer = out.instance_variable_get(:@buffer)\n=> #<Fluent::FileBuffer:0xb4b29094>\nirb(main):004:0> buffer.instance_variables\n=> [:@buffer_chunk_limit, :@buffer_queue_limit, :@mon_owner, :@mon_count, :@mon_mutex, :@parallel_pop, :@config, :@buffer_path, :@buffer_path_prefix, :@buffer_path_suffix, :@flush_at_shutdown, :@queue, :@map]\nirb(main):005:0> exit\n```\n  Hi there,\n\nIt seems, that out_forward plugin opens a new connection every time it has any data to send.\n\nHere is the tcpdump that shows that connection has been opened twice while sending two separate log messages by means of forwarding\n\n```\nNo.     Time        Source                Destination           Protocol Length Info\n  3 3.490657    127.0.0.1             127.0.0.1             TCP      74     53174 > 5140 [SYN] Seq=0 Win=32792 Len=0 MSS=16396 SACK_PERM=1 TSval=24954460 TSecr=0 WS=32\n  4 3.490687    127.0.0.1             127.0.0.1             TCP      74     5140 > 53174 [SYN, ACK] Seq=0 Ack=1 Win=32768 Len=0 MSS=16396 SACK_PERM=1 TSval=24954460 TSecr=24954460 WS=32\n  5 3.490707    127.0.0.1             127.0.0.1             TCP      66     53174 > 5140 [ACK] Seq=1 Ack=1 Win=32800 Len=0 TSval=24954460 TSecr=24954460\n  6 3.490885    127.0.0.1             127.0.0.1             TCP      67     53174 > 5140 [PSH, ACK] Seq=1 Ack=1 Win=32800 Len=1 TSval=24954460 TSecr=24954460\n  7 3.490903    127.0.0.1             127.0.0.1             TCP      66     5140 > 53174 [ACK] Seq=1 Ack=2 Win=32768 Len=0 TSval=24954460 TSecr=24954460\n  8 3.490932    127.0.0.1             127.0.0.1             TCP      73     53174 > 5140 [PSH, ACK] Seq=2 Ack=1 Win=32800 Len=7 TSval=24954460 TSecr=24954460\n  9 3.490945    127.0.0.1             127.0.0.1             TCP      66     5140 > 53174 [ACK] Seq=1 Ack=9 Win=32768 Len=0 TSval=24954460 TSecr=24954460\n 10 3.490971    127.0.0.1             127.0.0.1             TCP      71     53174 > 5140 [PSH, ACK] Seq=9 Ack=1 Win=32800 Len=5 TSval=24954460 TSecr=24954460\n 11 3.490983    127.0.0.1             127.0.0.1             TCP      66     5140 > 53174 [ACK] Seq=1 Ack=14 Win=32768 Len=0 TSval=24954460 TSecr=24954460\n 12 3.491006    127.0.0.1             127.0.0.1             TCP      169    53174 > 5140 [PSH, ACK] Seq=14 Ack=1 Win=32800 Len=103 TSval=24954460 TSecr=24954460\n 13 3.491019    127.0.0.1             127.0.0.1             TCP      66     5140 > 53174 [ACK] Seq=1 Ack=117 Win=32768 Len=0 TSval=24954460 TSecr=24954460\n 14 3.491079    127.0.0.1             127.0.0.1             TCP      66     53174 > 5140 [FIN, ACK] Seq=117 Ack=1 Win=32800 Len=0 TSval=24954460 TSecr=24954460\n 15 3.520961    127.0.0.1             127.0.0.1             TCP      66     5140 > 53174 [FIN, ACK] Seq=1 Ack=118 Win=32768 Len=0 TSval=24954468 TSecr=24954460\n 16 3.520998    127.0.0.1             127.0.0.1             TCP      66     53174 > 5140 [ACK] Seq=118 Ack=2 Win=32800 Len=0 TSval=24954468 TSecr=24954468\n\n 29 64.559417   127.0.0.1             127.0.0.1             TCP      74     53175 > 5140 [SYN] Seq=0 Win=32792 Len=0 MSS=16396 SACK_PERM=1 TSval=24969727 TSecr=0 WS=32\n 30 64.559450   127.0.0.1             127.0.0.1             TCP      74     5140 > 53175 [SYN, ACK] Seq=0 Ack=1 Win=32768 Len=0 MSS=16396 SACK_PERM=1 TSval=24969727 TSecr=24969727 WS=32\n 31 64.559497   127.0.0.1             127.0.0.1             TCP      66     53175 > 5140 [ACK] Seq=1 Ack=1 Win=32800 Len=0 TSval=24969727 TSecr=24969727\n 32 64.559718   127.0.0.1             127.0.0.1             TCP      67     53175 > 5140 [PSH, ACK] Seq=1 Ack=1 Win=32800 Len=1 TSval=24969728 TSecr=24969727\n 33 64.559730   127.0.0.1             127.0.0.1             TCP      66     5140 > 53175 [ACK] Seq=1 Ack=2 Win=32768 Len=0 TSval=24969728 TSecr=24969728\n 34 64.559751   127.0.0.1             127.0.0.1             TCP      73     53175 > 5140 [PSH, ACK] Seq=2 Ack=1 Win=32800 Len=7 TSval=24969728 TSecr=24969728\n 35 64.559759   127.0.0.1             127.0.0.1             TCP      66     5140 > 53175 [ACK] Seq=1 Ack=9 Win=32768 Len=0 TSval=24969728 TSecr=24969728\n 36 64.559776   127.0.0.1             127.0.0.1             TCP      71     53175 > 5140 [PSH, ACK] Seq=9 Ack=1 Win=32800 Len=5 TSval=24969728 TSecr=24969728\n 37 64.559785   127.0.0.1             127.0.0.1             TCP      66     5140 > 53175 [ACK] Seq=1 Ack=14 Win=32768 Len=0 TSval=24969728 TSecr=24969728\n 38 64.559800   127.0.0.1             127.0.0.1             TCP      192    53175 > 5140 [PSH, ACK] Seq=14 Ack=1 Win=32800 Len=126 TSval=24969728 TSecr=24969728\n 39 64.559808   127.0.0.1             127.0.0.1             TCP      66     5140 > 53175 [ACK] Seq=1 Ack=140 Win=32768 Len=0 TSval=24969728 TSecr=24969728\n 40 64.559851   127.0.0.1             127.0.0.1             TCP      66     53175 > 5140 [FIN, ACK] Seq=140 Ack=1 Win=32800 Len=0 TSval=24969728 TSecr=24969728\n 41 64.599710   127.0.0.1             127.0.0.1             TCP      66     5140 > 53175 [ACK] Seq=1 Ack=141 Win=32768 Len=0 TSval=24969738 TSecr=24969728\n 42 64.600228   127.0.0.1             127.0.0.1             TCP      66     5140 > 53175 [FIN, ACK] Seq=1 Ack=141 Win=32768 Len=0 TSval=24969738 TSecr=24969728\n 43 64.600261   127.0.0.1             127.0.0.1             TCP      66     53175 > 5140 [ACK] Seq=141 Ack=2 Win=32800 Len=0 TSval=24969738 TSecr=24969738\n```\n\nIs it possible to keep the connection open up to the connection failure and reconnect attempt to the backup server?\n\nKind Regards,\nSergey\n keep-forward plugin works like a charm. \nThanks so much!\n\nRegards,\nSergey\n  There is no support for rbx-19mode on Travis CI:\nhttp://docs.travis-ci.com/user/languages/ruby/#Rubinius\n  I think this is typo. The change log was changed 2 days ago. But the date is \"2013\" /02/03\n It's my pleasure :)\n  I met troubles that fluentd does not terminate sometimes. \nUsing [sigdump](https://github.com/frsyuki/sigdump), I found that fluentd was stuck at `TCPSocket.new` on shutdown. Please see https://gist.github.com/sonots/e05d8fbcd7ab39e4a5f8 for details. \n\nSo, I implemented `SocketUtil.create_tcp_socket` and `SocketUtil.open_tcp_socket` having `connect_timeout` option as https://bugs.ruby-lang.org/issues/5101 says. \n\nPS. Please wait to merge. I will test for a week on my production environment. \n I again met situations that fluentd does not die. The sigdump is here https://gist.github.com/sonots/8797574. \n\nThis is telling as the process was stuck at `Socket.pack_sockaddr_in(port, host)` line of `SocketUtil#create_tcp_socket`. \n\n``` ruby\ndef create_tcp_socket(host, port, opts={})\n  connect_timeout = opts[:connect_timeout] || 5.0\n  addr = Socket.pack_sockaddr_in(port, host)\n  s = Socket.new(:AF_INET, :SOCK_STREAM, 0)\n  begin\n    s.connect_nonblock(addr)\n  rescue Errno::EINPROGRESS\n    IO.select(nil, [s], nil, connect_timeout) or raise Timeout::Error\n  end\n  s\nend\n```\n Let me summarize here:\n1. `SocketUtil.create_tcp_socket` resolved some of problems that fluentd does not terminate. Before applying it, I got fluentd stuck very often like once out of 3 times of fluentd cluster restart. After applying it, the frequency was reduced like once out of 10 times. \n2. Still Fluentd got stuck at `Socket.pack_sockaddr_in`, but this problem was resolved by applying patches from https://bugs.ruby-lang.org/issues/9525. \n3. (New!) Still Fluentd got stuck at `@lsock.close`. See https://gist.github.com/sonots/9392668\n\nIt looks the 3rd new issue is caused by\n\n> TCPSocket.open(listen_address, @port) {|sock| } is for stopping event loop.\n> If a connection causes a timeout, does it still affect event loop?\n\nI will implement the timeout option for Coolio::Loop#run_once as @frsyuki said at https://twitter.com/frsyuki/status/428645916333965312\n Implemented `Coolio::Loop#run(timeout)` at https://github.com/tarcieri/cool.io/pull/29 and https://github.com/fluent/fluentd/pull/297.\nI restarted my fluentd cluster 50 times, and got stuck 0 time :100: \n  great work! :+1: \n :+1:\n\nLet me write a note here. So, plugin creators can support `log_level` without breaking backward compatibility (I mean, without discarding supports of old fluentd versions) as\n\n``` ruby\nmodule Fluent\n  class FoobarOuput < Output\n    # To support log_level option implemented by Fluentd v0.10.43\n    def logger\n      @logger ||= self.respond_to?(:log) ? self.log : $log\n    end\n\n    def emit(tag, es, chain)\n      logger.info \"blah blah\"\n      chain.next\n    end\n  end\nend\n```\n\nEDIT: I came up with another way. Some people may prefer this version.\n\n``` ruby\nmodule Fluent\n  class FoobarOuput < Output\n    # Define `log` method for v0.10.42 or earlier\n    unless method_defined?(:log)\n      define_method(\"log\") { $log }\n    end\n\n    def emit(tag, es, chain)\n      log.info \"blah blah\"\n      chain.next\n    end\n  end\nend\n```\n Looks good. Especially interface for plugins and users are good.\n\nComment: `Log` itself doesn't support log rotation. There is a risk that Fluentd exhausts disk space when it outputs huge amount of logs in short time. As you know, some users reported this problem. For example, if `#emit` output error logs, it will consume GBs disk space in minutes. Fluentd's log rotation depends on an external program like logrotated. But logrotated only checks log file size every daily or weekly. If Fluentd itself supports log rotation, we can avoid this risk.\nI guess that design of this `PluginLogger` doesn't consider log rotation so far. I recommend you to check these implementation for future development:\n- Fluentd::Logger: https://github.com/fluent/fluentd/blob/v11/lib/fluentd/logger.rb\n- Fluentd::PluginLogger: https://github.com/fluent/fluentd/blob/v11/lib/fluentd/agent_logger.rb\n\n`reopen!` method is implemented in `logdev`, which is a shared instance across all Loggers.\n\n`logdev` is `ServerEngine::MultiprocessFileLogDevice` but we don't have to use it because it's ported to the latest Ruby's standard `logdev` by @sonots.\n  :+1: \n :+1:\n  LGTM :+1: \n Let's wait merging this until we agreed on the filtering design discussion here. > https://gist.github.com/repeatedly/05564d11cfa9668f08fc\n  We should be able to use headers. This is especially important when a proxy passes IP in a custom header. Might be useful for other headers as well.\n @repeatedly How about now?\n   :+1: \n :+1: \n Let me write a note here for when porting [https://github.com/sonots/fluent-plugin-record-reformer](https://github.com/sonots/fluent-plugin-record-reformer).\n1. I like to rename `output_tag` option to `tag` option (`output_tag` is obsolete)\n2. I like to discard the classic style (want to support only record directive style).\n3. I like to default `false` for `enable_ruby`.\n I like and dislike the idea.\n\nI dislike the idea because I like the fact that Fluentd is very simple and lightweight(you get only what you need),t he module architecture is obviously part of the success and that this goes against the philosophy. \n\nI like the idea because as @repeatedly says, these plugins are very simple/light and commonly used so it make sense.\n\nIn the end I would vote for!\n  It is very useful for type converting with in_tail plugin or using fluent-plugin-typecast. But for now, other plugin couldn't use this module as mix-in plugin.\nI have created [fluent-mixin-type-converter](https://github.com/y-ken/fluent-mixin-type-converter) to act calling [Fluent::TextParser::TypeConverter](https://github.com/fluent/fluentd/blob/master/lib/fluent/parser.rb#L54) as mix-in plugin.\n\nHowever, It is better to provide this function as build-in mix-in.\nWould you please give me opinion about this issue?\n\nThank you.\n What use-cases are there?\n The use-cases are mainly for input plugins which not have type. (emitting all of keys are string).\nIt is the useful solution type converting with this mixin transparently.\n\nBut I have noticed this type of mixin has less use-cases than SetXXXKeyMixin by @repeatedly 's post.\nThus, I feel like it would be better keep this mixin as fluent-mixin-type-converter.\n  Related #154\n\n(1) Add start_reading_head parameter option to in_tail input plugin.\nA new behavior:\nin_tail starts reading the head of a log file if pos file exists and fluentd starts first time.\nAn old behavior:\nin_tail starts reading the tail of a log file if pos file exists and fluentd starts first time.\n\nin_tail work like a new behavior if start_reading_head is true.\nin_tail work like a old behavior if start_reading_head is fasle.\nBy default, start_reading_head is false\n\n(2) Fix InputTestDriver\nInputTestDriver overrides Engine.emit_stream for tests before input plguin starts.\n\nBefore fix:\nOverride Engine.emit_stream for tests after in_tail input plguin starts.\nWhen input plugin reads logs which exists before it starts,  it call Engine#stream_emit but InputTestDriver does not  still override Engine#stream_emit.\n The old behavior should've worked as following:\n- in_tail starts reading the tail of a log file if pos file **does not** exist, that is, the first starting time or when `pos_file` option is not specified. \n\nSo, I think the new behavior should work as following:\n- in_tail starts reading from the head of a log file if pos file **does not** exist, that is, the first starting time or when `pos_file` option is not specified. \n\nIn both case, in_tail should continue to read from the recorded position if pos file exists. \n A suggestion for the name: `read_from_head`\n\nAny other opinions?\n ```\nA suggestion for the name: read_from_head\n```\n\nI think it is a good name because  the opposite of tail is  head. It is easy to imagine opposite word of tail.\n @repeatedly is 'read_from_head' okay for you?\n @sonots \nsonots says:\n\n> in_tail starts reading from the head of a log file if pos file does not exist, that is, the first starting time or when pos_file option is not specified.\n\nWhen pos_file option is not specifed, pos file does not exsits.\nLogs is  read duplicately in the following case:\n- in_tail starts reading log file from head\n- in_tail is shoutdowned.\n- in_tail starts reading log file from head\n\npos file does not existed so in_tail reads logs from head duplicately.\nI think that in_tail should read logs form tail when pos_file option is not specified.\n @suzukaze it (reading from tail) can be achieved by the original (old) behavior. The duplication issue is the reason why we did not have `read_from_head` option, but #154 is saying as he still wants it. \n @sonots, @repeatedly \nOK, I will implement in_tail  to work as the following:\n\n> in_tail starts reading from the head of a log file if pos file does not exist, that is, the first starting time or when pos_file option is not specified.\n\nrepeatedly says\n\n> I think in_tail should print the warning when read_from_head is true without pos_file parameter.\n\nI will implelement the above.\n To build a new brach passed in ruby 1.9.3 but failed in 2.0.0-p353.\nI'll check it.\n\nAn old branch is:\nhttps://github.com/suzukaze/fluentd/commits/in_tail_backup\n- Add start_reading_head cofing parameter\n- Override Engine.emit_stream for tests before input plguin start\n  I'll test commits in Travis CI of my repository because my commits causes Travis CI build error.\n @repeatedly \nI delete 2 tests for testintg rotate when fluent doesn't start, because they cannot work in travis-ci.\nI use CONFIG_WITHOUT_POST_FILE + %[]\n\nI push commits, Travis CI doest not start building, please start build in travis CI.\n\nIn my repository, build passes\nhttps://travis-ci.org/suzukaze/fluentd/builds/19396137\n Deleted 2 tests are important because we make sure that fluentd reads rotated logs when it doesn't start.\n\nhttps://github.com/fluent/fluentd/blob/master/lib/fluent/plugin/in_tail.rb#L80\n- Ruby 1.9.3 on travis ci pass.\n- Ruby 2.0.0 on travis ci faild.\n  @thread variable in shutdown medhod of in_tail.rb is nil. @thread variable is set instance by start method of in_tail.rb. In shutdown method @thread is not nil normally.\n  \n  > https://travis-ci.org/fluent/fluentd/jobs/18039910\n  > [111/130] TailInputTest#test_rotate_file_when_fluent_doesnot_start_with_\n  > 1) Error:\n  > test_rotate_file_when_fluent_doesnot_start_with_read_from_head(TailInputTest):\n  > TypeError: wrong argument type nil (expected Data)\n  > ...\n  > [NOTE]\n  > You may have encountered a bug in the Ruby interpreter or extension libraries.\n  > Bug reports are welcome.\n  > For details: http://www.ruby-lang.org/bugreport.html\n\nI think the failed reason is Linux problem(Ruby 2.0.0)\n @repeatedly \n\nI installed ruby 2.0.0-dev in Ubuntu but I coudn't install cool.io v1.1.1 because of compile errors.\n$ gem install cool.io -v '1.1.1'\n\nerror log:\nhttps://gist.github.com/suzukaze/9806306#\n\nI give up. I close PR.\nThank you so far.\n  Our team is trying to determine if this makes sense or would be possible. Currently, we're using Debian and the we can just add the td-agent user to the 'adm' group, but this may not always be the case. We'd prefer not to run fluentd as root, and we'd prefer to keep certain logfiles not world-readable. \n\nThis may be be better suited to a google groups discussion. Suggestions, or explanation as to why this is not preferable, would be fantastic. \n No reply. Please reopen this issue if you have detailed comment.\n  At submit_buffer, fixed writer selection makes throughput bottleneck.\nFix to select a writer by rough round-robin,\n- to reduce bottlenecks\n- not to reduce performance without locks\n\nWhat is important is to select a different writer from previous submits, not to select \"strictly next\" writer.\nThat is why this patch doesn't include locks.\n Tests added!\n  https://github.com/fluent/fluentd/issues/240\nhttps://github.com/fluent/fluentd/issues/107#issuecomment-13671225\n slove it\n maybe your  /\\s_(?:\\#._)?$/.match(line)[0].length is 0\uff1fmy env  have an '\\n'.Later on, I then tested under\n New configuration format also resolve this problem.\nhttps://github.com/fluent/fluentd/pull/293\n  is it possible to steam minute files to s3? we have an application which create new file every minute with filename_CURHOUR_CURMINUTE.txt\n\nthanks\nvijeesh\n  my format is separator is \"# \"\n\ntd-agent.conf\n\n....\nformat /(?<yewu>[a-zA-Z0-9_\\/.-]_)#(?<time>[^ ]_\\s_[^ ]_ [^ ]_) ._sshd._from (?<loginip>[^ ]_)._/\n....\nor\nformat /(?<yewu>[a-zA-Z0-9_\\/.-]_)#(?<time>[^ ]_\\s_[^ ]\\* [^ ]_) ._sshd._from (?<loginip>[^ ]_).*/\nbut problem is coming\n\n2013-12-23 14:23:37 +0800 [info]: starting fluentd-0.10.39\n2013-12-23 14:23:37 +0800 [info]: reading config file path=\"td-agent.conf\"\n2013-12-23 14:23:37 +0800 [info]: using configuration file: <ROOT>\n  <source>\n    type tail_ex\n    path /data/log\n    format /(?<yewu>[a-zA-Z0-9_\\/.-]_)\n    pos_file /var/tmp/securelog\n    tag audit.securelog\n  </source>\n  <match audit.securelog>\n    type file\n    path /tmp/test\n  </match>\n</ROOT>\n2013-12-23 14:23:37 +0800 [info]: adding source type=\"tail_ex\"\n2013-12-23 14:23:37 +0800 [error]: config error file=\"td-agent.conf\" error=\"Unknown format template '/(?<yewu>[a-zA-Z0-9_\\/\\.\\-]_)'\"\n2013-12-23 14:23:37 +0800 [info]: process finished code=256\n2013-12-23 14:23:37 +0800 [warn]: process died within 1 second. exit.\n 1.can you give me a patch,my work is starting\n2.What about time release next version\nthx\n i modify v10 config parse code, slove it,thx\n hello,v0.10.42 still not fix it\n Will be fixed by v1 configuration format since next Fluentd version.\n  3rd party buffer plugins needs hook point how to check whether chunk should be flushed or not.\nChunks are flushed for many reasons, like\n- how many data stored in it\n- how many data stored in one second\n- ... and many other types of buffers may exists\n Hmm, I should commit directly, with this pull-request comment on commit comment.\n I'm sorry that I cannot wait for travis-ci tests before commit it.\nSome minutes later of that, I fixed bugs of that commit. https://travis-ci.org/fluent/fluentd/builds\n  To do flushing with more high frequency with floating point value of flush_interval\n This patch does not breaks both of compatibilities and internal/external apis.\nSo I'll merge this myself.\n I feel the difference between 'flush_interval' and 'try_flush_interval' is very ambiguous. I understood, but users may not.\n `try_flush_interval` is very minor option for users who wants intervals sub1, so I think naming is not important...\n\nDo you have any other idea for this option's name?\n Once I thought `enqueue_interval` would be suitable, but looks it is not. Hmm... What about `run_interval`? It would be still ambiguous, though. I can't come up with any alternatives more...\n Can we do this?\n- if flush_interval is less than 1.0, set try_flush_interval = flush_interval / 2.0\n- users can set \"flush_interval 0.1\"\n- thus we don't have to add confusing option.\n Automatically configured `try_flush_interval` seems very confusing.\nWhat value should we set it\n- for `flush_interval 60s` ? 1s(current default: 1/60)? 30s(flush_interval / 2.0)?\n- for `flush_interval 0.5` ? 0.008? 0.25?\n- for `flush_interval 3s` ? 0.05? 1.5?\n\nMoreover, the worst case of real intervals per flushes is `flush_interval + try_flush_interval`.\nThis is a bother for serious situations about flush timing. Actual flush intervals and configured `flush_interval` has different values and we cannot understand why these values are different (without implementation knowledges).\n\nThese are why explicit configuration options `try_flush_interval` should exists.\n We don't have to change existent behavior. We need small try_flush_interval only when flush_interval is less than 1.0.\n\ntry_flush_interval = [1.0, flush_interval/2.0].min\n What do you mean about the worst case?\nDo you mean possibility if having 0.75s (0.5 + 0.5/2) interval when flush_interval == 0.5 is too long?\n How do you think should flush threads run if num_threads >= 2? This is not necessary for v10, though.\n1. All threads run roughly every flush_interval seconds (write method  will be called num_threads times every flush_interval seconds) (current behavior)\n2. Exactly one thread runs roughly every flush_interval seconds.\n3. Exactly one thread runs exactly every flush_interval seconds\n Yes. 0.75s is too long for `flush_interval 0.5`. That is 1.5x longer than expected...\n More complex mechanism for flushing (flush threads) looks bad for me.\n1. Current default configuration `60s(flush_interval) + 1s` satisfy expectations of almost all of users\n2. For serious situations, simple mechanism and explicit configurations are good to understand\n3. More maintenance cost for v10 looks bad idea\n My alternatives about this problems are:\n- to rename from `try_flush_interval` to anyone\n- to fix `flush_interval` specifications like below\n\nFor precise `flush_interval` and automatic configuration, we can do this (2nd alternative above):\n\n``` ruby\ninternal_try_flush_interval = min(1.0, flush_interval / 10.0)\ninternal_flush_interval = flush_interval - internal_try_flush_interval\n# use internal_flush_interval instead of @flush_interval\n```\n\nBut this code works differently from current versions of BufferedOutput.\n Apparently, v11 already implements idea 2 (as I commented above).\nI think it's ok to have additional try_flush_interval option for v10. And v11 will obsolete it.\n  Hello,\n\nIt looks like someone (maybe you) added fluentd to Code Climate a few months back, and I thought you might want to know.\n\nI work at Code Climate -- we do automated code reviews for Ruby and JavaScript using static analysis -- and we're completely free for open source. You can view your metrics here: https://codeclimate.com/github/fluent/fluentd\n\nIn case you want this information to be available to contributors, this PR just adds a dynamic badge to the README (similar to Travis) that displays the code quality GPA\n\nIf you have any questions, let me know.\n\nI hope you find Code Climate useful.\n\nCheers,\nMike\n :+1:\nhttps://codeclimate.com/github/fluent/fluentd\nAt least, there are nothing to break code or documents.\n  hi\ni can't understand one thing\n\nwhen i transfer an wrong structure events to the fluentd service,  then it will start to retry, at that time, i transfer some correct structure events to fluentd, but they will not be output  timely because it had been still retrying.\n\ni just want to know , whether this is required to design or i had missed some configuration ?\n\ncan multiple threads let the new events output and retrying at the same time ? and now fluentd support multiple threads ?\n thanks && i just see your comment.\nfor example\uff1a\ni create mysql table with columns:\n\n```\nid int(11) NOT NULL AUTO_INCREMENT,\n`job_name` varchar(255) NOT NULL DEFAULT '',\n`host` varchar(100) NOT NULL DEFAULT '',\nPRIMARY KEY (`id`),\n```\n\nthen i transfered one log like : \n\n```\n$logger->post(\"job_monitor.access\", {\n    \"job_name\"      =>  \"test\",\n});\n```\n\ni didn't transfer \"host\", then the fluentd log will report : \n\n```\ntemporarily failed to flush the buffer. next_retry=2013-12-27 10:52:24 +0800 error_class=\"Mysql2::Error\" error=\"Column 'host' cannot be null\" instance=23456251573740\n```\n\nit will keep retrying until the times of retry reach the number of \"retry_limit\" .\n\nAt that time, i transfered an correct log : \n\n```\n$logger->post(\"job_monitor.access\", {\n    \"job_name\"      =>  \"test\",\n    \"host\"               =>  \"myhost\",\n});\n```\n\nThis log will be blocked to output to mysql until fluentd retry's stoped.\n\nThen i used num_threads && set to 3 , like : num_threads 3, but it didn't work, the problem still continue.\n The following is my configuration:\n\n``` apache\n<match job_monitor.access>\n    type mysql\n    buffer_type memory\n    buffer_chunk_limit 512m\n    buffer_queue_limit 256\n    num_threads 3\n    retry_limit 7\n    retry_wait 5s\n    host 127.0.0.1\n    port 3308\n    database dc\n    username root\n    password secret\n    table job_log\n    key_names job_name,start_time,end_time,spend_time,error_info,level,host\n    columns job_name,start_time,end_time,spend_time,error_info,level,host\n    flush_interval 0s\n</match>\n```\n Was this issue solved with #245 ? @repeatedly \n  Looks good :+1:\n  Sorry for the late reply.\nNow we are still work for a technical problem in other area, so give us a little time. \nPlus, we think need some idea for this issue. Please wait.\n Could you close this issue at present ?\nWe need those codes currently to merge with trunk-code efficiently, and to compare Linux behavior and Windows behavior.\n In future,We'll want to try this issue again ,after we'll get a better 'continuous' way to merge with trunk-code and get a better 'stable' version.  \n   adding elastic search and kibana inegration steps as part of the installation or the rpm file installation steps \n  LGTM :+1: \n :+1: \n I commented for bool type https://github.com/fluent/fluentd/pull/224#issuecomment-30575366\n :+1: \n :+1: \n  Large refactoring\n  Hi,\n\nOn Debian Wheezy I get the following error:\n-- 8< --\ndpkg: dependency problems prevent configuration of td-agent:\ntd-agent depends on libssl0.9.8 (>= 0.9.8k-1); however:\nPackage libssl0.9.8 is not installed.\n-- >8 --\n\nCan you please either provide an updated version of this package or provide the debian source package so that one can repack the .deb?\n\nGreetz\nAndre\n Hi, thanks for the reply.\n\nSorry, I missed the source package completely. Will try it on Debian 7.\n\nGreetz,\nAndre\n\nPS: Debian Squeeze will soon loose support, Wheezy is define as stable in May 2013. \n +1\n +1 for Debian support. I'd like to run Fluentd on Google Compute Engine (Debian image)\n We're in a process of migrating the build script from custom to omnibus-ruby. That should make us easier to support multiple versions / platforms. > https://github.com/repeatedly/omnibus-td-agent\n Great to hear that. Any estimate on when you'll be done with the migration to omnibus-ruby?\n @kzk do you have an idea of when this migration will be complete?\n @hernandesbsousa Our plan is changed.\nKeeping compatible is hard so we wil provide td-agent2 using omunibus-ruby.\ntd-agent2 doesn't have a directory strucutre compatiblity with old td-agent (from /usr/lib/fluent to /opt/td-agent).\n\nI also post the td-agent2 idea in Fluentd ML.\nhttps://groups.google.com/forum/#!topic/fluentd/YSZvylqbO60\n\nCurrenlty, we are now clean up td-agent2 and testing the installation.\nI want to release td-agent2 in the next week or early May.\n That's great news, thank you very much! Will be looking forward to this new release\n  interesting!, but\n\n`true` or `yes` to true in bool type is not enough. `1` should also be supported (think of log outputs from perl). Some people from other programming language communities would have similar opinions for this like supporting `True`. \n In my opinion, because ruby has the boolean type, treating the word `true` as `true` is enough for ruby. I believe rubyist will not output `0` into the log file to express boolean `true` _never_.\n\n```\nLogger.new(STDOUT).info(true) #=> I, [2013-12-09T01:23:02.180411 #6431]  INFO -- : true\n```\n I don't have positive impression to add syntax extension to regexp w/ named capture.\nOn the other hand, I understand importance of typing of in_tail 's output data.\n @repeatedly Yes, that is simple solution and doesn't need change regular expressions.\n @repeatedly \n- `0`, `yes`, `false`, `False`, and `FALSE` to false\n- `1`, `no`, `true`, `True`, and `TRUE` to true\n- otherwise, undetermined (whichever you like)\n Sorry, mistake ^^;\n- `0`, `no`, `false`, `False`, and `FALSE` to false\n- `1`, `yes`, `true`, `True`, and `TRUE` to true\n- otherwise, undetermined (whichever you like)\n  LGTM :+1: \n :ok_hand: \n Looks good :+1:\n  :+1: \n  How do you suppress regular messages (non-stacktrace messages)?\n I added some comments on 993eb27.\n Hi, let me give my 50ct on this topic, althought I'm kind of new to fluentd.\nFor me as a user, as and administrator of a system using td-agent/fluentd it is important to see the log messages they make sense to me, they are short and meaningful. Only in cases where I want to debug and understand certain issues I'm interested in stacktraces, I'm a user, not a developer at the end.\nIn my opinion stacktraces should only be logged in an \"trace\" log level (which is more than the error level) or if a certain commandline option is given.\n\nAgain, just my 50ct. Keep on the awesome work!\n\nMarkus\n I want some message like ' ... and suppressed same stacktrace' instead of stacktrace itself.\n @repeatedly @thekorn may say that `Logger#stacktrace` should not output nothing in normal log level (without `-v` options). Isn't it?\n\n@repeatedly Yes, we need log lines that indicates `stacktrace should be printed`(but suppressed). Without such indicator, we cannot see whether normal error log, or raised and unexpected errors.\n Right, what I wanted to say is: with any logging option lower than -vv (means -q, -qq and -v) I don't want to see any stacktrace in the logs\n As a developer of Fluentd, having stacktrace at least once in log file is helpful even in users' environment. It makes easy to improve Fluentd.\nLet's say Fluentd has a bug and an user reported it on mailing list. I'll ask the user to attach log file. If there is stacktrace, it makes very easy to investigate the problem. Otherwise, I need to ask the user to investigate the issue on their environment. Especially if the problem is hard to reproduce, it takes long time.\n @repeatedly I agree with your decision!\n :+1: \n I also think that stable versions of fluentd should not reports its stack traces in non-debugging level logs in near/far future.\n  Sounds good.\nOnce you removed stacktrace, optionally, you can add suppression into the logger.\nSyslogd suppresses repeated messages for a while. If application doesn't show stacktrace, it repeats exactly same message every time it `emit`s a record. It should be possible for logger to suppress the repeated messages.\n 'fix-stacktrace-explosion' branch looks good! :+1: \n  For #218\n :+1:\n You mean, you like to change the default behavior? The document http://docs.fluentd.org/articles/out_forward#buffer-parameters is telling currently as\n\n> The interval between write retries, and the number of retries. The default values are 1.0 and 17, respectively. retry_wait doubles every retry (e.g. the last retry waits for 131072 sec, roughly 36 hours).\n\nI will modify the code if I can get agreement to change the default behavior, and a suitable default value. \n Good point. Maybe we shouldn't change it. Then having unlimited default value is just fine.\n Okay, I'll merge!\n :clap:\n  I am using in_tail plugin to gather mysql_slow log.\nand we have some problems sometimes. it is encoding problem.\n\nour slow query was included Japanese character. \nthis Japanese character has been occurred encoding error.\n\ndo you know this problem?\nand can you resolve this problem?\n I am using fluent-plugin-mysqlslowquery (https://github.com/taka84u9/fluent-plugin-mysqlslowquery)\nand it is using in_tail plugin. \n\nI attach slow-query and error log.\ncould you please check this query and error log?\n\nthank you for your cooperation\n\n---\n\n[QUERY]\n # Time: 131121 10:09:31\n # User@Host: db_cia[db_cia] @ wsystool101d.db.rakuten.co.jp [172.25.26.141]\n # Query_time: 279.677715  Lock_time: 0.000201 Rows_sent: 1  Rows_examined: 19577911\n SET timestamp=1384996171;\n SELECT count(DISTINCT `issues`.id) AS count_all FROM `issues`  LEFT OUTER JOIN `projects` ON `projects`.id = `issues`.project_id  LEFT OUTER JOIN `journals` ON `journals`.journalized_id = `issues`.id AND `journals`.journalized_type = 'Issue'WHERE ((((LOWER(subject) LIKE '%\u3046\u3044\u3058\u3085\u3093%') OR (LOWER(issues.description) LIKE '%\u3046\u3044\u3058\u3085\u3093%') OR (LOWER(journals.notes) LIKE '%\u3046\u3044\u3058\u3085\u3093%') OR issues.id IN (SELECT customized_id FROM custom_values WHERE customized_type='Issue' AND customized_id=issues.id AND LOWER(value) LIKE '%\u3046\u3044\u3058\u3085\u3093%' AND custom_values.custom_field_id IN (1,2,3,4,5,8,9,10,13,14,15,17,18,20,21,22,25)))) AND (((projects.status=1 AND projects.id IN (SELECT em.project_id FROM enabled_modules em WHERE em.name='issue_tracking')) AND ((projects.is_public = 1 AND ((issues.is_private = 0 OR issues.author_id = 2 OR issues.assigned_to_id IN (2))))))));\n\n[ERROR]\n2013-11-21 10:09:31 +0900 [warn]: emit transaction failed  error_class=Encoding::UndefinedConversionError error=#<Encoding::UndefinedConversionError: \"\\xE3\" from ASCII-8BIT to UTF-8>\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/json-1.7.7/lib/json/common.rb:223:in `encode'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/json-1.7.7/lib/json/common.rb:223:in`generate'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/json-1.7.7/lib/json/common.rb:223:in `generate'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/json-1.7.7/lib/json/common.rb:394:in`dump'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-out-http-0.1.0/lib/fluent/plugin/out_http.rb:80:in `set_json_body'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-out-http-0.1.0/lib/fluent/plugin/out_http.rb:68:in`set_body'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-out-http-0.1.0/lib/fluent/plugin/out_http.rb:88:in `create_request'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-out-http-0.1.0/lib/fluent/plugin/out_http.rb:117:in`handle_record'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-out-http-0.1.0/lib/fluent/plugin/out_http.rb:123:in `block in emit'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/event.rb:122:in`call'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/event.rb:122:in `block in each'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/event.rb:121:in`each'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/event.rb:121:in `each'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-out-http-0.1.0/lib/fluent/plugin/out_http.rb:122:in`emit'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/match.rb:36:in `emit'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/engine.rb:146:in`emit_stream'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-mysqlslowquery-0.0.2/lib/fluent/plugin/in_mysql_slow_query.rb:46:in `receive_lines'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:324:in`call'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:324:in `on_notify'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:155:in`on_notify'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:260:in `call'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:260:in`on_change'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run_once'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in`run'\n  2013-11-21 10:09:31 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:83:in `run'\n2013-11-21 10:10:25 +0900 [info]: detected rotation of /MYSQL-LOG/test101/log/slow-queries.log; waiting 5 seconds\n2013-11-21 10:10:27 +0900 [info]: following tail of /MYSQL-LOG/test101/log/slow-queries.log\n I think that our slow query is UTF-8 basically. \nour database character set is UTF-8. and OS character set is UTF-8 too.\n\n\u3010OS\u3011\n14:01:39 leeuijun01@dm-systool101z % cat /etc/sysconfig/i18n\nLANG=\"en_US.UTF-8\"\nSYSFONT=\"latarcyrheb-sun16\"\nSUPPORTED=\"en_US.UTF-8:en_US:en:ja_JP.UTF-8:ja_JP:ja\n\n\u3010MYSQL\u3011\nmysql> show variables like \"%char%\";\n+--------------------------+--------------------------------------------------------------+\n| Variable_name            | Value                                                        |\n+--------------------------+--------------------------------------------------------------+\n| character_set_client     | latin1                                                       |\n| character_set_connection | latin1                                                       |\n| character_set_database   | utf8                                                         |\n| character_set_filesystem | binary                                                       |\n| character_set_results    | latin1                                                       |\n| character_set_server     | utf8                                                         |\n| character_set_system     | utf8                                                         |\n| character_sets_dir       | /test101/mysql-5.5.28-linux2.6-x86_64/share/charsets/ |\n+--------------------------+--------------------------------------------------------------+\n8 rows in set (0.00 sec)\n I am wondering why is translating ASC-II format.\n\nyou mean that , \nin_tail is not problem to send the result to out-http ?\nbut ,out-http is not using standard JSON. this is problem you think.\nis it OK?\n Could you upload slow query log file, only problem lines, on somewhere?\nVia this github form, I can't get actual log.\n\u21d2 is it OK? if you want that log file, I can send you this log by email or something.\n thank you for your pull request.\nI will check this problem once again after merge your pull request.\n Thanks for the pull request. I've released a new version of out-http plugin, 0.1.1, that includes the fix.\n @repeatedly @ento thank you so much for your cooperation!!!\n    I'm using the tail plugin for apache logs and `Time.strptime` is throwing an `argument out of range` error. \n\nStack track:\n\n```\n  2013-10-21 10:03:30 +0000 [warn]: plugin/in_tail.rb:99:rescue in block in receive_lines: \"X.X.X.X - - [21/Oct/2013:10:03:29 +0000] \\\"GET / HTTP/1.1\\\" 200 11621 \\\"-\\\" \\\"UA\\\"\" error=\"argument out of range\"\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/rubies/ruby-1.9.3-p448/lib/ruby/1.9.1/time.rb:202:in `local'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/rubies/ruby-1.9.3-p448/lib/ruby/1.9.1/time.rb:202:in `make_time'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/rubies/ruby-1.9.3-p448/lib/ruby/1.9.1/time.rb:271:in `parse'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/parser.rb:44:in `call'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/parser.rb:44:in `parse'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/parser.rb:84:in `block (2 levels) in call'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: <internal:prelude>:10:in `synchronize'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/parser.rb:84:in `block in call'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/parser.rb:80:in `each'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/parser.rb:80:in `call'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/parser.rb:349:in `parse'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:114:in `parse_line'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:94:in `block in receive_lines'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:91:in `each'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:91:in `receive_lines'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:324:in `call'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:324:in `on_notify'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:155:in `on_notify'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:260:in `call'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:260:in `on_change'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run_once'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run'\n  2013-10-21 10:03:30 +0000 [debug]: plugin/in_tail.rb:100:rescue in block in receive_lines: /usr/local/rvm/gems/ruby-1.9.3-p448/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:83:in `run'\n```\n\nMy time format is `%d/%b/%Y:%H:%M:%S %z`. \n\nThis was working fine for about 3 months and stopped working a few days ago (after software updates).\n\nAny idea why it's throwing this error?\n\nThanks for your help.\n If I run the following through irb on the server it does seem to work though:\n\n```\n1.9.3p448 :003 > Time.strptime(\"21/Oct/2013:09:43:04 +0000\", \"%d/%b/%Y:%H:%M:%S %z\")\n => 2013-10-21 09:43:04 +0000 \n```\n Oh I'm sorry I didn't see that - so this is fixed for next release?\nWhen do you think that will be released?\n Thanks it's fixed :smile: \n  This pull-request is for #195\n- to pass Kernel functions\n\n``` ruby\nfile_path_list = ruby.open(\"/path/to/log_file.list\"){|f| f.readlines}.map(&:chomp)\nfile_path_list.each do |path_string|\n  source {\n    type \"tail\"\n    path path_string\n    ...\n  }\nend\n```\n- to provide blocks with normal ruby syntax/features\n\n``` ruby\nfile_path_list = ruby {\n  require 'net/http'\n  res = Net::HTTP.start(\"ourserver.local\", 80) {|http|\n    http.get('/server_list.txt')\n  }\n  res.split(/\\r?\\n/)\n}\nfile_path_list.each do |path_string|\n  ...\nend\n```\n :+1: Awesome!\n ping? @frsyuki @repeatedly \n `ruby` keyword is enough for almost all of use cases, I think. (ex: `ruby.open()`).\nAnd `ruby.function()` needs very small maintenance cost because of very simple implementation.\n I've merged!\n  Trying to feed fluentd with Apache access_log fails with error :\n\n<pre>\n2013-10-09 17:24:04 +0200 [warn]: plugin/in_tail.rb:99:rescue in block in receive_lines: \"aaa.bbb.ccc.ddd - - [08/Oct/2013:02:00:30 +0200] TLSv1 DHE-RSA-AES256-SHA \\\"POST /DmcWS/1.4.1/SupervisionWS HTTP/1.1\\\" 200 37191 0/84850\" error=\"argument out of range\"\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /usr/share/ruby/time.rb:264:in `local'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /usr/share/ruby/time.rb:264:in `make_time'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /usr/share/ruby/time.rb:331:in `parse'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/parser.rb:44:in `call'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/parser.rb:44:in `parse'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/parser.rb:84:in `block (2 levels) in call'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/parser.rb:84:in `synchronize'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/parser.rb:84:in `block in call'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/parser.rb:80:in `each'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/parser.rb:80:in `call'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/parser.rb:349:in `parse'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:114:in `parse_line'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:94:in `block in receive_lines'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:91:in `each'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:91:in `receive_lines'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:324:in `call'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:324:in `on_notify'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:155:in `on_notify'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:260:in `call'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:260:in `on_change'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run_once'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run'\n  2013-10-09 17:24:04 +0200 [debug]: plugin/in_tail.rb:92:block in receive_lines: /home/ple/.gem/ruby/gems/fluentd-0.10.39/lib/fluent/plugin/in_tail.rb:83:in `run'\n</pre>\n\n\nFluentd configuration :\n\n<pre>\n&lt;source>\n  type tail\n  path /tmp/ssl_access_log\n  pos_file /tmp/ssl_access_log.pos\n  tag apache.ssl_access_log\n  format /^(?&lt;client>[^ ]*) - - \\[(?&lt;time>[^\\]]*)\\] (?&lt;ssl_protocol>[^ ]*) (?&lt;ssl_cipher>[^ ]*) \"(?&lt;method>\\S+)(?: +(?&lt;path>[^ \\?]*)(\\?(?&lt;QS>[^ ]*))? +\\S*)?\" (?&lt;code>[^ ]*) (?&lt;size>[^ ]*) [0-9]+/(?&lt;micros>[^ ]*)/\n  time_format \"%d-%b-%Y:%H:%M:%S %z\"\n&lt;/source>\n</pre>\n\n\nRuby version :\n\n<pre>\nruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-linux]\n</pre>\n\n\nApache log format :\n\n<pre>\n%h %l %u %t %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %>s %b %T/%D\n</pre>\n  #138 was partially fixed and then closed, and I was wondering if we could get the second suggestion implemented.\n\nBasically, fluentd (in our environment) writes it's logs to <path>/fluentd, where 'fluentd' is a symlink to another directory on the system. The problem is that all of the directories that fluentd makes as a service are created as '0777', which is definitely not preferable.\n\nMy assumption is that since the base directory for fluentd is a symlink, it inherits the directory permissions from that. Can we explicitly make it a default of '0755' instead, or let it be configurable?\n +1 to this issue. I've got the same problem and am currently handling this manually through puppet (changing permissions recursively in my log directory.)\n\nIn my case I don't use symlinks in any way (for example, in the form of parent directories) but see the same behavior for all files/directories created by the td-agent daemon.\n Sorry - this may be outside the scope of fluentd itself, I'm using the file-alternative plugin to write some directories that end up with these permissions. However, in my testing I've manually set the permissions option to the file-alternative plugin's call to mkdir_p with the same results, so I feel like this issue is probably related.\n  This is a weird one, so bear with me.\n\nI aggregate both the auth and authpriv logs on all our boxes (Ubuntu) via syslog -> fluentd. The weird behavior I am seeing is that from one (and only one, the same one always) of my hosts (let's call it 'login02'), fluentd is logging that hosts logs to separate files instead of the regular file.\n\nLet me give some directory listings, and explain:\n\n``` bash\nuser@host:<path_to_logs>$ ls -alh auth.log.20131001*\n-rw-r--r-- 1 td-agent td-agent 488K Oct  1 01:10 auth.log.2013100100_0.log\n-rw-r--r-- 1 td-agent td-agent  496 Oct  1 07:10 auth.log.2013100100_10.log\n-rw-r--r-- 1 td-agent td-agent  344 Oct  1 07:11 auth.log.2013100100_11.log\n-rw-r--r-- 1 td-agent td-agent  688 Oct  1 07:12 auth.log.2013100100_12.log\n-rw-r--r-- 1 td-agent td-agent  344 Oct  1 07:13 auth.log.2013100100_13.log\n-rw-r--r-- 1 td-agent td-agent  344 Oct  1 07:14 auth.log.2013100100_14.log\n-rw-r--r-- 1 td-agent td-agent  496 Oct  1 07:15 auth.log.2013100100_15.log\n-rw-r--r-- 1 td-agent td-agent  344 Oct  1 07:16 auth.log.2013100100_16.log\n-rw-r--r-- 1 td-agent td-agent  344 Oct  1 07:17 auth.log.2013100100_17.log\n-rw-r--r-- 1 td-agent td-agent  344 Oct  1 07:18 auth.log.2013100100_18.log\n-rw-r--r-- 1 td-agent td-agent  344 Oct  1 07:19 auth.log.2013100100_19.log\n-rw-r--r-- 1 td-agent td-agent  344 Oct  1 07:00 auth.log.2013100100_1.log\n```\n\nThis is just a snippet, but it demonstrates what I am seeing. Basically, in the file 'auth.log.2013100100_0.log', we have all the auth logs for all the machines in my network EXCEPT login02, for the first hour of the day ('auth.log.2013100101_0.log' has the next hours worth without login02, etc). All the other files for that hour have the logs for login02, but nothing else.\n\nI end up with basically hundreds of logs for every hour, but most of them just have 2 or 3 log entries in them for login02.\n\nAny idea? There doesn't seem to be anything special about login02 in my setup (the syslog setup is the same on all the boxes).\n\n-Andy\n\nHere's the relevant section in my config on the aggregator:\n\n``` bash\n<match system.auth.**>\n  type file\n  buffer_chunk_limit 256m\n  path <path_to_logs>/auth.log\n  symlink_path <path_to_logs>/auth.log.current\n  time_slice_format %Y%m%d%H\n</match>\n```\n This is definitely weird situation. I have no idea why this happens.\nIt seems to me that logs flushed hourly and minutely use same path.\n could you give us your entire configuration?\n So, the only other part of my configuration that relates to the auth logs is the syslog directive that I use to push logs to fluent:\n\n``` bash\nauth.*,authpriv.*   @<fluentd_host>:24225\n```\n\nAnd then in my td-agent.conf on the aggregator, I have this also:\n\n``` bash\n<source>\n  type syslog\n  port 24225\n  tag system\n</source>\n```\n\nDo you guys want all of the rest of my configuration? I'll sanitize it and post it if you want.\n I'll check the cause of this problem. Please tell me in detail if you can.\nYour configuration seems to flush a buffer every hour, but your log files are emitted every minite and the size is under buffer_chunk_limit. This is very weird.\n1. Please give us at least 20 consecuive log files in chronological order by doing a following command. `$ ls -alhtr auth.log.20131001*`\n2. When this problem happens, please confirm there are two or more buffer files(which are with random suffix like `auth.log.201310282127.b4e9cc3778f9242ee`) or not and what is written to those files.\n3. Can you _always_ reproduce this problem even after restarting td-agent?\n This issue happens in my environments, and finally I figured out why this happens. I think this is not a bug and can't be fixed.\n\nThis issue is caused by a large gap of time in your servers. Your server `login02`'s time is behind more than one hour. Logfile names are determined with reference to time of a message, so a new buffer file is generated when old message is arrived and flushed immediately every minutes. As a result, many log files with small data size are created.\n\nTo avoid this problem, you had better set up NTP. This is recommended by [official docs](http://docs.fluentd.org/articles/before-install). And set `time_slice_wait` parameter to higher value.\n\n#201 is also caused by this issue, so that is not a problem.\n\n---\n\nYou can reproduce this with following configuration and scripts. After first flush is happened, new log file will be generated every minutes.\n\n```\n<source>\n  type forward\n</source>\n<match test>\n  type file\n  path ./hoge\n  time_slice_format %Y%m%d_%H\n  compress gz\n</match>\n```\n\nA script that generates messages with current timestamp.\n\n```\n#!/bin/env ruby\nrequire 'fluent-logger'\nlog = Fluent::Logger::FluentLogger.new(nil, :host=>'localhost', :port=>24224)\nloop do\n  log.post_with_time(\"test\", {\"foo\"=>\"bar1\"}, Time.now)\n  sleep 1\nend\n```\n\nA script that generates messages with timestamp half an hour ago.\n\n```\n#!/bin/env ruby\nrequire 'fluent-logger'\nlog = Fluent::Logger::FluentLogger.new(nil, :host=>'localhost', :port=>24224)\nloop do\n  log.post_with_time(\"test\", {\"foo\"=>\"bar2\"}, Time.now - 30*60)\n  sleep 1\nend\n```\n  Hi,\n\nCurrently, fluentd does not implement bandwidth feature. \nWe could control bandwidth with `chunk_limit` and `flush_intervals` but it's very roughly. \nfluentd has possibility to spike network traffic.\n\nWhy fluentd spikes traffic? I suspect ruby's `copy_stream` as it doesn't care about traffic.\n- [ruby's copy stream implementation]\n  https://github.com/ruby/ruby/blob/trunk/io.c#L10394\n\nBandwidth limit option will provide controllable network traffic feature. Writer thread will sleep when it exceeds bandwidth limit per each second If you set this option.\nI know this is not strict bandwidth limit feature. but this will prevent spikes in most cases.\n\nAdded Configuration:\n\n```\nbwlimit integer     byte per second\n```\n\nPros:\n-  controllable network traffic. \n\nCons:\n- performance will get slowly when enable this feature. This feature requires many method calls when writing messages.\n- expects num_threads > 1. fluentd will saturate if it doesn't have enough threads. \n  - also requires correct configuration.\n- this feature has big impact for `out_forward`.\n\nHere is my rough patch. I hope `out_forward` support bwlimit option. But It has very big impact for applying bwlimit patch. so I split it at this time.\n\nhttps://gist.github.com/chobie/44e5baec76b59e4e512b\n\nI don't deploy this feature on any prod environment. for now, I want to have feedback on the idea.\n\nThanks,\nShuhei\n Any updates on this? Or maybe any other solution(s) to limit fluentd-agent's output?\nAlso, i haven't come across `chunk_limit` anywhere in the documentation. What does it do?\n @erbdex It should be 'buffer_chunk_limit' correctly. It is written on the official document of out_forward. \n  But why didn't we allow uses to `include` configs in elements? If we can, just turning the flag at https://github.com/fluent/fluentd/blob/master/lib/fluent/config.rb#L177 to `true` is OK.\n\nref. #121 \n What usecase you want this feature about?\n Please refer to #121 \n :+1: \n I'll change `embed` to `include` and I think it might be better.\n :+1: for `include`\n :-1: for `include`\n`fluent-plugin-norikra` has parameter named as `include` (and `exclude`)...\n How about `<include \"filename\" />` instead of bare `include` ?\nAnd new directive-style include is only allowed in non-top level.\n It seems a bit complicated, but not avoidable to be consistent with backward compatibility, I think. I'll try it.\n Add a comment, but totally it looks good!\n  I tried the newest version of td-agent today, and the symlink (specified by symlink_path) still isn't being created correctly.\n\nFrom my experience, the symlink is valid (and pointing to a buffer file) for about a minute, and then the buffer file disappears. Something like this:\n\n``` bash\n<prompt> tail -F auth.log.current \n2013-09-26T15:00:02+00:00   system.auth.info    {<message>}\n2013-09-26T15:00:02+00:00   system.auth.info    {<message>}\ntail: 'auth.log.current' has become inaccessible: No such file or directory\n```\n\nThis happens every few minutes. It looks like fluentd is actually writing to a different buffer file during this whole time (and I never get more than 2 messages in the file that is symlinked to).\n\nAny ideas?\n\nThanks,\nAndy\n It's as I expected.\nLogs and symlink are currently handled in following procedure:\n1. A new message is pushed to buffer, which means it is write to  buffer file such as `foo.20130928.b4e76dcde71f6853f` .\n2. A symlink which links to the buffer file is created after that.\n3. The buffer file is renamed to something like `foo.20130928.0`  when its time to flush.\n\nAs a result, the symlink which is created in seq. 2 links nothing after seq. 3 until next message is arrived (seq. 1).\nHowever, the symlink re-links new buffer file correctly when new message is arrived.\n\nSo, some warnings occur on log rotation but the tail command should chase logs without missing.\n So, that's not what I see. I only see the 2 messages being published to that log, then the tail warning occurs, and I don't see any more messages.\n Do you always get in such trouble? Please show me your configuration.\n Sure, here's the relevant section:\n\n``` bash\n<match system.auth.**>\n  type file\n  buffer_chunk_limit 256m\n  path /logs/fluentd/system/auth/auth.log\n  symlink_path /logs/fluentd/system/auth/auth.log.current\n  time_slice_format %Y%m%d%H\n</match>\n\n<match system.authpriv.**>\n  type file\n  buffer_chunk_limit 256m\n  path /logs/fluentd/system/authpriv/authpriv.log\n  symlink_path /logs/fluentd/system/authpriv/authpriv.log.current\n  time_slice_format %Y%m%d%H\n</match>\n```\n\nDo you need more than that? I definitely don't get all the logs that are coming into this server through that symlink.\n\n-Andy\n To add a few more comments:\n\nThe logs that match both those stanza's above are being sent via syslog. What's interesting is that via the *.log.current file, I'm only getting logs from 1 machine in our network (let's call it 'login02'). When I then look for logs for login02 in any of the other log files, they aren't there.\n\nMake sense?\n So, I dug into this a little further on my end, and I'm noticing a few very weird things in regard to the syslog logs that I collect (and I don't think it's related to the symlink stuff). I'm going to open up another ticket for that.\n\nSo far, on other logs I aggregate through fluentd, the symlink looks to be working well. We can probably close this issue now, and I'll reopen it if I see anymore problems.\n  \u3053\u3093\u306b\u3061\u306f\uff01\n\nCentOS \u306e /var/log/messges \u3092\u98df\u308f\u305b\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u3053\u306e\u3088\u3046\u306b\u3057\u306a\u3044\u3068\n\n```\n2013-09-08 06:58:57 +0900 [error]: forward error: invalid strptime format - `%b %d %H:%M:%S'\n```\n\n\u306e\u3088\u3046\u306b\u51fa\u3066\u3057\u307e\u3063\u3066\u3001\u3046\u307e\u304f\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3002\u3002\n\n\u5fc5\u8981\u306afix\u304b\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u5fa1\u5831\u544a\u307e\u3067\u3002\u3002\u3002\n\n\u3042\u3001\u3042\u3068Web\u30b5\u30a4\u30c8\u3068\u30b3\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\uff01\nhttp://docs.fluentd.org/ja/articles/in_tail\n\n\u5931\u793c\u3044\u305f\u3057\u307e\u3059\u3002\n \u3053\u306e\u3088\u3046\u306a\u30ed\u30b0\u306e last message repeated n times \u304c\u3001\u4f8b\u5916\u3092\u8d77\u3053\u3057\u3066\u3044\u308b\u884c\u306e\u3088\u3046\u3067\u3059\u3002\n\nSep  8 04:31:19 hogeserver named[8622]: client 162.211.231.223#36478: query (cache) './ANY/IN' denied\nSep  8 04:31:19 hogeserver last message repeated 14 times\n\nputs \"|\" + $~[:time] + \"|\" \u3059\u308b\u3068\n\n```\n|Sep |\n```\n\n\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u82f1\u8a9e\u306f\u3002\u3002\u3002\u52c9\u5f37\u3057\u307e\u3059\uff01\n \u306a\u3093\u304b\u304a\u624b\u6570\u304a\u639b\u3051\u3057\u3066\u3057\u307e\u3044\u3001\u3082\u3046\u3057\u308f\u3051\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u78ba\u304b\u306b\u76f4\u3063\u3066\u3044\u307e\u305b\u3093\u306d\u3002\u3002\u3002\n\n```\n% cat sample.rb\n#!/usr/bin/env ruby\n# -*- coding: utf-8 -*-\nrequire 'fluent/load'\n$log = Fluent::Log.new(STDOUT, Fluent::Log::LEVEL_WARN)\nparser1 = Fluent::TextParser::RegexpParser.new(/^(?<time>[^ ]*\\s*[^ ]* [^ ]*) (?<host>[^ ]*) (?<ident>[a-zA-Z0-9_\\/\\.\\-]*)(?:\\[(?<pid>[0-9]+)\\])?[^\\:]*\\: *(?<message>.*)$/, {'time_format'=>\"%b %d %H:%M:%S\"})\nparser2 = Fluent::TextParser::RegexpParser.new(/^(?<time>[^ ]*\\s+[^ ]* [^ ]*) (?<host>[^ ]*) (?<ident>[a-zA-Z0-9_\\/\\.\\-]*)(?:\\[(?<pid>[0-9]+)\\])?[^\\:]*\\: *(?<message>.*)$/, {'time_format'=>\"%b %d %H:%M:%S\"})\np parser1.call('Sep 8 04:31:19 hogeserver last message repeated 14 times') \np parser2.call('Sep 8 04:31:19 hogeserver last message repeated 14 times') \n\n% ruby sample.rb\n2013-09-09 11:11:25 +0900 [warn]: pattern not match: \"Sep 8 04:31:19 hogeserver last message repeated 14 times\"\n[nil, nil]\n2013-09-09 11:11:25 +0900 [warn]: pattern not match: \"Sep 8 04:31:19 hogeserver last message repeated 14 times\"\n[nil, nil]\n```\n\n\u9061\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u304c\u3001\u305d\u3082\u305d\u3082\u6b21\u306e\u3088\u3046\u306b\u3057\u3066\u52d5\u304b\u3057\u305f\u3068\u304d\u306b\u6c17\u4ed8\u3044\u305f\u3082\u306e\u3067\u3057\u305f\u3002\n\n```\n% cat sample_src.log\nSep  6 17:00:00 fvm newsyslog[1478]: logfile turned over due to size>100K\nSep  6 17:32:19 fvm kernel: em0: link state changed to DOWN\nSep  6 23:53:54 fvm bokutin: /usr/local/etc/rc.d/elasticsearch: DEBUG: Sourcing /etc/defaults/rc.conf\nSep  6 23:55:05 fvm last message repeated 2 times\nSep  7 00:00:49 fvm sudo:  bokutin : TTY=pts/3 ; PWD=/usr/home/bokutin ; USER=root ; COMMAND=/usr/local/bin/zsh\n\n% fluentd -c copy.conf\n2013-09-09 11:16:47 +0900 [info]: starting fluentd-0.10.38\n2013-09-09 11:16:47 +0900 [info]: reading config file path=\"conf/copy.conf\"\n2013-09-09 11:16:47 +0900 [info]: using configuration file: <ROOT>\n  <source>\ntype tail_asis\npath sample.log\npos_file sample.pos\ntag raw.log.messsages\nasis_key message\n  </source>\n  <match raw.**>\ntype copy\n<store>\n  type parser\n  remove_prefix raw\n  add_prefix parsed\n  format syslog\n  key_name message\n</store>\n  </match>\n  <match parsed.**>\ntype stdout\n  </match>\n</ROOT>\n2013-09-09 11:16:47 +0900 [info]: adding source type=\"tail_asis\"\n2013-09-09 11:16:47 +0900 [info]: adding match pattern=\"raw.**\" type=\"copy\"\n2013-09-09 11:16:47 +0900 [info]: adding match pattern=\"parsed.**\" type=\"stdout\"\n2013-09-09 11:16:47 +0900 [info]: following tail of sample.log\n# \u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 cat sample_src.log > sample.log\n2013-09-06 17:00:00 +0900 parsed.log.messsages: {\"host\":\"fvm\",\"ident\":\"newsyslog\",\"pid\":\"1478\",\"message\":\"logfile turned over due to size>100K\"}\n2013-09-06 17:32:19 +0900 parsed.log.messsages: {\"host\":\"fvm\",\"ident\":\"kernel\",\"message\":\"em0: link state changed to DOWN\"}\n2013-09-06 23:53:54 +0900 parsed.log.messsages: {\"host\":\"fvm\",\"ident\":\"bokutin\",\"message\":\"/usr/local/etc/rc.d/elasticsearch: DEBUG: Sourcing /etc/defaults/rc.conf\"}\n2013-09-09 11:17:02 +0900 [warn]: emit transaction failed  error_class=ArgumentError error=#<ArgumentError: invalid strptime format - `%b %d %H:%M:%S'>\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/2.0.0/time.rb:394:in `strptime'\n  2013-09-09 11:17:02 +0900 [warn]: /usr/home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluent-plugin-parser-0.2.4/lib/fluent/plugin/fixed_parser.rb:39:in `block in call'\n  2013-09-09 11:17:02 +0900 [warn]: /usr/home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluent-plugin-parser-0.2.4/lib/fluent/plugin/fixed_parser.rb:34:in `each'\n  2013-09-09 11:17:02 +0900 [warn]: /usr/home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluent-plugin-parser-0.2.4/lib/fluent/plugin/fixed_parser.rb:34:in `call'\n  2013-09-09 11:17:02 +0900 [warn]: /usr/home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluent-plugin-parser-0.2.4/lib/fluent/plugin/fixed_parser.rb:245:in `parse'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluent-plugin-parser-0.2.4/lib/fluent/plugin/out_parser.rb:100:in `parse'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluent-plugin-parser-0.2.4/lib/fluent/plugin/out_parser.rb:80:in `block in emit'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/event.rb:105:in `call'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/event.rb:105:in `block in each'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/event.rb:104:in `each'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/event.rb:104:in `each'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluent-plugin-parser-0.2.4/lib/fluent/plugin/out_parser.rb:77:in `emit'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/output.rb:33:in `next'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/plugin/out_copy.rb:65:in `emit'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/match.rb:36:in `emit'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/engine.rb:138:in `emit_stream'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/plugin/in_tail.rb:104:in `receive_lines'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/plugin/in_tail.rb:322:in `call'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/plugin/in_tail.rb:322:in `on_notify'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/plugin/in_tail.rb:153:in `on_notify'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/plugin/in_tail.rb:243:in `call'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/plugin/in_tail.rb:243:in `on_timer'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run_once'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/cool.io-1.1.1/lib/cool.io/loop.rb:96:in `run'\n  2013-09-09 11:17:02 +0900 [warn]: /home/bokutin/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/fluentd-0.10.38/lib/fluent/plugin/in_tail.rb:81:in `run'\n```\n\ncopy.conf\u3092\u4e00\u90e8\u4fee\u6b63\u3059\u308b\u3068\n\n```\n-format syslog\n+format /^(?<time>[^ ]*\\s+[^ ]* [^ ]*) (?<host>[^ ]*) (?<ident>[a-zA-Z0-9_\\/\\.\\-]*)(?:\\[(?<pid>[0-9]+)\\])?[^\\:]*\\: *(?<message>.*)$/\n+time_format %b %d %H:%M:%S\n\n% fluentd -c copy.conf\n2013-09-09 11:25:10 +0900 [info]: starting fluentd-0.10.38\n2013-09-09 11:25:10 +0900 [info]: reading config file path=\"conf/copy.conf\"\n2013-09-09 11:25:10 +0900 [info]: using configuration file: <ROOT>\n  <source>\n    type tail_asis\n    path sample.log\n    pos_file sample.pos\n    tag raw.log.messsages\n    asis_key message\n  </source>\n  <match raw.**>\n    type copy\n    <store>\n      type parser\n      remove_prefix raw\n      add_prefix parsed\n      format /^(?<time>[^ ]*\\s+[^ ]* [^ ]*) (?<host>[^ ]*) (?<ident>[a-zA-Z0-9_\\/\\.\\-]*)(?:\\[(?<pid>[0-9]+)\\])?[^\\:]*\\: *(?<message>.*)$/\n      time_format %b %d %H:%M:%S\n      key_name message\n    </store>\n  </match>\n  <match parsed.**>\n    type stdout\n  </match>\n</ROOT>\n2013-09-09 11:25:10 +0900 [info]: adding source type=\"tail_asis\"\n2013-09-09 11:25:10 +0900 [info]: adding match pattern=\"raw.**\" type=\"copy\"\n2013-09-09 11:25:10 +0900 [info]: adding match pattern=\"parsed.**\" type=\"stdout\"\n2013-09-09 11:25:10 +0900 [info]: following tail of sample.log\n# \u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 cat sample_src.log > sample.log\n2013-09-06 17:00:00 +0900 parsed.log.messsages: {\"host\":\"fvm\",\"ident\":\"newsyslog\",\"pid\":\"1478\",\"message\":\"logfile turned over due to size>100K\"}\n2013-09-06 17:32:19 +0900 parsed.log.messsages: {\"host\":\"fvm\",\"ident\":\"kernel\",\"message\":\"em0: link state changed to DOWN\"}\n2013-09-06 23:53:54 +0900 parsed.log.messsages: {\"host\":\"fvm\",\"ident\":\"bokutin\",\"message\":\"/usr/local/etc/rc.d/elasticsearch: DEBUG: Sourcing /etc/defaults/rc.conf\"}\n2013-09-09 11:25:13 +0900 [warn]: pattern not match: Sep  6 23:55:05 fvm last message repeated 2 times\n2013-09-07 00:00:49 +0900 parsed.log.messsages: {\"host\":\"fvm\",\"ident\":\"sudo\",\"message\":\"bokutin : TTY=pts/3 ; PWD=/usr/home/bokutin ; USER=root ; COMMAND=/usr/local/bin/zsh\"}\n```\n\n\u3068\u306a\u308a\u3001\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304c\u51fa\u3066\u3073\u3063\u304f\u308a\u3059\u308b\u3053\u3068\u3082\u306a\u304f\u306a\u308a\u3001\u51e6\u7406\u3082\u7d99\u7d9a\u3082\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3068\u3001\u3053\u3053\u307e\u3067\u3084\u3063\u3066\u3001\u3054\u5831\u544a\u3044\u305f\u3057\u307e\u3057\u305f\u3002\n\n\u30b7\u30f3\u30d7\u30eb\u306aconf\u3067\u3082\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\n```\n% fluentd -c conf/tail.conf\n2013-09-09 11:42:24 +0900 [info]: starting fluentd-0.10.38\n2013-09-09 11:42:24 +0900 [info]: reading config file path=\"conf/tail.conf\"\n2013-09-09 11:42:24 +0900 [info]: using configuration file: <ROOT>\n  <source>\ntype tail\npath sample.log\ntag log.messsages\nformat syslog\n  </source>\n  <match **>\ntype stdout\n  </match>\n</ROOT>\n2013-09-09 11:42:24 +0900 [info]: adding source type=\"tail\"\n2013-09-09 11:42:24 +0900 [warn]: 'pos_file PATH' parameter is not set to a 'tail' source.\n2013-09-09 11:42:24 +0900 [warn]: this parameter is highly recommended to save the position to resume tailing.\n2013-09-09 11:42:24 +0900 [info]: adding match pattern=\"**\" type=\"stdout\"\n2013-09-09 11:42:24 +0900 [info]: following tail of sample.log\n2013-09-09 11:42:26 +0900 [warn]: \"Sep  6 23:55:05 fvm last message repeated 2 times\" error=\"invalid strptime format - `%b %d %H:%M:%S'\"\n2013-09-06 17:00:00 +0900 log.messsages: {\"host\":\"fvm\",\"ident\":\"newsyslog\",\"pid\":\"1478\",\"message\":\"logfile turned over due to size>100K\"}\n2013-09-06 17:32:19 +0900 log.messsages: {\"host\":\"fvm\",\"ident\":\"kernel\",\"message\":\"em0: link state changed to DOWN\"}\n2013-09-06 23:53:54 +0900 log.messsages: {\"host\":\"fvm\",\"ident\":\"bokutin\",\"message\":\"/usr/local/etc/rc.d/elasticsearch: DEBUG: Sourcing /etc/defaults/rc.conf\"}\n2013-09-07 00:00:49 +0900 log.messsages: {\"host\":\"fvm\",\"ident\":\"sudo\",\"message\":\"bokutin : TTY=pts/3 ; PWD=/usr/home/bokutin ; USER=root ; COMMAND=/usr/local/bin/zsh\"}\n2013-09-09 11:42:26 +0900 fluent.warn: {\"error\":\"invalid strptime format - `%b %d %H:%M:%S'\",\"message\":\"\\\"Sep  6 23:55:05 fvm last message repeated 2 times\\\"\"}\n```\n\n\u3067parser.rb\u306b\u5148\u306e\u4e00\u6587\u5b57\u306e\u30d1\u30c3\u30c1\u3092\u3042\u3066\u308b\u3068\n\n```\n% ruby -Ilib bin/fluentd -c conf/tail.conf\n2013-09-09 11:43:18 +0900 [info]: starting fluentd-0.10.38\n2013-09-09 11:43:18 +0900 [info]: reading config file path=\"conf/tail.conf\"\n2013-09-09 11:43:18 +0900 [info]: using configuration file: <ROOT>\n  <source>\ntype tail\npath sample.log\ntag log.messsages\nformat syslog\n  </source>\n  <match **>\ntype stdout\n  </match>\n</ROOT>\n2013-09-09 11:43:18 +0900 [info]: adding source type=\"tail\"\n2013-09-09 11:43:18 +0900 [warn]: 'pos_file PATH' parameter is not set to a 'tail' source.\n2013-09-09 11:43:18 +0900 [warn]: this parameter is highly recommended to save the position to resume tailing.\n2013-09-09 11:43:18 +0900 [info]: adding match pattern=\"**\" type=\"stdout\"\n2013-09-09 11:43:18 +0900 [info]: following tail of sample.log\n2013-09-09 11:43:21 +0900 [warn]: pattern not match: \"Sep  6 23:55:05 fvm last message repeated 2 times\"\n2013-09-06 17:00:00 +0900 log.messsages: {\"host\":\"fvm\",\"ident\":\"newsyslog\",\"pid\":\"1478\",\"message\":\"logfile turned over due to size>100K\"}\n2013-09-06 17:32:19 +0900 log.messsages: {\"host\":\"fvm\",\"ident\":\"kernel\",\"message\":\"em0: link state changed to DOWN\"}\n2013-09-06 23:53:54 +0900 log.messsages: {\"host\":\"fvm\",\"ident\":\"bokutin\",\"message\":\"/usr/local/etc/rc.d/elasticsearch: DEBUG: Sourcing /etc/defaults/rc.conf\"}\n2013-09-07 00:00:49 +0900 log.messsages: {\"host\":\"fvm\",\"ident\":\"sudo\",\"message\":\"bokutin : TTY=pts/3 ; PWD=/usr/home/bokutin ; USER=root ; COMMAND=/usr/local/bin/zsh\"}\n2013-09-09 11:43:21 +0900 fluent.warn: {\"message\":\"pattern not match: \\\"Sep  6 23:55:05 fvm last message repeated 2 times\\\"\"}\n```\n\n\u3068\u306a\u308a\u307e\u3057\u305f\u3002\nwarn\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u3060\u3051\u3067\u3057\u305f\u3002\nplugin-parser\u3068\u3082\u9055\u3044\u3001\u51e6\u7406\u306f\u7d99\u7d9a\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n\u307e\u305fplugin-parser\u306f\u3001parser.rb\u306eTEMPLATE_FACTORIES\u3092\u30b3\u30d4\u30da\u3057\u305f\u3082\u306e\u3092\u4f7f\u3063\u3066\u3044\u3066\n\u5225\u306e\u3082\u306e\u3067\u3057\u305f\u3002\n\u3067\u3059\u306e\u3067parser.rb\u306e\u6b63\u898f\u8868\u73fe\u3092\u76f4\u3057\u3066\u3082\u3001\u3053\u3061\u3089\u306b\u306f\u6ce2\u53ca\u3055\u308c\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u78ba\u304b\u306b\u91cd\u8981\u3058\u3083\u306a\u3055\u305d\u3046\u3067\u3059\u3002\n\u305f\u3060 last message repeated n times \u3092\u5410\u3044\u305fCentOS\u306f\u5b9f\u306b\u6a19\u6e96\u7684\u306a\u69cb\u6210\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u3082\u306e\u3067\u3057\u3066\u3001\u3088\u304f\u3042\u308b\u3082\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\u4e0a\u3067\u7528\u3044\u305f sample.log \u306f FreeBSD 9.1 \u306e /var/log/messages \u304b\u3089\u629c\u7c8b\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\n\u305f\u3057\u304b\u306b Sep  6 17:32:19 \u3067\u3042\u3063\u3066 Sep6 17:32:19 \u3068\u3044\u3046\u30b1\u30fc\u30b9\u304c\u7121\u3044\u306e\u3067\u3042\u308c\u3070\n\\s\\* \u3092 \\s+ \u306b\u3059\u308c\u3070\u3001warn\u304c\u5c11\u3057\u81ea\u7136\u306b\u306a\u3063\u3066\u3088\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\n\u73fe\u306b\u7a3c\u52d5\u3057\u3066\u3044\u308b\u898f\u6a21\u3092\u8003\u3048\u308c\u3070\u3001\u3053\u306e\u7a0b\u5ea6\u306e\u4e9b\u7d30\u306a\u3053\u3068\u3067\u5f71\u97ff\u304c\u51fa\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3053\u3068\u3092\u52d8\u6848\u3059\u308b\u3068\n\u4fee\u6b63\u3059\u308b\u5fc5\u8981\u306f\u7121\u3044\u3068\u8003\u3048\u308b\u306e\u304c\u59a5\u5f53\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\n\n\u306a\u3093\u304b\u304a\u6642\u9593\u3092\u3068\u3089\u305b\u3066\u3057\u307e\u3063\u3066\u3059\u307f\u307e\u305b\u3093\u3002\n\u5148\u8d70\u3089\u305a\u306b\u3001\u3061\u3083\u3093\u3068\u8abf\u3079\u3066\u304b\u3089\u5831\u544a\u3059\u308b\u3079\u304d\u3067\u3057\u305f\u3002\n\u82f1\u8a9e\u306b\u3057\u3066\u3044\u305f\u3060\u304b\u306a\u304f\u3066\u9589\u3058\u3067\u304f\u3060\u3055\u3063\u3066\u5927\u4e08\u592b\u3067\u3059\uff01\n\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\u5931\u793c\u3044\u305f\u3057\u307e\u3059\u3002\n    I was confused when I use out_file type with file_buffer.It's double disk I/O load.\nMem_buffer may lost some message on my test with kill forward node,but not with file_buffer.So I want to use file_buffre or none-buffer. \n Not a critical.I just wan't know if there is some reason here.If just not care this performance and no other reasons,I'll try to write a none-buffered plugin.Thanks.\n  Fluentd dumps whole configuration content into log by default (`info` log level). It can be dangerous when a plugin includes secret data.\n\nThere's actually such a plugin, for example, fluent-plugin-secure-forward. With the plugin, fluentd dumps configuration like below:\n\n```\n...\n\n<match secure_forward.**>\n  type secure_forward\n  shared_key xxxxxxxxxxxxxxxx\n  self_hostname app.example.com\n  <server>\n    host log.example.com\n    username foo\n    password xxxxxxxxxxxxxxxx\n  </server>\n</match>\n\n...\n```\n\nWe had better not to expose secret data in such a place where people don't think their secret data can be.\n I want any command line option to dump configurations at INFO level.\nThat option is for people who thinks that debug level logs are too heavy, but configuration dump is important.\n I'm a one of them. > \"who thinks that ...\"\n @tagomoris Did you mean like below?\n- Default: Not dump the content of configurations (same as this PR)\n- With an option: Dump the content (to be implemented later)\n @kentaro Yes.\n\n``` ruby\nif awesome_option_specified\n  $log.info \"using configuration file: #{conf.to_s.rstrip}\"\nelse\n  $log.debug  \"using configuration file: #{conf.to_s.rstrip}\"\nend\n```\n Added a new command line option.\n :+1:\n Any other thoughts? Or can I merge this?\n As Treasure Data, this feature dramatically reduces our burden to troubleshoot fluentd (td-agent). The reason is people often don't send us an exact config file, which caused some troubles.\n\nSo, can we dump by default, and hide by option? Or can we do some rule-based anonymization?\n\nThanks -K\n I have same opinion with @kaz, actually.\nHow about this idea?:\n- plugins add `:sensitive => true` option to `config_param` line if the parameter includes secret information such as password\n- if the config name is \"password\", \":sensitive` option is true by default\n- fluentd replaces the option with \"***\" when it shows the config to log files\n- I think Ruby on Rails use the same strategy when it logs request parameters to local files.\n\nOne big concern is that we need to ask plugin creators to set the parameter...\n At first, I thought of an idea like @frsyuki said and  abandoned it because it seemed difficult for plugin authors to change their plugin. In practice, the @kzk's idea sounds feasible. I'll fix this PR along with it.\n Changed the strategy along with @kzk's idea.\n looks good for me\n LGTM\n  I propose to add `format raw`. \n\nCurrently, even if users do not require to parse log lines, we have to write configuration like\n\n```\n<source>\n    type tail\n    format /^(?<message>.*)$/\n    ....\n</source>\n```\n\nThis requires to parse log lines by a regular expression, and its overhead is not trivial. \n\n```\n       user     system      total        real\nasis:    0.080000   0.000000   0.080000 (  0.081076)\nregexp:  7.590000   0.000000   7.590000 (  7.592521)\n```\n\ncf. http://blog.1q77.com/2013/01/fluent-agent-lite-%E3%81%A8-in_tail/\n\nThis plugin enables to write configuration like\n\n```\n<source>\n    type tail\n    format raw\n    message_key message\n    ....\n</source>\n```\n\n(where `message_key` is set to `message` as default) and does not require to parse log lines by a regular expression. \n\nThere is a plugin [fluent-plugin-tail-asis](https://github.com/yteraoka/fluent-plugin-tail-asis) which does the same thing with this patch, and downloaded 2354 times as in 2013.09.02 http://fluentd.org/plugin/. It tells us that some users are already using this feature, and I propose to have this feature in the fluentd itself. \n Structured raw logs come here!\n :+1:\n :+1: \n :+1: \n :+1:\n proposal: \"format message\"\n\nIt still creates a structured record and its key name is \"msssage\". `raw` doesn't imply this behavior.\nApart from the name, I think it's good idea to include this REGEXP. GJ!\n :+1: totally up for this one. sometimes you just dont want to parse the stuff..\n :+1:\n :+1: \n proposal: \"format none\"\n\nI think that the value of `format` option should describe the name of a format. \n`format message` lets me feel like \"what was the `message` format?\". \n\nIn contrast, I think `format none` clearly describes as its format is none (although I felt the same thing for `format raw` too ...)\n\nHow do you think?\n :+1: > `format none`\n\nor\n\nHow about `format plain`?\n I feel `format plain` is the best one.\n proposal: `format whole_line`\n\nThis indicates directly what will comes in records. \n :+1: > `format plain`\n @repeatedly it seems `format plain` is the most popular. what do you think? If it's okay, I will modify the source code. \n All of you can use fluent-agent-lite for raw-plain-whole-message record.\nhttps://github.com/tagomoris/fluent-agent-lite\n @tagomoris Anybody knows your work :octocat: \n :+1:  > format none\n @repeatedly renamed `raw` to `none`!!\n `format none` is also good :+1: \n thanks!!\n  A feature like this was discussed on the previous issue https://github.com/fluent/fluentd/issues/83. The current symlink feature is something different from what I want.\n\n**out_file** plugin uses **buf_file** plugin as buffer (in default), so new records are written to buffer at first. After a while the buffer is flushed out as logfile  by **out_file**\nA matter is \"what is a current logfile?\"\n\nThe current symlink points a file created by **out_file**. But I think the symlink should point to a file created by **buf_file**. The feature to symlink a current buffer file can be used for not only **out_file** but also other BufferedOutput plugins.\n Let me confirm your opinion.\nA point at issue is how to set symlink_path, via `config_param` or `setter method`, right?\nIn both cases, the capability to create symlink is in FileBuffer and FileBufferChunk. The difference is just who sets symlink path.\n\nIf that's correct, it's ok in either case.\n Fixed as you commented.\n  out_copy plugin is expected to send exactly same records to each sub plugins.\nWhen a plugin which modifies records like record_modifier plugin is used, the subsequent plugins get records modified by previous plugins.\n\nThis patch fixes this issue by deeply copying records(EventStream).\n\n---\n\nIn a following simple configration,\n\n```\n<match test>\n  type copy\n  <store>\n    type record_modifier\n    tag test.aa\n    foo bar\n  </store>\n  <store>\n    type stdout\n  </store>\n</match>\n<match **>\n  type stdout\n</match>\n```\n\nWhen you send a message:\n\n```\necho '{\"aaa\":\"bbb\"}' | fluent-cat test\n```\n\nYou expect following results.\n\n```\ntest.aa: {\"aaa\":\"bbb\",\"foo\":\"bar\"}\ntest: {\"aaa\":\"bbb\"}\n```\n\nBut you get results as blow.\n\n```\ntest.aa: {\"aaa\":\"bbb\",\"foo\":\"bar\"}\ntest: {\"aaa\":\"bbb\",\"foo\":\"bar\"}\n```\n I use the original behavior as a trick currently, and doing 'deep copy' always would make processing slow, so\n:+1: for `deep_copy` option. \n Added `deep_copy` option. I made CopyOutputChain which extends OutputChain to simplify the implementation.\n :+1: Sounds good to have `deep_copy` option.\n  The insntance_eval method does not always return self. Make sure to return DSLElement instance.\n  Fluentd assumes record is not `nil` and some loggers validate record is `nil` or not.\nBut some implementation can send `nil` to in_forward or something.\nSo input plugin or engine should ignore `nil` record event.\n This fix does not skip nil records submitted to in_forward using PackedForward format.\nTo be consistent, shouldn't MessagePackEventStream also skip nil records in `MessagePackEventStream#each`?\n Plus, `MessagePackEventStream#to_msgpack_stream` does not skip nil records. If output plugin is ObjectBufferedOutput, its `#format` method will still get nil records from in_forward.\n\nDo you think (a) it's input plugin's responsibility to skip nil records? Or (b) is it output plugins responsibility?\nIf (a), we can't use `MessagePackEventStream#to_msgpack_stream` optimization because `MessagePackEventStream` (or in_forward) needs to deserialize PackedForward message to skip nil records.\n  I wanted to have a test helper method `#pitches` which calls pugin's `#emits(tag, es)` to test plugins such as fluent-plugin-grepcounter. This is maybe useful for fluent-plugin-datacounter, too. \n Thanks!\n  @tagomoris\n\nIn addition to\n\n1)\n\n```\n  time = Time.now.to_i\n  d.with('xxx', time) do |d|\n    d.pitch({\"f1\"=>\"data1\", \"f2\"=>\"data2\"})\n  end\n```\n\nI propose to support ways to write test as\n\n2)\n\n```\n  time = Time.now.to_i\n  d.with('xxx') do |d|\n    d.pitch({\"f1\"=>\"data1\", \"f2\"=>\"data2\"}, time)\n  end\n```\n\nand\n\n3)\n\n```\n  d.with('xxx') do |d|\n    d.pitch({\"f1\"=>\"data1\", \"f2\"=>\"data2\"})\n  end\n```\n\nThe 2nd way is good for v10 compatibility since v10's TestDriver#emit supports 2 arguments as\n\n```\n def emit(record, time=Time.now)\n```\n\nFuthermore, someone may want to write test with different `time`s. We should support it. \n\nThe 3rd way is the simplest way to write test. We often do not care of time in some test cases.\nIn the 3rd way, the time property is initialized with Time.now.to_i internally. \n Thanks!\n  text_parser.rb is almost same as v10's parser.rb\n\nThere are some diferrences, listed below.\n- remove undocumented parser\n  - 'apache' and 'ngingx'\n- rename 'apache2' to 'apache'\n- remove default time\n  - If time_key is not specified, return null.\n - add nginx parser\n- rename 'apache' to 'apache2'\n Thanks @choplin !\n ok. I will follow your coding style. made a patch which fixes an indentation. #178\n  @tagomoris\n\nI got an error as bolows when I tested my plugin (fluent-plugin-grep). \n\n```\n\"/Users/seo.naotoshi/.rbenv/versions/2.0.0-p247/lib/ruby/2.0.0/logger.rb:370:in `<'\",\n\"/Users/seo.naotoshi/.rbenv/versions/2.0.0-p247/lib/ruby/2.0.0/logger.rb:370:in `add'\",\n\"/Users/seo.naotoshi/.rbenv/versions/2.0.0-p247/lib/ruby/2.0.0/logger.rb:456:in `error'\",\n```\n  @tagomoris ++\n Oh... I'll try on v11 (in these few months...)\n fixed on v11 branch with c035d0e3b2d9981f80e56946b39deb59b6570ad5.\n And more, fixed on v10(master) with 155523b7f4f84d8f159857d7f9677495e7f1e3ec.\n  :+1: Sounds nice to have it.\n\nI think fluentd should not install plugins automatically. it's good idea to suggest plugin names to users.\nBecause, if your servers depend on the API server to install plugins, and the API server is down, you can't boot new servers. I had this problem with RubyGems.org before.\n\nI created a document generator for plugins (like RubyDoc or JavaDoc).\nhttps://gist.github.com/frsyuki/6472292\nBut this code has a security problem: it calls `eval`...\n  in_tail plugin starts reading log at tail of the log file to avoid log duplication.\nBut I think it is better to read from head of the file when pos file do exists.\nThat will help fluentd to read logfile which exists before fluentd gets setup.\n\nIn, fluentd / lib / fluent / plugin / in_tail.rb\nCurrent code\n\n```\n            elsif last_inode != 0\n              # this is FilePositionEntry and fluentd once started.\n              # read data from the head of the rotated file.\n              # logs never duplicate because this file is a rotated new file.\n              pos = 0\n              @pe.update(inode, pos)\n            else\n              # this is MemoryPositionEntry or this is the first time fluentd started.\n              # seek to the end of the any files.\n              # logs may duplicate without this seek because it's not sure the file is\n              # existent file or rotated new file.\n              pos = fsize\n              @pe.update(inode, pos)\n            end\n```\n\nProposed behavior\n\n```\n            elsif @pe.instance_of(FilePositionEntry)\n              # this is FilePositionEntry\n              # this is the first time fluentd started or log file get rotated\n              # read data from the head of the file.\n              pos = 0\n              @pe.update(inode, pos)\n            else\n              # this is MemoryPositionEntry\n              # seek to the end of the any files.\n              # logs may duplicate without this seek because it's not sure the log position\n              pos = fsize\n              @pe.update(inode, pos)\n            end\n```\n\nSince it changes core plugin behavior, it may be better to add some config flag to enable this option.\n Found a way to do it in plugin subclassing in_tail. So I've just extended my plugin.\nhttps://github.com/tomohisaota/fluent-plugin-tail-multiline\n\nI still believe that this option is useful for others.\nBut I don't need it personally anymore...\n Yes, this feature is useful when the log file already exist before fluentd is deployed.\n I need tail_multiline have ex exam tail_ex. May you help me!? Thanks!!!!\n ```\nSince it changes core plugin behavior, it may be better to add some config flag to enable this option.\n```\n\n@repeatedly \nShould in_tail have a config option which it enables a new behavior?\nDoes it have only a new behavior?\n\nA new behavior:\nin_tail starts reading the head of a log file if pos file exists and fluentd starts first time.\nAn old behavior:\nin_tail starts reading the tail of a log file if pos file exists and fluentd starts first time.\n @repeatedly \nI see.\n > @suzukaze \n> We can't accept only new behaviour because almost users expect existence behaviour.\n\nIsn't it acceptable to add new behavior that **by default** works like before (ie. it is backwards compatible) but works for new configurations?\nFor instance, by adding an option that does not exist in old configurations:\n\n```\nelsif (@read_from_head && @pe.instance_of(FilePositionEntry)) or last_inode != 0\n```\n\nold configurations don't have read_from_head and therefore this should only work for people who \"force\" reading from the beginning of the file in new configurations...\n Yes, I agree we should preserve the existing behaviour, just add a new directive to read from the head.\n by the way, \n\nhttps://github.com/yosisa/fluent-plugin-tail-ex\n\ncalls this option \"read_all\"\n @repeatedly actually neither to me to be frank hehe :)\n\nMy suggestion:\n\n```\nread_new_files_from_beginning true\n```\n\nAlthough a little bit long for my taste.\n  ## summary\n\nWe have a problem to analyzing int/float columns with TreasureData or mongoDB which parsed from file with in_tail.\nI expect `123` to be integer, `123.45` to be float value but in_tail makes them string type.\n\nOn using `fluent-plugin-typecast`, It could convert types by manually.\nIt is not cool to convert type (cast) by manually. it have to update whenever log format has changed.\nit takes much cost of maintenance.\n\nThus, I have add auto type conversion option for `parser.rb`.\n## configuration sample\n\n```\n<source>\n  type tail\n  format ltsv\n  time_format %d/%b/%Y:%H:%M:%S %z\n  path /var/log/httpd/access_log\n  tag debug.apache.access\n  auto_type_convert yes\n</source>\n```\n## sample results\n\nthe difference seems in status, size, response_time.\n\n``` diff\n$ diff -u before.json after.json\n--- before.json 2013-07-25 22:46:45.000000000 +0900\n+++ after.json  2013-07-25 22:47:09.000000000 +0900\n@@ -1,3 +1,2 @@\n-{\"domain\":\"127.0.0.1\",\"host\":\"127.0.0.1\",\"server\":\"127.0.0.1\",\"ident\":\"-\",\"user\":\"-\",\"method\":\"GET\",\"path\":\"/\",\"protocol\":\"HTTP/1.1\",\"status\":\"404\",\"size\":\"198\",\"referer\":\"-\",\"agent\":\"Mozilla\",\"response_time\":\"398\",\"cookie\":\"-\",\"set_cookie\":\"-\"}\n-\n+{\"domain\":\"127.0.0.1\",\"host\":\"127.0.0.1\",\"server\":\"127.0.0.1\",\"ident\":\"-\",\"user\":\"-\",\"method\":\"GET\",\"path\":\"/\",\"protocol\":\"HTTP/1.1\",\"status\":404,\"size\":198,\"referer\":\"-\",\"agent\":\"Mozilla\",\"response_time\":398,\"cookie\":\"-\",\"set_cookie\":\"-\"}\n```\n ## benchmark result\n\nI have benchmarked the type conversion speed because it is very important to parse as fast as possible.\nThe result, `Integer(value) rescue false` is faster than `value.to_i.to_s` implementation.\n\n```\nbenchmark ken$ bundle exec ruby test.rb\n       user     system      total        real\n   0.000000   0.000000   0.000000 (  0.000032)\n   0.000000   0.000000   0.000000 (  0.000033)\n   0.000000   0.000000   0.000000 (  0.000016)\nbenchmark ken$ bundle exec ruby test.rb\n       user     system      total        real\n   0.000000   0.000000   0.000000 (  0.000032)\n   0.000000   0.000000   0.000000 (  0.000029)\n   0.000000   0.000000   0.000000 (  0.000010)\nbenchmark ken$ bundle exec ruby test.rb\n       user     system      total        real\n   0.000000   0.000000   0.000000 (  0.000032)\n   0.000000   0.000000   0.000000 (  0.000029)\n   0.000000   0.000000   0.000000 (  0.000011)\nbenchmark ken$ bundle exec ruby test.rb\n       user     system      total        real\n   0.000000   0.000000   0.000000 (  0.000031)\n   0.000000   0.000000   0.000000 (  0.000019)\n   0.000000   0.000000   0.000000 (  0.000009)\n```\n\n#### benchmark code\n\n``` ruby\nrequire 'benchmark'\n\ndef convert_type1(record)\n  record.each do |index,value|\n    if value == value.to_i.to_s\n      record[index] = value.to_i\n    elsif value == value.to_f.to_s\n      record[index] = value.to_f\n    end\n  end\n  return record\nend\n\ndef convert_type2(record)\n  record.each do |index,value|\n    if (Integer(value) rescue false)\n      record[index] = value.to_i\n    elsif (Float(value) rescue false)\n      record[index] = value.to_f\n    end\n  end\n  return record\nend\n\ndef convert_type3(record)\n  record.each do |index,value|\n    if (int_value = Integer(value) rescue false)\n      record[index] = int_value\n    elsif (float_value = Float(value) rescue false)\n      record[index] = float_value\n    end\n  end\n  return record\nend\n\nrecord = {\"int\"=>\"123\",\"float\"=>\"12.34\"}\nn = 1000000\nBenchmark.bm do |x|\n  x.report { convert_type1(record) }\n  x.report { convert_type2(record) }\n  x.report { convert_type3(record) }\nend\n```\n I have wrote a blog about this pull-req.\nhttp://y-ken.hatenablog.com/entry/fluentd-parser-auto-type-conversion\n > Why use string type?\n\nOops, I've fixed. https://github.com/y-ken/fluentd/commit/64e21a4024f24c2a5491ffe02a60ca6b80418cfd\nIt's sorry for my misunderstood usage for config_param parameter.\n thank you.\nThe result, `Integer(value) rescue false` is slower than `value.to_i.to_s` implementation.\n\n``` bash\n$ ruby --version\nruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.2.0]\n\n$ bundle exec ruby test.rb\nRehearsal ------------------------------------\n   0.200000   0.000000   0.200000 (  0.198400)\n   1.530000   0.030000   1.560000 (  1.565692)\n   1.530000   0.030000   1.560000 (  1.555802)\n--------------------------- total: 3.320000sec\n\n       user     system      total        real\n   0.200000   0.000000   0.200000 (  0.197015)\n   1.450000   0.030000   1.480000 (  1.481821)\n   1.460000   0.030000   1.490000 (  1.493970)\n```\n On adding this test, convert_type4 is same speed or faster a little than convert_type1.\nI'm planning to update convert_type like following `convert_type4` code.\nHow do you think to use `convert_type4` instead of `convert_type1`?\n\n``` ruby\ndef convert_type4(record)\n  record.each do |index,value|\n    if value == (int_value = value.to_i).to_s\n      record[index] = int_value\n    elsif value == (float_value = value.to_f).to_s\n      record[index] = float_value\n    end\n  end\n  return record\nend\n```\n\n### results\n\n```\n$ ruby --version\nruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.2.0]\n\n$ bundle exec ruby test.rb\nRehearsal ------------------------------------\n   0.200000   0.000000   0.200000 (  0.199526)\n   1.560000   0.030000   1.590000 (  1.596019)\n   1.580000   0.030000   1.610000 (  1.606314)\n   0.200000   0.000000   0.200000 (  0.197653)\n--------------------------- total: 3.600000sec\n\n       user     system      total        real\n   0.200000   0.000000   0.200000 (  0.200536)\n   1.500000   0.030000   1.530000 (  1.537644)\n   1.450000   0.030000   1.480000 (  1.484264)\n   0.190000   0.000000   0.190000 (  0.193165)\n```\n\n### code\n\n``` ruby\nrequire 'benchmark'\n\ndef convert_type1(record)\n  record.each do |index,value|\n    if value == value.to_i.to_s\n      record[index] = value.to_i\n    elsif value == value.to_f.to_s\n      record[index] = value.to_f\n    end\n  end\n  return record\nend\n\ndef convert_type2(record)\n  record.each do |index,value|\n    if (Integer(value) rescue false)\n      record[index] = value.to_i\n    elsif (Float(value) rescue false)\n      record[index] = value.to_f\n    end\n  end\n  return record\nend\n\ndef convert_type3(record)\n  record.each do |index,value|\n    if (int_value = Integer(value) rescue false)\n      record[index] = int_value\n    elsif (float_value = Float(value) rescue false)\n      record[index] = float_value\n    end\n  end\n  return record\nend\n\ndef convert_type4(record)\n  record.each do |index,value|\n    if value == (int_value = value.to_i).to_s\n      record[index] = int_value\n    elsif value == (float_value = value.to_f).to_s\n      record[index] = float_value\n    end\n  end\n  return record\nend\n\nrecord = {\"int\" => \"123\", \"float\" => \"12.34\", \"str\" => \"13498734hoge\", \"msg\" => \"/path/to\"}\nn = 10000\nBenchmark.bmbm do |x|\n  x.report { n.times { convert_type1(record.dup) } }\n  x.report { n.times { convert_type2(record.dup) } }\n  x.report { n.times { convert_type3(record.dup) } }\n  x.report { n.times { convert_type4(record.dup) } }\nend\n```\n I have updated the code and also confirmed rake test has passed. https://github.com/y-ken/fluentd/commit/7313cdf0103e8f58bf8f856c5b57312c270c82cb\n > Variable name index is wrong. It's not index. `field`? `name`?\n\nThank you @tagomoris . I quite agree. It should use `field`, `name` or `key`.\nI have modified it as `key` as like official document.\nhttp://doc.ruby-lang.org/ja/1.9.3/class/Hash.html\n It may results unexpected conversion and it should use non-missin-critical situation.\nOn adding this option as official, it may raise support cost and/or decrease a feeling of trust for fluentd.\nThus, I'd be better to write this function as meta plugin like below.\n\nWould you please give me a opinion for this issue?\n\n```\n# input sample\n<source>\n  type autocast\n  <config>\n    type tail\n    format ltsv\n    time_format %d/%b/%Y:%H:%M:%S %z\n    path /var/log/httpd/access_log\n    tag apache.access\n  </config>\n</source>\n\n# output(filter) sample\n<match some.foo>\n  type autocast\n  <config>\n    type mongo\n    database fluent\n    collection test\n  </config>\n</match>\n```\n Thank you!\n  I met an error as below when fluentd tried to stdout a hash including Float::NAN. \n\n```\n2013-07-18 12:39:46 +0900 [warn]: emit transaction failed  error=\"'NaN' is an invalid number\"\n  2013-07-18 12:39:46 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/yajl-ruby-1.1.0/lib/yajl.rb:72:in `encode'\n  2013-07-18 12:39:46 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/yajl-ruby-1.1.0/lib/yajl.rb:22:in `dump'\n  2013-07-18 12:39:46 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.35/lib/fluent/plugin/out_stdout.rb:26:in `block in emit'\n  2013-07-18 12:39:46 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/yajl-ruby-1.1.0/lib/yajl.rb:72:in `encode'\n  2013-07-18 12:39:46 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/yajl-ruby-1.1.0/lib/yajl.rb:72:in `encode'\n  2013-07-18 12:39:46 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/yajl-ruby-1.1.0/lib/yajl.rb:72:in `encode'\n  2013-07-18 12:39:46 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/yajl-ruby-1.1.0/lib/yajl.rb:72:in `encode'\n  2013-07-18 12:39:46 +0900 [warn]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/yajl-ruby-1.1.0/lib/yajl.rb:22:in `dump'\n```\n\nIt occurs by `Yajl.dump(record)` at  https://github.com/fluent/fluentd/blob/master/lib/fluent/plugin/out_stdout.rb#L24, and yes, JSON does not have any representations for NaN as stated at https://github.com/avsej/yaji/blob/master/ext/yaji/api/yajl_gen.h#L127\n\nI believe similar things occur for other non-JSONable datatypes too. My idea to fix this is not to convert into JSON in out_stdout plugin. What do you think? \n @repeatedly I got NaN when I used fluent-plugin-anomalydetect. I already sent a pull request to fix it at https://github.com/muddydixon/fluent-plugin-anomalydetect/pull/7, but as I wrote above, I believe similar things would occur for other reasons. \n\nAdding `output_type` option is nice idea. I will send a pull request in the near future. \n  this case is from very simple case. \n\n```\n<match output.test>\n  type file\n  path /Users/junyoung/results.txt\n</match>\n```\n\nafter starting a fluentd process, I've deleted the output file 'results.txt' when it was under being used by fluentd.\nbut, fluentd couldn't write anymore although outputs are still generating from a process.\n  I have an issue td-agent fails to parse the config file that includes multi-bytes characters. Which doesn't occurs when td-agent is started with `/etc/init.d/td-agent`, but does when started with `service` command.\n\nIt seems to be due to the difference of environment variables between `/etc/init.d/td-agent` and `service` command. The latter doesn't inherit environment variables from the terminal from which the command is executed.\n\nYou can see the details in [this blog post](http://heartbeats.jp/hbblog/2013/06/service-start-stop.html).\n\nI'll propose we set default encoding of the config file and provide an option to change the encoding via `fluentd` command. The default value (UTF-8) can be considered safe in almost all of the cases, I guess.\n This thread of fluentd ML describes the same issue:\nhttps://groups.google.com/forum/#!topic/fluentd/fdi1rfZuC0A\n @repeatedly rubinious got SEGV... do we really need to test on that?\n So, what do you guys think about THIS issue? ;)\n @kentaro @repeatedly my question is do we really need this to be option? i think supporting only UTF-8 is just fine.\n Personally agree if you think it's OK ;)\n Omitted the `-e` option and now use `force_encoding('UTF-8')` by default.\n  I waited long for this system to come!\n@repeatedly ++\n\n---\n\n my test log.\n- td-agent.conf\n\n```\n<source>\n  type forward\n  port 24224\n</source>\n\n<match nginx.access.**>\n  type copy\n  <store>\n    type file_alternative\n    time_slice_format %Y%m%d-%H\n    path /var/log/test/nginx/access\n    output_data_type attr:message\n    localtime\n    output_include_time false\n  </store>\n  <store>\n    type anomalydetect\n    tag  nginx.anomaly.access_log\n    tick 180\n    store_file /var/tmp/anomalydetect.dat\n  </store>\n  <store>\n    type parser\n    format ltsv\n    key_name message\n    add_prefix parsed\n  </store>\n</match>\n\n<match **>\n  type file\n  path /var/log/test/unmatched\n</match>\n```\n- log\n\n```\n# /usr/lib64/fluent/ruby/bin/ruby ./bin/fluentd --dry-run -c /etc/td-agent/td-agent.conf\n2013-06-28 17:00:17 +0900 [info]: reading config file path=\"/etc/td-agent/td-agent.conf\"\n2013-06-28 17:00:17 +0900 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24224\n  </source>\n  <match nginx.access.**>\n    type copy\n    <store>\n      type file_alternative\n      time_slice_format %Y%m%d-%H\n      path /var/log/test/nginx/access\n      output_data_type attr:message\n      localtime\n      output_include_time false\n    </store>\n    <store>\n      type anomalydetect\n      tag nginx.anomaly.access_log\n      tick 180\n      store_file /var/tmp/anomalydetect.dat\n    </store>\n    <store>\n      type parser\n      format ltsv\n      key_name message\n      add_prefix parsed\n    </store>\n  </match>\n  <match **>\n    type file\n    path /var/log/test/unmatched\n  </match>\n</ROOT>\n2013-06-28 17:00:17 +0900 [info]: adding source type=\"forward\"\n2013-06-28 17:00:17 +0900 [info]: adding match pattern=\"nginx.access.**\" type=\"copy\"\n2013-06-28 17:00:17 +0900 [info]: adding match pattern=\"**\" type=\"file\"\n$ echo $?\n0\n```\n\n### Setting in the case of insufficiency\n- td-agent.conf\n\n```\n<source>\n  type forward\n  port 24224\n</source>\n\n<match nginx.access.**>\n#  type copy\n  <store>\n    type file_alternative\n    time_slice_format %Y%m%d-%H\n    path /var/log/test/nginx/access\n    output_data_type attr:message\n    localtime\n    output_include_time false\n  </store>\n  <store>\n    type anomalydetect\n    tag  nginx.anomaly.access_log\n    tick 180\n    store_file /var/tmp/anomalydetect.dat\n  </store>\n  <store>\n    type parser\n    format ltsv\n    key_name message\n    add_prefix parsed\n  </store>\n</match>\n\n<match **>\n  type file\n  path /var/log/test/unmatched\n</match>\n```\n- log\n\n```\n$ /usr/lib64/fluent/ruby/bin/ruby ./bin/fluentd --dry-run -c /etc/td-agent/td-agent.conf\n2013-06-28 17:59:38 +0900 [info]: reading config file path=\"/etc/td-agent/td-agent.conf\"\n2013-06-28 17:59:38 +0900 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24224\n  </source>\n  <match nginx.access.**>\n    <store>\n      type file_alternative\n      time_slice_format %Y%m%d-%H\n      path /var/log/test/nginx/access\n      output_data_type attr:message\n      localtime\n      output_include_time false\n    </store>\n    <store>\n      type anomalydetect\n      tag nginx.anomaly.access_log\n      tick 180\n      store_file /var/tmp/anomalydetect.dat\n    </store>\n    <store>\n      type parser\n      format ltsv\n      key_name message\n      add_prefix parsed\n    </store>\n  </match>\n  <match **>\n    type file\n    path /var/log/test/unmatched\n  </match>\n</ROOT>\n2013-06-28 17:59:38 +0900 [info]: adding source type=\"forward\"\n2013-06-28 17:59:38 +0900 [error]: Dry run failed: Missing 'type' parameter on <match nginx.access.**> directive\n$ echo $?\n1\n```\n\n### Case of typo \"</mtch>\"\n- td-agent.conf\n\n```\n<source>\n  type forward\n  port 24224\n</source>\n\n<match nginx.access.**>\n  type copy\n  <store>\n    type file_alternative\n    time_slice_format %Y%m%d-%H\n    path /var/log/test/nginx/access\n    output_data_type attr:message\n    localtime\n    output_include_time false\n  </store>\n  <store>\n    type anomalydetect\n    tag  nginx.anomaly.access_log\n    tick 180\n    store_file /var/tmp/anomalydetect.dat\n  </store>\n  <store>\n    type parser\n    format ltsv\n    key_name message\n    add_prefix parsed\n  </store>\n</match>\n\n<match **>\n  type file\n  path /var/log/test/unmatched\n</mtch>\n```\n- log\n\n```\n$ /usr/lib64/fluent/ruby/bin/ruby ./bin/fluentd --dry-run -c /etc/td-agent/td-agent.conf\n2013-06-28 17:05:09 +0900 [info]: reading config file path=\"/etc/td-agent/td-agent.conf\"\n2013-06-28 17:05:09 +0900 [error]: Dry run failed: parse error at td-agent.conf line 33\n$ echo $?\n1\n```\n\n### Case of typo at plugin name\n- td-agent.conf\n\n```\n<source>\n  type forward\n  port 24224\n</source>\n\n<match nginx.access.**>\n  type copy\n  <store>\n    type file_alternative\n    time_slice_format %Y%m%d-%H\n    path /var/log/test/nginx/access\n    output_data_type attr:message\n    localtime\n    output_include_time false\n  </store>\n  <store>\n    type anomalydetect\n    tag  nginx.anomaly.access_log\n    tick 180\n    store_file /var/tmp/anomalydetect.dat\n  </store>\n  <store>\n    type perser\n    format ltsv\n    key_name message\n    add_prefix parsed\n  </store>\n</match>\n\n<match **>\n  type file\n  path /var/log/test/unmatched\n</match>\n```\n- log\n\n```\n$ /usr/lib64/fluent/ruby/bin/ruby ./bin/fluentd --dry-run -c /etc/td-agent/td-agent.conf\n2013-06-28 17:48:05 +0900 [info]: reading config file path=\"/etc/td-agent/td-agent.conf\"\n2013-06-28 17:48:05 +0900 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24224\n  </source>\n  <match nginx.access.**>\n    type copy\n    <store>\n      type file_alternative\n      time_slice_format %Y%m%d-%H\n      path /var/log/test/nginx/access\n      output_data_type attr:message\n      localtime\n      output_include_time false\n    </store>\n    <store>\n      type anomalydetect\n      tag nginx.anomaly.access_log\n      tick 180\n      store_file /var/tmp/anomalydetect.dat\n    </store>\n    <store>\n      type perser\n      format ltsv\n      key_name message\n      add_prefix parsed\n    </store>\n  </match>\n  <match **>\n    type file\n    path /var/log/test/unmatched\n  </match>\n</ROOT>\n2013-06-28 17:48:05 +0900 [info]: adding source type=\"forward\"\n2013-06-28 17:48:05 +0900 [info]: adding match pattern=\"nginx.access.**\" type=\"copy\"\n2013-06-28 17:48:05 +0900 [error]: Dry run failed: Unknown output plugin 'perser'. Run 'gem search -rd fluent-plugin' to find plugins\n$ echo $?\n1\n```\n\n### Case of typo at plugin key\n- td-agent.conf\n\n```\n<source>\n  type forward\n  port 24224\n</source>\n\n<match nginx.access.**>\n  type copy\n  <store>\n    type file_alternative\n    time_slice_format %Y%m%d-%H\n    path /var/log/test/nginx/access\n    output_data_type attr:message\n    localtime\n    output_include_time false\n  </store>\n  <store>\n    type anomalydetect\n    tag  nginx.anomaly.access_log\n    tick 180\n    store_file /var/tmp/anomalydetect.dat\n  </store>\n  <store>\n    type parser\n    format ltsv\n    name message\n    add_prefix parsed\n  </store>\n</match>\n\n<match **>\n  type file\n  path /var/log/test/unmatched\n</match>\n```\n- log\n\n```\n$ /usr/lib64/fluent/ruby/bin/ruby ./bin/fluentd --dry-run -c /etc/td-agent/td-agent.conf\n2013-06-28 17:53:09 +0900 [info]: reading config file path=\"/etc/td-agent/td-agent.conf\"\n2013-06-28 17:53:10 +0900 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24224\n  </source>\n  <match nginx.access.**>\n    type copy\n    <store>\n      type file_alternative\n      time_slice_format %Y%m%d-%H\n      path /var/log/test/nginx/access\n      output_data_type attr:message\n      localtime\n      output_include_time false\n    </store>\n    <store>\n      type anomalydetect\n      tag nginx.anomaly.access_log\n      tick 180\n      store_file /var/tmp/anomalydetect.dat\n    </store>\n    <store>\n      type parser\n      format ltsv\n      name message\n      add_prefix parsed\n    </store>\n  </match>\n  <match **>\n    type file\n    path /var/log/test/unmatched\n  </match>\n</ROOT>\n2013-06-28 17:53:10 +0900 [info]: adding source type=\"forward\"\n2013-06-28 17:53:10 +0900 [info]: adding match pattern=\"nginx.access.**\" type=\"copy\"\n2013-06-28 17:53:10 +0900 [error]: config error in:\n<store>\n  type parser\n  format ltsv\n  name message\n  add_prefix parsed\n</store>\n\n2013-06-28 17:53:10 +0900 [error]: Dry run failed: 'key_name' parameter is required\n$ echo $?\n1\n```\n\n### Case of typo at plugin value\n- td-agent.conf\n\n```\n<source>\n  type forward\n  port 24224\n</source>\n\n<match nginx.access.**>\n  type copy\n  <store>\n    type file_alternative\n    time_slice_format %Y%m%d-%H\n    path /var/log/test/nginx/access\n    output_data_type attr:message\n    localtime\n    output_include_time false\n  </store>\n  <store>\n    type anomalydetect\n    tag  nginx.anomaly.access_log\n    tick 180\n    store_file /var/tmp/anomalydetect.dat\n  </store>\n  <store>\n    type parser\n    format ltvs\n    key_name message\n    add_prefix parsed\n  </store>\n</match>\n\n<match **>\n  type file\n  path /var/log/test/unmatched\n</match>\n```\n- log\n\n```\n$ /usr/lib64/fluent/ruby/bin/ruby ./bin/fluentd --dry-run -c /etc/td-agent/td-agent.conf\n2013-06-28 17:55:33 +0900 [info]: reading config file path=\"/etc/td-agent/td-agent.conf\"\n2013-06-28 17:55:33 +0900 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24224\n  </source>\n  <match nginx.access.**>\n    type copy\n    <store>\n      type file_alternative\n      time_slice_format %Y%m%d-%H\n      path /var/log/test/nginx/access\n      output_data_type attr:message\n      localtime\n      output_include_time false\n    </store>\n    <store>\n      type anomalydetect\n      tag nginx.anomaly.access_log\n      tick 180\n      store_file /var/tmp/anomalydetect.dat\n    </store>\n    <store>\n      type parser\n      format ltvs\n      key_name message\n      add_prefix parsed\n    </store>\n  </match>\n  <match **>\n    type file\n    path /var/log/test/unmatched\n  </match>\n</ROOT>\n2013-06-28 17:55:33 +0900 [info]: adding source type=\"forward\"\n2013-06-28 17:55:33 +0900 [info]: adding match pattern=\"nginx.access.**\" type=\"copy\"\n2013-06-28 17:55:33 +0900 [error]: Dry run failed: Unknown format template 'ltvs'\n$ echo $?\n1\n```\n :+1:\n  to separate Engine.emit for $log from each plugin's main thread.\n\nOn current code, if Engine.emit on $log raises any exceptions, main thread of\neach plugins (that calls logger) will fail and run into shutdown sequence.\nThis behavior is unexpected for many users.\n I guess the intention of `@log_event_queue_signal_context` is that signal handlers could cause a deadlock if the handler is called by the same signal handler. It makes sense to not use mutex to avoid the problem. But if you once use periodical polling, you don't have to use mutex any more.\n\nAnother problem is that `c = caller; if c.count(c.shift) <= 0` check doesn't take effect because the emit doesn't run in the same thread with the `#event` method. I guess that is the reason why you added `raw_log` method but it's incomplete because it still causes infinite loop if an output plugin matched with `fluent.**` shows some messages.\n\nSo I tried to implement other code. Could you review this code?: https://github.com/fluent/fluentd/tree/logger-background-mit  diff: https://github.com/fluent/fluentd/compare/master...logger-background-mit\n I think that @frsyuki 's suggestion about `@log_event_queue_signal_context` is correct, so i fixed without mutex.\n\n2nd suggestion about `#raw_log` method is wrong. Infinite loops of user's configuration about `<fluent.**>` is handled correctly as infinite-loop as same as events of non-fluentd-logs.\n`#raw_log` method is for events which cannot be emitted correctly. We must log about such events in local log files at least (without emitting).\n Updated my code.\nThe biggest difference between @frsyuki 's and mine is where background emit thread should be exists.\nMy idea is: 'logger is about formatting and any others, not about event handling'.\n  When an error occurs in on_read method, UnixDomainSocketConnection is leak.\nThis Pull Request is Close Connection at error.\n :+1: \n OK. I understanding.\nI will change the error message.\n OK.\nI could 3 commits into 1 commit.\nThank you.\n  The method 'phi(now) of 'FailureDetector class seems to calculate the variable 't wrong way.\n\nWhen @heartbeat_interval is not the default value (1 sec), 't value contains (@heartbeat_interval - 1) sec. But 'mean doesn't. So @heartbeat_interval is set higher, 'phi(now) returns a higher value.\n\nI'm sorry but I don't know the phi accuracy calculation logic precisely. But there seems no documentation or reference of the phi_threshold directive and this logic may confuse some people like me.\n\nThank you in advance.\n I think your correct, @tsuda7.\nIt should work with heartbeat_interval < 0 because `mean` is anyway a float value.\n Thanks for replies, Mr @repeatedly , @frsyuki .\nI'm appreciated to know that my code was merged.\n  I use fluentd as log collection service. At the beginning, I just write log received to hdfs. It works fine and stable. But when I wanna copy received log and forward to another fluentd. It becomes unstable.\n\n```\n...\n2013-05-30 13:36:21 +0800 [info]: process finished code=6\n...\n2013-05-30 13:40:03 +0800 [info]: process finished code=6\n...\n2013-05-30 13:41:11 +0800 [info]: process finished code=6\n2013-05-30 13:41:11 +0800 [info]: starting fluentd-0.10.33\n2013-05-30 13:41:11 +0800 [info]: reading config file path=\" .... \"\n2013-05-30 13:41:11 +0800 [info]: using configuration file\n...\n```\n\nIt seems that fluentd auto restart in several minutes. \nHere is my configuration with fluentd 0.10.33.\n\nThxs for any advice!\n\n```\n  <source>\n    type forward\n    port 24225\n    bind 0.0.0.0\n  </source>\n  <match applog.**>\n    type copy\n    <store>\n      type forest\n      subtype webhdfs\n      remove_prefix applog\n      <template>\n        host 10.10.1.1\n        port 50070\n        username hadoop\n        path /applog/${tag}/%Y%m%d/%H.log\n        flush_interval 60s\n        read_timeout 100\n        field_separator TAB\n        output_include_time false\n        output_include_tag false\n        output_data_type attr:all\n      </template>\n      <case dw.**>\n        path /applog/${tag}/%Y%m%d/%H_%M.log\n        flush_interval 30s\n      </case>\n    </store>\n\n    # copy log and forward to another fluentd\n    <store>\n      type forward\n      flush_interval 1s\n      heartbeat_interval 60s\n      <server>\n        name app10-001\n        host 10.10.3.1\n        port 24227\n        weight 100\n      </server>\n    </store>\n\n  </match>\n\n```\n @repeatedly\n\nthanks for you reply.\n\nhere is entire log.\n\n```\n\n2013-05-30 13:40:03 +0800 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24225\n    bind 0.0.0.0\n  </source>\n  <match applog.**>\n    type copy\n    <store>\n      type forest\n      subtype webhdfs\n      remove_prefix applog\n      <template>\n        host 10.10.1.1\n        port 50070\n        username hadoop\n        path /applog/${tag}/%Y%m%d/%H.log\n        flush_interval 60s\n        read_timeout 100\n        field_separator TAB\n        output_include_time false\n        output_include_tag false\n        output_data_type attr:all\n      </template>\n      <case dw.**>\n        path /applog/${tag}/%Y%m%d/%H_%M.log\n        flush_interval 30s\n      </case>\n    </store>\n    <store>\n      type forward\n      flush_interval 1s\n      heartbeat_interval 60s\n      <server>\n        name app10-001\n        host 10.10.3.1\n        port 24227\n        weight 100\n      </server>\n    </store>\n  </match>\n</ROOT>\n2013-05-30 13:40:03 +0800 [info]: adding source type=\"forward\"\n2013-05-30 13:40:03 +0800 [info]: adding match pattern=\"applog.**\" type=\"copy\"\n2013-05-30 13:40:03 +0800 [info]: adding forwarding server 'app10-001' host=\"10.10.3.1\" port=24227 weight=100\n2013-05-30 13:40:03 +0800 [info]: listening fluent socket on 0.0.0.0:24225\n2013-05-30 13:40:03 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:40:03 +0800 [info]: out_forest plants new output: webhdfs for tag 'corp.ais.storagelog'\n2013-05-30 13:40:03 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:40:03 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.pro_tag_data_collect'\n2013-05-30 13:40:04 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:40:04 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.pic_speed'\n2013-05-30 13:40:06 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:40:06 +0800 [info]: out_forest plants new output: webhdfs for tag 'dw.mobile_api_action'\n2013-05-30 13:40:11 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:40:11 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.del_data_collect'\n2013-05-30 13:40:11 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:40:11 +0800 [info]: out_forest plants new output: webhdfs for tag 'dw.soj'\n2013-05-30 13:40:14 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:40:14 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.fix_data_collect'\n2013-05-30 13:41:11 +0800 [info]: process finished code=6\n2013-05-30 13:41:11 +0800 [info]: starting fluentd-0.10.33\n2013-05-30 13:41:11 +0800 [info]: reading config file path=\"/home/www/fluentd/conf/app-log.conf\"\n2013-05-30 13:41:11 +0800 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24225\n    bind 0.0.0.0\n  </source>\n  <match applog.**>\n    type copy\n    <store>\n      type forest\n      subtype webhdfs\n      remove_prefix applog\n      <template>\n        host 10.10.1.1\n        port 50070\n        username hadoop\n        path /applog/${tag}/%Y%m%d/%H.log\n        flush_interval 60s\n        read_timeout 100\n        field_separator TAB\n        output_include_time false\n        output_include_tag false\n        output_data_type attr:all\n      </template>\n      <case dw.**>\n        path /applog/${tag}/%Y%m%d/%H_%M.log\n        flush_interval 30s\n      </case>\n    </store>\n    <store>\n      type forward\n      flush_interval 1s\n      heartbeat_interval 60s\n      <server>\n        name app10-001\n        host 10.10.3.1\n        port 24227\n        weight 100\n      </server>\n    </store>\n  </match>\n</ROOT>\n2013-05-30 13:41:11 +0800 [info]: adding source type=\"forward\"\n2013-05-30 13:41:11 +0800 [info]: adding match pattern=\"applog.**\" type=\"copy\"\n2013-05-30 13:41:11 +0800 [info]: adding forwarding server 'app10-001' host=\"10.10.3.1\" port=24227 weight=100\n2013-05-30 13:41:11 +0800 [info]: listening fluent socket on 0.0.0.0:24225\n2013-05-30 13:41:11 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:41:11 +0800 [info]: out_forest plants new output: webhdfs for tag 'corp.ais.storagelog'\n2013-05-30 13:41:11 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:41:11 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.pro_tag_data_collect'\n2013-05-30 13:41:11 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:41:11 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.pic_speed'\n2013-05-30 13:41:12 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:41:12 +0800 [info]: out_forest plants new output: webhdfs for tag 'dw.soj'\n2013-05-30 13:41:16 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:41:16 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.del_data_collect'\n2013-05-30 13:41:19 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:41:19 +0800 [info]: out_forest plants new output: webhdfs for tag 'dw.mobile_api_action'\n2013-05-30 13:41:22 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:41:22 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.fix_data_collect'\n2013-05-30 13:42:01 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:42:01 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.pro_click'\n2013-05-30 13:42:01 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:42:01 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.hp_pricing_click_new'\n2013-05-30 13:42:02 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:42:02 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.hp_pricing_click'\n2013-05-30 13:44:29 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:44:29 +0800 [info]: out_forest plants new output: webhdfs for tag 'haozu_test.g_ppc_system'\n2013-05-30 13:46:05 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:46:05 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.broker_report_download_new'\n2013-05-30 13:48:02 +0800 [info]: process finished code=6\n2013-05-30 13:48:02 +0800 [info]: starting fluentd-0.10.33\n2013-05-30 13:48:02 +0800 [info]: reading config file path=\"/home/www/fluentd/conf/app-log.conf\"\n2013-05-30 13:48:02 +0800 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24225\n    bind 0.0.0.0\n  </source>\n  <match applog.**>\n    type forest\n    subtype webhdfs\n    remove_prefix applog\n    <template>\n      host 10.10.1.1\n      port 50070\n      username hadoop\n      path /applog/${tag}/%Y%m%d/%H.log\n      flush_interval 60s\n      read_timeout 100\n      field_separator TAB\n      output_include_time false\n      output_include_tag false\n      output_data_type attr:all\n    </template>\n    <case dw.**>\n      path /applog/${tag}/%Y%m%d/%H_%M.log\n      flush_interval 30s\n    </case>\n  </match>\n</ROOT>\n2013-05-30 13:48:02 +0800 [info]: adding source type=\"forward\"\n2013-05-30 13:48:02 +0800 [info]: adding match pattern=\"applog.**\" type=\"forest\"\n2013-05-30 13:48:02 +0800 [info]: listening fluent socket on 0.0.0.0:24225\n2013-05-30 13:48:02 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:02 +0800 [info]: out_forest plants new output: webhdfs for tag 'corp.ais.storagelog'\n2013-05-30 13:48:02 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:02 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.pro_tag_data_collect'\n2013-05-30 13:48:02 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:02 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.pic_speed'\n2013-05-30 13:48:02 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:02 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.del_data_collect'\n2013-05-30 13:48:12 +0800 [info]: webhdfs connection confirmed: 10.10.1.1:50070\n2013-05-30 13:48:12 +0800 [info]: out_forest plants new output: webhdfs for tag 'ekujna.jingjia_stop_data_collect'\n2013-05-30 13:48:13 +0800 [info]: restarting\n2013-05-30 13:48:13 +0800 [info]: shutting down fluentd\n2013-05-30 13:48:14 +0800 [info]: process finished code=0\n2013-05-30 13:48:14 +0800 [info]: starting fluentd-0.10.33\n2013-05-30 13:48:14 +0800 [info]: reading config file path=\"/home/www/fluentd/conf/app-log.conf\"\n2013-05-30 13:48:14 +0800 [info]: using configuration file: <ROOT>\n  <source>\n    type forward\n    port 24225\n    bind 0.0.0.0\n  </source>\n  <match applog.**>\n    type forest\n    subtype webhdfs\n    remove_prefix applog\n    <template>\n      host 10.10.1.1\n      port 50070\n      username hadoop\n      path /applog/${tag}/%Y%m%d/%H.log\n      flush_interval 60s\n      read_timeout 100\n      field_separator TAB\n      output_include_time false\n      output_include_tag false\n      output_data_type attr:all\n    </template>\n    <case dw.**>\n      path /applog/${tag}/%Y%m%d/%H_%M.log\n      flush_interval 30s\n    </case>\n  </match>\n</ROOT>\n\n```\n I have shutdown fluentd and restart it. When I find that it is unstable, I disable out_copy plugin.\n @repeatedly\nyes, `process finished code=6` is always occurred.  \n\nIs it possible that it is caused by data I received?\n  Is there anyway to change the permissions of file outputted by out_file? Right now, they seem to be 666, which is way too open for our setup.\n\nThanks,\nAndy\n Well, the problem is that if you have sensitive data in your log files, you don't want them world-writeable. That seems like a bad idea.\n now, daemonized fluentd's umask is 0.\nnot daemonized fluentd's umask is same as the running environment.\nand, out_file has not specified a permission at File.open().\n\nI propose the following.\n1. fluentd should have a default permission to handle files. (typically 0644?)\n2. out_file will have \"config_param permission\" to set it for output files.\n That sounds like a good ideal to me.\n\nI believe I misspoke before, actually all my files have a permission of '0777'. My assumption is that since the base fluentd directory for our setup (/srv/logs/fluentd) is actually a symlink to another place (the symlink itself has permissions 777), that is why we are getting log files with 777 as the permission.\n  This fixes a serious bug that makes the copy plugin leak events when used with time sliced output plugins. And possibly other cases of event leak.\n\nSharing a a single instance of MesspaPack::Unpacker between input plugins and\nMessagePackEventStream instances is unsafe. A test case has been added\nto prove how easy it is leak events with the copy plugin and multiple\noutput plugins.\n\n/cc: @kzk\n I've been using this patch in production since last Sunday and it works perfectly. No more events lost!\n\nAny feedback?\n @repeatedly I'm surprised too. Many users might be loosing events without noticing! Did you see the test case?\n\nIt's very easy to reproduce. Here's how: https://gist.github.com/abecciu/65c16632413dbf1b4d4f\n @repeatedly @kzk any update on this? I'm going on vacation next Sunday and I want to make sure this gets merged before I leave. I think it's a critical bug and should be fixed asap. I'm pretty sure many users are loosing events without noticing. Please, let me know if you need more details. Thanks!\n Good catch, @repeatedly. I found that the code cause this situation: https://gist.github.com/frsyuki/5683272\nActually, the result is different between msgpack v0.4.7 and v0.5.5. Calling reset in feed_each block was unexpected usage...\n\nIn v0.5.5, `Unpacker.new` doesn't impact on performance because it has cache memory internally. So I agree that MessagePackEventStream shouldn't use cached Unpacker.\n @abecciu td-agent (stable distribution of Fluentd) still uses msgpack v0.4.7. If you want a stable version, i recommend you to check this repository > https://github.com/treasure-data/td-agent/blob/master/debian/source/include-binaries\n\n@repeatedly @frsyuki please merge!\n Thanks for merging guys! You should release a new version of the gem soon, so that users don't get hit by this bug.\n  Hi- I followed all of the instructions to set up fluentd with the webhdfs plugin (very well done, by the way). I configured my namenode & path. I have included the configuration snippet and the log. /tmp/log_fluentd is a directory with mode 777, so webhdfs should be able to open it. What does this error mean? \n\nThank you for your time and all of your effort!\n\nLance\n\n```\n  <match hdfs.*.*>\n    type webhdfs\n    host <namenode host removed, but it is right>\n    port 50070\n    path /tmp/log_fluentd/access.log.${hostname}\n  </match>\n</ROOT>\n2013-05-14 03:41:05 +0000 [info]: adding source type=\"forward\"\n2013-05-14 03:41:05 +0000 [info]: adding source type=\"http\"\n2013-05-14 03:41:05 +0000 [info]: adding source type=\"debug_agent\"\n2013-05-14 03:41:05 +0000 [info]: adding match pattern=\"td.*.*\" type=\"tdlog\"\n2013-05-14 03:41:05 +0000 [info]: adding match pattern=\"debug.**\" type=\"stdout\"\n2013-05-14 03:41:05 +0000 [info]: adding match pattern=\"hdfs.*.*\" type=\"webhdfs\"\n2013-05-14 03:41:06 +0000 [error]: webdhfs check request failed!\n2013-05-14 03:41:06 +0000 [error]: unexpected error error=\"<html><head><meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=ISO-8859-1\\\"/><title>Error 404 NOT_FOUND</title></head><body><h2>HTTP ERROR 404</h2><p>Problem accessing /webhdfs/v1/. Reason:<pre>    NOT_FOUND</pre></p><hr /><i><small>Powered by Jetty://</small></i><br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                <br/>                                                </body></html>\"\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/webhdfs-0.5.1/lib/webhdfs/client_v1.rb:280:in `request'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/webhdfs-0.5.1/lib/webhdfs/client_v1.rb:237:in `operate_requests'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/webhdfs-0.5.1/lib/webhdfs/client_v1.rb:100:in `list'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-webhdfs-0.1.4/lib/fluent/plugin/out_webhdfs.rb:80:in `start'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/match.rb:42:in `start'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/engine.rb:178:in `block in start'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/engine.rb:177:in `each'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/engine.rb:177:in `start'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/engine.rb:146:in `run'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/supervisor.rb:318:in `run_engine'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/supervisor.rb:90:in `block in start'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/supervisor.rb:180:in `call'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/supervisor.rb:180:in `main_process'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/supervisor.rb:155:in `block in supervise'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/supervisor.rb:154:in `fork'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/supervisor.rb:154:in `supervise'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/supervisor.rb:83:in `start'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/lib/fluent/command/fluentd.rb:129:in `<top (required)>'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.33/bin/fluentd:6:in `<top (required)>'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/bin/fluentd:23:in `load'\n  2013-05-14 03:41:06 +0000 [error]: /usr/lib64/fluent/ruby/bin/fluentd:23:in `<top (required)>'\n  2013-05-14 03:41:06 +0000 [error]: /usr/sbin/td-agent:7:in `load'\n  2013-05-14 03:41:06 +0000 [error]: /usr/sbin/td-agent:7:in `<main>'\n2013-05-14 03:41:06 +0000 [info]: process finished code=0\n2013-05-14 03:41:06 +0000 [warn]: process died within 1 second. exit.\n```\n as @repeatedly suggested, this is fluent-plugin-webhdfs issue. btw, did you enable webhdfs for sure? \n\nSeems like the client got 404.\n Yes, you're right on both counts. Apologies. \n  When fluentd is in trouble (ex: buffer chunk full) that every emit for all messages will fails, Fluent::Engine.emit writes error log and stacktrace for every emit event.\n\nThis brings error log storm for fluentd's log. Traffic of 10 message per seconds brings 15 lines of warn log and stacktrace lines in `Fluent::Engine#emit`.\nAnd out_exec_filter calls every time for each one messages. This brings more fluentd error log storm, and its including message content itself.\n\nIn troubles, investigations are very hard by this fluentd's log storm. We need options to suppress these logs seriously.\n\n(For farther versions, we may need configuration sections like `<logger>` or other such that.)\n \"Is this a top level configuration?\" yes. It may be better to implement as command line option.\n\n\"Where is the test?\" oh...\n squashed.\n  Fluentd's code of HEAD doesn't take care for situations executed as foreground process.\n\nFor foreground process, terminals and daemonize tools send signals to all processes in target process group. In result, Fluent::Engine.stop will be called twice and invalid shutdown processes will be executed.\n\nThis patch cannot solve problems about out_exec_filter completely.\nChild processes of out_exec_filter will exit with signals for process group, and out_exec_filter cannot make proper dicision to ignore exiting child process or not.\n  Below is my td-agent.conf file. I am getting following warn message in td-agent.log file \n2013-05-03 11:21:19 +0000 [warn]: parameter 'tag' in &lt;source&gt;\n  type unix\n  path /var/run/td-agent/td-agent.sock\n  tag s3.webapp.logs\n&lt;/source&gt; is not used.\n\nbut it seems to be working ok. why is it warning it is not used?\n&lt;source&gt;\n  type tail\n  format apache2\n  path /var/log/apache2/access-sconnect.log\n  pos_file /var/log/td-agent/apache2.access_log-sconnect.pos\n  tag s3.apache.access\n&lt;/source&gt;\n\n&lt;match s3.apache.access&gt;\n  type s3\n\n  aws_key_id abcd\n  aws_sec_key efgh\n  s3_bucket ijkl_logs\n  path apache_logs/\n  buffer_path  /var/log/td-agent/buffer/s3\n\n  time_slice_format %Y%m%d%H  \n  time_slice_wait 10m\n  utc\n\n  buffer_chunk_limit 256m\n&lt;/match&gt;\n# webapp logs\n\n&lt;source&gt;\n  type unix\n  path /var/run/td-agent/td-agent.sock\n\n  tag s3.webapp.logs\n&lt;/source&gt;\n&lt;match s3.webapp.logs&gt;\n  type s3\n\n  aws_key_id abcd\n  aws_sec_key efgh \n  s3_bucket ijkl_logs\n  path webapp_logs/\n  buffer_path  /var/log/td-agent/buffer/webapp_s3\n\n  time_slice_format %Y%m%d%H  \n  time_slice_wait 10m\n  utc\n\n  buffer_chunk_limit 256m\n&lt;/match&gt;\n Hello, \nWhat i want to do is different source be linked to different match block. So this wont be problem right?\n Hmm i got it. we do not need to set tag paramater for source type unix right. \nthanks\n   like this:\n\n```\n2013-05-07 20:39:10 +0900 [warn]: temporarily failed to flush the buffer. next_retry=2013-05-07 20:39:16 +0900 error_class=\"RuntimeError\" error=\"command returns 32512: hoge /var/folders/hr/m50p5kwx6fj2gc8_phc6bnmr0000gn/T/fluent-plugin-exec-20130507-25904-1b80dld\" instance=70298654057540\n  2013-05-07 20:39:10 +0900 [warn]: /Users/tagomoris/Documents/fluentd/lib/fluent/plugin/out_exec.rb:84:in `write'\n  2013-05-07 20:39:10 +0900 [warn]: /Users/tagomoris/Documents/fluentd/lib/fluent/buffer.rb:290:in `write_chunk'\n  2013-05-07 20:39:10 +0900 [warn]: /Users/tagomoris/Documents/fluentd/lib/fluent/buffer.rb:274:in `pop'\n  2013-05-07 20:39:10 +0900 [warn]: /Users/tagomoris/Documents/fluentd/lib/fluent/output.rb:294:in `try_flush'\n  2013-05-07 20:39:10 +0900 [warn]: /Users/tagomoris/Documents/fluentd/lib/fluent/output.rb:121:in `run'\n```\n  To suppress warn/error logs, we need same string for same errors.\nNext retry time at the end of warn string prevent same warn/error check.\n  LabeledTSVParser has overriding ValuesParser method of configure.\nBut it skipped error handling of configure in ValuesParser.\n\nhttps://github.com/fluent/fluentd/blob/cc9a9dea4c2d501fa6aae522246ae3cd92b6635c/lib/fluent/parser.rb#L143\n Yes. This issue merge to #124.\n  ### ValuesParser is not delete the output of time key like other do so.\n\nTime key should be deleted when it has used for fluentd internal time like TSVParser, CSVParser do so.\n### LabeledTSVParser error handling problem\n\nThe error of \"time_format parameter is ignored\" puts message to $log.warn.\nIt should raise ConfigError.\n### The default of time_key for LabeledTSVParser\n\nI think LabeledTSVParser should be 'time' for the default of `time_key`.\nThis behavior causes confusion and not same as ApacheParser, JSONParser and RegexpParser.\nIt cannot seamless upgrade from in_tail with regex or apache apache2 nginx and so on.\nThere configuration usualy have time_format but not it has time_key.  like http://ltsv.org/\nIf it not 'time' for the default of `time_key`, it could result using current time when time_format is blank.\n\n**footnote**\nValuesParser was used by LabeledTSVParser, TSVParser, CSVParser\n @repeatedly \nI have update issue. Would you please check it again?\n  Log event is not emitted when you have <match fluent.*> because $log.tag, 'fluent', does not match that pattern alone.\n\nDiscard this patch if this is intended behavior.\n ok. thank you for a comment.\n Is there  the v11 specification about internal messaging system available?\n  Because of massive cluster, I don't know which td-agent transfer is breaked down\n\nlook fluentd agent \n\nip/hostname/status(up/down)/dead how much times and \n\nso on in a api or web\nfor example flumes server monitor agent web\n Hi loveshell,\n\nWe are thinking of building this exact service as a hosted service at Treasure Data. Would you be interested?\n\nOf course, the client (fluentd side) of this will be open sourced.\n can I  monitor my fluentd cluster \n sloved it\uff1f\n  RotationRequest should have :wait attr_reader.\nBecause the following line exists in in_tail.rb:232.\n\n  wait -= @rotate_queue.first.wait unless @rotate_queue.empty?\n  Great job!!!!\n cool :shipit: \n  Hi.\nI tried fluentd v0.10.32 with msgpack 0.5.4, but i cannot.\n\n```\n$ ruby -v\nruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin11.4.2]\n\n$ cat Gemfile\nsource 'https://rubygems.org'\n\ngem 'fluentd'\ngem 'msgpack', '>= 0.5.4'\n\n$ bundle install\nFetching gem metadata from https://rubygems.org/.........\nResolving dependencies...\nBundler could not find compatible versions for gem \"msgpack\":\n  In Gemfile:\n    fluentd (>= 0) ruby depends on\n      msgpack (~> 0.4.4) ruby\n\n    msgpack (0.5.4)\n```\n\nIt seems necessary to update fluentd.gemspec.\n I think v0.10.32 release is to enable to use msgpack 0.5.4.\n Changed gemspec MUST be distributed as new version rubygem.\n I see. thanks.\n v0.10.33 will be released soon. please wait for a while.\n I thought wrong to include Rakefile change in 0.10.32. I'm sorry.\n  This pull request allow fluentd get full configure from a url such as an API of SCM\n\nThe configure content could be dynamic generated by a managment system.\nIt would be very useful if we have a large number of machines and different configure on each machine. \n\nTwo new params has been added:\n-u remote_config\n-t timeout\n\nps:\nI got a error when run rake install \nERROR:  Error installing ./pkg/fluentd-0.10.32.gem:\n    fluentd requires fluentd (>= 0)\n\nI don't know how to fix this, so I switch jeweler to bundler https://github.com/fluent/fluentd/commit/ede5a1f42603da86c3b8dab980fe924c43709fb6\n oh..no\nI didn't seen HTTP include directive before...\nThis pull request is not necessary, closed\n  When running this super trivial filter, memory usage keeps growing, growing, growing:\n\n```\n<match authlogs.input>\n  type exec_filter\n  command /bin/cat\n  in_format msgpack\n  out_format msgpack\n  time_key time\n  tag authlogs.input.parsed\n</match>\n```\n\nAny idea why?\nThis is with td-agent.\n It may be fragmentations of memory space, by msgpack v0.4.x.\nI found that behavior with exec_filter + msgpack option, and also with heavy traffic in_forward -> out_forward environment.\n\nOptions are:\n- to use jemalloc\n  - If you are using td-agent v1.1.4 or later, jemalloc is automatically loaded.\n- to use 'tsv' or other format\n- to use msgpack v0.5.x\n\nIf you want to use msgpack v0.5.x, you should change fluentd's dependency. It is relatively hard.\nWe are now discussing that fix of fluentd on #111 .\n Hi Satoshi,\n\nI use the current td-agent version, so it is definitely using jemalloc. The input is already an msgpack stream so converting it to another format, presumably JSON, is sad. But well, I'll try this as a workaround no matter what.\nThanks for your help.\n pinging @jedisct1 \n Yep, this issue can be closed.\n  Fluentd with msgpack 0.5.4 works with dramatically less memory than with msgpack 0.4.7.\n\nMemory resource graphs for my personal benchmarks below:\n- Fluentd 0.10.32 + ruby 2.0.0-p0 + msgpack 0.4.7\n\nhttp://cdn-ak.f.st-hatena.com/images/fotolife/t/tagomoris/20130315/20130315173133.png\n- Fluentd 0.10.32 + ruby 2.0.0-p0 + msgpack 0.5.4 (09:00 - 12:00)\n\nhttp://cdn-ak.f.st-hatena.com/images/fotolife/t/tagomoris/20130316/20130316125232.png\n FYI: I'm trying 3days long-run test with ruby 2.0.0-p0 and msgpack 0.5.4.\n Long run test with fluentd v0.10.32, msgpack v0.5.4 and ruby 2.0.0-p0 has successfully ended.\n- 72 hours\n- 50,000 msgs/sec\n- 100Mbps inbound/outbound traffic by in_foward and out_forward\n cool :clap: :+1: \n It looks good idea for me.\n +1 on @repeatedly \n 'jeweler' may not supports such that syntax like `\"~> 0.4.7\", \"~> 0.5.4\"` ?\n\n`rake build` with `gemspec.add_dependency \"msgpack\", \"~> 0.4.7\", \"~> 0.5.4\"` -> `s.add_dependency(%q<msgpack>, [\"~> 0.4.4\"])`\n Oh, realy? \n- https://gist.github.com/hotchpotch/85ec8bf6eda7832eab8d#file-fluentd-gemspec-diff-L126\n\nYour jeweler version is old ? ( My jeweler version is 1.8.4 )\n Oh, i might have a mistake. `rake gemspec` after `gem i jeweler` has succeeded.\n :+1: \n Updated patch to include dependencies both msgpack 0.4.x and 0.5.x.\n Can anyone install fluentd with msgpack 0.5.x from my branch?\nI'm still failing with errors:\n\n```\n$ rake build\nWARNING:  no description specified\n  Successfully built RubyGem\n  Name: fluentd\n  Version: 0.10.32\n  File: fluentd-0.10.32.gem\n$ gem i pkg/fluentd-0.10.32.gem \nERROR:  While executing gem ... (Gem::DependencyError)\n    Unable to resolve dependencies: fluentd requires msgpack (~> 0.4.4)\n```\n\nfluentd.gemspec is:\n\n```\n$ mkdir tmp ; cd tmp\n$ gem unpack ../pkg/fluentd-0.10.32.gem \nUnpacked gem: '/Users/tagomoris/Documents/fluentd/tmp/fluentd-0.10.32'\n$ cat fluentd-0.10.32/fluentd.gemspec \n# Generated by jeweler\n# DO NOT EDIT THIS FILE DIRECTLY\n# Instead, edit Jeweler::Tasks in Rakefile, and run 'rake gemspec'\n# -*- encoding: utf-8 -*-\n\nGem::Specification.new do |s|\n  s.name = \"fluentd\"\n  s.version = \"0.10.32\"\n\n  s.required_rubygems_version = Gem::Requirement.new(\">= 0\") if s.respond_to? :required_rubygems_version=\n  s.authors = [\"Sadayuki Furuhashi\"]\n  s.date = \"2013-03-21\"\n  s.email = \"frsyuki@gmail.com\"\n  s.executables = [\"fluentd\", \"fluent-cat\", \"fluent-gem\", \"fluent-debug\"]\n  s.extra_rdoc_files = [\n    \"ChangeLog\",\n    \"README.rdoc\"\n  ]\n  s.files = [\n    \"AUTHORS\",\n    \"COPYING\",\n    \"Gemfile\",\n    \"Rakefile\",\n    \"VERSION\",\n    \"bin/fluent-cat\",\n    \"bin/fluent-debug\",\n    \"bin/fluent-gem\",\n    \"bin/fluentd\",\n    \"fluent.conf\",\n    \"fluentd.gemspec\",\n    \"lib/fluent/buffer.rb\",\n    \"lib/fluent/command/cat.rb\",\n    \"lib/fluent/command/debug.rb\",\n    \"lib/fluent/command/fluentd.rb\",\n    \"lib/fluent/config.rb\",\n    \"lib/fluent/engine.rb\",\n    \"lib/fluent/env.rb\",\n    \"lib/fluent/event.rb\",\n    \"lib/fluent/input.rb\",\n    \"lib/fluent/load.rb\",\n    \"lib/fluent/log.rb\",\n    \"lib/fluent/match.rb\",\n    \"lib/fluent/mixin.rb\",\n    \"lib/fluent/output.rb\",\n    \"lib/fluent/parser.rb\",\n    \"lib/fluent/plugin.rb\",\n    \"lib/fluent/plugin/buf_file.rb\",\n    \"lib/fluent/plugin/buf_memory.rb\",\n    \"lib/fluent/plugin/buf_zfile.rb\",\n    \"lib/fluent/plugin/in_debug_agent.rb\",\n    \"lib/fluent/plugin/in_exec.rb\",\n    \"lib/fluent/plugin/in_forward.rb\",\n    \"lib/fluent/plugin/in_gc_stat.rb\",\n    \"lib/fluent/plugin/in_http.rb\",\n    \"lib/fluent/plugin/in_object_space.rb\",\n    \"lib/fluent/plugin/in_status.rb\",\n    \"lib/fluent/plugin/in_stream.rb\",\n    \"lib/fluent/plugin/in_syslog.rb\",\n    \"lib/fluent/plugin/in_tail.rb\",\n    \"lib/fluent/plugin/out_copy.rb\",\n    \"lib/fluent/plugin/out_exec.rb\",\n    \"lib/fluent/plugin/out_exec_filter.rb\",\n    \"lib/fluent/plugin/out_file.rb\",\n    \"lib/fluent/plugin/out_forward.rb\",\n    \"lib/fluent/plugin/out_null.rb\",\n    \"lib/fluent/plugin/out_roundrobin.rb\",\n    \"lib/fluent/plugin/out_stdout.rb\",\n    \"lib/fluent/plugin/out_stream.rb\",\n    \"lib/fluent/plugin/out_test.rb\",\n    \"lib/fluent/plugin/socket_util.rb\",\n    \"lib/fluent/process.rb\",\n    \"lib/fluent/status.rb\",\n    \"lib/fluent/supervisor.rb\",\n    \"lib/fluent/test.rb\",\n    \"lib/fluent/test/base.rb\",\n    \"lib/fluent/test/input_test.rb\",\n    \"lib/fluent/test/output_test.rb\",\n    \"lib/fluent/version.rb\",\n    \"test/config.rb\",\n    \"test/helper.rb\",\n    \"test/match.rb\",\n    \"test/mixin.rb\",\n    \"test/parser.rb\",\n    \"test/plugin/in_exec.rb\",\n    \"test/plugin/in_forward.rb\",\n    \"test/plugin/in_gc_stat.rb\",\n    \"test/plugin/in_http.rb\",\n    \"test/plugin/in_object_space.rb\",\n    \"test/plugin/in_status.rb\",\n    \"test/plugin/in_stream.rb\",\n    \"test/plugin/in_syslog.rb\",\n    \"test/plugin/in_tail.rb\",\n    \"test/plugin/out_copy.rb\",\n    \"test/plugin/out_exec.rb\",\n    \"test/plugin/out_exec_filter.rb\",\n    \"test/plugin/out_file.rb\",\n    \"test/plugin/out_forward.rb\",\n    \"test/plugin/out_roundrobin.rb\",\n    \"test/plugin/out_stdout.rb\",\n    \"test/plugin/out_stream.rb\"\n  ]\n  s.homepage = \"http://fluentd.org/\"\n  s.require_paths = [\"lib\"]\n  s.required_ruby_version = Gem::Requirement.new(\">= 1.9.2\")\n  s.rubygems_version = \"1.8.23\"\n  s.summary = \"Fluent event collector\"\n  s.test_files = [\"test/config.rb\", \"test/helper.rb\", \"test/match.rb\", \"test/mixin.rb\", \"test/parser.rb\", \"test/plugin/in_exec.rb\", \"test/plugin/in_forward.rb\", \"test/plugin/in_gc_stat.rb\", \"test/plugin/in_http.rb\", \"test/plugin/in_object_space.rb\", \"test/plugin/in_status.rb\", \"test/plugin/in_stream.rb\", \"test/plugin/in_syslog.rb\", \"test/plugin/in_tail.rb\", \"test/plugin/out_copy.rb\", \"test/plugin/out_exec.rb\", \"test/plugin/out_exec_filter.rb\", \"test/plugin/out_file.rb\", \"test/plugin/out_forward.rb\", \"test/plugin/out_roundrobin.rb\", \"test/plugin/out_stdout.rb\", \"test/plugin/out_stream.rb\"]\n\n  if s.respond_to? :specification_version then\n    s.specification_version = 3\n\n    if Gem::Version.new(Gem::VERSION) >= Gem::Version.new('1.2.0') then\n      s.add_development_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_development_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_development_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_development_dependency(%q<jeweler>, [\">= 1.0.0\"])\n      s.add_development_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_development_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_development_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_development_dependency(%q<jeweler>, [\">= 1.0.0\"])\n      s.add_development_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_development_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_development_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_development_dependency(%q<jeweler>, [\">= 1.0.0\"])\n      s.add_development_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_development_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_development_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_development_dependency(%q<jeweler>, [\">= 1.0.0\"])\n      s.add_runtime_dependency(%q<msgpack>, [\"~> 0.4.7\", \"~> 0.5.4\"])\n      s.add_runtime_dependency(%q<json>, [\">= 1.4.3\"])\n      s.add_runtime_dependency(%q<yajl-ruby>, [\"~> 1.0\"])\n      s.add_runtime_dependency(%q<cool.io>, [\"~> 1.1.0\"])\n      s.add_runtime_dependency(%q<http_parser.rb>, [\"~> 0.5.1\"])\n      s.add_development_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_development_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_development_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_development_dependency(%q<jeweler>, [\">= 1.0.0\"])\n    else\n      s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n      s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n      s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n      s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n      s.add_dependency(%q<msgpack>, [\"~> 0.4.7\", \"~> 0.5.4\"])\n      s.add_dependency(%q<json>, [\">= 1.4.3\"])\n      s.add_dependency(%q<yajl-ruby>, [\"~> 1.0\"])\n      s.add_dependency(%q<cool.io>, [\"~> 1.1.0\"])\n      s.add_dependency(%q<http_parser.rb>, [\"~> 0.5.1\"])\n      s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n      s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n      s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n      s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n    end\n  else\n    s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n    s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n    s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n    s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n    s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n    s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n    s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n    s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n    s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n    s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n    s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n    s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n    s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n    s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n    s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n    s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n    s.add_dependency(%q<msgpack>, [\"~> 0.4.7\", \"~> 0.5.4\"])\n    s.add_dependency(%q<json>, [\">= 1.4.3\"])\n    s.add_dependency(%q<yajl-ruby>, [\"~> 1.0\"])\n    s.add_dependency(%q<cool.io>, [\"~> 1.1.0\"])\n    s.add_dependency(%q<http_parser.rb>, [\"~> 0.5.1\"])\n    s.add_dependency(%q<rake>, [\">= 0.9.2\"])\n    s.add_dependency(%q<rr>, [\">= 1.0.0\"])\n    s.add_dependency(%q<timecop>, [\">= 0.3.0\"])\n    s.add_dependency(%q<jeweler>, [\">= 1.0.0\"])\n  end\nend\n```\n\nI cannot understand what happens...\n oh, I can't install official fluentd gem in my clean ruby environment (don't install fluentd yet).\n\n```\n[6]>_<X ruby --version\nruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin12.2.1]\n[6]>_<X gem --version\n1.8.23\n[6]>_<X gem list --local fluentd\n\n*** LOCAL GEMS ***\n\n\n[6]>_<X gem install --remote fluentd\nERROR:  Error installing fluentd:\n        fluentd requires fluentd (>= 0)\n```\n Anyway, can't work `gemspec.add_dependency \"msgpack\", \"~> 0.4.7\", \"~> 0.5.4\"` because dependency resolver resolv 'AND' condition only.\n\n```\ngemspec.add_dependency \"msgpack\", \">= 0.4.7\", \"!= 0.5.0\", \"!= 0.5.1\", \"!= 0.5.2\", \"!= 0.5.3\"\n```\n\nThis dirty code can work ..\n Should we remove dependency to fluentd itself `s.add_runtime_dependency(q%<fluentd>, \">= 0\"])` from gemspec by editor, and build with `gem build fluentd.gemspec` instead of `rake build`?  (jeweler !!!!!)\n\nFinally, i had built & installed fluentd-0.10.32.gem successfully with @hotchpotch 's huck for msgpack version specifications.\n @frsyuki please merge!\n great!\n  when i run :\n\n$ sudo fluentd -c /etc/fluent/fluent.conf -vv\n\nit show:\n\n<pre><code>\n2013-03-15 09:42:17 +0800 [info]: fluent/supervisor.rb:153:supervise: starting fluentd-0.10.32\n2013-03-15 09:42:17 +0800 [info]: fluent/supervisor.rb:235:read_config: reading config file path=\"/etc/fluent/fluent.conf\"\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered buffer plugin 'file'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered buffer plugin 'memory'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'debug_agent'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'exec'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'forward'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'gc_stat'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'http'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'object_space'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'status'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'tcp'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'unix'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'syslog'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered input plugin 'tail'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'copy'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'exec'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'exec_filter'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'file'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'forward'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'null'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'roundrobin'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'stdout'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'tcp'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'unix'\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'test'\n2013-03-15 09:42:17 +0800 [info]: fluent/engine.rb:61:configure: using configuration file: &lt;ROOT&gt;\n&lt;source&gt;\n    type forward\n  &lt;/source&gt;\n  &lt;source&gt;\n    type http\n    port 8888\n  &lt;/source&gt;\n  &lt;source&gt;\n    type tail\n    format apache2\n    path /private/var/log/apache2/access_log\n    pos_file /var/log/td-agent/apache2.access_log.pos\n    tag mongo.apache\n  &lt;/source&gt;\n  &lt;source&gt;\n    type debug_agent\n    port 24230\n  &lt;/source&gt;\n  &lt;match debug.**&gt;\n    type stdout\n  &lt;/match&gt;\n  &lt;match mongo.**&gt;\n    type mongo\n    database apache\n    collection access\n    host 127.0.0.1\n    port 27017\n    flush_interval 10s\n  &lt;/match&gt;\n&lt;/ROOT&gt;\n2013-03-15 09:42:17 +0800 [info]: fluent/engine.rb:70:block in configure: adding source type=\"forward\"\n2013-03-15 09:42:17 +0800 [info]: fluent/engine.rb:70:block in configure: adding source type=\"http\"\n2013-03-15 09:42:17 +0800 [info]: fluent/engine.rb:70:block in configure: adding source type=\"tail\"\n2013-03-15 09:42:17 +0800 [info]: fluent/engine.rb:70:block in configure: adding source type=\"debug_agent\"\n2013-03-15 09:42:17 +0800 [info]: fluent/engine.rb:86:block in configure: adding match pattern=\"debug.**\" type=\"stdout\"\n2013-03-15 09:42:17 +0800 [info]: fluent/engine.rb:86:block in configure: adding match pattern=\"mongo.**\" type=\"mongo\"\n2013-03-15 09:42:17 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'mongo'\n/usr/local/Cellar/ruby/1.9.3-p286/lib/ruby/1.9.1/rubygems/custom_require.rb:36: stack level too deep (SystemStackError)\n2013-03-15 09:42:17 +0800 [info]: fluent/supervisor.rb:170:supervise: process finished code=256\n2013-03-15 09:42:17 +0800 [warn]: fluent/supervisor.rb:173:supervise: process died within 1 second. exit.\n</code></pre>\n\n\nwhat's the meaning :\n2013-03-14 23:21:25 +0800 [trace]: fluent/plugin.rb:89:register_impl: registered output plugin 'mongo'\n\n/usr/local/Cellar/ruby/1.9.3-p286/lib/ruby/1.9.1/rubygems/custom_require.rb:36: stack level too deep (SystemStackError)\n\nhow to solve this problem ?\n\nmy environment: \nmac os 10.7.5\n$ sudo gem list\n**\\* LOCAL GEMS ***\nfluent-plugin-mongo (0.6.13)\nfluentd (0.10.32)\nmongo (1.6.4)\n\n$ ruby -v\nruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-darwin11.4.2]\n I think this error is caused  by mongo. If i commented the  match of mongo ,this error disappears.\n\nthank you for your suggestion.\nI solve this problem by degrade the fluentd version. \n\n1\u3001$ sudo gem uninstall fluentd\n\n2\u3001$ sudo gem install fluentd -v 0.10.31\n\n3\u3001 $ sudo fluentd -c /etc/fluent/fluent.conf -vv\nit show:\n\n2013-03-16 10:16:00 +0800: fluent/plugin.rb:89:register_impl: registered output plugin 'mongo'\n\n**Notice: C extension not loaded. This is required for optimum MongoDB Ruby driver performance.\n  You can install the extension as follows:\n  gem install bson_ext\n\n  If you continue to receive this message after installing, make sure that the\n  bson_ext gem is in your load path and that the bson_ext and mongo gems are of the same version.\n\n2013-03-16 10:16:00 +0800: plugin/out_mongo.rb:73:configure: Setup mongo configuration: mode = normal\n\n4\u3001$ sudo gem install bson_ext\n     run fluent  again,  the same notice error\n5\u3001$ sudo gem uninstall bson_ext \n6\u3001$ sudo gem install bson_ext -v 1.6.4 \n     because my mongo version is 1.6.4\n\nthen run fluent again, everything nomal .\n  \"format_stream\" passes tag variable to \"filter_record\" without deep copying.\nIt works fine when there is only 1 record in stream.\nBut If the stream have n records, filter_record filters tag n times.\n Yes.\nI am using HandleTagNameMixin. So I'm aware that rewrite is allowed and useful.\nActually,  I faced this issue when using HandleTagNameMixin plugin.\nhttps://github.com/tomohisaota/fluent-plugin-forward-aws/blob/master/lib/fluent/plugin/in_forward_aws.rb\n\nI think it is easier to look at my unit test \"test_remove_tag_suffix\" in mixin.rb\nInput tag is \"testst\", remove_tag_suffix is \"st\" and input has 2 lines.\n\nIn original implementation, first tag becomes \"test\", and second tag becomes \"te\"\n(remove_tag_suffix get applied 2 times due to 2 input lines)\n\nWith my patch, output tag becomes \"test\" for both tags.\n(remove_tag_suffix get applied only 1 time per line)\n\nHere's source code.\n\n``` ruby\n def test_remove_tag_suffix\n      format_check({\n        'a' => 1\n      }, 'test')\n      format_check({\n        'a' => 2\n      }, 'test')  <-- This becomes \"te\" due to reusing same tag object\n\n      d = create_driver(Fluent::HandleTagNameMixin, %[\n        remove_tag_suffix st\n        include_tag_key true\n      ], \"testst\")\n\n      d.emit({'a' => 1})\n      d.emit({'a' => 2})\n      d.run\n    end\n```\n  Signed-off-by: Tsuyoshi Ozawa ozawa.tsuyoshi@gmail.com\n  fluentd (0.10.31)\u3092rubygems\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\n\u30b3\u30f3\u30d5\u30a3\u30b0\u5185\u306e#\u6587\u5b57\u3092\u30b3\u30e1\u30f3\u30c8\u3067\u306a\u304f\u6271\u3044\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\nmongodb\u3068\u306e\u63a5\u7d9a\u3067`fluent-plugin-mongo`\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001mongodb\u3068\u306e\u63a5\u7d9a\u60c5\u5831\u306b\"#\"\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30b1\u30fc\u30b9\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u6307\u5b9a\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n```\nuser username\npassword #hoge+-hoge\n```\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u3067\u3059\u3068#\u4ee5\u964d\u304c\u30b3\u30e1\u30f3\u30c8\u6271\u3044\u3068\u306a\u308a\u3001Mongodb\u306e\u8a8d\u8a3c\u3067\u5f3e\u304b\u308c\u3066\u3044\u307e\u3059\u3002\n\u30a8\u30b9\u30b1\u30fc\u30d7\u7b49\u3067\u304d\u308b\u3068\u826f\u3044\u306e\u3067\u3059\u304c\u3002\n Thank you.\n\nI'm looking forward to the fluentd v11.\n  LabeledTSVParser cannot handle `time_key` and `time_format` expectedly.\nWithout this fix, ValuesParser#configure will throw following ConfigError.\n\n```\n2013-02-14 21:03:45 +0900 [error]: config error file=\"fluent.conf\" error=\"time_key (\\\"time\\\") is not included in keys ([])\"\n```\n\nI used following fluent.conf for my tests.\n\n```\n<source>\n  type tail\n  path /var/log/nginx/ltsv.log\n  pos_file tmp/ltsv.log.pos\n  tag nginx.ltsv\n  format ltsv\n  time_key time\n  time_format %d/%b/%Y:%H:%M:%S %z\n</source>\n```\n Great!\nLGTM :+1: > @repeatedly \n  Path field match is not strict, may cause data loss\n 127.0.0.1 - - [30/Jan/2013:09:17:00 +0800] \"GET /a[ ]b HTTP/1.1\" 200 27 \"-\" \"Mozilla/4.0\"\n\nnotice Path field not match space\n  Add Labeled Tab-separated Values (LTSV) format support to parser.rb. LTSV format is a variant of TSV. Each field of LTSV has a label separated by ':'.\n\nThe log line of LTSV is like this:\n\n```\ntime:28/Feb/2013:12:00:00 +0900 host:192.168.0.1    req:GET /list HTTP/1.1  status:200\n```\n\nThe configuration of in_tail with ltsv format is like this:\n\n```\n<source>\n  type tail\n  format ltsv\n  time_format %d/%b/%Y:%H:%M:%S %z\n  path /var/log/nginx/access_log\n  pos_file /var/log/nginx/access_log.pos\n  tag nginx.access\n</source>\n```\n- time_key and time_format can be specified like JSONParser.\n- delimiter and label_delimiter also can be specified.\n yes :)\nYou can choose either you like.\nref. https://twitter.com/kentaro/status/299181633192468480\n  You can see what \"Labeled TSV\" is at the blog posts below:\n- http://stanaka.hatenablog.com/entry/2013/02/05/214833\n- http://d.hatena.ne.jp/tagomoris/20130206/1360155675\n\nIn this pull request, I added a `LabeledTSVParser` and confirmed fluentd worked well with such a config below:\n\n```\n<source>\n type   tail\n format ltsv\n path   /path/to/log\n tag    debug\n</source>\n```\n LGTM :+1: \n  \u203b\u65e5\u672c\u8a9e\u3067\u3059\u3002\n\nfluentd\u81ea\u4f53\u306e\u30ed\u30b0\u306f\u3001log.rb\u306e\u5b9f\u88c5\u3092\u898b\u308b\u9650\u308aANSI Color\u306b\u3082\u3068\u3065\u3044\u3066\u8272\u5206\u3051\u3057\u3066\u51fa\u529b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\u3002\u305f\u3060\u3057\"out.tty\"\u304c\u507d\u306e\u5834\u5408\u3001\u30a8\u30b9\u30b1\u30fc\u30d7\u30b7\u30fc\u30b1\u30f3\u30b9\u304c\u51fa\u529b\u3055\u308c\u305a\u3001\u30ed\u30b0\u30ec\u30d9\u30eb\u3092\u8868\u3059\u30e1\u30bf\u60c5\u5831\u304c\u6b20\u843d\u3057\u307e\u3059\u3002\n\u7aef\u7684\u306b\u8a00\u3046\u3068\u3001\"-o\" \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u51fa\u529b\u3057\u305f\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u4e2d\u306b\u30ed\u30b0\u30ec\u30d9\u30eb\u306e\u8a18\u8ff0\u304c\u7121\u304f\u3001\u30ed\u30b0\u76e3\u8996\u306e\u969b\u306b\u30ec\u30d9\u30eb\u306b\u5fdc\u3058\u3066\u30a2\u30e9\u30fc\u30c8\u3092\u9001\u308b\u3001\u3068\u3044\u3046\u4e8b\u304c\u884c\u3044\u3065\u3089\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nlog.rb\u306b\u3064\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30ed\u30b0\u30ec\u30d9\u30eb\u306e\u8a18\u8ff0\u3092\u8ffd\u8a18\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u53ef\u80fd\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u203b36\u884c\u76ee\u3042\u305f\u308a\n  LEVEL_TRACE = 0\n  LEVEL_DEBUG = 1\n  LEVEL_INFO  = 2\n  LEVEL_WARN  = 3\n  LEVEL_ERROR = 4\n  LEVEL_FATAL = 5\n  //\u4ee5\u4e0b\u3092\u8ffd\u52a0\n  LOG_TEXT = ['TRACE', 'DEBUG', 'INFO', 'WARN', 'ERROR', 'FATAL']\n\n\u203b280\u884c\u76ee\u3042\u305f\u308a\n// return time.strftime(@time_format)\n// \u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\nreturn \"#{time.strftime(@time_format)} [#{LOG_TEXT[level]}] \"\n Good! I agree with you there.\n  Just a proof of concept.\nNot ready for merge.\n\nIf name of config file specified using `-c` option is ended with `.rb`, then it is loaded as Config DSL.\n\nBelow is example config using DSL.\n\n``` ruby\n## built-in TCP input\n## $ echo <json> | fluent-cat <tag>\nsource {\n  type :forward\n}\n\n# HTTP input\n# http://localhost:8888/<tag>?json=<json>\nsource {\n  type :http\n  port 8888\n}\n\n# Listen DRb for debug\nsource {\n  type :debug_agent\n  port 24230\n}\n\n## match tag=debug.** and dump to console\nmatch('debug.**') {\n  type :stdout\n}\n\n# match tag=myapp.** and forward and write to file\nmatch('myapp.**') {\n  type :copy\n  store {\n    type :forward\n    host '192.168.0.13'\n    buffer_type :file\n    buffer_path '/var/log/fluent/myapp-forward'\n    retry_limit 50\n    flush_interval '10s'\n  }\n  store {\n    type :file\n    path '/var/log/fluent/myapp'\n  }\n}\n```\n\nComments are welcome.\n :+1:\n\nPlus, I hope the DSL can take `Proc`s for configuration values like:\n\n```\nmatch 'foo' {\n  type :bar\n  key  :baz\n  match /(que)/\n  callback ->(matched) {\n      ...\n  }\n}\n```\n\nIs it possible?\n @kentaro Possible.\nOnly `type` and `buffer_type` are converted into `String`.\n cool :+1: \n Symmetric property between the 2 styles of configuration is not always needed, I guess.\n was there any movement on this topic ?\nI really don't get ruby projects which provide the mean to have a great config system and yet decide to build an horrible custom xml like static config format.... why on earth would anyone do that ???\n\nI just started using fluentd and it already annoys me, let's say I have ten files I want to tail, if it was ruby I just need a loop but all I can do now is copy/paste, awesome...\n\nIn fact I will probably hook myself into the ruby code and bypass the current config file altogether but having an official ruby support for the config would be nice.\n and... I can't even bypass this xml crap since it is so deeply implemented that every class knows about it :s \n After my last look at the code and my attempt at configuring the core directly in ruby bypassing the config file I just don't think that's even possible due to design decisions...\n\nEvery plugin receive an instance of the Config class which is a nearly direct mapping of the pseudo xml structure of the current config file so even if we have a ruby dsl it will have to rebuild this xml internally which is stupid.\n What is the status of this pull request?\nAre all participants OK with this implementation?\n This pull request is just a suggestion that configuration file should be Ruby inner DSL.\nAnd I think that there are many topics to be discussed about.\n- Syntax (e.g. `type :forward` vs `set :type, :forward`)\n- Compatibility for current config format (types like `Proc` can't be used in it)\n Should I close this PR?\n I guess this issue have been solved, without callbacks in configurations.\nPlease open other issue for additional feature requests of configuration DSL.\n Thanks!\n great! I'm looking forward to the next release.\n  I do no wish my timestamps to be formatted.\nThis does not appear to be possible, at present it defaults to iso8601.\n\nPerhaps if config had:\n\ndisable_time_format true\n\nthen we could conditionally format time.\n You can get seconds from Epoch by 'time_format %s'\n Thats useful thanks.\nActually I am wanting milliseconds, I understand many of the input plugins only timestamp to the second, I have made local changes to allow millisecond timestamps, would it be possible to get milliseconds from Epoch time formatting?\n Fluentd has time of messages as second, so we cannot get time as milliseconds in any way.\n I made a simple change to node.js input plugin and fluentd is passing through time of message in milliseconds, it is only the formatting for output that is causing a problem.\n\nIs there any particular reason why time is only to the second, I have several use cases where millisecond timing is required.\n Thanks for the info.\n\nSo outputting a raw timestamp is possible using %s.\nAnd hopefully we will soon be able to use timestamps with milliseconds from Epoch.\n\nI will close this issue and perhaps open a separate request for milliseconds.\n @Jimflip Just curious: Why do you need milliseconds? I'm interested in how you're using Fluentd.\n\nTo support milliseconds, performance and backward compatibility are the issue:\n- Backward compatibility: all output plugins assume the time is an integers in seconds. If the next version supports milliseconds from Epoch, it will be a floating point, which doesn't change the meaning.\n- Performance: Integers (Fixnum) are a immediate while floating points are reference in Ruby. It means performance will get worse slightly.\n\nI want to know the a specific example when milliseconds are useful. Thanks.\n @frsyuki \n\nWe are looking to use fluentd as part of our user monitoring system.\nPart of which is tracking user interaction client side.  Users are capable of interacting with the UI multiple times per second, i.e. they can click/mouse over multiple items per second, the timestamp being used to track order of interaction.\n\nFor backwards compatability I would suggest keeping seconds since epoch as the default, and having an optional msec since epoch as an option.  I have made a branch to do this for fluent-node-logger, very simple and the timestamp as an integer is passed through fluentd with no issues except at the formatting stage.  I am then using couchdb output plugin.\n\nI'm not sure if there is a significant performance cost, but ruby is a bit different from other platforms in that it provides the millisconds as a float, which isn't really desirable, an integer would make a lot more sense and in fact is necessary for my project.\n\nWe originally started looking at openTSDB and there are a lot of people requiring millisecond granularity, mostly for sensors.  In previous tracking projects I have always used to milliseconds from epoch without issue and would be concerned what issues it might throw up using seconds.\n Another +1 for milliseconds. My use case is apache logging, and without millisecond-level precision for hundreds of requests per second (or more) I need the ability to parse out milliseconds, otherwise apache logs become very hard to analyze. I actually worked around this by altering the parser plugin to store parsed time objects as floats, but it would be better to have this as native functionality.\n another call from the peanut gallery for microseconds. using it to dump haproxy logs into elasticsearch.\n +1 for milliseconds.   Use case is application logs from cluster of nodes where I want order on a millisecond level\n  hi ,i tested type forward retry_limit ,i found default is 17.but when i test it's 5~6 times.why\n 2012-12-19 10:49:44 +0800: fluent/engine.rb:58:configure: using configuration file: <ROOT>\n  <source>\n    type tail_ex\n    format apache\n    path /data/logs/weblog/**.log\n    tag ff.file\n    pos_file /tmp/pos_file\n  </source>\n  <match **>\n    type forward\n    host 1.1.1.1\n    port 5666\n    retry_limit 9\n    send_timeout 60s\n    recover_wait 10s\n    heartbeat_interval 1s\n    phi_threshold 8\n    hard_timeout 60s\n    flush_interval 1\n  </match>\n</ROOT>\n2012-12-19 10:49:44 +0800: fluent/engine.rb:67:block in configure: adding source type=\"tail_ex\"\n2012-12-19 10:49:44 +0800: fluent/plugin.rb:89:register_impl: registered input plugin 'tail_ex'\n2012-12-19 10:49:44 +0800: fluent/engine.rb:83:block in configure: adding match pattern=\"**\" type=\"forward\"\n2012-12-19 10:49:44 +0800: plugin/1.rb:49:configure: 'host' option in forward output is obsoleted. Use '<server> host xxx </server>' instead.\n2012-12-19 10:49:44 +0800: plugin/1.rb:79:block in configure: adding forwarding server '1.1.1.1:5666' host=\"1.1.1.1\" port=5666 weight=60\n2012-12-19 10:49:44 +0800: plugin/1.rb:165:rebuild_weight_array: rebuilding weight array lost_weight=0\n2012-12-19 10:49:44 +0800: plugin/in_tail.rb:279:initialize: following tail of /data/logs/weblog/access.log\n2012-12-19 10:49:46 +0800: fluent/output.rb:336:rescue in try_flush: temporarily failed to flush the buffer, next retry will be at 2012-12-19 10:49:47 +0800. error=\"Connection refused - connect(2)\" instance=10751060\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `initialize'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in`new'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `connect'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:200:in`send_data'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:136:in `block in write_objects'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in`times'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in `write_objects'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:439:in`write'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:279:in `write_chunk'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:263:in`pop'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:303:in `try_flush'\n  2012-12-19 10:49:46 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:120:in`run'\n2012-12-19 10:49:48 +0800: fluent/output.rb:336:rescue in try_flush: temporarily failed to flush the buffer, next retry will be at 2012-12-19 10:49:49 +0800. error=\"Connection refused - connect(2)\" instance=10751060\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `initialize'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in`new'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `connect'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:200:in`send_data'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:136:in `block in write_objects'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in`times'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in `write_objects'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:439:in`write'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:279:in `write_chunk'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:263:in`pop'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:303:in `try_flush'\n  2012-12-19 10:49:48 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:120:in`run'\n2012-12-19 10:49:51 +0800: fluent/output.rb:336:rescue in try_flush: temporarily failed to flush the buffer, next retry will be at 2012-12-19 10:49:53 +0800. error=\"Connection refused - connect(2)\" instance=10751060\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `initialize'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in`new'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `connect'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:200:in`send_data'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:136:in `block in write_objects'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in`times'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in `write_objects'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:439:in`write'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:279:in `write_chunk'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:263:in`pop'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:303:in `try_flush'\n  2012-12-19 10:49:51 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:120:in`run'\n2012-12-19 10:49:54 +0800: fluent/output.rb:336:rescue in try_flush: temporarily failed to flush the buffer, next retry will be at 2012-12-19 10:50:01 +0800. error=\"Connection refused - connect(2)\" instance=10751060\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `initialize'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in`new'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `connect'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:200:in`send_data'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:136:in `block in write_objects'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in`times'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in `write_objects'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:439:in`write'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:279:in `write_chunk'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:263:in`pop'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:303:in `try_flush'\n  2012-12-19 10:49:54 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:120:in`run'\n2012-12-19 10:50:03 +0800: fluent/output.rb:336:rescue in try_flush: temporarily failed to flush the buffer, next retry will be at 2012-12-19 10:50:17 +0800. error=\"Connection refused - connect(2)\" instance=10751060\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `initialize'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in`new'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:238:in `connect'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:200:in`send_data'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:136:in `block in write_objects'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in`times'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:130:in `write_objects'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:439:in`write'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:279:in `write_chunk'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:263:in`pop'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:303:in `try_flush'\n  2012-12-19 10:50:03 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:120:in`run'\n2012-12-19 10:50:03 +0800: plugin/1.rb:377:tick: detached forwarding server '1.1.1.1:5666' host=\"1.1.1.1\" port=5666 phi=8.339864547893125\n2012-12-19 10:50:03 +0800: plugin/1.rb:165:rebuild_weight_array: rebuilding weight array lost_weight=60\n2012-12-19 10:50:18 +0800: fluent/output.rb:336:rescue in try_flush: temporarily failed to flush the buffer, next retry will be at 2012-12-19 10:50:49 +0800. error=\"no nodes are available\" instance=10751060\n  2012-12-19 10:50:18 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:148:in `write_objects'\n  2012-12-19 10:50:18 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:439:in`write'\n  2012-12-19 10:50:18 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:279:in `write_chunk'\n  2012-12-19 10:50:18 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/buffer.rb:263:in`pop'\n  2012-12-19 10:50:18 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:303:in `try_flush'\n  2012-12-19 10:50:18 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/output.rb:120:in`run'\n2012-12-19 10:50:50 +0800: fluent/output.rb:336:rescue in try_flush: temporarily failed to flush the buffer, next retry will be at 2012-12-19 10:51:53 +0800. error=\"no nodes are available\" instance=10751060\n  2012-12-19 10:50:50 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.30/lib/fluent/plugin/1.rb:148:in `write_objects'\n  2012-12-19 10:50:50 +0800: fluent/output.rb:337:rescue in try_flush: /usr/lib64/fluent/r\n sorry\uff0cI was wrong\u3002this issue can be close and very thx for your reply\u3002\n    Hi,\n\nWe may have a platform issue in that am seeing a lot of CLOSE_WAIT states at the fluent aggregator side, so I have forwarders sending to two aggregators. It runs for a while and then stops.\n\nThe forwarders give:\n\n2012-12-05 15:56:32 +0000: fluent/output.rb:336:rescue in try_flush: temporarily failed to flush the buffer, next retry will be at 2012-12-05 16:30:39 +0000. error=\"no nodes are available\" instance=19480460\n\nThe aggregators give have many  CLOSE_WAIT states for TCP and I can see many socket \"accepts\" and few closes.\n\nubuntu@fluent-worker-01-live:~$ netstat -an|awk '/tcp/ {print $6}'|sort|uniq -c\n   1067 CLOSE_WAIT\n      1 ESTABLISHED\n      3 LISTEN\n\nubuntu@fluent-worker-01-live:~$ uname -a\nLinux fluent-worker-01-live 3.2.0-31-virtual #50-Ubuntu SMP Fri Sep 7 16:36:36 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux\n\nRunning ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-linux]\n\nAny ideas ?\n workaround maybe num_threads.\n   Is this still relevant? We're having an issue where a plugin is using a gem that has 2.0 syntax:\n\n```\n %i(symbol symbol2)\n```\n  ForwardOutput node selection has bug of OutOfIndex with @rr and @weight_array after resize of @weight_array.\n\nJust after recovery of detached nodes, @weight_array is shortened, but @rr is not initialized and may be greater than @weight_array.length. This makes OutOfIndex (node is nil).\n\nThis pullreq fixes this problem.\n\n(@rr starts from 1 not 0, but this is very little problem....)\n @tagomoris ++\n  It seems like `fluent-plugin-http-enhanced` could do that.\nhttps://github.com/parolkar/fluent-plugin-http-enhanced\n\n```\n<source>\n  type httpenhanced\n  port 8080\n  full_query_string_record true\n  respond_with_empty_img true\n</source>\n```\n  Under heavy load we are not seeing fluentd flush_interval 10m flush very 10 minutes and it is taking almost a day for the log data to go through the system. Any ideas ?Very basic setup we are using with some simple plugins.\n Hi, thank you for the quick reply - Can I pose the question the other way round please ? I am not a Ruby expert and fluentd is a new solution and maybe you are in a better position to advise us. I was using very standard fluentd configurations from the examples on your wiki but to explain I will explain our architecture. \n\nWe have a real time application as a service on the internet responding to HTTP request which in your examples on the wiki you might refer to as a forwarder, this indeed forwards data to a processing layer, which you call an aggregator. \n\nAs we are logging each HTTP request and processing the data (up to 10,0000 qps at the moment) we have an additional data layer to capture all the logs from the cluster. Currently we have:\n\nW ----->  \nW ----->    P ----->  \nW ----->    P -----> D  \nW ----->    \n\nwhere,\n\nW = web tier, P = processing tier and D = data tier. Each tier has a fluent sending data downstream as shown by the arrows. \n\nThe problem we see is that the data gets \"stuck\" at tier P, sure some data is sent to D but if there are any re-starts to the fluentd processes at P then we loose all data. So maybe you could recommend a good configuration for this ? I would be very grateful.\n1. why does fluents @ P not read and resend the buffer files on the disk during re-start ? I see fluentd touching the timestamps but it is very very slow to clear the file backlog.\n2. If the timeout worked, i.e. if we set it very short I would expect the CPU load to increase but this is not changing as expected so maybe we have a configuration issue ? logs are still sent very slow.\n3. What should we use as the buffer/queue sizes ? P receives 2 x W and D  receives 4 x W under normal conditions.\n\nI hope you can help.\n\nPaul\n ---\n\n```\nweb tier template\n```\n\n---\n\n``` ruby\n<source>\n  type forward\n  port 24224\n  bind 127.0.0.1\n</source>\n\n<match bidder.**>\n\n  type copy\n\n<store>\n  type forward\n\n  buffer_type file\n  buffer_path <%= node[:fluentd][:log_path] %>/*.buffer\n\n  flush_interval 10s\n  send_timeout 60s\n  recover_wait 10s\n  heartbeat_interval 1s\n  phi_threshold 8\n  hard_timeout 60s\n\n<%- node['zone']['endpoint']['interfaces']['fluents-primary'].each do |fluents| -%>\n  <%- _n = fluents.split(':') -%>\n  <server>\n    host <%= _n[0] %>\n    port <%= _n[1] %>\n  </server>\n<%- end %>\n\n    <secondary>\n      type file\n      path <%= node[:fluentd][:log_path] %>/bidder.failed\n      time_slice_format %Y%m%d\n      time_slice_wait 10m\n      time_format %Y%m%dT%H%M%S%z\n      compress gzip\n      utc\n    </secondary>\n</store>\n\n<store>\n    type       flowcounter\n    count_keys *\n    unit       minute\n    aggregate  tag\n    tag        flowcount\n</store>\n\n</match>\n\n<match flowcount>\n  type file\n  path /var/log/fluent/flowcounter.bidder\n  time_slice_format %Y%m%d\n  time_slice_wait 1000m\n  utc\n</match>\n\n```\n ---\n\n```\nprocessing tier\n```\n\n---\n\n``` ruby\n<match bidder.**>\n  type copy\n\n  <store>\n    type            bidder\n\n=>  proprietary solution statements\n\n  </store>\n\n  <store>\n    type           forward\n    hard_timeout   300s\n    flush_interval 60s\n    buffer_type    file\n    buffer_path    /var/log/fluent/bidder/fw/buf\n    buffer_chunk_limit 256m\n    buffer_queue_limit 128\n\n=>  forward server statements\n\n  </store>\n\n</match>\n\n```\n If CPU load of P nodes is always high, I suggest you to try removing copy and bidder plugins temporarily from the P nodes (Note that it means high load if a core is fully used. Because current version of fluentd can use only one CPU core).\nI'd like you to show error messages show at P nodes. If it shows messages such as \"no nodes are available\", \"detached forwarding server '...'\", \"failed to send heartbeat packet to ...\", then configuration seems wrong. Otherwise, performance seems insufficient.\n Hi,\n\nThank you all for the comments, originally using for example S3 plugin we had a good CPU load on the nodes P. The load was not a real issue as we are using EC2 and can adjust. We did however not want to risk the availability of nodes P due to issues with S3 or other file type storage such as tag_file for example. So we tried to forward logs from node P to another later, the data layer. \n\n...but the CPU load is now low and is just running bidder processing as normal, i.e. most of the load is seen from the file activities via fluent plugins (as expected). The real question is why can't I see the same level of file processing from just forwarding logs to tier D. \n\nWe did not see any failed log data over this period, just the buffer\\* files on the var/log/fluent location. \n\nAlso tried different  buffer_queue_limit and buffer_chunk_limit's with no luck. That is why the original issue was with the flush timeout as I was hoping that this would \"pickup\" and flush the log files from nodes P -> D. Also I noticed that the lagging file timestamps are being touched but that the file size remains the same and remains on disk.\n For now we will do tag_file @ nodes P and then transfer the logs via scp,etc. but I hope you guys can come up with a workable forward->forward->aggregator example :)\n @pauldavidgilligan\nforward->forward->aggregator example is typical usage of fluentd but unfortunately, we have never got performance issues. I guess there is a problem which occurs on specific condition. We're curious about the problem and I'd like you to cooperate with us to catch the cause:\n1. What happens if you removed \"buffer_type file\" configuration from P nodes? It will use memory based buffering. I want to know the performance issue comes from buf_file or not.\n2. What happens if you set \"flush_interval 1s\" and \"num_threads 8\" on P nodes as well? An user who handles 100,000 msgs/sec on 2 fluentd servers uses this configuration with memory based buffering.\n3. How about the CPU load of D nodes? One problem of current fluentd is that it can't utilize multiple cores. Some users run several number of fluentd processes to scale.\n4. What happens if you removed the copy and bidder plugins from P? I want to know the problem is specifically at the forward plugin or not.\n  I added nginx template. This is for default nginx access log.\n \"default nginx access log\" means \"combined\" log format of nginx and \"combined\" log format is activated if you do not configure log_format.\n\nIf the format is not indicated, it defaults to \"combined\". ......\nlog_format combined '$remote_addr - $remote_user [$time_local]  '\n                    '\"$request\" $status $body_bytes_sent '\n                    '\"$http_referer\" \"$http_user_agent\"';\n\nYou can get the detail here. http://wiki.nginx.org/HttpLogModule\n Wanted to throw this in here: I'm using fluentd to aggregate our nginx logs, and this regex and time_format work fine for me when I put it in manually.\n Hello! It works fine but I have a question.\nThe \"size\" field should be numeric (like Apache2 format) but I'm getting a string value.\nHow can I fix this?\n\nThank you\n\n-- updated, fixed\n\nI looked into lib/fluent/parser.rb, copied the ApacheParser class to NginxParser and replaced the REGEXP properly.\n you lost x-forward-for\n  Is there any chance we could get a symlink to the current log file in the log directory? Something like access.log_current that always points to the logfile being written to? Scribe has a facility like this, and it makes tailing logs quite simple.\n So, Scribe's documentation is notoriously bad, and this is all I could find:\nhttps://github.com/facebook/scribe/wiki/Scribe-Configuration\n\nAbout halfway down, there is this blurb:\n\ncreate_symlink: \u201cyes\u201d or anything else; \u201cyes\u201d by default\n\nif true, will maintain a symlink that points to the most recently written file\n\nSo, in the log file directory for 'test_log', there is always a 'test_log_current' that points to the log file that is currently being written to. When the file is rotated, you just change the link (and this allows tail -F to work on the 'test_log_current' file).\n Any update on this?\n Pinging this issue again.\n Yeah, I think that will totally work. Will you re-link the symlink right after switching what file you are writing to?\n\nFor instance, the reason we want this is for displaying logs in our office.\n Perfect! Thanks :)\n Sorry to reopen this:\n\nI just installed the newest td-agent package, and the way this works seems not that useful.\n\nRight now, the symlink_path file is symlinked to the last fully written file, not the file that's currently being written. For instance, in our nginx access log directory:\n\nlast fully written log: access.log.2013080820_1.log\ncurrent file being written to: access.log.2013080821.b4e375f0fb757453e\n\nThe symlink access.log_current is currently pointing to access.log.2013080820_1.log, when I would expect it to be pointing to access.log.2013080821.b4e375f0fb757453e. Am I missing something?\n  Configuration : \n<source>\n  type tail\n  format /^(?<remote>[^ ]_) (?<host>[^ ]_) (?<user>[^ ]_) [(?<time>[^]]_)] \"(?<method>\\S+)(?: +(?<path>[^ ]_) +\\S_)?\" (?<code>[^ ]_) (?<size>[^ ]_)(?: \"(?<referer>[^\\\"]_)\" \"(?<agent>[^\\\"]_)\" \"(?<forward>[^\\\"]_)\" (?<response_time>[^ ]_))?$/\n  path /usr/local/nginx/logs/access.log\n  pos_file /var/log/td-agent/access.log.pos\n  time_format %d/%b/%Y:%H:%M:%S %z\n  tag hostname.in.tail\n  hostname_command hostname\n</source>\n\nResult :\n\n2012-11-27T00:00:43+09:00       hostname.in.tail  {\"hostname\":\"myhost\",\"remote\":\"172.28.32.249\",\"host\":\"-\",\"user\":\"-\",\"method\":\"GET\",\"path\":\"/monitor\",\"code\":\"200\",\"size\":\"15\",\"referer\":\"-\",\"agent\":\"-\",\"forward\":\"-\",\"response_time\":\"0.003\"}\n Thank you for your review. Oops Sorry for format thing. It was broke.\n\nThis hostname_command option was inspired by dstat plugin.\nUsers can customize hostname_command like \"hostname\" or \"hostname -s\" in different OS environments.\nI believe that this option helps people who runs many servers.\n\nMay I ask what \"general problem\" does mean?\n @repeatedly have you given any more thought to the 'adding custom input field' problem? I'd also like my log records to contain a hostname field (in addition to other things, like the tag itself). \n  Fluentd does not provide authentication methods between fluentd nodes.\nThis makes it impossible to gain security for circumstances like [this](http://docs.fluentd.org/articles/high-availability#network-topology). Currently, the only way to maintain security is to run all servers within a local network.\n\nAs in Fluentd Meetup Japan 2012, it is said that currently there are no authentication methods between fluentd nodes.\nGrep \"\u8a8d\u8a3c\" on this page: http://johtani.jugem.jp/?eid=60\n\n---\n\nAlso, see this thread on the ML:\nhttps://groups.google.com/d/msg/fluentd/LSiF1weaKi0/t66wsZZMrh0J\n I think that this issue can be resolved by pull request #56. Sorry for the duplicate issue, but please consider about this feature seriously. Please merge the pull request, or provide us some answer.\n I understanded the situation now. I think we need to think this issue separately. There are two problems: **authentication** and **encryption**.\n- **Authentication:**  \n  Need to provide an authentication method based on user/password. This feature is included in most of popular RDBs.\n- **Encryption:**  \n  Need to encrypt the data flow between fluentd nodes (`in_forward` / `out_forward`). This is _especially important_ because:  \n  Fluentd focuses on `Log Everything in JSON`, thus it is going to deal with sensitive or private data.  \n  For example, user activities on your web service or gathered protected tweets are such.  \n  Providing an option to switching on/off this feature in config would be necessary.\n\nImplementing these both feature makes it available to run fluentd on any circumstances. No need to say \"it is intended to use in local network only\" anymore.\n I see. I'd rather think it's better not to think about encryption on the layer of fluentd. Thanks for pointing Stunnel, I'll check it out.\n Later on I have discovered that MySQL supports SSL encryption ([see here](http://dev.mysql.com/doc/refman/5.6/en/using-ssl-connections.html)), and MongoDB also supports SSL ([see here](http://docs.mongodb.org/manual/administration/ssl/)). \n\n@repeatedly has said that it is difficult to fulfill each users' separate requirements. I once agreed. But I found other databases are providing encryption feature. Isn't it worth to consider implementing?\nI don't feel the requirements vary so much for each user, Isn't it enough to just simply implement a SSL connection?\n\nI think we need more opinions from other users. Could you invite some experts to this issue, if you know them?\n Thanks, I'll check it out when it is released.\n  I added hostname command option. \nBecause I operate over 100 servers and\nI am supposed to figure out which server is in trouble.\nIf you had already your hostname in your log, skip this option.\nHost name is added at head of line. Please see the following example.\n\nConfiguration:\n<source>\n\u00a0 type tail\n\u00a0 format /^(?<hostname>[^ ]_) (?<remot-address>[^ ]_) (?<host>[^ ]_) (?<user>[^ ]_) [(?<time>[^]]_)] \"(?<method>\\S+)(?: +(?<path>[^ ]_) +\\S_)?\" (?<status>[^ ]_) (?<size>[^ ]_)(?: \"(?<referer>[^\\\"]_)\" \"(?<agent>[^\\\"]_)\" \"(?<forward>[^\\\"]_)\" (?<response_time>[^ ]*))?$/\n\u00a0 path /nginx/logs/access.log\n\u00a0 pos_file /var/log/td-agent/access.log.pos\n\u00a0 tag access\n\u00a0 hostname_command hostname\n</source>\n\nResult:\n2012-11-22T16:29:42+09:00 \u00a0 \u00a0 \u00a0 access \u00a0{\"hostname\":\"myhost\",\"remot-address\":\"1.1.1.1\",\"host\":\"-\",\"user\":\"-\",\"method\":\"GET\",\"path\":\"/test/\",\"status\":\"200\",\"size\":\"9268\",\"referer\":\"http://test\",\"agent\":\"Linux; U; Android 2.2.1; ja-jp; IS03 Build/S9090) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 android/1.0.0\",\"forward\":\"-\",\"response_time\":\"0.103\"}\n I modified `hostname` to `#{@hostname_command}`\n I closed this pull request. And I will send two pull requests. Sorry for bothering you. \n  The link `Store Apache Logs into MongoDB` on page [out_mongo Output Plugin | Fluentd](http://docs.fluentd.org/articles/out_mongo) has a typo.\n\ns/montodb/mongodb/\n Sorry, I didn't know about the docs repo. Thanks for the support.\n  I faced a trouble in bellow condition.\n\nRuby 1.9.3-p125 on Mac OS X (10.8.0)\nfluentd 0.10.28\nfluent-plugin-forest 0.10.28\n\nThere no trouble on CentOS release 5.8 (Final)  2.6.18-308.el5, \nI cannot find that the trouble is derived from my environment only or not.\n## fluentd.conf\n\n```\n<source>\n  type forward\n  port 11111\n</source>\n\n<match test.a>\n  type file\n  time_slice_format %Y%m%d%H\n  path ./a.log\n</match>\n<match test.b>\n  type file\n  time_slice_format %Y%m%d%H\n  path ./b.log\n</match>\n<match test.c>\n  type file\n  time_slice_format %Y%m%d%H\n  path ./c.log\n</match>\n```\n## fluentd start\n\n```\n% fluentd -c fluentd.conf -o system.log \n```\n## information\n\n```\nfluentd % fluentd -c fluentd.conf -o system.log\n/Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/thread.rb:71: [BUG] pthread_cond_wait: Invalid argument (EINVAL)\nruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin10.8.0]\n\n-- Control frame information -----------------------------------------------\nc:0007 p:---- s:0024 b:0024 l:000023 d:000023 CFUNC  :sleep\nc:0006 p:0031 s:0020 b:0020 l:000019 d:000019 METHOD /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/thread.rb:71\nc:0005 p:0018 s:0015 b:0015 l:000014 d:000014 METHOD /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/output.rb:155\nc:0004 p:0146 s:0011 b:0011 l:000010 d:000010 METHOD /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/output.rb:129\nc:0003 p:---- s:0006 b:0006 l:000005 d:000005 FINISH\nc:0002 p:---- s:0004 b:0004 l:000190 d:000003 IFUNC \nc:0001 p:---- s:0002 b:0002 l:000001 d:000001 TOP   \n\n-- Ruby level backtrace information ----------------------------------------\n/Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/output.rb:129:in `run'\n/Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/output.rb:155:in `cond_wait'\n/Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/thread.rb:71:in `wait'\n/Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/thread.rb:71:in `sleep'\n\n-- C level backtrace information -------------------------------------------\n\n   See Crash Report log file under ~/Library/Logs/CrashReporter or\n   /Library/Logs/CrashReporter, for the more detail of.\n\n-- Other runtime information -----------------------------------------------\n\n* Loaded script: /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/bin/fluentd\n\n* Loaded features:\n\n    0 enumerator.so\n    1 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/enc/encdb.bundle\n    2 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/enc/trans/transdb.bundle\n    3 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/defaults.rb\n    4 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/rbconfig.rb\n    5 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/deprecate.rb\n    6 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/exceptions.rb\n    7 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/custom_require.rb\n    8 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems.rb\n    9 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/version.rb\n   10 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/requirement.rb\n   11 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/platform.rb\n   12 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb\n   13 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/path_support.rb\n   14 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/dependency.rb\n   15 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/etc.bundle\n   16 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/fileutils.rb\n   17 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/pathname.bundle\n   18 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/pathname.rb\n   19 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/psych.bundle\n   20 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/stringio.bundle\n   21 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/node.rb\n   22 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/stream.rb\n   23 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/document.rb\n   24 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/sequence.rb\n   25 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/scalar.rb\n   26 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/mapping.rb\n   27 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes/alias.rb\n   28 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/nodes.rb\n   29 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/streaming.rb\n   30 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/visitors/visitor.rb\n   31 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/strscan.bundle\n   32 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/scalar_scanner.rb\n   33 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/visitors/to_ruby.rb\n   34 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/visitors/emitter.rb\n   35 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb\n   36 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/json/ruby_events.rb\n   37 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/visitors/json_tree.rb\n   38 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/visitors/depth_first.rb\n   39 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/visitors.rb\n   40 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/handler.rb\n   41 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/tree_builder.rb\n   42 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/parser.rb\n   43 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/omap.rb\n   44 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/set.rb\n   45 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/coder.rb\n   46 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/core_ext.rb\n   47 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/date_core.bundle\n   48 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/date/format.rb\n   49 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/date.rb\n   50 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/deprecated.rb\n   51 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych/json.rb\n   52 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/psych.rb\n   53 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/yaml.rb\n   54 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/psyched_yaml.rb\n   55 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/gem_helpers.rb\n   56 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/match_platform.rb\n   57 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/rubygems_ext.rb\n   58 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/config_file.rb\n   59 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/rubygems_integration.rb\n   60 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/version.rb\n   61 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler.rb\n   62 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/rubygems-bundler-1.0.7/lib/rubygems-bundler/noexec.rb\n   63 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/optparse.rb\n   64 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/log.rb\n   65 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/env.rb\n   66 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/version.rb\n   67 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/supervisor.rb\n   68 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/thread.rb\n   69 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/socket.bundle\n   70 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/socket.rb\n   71 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/time.rb\n   72 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb\n   73 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/json-1.7.5/lib/json/version.rb\n   74 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/ostruct.rb\n   75 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/json-1.7.5/lib/json/generic_object.rb\n   76 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/json-1.7.5/lib/json/common.rb\n   77 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/enc/utf_16be.bundle\n   78 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/enc/utf_16le.bundle\n   79 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/enc/utf_32be.bundle\n   80 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/enc/utf_32le.bundle\n   81 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/json-1.7.5/lib/json/ext/parser.bundle\n   82 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/json-1.7.5/lib/json/ext/generator.bundle\n   83 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/json-1.7.5/lib/json/ext.rb\n   84 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/json-1.7.5/lib/json.rb\n   85 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/yajl-ruby-1.1.0/lib/yajl/yajl.bundle\n   86 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/yajl-ruby-1.1.0/lib/yajl.rb\n   87 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/uri/common.rb\n   88 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/uri/generic.rb\n   89 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/uri/ftp.rb\n   90 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/uri/http.rb\n   91 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/uri/https.rb\n   92 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/uri/ldap.rb\n   93 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/uri/ldaps.rb\n   94 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/uri/mailto.rb\n   95 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/uri.rb\n   96 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/msgpack-0.4.7/lib/msgpack.bundle\n   97 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/iobuffer-1.1.2/lib/iobuffer/version.rb\n   98 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/iobuffer-1.1.2/lib/iobuffer_ext.bundle\n   99 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/iobuffer-1.1.2/lib/iobuffer.rb\n  100 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/version.rb\n  101 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io_ext.bundle\n  102 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/loop.rb\n  103 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/meta.rb\n  104 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/io.rb\n  105 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/iowatcher.rb\n  106 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/timer_watcher.rb\n  107 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/async_watcher.rb\n  108 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/listener.rb\n  109 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/dns_resolver.rb\n  110 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/fcntl.bundle\n  111 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/timeout.rb\n  112 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/digest.bundle\n  113 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/digest.rb\n  114 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/openssl.bundle\n  115 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/openssl/bn.rb\n  116 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/openssl/cipher.rb\n  117 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/openssl/config.rb\n  118 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/openssl/digest.rb\n  119 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/openssl/buffering.rb\n  120 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/openssl/ssl-internal.rb\n  121 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/openssl/x509-internal.rb\n  122 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/openssl.rb\n  123 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/securerandom.rb\n  124 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/resolv.rb\n  125 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/socket.rb\n  126 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/server.rb\n  127 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/http11_client.bundle\n  128 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/http_client.rb\n  129 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/dsl.rb\n  130 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io.rb\n  131 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/cool.io-1.1.0/lib/cool.io/eventmachine.rb\n  132 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/status.rb\n  133 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/config.rb\n  134 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/engine.rb\n  135 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/mixin.rb\n  136 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/singleton.rb\n  137 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/process.rb\n  138 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin.rb\n  139 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/parser.rb\n  140 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/event.rb\n  141 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/buffer.rb\n  142 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/input.rb\n  143 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/output.rb\n  144 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/match.rb\n  145 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/load.rb\n  146 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/buf_file.rb\n  147 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/buf_memory.rb\n  148 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/buf_zfile.rb\n  149 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_debug_agent.rb\n  150 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_exec.rb\n  151 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_forward.rb\n  152 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_gc_stat.rb\n  153 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/http_parser.rb-0.5.3/lib/ruby_http_parser.bundle\n  154 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/http_parser.rb-0.5.3/lib/http_parser.rb\n  155 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/http_parser.rb-0.5.3/lib/http/parser.rb\n  156 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_http.rb\n  157 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_object_space.rb\n  158 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_status.rb\n  159 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_stream.rb\n  160 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_syslog.rb\n  161 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/in_tail.rb\n  162 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_copy.rb\n  163 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_exec.rb\n  164 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_exec_filter.rb\n  165 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_file.rb\n  166 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_forward.rb\n  167 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_null.rb\n  168 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_roundrobin.rb\n  169 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_stdout.rb\n  170 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_stream.rb\n  171 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluentd-0.10.28/lib/fluent/plugin/out_test.rb\n  172 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/delegate.rb\n  173 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/tmpdir.rb\n  174 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/tempfile.rb\n  175 /Users/muddydixon/.rvm/gems/ruby-1.9.3-p125@global/gems/fluent-plugin-forest-0.1.2/lib/fluent/plugin/out_forest.rb\n  176 /Users/muddydixon/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-darwin10.8.0/zlib.bundle\n\n[NOTE]\nYou may have encountered a bug in the Ruby interpreter or extension libraries.\nBug reports are welcome.\nFor details: http://www.ruby-lang.org/bugreport.html\n```\n Thx\n\nI try other environment (using my private computer, ruby version, etc. )\n  Hello,\n\nI've noticed that fluentd will blow when processing certain messages that use non ASCII-8BIT characters.\n\nThis is a message coming from syslog.  It blows up in the s3 plugin.\n\nPeter\n\n2012-11-16 16:01:26 +0000: emit transaction failed  error=\"\\\"\\xC2\\\" from ASCII-8BIT to UTF-8\"\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-s3-0.2.2/lib/fluent/plugin/out_s3.rb:42:in `e\nncode'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-s3-0.2.2/lib/fluent/plugin/out_s3.rb:42:in`t\no_json'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-s3-0.2.2/lib/fluent/plugin/out_s3.rb:42:in `f\normat'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/output.rb:515:in`block in emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/event.rb:52:in `call'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/event.rb:52:in`each'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/output.rb:506:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-forest-0.1.2/lib/fluent/plugin/out_forest.rb:\n116:in`emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/match.rb:38:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/engine.rb:111:in`emit_stream'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/engine.rb:96:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-rewrite-0.0.8/lib/fluent/plugin/out_rewrite.r\nb:55:in`block in emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/event.rb:52:in `call'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/event.rb:52:in`each'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-rewrite-0.0.8/lib/fluent/plugin/out_rewrite.rb:53:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/match.rb:38:in`emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/engine.rb:111:in `emit_stream'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/engine.rb:96:in`emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:181:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:167:in`receive_data'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:196:in `call'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:196:in`on_readable'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/io.rb:170:in `on_readable'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/loop.rb:96:in`run_once'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/loop.rb:96:in `run'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:113:in`run'\n2012-11-16 16:01:26 +0000: emit transaction failed  error=\"\\\"\\xC2\\\" from ASCII-8BIT to UTF-8\"\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-s3-0.2.2/lib/fluent/plugin/out_s3.rb:42:in `encode'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-s3-0.2.2/lib/fluent/plugin/out_s3.rb:42:in`to_json'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-s3-0.2.2/lib/fluent/plugin/out_s3.rb:42:in `format'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/output.rb:515:in`block in emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/event.rb:52:in `call'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/event.rb:52:in`each'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/output.rb:506:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-forest-0.1.2/lib/fluent/plugin/out_forest.rb:116:in`emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/match.rb:38:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/engine.rb:111:in`emit_stream'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/engine.rb:96:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-rewrite-0.0.8/lib/fluent/plugin/out_rewrite.rb:55:in`block in emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/event.rb:52:in `call'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/event.rb:52:in`each'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluent-plugin-rewrite-0.0.8/lib/fluent/plugin/out_rewrite.rb:53:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/match.rb:38:in`emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/engine.rb:111:in `emit_stream'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/engine.rb:96:in`emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:181:in `emit'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:167:in`receive_data'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:196:in `call'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:196:in`on_readable'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/io.rb:170:in `on_readable'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/loop.rb:96:in`run_once'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/lib/cool.io/loop.rb:96:in `run'\n  2012-11-16 16:01:26 +0000: /usr/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.27/lib/fluent/plugin/in_syslog.rb:113:in`run'\n2012-11-16 16:01:26 +0000: \"<142>Nov 16 16:01:26 mingle-test2-web-1a7zfu test2: INFO [2012-11-16 16:01:26,377] [btpool0-2] [com.thoughtworks.mingle]   Parameters: {\\\"authenticity_token\\\"=>\\\"VMG/dV4ACJpfZlZqejAyrpT+1/E/+0P05CJcQ84ImkI=\\\", \\\"user\\\"=>{\\\"login\\\"=>\\\"solutions\\\", \\\"password\\\"=>\\\"[FILTERED]\\\"}, \\\"commit\\\"=>\\\"Sign in \\xC2\\xBB\\\", \\\"controller\\\"=>\\\"profile\\\", \\\"action\\\"=>\\\"login\\\"}\\n\" error=\"\\\"\\xC2\\\" from ASCII-8BIT to UTF-8\"\n Hi,\n\nI changed fluent-plugin-s3 to use Yajl to convert objects into JSON. Yajl replaces those invalid characters into '?' and does not raise exceptions. Here is the commit: https://github.com/fluent/fluent-plugin-s3/commit/8d4c3a2214cd5f8a00c14eb30885237da46f7f03\n\nThank you for your report!\n  I'm writing a plugin for fluent, and I meet a error when I require 'mime/types' in the plugin.\nHere is the error message:\n\n2012-11-16 22:42:36 +0800: unexpected error error=\"U+00FC from UTF-8 to ASCII-8BIT\"\n  2012-11-16 22:42:36 +0800: /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/mime-types-1.19/lib/mime/types.rb:759:in `read'\n  2012-11-16 22:42:36 +0800: /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/mime-types-1.19/lib/mime/types.rb:759:in`block in load_from_file'\n  2012-11-16 22:42:36 +0800: /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/mime-types-1.19/lib/mime/types.rb:759:in `open'\n...\n\nIt seens to be a encoding problem, I found that both Encoding.default_internal and Encoding.default_external is set to 'ASCII-8BIT' that made this problem.\n\nFinally I found that the code in lib/fluent/engine.rb make this setting.\n\nhttps://github.com/fluent/fluentd/commit/185133086f233f260b3727f71c8a4b66da2f3f45\n\nSo why set default encoding to ASCII-8BIT and how could I fix it.\n Yes, I made a quick fix like that.\n\nhttps://github.com/sparkle/fluent-plugin-sndacs/blob/master/lib/fluent/plugin/out_sndacs.rb#L10-L15\n I think it is a bug of mime-types gem: https://github.com/halostatue/mime-types/issues/19\nPlease use your quick fix for now...\n @kzk, @frsyuki, @repeatedly: This is not a mime-types issue (I cannot, in fact, reproduce the issue identified in halostatue/mime-types#19 on my Mac, which isn't the same as what you are suggesting in any case). Since October 25, 2011, mime-types has read files (when run on Ruby 1.9) with \"r:utf-8\" and maintains its data entirely as UTF-8. \n\n@sparkle is correct that this has to do with the default ASCII-8BIT setting chosen; there is no conversion from U+00FC to ASCII-8BIT; you can #force_encoding it, or you can convert it to ISO-8859-1 and then #force_encoding it to ASCII-8BIT, but you can't just use ASCII-8BIT as the default encoding.\n\nI don't have an answer, but the bug here is not in MIME::Types. I have UTF-8 data as part of the external dataset I pull from; this is because Maik St\u00fchrenberg was involved in the application/prs.xsf+xml MIME Type definition. If matz were involved in the definition of an application/ruby MIME Type definition, and had his name on the contact people page as \u677e\u672c\u884c\u5f18 (\u307e\u3064\u3082\u3068\u3086\u304d\u3072\u308d, I would keep that in my source data, too.\n  To solve issue#73, send TCP blank msgpack tag/event-array as heartbeat\n Modify branch as:\n- rebase from HEAD (IPv6 support)\n- fix in_forward not to emit blank tag-and-message (assumed as tcp heartbeat)\n Now (this 5 hours), all of our fluentd (124) processes with 'heartbeat tcp' option, seems to be working well...\n This change has a backward compatibility problem...\nCould you see this change?: https://github.com/fluent/fluentd/pull/91\n :+1: \n  Hi, I am using IPv6 now. but Fluentd does not support IPv6. Do you have any plans to support IPv6?\n Please check this gist. https://gist.github.com/4023148\n  td-agent-1.1.9-0\u306b\u3066fluent\u3092\u4f7f\u7528\u3057\u3066\u304a\u308a\u307e\u3059\n\nin_tail.rb\u306e\u30bd\u30fc\u30b9\u3092\u898b\u305f\u3068\u3053\u308d(\u5931\u793c\u306a\u304c\u3089\u30ed\u30b0\u3082\u57cb\u3081\u8fbc\u307e\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\uff09\n\n\u308f\u3056\u3068forward\u5148\u306eFluend\u3092\u30c0\u30a6\u30f3\u3055\u305b\nBuffer/Queue\u3092FULL\u306b\u3057\u307e\u3057\u305f\n\n\u305d\u306e\u5f8cFluentd\u3092\u518d\u958b\u3055\u305b\u3066\u3082@buffer.empty?\u304cfalse\u306e\u307e\u307e\u3068\u306a\u308a\u4f8b\u5916\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5410\u304d\u7d9a\u3051\u308b\u72b6\u614b\u3068\u306a\u308a\u307e\u3057\u305f\n\n\u3071\u3063\u3068\u307f\u305f\u539f\u56e0\u3067\u3059\u304c\u6700\u521d\u306b303\u884c\u306erescue\u306b\u3066\"BufferQueueLimitError(queue size exceeds limit)\"\u3092\u51e6\u7406\u3057\u3066\u3044\u307e\u3059\n      rescue\n        $log.error $!.to_s\n        $log.error_backtrace\n        close\n\u3057\u304b\u3057\u3001\u3053\u3053\u3067close\u3057\u3066\u3044\u308b\u70ba\u3001\u3053\u308c\u4ee5\u964d\u30d5\u30a1\u30a4\u30eb\u304cclose\u72b6\u614b\u306b\u306a\u308a\u3001\"closed stream\"\u306e\u4f8b\u5916\u304c\n\u767a\u751f\u3057\u7d9a\u3051fluentd\u3092\u518d\u8d77\u52d5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\n\n\u5358\u7d14\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\u3068\u3053\u308d\u4e00\u5fdc\u4f8b\u5916\u51e6\u7406\u306f\u767a\u751f\u3057\u306a\u304f\u306a\u3063\u3066\u304a\u308a\u307e\u3059\n\u203b\u5358\u7d14\u306b\u5225\u9014BufferQueueLimitError\u4f8b\u5916\u51e6\u7406\u3092\u7528\u610f\u3057\u3066close\u3092\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u305f\u3060\u3051\u3067\u3059\n\n```\n  rescue BufferQueueLimitError\n    $log.error $!.to_s\n    $log.error_backtrace\n  rescue => err\n    $log.error $!.to_s\n    $log.error_backtrace\n    close\n  end\n```\n  cat /etc/td-agent/td-agent.conf\n<source>\n  type tail\n  format /^([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})\\s+\\[(._)\\]\\s+\\\"(._)\\\"\\s+\\\"(.*)\\\"$/\n  path /data/logs/www.test.com.log\n  tag nginx.access\n</source>\n\n<match nginx.access>\n  type file\n  path /var/log/td-agent/access_log\n</match>\n\n[root@nginx ~]# /etc/init.d/td-agent restart\nShutting down td-agent:                                    [FAILED]\nStarting td-agent: 2012-09-18 08:18:52 +0800: fluent/supervisor.rb:187:rescue in main_process: config error file=\"/etc/td-agent/td-agent.conf\" error=\"Invalid regexp '^([0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3})\\\\s+\\\\[(._)\\\\]\\\\s+\\\\\"(._)\\\\\"\\\\s+\\\\\"(.*)\\\\\"$': No named captures\"\n                                                           [FAILED]\n\nWhere did we go wrong?\n <source>\n    type tail\n    format /^(?<host>[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}) [(?<time>(.))] \\\"(?<request>(.))\\\" \\\"(?<user-agent>(.*))\\\"$/\n    path /data/logs/hack/www.test.com.log\n    tag nginx.access\n</source>\n\n<match nginx.access>\n  type file\n  path /var/log/td-agent/access_log\n</match>\n\nvisit the web, but  /var/log/td-agent/access_log is not found.\nregex is wrong?how can i debug it\n the log is :\n127.0.0.1  [2012-09-27 09:40:27] \"GET /\" \"-\" \"curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.13.1.0 zlib/1.2.3 libidn/1.18 libssh2/1.2.2\"\n i had solve it,thx\n  Some async I/O libraries like libuv, doesn't have 'on_readable' event.\nSo heartbeat UDP packets should have some data in its payloads.\n    I ran into this limitation in my environment using the td-agent distribution when trying to tail a file for input. I have a log file which is owned by an app specific user/group and has permissions of 660. I don't want to run fluentd (td-agent) as root nor as my app specific user.\n\nI assumed that adding the td-agent user to my app specific group would inherit the secondary group membership and therefore be able to access my log file; but that's currently not the case.\n\nAttached is a patch which will update the process with any secondary groups when changing the uid of the process.\n  This fix to mark node of out_forward when TCP data transportation succeeded,\nfor udp unavailable (or unstable udp transportation) environment.\n  `fluent-debug` does not recognize any command line options.\n\nThis pull request fix this bug, and add a connected URI to startup display for user convenience.\n  When day of the month is one-digit SYSLOG_ALL_REGEXP doesn't match time properly\n\n``` ruby\nmessage = \"<30>Sep  4 09:23:02 fluent dhclient: DHCPACK of 192.168.20.8 from 192.168.20.1\" # from fluent debug\n\n# fluent.warn: {\"message\":\"\\\"<30>Sep  4 09:23:02 fluent dhclient: DHCPACK of 192.168.20.8 from 192.168.20.1\\\"\",\"error\":\"invalid strptime format - `%b %d %H:%M:%S'\"}\n\nSYSLOG_ALL_REGEXP = /^\\<(?<pri>[0-9]+)\\>(?<time>[^ ]*\\ [^ ]*\\ [^ ]*) (?<host>[^ ]*) (?<ident>[a-zA-Z0-9_\\/\\.\\-]*)(?:\\[(?<pid>[0-9]+)\\])?[^\\:]*\\: *(?<message>.*)$/\nm = SYSLOG_ALL_REGEXP.match(message)\nm[:time]   # output Sep 4\nm[:host]   # output 09:23:02\n```\n\nCare for two spaces between Sep and 4\n\nWhen day of the month is two-digit SYSLOG_ALL_REGEXP matches time properly\n\nSYSLOG_ALL_REGEXP assumes that there will be a single space\n\nWith this minor fix time matches properly\n Thanks for pull request.\nI will check the later!\n I will check this pull request after return to Japan.\nPlease wait for 2 or 3 days.\n Thanks @frsyuki and adding test is cool!\n Perfect, I close the pull request\n  I've added test cases for 3 plugins (in_gc_stat, in_status, and in_syslog).\n LGTM!\n LGTM :sushi:\n I will merge this pull request later(Sorry, current wifi can't do 'git fetch'...).\nPlease wait!\n  https://github.com/fluent/fluentd/issues/59 \u5bfe\u7b56\u3067\u3059\u3002\n\npos_file\u672a\u6307\u5b9a\u306e\u5834\u5408\u306b\u4ee5\u524d\u306e\u30dd\u30b8\u30b7\u30e7\u30f3\u60c5\u5831\u3068\u6bd4\u8f03\u3059\u308b\u624b\u6bb5\u304c\u306a\u3044\u305f\u3081\u3001\uff2e\uff55\uff4c\uff4cPositionEntry\u306esingleton\u3092\u5916\u3059\u3068\u3044\u3046\u65b9\u6cd5\u3067\u3001\u4ee5\u524d\u306e\u30dd\u30b8\u30b7\u30e7\u30f3\u3068\u306e\u6bd4\u8f03\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n \u3059\u3093\u307e\u305b\u3093\u3001Pull Request\u306e\u4ed5\u69d8\u826f\u304f\u5206\u304b\u3063\u3066\u306a\u304f\u3066Issue\u4e8c\u3064\u306b\u3057\u3061\u3083\u3044\u307e\u3057\u305f\u3002\u3002\u3002\n \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\n  Fix Gemfile/Rakefile/gemspec to use bundler for building .gem\n'jeweler' is not maintained today.\n LGTM :+1:\n NOTE: someone must edit gem.description before first release with this gemspec\n Ruby 2.0.0 doesn't have 'rubygems/builder', so we cannot `rake build` with jeweler...\n I switch jeweler to bundler and  build rpm use td-agent's build script, it works fine\n @repeatedly \nI use master, but I replaced Rakefile and fluentd.gemspec. Those two file come from branch goodbye-jeweler.\nbut I only tied rpm, not deb\n  in_tail\u306b\u304a\u3044\u3066\u3001 PositionEntry\u3092\u7528\u3044\u308b\u3053\u3068\u3067inode\u306e\u7ba1\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001log rotation\u304c\u8d77\u3053\u3063\u305f\u969b\u306binode\u3092\u66f4\u65b0\u3059\u308b\u51e6\u7406\u304c\u3069\u3053\u306b\u3082\u306a\u3044\u306e\u3067\u3001log rotation\u304c\u8d77\u3053\u308b\u3068PositionEntry\u306einode\u3068\u3001\u5b9f\u969b\u306b\u8aad\u307f\u3053\u307f\u3092\u884c\u3063\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306einode\u304c\u7570\u306a\u308b\u5024\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u52d5\u304d\u304c\u8d77\u3053\u3063\u305f\u5834\u5408\u3001\u30ed\u30b0\u306e\u6b20\u640d\u304c\u767a\u751f\u3057\u307e\u3059\u3002\n- fluentd\u8d77\u52d5\n- log rotation\n- fluentd\u518d\u8d77\u52d5\n- path\u306e\u5834\u6240\u306b\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306einode\u3068, pos_file\u306einode\u304c\u7570\u306a\u308b\u305f\u3081\u3001\u65b0\u3057\u3044\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3057\u3066\u3044\u308b\u3068\u8aa4\u5224\u5b9a\u3057\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u672b\u5c3e\u304b\u3089\u8aad\u307f\u8fbc\u307f\u59cb\u3081\u308b <= \u30ed\u30b0\u306e\u6b20\u640d\n \u5bfe\u5fdc\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n \u3053\u308c\u30ed\u30b0\u30ed\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u691c\u77e5\u3057\u3066\u8aad\u307f\u8fbc\u3080\u307e\u3067\u306e\u6570\u79d2\u5206\u306e\u30ed\u30b0\u306f\u5931\u308f\u308c\u308b\u4ed5\u69d8\u306b\u306a\u3063\u3066\u307e\u3059\u3051\u3069\u3001\u610f\u56f3\u3057\u305f\u3082\u306e\u306b\u306a\u3063\u3066\u307e\u3059\uff1f\uff1f\n  cronolog\u3092\u7528\u3044\u3066\u51fa\u529b\u3059\u308b\u3068\u3001\u30d1\u30a4\u30d7\u3092\u7e4b\u304e\u76f4\u3059\u6642\u306b\u3001fluentd\u304clog rotation\u3092\u691c\u77e5\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u306a\u3093\u3067\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f\u30d5\u30a1\u30a4\u30eb\u306frotation\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u30ed\u30b0\u306eduplicate\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\napache\u306e\u51fa\u529b\u3092cornolog\u3067\u884c\u3046\u5834\u5408\u3067\u306f\u3001apache\u306e\u518d\u8d77\u52d5\u3092\u3057\u3066\u3001\u305d\u306e\u5f8c\u59cb\u3081\u3066\u30a2\u30af\u30bb\u30b9\u304c\u6765\u305f\u5834\u5408\u306brotation\u304c\u691c\u77e5\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002\u3053\u3061\u3089\u3067\u3082\u3001\u30ed\u30b0\u306eduplicate\u304c\u767a\u751f\u3057\u305f\u306e\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u518d\u73fe\u30b3\u30fc\u30c9\n\n```\n\u279c  cat /etc/td-agent/td-agent.conf\n\n#\u7701\u7565\n\n<source>\n  type tail\n  format /^(?<time>[^\\t]*)\\t(?<message>.*)$/\n  path /tmp/cronolog.log\n  tag cronolog\n</source>\n\n<match cronolog>\n  type file\n  path /var/log/td-agent/cronolog/log\n</match>\n\n# \u7701\u7565\n\n\n#2012-08-11T01:38:02\n\u279c  echo \"`date +\"%Y/%m/%e %H:%M:%S\"`\\tmessage1\" | cronolog -H /tmp/cronolog.log /tmp/cronolog.%Y%m%d.log\n#2012-08-11T01:38:15\n\u279c  echo \"`date +\"%Y/%m/%e %H:%M:%S\"`\\tmessage2\" | cronolog -H /tmp/cronolog.log /tmp/cronolog.%Y%m%d.log\n\n\n\u279c  tail -n 6 /var/log/td-agent/td-agent.log\n2012-08-11 01:37:19 +0000: plugin/in_forward.rb:60:listen: listening fluent socket on 0.0.0.0:24224\n2012-08-11 01:37:19 +0000: plugin/in_http.rb:74:start: listening http on 0.0.0.0:8888\n2012-08-11 01:38:02 +0000: plugin/in_tail.rb:262:initialize: following tail of /tmp/cronolog.log\n2012-08-11 01:38:15 +0000: plugin/in_tail.rb:203:on_rotate: detected rotation of /tmp/cronolog.log; waiting 5 seconds  # <= \u8aa4\u691c\u77e5 \n2012-08-11 01:38:15 +0000: plugin/in_tail.rb:199:on_rotate: detected rotation of /tmp/cronolog.log\n2012-08-11 01:38:17 +0000: plugin/in_tail.rb:262:initialize: following tail of /tmp/cronolog.log\n\n\u279c  cat /var/log/td-agent/cronolog/log.20120811.b4c6f382e4f80168d\n2012-08-11T01:38:02+00:00       cronolog        {\"message\":\"message1\"}\n2012-08-11T01:38:15+00:00       cronolog        {\"message\":\"message2\"}\n2012-08-11T01:38:02+00:00       cronolog        {\"message\":\"message1\"}  # <=  duplicated log\n2012-08-11T01:38:15+00:00       cronolog        {\"message\":\"message2\"}  # <=  duplicated log\n</addr>\n```\n \u691c\u8a3c\u6642\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\nfluentd      0.10.25\ncronolog  1.6.2\n $log.trace\u8cbc\u3063\u3066\u3001\u6319\u52d5\u3092\u8ffd\u3063\u3066\u307f\u305f\u3093\u3067\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u52d5\u304d\u3092\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\n- inode = 1, fsize = 2\u3068\u3044\u3046\u5024\u304c\u5165\u3063\u3066\u3044\u308b\u3068\u4eee\u5b9a\n- cronolog\u306e\u30cf\u30fc\u30c9\u30ea\u30f3\u30af\u306e\u8cbc\u308a\u76f4\u3057\u306b\u3088\u308a\u3001\u30d5\u30a1\u30a4\u30eb\u304c\u4e00\u77ac\u5b58\u5728\u3057\u306a\u304f\u306a\u308b\n- Errno::ENOENT\u4f8b\u5916\u304c\u51fa\u529b\n- inode <- nil, fsize <- 0\n- @inode != inode, fsize < @fize\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u3001log rotation\u691c\u77e5 \n  - \u30d5\u30a1\u30a4\u30eb\u306eopen\u306b\u5931\u6557\u3057\u3066\u3044\u308b\u305f\u3081, io = nil\n  - NullIOnHandler\u751f\u6210 => \u30ed\u30b0\u306e\u8aad\u307f\u8fbc\u307f\u306f\u3057\u306a\u3044\n- @inode <- inode(=nil), @fsize <- fsize(=0)\n- \u30d5\u30a1\u30a4\u30eb\u304c\u5fa9\u6d3b(inode\u306f\u5909\u308f\u3089\u305a, fsize\u3082\u5909\u308f\u3089\u305a)\n- inode <- 1, fsize <- 2\n- @inode != inode, fsize < @fize\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u3001log rotation\u691c\u77e5\n  - \u30d5\u30a1\u30a4\u30eb\u306eopen\u306b\u306f\u6210\u529f\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u304b\u3089\u8aad\u307f\u8fbc\u307f\u3092\u59cb\u3081\u308b (1)\n  - \u540c\u3058\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u5ea6\u5148\u982d\u304b\u3089\u8aad\u307f\u8fbc\u3093\u3067\u3057\u307e\u3046\u305f\u3081log duplication\u304c\u767a\u751f\n\n\u63d0\u6848\u3068\u3057\u3066\u306f\u3001(1)\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067PositionEntry\u3092\u518d\u78ba\u8a8d\u3057\u3066\u3001\u65e2\u306b\u5b58\u5728\u3059\u308binode\u3067\u3042\u308c\u3070\u3001\u305d\u306eposition\u60c5\u5831\u3092\u518d\u5229\u7528\u3059\u308b\u3001\u3068\u3044\u3046\u4ed5\u69d8\u306b\u3059\u308b\u3001\u3068\u3044\u3046\u306e\u306f\u3069\u3046\u3067\u3057\u3087\u3046\uff1f\uff1f\n\nhttps://github.com/fluent/fluentd/blob/master/lib/fluent/plugin/in_tail.rb#L159\n\u306e\u524d\u306b\n\n```\nstat = io.stat\nfsize = stat.size\ninode = stat.ino\nif inode == @pe.read_inode\n  # seek to the saved position\n  pos = @pe.read_pos\nend\nio.seek(pos)\n```\n\n\u307f\u305f\u3044\u306a\u30b3\u30fc\u30c9\u304c\u5165\u308a\u307e\u3059\u3002\n\npos_file\u672a\u6307\u5b9a\u6642\u306e\u6319\u52d5\u3082\u6ce8\u610f\u3057\u306a\u3044\u3068\u306a\u3089\u305a\u3001\u305d\u3053\u306f\u307e\u3060\u8003\u3048\u3066\u307e\u305b\u3093\u304c\u3001\u3053\u3093\u306a\u30a4\u30e1\u30fc\u30b8\u3002\n \u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n  In some situations, in_object_space plugin and its test are failed.\n- The plugin is failed, when SomeObject#class raises error. (e.g. Celluloid's dead actor)\n- The test is failed, when a mock object of test/mixin.rb are un-GCed.\n  This is just a minor bug. Please see the diff.\n  This patch provides compression and encryption feature to in_forward, out_forward plugin.\nI also added `password` and `compression_level` for out_forward but only `password` added for in_forward.\n\nout_forward's example goes bellow:\n\n```\n<match tags.**>\n  type forward\n  password pass\n  compression_level 9\n  <server>\n    host localhost\n    weight 10\n  </server>\n</match>\n```\n\nin_forward's example goes bellow:\n\n```\n<source>\n  type forward\n  password pass\n</source>\n```\n##### description(in Japanese)\n\nI'm Sorry I'm not good at writing English.\n- \u5171\u901a\u4e8b\u9805\n  - forward\u6642\u306emessage\u30bf\u30a4\u30d7\u304cPackedForward\u3067\u3042\u308b\u5834\u5408, \u5f8c\u8ff0\u306e\u901a\u308a\u8a2d\u5b9a\u306b\u5fdc\u3058\u3066message\u304c\u6697\u53f7\u5316, \u5727\u7e2e\u3055\u308c\u307e\u3059.\n  - \u6697\u53f7\u5316\u3068\u5727\u7e2e\u306f\u500b\u5225\u306benable/disable\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059.\n  - \u672cpatch\u9069\u7528\u5f8c\u306ein_forward, out_forward\u306f, \u6697\u53f7\u5316\u3068\u5727\u7e2e\u3092disable\u306b\u3057\u3066\u3044\u308b\u9650\u308a, \u904e\u53bb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u306e\u4e92\u63db\u6027\u3092\u4fdd\u3061\u307e\u3059.\n  - \u6697\u53f7\u5316\u3068\u5727\u7e2e\u306b\u3064\u3044\u3066\u306e\u5c5e\u6027\u60c5\u5831\u3092\u4f1d\u9054\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081, in_forward\u3068out_forward\u306f\u4ee5\u4e0b\u3092\u884c\u3044\u307e\u3059.\n    - out_forward\u3067\u306fPackedForward message\u306e\u7b2c3\u8981\u7d20\u306bHash\u3092\u683c\u7d0d\u3057\u3066\u9001\u4fe1\u3057\u307e\u3059.\n    - in_forward\u3067\u306f\u53d7\u4fe1\u3057\u305fmessage\u304cPackedForward\u3067\u3042\u308a, \u304b\u3064\u7b2c3\u8981\u7d20\u304c\u4ed8\u52a0\u3055\u308c\u3066\u3044\u308b\u5834\u5408, \u7b2c3\u8981\u7d20\u3092\u5c5e\u6027\u60c5\u5831\u3068\u3057\u3066\u89e3\u91c8\u3057\u307e\u3059.\n- \u6697\u53f7\u5316\u306b\u3064\u3044\u3066\n  - out_forward\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e`password`\u9805\u76ee\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u3068message\u304c\u6697\u53f7\u5316\u3055\u308c\u307e\u3059.\n  - in_forward\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e`password`\u9805\u76ee\u306b\u306f, out_forward\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u4e00\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059.\n  - \u6697\u53f7\u5316\u306b\u306fOpenSSL\u3092\u4f7f\u7528\u3057\u307e\u3059.\n  - \u6697\u53f7\u5316\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f\u73fe\u6642\u70b9\u3067\u306fBlowfish\u306b\u9650\u5b9a\u3057\u3066\u3044\u307e\u3059, \u3053\u308c\u306f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u9078\u629e\u3059\u308b\u5fc5\u8981\u6027\u3092\u898b\u3044\u3060\u3055\u306a\u304b\u3063\u305f\u305f\u3081\u3067\u3059.\n  - \u6bce\u56de\u7570\u306a\u308bsalt\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c, out_forward\u304b\u3089in_forward\u3078\u5e73\u6587\u3067\u9001\u4fe1\u3055\u308c\u307e\u3059.\n- \u5727\u7e2e\u306b\u3064\u3044\u3066\n  - out_forward\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e`compression_level`\u9805\u76ee\u306b1\u4ee5\u4e0a\u306e\u6570\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u3068message\u306eraw entries\u304c\u5727\u7e2e\u3055\u308c\u307e\u3059.\n  - \u5727\u7e2e\u306b\u306fzlib\u3092\u4f7f\u7528\u3057\u307e\u3059.\n  - `compression_level`\u306e\u8a2d\u5b9a\u6570\u5024\u306f9\u304c\u4e00\u756a\u5727\u7e2e\u7387\u304c\u9ad8\u304f, 9\u3092\u8d85\u3048\u308b\u6570\u5024\u3092\u8a2d\u5b9a\u3057\u305f\u5834\u5408, 9\u306b\u88dc\u6b63\u3055\u308c\u307e\u3059.\n  - `compression_level`\u306b0\u3092\u8a2d\u5b9a\u3057\u305f\u5834\u5408, \u5727\u7e2e\u3055\u308c\u307e\u305b\u3093.\n I wrote this patch, because forward plugin needs Encryption and Compression.\nBut I found a problem with using `FileBufferChunk` in out_forward, so I would like to withdraw this patch.\n\nProblem happens following way:\n\n```\n<match tags.**>\n  buffer_type file\n  buffer_path /path/to/buffer.file\n  type forward\n  ...\n</match>\n```\n\nWhen I find out the better way, I'll send again.\nThank you for your hard work.\n @tagomoris and others, Thank you for better way.\n  I fixed a little typo. See diff.\n  Add option '-q' to decrement log level (to output only warn or more critic logs).\n  Patches that we can specify 'weight' for each stores like this:\n\n```\n<match foo.**>\n  type roundrobin\n  <store weight:3> # A\n    type bar\n    # ...\n  </store>\n  <store weight:2> # B\n    type bar\n    # ...\n  </store>\n  <store weight:1> # C\n    type bar\n    # ...\n  </store>\n</match>\n```\n\nout_roundrobin with this patch does very simple weighted round-robin, like below:\n\n```\nA(1), B(1), C(1), A(2), B(2), A(3), A(1), B(1), C(1), A(2), B(2), A(3), ...\n```\n  Please merge, thanks.\n- Changes:\n  - I changed `String#rstrip!` to `String#chomp!` for `recieve_lines` method of in_tail plugin.\n- Reason:\n  - `String#rsrip!` deletes all whitespace(tab,space,line break).That means it deletes end of null columns for TSV(Tab Separated Values).\n Thank you for merge.\n  The \"if\" statement is reversed: it checks for a Regexp type but handles the case of a Regexp type in the \"else\" block.  If you pass a Regexp in it treats it as a class instance which results in\n`error=\"undefined method `call' for #<Regexp:0x007f3c0f8b1df0>\"`\n thanks for the quick merge! I don't know what fluentd/td-agent's release schedule looks like, but I'll be happy when the fix makes it into a td-agent distribution release.\n  fluentd(0.10.22) td-agent-1.1.6-0. CentOS5.8 SL6.2\u3067\u767a\u751f\n\napache\u30ed\u30b0\u3092in_tail\u3067\u8aad\u307f\u8fbc\u307f\u3001\u304a\u304a\u3088\u305d30\u53f0\u304f\u3089\u3044\u306e\u30b5\u30fc\u30d0\u304b\u3089out_foward\u3067\u9001\u4fe1\u3059\u308b\u3068\n\u9001\u4fe1\u5074\u3067\u4ee5\u4e0b\u306e\u69d8\u306adetached->recovered\u3092\u7e70\u308a\u8fd4\u3059\u30ed\u30b0\u304c\u51fa\u307e\u3059\u3002\nhttps://gist.github.com/2848345\n\n\u53d7\u4fe1\u5074\u306f\u5927\u4f53\u5168\u4f53\u306e\u30ed\u30b0\u6d41\u5165\u91cf\u304c200\uff5e500message/sec\u306e\u8ca0\u8377\u72b6\u6cc1\u3067\u3082\u767a\u751f\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u305f\u3060\u3057\u3001\u5168\u3066\u306e\u30b5\u30fc\u30d0\u3067\u51fa\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u6563\u767a\u7684\u306b\u51fa\u308b\u30ec\u30d9\u30eb\u3067\u3059\u3002\n\nout_forward\u306eheartbeat\u306e\u8a2d\u5b9a\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u306f\u3001heartbeat\u3092UDP\u3067\u884c\u3063\u3066\u3044\u308b\u70ba\u306b\u5bfe\u5411\u5074\u306e\u51e6\u7406\u304c\u591a\u3044\u3068\u30d1\u30b1\u30c3\u30c8\u3092drop\u3057\u3066\u3057\u307e\u3046\u3001\n\u53d7\u4fe1\u5074\u306ein_forward\u3067heartbeat\u51e6\u7406\u304c\u9045\u5ef6\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u306a\u3069\u306e\u53ef\u80fd\u6027\u3092\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\u53ef\u80fd\u3067\u3042\u308c\u3070\u3001heartbeat\u306b\u3064\u3044\u3066\u3082\u4fe1\u983c\u6027\u306e\u9ad8\u3044TCP\u901a\u4fe1\u304c\u3042\u308b\u3068UDP\u7279\u6709\u306e\u554f\u984c\u306f\n\u89e3\u6d88\u51fa\u6765\u308b\u306e\u3067\u306f\u7121\u3044\u304b\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\n\u4e00\u5831\u544a\u3068\u3057\u3066\u6271\u3063\u3066\u8cb0\u3048\u308c\u3070\u52a9\u304b\u308a\u307e\u3059\u3002\n  On the cloud environment such as AWS, the same hostname could be resolved into the different IP after the reboot.\n\nTherefore, it's safer to resolve the hostname each time network transfer happens.\n\nHowever, this could incur the performance problem. So having the caching is ideal here.\n Could it be that this needs only to be done on node failure so the perforamnce issue does not need to be too high? i.e., only when you start trying to see if a node has recovered, which I believe is done at a decreasing frequency, e.g. 30secs, 1 min, 2 min etc?\n Just wondered where this fix fits into the fluentd roadmap, as its the only thing that really stopping me switching from Flume to fluentd. :-)\n @tagomoris Do you think is it acceptable to have new TCP connections, everytime chunks are sent? On EC2 environment, the same hostname could be resolved in to different IP. So we want to resolve DNS every time.\n To reconnect for every chunks is not so bad for good network conditions, but a few times of SYN packet resending (in Linux, it needs 3sec timeout) makes great problems with reconnect per chunks and cofigurations such as 'flush_interval=1'.\n\nI vote +1 to reconnection revery 30sec/1min/2min (or configurable & default 1min?).\n > I vote +1 to reconnection revery 30sec/1min/2min (or configurable & default 1min?).\n\nSounds reasonable. I will take a look at current implementation.\n  see changes\n  This just corrects a minor spelling error.\n  fluentd cannot apply filter per record currenty.\nThis patch provides user-defined filter feature per record,\neven when using MultiEventStream.\n\nThis problem is one proposal for solving the issue #39(https://github.com/fluent/fluentd/issues/39)\uff0e\n\nSigned-off-by: UEMURA Yuichi y.uemura@ntt.com\n Unfortunately, as an OSS product, it's hard to accept the patch which includes company's copyright.\n\nThat could be a problem, when we change the license or donate the code to somewhere.\n\nPlease reconsider it. Sorry about this.\n\nThanks - K\n @frsyuki Yes, TailInput is enough to filter when tailing. \nTherefore, my patch is needless in case just tail-time filtering.\n\nOur problem is that some input plugins of fluentd cannot restrict the size of input.\nFor example, the ForwardInput plugin doesn't have such mechanism:\n\n``` ruby\nmodule Fluent\nclass ForwardInput < Input\n  # ...elision...\n  def on_message(msg)\n    # ...elision...\n    elsif entries.class == Array\n      # Forward\n      es = MultiEventStream.new\n      entries.each {|e|\n        time = e[0].to_i\n        time = (now ||= Engine.now) if time == 0\n        record = e[1]\n        # We'd like to hook record and to reduce output traffic.\n        es.add(time, record)\n      }  \n      Engine.emit_stream(tag, es)\n      ...elision...\n  end\n```\n\nInput-time restriction is useful when the the owners of fluentd's instances are different.\nHowever, one difficult problem come out when implementing it - the definition of log size depends on the application.\nThus, user-defined filtering mechanism is essential.\n\nI think my filtering patch is one solution, but I don't know whether my idea is the best or not.\nDo you have any idea?\n @kzk Yeah, Okey, I'll delete it next patch. Thank you for your pointing out :-) \n @frsyuki Note that this patch is just a prototype... the goal of this patch is to establish the generic method to limit input size.\n > So, you can't trust the sender of logs at all, right? I imagine you need \"multi-tenant\" capability.\n\nYes, you're right.\n\n> These validations tend to be complex and slow task because it needs be strict to prevent potential security holes.\n> They have different requirements than backend aggregation system which needs simplicity and high performance.\n\nIt seems like the best solution to layer between trusted and untrusted zone.\n\n> So it will be a another input plugin like in_secure_forward rather than a kind of add-ons.\n\nThis is our next work to come true layering :-)\nWe're going to share it as soon as possible.\n  I want to change tag name. add & remove\n\n```\n remove_tag_prefix prefix.tag.\n remove_tag_suffix .tag.suffix\n add_tag_prefix changed.tag.\n add_tag_suffix .tag.changed\n```\n Thank you for merge :-)\n  I noticed that the \"in_tail\" plugin shipped with fluentd-0.10.12 consumes 100% CPU time on my box.\n\nOS: Ubuntu 10.04 / RHEL 6\nRuby: 1.9.2p290 (2011-07-09 revision 32553) [x86_64-linux]\nfluentd: \"gem install --version 0.10.12 fluentd\"\n\nIt seems the 'io' object passed to IOHandler is always readable, and 'on_readable' is called repeatedly.\n\nSorry that I have no idea how to fix it.\n Here is my fluent.conf:\n\n<pre><code>&lt;source>\n  type tail\n  path /var/log/apache2/ssl_access.log\n  format apache\n  tag apache2.ssl_access\n&lt;/source>\n\n&lt;match **>\n  type stdout\n&lt;/match>\n</code></pre>\n\nRun fluentd like this:\n\n<pre>\n# /opt/ruby/bin/fluentd \n</pre>\n\n\nI got this:\n\n<pre>\n# dstat\n----total-cpu-usage---- -dsk/total- -net/total- ---paging-- ---system--\nusr sys idl wai hiq siq| read  writ| recv  send|  in   out | int   csw \n  1   0  99   0   0   0| 289B 1364B|   0     0 |   2B   11B|  69   145 \n 74  26   0   0   0   0|   0     0 |  66B  850B|   0     0 | 253   421 \n 82  18   0   0   0   0|   0     0 |  66B  354B|   0     0 | 267   464 \n 71  29   0   0   0   0|   0     0 |  66B  354B|   0     0 | 260   438 \n</pre>\n  Now, in_tail uses MultiEventStream to emit input data.\nIf the size of MultiEventStream gets over buffer_chunk_limit,\nFluentd passes its chunk, formatted from MultiEventStream, to output plugin.\n\nIn this case, buffer_chunk_limit is ignored...\n > Any ideas?\n\nNothing because input doesn't consider buffer and output, but the policy is needed.\nWe should clarify where responsibility lies to avoid this issue.\n We sent pull request to solve this problem - user defined filter per records.\n\nThe overview of this patch is:\n1. load user-defined script specified by the option 'filter_script'\n2. invoke filter method in user-defined script per record.\n\nThe sample codes are here :  https://gist.github.com/1950170\n\nNote that this code is just a sample, therefore, there remain some tasks to merge.\nTodo list is as follows:\n1. Add test cases.\n2. Multiple filter support.\n\nPlease tell me if you have any ideas or questions. Thank you!\n @frsyuki Thank you for your being dealing with this difficult problem.\n\nThis solution seems to work well on the occurrence of exceeding chunk limit.\nCould I ask you whether my understanding is correct or not?\n\n> Divide buffer plugins' emit method into open->append->append->\u2026->close\n> Change BufferedOutput#format_stream method as following:\n\nYou mean, you'll change the current chunk format (`|chunk header|chunk body|`) into new chunk format like as follows:\n`|chunk header|record header|user's-formatted record|record header|user's-formatted record|record header|user's-formatted record|`, right?\n\n> ObjectBufferedOutput#emit fallbacks to non-optimized routine that calls BufferedOutput#format_stream if the optimized routine raised BufferChunkLimitError.\n\n\"The non-optimized routine\" means \"the routine which processes per-record (not per-chunk)\", doesn't it?\n @frsyuki Okey, I understood what you're going to do. I believe that it works well :-)\nI can help you if you need, and I'll watch the modification if you create the branch for this problem.\n  in_tail.rb\u3092\u5229\u7528\u3057\u305f\u6642\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u306b\u5bfe\u3057\u3066tail\u3059\u308b\u3068\u6c38\u4e45\u30eb\u30fc\u30d7\u306b\u5165\u308a\u3001\u540c\u3058\u30ed\u30b0\u3092\u62fe\u3063\u3066\u3057\u307e\u3046\u73fe\u8c61\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\n\u30cf\u30fc\u30c9\u30ea\u30f3\u30af\u3067tail\u3059\u308b\u3068\u767a\u751f\u3057\u306a\u3044\u306e\u3067\u3001\u5224\u5b9a\u3067\u4f55\u304b\u554f\u984c\u767a\u751f\u3057\u3066\u3044\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n OS\uff1aCentOS release 5.7 (Final)\n fluentd -v\n2012-02-10 01:16:15 +0900: fluent/supervisor.rb:143:supervise: starting fluentd-0.10.9\n\n ruby -v\nruby 1.9.2p136 (2010-12-25 revision 30365) [x86_64-linux]\n\n\u3067\u3059\u3002\n <source>\n  type tail\n  format /^(?<host>[^ ]_) [^ ]_ (?<user>[^ ]_) [(?<time>[^]]_)] \"(?<method>\\S+)(?: +(?<path>[^ ]_) +\\S_)?\" (?<code>[^ ]_) (?<size>[^ ]_)(?: \"(?<referer>[^\\\"]_)\" \"(?<agent>[^\\\"]_)\" (?<response_time>[^ ]*))?$/\n  time_format %d/%b/%Y:%H:%M:%S %z\n   path /var/log/httpd/access_log_sym\n  tag apache.access\n  pos_file /var/tmp/access.log.pos\n</source>\n\n\u3068\u3044\u3046\u8a2d\u5b9a\u3067\u3059\u3002\n fluentd-0.10.10\u3067\u76f4\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\uff01\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n  Using 0.10.9, fails with:\n\n```\nFinished tests in 4.680640s, 1.0682 tests/s, 4.2729 assertions/s.\n\n  1) Failure:\ntest_emit_3(ExecFilterOutputTest) [out_exec_filter.rb:130]:\n<2> expected but was\n<0>.\n\n  2) Failure:\ntest_emit_4(ExecFilterOutputTest) [out_exec_filter.rb:155]:\n<2> expected but was\n<0>.\n\n5 tests, 20 assertions, 2 failures, 0 errors, 0 skips\n```\n\nI can't get it to work with anything more complex than cat. The idea is that it calls a command, feeds it events as input, and reads the output of that command to generate new events, right? That seems to be the idea but the documentation isn't very clear...\n\nI'm using Scientific Linux 6.1, which is apparently a RHEL variant. \n\nRuby version: ruby 1.9.3p0 (2011-10-30) [x86_64-linux]\n  in_http becomes more useful for some applications if we can post JSON with \"Content-Type: application/json\" :)\n I've just added you to the contaributor list. thx.\n  Not a big deal at all, but I believe that this error message has a typo.\n\nhttp://www.wordnik.com/words/faild\n\n\u201cWith enough eyeballs, all bugs are shallow.\u201d\n\u2014 Linus Torvalds\n\nRegards.\n  I have a fluentd server accepting requests via HTTP/POST. The URL used becomes the tag of the event unless it contains a period, in which case it is ignored. \n\nExample:\n\ncurl -d json={\"event\":\"body\"} http://localhost:5000/this,is,fine\ncurl -d json={\"event\":\"body\"} http://localhost:5000/this.is.not.fine\n\nEvents using the second URL don't show up in the logs. \n\nIs this intentional? \n Ah, of course that worked - I had a \"match _\" and not a \"match *_\". Sorry for the false alarm!\n  Some syslog daemons (rsyslog on CentOS for example) seem to format the\nday in the date string without a leading 0 in the case of days 0-9. The\nparser would not parse them before even with the data format set to %b\n%-d %H:%M:%S. By allowing for 1 or more spaces between the month and\nday this issue is resolved.\n  Hi, I found that the tail plugin can not \"tail\" a file, here's the configuration:\n\n < source >\n    type tail\n    path /home/ld-desktop/tmp/test.txt\n    tag test\n    format /^( ? < request > ._)$/\n < /source >\n< match test._\\* >\n   type stdout\n< /match >\n\nAnd I added to \"test.txt\" LINE BY LINE:\n\nrequest:hello\nrequest:echo server\nrequest:blabla\n\nHowever, I can see the outputs of fluentd is not a \"Tail\" one:\n\n2012-01-04 15:33:37 +0800 test: {\"request\":\"request:hello\"}\n2012-01-04 15:33:37 +0800 test: {\"request\":\"\"}\n\n2012-01-04 15:33:58 +0800 test: {\"request\":\"request:hello\"}\n2012-01-04 15:33:58 +0800 test: {\"request\":\"request:echo server\"}\n2012-01-04 15:33:58 +0800 test: {\"request\":\"\"}\n\n2012-01-04 15:35:02 +0800 test: {\"request\":\"request:hello\"}\n2012-01-04 15:35:02 +0800 test: {\"request\":\"request:echo server\"}\n2012-01-04 15:35:02 +0800 test: {\"request\":\"request:blabla\"}\n2012-01-04 15:35:02 +0800 test: {\"request\":\"\"}\n\nAm I wrong in configuring the fluentd, or the \"tail\" plugin has some bugs?\n I've seen such warning which could be found in the sources of in_tail.rb:\n\n $log.warn \"'pos_file PATH' parameter is not set to a 'tail' source.\"\n $log.warn \"this parameter is highly recommended to save the position to resume tailing.\"\n\nHowever, pos_file has not been set at all. Even if I manually set @pos_file to be a temporary file, I could not get fluentd started with an exception:\n2012-01-04 17:38:32 +0800: fluent/engine.rb:148:rescue in run: unexpected error error=\"undefined method `persistent?' for #Fluent::TailInput::PositionEntry:0x00000000a7bc28\"\n\nI think the \"tail\" plugin has not been production ready, right ?\nThank you~\n Could you try to use \"echo\" command and >> redirection to add lines like this:\n\n```\necho \"request:hello\" >> test.txt\necho \"request:echo server\" >> test.txt\necho \"request:blabla\" >> test.txt\n```\n\nEditors (like vim) create new file to save files even if you just add lines. The tail plugin assumes these changes as the complete file update.\n I found the bug around the pos_file parameter. Thank you for your report.\nIf you want stable version, please consider to use td-agent which is stable package maintained by Treasure Data, Inc.: http://fluentd.org/doc/install.html#install-from-binary-package\n Thank you, it works. \n  tail plugin seeks to last position of the specified file, when it's a first read.\n  It doesn't mention how to specify the external command. From the tests it appears the parameter is \"command\". That should probably be mentioned. \n No worries, thanks for the fix.\n  I made original TimeSlicedOutputTestDriver to ignore expect_format. That is bug.\n  This is very useful if you want to hook fluentd directly on heroku dyno (or any Foreman managed system) \n\nImagine running something like this \n<code>\nruby bin/fluentd -c etc/fluent.conf -i \"<source>\\n  type http\\n  port $PORT\\n </source>\"\n</code>\n\nThis immensely helps when port numbers are not known before hand.\n Thanks parolkar. fantastic patch!\n Also added you to the contributors' list. Thx.\n  Bug in buf_file.rb:\n\n```\ndef encode_key(key)\n    URI.encode(key, /[^-_.a-zA-Z0-9]/n)\nend\n\ndef decode_key(encoded_key)\n    URI.decode(encoded_key, /[^-_.a-zA-Z0-9]/n)\nend\n```\n\n`URI.encode('/', /[^-_.a-zA-Z0-9]/n)` returns `\"%2F\"`, and `URI.decode('%2F', /[^-_.a-zA-Z0-9]/n)` returns `\"\\u00002F\"`.\nso the fluent-s3-plugin cannot create sub directories.\n\nI tested in ruby 1.9.2.\n  create TestDriver for TimeSlicedOutput plugins, with support for chunk.key\nand output all chunks on run() in spite of time_slice_cache_interval settings.\n  rubygem1.8\u74b0\u5883\u3067\u306fGem.searcher\u30e1\u30bd\u30c3\u30c9\u306fdeprecated\u3068\u8b66\u544a\u304c\u51fa\u308b\u306e\u3067\u3001\nrubygem1.8\u304b\u3089\u4f7f\u3048\u308bGem::Specification.find_all\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u8b66\u544a\u3092\u6291\u6b62\u3057\u307e\u3057\u305f\u3002\n\u4e92\u63db\u6027\u306e\u305f\u3081\u5143\u306e\u90e8\u5206\u3082\u6b8b\u3057\u3066\u3044\u307e\u3059\u306e\u30671.8\u672a\u6e80\u306erubygem\u3067\u3082\u4f7f\u3048\u308b\u306f\u305a\u3067\u3059\u3002\n  1. fluentd -o/--log option\n2. SIGHUP fluentd process\n3. unexpected error error=\"undefined method `reopen' for #Fluent::Log:0x00000001406ec8\"\n\n```\n 2011-11-10 20:53:36 +0900: unexpected error error=\"undefined method `reopen' for #<Fluent::Log:0x00000001406ec8>\"\n  2011-11-10 20:53:36 +0900: /usr/lib/ruby/gems/1.9.1/gems/fluent-0.9.21/lib/fluent/command/fluentd.rb:190:in `block in <top (required)>'\n  2011-11-10 20:53:36 +0900: /usr/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/loop.rb:96:in `call'\n  2011-11-10 20:53:36 +0900: /usr/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/loop.rb:96:in `run_once'\n  2011-11-10 20:53:36 +0900: /usr/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/loop.rb:96:in `run'\n  2011-11-10 20:53:36 +0900: /usr/lib/ruby/gems/1.9.1/gems/fluent-0.9.21/lib/fluent/engine.rb:129:in `run'\n  2011-11-10 20:53:36 +0900: /usr/lib/ruby/gems/1.9.1/gems/fluent-0.9.21/lib/fluent/command/fluentd.rb:217:in `<top (required)>'\n  2011-11-10 20:53:36 +0900: /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n  2011-11-10 20:53:36 +0900: /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n  2011-11-10 20:53:36 +0900: /usr/lib/ruby/gems/1.9.1/gems/fluent-0.9.21/bin/fluentd:6:in `<top (required)>'\n  2011-11-10 20:53:36 +0900: /usr/bin/fluentd:19:in `load'\n  2011-11-10 20:53:36 +0900: /usr/bin/fluentd:19:in `<main>'\n```\n  fluent-plugin-mongo has follwing code:\n\n``` ruby\nrecords = []\nchunk.msgpack_each { |record|\n  record[@time_key] = Time.at(record[@time_key]) if @include_time_key\n  records << record\n}\n```\n\nI think this pattern is often-used in some OutputPlugins.\n\nBufferChunk#msgpack_map gets rid of such pattern and \nwe have the chance to improve speed than msgpack_each.\n > you can do the map operation in the \"format\" method.\n\nRight? In Mongo, time field needs Time object but MessagePack can't serialize such objects.\n\n> There are two reasons:\n\nThanks for the explanation. Hmm, I understand the different roles of \"write\" and \"format\".\n\n> Second\n\nI see.\n\n> msgpack_map is still useful?\n\nYes for the code clarification. No for other reasons.\n\nThis issue is not critical. \nI leave a decision up to you :)\n  Signed-off-by: OZAWA Tsuyoshi ozawa.tsuyoshi@gmail.com\n  The fluentd 0.10.3 fails to \"gem install\" when rake it from source code.\nThe log dump is as follows:\n\nozawa@ozamba:~/workspace/fluentd$ rake\nWARNING:  no description specified\n  Successfully built RubyGem\n  Name: fluentd\n  Version: 0.10.3\n  File: fluentd-0.10.3.gem\nGenerated: fluentd.gemspec\nfluentd.gemspec is valid.\nozawa@ozamba:~/workspace/fluentd$ gem install pkg/fluentd-*.gem\nERROR:  Error installing pkg/fluentd-0.10.3.gem:\n    fluentd requires fluentd (>= 0)\n  1.9\u74b0\u5883\u304c\u5fc5\u8981\u3068\u77e5\u3089\u305a\u306b1.8\u74b0\u5883\u3067gem install\u3002\u5b9f\u884c\u3057\u3066\u60b2\u3057\u3044\u601d\u3044\u3092\u3057\u305f\u306e\u3067\u3001ruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u8981\u6c42\u3092gemspec\u306b\u8ffd\u52a0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\ngemspec\u306e\u518d\u751f\u6210\u306f\u5fa1\u624b\u5143\u306ejeweler\u3067\u884c\u3063\u305f\u307b\u3046\u304c\u3088\u308d\u3057\u3044\u304b\u3068\u601d\u3044\u3001\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002(\u624b\u5143\u3067\u3084\u3063\u305f\u3089\u30d5\u30a1\u30a4\u30eb\u5217\u6319\u306e\u51fa\u529b\u306a\u3069\u304c\u5fae\u5999\u306b\u9055\u3063\u3066\u30d1\u30c3\u30c1\u304c\u4e0d\u5fc5\u8981\u306b\u81a8\u3089\u3093\u3060\u306e\u3067)\n > https://github.com/fluent/fluentd\n\nadded you to the contributors section, thx!\n Thanks,  but my family name is OZAWA, not OGAWA:)\n Sorry, now it's fixed :-(\n  I am testing fluentd 0.10.1.\n\nIt cannnot transfer apache access log since 0.10.1 update.\n# I looked that fluentd is failed parse apache access log.\n\n[transfer image]\n  transfer server(apache)  --  fluentd  -->   receive server\n\nFollowing is my environmment and stack trace.\n\n```\n[environment]\n-transfer server\n  OS\uff1aCentOS5.6\n  fluentd\uff1a0.10.1\n  apache\uff1a2.2.3\n\n-receive server\n  OS\uff1aCentOS6.0\n  fluentd\uff1a0.10.1\n  fluent-plugin-mongo\uff1a0.4.0\n\n[stack trace]\nError log is output at receive server.\n\n2011-10-18 10:30:26 +0900: plugin/in_stream.rb:110:initialize: accepted fluent socket object_id=19531740\n2011-10-18 10:30:26 +0900: fluent/engine.rb:103:rescue in emit_stream: emit transaction faild  error=\"undefined method `[]=' for nil:NilClass\"\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/mixin.rb:150:in `filter_record'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/mixin.rb:96:in `block in format_stream'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/event.rb:127:in `feed_each'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/event.rb:127:in `each'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/mixin.rb:95:in `format_stream'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/output.rb:311:in `emit'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/match.rb:38:in `emit'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/engine.rb:101:in `emit_stream'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:81:in `on_message'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:139:in `feed_each'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:139:in `on_read_msgpack'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:131:in `call'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:131:in `on_read'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/io.rb:108:in `on_readable'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/io.rb:170:in `on_readable'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/loop.rb:96:in `run_once'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/loop.rb:96:in `run'\n  2011-10-18 10:30:26 +0900: fluent/engine.rb:104:rescue in emit_stream: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:46:in `run'\n2011-10-18 10:30:26 +0900: plugin/in_stream.rb:48:rescue in run: unexpected error error=\"undefined method `[]=' for nil:NilClass\"\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/mixin.rb:150:in `filter_record'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/mixin.rb:96:in `block in format_stream'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/event.rb:127:in `feed_each'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/event.rb:127:in `each'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/mixin.rb:95:in `format_stream'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/output.rb:311:in `emit'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/match.rb:38:in `emit'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/engine.rb:101:in `emit_stream'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:81:in `on_message'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:139:in `feed_each'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:139:in `on_read_msgpack'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:131:in `call'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:131:in `on_read'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/io.rb:108:in `on_readable'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/io.rb:170:in `on_readable'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/loop.rb:96:in `run_once'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/cool.io-1.0.0/lib/cool.io/loop.rb:96:in `run'\n  2011-10-18 10:30:26 +0900: plugin/in_stream.rb:49:rescue in run: /usr/local/lib/fluent/ruby/lib/ruby/gems/1.9.1/gems/fluentd-0.10.1/lib/fluent/plugin/in_stream.rb:46:in `run'\n\n```\n\nPlease help me. \n  In SetTagKeyMixin#filter_record:\n\n``` ruby\nrecord[@time_key] = @timef.format(time)\n```\n\nIt's a SetTimeKeyMixin operation.\nI think following code is correct.\n\n``` ruby\nrecord[@tag_key] = tag\n```\n  This is a bug and blocks fluent-plugin-mongo updating to 0.10.0.\n  Gemfile \u306e\u5bfe\u5fdc\u3092\u884c\u3044\u3001\u610f\u56f3\u7684\u306b\u30b3\u30df\u30c3\u30c8\u306b\u542b\u307e\u308c\u306a\u304b\u3063\u305f fluent.gemspec \u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\u7406\u7531\u306f\u4e8c\u3064\u3042\u308a\u3001\u4e00\u3064\u76ee\u306f \n\n```\n$ bundle install \n$ bundle exec rake test\n```\n\n\u3067\u4f9d\u5b58\u95a2\u4fc2\u3092\u89e3\u6c7a\u3055\u305b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3055\u305b\u305f\u304b\u3063\u305f\u3053\u3068\u3001\u4e8c\u3064\u76ee\u306f fork \u3057\u305f fluent \u306b\u5bfe\u3057\u3066\u3001Gemfile \u306e :git => git_url \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u305b\u305f\u304b\u3063\u305f(\u305d\u306e\u305f\u3081\u306b gemspec \u304c\u5fc5\u8981)\u305f\u3081\u3067\u3059\u3002\n\n\u307e\u305f .rvmrc \u3092\u8ffd\u52a0\u3057\u3001rvm \u306e\u5229\u7528\u8005\u306f\u81ea\u52d5\u3067\u5207\u308a\u66ff\u308f\u308b\u69d8\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002fluent \u304c 1.8 \u3082\u5bfe\u5fdc\u4e88\u5b9a\u3067\u3057\u305f\u3089\u524a\u9664\u4e0b\u3055\u3044\u3002\n \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\nfluent / fluent-plugin \u306f\u904b\u7528\u3057\u3066\u307f\u308b\u4e88\u5b9a\u3067\u3059\u3057\u3001\nrails3 \u5411\u3051\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u66f8\u304f\u4e88\u5b9a\u3067\u3059\u306e\u3067\u3001\n\u3044\u305f\u3060\u3051\u308b\u3068\u3046\u308c\u3057\u3044\u3067\u3059\uff01\n  fluent-cat\u304c--port\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u53d7\u3051\u4ed8\u3051\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u8abf\u3079\u3066\u307f\u305f\u3089\u5358\u7d14\u306atypo\u3060\u3063\u305f\u306e\u3067\u4fee\u6b63\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n > https://github.com/fluent/fluentd\n\nadded you to the contributors section, thx!\n  'undefined local variable or method' occur when TextParser.register_template is called.\n\n> 2011-09-30 06:01:04 +0900: command/fluentd.rb:235:rescue in <top (required)>: unexpected error error=\"undefined local variable or method `time_format' for Fluent::TextParser:Class\"\n\nThis patch solves the problem by adding the argument to TextParser.register_template\n  ", "text_all_count": 63831, "text_word_token": ["fluentd", "depends", "uuidtools", "LINK", "which", "runs", "in", "to", "error", "when", "there", "be", "no", "ifconfig", "NUMBER", "for", "instance", "when", "run", "inside", "a", "Docker", "container", "Fix", "be", "already", "available", "in", "uuidtools", "for", "quite", "some", "time", "though", "it", "has", "not", "be", "release", "LINK", "NUMBER", "Running", "fluentd", "without", "ifconfig", "will", "cause", "error", "like", "this", "Usage", "ip", "OPTIONS", "OBJECT", "COMMAND", "help", "ip", "force", "batch", "filename", "where", "OBJECT", "link", "addr", "addrlabel", "route", "rule", "neigh", "ntable", "tunnel", "tuntap", "maddr", "mroute", "mrule", "monitor", "xfrm", "netns", "OPTIONS", "V", "ersion", "s", "tatistics", "d", "etails", "r", "esolve", "f", "amily", "inet", "inet", "NUMBER", "ipx", "dnet", "link", "l", "oops", "maximum", "addr", "flush", "attempts", "o", "neline", "t", "imestamp", "b", "atch", "filename", "rc", "vbuf", "size", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "rescue", "in", "main_process", "unexpect", "error", "error", "undefined", "method", "split", "for", "nil", "NilClass", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "fork", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "uuidtools", "NUMBER", "lib", "uuidtools", "NUMBER", "rb", "NUMBER", "in", "first_mac", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "fork", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "uuidtools", "NUMBER", "lib", "uuidtools", "NUMBER", "rb", "NUMBER", "in", "mac_address", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "fork", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "uuidtools", "NUMBER", "lib", "uuidtools", "NUMBER", "rb", "NUMBER", "in", "block", "in", "timestamp_create", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "fork", "TAG", "NUMBER", "in", "synchronize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "fork", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "uuidtools", "NUMBER", "lib", "uuidtools", "NUMBER", "rb", "NUMBER", "in", "timestamp_create", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "fork", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "mixin", "config", "placeholders", "NUMBER", "lib", "fluent", "mixin", "config_placeholders", "NUMBER", "rb", "NUMBER", "in", "uuid_timestamp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "fork", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "mixin", "config", "placeholders", "NUMBER", "lib", "fluent", "mixin", "config_placeholders", "NUMBER", "rb", "NUMBER", "in", "block", "NUMBER", "levels", "in", "configure", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "fork", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "mixin", "config", "placeholders", "NUMBER", "lib", "fluent", "mixin", "config_placeholders", "NUMBER", "rb", "NUMBER", "in", "call", "snip", "This", "be", "a", "note", "to", "this", "know", "problem", "and", "a", "reminder", "for", "fluentd", "developers", "to", "import", "new", "version", "of", "uuidtools", "when", "it", "be", "release", "NUMBER", "I", "be", "experience", "the", "same", "issue", "NUMBER", "The", "context", "be", "I", "m", "trying", "to", "run", "fluentd", "fluent", "plugin", "s", "NUMBER", "in", "Docker", "NUMBER", "Docker", "in", "recent", "release", "has", "deprecate", "ifconfig", "and", "only", "provide", "ip", "command", "in", "container", "NUMBER", "Looks", "good", "NUMBER", "I", "run", "this", "branch", "with", "fluentd", "benchmark", "one_forward", "LINK", "benchmark", "tree", "master", "one_forward", "and", "it", "looked", "no", "problem", "occured", "LGTM", "In", "some", "cases", "there", "be", "no", "after", "the", "pid", "the", "following", "log", "would", "fail", "to", "parse", "TAG", "Jul", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "my", "NUMBER", "example", "NUMBER", "com", "run", "parts", "etc", "cron", "NUMBER", "daily", "NUMBER", "finished", "logrotate", "resulting", "in", "_source", "data", "TAG", "Jul", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "my", "NUMBER", "example", "NUMBER", "com", "run", "parts", "etc", "cron", "NUMBER", "daily", "NUMBER", "finished", "logrotate", "message", "invalid", "syslog", "message", "data", "TAG", "Jul", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "my", "NUMBER", "example", "NUMBER", "com", "run", "parts", "etc", "cron", "NUMBER", "daily", "NUMBER", "finished", "logrotate", "timestamp", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "This", "PR", "aims", "to", "make", "those", "after", "the", "pid", "optional", "Looks", "good", "NUMBER", "It", "should", "consider", "to", "sue", "ServerEngine", "SignalThread", "NUMBER", "NUMBER", "sabottenda", "Does", "this", "satisfy", "your", "needs", "LGTM", "NUMBER", "Thanks", "I", "confirmed", "it", "worked", "fine", "NUMBER", "URI", "was", "not", "initialized", "cause", "the", "following", "error", "on", "run", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "eval_include", "uninitialized", "constant", "Fluent", "Config", "V", "NUMBER", "Parser", "URI", "NameError", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "parse_include", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "parse_element", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "parse", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "parse", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "NUMBER", "rb", "NUMBER", "in", "parse", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "apply_system_config", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "initialize", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "command", "fluentd", "NUMBER", "rb", "NUMBER", "in", "new", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "command", "fluentd", "NUMBER", "rb", "NUMBER", "in", "TAG", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "NUMBER", "rubygems", "core_ext", "kernel_require", "NUMBER", "rb", "NUMBER", "in", "require", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "NUMBER", "rubygems", "core_ext", "kernel_require", "NUMBER", "rb", "NUMBER", "in", "require", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "bin", "fluentd", "NUMBER", "in", "TAG", "from", "opt", "td", "agent", "embedded", "bin", "fluentd", "NUMBER", "in", "load", "from", "opt", "td", "agent", "embedded", "bin", "fluentd", "NUMBER", "in", "TAG", "from", "usr", "sbin", "td", "agent", "NUMBER", "in", "load", "from", "usr", "sbin", "td", "agent", "NUMBER", "in", "TAG", "True", "it", "should", "work", "with", "master", "now", "NUMBER", "Quick", "question", "NUMBER", "Do", "you", "have", "any", "nightly", "build", "of", "your", "package", "CI", "publicly", "accessible", "Error", "seems", "to", "have", "resolve", "I", "m", "trying", "td", "agent", "NUMBER", "As", "a", "result", "of", "run", "the", "configtest", "it", "became", "such", "a", "result", "NUMBER", "service", "td", "agent", "confgtest", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "eval_include", "uninitialized", "constant", "Fluent", "Config", "V", "NUMBER", "Parser", "URI", "NameError", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "parse_include", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "parse_element", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "parse", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "v", "NUMBER", "_parser", "NUMBER", "rb", "NUMBER", "in", "parse", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "NUMBER", "rb", "NUMBER", "in", "parse", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "apply_system_config", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "initialize", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "command", "fluentd", "NUMBER", "rb", "NUMBER", "in", "new", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "command", "fluentd", "NUMBER", "rb", "NUMBER", "in", "TAG", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "site_ruby", "NUMBER", "rubygems", "core_ext", "kernel_require", "NUMBER", "rb", "NUMBER", "in", "require", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "site_ruby", "NUMBER", "rubygems", "core_ext", "kernel_require", "NUMBER", "rb", "NUMBER", "in", "require", "from", "opt", "td", "agent", "embedded", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "bin", "fluentd", "NUMBER", "in", "TAG", "from", "opt", "td", "agent", "embedded", "bin", "fluentd", "NUMBER", "in", "load", "from", "opt", "td", "agent", "embedded", "bin", "fluentd", "NUMBER", "in", "TAG", "from", "usr", "sbin", "td", "agent", "NUMBER", "in", "load", "from", "usr", "sbin", "td", "agent", "NUMBER", "in", "TAG", "I", "want", "to", "use", "v", "NUMBER", "configuration", "in", "the", "test", "of", "the", "plug", "in", "NUMBER", "thanks", "By", "setting", "current", "time", "caller", "cannot", "know", "time", "be", "from", "whether", "parse", "result", "or", "current", "time", "it", "brings", "troubles", "especially", "in", "case", "for", "filter", "plugins", "like", "fluent", "plugin", "parser", "naming", "problem", "time_", "prefix", "seems", "important", "for", "me", "Ah", "yes", "NUMBER", "But", "it", "be", "not", "expected", "NUMBER", "So", "I", "ll", "re", "fix", "time_default_current", "as", "non", "conifg_param", "parameter", "NUMBER", "Re", "push", "with", "fix", "NUMBER", "How", "about", "estimate_current_event", "I", "change", "configuration", "parameter", "attribute", "name", "from", "time_default_current", "to", "estimate_current_event", "NUMBER", "ouch", "fix", "NUMBER", "Installed", "td", "agent", "use", "this", "dmg", "LINK", "agent", "NUMBER", "NUMBER", "dmg", "Then", "I", "run", "fluent", "gem", "install", "fluent", "plugin", "forest", "after", "which", "fluent", "gem", "list", "returns", "NUMBER", "fluent", "plugin", "forest", "NUMBER", "NUMBER", "But", "then", "td", "agent", "dry", "run", "fail", "with", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "config", "error", "file", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "error", "Unknown", "output", "plugin", "forest", "NUMBER", "Run", "gem", "search", "rd", "fluent", "plugin", "to", "find", "plugins", "What", "s", "the", "correct", "method", "to", "install", "fluentd", "plugins", "for", "this", "dmg", "package", "Previously", "I", "was", "use", "homebrew", "package", "maintained", "my", "Gemfile", "and", "everything", "was", "work", "NUMBER", "Doesn", "t", "look", "like", "this", "new", "td", "agent", "respects", "gemfile", "option", "because", "when", "I", "create", "a", "Gemfile", "with", "the", "necessary", "dependencies", "it", "do", "install", "them", "somewhere", "on", "startup", "but", "fluent", "td", "agent", "still", "doesn", "t", "run", "in", "the", "right", "environment", "NUMBER", "Sorry", "for", "posting", "in", "the", "wrong", "place", "thanks", "for", "the", "links", "NUMBER", "I", "was", "use", "the", "full", "paths", "too", "and", "nothing", "works", "will", "continue", "where", "you", "redirected", "me", "NUMBER", "The", "separation", "between", "fluent", "d", "td", "agent", "wasn", "t", "clear", "to", "me", "NUMBER", "Update", "NUMBER", "Found", "this", "thread", "LINK", "msg", "fluentd", "ekODAaJuS", "NUMBER", "M", "GiHscqhC", "NUMBER", "Q", "NUMBER", "J", "uninstalled", "rvm", "reinstalled", "td", "agent", "install", "plugin", "use", "full", "path", "finally", "works", "NUMBER", "Thanks", "NUMBER", "I", "will", "take", "a", "closer", "look", "and", "test", "today", "NUMBER", "It", "might", "be", "a", "good", "idea", "to", "check", "with", "frsyuki", "why", "the", "standard", "socket", "library", "wasn", "t", "use", "initially", "NUMBER", "repeatedly", "I", "test", "this", "locally", "on", "Ubuntu", "Precise", "VM", "NUMBER", "Checked", "that", "it", "can", "handle", "both", "UDP", "and", "TCP", "payloads", "with", "csv", "regex", "NUMBER", "I", "notice", "that", "for", "TCP", "format", "none", "the", "n", "at", "the", "end", "be", "preserved", "NUMBER", "I", "suppose", "this", "be", "an", "expected", "behavior", "Most", "importantly", "I", "checked", "that", "this", "works", "with", "syslog", "Hooray", "I", "will", "write", "a", "new", "solution", "page", "once", "this", "patch", "lands", "NUMBER", "I", "think", "that", "use", "TcpInput", "directly", "be", "obsolete", "now", "NUMBER", "If", "it", "be", "correct", "we", "should", "add", "warn", "logs", "for", "direct", "use", "maybe", "both", "of", "tcp", "udp", "NUMBER", "I", "see", "NUMBER", "report", "by", "LINK", "simply", "add", "localtime", "true", "before", "conf", "utc", "in", "configure", "okay", "I", "will", "fix", "in", "this", "way", "NUMBER", "EDIT", "Well", "no", "NUMBER", "This", "be", "not", "enough", "because", "the", "parameter", "must", "be", "pass", "from", "out_file", "NUMBER", "Ah", "understand", "NUMBER", "repeatedly", "so", "like", "this", "repeatedly", "Let", "me", "make", "sure", "NUMBER", "Do", "you", "mean", "that", "SetTimeKeyMixin", "should", "also", "be", "fix", "fix", "Test", "fail", "but", "it", "looks", "it", "be", "not", "relate", "with", "this", "commit", "NUMBER", "Self", "explanatory", "NUMBER", "NUMBER", "But", "fix", "for", "DSL", "be", "not", "include", "NUMBER", "I", "ll", "fix", "it", "after", "merge", "NUMBER", "LGTM", "in_syslog", "has", "two", "parsing", "logics", "NUMBER", "If", "a", "format", "parameter", "be", "provide", "then", "it", "parses", "the", "leading", "TAG", "and", "uses", "the", "provide", "format", "for", "the", "rest", "of", "the", "message", "NUMBER", "NUMBER", "If", "no", "format", "parameter", "be", "provide", "it", "uses", "the", "default", "syslog", "message", "format", "which", "also", "starts", "with", "lt", "pri", "gt", "NUMBER", "This", "means", "that", "in_syslog", "barfs", "if", "the", "incoming", "message", "do", "not", "start", "with", "lt", "pri", "gt", "NUMBER", "This", "may", "happen", "if", "the", "user", "has", "custom", "syslog", "format", "that", "do", "not", "start", "with", "lt", "pri", "gt", "NUMBER", "Should", "in_syslog", "support", "this", "Or", "should", "it", "be", "in_forward", "I", "agree", "with", "you", "on", "in_", "out_forward", "NUMBER", "They", "should", "be", "primarily", "for", "Fluentd", "to", "Fluentd", "NUMBER", "I", "like", "your", "second", "idea", "better", "NUMBER", "If", "no", "one", "be", "use", "in_tcp", "anymore", "I", "personally", "think", "the", "first", "one", "be", "better", "I", "think", "type", "TAG", "be", "always", "more", "clear", "than", "type", "TAG", "NUMBER", "NUMBER", "Add", "suppress_parse_error_log", "option", "to", "in_tail", "plugin", "NUMBER", "This", "be", "a", "same", "feature", "to", "fluent", "plugin", "parser", "NUMBER", "I", "m", "use", "in_tail", "with", "log_level", "option", "to", "ignore", "parsing", "error", "for", "now", "NUMBER", "The", "option", "also", "suppresses", "other", "logs", "such", "as", "other", "warnings", "and", "backtraces", "so", "I", "think", "it", "s", "better", "to", "be", "a", "new", "option", "NUMBER", "My", "use", "case", "for", "this", "option", "be", "Parsing", "a", "part", "of", "logs", "just", "matched", "by", "format", "and", "ignore", "unmatched", "lines", "NUMBER", "Collecting", "almost", "all", "system", "logs", "even", "including", "debug", "log", "NUMBER", "I", "use", "Fluentd", "with", "v", "option", "in", "production", "NUMBER", "Therefore", "I", "want", "to", "ignore", "only", "this", "warning", "NUMBER", "If", "it", "s", "not", "good", "I", "will", "use", "format", "none", "and", "fluent", "plugin", "parser", "to", "accomplish", "the", "purpose", "NUMBER", "FYI", "LINK", "Of", "course", "I", "know", "it", "s", "difficult", "to", "write", "perfect", "regexp", "NUMBER", "Acutualy", "I", "don", "t", "want", "to", "miss", "_unintended_", "mismatch", "NUMBER", "I", "had", "an", "idea", "of", "a", "regexp", "format", "to", "ignore", "lines", "such", "as", "ignore_format", "but", "it", "s", "a", "little", "complex", "feature", "to", "in_tail", "plugin", "so", "this", "be", "a", "simple", "alternative", "I", "think", "NUMBER", "I", "issue", "NUMBER", "a", "year", "ago", "NUMBER", "My", "understanding", "at", "present", "be", "that", "format", "in", "in_tail", "be", "not", "something", "to", "filter", "logs", "NUMBER", "I", "can", "understand", "clearly", "that", "a", "log", "which", "do", "not", "match", "a", "regexp", "be", "just", "an", "exception", "NUMBER", "My", "understanding", "at", "present", "be", "that", "format", "in", "in_tail", "be", "not", "something", "to", "filter", "logs", "NUMBER", "I", "can", "understand", "clearly", "that", "a", "log", "which", "do", "not", "match", "a", "regexp", "be", "just", "an", "exception", "NUMBER", "I", "agree", "with", "you", "NUMBER", "It", "s", "right", "design", "I", "think", "NUMBER", "In", "my", "case", "I", "should", "use", "a", "format", "which", "matches", "whole", "line", "like", "a", "none", "to", "parse", "a", "part", "of", "logs", "NUMBER", "ex", "TAG", "TAG", "TAG", "TAG", "NUMBER", "But", "I", "can", "parse", "it", "and", "filter", "in", "latter", "phase", "without", "this", "patch", "NUMBER", "repeatedly", "I", "follow", "your", "decision", "NUMBER", "If", "you", "decided", "please", "close", "this", "request", "NUMBER", "If", "more", "users", "want", "this", "feature", "I", "will", "re", "consider", "support", "it", "in", "in_tail", "NUMBER", "Okay", "I", "look", "forward", "to", "another", "request", "from", "other", "users", "NUMBER", "Yesterday", "I", "change", "the", "rsyslog", "s", "template", "template", "CFormat", "timegenerated", "HOSTNAME", "syslogtag", "msg", "sp", "if", "no", "NUMBER", "sp", "msg", "drop", "last", "lf", "n", "to", "template", "CFormat", "timegenerated", "HOSTNAME", "syslogseverity", "text", "syslogtag", "msg", "sp", "if", "no", "NUMBER", "sp", "msg", "drop", "last", "lf", "n", "NUMBER", "After", "that", "fluentd", "stopped", "taking", "the", "logs", "from", "this", "host", "NUMBER", "No", "mail", "notification", "not", "sent", "any", "data", "to", "elasticsearch", "NUMBER", "System", "ubuntu", "NUMBER", "fluentd", "NUMBER", "OK", "NUMBER", "Hi", "repeatedly", "How", "about", "to", "support", "hostname", "or", "short", "hostname", "placeholder", "in", "include", "directive", "This", "feature", "would", "bring", "us", "more", "flexible", "configuration", "management", "specification", "etc", "td", "agent", "directory", "file", "be", "same", "in", "all", "servers", "NUMBER", "to", "select", "load", "file", "on", "startup", "fluentd", "it", "uses", "hostname", "use", "case", "It", "be", "a", "way", "to", "switch", "behavior", "even", "though", "these", "be", "same", "configuration", "NUMBER", "use", "case", "NUMBER", "fetch", "configuration", "from", "provisioning", "http", "server", "on", "startup", "NUMBER", "use", "case", "NUMBER", "keep", "all", "server", "configuration", "as", "static", "file", "at", "etc", "td", "agent", "directory", "from", "git", "repository", "NUMBER", "sample", "configuration", "of", "use", "case", "NUMBER", "cat", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "include", "LINK", "provisioning", "server", "NUMBER", "fluent", "hostname", "NUMBER", "conf", "OR", "cat", "etc", "td", "agent", "td", "agent", "NUMBER", "rb", "include", "LINK", "provisioning", "server", "NUMBER", "fluent", "Socket", "NUMBER", "gethostname", "NUMBER", "conf", "sample", "configuration", "of", "use", "case", "NUMBER", "ls", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "vms", "NUMBER", "conf", "vms", "NUMBER", "conf", "vms", "NUMBER", "conf", "vms", "NUMBER", "conf", "NUMBER", "snip", "NUMBER", "cat", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "include", "etc", "td", "agent", "short_hostname", "NUMBER", "conf", "OR", "cat", "etc", "td", "agent", "td", "agent", "NUMBER", "rb", "include", "etc", "td", "agent", "Socket", "NUMBER", "gethostname", "NUMBER", "split", "NUMBER", "NUMBER", "NUMBER", "conf", "Thanks", "NUMBER", "I", "agree", "to", "your", "opinion", "NUMBER", "At", "this", "time", "it", "seems", "like", "DSL", "configuration", "do", "not", "support", "include", "directive", "NUMBER", "Would", "you", "please", "tell", "me", "any", "example", "to", "load", "external", "configuration", "with", "DSL", "I", "have", "tried", "with", "this", "dsl", "NUMBER", "but", "it", "won", "t", "work", "because", "include", "method", "do", "not", "defined", "in", "lib", "fluent", "config", "dsl", "NUMBER", "rb", "cat", "etc", "td", "agent", "td", "agent", "NUMBER", "rb", "include", "etc", "td", "agent", "ENV", "FLUENTD_ROLE", "NUMBER", "conf", "It", "s", "just", "because", "lack", "of", "idea", "time", "NUMBER", "External", "dsl", "configuration", "file", "can", "be", "include", "by", "require", "NUMBER", "Thank", "you", "for", "your", "comment", "repeatedly", "tagomoris", "NUMBER", "Oh", "I", "ll", "try", "it", "soon", "NUMBER", "tagomoris", "How", "do", "I", "load", "configuration", "with", "external", "uri", "It", "seems", "better", "to", "emulate", "include", "of", "v", "NUMBER", "configuration", "syntax", "because", "configuration", "attribute", "name", "like", "name", "be", "invalid", "NUMBER", "There", "may", "be", "NUMBER", "options", "Add", "instance", "variable", "include", "and", "set", "lambda", "to", "include", "external", "uri", "into", "it", "NUMBER", "For", "example", "in", "configuration", "file", "ruby", "include", "NUMBER", "path", "to", "configuration", "Add", "instance", "variable", "sys", "syntax", "or", "others", "such", "like", "these", "and", "call", "include", "of", "this", "variable", "ruby", "sys", "NUMBER", "include", "path", "to", "configuration", "Latter", "one", "be", "better", "for", "the", "case", "which", "configuration", "file", "needs", "more", "keywords", "NUMBER", "Do", "you", "have", "any", "ideas", "about", "the", "number", "of", "keywords", "repeatedly", "repeatedly", "How", "be", "it", "implement", "on", "ROOT", "element", "When", "I", "use", "in_tail", "plugin", "to", "watch", "multi", "file", "like", "in_tail_ex", "following", "error", "happen", "on", "log", "rotation", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "on_notify", "bignum", "too", "big", "to", "convert", "into", "long", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "attach", "home", "sabo", "work", "fluentd", "fluentd", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "seek", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "attach", "home", "sabo", "work", "fluentd", "fluentd", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_rotate", "The", "position", "of", "PositionFile", "be", "update", "to", "NUMBER", "xffffffffffffffff", "after", "log", "rotation", "to", "show", "it", "be", "a", "unwatched", "file", "NUMBER", "If", "next", "generate", "file", "to", "be", "watched", "has", "same", "inode", "to", "the", "old", "rotated", "file", "the", "value", "be", "use", "as", "current", "position", "of", "the", "new", "file", "NUMBER", "This", "patch", "fix", "the", "problem", "by", "checking", "the", "position", "file", "has", "valid", "position", "NUMBER", "complete", "process", "to", "reproduce", "the", "bug", "TAG", "type", "tail", "format", "none", "tag", "test", "path", "NUMBER", "log", "NUMBER", "log", "pos_file", "NUMBER", "pos", "refresh_interval", "NUMBER", "s", "TAG", "logging", "echo", "foo", "log", "foo", "NUMBER", "log", "wating", "a", "second", "show", "position", "file", "cat", "pos", "NUMBER", "log", "foo", "NUMBER", "log", "NUMBER", "NUMBER", "cb", "remove", "watching", "file", "rm", "log", "foo", "NUMBER", "log", "wating", "refresh", "inteval", "show", "position", "file", "cat", "pos", "NUMBER", "log", "foo", "NUMBER", "log", "ffffffffffffffff", "NUMBER", "cb", "re", "logging", "case", "ERROR", "on", "in_tail", "echo", "bar", "log", "foo", "NUMBER", "log", "This", "problem", "also", "happens", "when", "rotated", "file", "be", "compressed", "immediately", "NUMBER", "ex", "use", "logrotate", "If", "you", "know", "a", "real", "case", "use", "Upstart", "and", "tail", "the", "logs", "with", "the", "option", "NUMBER", "You", "will", "find", "many", "error", "after", "log", "rotation", "NUMBER", "path", "var", "log", "upstart", "NUMBER", "log", "Sorry", "for", "misleading", "example", "NUMBER", "It", "s", "just", "a", "simplified", "case", "which", "triggers", "same", "problem", "NUMBER", "Upstart", "s", "log", "rotation", "behavior", "be", "that", "it", "renames", "a", "log", "file", "with", "suffix", "and", "compresses", "the", "file", "like", "following", "NUMBER", "mv", "foo", "NUMBER", "log", "foo", "NUMBER", "log", "NUMBER", "gzip", "foo", "NUMBER", "log", "NUMBER", "This", "behavior", "seems", "just", "remove", "file", "from", "Fluentd", "s", "perspective", "NUMBER", "You", "should", "not", "use", "with", "log", "rotation", "because", "it", "may", "cause", "the", "log", "duplication", "NUMBER", "In", "such", "case", "you", "should", "separate", "in_tail", "plugin", "configuration", "NUMBER", "I", "may", "have", "wrong", "idea", "of", "this", "note", "in", "document", "this", "means", "Fluentd", "try", "to", "read", "a", "rotated", "file", "from", "beginning", "if", "in_tail", "s", "format", "also", "matches", "the", "rotated", "file", "name", "doesn", "t", "it", "So", "Upstart", "case", "be", "enough", "with", "fix", "path", "foo", "NUMBER", "log", "path", "config", "Yes", "NUMBER", "But", "it", "can", "simplify", "a", "configuration", "to", "tail", "all", "logs", "generate", "by", "Upstart", "NUMBER", "in_tail", "s", "format", "format", "path", "It", "s", "path", "sorry", "NUMBER", "It", "depends", "on", "the", "configuration", "NUMBER", "If", "read_from_head", "be", "true", "in_tail", "reads", "from", "the", "beginning", "when", "detects", "new", "file", "NUMBER", "When", "path", "contains", "in_tail", "starts", "to", "watch", "rotated", "file", "as", "new", "file", "and", "almost", "users", "use", "read_from_head", "true", "with", "NUMBER", "I", "see", "NUMBER", "So", "if", "I", "can", "write", "an", "accurate", "configuration", "which", "do", "not", "match", "rotated", "file", "there", "be", "no", "reasons", "to", "prohibit", "path", "NUMBER", "in_tail", "can", "t", "track", "log", "rotation", "mechanizm", "correctly", "with", "_", "you", "mention", "compressed", "case", "so", "we", "write", "You", "should", "not", "use", "_", "with", "log", "rotation", "in", "the", "documentation", "NUMBER", "Are", "there", "other", "documentations", "about", "a", "compressed", "case", "ping", "DRb", "be", "unsafe", "by", "default", "NUMBER", "Default", "fluentd", "NUMBER", "conf", "should", "be", "listen", "on", "localhost", "only", "like", "default", "td", "agent", "NUMBER", "conf", "NUMBER", "see", "security", "section", "of", "DRb", "document", "LINK", "lang", "NUMBER", "org", "en", "NUMBER", "DRb", "NUMBER", "html", "module", "DRb", "label", "Security", "English", "and", "my", "blog", "post", "eval", "from", "remote", "LINK", "z", "NUMBER", "jp", "blog", "NUMBER", "NUMBER", "NUMBER", "fluentd", "drb", "NUMBER", "html", "Japanese", "NUMBER", "One", "more", "item", "should", "be", "add", "of", "patch", "section", "NUMBER", "Run", "all", "test", "before", "send", "pull", "request", "by", "bundle", "exec", "rake", "test", "NUMBER", "Here", "be", "the", "guidelines", "Here", "be", "the", "guidelines", "I", "ve", "seen", "a", "couple", "of", "Fluentd", "write", "ups", "that", "hand", "code", "Apache", "error", "log", "regexes", "NUMBER", "Perhaps", "it", "be", "time", "to", "support", "it", "out", "of", "the", "box", "like", "format", "apache_error", "NUMBER", "Changed", "TimeParser", "to", "not", "truncate", "milliseconds", "NUMBER", "See", "discussion", "here", "LINK", "msg", "fluentd", "BIYUtwICFYY", "KA_tkTkgJP", "NUMBER", "J", "Note", "This", "will", "probably", "break", "things", "and", "be", "completely", "untested", "from", "my", "side", "NUMBER", "NUMBER", "parser", "NUMBER", "parse", "accepts", "block", "seems", "good", "idea", "for", "me", "but", "I", "think", "we", "should", "not", "break", "old", "API", "NUMBER", "It", "seems", "better", "that", "doing", "yield", "if", "block_given", "be", "true", "and", "returns", "time", "record", "if", "false", "NUMBER", "I", "cannot", "understand", "what", "you", "meant", "NUMBER", "Why", "did", "you", "fix", "build", "in", "plugins", "which", "uses", "TextParser", "parse", "in", "this", "pull", "req", "Ah", "I", "find", "the", "reason", "from", "code", "it", "seems", "for", "multi", "events", "parsing", "NUMBER", "but", "in_syslog", "be", "needed", "to", "support", "multi", "events", "should", "syntax", "be", "deprecate", "in", "RSpec", "NUMBER", "Use", "expect", "syntax", "in", "order", "to", "suppress", "warnings", "NUMBER", "format", "multiline", "in", "in_tail", "plugin", "without", "format_firstline", "option", "do", "not", "work", "NUMBER", "In", "multiline", "mode", "record", "be", "emitted", "only", "when", "input", "line", "be", "matched", "to", "regex", "but", "the", "input", "line", "pass", "to", "regex", "be", "always", "single", "line", "so", "it", "never", "match", "without", "format_firstline", "option", "NUMBER", "Input", "line", "be", "handle", "here", "LINK", "_tail", "NUMBER", "rb", "L", "NUMBER", "L", "NUMBER", "and", "regex", "be", "set", "here", "LINK", "L", "NUMBER", "NUMBER", "I", "don", "t", "know", "format_firstline", "be", "required", "NUMBER", "What", "case", "the", "option", "be", "better", "for", "I", "use", "this", "configuration", "TAG", "type", "tail", "path", "NUMBER", "multi", "NUMBER", "txt", "pos_file", "NUMBER", "multi", "NUMBER", "pos", "format", "multiline", "format", "NUMBER", "TAG", "foo", "n", "format", "NUMBER", "TAG", "bar", "n", "format", "NUMBER", "TAG", "baz", "tag", "foo", "TAG", "and", "then", "stored", "some", "logs", "echo", "foo", "multi", "NUMBER", "txt", "echo", "bar", "multi", "NUMBER", "txt", "echo", "baz", "multi", "NUMBER", "txt", "echo", "foo", "multi", "NUMBER", "txt", "echo", "bar", "multi", "NUMBER", "txt", "echo", "baz", "multi", "NUMBER", "txt", "and", "received", "warnings", "from", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "parse_multilines", "get", "incomplete", "line", "before", "first", "line", "from", "NUMBER", "multi", "NUMBER", "txt", "nil", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "parse_multilines", "get", "incomplete", "line", "before", "first", "line", "from", "NUMBER", "multi", "NUMBER", "txt", "nil", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "parse_multilines", "get", "incomplete", "line", "before", "first", "line", "from", "NUMBER", "multi", "NUMBER", "txt", "nil", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "parse_multilines", "get", "incomplete", "line", "before", "first", "line", "from", "NUMBER", "multi", "NUMBER", "txt", "nil", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "parse_multilines", "get", "incomplete", "line", "before", "first", "line", "from", "NUMBER", "multi", "NUMBER", "txt", "nil", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "parse_multilines", "get", "incomplete", "line", "before", "first", "line", "from", "NUMBER", "multi", "NUMBER", "txt", "nil", "This", "case", "works", "with", "this", "patch", "NUMBER", "Sorry", "for", "sending", "pull", "request", "without", "test", "NUMBER", "I", "add", "a", "test", "case", "for", "that", "NUMBER", "Use", "next", "major", "version", "of", "RSpec", "NUMBER", "This", "change", "fix", "deprecate", "sysntax", "report", "as", "error", "NUMBER", "should", "syntax", "be", "also", "deprecate", "use", "expect", "syntax", "instead", "NUMBER", "If", "you", "want", "to", "use", "expect", "syntax", "from", "now", "I", "will", "also", "fix", "it", "NUMBER", "NUMBER", "for", "both", "this", "patch", "and", "shutdown", "timeout", "SECONDS", "This", "change", "itself", "looks", "ok", "NUMBER", "Good", "improvement", "NUMBER", "But", "many", "output", "plugins", "emits", "records", "because", "Fluentd", "currently", "doesn", "t", "have", "filter", "plugins", "NUMBER", "So", "the", "change", "doesn", "t", "always", "fix", "the", "issue", "NUMBER", "Shutdown", "timeout", "sounds", "very", "good", "idea", "NUMBER", "Regarding", "configuration", "I", "think", "later", "or", "sooner", "fluentd", "NUMBER", "conf", "needs", "to", "have", "top", "level", "configuration", "parameters", "for", "Fluentd", "core", "NUMBER", "Setting", "parameters", "in", "cmdline", "meaning", "in", "different", "configuration", "file", "in", "CentOS", "Debian", "needs", "more", "work", "to", "configure", "Fluentd", "correctly", "NUMBER", "What", "u", "NUMBER", "u", "NUMBER", "means", "Ruby", "\u8aad\u3081\u306a\u3044\u306e\u3067", "\u3053\u308c\u306a\u3093\u304b\u306e\u30a4\u30c7\u30a3\u30aa\u30e0\u3060\u3063\u305f\u3089\u3054\u3081\u3093\u306a\u3055\u3044", "I", "run", "the", "build", "process", "documented", "here", "LINK", "from", "source", "NUMBER", "But", "I", "can", "t", "install", "NUMBER", "ruby", "v", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "universal", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "git", "clone", "LINK", "Cloning", "into", "fluentd", "NUMBER", "remote", "Reusing", "exist", "pack", "NUMBER", "do", "NUMBER", "remote", "Total", "NUMBER", "delta", "NUMBER", "reused", "NUMBER", "delta", "NUMBER", "Receiving", "objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "MiB", "NUMBER", "MiB", "s", "do", "NUMBER", "Resolving", "deltas", "NUMBER", "NUMBER", "NUMBER", "do", "NUMBER", "Checking", "connectivity", "NUMBER", "do", "NUMBER", "cd", "fluentd", "rake", "build", "rake", "abort", "cannot", "load", "such", "file", "bundler", "gem_tasks", "Users", "inada", "n", "work", "fluentd", "Rakefile", "NUMBER", "in", "TAG", "See", "full", "trace", "by", "run", "task", "with", "trace", "rake", "build", "trace", "rake", "abort", "cannot", "load", "such", "file", "bundler", "gem_tasks", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rubygems", "core_ext", "kernel_require", "NUMBER", "rb", "NUMBER", "in", "require", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rubygems", "core_ext", "kernel_require", "NUMBER", "rb", "NUMBER", "in", "require", "Users", "inada", "n", "work", "fluentd", "Rakefile", "NUMBER", "in", "TAG", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rake", "rake_module", "NUMBER", "rb", "NUMBER", "in", "load", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rake", "rake_module", "NUMBER", "rb", "NUMBER", "in", "load_rakefile", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rake", "application", "NUMBER", "rb", "NUMBER", "in", "raw_load_rakefile", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rake", "application", "NUMBER", "rb", "NUMBER", "in", "block", "in", "load_rakefile", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rake", "application", "NUMBER", "rb", "NUMBER", "in", "standard_exception_handling", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rake", "application", "NUMBER", "rb", "NUMBER", "in", "load_rakefile", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rake", "application", "NUMBER", "rb", "NUMBER", "in", "block", "in", "run", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rake", "application", "NUMBER", "rb", "NUMBER", "in", "standard_exception_handling", "System", "Library", "Frameworks", "Ruby", "NUMBER", "framework", "Versions", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rake", "application", "NUMBER", "rb", "NUMBER", "in", "run", "usr", "bin", "rake", "NUMBER", "in", "TAG", "Danke", "It", "happens", "particularly", "in", "the", "case", "use", "many", "kinds", "of", "tags", "or", "in", "the", "case", "try_flush", "enqueue_buffer", "call", "frequently", "NUMBER", "ruby", "require", "fluent", "load", "require", "logger", "logger", "Logger", "NUMBER", "new", "STDOUT", "log", "Fluent", "Log", "NUMBER", "new", "logger", "NUMBER", "instance_variable_get", "logdev", "NUMBER", "dev", "logger", "NUMBER", "level", "require", "fluent", "plugin", "buf_memory", "buf", "Fluent", "MemoryBuffer", "NUMBER", "new", "buf", "NUMBER", "art", "fill", "the", "queue", "with", "chunk", "buf", "NUMBER", "buffer_queue_limit", "NUMBER", "times", "do", "chunk", "buf", "NUMBER", "new_chunk", "hoge", "buf", "NUMBER", "enqueue", "chunk", "buf", "NUMBER", "instance_variable_get", "queue", "TAG", "NUMBER", "new", "events", "be", "emitted", "with", "tag", "which", "be", "not", "include", "in", "map", "NUMBER", "keys", "NUMBER", "times", "do", "i", "tag", "i", "NUMBER", "to_s", "data", "value", "i", "NUMBER", "to_msgpack", "chain", "Fluent", "NullOutputChain", "NUMBER", "instance", "buf", "NUMBER", "emit", "tag", "data", "chain", "end", "same", "as", "Output", "enqueue_buffer", "buf", "NUMBER", "keys", "NUMBER", "each", "key", "buf", "NUMBER", "push", "key", "queue", "size", "exceeds", "limit", "p", "buf", "NUMBER", "queue_size", "NUMBER", "I", "wonder", "why", "be", "the", "queue", "size", "not", "checked", "in", "BasicBuffer", "push", "NUMBER", "LINK", "L", "NUMBER", "Or", "may", "it", "be", "necessary", "to", "check", "the", "queue", "size", "at", "the", "beginning", "of", "BasicBuffer", "emit", "not", "after", "checking", "storable", "LINK", "L", "NUMBER", "L", "NUMBER", "Thanks", "for", "reply", "NUMBER", "I", "worried", "about", "memory", "exhausting", "by", "growth", "of", "map", "and", "queue", "size", "NUMBER", "Particularly", "in", "the", "case", "that", "forwarding", "be", "not", "work", "well", "by", "a", "high", "load", "and", "so", "on", "NUMBER", "However", "I", "thought", "over", "that", "it", "may", "be", "what", "should", "can", "be", "avoided", "by", "the", "tuning", "of", "the", "parameter", "NUMBER", "Sorry", "for", "the", "delay", "I", "test", "this", "today", "and", "it", "works", "for", "me", "as", "well", "NUMBER", "Thanks", "for", "the", "quick", "fix", "In", "supervisor", "NUMBER", "rb", "the", "id", "g", "command", "be", "use", "several", "times", "like", "this", "chgid", "chgroup", "id", "g", "chgroup", "NUMBER", "to_i", "nil", "The", "intent", "seems", "to", "be", "to", "translate", "the", "group", "name", "as", "specified", "in", "the", "group", "command", "line", "flag", "to", "a", "numeric", "GID", "NUMBER", "However", "the", "id", "g", "command", "doesn", "t", "actually", "do", "this", "the", "argument", "be", "always", "a", "username", "and", "the", "g", "flag", "prints", "that", "user", "s", "default", "group", "NUMBER", "See", "id", "help", "Usage", "id", "OPTION", "NUMBER", "USERNAME", "Print", "user", "and", "group", "information", "for", "the", "specified", "USERNAME", "or", "when", "USERNAME", "omitted", "for", "the", "current", "user", "NUMBER", "NUMBER", "g", "group", "print", "only", "the", "effective", "group", "ID", "NUMBER", "Therefore", "this", "wrong", "in", "one", "of", "two", "ways", "if", "the", "name", "of", "the", "group", "isn", "t", "also", "a", "valid", "user", "it", "fail", "and", "causes", "fluentd", "not", "to", "start", "if", "the", "name", "of", "the", "group", "be", "a", "valid", "user", "it", "silently", "prints", "the", "wrong", "GID", "if", "the", "user", "s", "default", "group", "be", "not", "the", "same", "as", "the", "GID", "of", "the", "group", "with", "the", "same", "name", "Hmm", "good", "catch", "NUMBER", "repeatedly", "yup", "that", "seems", "like", "it", "would", "work", "NUMBER", "My", "test", "case", "was", "trying", "to", "set", "group", "adm", "on", "a", "Debian", "system", "without", "a", "fix", "fluentd", "prints", "the", "mysterious", "message", "id", "adm", "No", "such", "user", "and", "exits", "NUMBER", "File", "Stat", "NUMBER", "new", "path", "raises", "an", "Errno", "ENOENT", "exception", "if", "a", "file", "doesn", "t", "exist", "NUMBER", "The", "exist", "behavior", "if", "read_from_head", "isn", "t", "enable", "be", "to", "not", "crash", "and", "simply", "not", "tail", "the", "file", "NUMBER", "This", "patch", "extend", "that", "behavior", "to", "the", "case", "where", "read_from_head", "be", "enable", "NUMBER", "Test", "add", "NUMBER", "I", "m", "sorry", "for", "not", "including", "it", "initially", "NUMBER", "read_from_head", "do", "not", "only", "upload", "exist", "logs", "in", "a", "file", "it", "also", "causes", "in_tail", "to", "tail", "all", "logs", "add", "to", "the", "file", "while", "fluentd", "be", "run", "NUMBER", "It", "seems", "useful", "to", "enable", "read_from_head", "in", "many", "cases", "so", "that", "it", "doesn", "t", "matter", "if", "fluentd", "starts", "before", "or", "after", "the", "application", "whose", "logs", "you", "want", "to", "tail", "or", "so", "that", "you", "can", "have", "a", "common", "configuration", "file", "with", "many", "paths", "listed", "some", "of", "which", "be", "useful", "on", "some", "of", "your", "VMs", "and", "some", "of", "which", "be", "useful", "on", "others", "NUMBER", "For", "example", "I", "may", "want", "to", "collect", "apache", "memcache", "and", "syslog", "on", "one", "set", "of", "VMs", "and", "memcache", "mysql", "and", "syslog", "on", "another", "set", "NUMBER", "It", "s", "easiest", "for", "me", "to", "just", "use", "the", "same", "config", "file", "for", "both", "sets", "of", "VMs", "and", "enabling", "read_from_head", "makes", "it", "so", "that", "installation", "order", "doesn", "t", "matter", "NUMBER", "Done", "NUMBER", "Users", "still", "won", "t", "be", "warned", "if", "a", "file", "specified", "without", "read_from_head", "doesn", "t", "exist", "but", "they", "will", "be", "warned", "if", "they", "have", "read_from_head", "enable", "NUMBER", "This", "be", "per", "LINK", "For", "other", "formats", "I", "don", "t", "think", "it", "should", "be", "handle", "by", "in_http", "itself", "but", "by", "the", "nascent", "parser_", "NUMBER", "rb", "familiy", "of", "plugins", "NUMBER", "If", "someone", "wanted", "to", "parse", "json", "NUMBER", "n", "json", "NUMBER", "n", "Then", "that", "person", "should", "write", "a", "parser", "plugin", "that", "can", "be", "use", "outside", "of", "HTTP", "Although", "it", "might", "be", "tricky", "to", "differentiate", "between", "that", "and", "format", "json", "NUMBER", "Also", "if", "you", "be", "write", "a", "logger", "I", "think", "it", "be", "easier", "to", "put", "everything", "in", "an", "array", "and", "call", "JSON", "MessagePack", "serialization", "methods", "than", "format", "for", "in_http", "with", "line", "feeds", "NUMBER", "repeatedly", "So", "if", "we", "spread", "Fluentd", "on", "such", "environment", "in_http", "should", "support", "batch", "mode", "for", "other", "formats", "NUMBER", "I", "agree", "NUMBER", "But", "I", "be", "not", "NUMBER", "sure", "if", "it", "should", "be", "specific", "to", "in_http", "NUMBER", "Ideally", "we", "want", "a", "meta", "parser", "that", "can", "batch", "parse", "repeated", "units", "of", "the", "same", "format", "NUMBER", "In", "json", "NUMBER", "n", "json", "NUMBER", "n", "json", "NUMBER", "n", "NUMBER", "jsonN", "be", "the", "repeated", "formats", "with", "n", "as", "the", "delimiter", "for", "the", "formats", "NUMBER", "Then", "there", "should", "be", "a", "natural", "way", "to", "extend", "JSONParser", "so", "that", "it", "can", "handle", "this", "NUMBER", "I", "be", "not", "sure", "what", "the", "interface", "should", "look", "like", "though", "NUMBER", "It", "looks", "good", "but", "it", "seems", "better", "that", "TextFormatter", "module", "and", "each", "formatter", "implementation", "classes", "be", "in", "separated", "file", "NUMBER", "I", "thinks", "that", "formatter", "implementations", "in", "separated", "file", "will", "be", "a", "good", "example", "for", "plugin", "developers", "NUMBER", "fluent", "formatter", "json", "seems", "better", "for", "me", "NUMBER", "I", "find", "a", "problem", "that", "I", "ve", "use", "out_file", "plugin", "and", "flush_interval", "parameter", "together", "in", "fluentd", "NUMBER", "NUMBER", "NUMBER", "configure", "fluentd", "cat", "fluentd", "NUMBER", "conf", "TAG", "type", "forward", "TAG", "TAG", "type", "file", "path", "tmp", "bug", "symlink_path", "tmp", "bug", "NUMBER", "json", "flush_interval", "NUMBER", "s", "TAG", "NUMBER", "NUMBER", "starting", "up", "fluentd", "fluentd", "c", "fluentd", "NUMBER", "conf", "NUMBER", "NUMBER", "emit", "message", "echo", "int", "NUMBER", "time", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "foo", "bar", "NUMBER", "fluent", "cat", "test", "I", "could", "see", "the", "stdout", "message", "before", "flushed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "int", "NUMBER", "foo", "bar", "NUMBER", "NUMBER", "NUMBER", "symlink", "has", "miss", "path", "I", "have", "checked", "bug", "NUMBER", "b", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "a", "NUMBER", "was", "existed", "before", "flushed", "NUMBER", "ls", "alh", "grep", "bug", "rw", "r", "r", "NUMBER", "y", "ken", "y", "ken", "NUMBER", "B", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "bug", "NUMBER", "_", "NUMBER", "log", "lrwxr", "xr", "x", "NUMBER", "y", "ken", "y", "ken", "NUMBER", "B", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "bug", "NUMBER", "json", "tmp", "bug", "NUMBER", "b", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "a", "NUMBER", "Looks", "same", "problem", "as", "NUMBER", "NUMBER", "Yes", "I", "think", "this", "be", "same", "or", "similar", "problem", "as", "NUMBER", "symlink_path", "s", "symlink", "points", "a", "buffer", "file", "created", "by", "_buf_file_", "not", "_out_file_", "NUMBER", "bug", "NUMBER", "json", "tmp", "bug", "NUMBER", "b", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "a", "NUMBER", "The", "bug", "NUMBER", "json", "points", "the", "last", "buffer", "file", "NUMBER", "No", "new", "buffer", "file", "be", "created", "so", "the", "symlink", "keep", "point", "last", "one", "NUMBER", "I", "see", "NUMBER", "But", "I", "feel", "something", "wrong", "behavior", "which", "might", "be", "my", "misunderstand", "NUMBER", "I", "ll", "check", "it", "later", "NUMBER", "Hi", "repeatedly", "This", "issue", "has", "cause", "by", "use", "the", "default", "buffer_type", "behavior", "NUMBER", "The", "default", "buffer_type", "of", "out_file", "be", "memory", "then", "it", "would", "not", "create", "buffer", "symlink", "NUMBER", "It", "it", "the", "reason", "why", "I", "felt", "something", "wrong", "NUMBER", "So", "I", "suggest", "to", "raise", "Fluent", "ConfigError", "when", "buffer_type", "memory", "and", "symlink_path", "defined", "together", "in", "out_file", "NUMBER", "I", "m", "sorry", "NUMBER", "It", "s", "no", "problem", "at", "all", "NUMBER", "This", "be", "not", "a", "feature", "request", "per", "se", "but", "more", "like", "a", "discussion", "for", "support", "the", "ability", "to", "POST", "multiple", "records", "NUMBER", "Currently", "I", "believe", "in_http", "can", "only", "accept", "HTTP", "request", "with", "a", "single", "Fluentd", "event", "NUMBER", "Hence", "there", "be", "a", "one", "to", "one", "map", "between", "HTTP", "request", "and", "Fluentd", "event", "NUMBER", "Would", "it", "be", "more", "scalable", "to", "allow", "the", "sender", "to", "batch", "multiple", "request", "into", "a", "single", "HTTP", "POST", "I", "imagine", "something", "like", "this", "curl", "X", "post", "fluentd_host", "NUMBER", "com", "foo", "bar", "d", "name", "first", "record", "name", "second", "record", "Happy", "to", "hear", "what", "other", "people", "think", "NUMBER", "This", "would", "be", "nice", "feature", "NUMBER", "I", "ve", "heard", "some", "people", "wants", "this", "NUMBER", "repeatedly", "Any", "thoughts", "I", "be", "thinking", "something", "like", "this", "LINK", "repeatedly", "cool", "NUMBER", "i", "will", "add", "test", "and", "send", "a", "PR", "I", "think", "LINK", "be", "on", "its", "way", "to", "get", "merge", "NUMBER", "Closing", "this", "discussion", "thread", "NUMBER", "Tests", "should", "check", "the", "write", "file", "content", "that", "it", "can", "be", "uncompressed", "successfully", "by", "ruby", "code", "and", "gunzip", "command", "NUMBER", "What", "do", "you", "mean", "by", "non", "portable", "option", "name", "options", "append", "false", "sparse_file", "true", "NUMBER", "We", "already", "use", "sed", "and", "grep", "with", "non", "standard", "options", "in", "test_out_exec_filter", "NUMBER", "rb", "NUMBER", "Do", "we", "want", "to", "fix", "it", "too", "What", "about", "numbering", "true", "false", "for", "the", "option", "name", "path_numbering", "sounds", "fine", "for", "me", "NUMBER", "NUMBER", "In", "particular", "this", "would", "encourage", "people", "to", "use", "POST", "over", "GET", "I", "don", "t", "think", "it", "s", "semantically", "correct", "to", "use", "in_http", "with", "GET", "temporarily", "fail", "to", "flush", "the", "buffer", "NUMBER", "error_class", "Mongo", "OperationFailure", "error", "NUMBER", "E", "NUMBER", "duplicate", "key", "error", "index", "The", "issue", "impact", "fluentd", "normal", "work", "I", "think", "split", "file", "should", "be", "custom", "should", "not", "to", "do", "default", "other", "log", "collector", "for", "example", "logstash", "all", "to", "do", "this", "way", "I", "think", "that", "the", "default", "behavior", "should", "NOT", "be", "change", "for", "out_file", "NUMBER", "It", "breaks", "users", "environments", "and", "batch", "jobs", "NUMBER", "For", "future", "implementations", "I", "ll", "note", "about", "some", "point", "of", "view", "Fluentd", "s", "file", "buffers", "be", "actually", "file", "in", "file", "systems", "and", "rename", "at", "flushing", "provides", "great", "performance", "enhancement", "This", "feature", "requires", "separated", "file", "not", "appending", "NUMBER", "Current", "out_file", "do", "NOT", "move", "do", "write", "once", "more", "Appending", "may", "bring", "some", "confusing", "behavior", "on", "multi", "process", "multi", "thread", "environment", "This", "be", "not", "so", "big", "problem", "for", "Fluentd", "because", "FileBufferPlugin", "brings", "more", "huge", "problem", "for", "multi", "process", "configurations", "when", "same", "buffer", "path", "specified", "As", "a", "fluentd", "s", "user", "I", "want", "to", "append", "logs", "to", "exist", "file", "on", "my", "disk", "so", "I", "d", "release", "fluent", "plugin", "file", "alternative", "that", "appends", "log", "data", "int", "exist", "file", "for", "non", "compressed", "file", "only", "NUMBER", "I", "be", "also", "use", "file", "alternetive", "to", "append", "logs", "NUMBER", "I", "don", "t", "know", "how", "many", "users", "use", "fluent", "plugin", "file", "alternative", "yes", "forget", "close", "method", "LINK", "plugin", "file", "alternative", "commit", "NUMBER", "c", "NUMBER", "b", "NUMBER", "e", "NUMBER", "bcc", "NUMBER", "db", "NUMBER", "d", "NUMBER", "aafa", "NUMBER", "f", "NUMBER", "f", "NUMBER", "e", "fluent", "debug", "can", "t", "handle", "invalid", "option", "correctory", "NUMBER", "NUMBER", "bin", "fluent", "debug", "p", "Users", "uu", "NUMBER", "works", "td", "fluentd", "lib", "fluent", "command", "debug", "NUMBER", "rb", "NUMBER", "in", "rescue", "in", "TAG", "undefined", "method", "usage", "for", "main", "Object", "NoMethodError", "from", "Users", "uu", "NUMBER", "works", "td", "fluentd", "lib", "fluent", "command", "debug", "NUMBER", "rb", "NUMBER", "in", "TAG", "from", "Users", "uu", "NUMBER", "NUMBER", "rbenv", "version", "NUMBER", "lib", "ruby", "site_ruby", "NUMBER", "rubygems", "core_ext", "kernel_require", "NUMBER", "rb", "NUMBER", "in", "require", "from", "Users", "uu", "NUMBER", "NUMBER", "rbenv", "version", "NUMBER", "lib", "ruby", "site_ruby", "NUMBER", "rubygems", "core_ext", "kernel_require", "NUMBER", "rb", "NUMBER", "in", "require", "from", "NUMBER", "bin", "fluent", "debug", "NUMBER", "in", "TAG", "fix", "NUMBER", "bin", "fluent", "debug", "p", "Usage", "fluent", "debug", "options", "h", "host", "HOST", "fluent", "host", "default", "NUMBER", "p", "port", "PORT", "debug_agent", "tcp", "port", "default", "NUMBER", "u", "unix", "PATH", "use", "unix", "socket", "instead", "of", "tcp", "error", "miss", "argument", "p", "hi", "i", "use", "fluentd", "to", "collect", "my", "weblog", "and", "write", "file", "TAG", "type", "forward", "TAG", "TAG", "type", "file", "path", "tmp", "a", "TAG", "i", "want", "log", "write", "to", "tmp", "a", "but", "it", "generate", "some", "log", "a", "NUMBER", "_", "NUMBER", "log", "a", "NUMBER", "_", "NUMBER", "log", "a", "NUMBER", "_", "NUMBER", "log", "i", "only", "want", "to", "a", "NUMBER", "log", "it", "s", "not", "merge", "not", "buffer", "limit", "my", "mean", "be", "out", "file", "NUMBER", "if", "only", "set", "buffer_chunk_limit", "and", "out", "file", "be", "not", "flush", "NUMBER", "and", "i", "can", "t", "get", "my", "log", "on", "time", "so", "it", "can", "t", "compression", "I", "submitted", "a", "patch", "for", "this", "problem", "cloud", "sec", "LINK", "Hello", "I", "ve", "already", "posted", "this", "info", "in", "Fluentd", "Google", "Group", "LINK", "en", "topic", "fluentd", "z", "NUMBER", "XvkiSgogk", "I", "think", "this", "be", "a", "bug", "so", "I", "post", "it", "here", "too", "NUMBER", "I", "m", "currently", "test", "Fluentd", "elb_log", "plugin", "to", "import", "logs", "from", "Amazon", "S", "NUMBER", "bucket", "for", "Amazon", "ELB", "into", "Elasticsearch", "NUMBER", "I", "have", "configured", "the", "whole", "chain", "but", "finally", "notice", "that", "significant", "portion", "of", "log", "records", "NUMBER", "get", "lost", "in", "transition", "NUMBER", "I", "find", "some", "relevant", "error", "message", "in", "the", "Elastic", "s", "log", "then", "decided", "to", "disconnect", "Elasticsearch", "in", "order", "to", "debug", "the", "rest", "of", "chain", "NUMBER", "Here", "be", "some", "of", "my", "system", "and", "config", "details", "root", "logserver", "var", "log", "td", "agent", "dpkg", "l", "grep", "td", "agent", "cat", "etc", "issue", "ii", "td", "agent", "NUMBER", "NUMBER", "A", "data", "collector", "agent", "for", "Treasure", "Data", "Ubuntu", "NUMBER", "LTS", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "TAG", "type", "elb_log", "access_key_id", "XXXXXXXXXXXXXX", "secret_access_key", "NUMBER", "wertzzzzzzzzzzz", "NUMBER", "aaaaa", "s", "NUMBER", "_endpoint", "s", "NUMBER", "amazonaws", "NUMBER", "com", "s", "NUMBER", "_bucketname", "XXXXXXXXXXXX", "logs", "s", "NUMBER", "_prefix", "logs", "timestamp_file", "tmp", "elb_last_at", "NUMBER", "dat", "refresh_interval", "NUMBER", "TAG", "TAG", "type", "elasticsearch", "type_name", "access_log", "index_name", "elb_idx", "logstash_format", "true", "logstash_prefix", "adserving", "include_tag_key", "true", "tag_key", "log_name", "type", "copy", "TAG", "type", "file", "path", "var", "log", "td", "agent", "td", "elb", "out", "NUMBER", "log", "TAG", "TAG", "When", "I", "check", "through", "root", "logserver", "var", "log", "td", "agent", "pwd", "ls", "al", "td", "elb", "var", "log", "td", "agent", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "td", "elb", "out", "NUMBER", "log", "NUMBER", "b", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "f", "NUMBER", "d", "NUMBER", "c", "NUMBER", "I", "see", "some", "ELB", "log", "JSON", "records", "have", "time", "field", "broken", "which", "confuses", "the", "Elasticsearch", "NUMBER", "i", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "elb", "NUMBER", "access", "account_id", "NUMBER", "region", "us", "east", "NUMBER", "logfile_date", "NUMBER", "NUMBER", "NUMBER", "logfile_elb_name", "qqq", "www", "eeee", "com", "elb_ip_address", "NUMBER", "logfile_hash", "NUMBER", "z", "NUMBER", "rty", "NUMBER", "a", "time", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "elb", "qqq", "www", "eeee", "com", "client", "NUMBER", "client_port", "NUMBER", "backend", "NUMBER", "backend_port", "NUMBER", "request_processing_time", "NUMBER", "e", "NUMBER", "backend_processing_time", "NUMBER", "response_processing_time", "NUMBER", "e", "NUMBER", "elb_status_code", "NUMBER", "backend_status_code", "NUMBER", "received_bytes", "NUMBER", "sent_bytes", "NUMBER", "request_method", "GET", "request_uri", "LINK", "NUMBER", "ref", "NUMBER", "q", "NUMBER", "BBindassmp", "NUMBER", "com", "NUMBER", "D", "NUMBER", "Hum", "Bhool", "Gaye", "Har", "Baat", "NUMBER", "BBindassmp", "NUMBER", "com", "NUMBER", "D", "request_protocol", "HTTP", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "elb", "NUMBER", "access", "account_id", "NUMBER", "region", "us", "east", "NUMBER", "logfile_date", "NUMBER", "NUMBER", "NUMBER", "logfile_elb_name", "qqq", "www", "eeee", "com", "elb_ip_address", "NUMBER", "logfile_hash", "NUMBER", "z", "NUMBER", "rty", "NUMBER", "a", "time", "NUMBER", "elb", "qqq", "www", "eeee", "com", "client", "NUMBER", "client_port", "NUMBER", "backend", "NUMBER", "backend_port", "NUMBER", "request_processing_time", "NUMBER", "e", "NUMBER", "backend_processing_time", "NUMBER", "response_processing_time", "NUMBER", "e", "NUMBER", "elb_status_code", "NUMBER", "backend_status_code", "NUMBER", "received_bytes", "NUMBER", "sent_bytes", "NUMBER", "request_method", "GET", "request_uri", "LINK", "_ad", "display", "ref", "NUMBER", "q", "KEYWORD", "smart_ad_id", "NUMBER", "request_protocol", "HTTP", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "elb", "NUMBER", "access", "account_id", "NUMBER", "region", "us", "east", "NUMBER", "logfile_date", "NUMBER", "NUMBER", "NUMBER", "logfile_elb_name", "qqq", "www", "eeee", "com", "elb_ip_address", "NUMBER", "logfile_hash", "NUMBER", "z", "NUMBER", "rty", "NUMBER", "a", "time", "NUMBER", "NUMBER", "elb", "qqq", "www", "eeee", "com", "client", "NUMBER", "client_port", "NUMBER", "backend", "NUMBER", "backend_port", "NUMBER", "request_processing_time", "NUMBER", "e", "NUMBER", "backend_processing_time", "NUMBER", "response_processing_time", "NUMBER", "e", "NUMBER", "elb_status_code", "NUMBER", "backend_status_code", "NUMBER", "received_bytes", "NUMBER", "sent_bytes", "NUMBER", "request_method", "GET", "request_uri", "LINK", "_ad", "display", "ref", "NUMBER", "q", "KEYWORD", "smart_ad_id", "NUMBER", "request_protocol", "HTTP", "NUMBER", "as", "you", "see", "the", "time", "field", "from", "time", "to", "time", "receives", "a", "random", "part", "of", "the", "time", "stamp", "of", "original", "ELB", "log", "entry", "which", "always", "looks", "like", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "Z", "NUMBER", "Then", "I", "went", "to", "elb", "log", "plugin", "code", "to", "inspect", "it", "LINK", "plugin", "elb", "log", "blob", "master", "lib", "fluent", "plugin", "in_elb_log", "NUMBER", "rb", "I", "m", "SysAdmin", "with", "some", "scripting", "experience", "not", "Ruby", "programmer", "NUMBER", "Still", "the", "plugin", "code", "doesn", "t", "seem", "to", "look", "complicated", "it", "be", "pretty", "clean", "and", "well", "write", "so", "I", "ve", "checked", "some", "relevant", "parts", "of", "it", "line", "NUMBER", "ACCESSLOG_REGEXP", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "against", "the", "original", "ELB", "log", "entry", "the", "one", "which", "resulted", "the", "broken", "time", "field", "output", "NUMBER", "The", "RegExp", "seem", "to", "work", "fine", "NUMBER", "Here", "be", "line", "NUMBER", "responsible", "for", "modification", "record", "time", "line_match", "time", "NUMBER", "gsub", "Z", "NUMBER", "it", "doesn", "t", "seem", "to", "represent", "any", "problem", "NUMBER", "Then", "the", "record", "gets", "sent", "to", "Fluentd", "line", "NUMBER", "Fluent", "Engine", "NUMBER", "emit", "elb", "NUMBER", "access", "Fluent", "Engine", "NUMBER", "now", "record_common", "NUMBER", "merge", "record", "from", "this", "point", "I", "m", "unable", "to", "trace", "what", "s", "happening", "next", "NUMBER", "I", "would", "highly", "appreciate", "if", "you", "could", "shed", "more", "light", "on", "the", "mention", "problem", "NUMBER", "Please", "fix", "this", "bug", "or", "help", "me", "to", "find", "a", "solution", "NUMBER", "Looking", "for", "your", "feedback", "NUMBER", "Thank", "you", "in", "advance", "NUMBER", "Hi", "yes", "I", "did", "to", "investigate", "I", "was", "use", "the", "following", "TAG", "type", "copy", "TAG", "type", "file", "path", "var", "log", "td", "agent", "td", "elb", "out", "NUMBER", "log", "TAG", "TAG", "Today", "I", "have", "also", "compared", "the", "size", "of", "the", "above", "mention", "td", "elb", "out", "NUMBER", "log", "output", "file", "against", "corresponding", "Amazon", "ELB", "text", "log", "file", "and", "It", "looks", "like", "over", "NUMBER", "of", "the", "input", "data", "was", "magically", "lost", "in", "processing", "NUMBER", "I", "ll", "also", "contact", "the", "elb", "log", "plugin", "author", "with", "this", "problem", "NUMBER", "Thanks", "for", "feedback", "NUMBER", "sorry", "I", "don", "t", "know", "why", "do", "it", "format", "such", "a", "weird", "way", "here", "on", "GitHub", "don", "t", "know", "how", "to", "fix", "bypass", "this", "problem", "NUMBER", "syntax", "looks", "nice", "for", "me", "but", "I", "do", "not", "think", "support", "include", "in", "three", "ways", "include", "and", "TAG", "and", "include", "be", "good", "idea", "NUMBER", "Should", "remove", "TAG", "syntax", "Do", "we", "really", "want", "to", "keep", "backward", "compatibility", "for", "include", "Only", "include", "be", "enough", "to", "me", "NUMBER", "The", "compatibility", "be", "already", "broken", "and", "I", "want", "to", "have", "simple", "and", "clean", "syntax", "for", "v", "NUMBER", "NUMBER", "for", "both", "fo", "include", "and", "include", "without", "TAG", "OK", "NUMBER", "NUMBER", "for", "include", "and", "include", "with", "warning", "NUMBER", "OS", "Centos", "NUMBER", "version", "td", "agent", "NUMBER", "NUMBER", "x", "NUMBER", "_", "NUMBER", "write", "normal", "directory", "be", "ok", "but", "when", "i", "write", "to", "glusterfs", "directory", "find", "error", "configure", "TAG", "type", "forward", "TAG", "TAG", "type", "file", "path", "glusterfs", "newlog_system", "weblog", "time_slice_format", "Y", "m", "d", "time_slice_wait", "NUMBER", "m", "time_format", "Y", "m", "d", "H", "M", "S", "compress", "gzip", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "forward", "error", "error", "TAG", "error_class", "Errno", "EINVAL", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "buf_file", "NUMBER", "rb", "NUMBER", "in", "rename", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "buf_file", "NUMBER", "rb", "NUMBER", "in", "mv", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "buf_file", "NUMBER", "rb", "NUMBER", "in", "enqueue", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "block", "NUMBER", "levels", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "NUMBER", "monitor", "NUMBER", "rb", "NUMBER", "in", "mon_synchronize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "block", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "NUMBER", "monitor", "NUMBER", "rb", "NUMBER", "in", "mon_synchronize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "block", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "feed_each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_forward", "NUMBER", "rb", "NUMBER", "in", "on_message", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_forward", "NUMBER", "rb", "NUMBER", "in", "feed_each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_forward", "NUMBER", "rb", "NUMBER", "in", "on_read_msgpack", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_forward", "NUMBER", "rb", "NUMBER", "in", "run", "C", "SOGA", "I", "will", "try", "to", "slove", "it", "Historically", "GlusterFS", "sometimes", "cannot", "get", "along", "with", "Apache", "NUMBER", "At", "first", "I", "would", "like", "to", "know", "be", "your", "construction", "NUMBER", "Which", "version", "of", "GlusterFS", "and", "Apache", "be", "you", "use", "And", "the", "NUMBER", "could", "you", "tell", "me", "your", "purpose", "of", "use", "GlusterFS", "storing", "only", "access", "NUMBER", "log", "or", "storing", "not", "only", "access", "NUMBER", "log", "but", "also", "your", "web", "contents", "first", "NUMBER", "be", "be", "a", "fluentd", "server", "reviced", "agent", "weblog", "NUMBER", "and", "writed", "to", "glusterfs", "newlog_system", "directory", "NUMBER", "NUMBER", "and", "use", "glusterfs", "version", "NUMBER", "NUMBER", "not", "only", "access", "NUMBER", "log", "NUMBER", "newlog_system", "be", "empty", "kugou_data", "and", "wdj_data", "be", "not", "empty", "root", "localhost", "df", "h", "Filesystem", "Size", "Used", "Avail", "Use", "Mounted", "on", "dev", "sda", "NUMBER", "NUMBER", "G", "NUMBER", "G", "NUMBER", "G", "NUMBER", "tmpfs", "NUMBER", "G", "NUMBER", "NUMBER", "G", "NUMBER", "dev", "shm", "dev", "sda", "NUMBER", "NUMBER", "M", "NUMBER", "M", "NUMBER", "M", "NUMBER", "boot", "dev", "sda", "NUMBER", "NUMBER", "G", "NUMBER", "M", "NUMBER", "G", "NUMBER", "cache", "logs", "dev", "mapper", "flashcache_dev_md", "NUMBER", "NUMBER", "T", "NUMBER", "T", "NUMBER", "T", "NUMBER", "cache", "cache", "NUMBER", "storage", "NUMBER", "T", "NUMBER", "G", "NUMBER", "T", "NUMBER", "glusterfs", "root", "loaclhost", "ls", "glusterfs", "kugou_data", "newlog_system", "wdj_data", "root", "localhost", "ls", "glusterfs", "newlog_system", "Got", "it", "NUMBER", "I", "concern", "that", "GlusterFS", "FUSE", "cannot", "handle", "the", "system", "calls", "of", "fluentd", "buffered", "output", "such", "as", "mmap", "I", "don", "t", "know", "if", "fluentd", "uses", "mmap", "or", "not", "NUMBER", "I", "will", "try", "it", "on", "my", "lab", "NUMBER", "Wait", "a", "while", "NUMBER", "It", "looks", "File", "NUMBER", "rename", "throw", "Errno", "EINVAL", "NUMBER", "Could", "you", "try", "to", "rename", "via", "command", "line", "ruby", "e", "File", "NUMBER", "rename", "glusterfs", "newlog_system", "weblog", "NUMBER", "b", "NUMBER", "fa", "NUMBER", "b", "NUMBER", "b", "NUMBER", "ba", "NUMBER", "glusterfs", "newlog_system", "weblog", "NUMBER", "q", "NUMBER", "fa", "NUMBER", "b", "NUMBER", "b", "NUMBER", "ba", "NUMBER", "i", "rm", "it", "now", "try", "two", "count", "NUMBER", "configure", "be", "same", "so", "on", "root", "localhost", "ls", "la", "glusterfs", "newlog_system", "total", "NUMBER", "drwxr", "xr", "x", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "drwxr", "xr", "x", "NUMBER", "root", "root", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "rw", "rw", "rw", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "weblog", "NUMBER", "_", "NUMBER", "log", "NUMBER", "gz", "rw", "rw", "rw", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "May", "NUMBER", "NUMBER", "NUMBER", "weblog", "NUMBER", "_", "NUMBER", "log", "NUMBER", "gz", "rw", "rw", "rw", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "May", "NUMBER", "NUMBER", "weblog", "NUMBER", "_", "NUMBER", "log", "NUMBER", "gz", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "May", "NUMBER", "NUMBER", "weblog", "NUMBER", "b", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "cf", "NUMBER", "f", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "May", "NUMBER", "NUMBER", "weblog", "NUMBER", "q", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "c", "NUMBER", "d", "NUMBER", "f", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "temporarily", "fail", "to", "flush", "the", "buffer", "NUMBER", "next_retry", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error_class", "Errno", "ENOENT", "error", "No", "such", "file", "or", "directory", "glusterfs", "newlog_system", "weblog", "NUMBER", "_", "NUMBER", "log", "NUMBER", "gz", "instance", "NUMBER", "I", "m", "test", "frequent", "GET", "request", "but", "I", "cannot", "see", "the", "error", "log", "NUMBER", "It", "do", "not", "seem", "that", "this", "problem", "always", "arises", "NUMBER", "I", "will", "wait", "for", "get", "the", "logs", "of", "td", "agent", "for", "a", "while", "NUMBER", "As", "yyamano", "said", "your", "td", "agent", "seem", "to", "fail", "rename", "glusterfs", "newlog_system", "weblog", "NUMBER", "b", "NUMBER", "fa", "NUMBER", "b", "NUMBER", "b", "NUMBER", "ba", "NUMBER", "NUMBER", "I", "guess", "it", "was", "because", "the", "file", "was", "not", "write", "on", "the", "GlusterFS", "volume", "completely", "since", "it", "handles", "file", "asynchronously", "NUMBER", "If", "you", "turn", "off", "the", "feature", "of", "GlusterFS", "try", "following", "settings", "NUMBER", "gluster", "volume", "set", "TAG", "performance", "NUMBER", "write", "behind", "off", "gluster", "volume", "set", "TAG", "performance", "NUMBER", "open", "behind", "off", "gluster", "volume", "set", "TAG", "performance", "NUMBER", "rict", "write", "ordering", "on", "gluster", "volume", "set", "TAG", "performance", "NUMBER", "lazy", "open", "no", "See", "gluster", "volume", "set", "help", "if", "you", "d", "like", "to", "see", "other", "modifications", "NUMBER", "I", "could", "not", "reproduce", "it", "in", "a", "day", "under", "frequent", "http", "GET", "request", "NUMBER", "K", "request", "in", "a", "sec", "td", "agent", "creates", "archives", "of", "access_log", "every", "NUMBER", "minute", "and", "heavy", "background", "loads", "NUMBER", "KiB", "file", "be", "created", "and", "read", "continuously", "with", "cheap", "machines", "BayTrail", "D", "and", "HDD", "not", "SSD", "NUMBER", "My", "GlusterFS", "be", "NUMBER", "not", "NUMBER", "x", "with", "no", "configulation", "so", "I", "recommend", "NUMBER", "if", "you", "reproduce", "the", "same", "problem", "NUMBER", "I", "will", "keep", "my", "test", "as", "long", "as", "I", "can", "NUMBER", "I", "m", "a", "bit", "intersted", "in", "this", "issue", "NUMBER", "Can", "you", "share", "more", "about", "the", "setup", "of", "Gluster", "its", "size", "and", "in", "case", "it", "be", "use", "replicas", "how", "many", "of", "them", "How", "many", "Gluster", "nodes", "be", "you", "use", "and", "how", "many", "records", "per", "seconds", "be", "be", "write", "to", "the", "file", "After", "having", "the", "error", "do", "eventually", "recover", "after", "backing", "off", "and", "retrying", "or", "do", "you", "fix", "it", "manually", "Thanks", "in", "advance", "I", "continue", "to", "look", "at", "on", "Monday", "to", "the", "company", "keithseahus", "modify", "configure", "gluster", "volume", "set", "TAG", "performance", "NUMBER", "write", "behind", "off", "gluster", "volume", "set", "TAG", "performance", "NUMBER", "open", "behind", "off", "gluster", "volume", "set", "TAG", "performance", "NUMBER", "rict", "write", "ordering", "on", "gluster", "volume", "set", "TAG", "performance", "NUMBER", "lazy", "open", "no", "today", "restart", "fluentd", "write", "to", "glusterfs", "error", "be", "later", "TAG", "type", "forward", "TAG", "TAG", "type", "file", "path", "glusterfs", "newlog_system", "weblog", "time_slice_format", "Y", "m", "d", "time_slice_wait", "NUMBER", "m", "time_format", "Y", "m", "d", "H", "M", "S", "compress", "gzip", "buffer_type", "file", "buffer_path", "var", "log", "td", "agent", "myapp", "NUMBER", "NUMBER", "buffer", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "apache", "NUMBER", "access", "type", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "listening", "fluent", "socket", "on", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "temporarily", "fail", "to", "flush", "the", "buffer", "NUMBER", "next_retry", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error_class", "Errno", "ENOENT", "error", "No", "such", "file", "or", "directory", "glusterfs", "newlog_system", "weblog", "NUMBER", "_", "NUMBER", "log", "NUMBER", "gz", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_file", "NUMBER", "rb", "NUMBER", "in", "open", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_file", "NUMBER", "rb", "NUMBER", "in", "write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "write_chunk", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "pop", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "try_flush", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "temporarily", "fail", "to", "flush", "the", "buffer", "NUMBER", "next_retry", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error_class", "Errno", "ENOENT", "error", "No", "such", "file", "or", "directory", "glusterfs", "newlog_system", "weblog", "NUMBER", "_", "NUMBER", "log", "NUMBER", "gz", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "Thank", "you", "all", "for", "your", "help", "salute", "I", "find", "secondary_limit", "be", "not", "defined", "and", "incremented", "in", "buffered_output", "NUMBER", "rb", "by", "code", "inspection", "NUMBER", "It", "seems", "a", "bug", "NUMBER", "pwd", "Users", "yyamano", "work", "fluentd", "fluentd", "lib", "grep", "R", "secondary_limit", "NUMBER", "NUMBER", "fluentd", "plugin", "buffered_output", "NUMBER", "rb", "elsif", "retry_count", "TAG", "rspec", "NUMBER", "This", "change", "be", "breaking", "the", "backward", "compatibility", "and", "lots", "of", "plugins", "be", "get", "affects", "NUMBER", "For", "example", "fluent", "plugin", "mongo", "and", "fluent", "plugin", "elasticsearch", "also", "fail", "in", "test", "NUMBER", "This", "issue", "be", "about", "test", "but", "if", "we", "decide", "to", "break", "the", "compatibility", "we", "had", "to", "announce", "about", "this", "as", "we", "did", "it", "for", "log", "instance", "method", "before", "NUMBER", "We", "may", "also", "need", "to", "write", "a", "documentation", "page", "to", "explain", "how", "to", "write", "test", "plugins", "as", "log", "must", "be", "defined", "NUMBER", "NUMBER", "I", "change", "to", "use", "Fluent", "Test", "DummyLogDevice", "NUMBER", "new", "but", "keep", "the", "log", "level", "for", "the", "backward", "compatibility", "default", "uses", "LEVEL_TRACE", "NUMBER", "I", "defined", "delegations", "out", "and", "out", "for", "PluginLogger", "NUMBER", "This", "be", "because", "there", "be", "a", "behavioral", "difference", "about", "log", "between", "runtime", "and", "test", "cause", "by", "the", "change", "at", "LINK", "diff", "NUMBER", "d", "NUMBER", "f", "NUMBER", "fd", "NUMBER", "e", "NUMBER", "b", "NUMBER", "c", "NUMBER", "eR", "NUMBER", "In", "the", "case", "of", "runtime", "log", "be", "an", "instance", "of", "Fluent", "Logger", "first", "actually", "log", "and", "log", "be", "switched", "to", "be", "an", "instance", "of", "PluginLogger", "if", "log_level", "be", "configured", "NUMBER", "However", "in", "the", "case", "of", "test", "log", "be", "an", "instance", "of", "TestLogger", "which", "be", "a", "subclass", "of", "PluginLogger", "from", "first", "NUMBER", "If", "we", "write", "test", "which", "expect", "that", "log", "responds", "to", "out", "and", "out", "as", "before", "test", "fail", "without", "delegations", "NUMBER", "repeatedly", "Yes", "see", "LINK", "ci", "NUMBER", "org", "sonots", "fluentd", "plugin", "ci", "build", "NUMBER", "In", "the", "file", "containing", "CRLF", "below", "code", "gets", "unexpect", "results", "NUMBER", "ruby", "file", "NUMBER", "each_line", "line", "p", "pos", "file", "NUMBER", "seek", "bytesize", "line", "NUMBER", "bytesize", "pos", "NUMBER", "bytesize", "NUMBER", "expected", "results", "pos", "NUMBER", "bytesize", "NUMBER", "In", "the", "file", "containing", "only", "LF", "upper", "code", "gets", "expected", "results", "NUMBER", "So", "I", "remove", "the", "code", "for", "computing", "seek", "from", "file", "NUMBER", "pos", "and", "line", "NUMBER", "bytesize", "NUMBER", "File", "BINARY", "gets", "expected", "results", "NUMBER", "File", "RDWR", "File", "CREAT", "gets", "unexpect", "NUMBER", "ruby", "p", "File", "NUMBER", "open", "File", "BINARY", "file", "File", "NUMBER", "open", "test", "NUMBER", "txt", "File", "BINARY", "file", "NUMBER", "each_line", "line", "p", "pos", "file", "NUMBER", "pos", "size", "line", "NUMBER", "bytesize", "file", "NUMBER", "close", "p", "File", "NUMBER", "open", "File", "RDWR", "File", "CREAT", "file", "File", "NUMBER", "open", "test", "NUMBER", "txt", "File", "RDWR", "File", "CREAT", "file", "NUMBER", "each_line", "line", "p", "pos", "file", "NUMBER", "pos", "size", "line", "NUMBER", "bytesize", "file", "NUMBER", "close", "text", "NUMBER", "txt", "NUMBER", "CRLF", "NUMBER", "CRLF", "NUMBER", "results", "File", "NUMBER", "open", "File", "BINARY", "pos", "NUMBER", "size", "NUMBER", "pos", "NUMBER", "size", "NUMBER", "pos", "NUMBER", "size", "NUMBER", "File", "NUMBER", "open", "File", "RDWR", "File", "CREAT", "pos", "NUMBER", "size", "NUMBER", "pos", "NUMBER", "size", "NUMBER", "pos", "NUMBER", "size", "NUMBER", "via", "LINK", "doc", "NUMBER", "org", "core", "NUMBER", "IO", "NUMBER", "html", "method", "c", "new", "label", "IO", "Open", "Mode", "b", "Binary", "file", "mode", "Suppresses", "EOL", "TAG", "CRLF", "conversion", "on", "Windows", "NUMBER", "And", "sets", "external", "encoding", "to", "ASCII", "NUMBER", "BIT", "unless", "explicitly", "specified", "NUMBER", "So", "specify", "File", "BINARY", "may", "solve", "this", "problem", "NUMBER", "LGTM", "NUMBER", "It", "works", "as", "expected", "NUMBER", "thanks", "do", "star", "A", "key", "name", "of", "chunk", "can", "be", "specified", "in", "NUMBER", "argument", "of", "BufferedOutput", "emit", "in", "BufferedOutput", "class", "but", "no", "one", "use", "this", "argument", "and", "no", "hook", "point", "for", "setting", "the", "value", "NUMBER", "It", "be", "good", "to", "be", "able", "to", "configure", "it", "from", "plugins", "like", "format", "NUMBER", "If", "this", "feature", "be", "available", "plugins", "can", "determine", "how", "to", "handle", "chunks", "depending", "on", "the", "chunk", "key", "NUMBER", "For", "instance", "destination", "server", "be", "determined", "by", "the", "tag", "NUMBER", "I", "know", "the", "example", "can", "be", "achieved", "by", "use", "fluent", "plugin", "forest", "NUMBER", "Though", "I", "think", "it", "be", "easy", "to", "provide", "a", "plugin", "with", "build", "in", "features", "like", "fluent", "plugin", "hash", "forward", "NUMBER", "Actually", "I", "want", "to", "set", "the", "key", "name", "from", "_log", "data_", "but", "it", "be", "inefficient", "to", "call", "chunk_key", "for", "each", "message", "just", "like", "format", "NUMBER", "For", "that", "purpose", "I", "think", "Mixin", "approach", "be", "better", "and", "allow", "format", "to", "also", "return", "a", "key", "name", "of", "chunk", "NUMBER", "How", "do", "you", "think", "about", "it", "I", "read", "fluent", "plugin", "mongo", "implementation", "LINK", "plugin", "mongo", "blob", "f", "NUMBER", "a", "NUMBER", "dcfdf", "NUMBER", "a", "NUMBER", "b", "NUMBER", "fd", "NUMBER", "f", "NUMBER", "fa", "NUMBER", "b", "NUMBER", "a", "NUMBER", "b", "NUMBER", "f", "NUMBER", "lib", "fluent", "plugin", "out_mongo", "NUMBER", "rb", "L", "NUMBER", "L", "NUMBER", "so", "it", "s", "enough", "for", "the", "purpose", "definitely", "NUMBER", "I", "ll", "close", "this", "PR", "thanks", "NUMBER", "root", "localhost", "tmp", "cat", "NUMBER", "conf", "TAG", "type", "tail", "path", "logs", "access", "NUMBER", "log", "tag", "apache", "NUMBER", "access", "pos_file", "var", "log", "td", "agent", "httpd", "access", "NUMBER", "log", "NUMBER", "pos", "time_format", "d", "b", "Y", "H", "M", "S", "z", "format", "TAG", "TAG", "TAG", "TAG", "TAG", "S", "TAG", "S", "TAG", "TAG", "TAG", "TAG", "format", "nginx", "TAG", "TAG", "type", "forward", "host", "NUMBER", "TAG", "root", "localhost", "tmp", "usr", "lib", "NUMBER", "fluent", "ruby", "bin", "fluentd", "c", "NUMBER", "conf", "use", "v", "NUMBER", "config", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "config", "error", "file", "NUMBER", "conf", "error", "unexpect", "back", "slash", "escape", "character", "S", "at", "NUMBER", "conf", "line", "NUMBER", "NUMBER", "n", "NUMBER", "time_format", "d", "b", "Y", "H", "M", "S", "z", "n", "NUMBER", "format", "TAG", "TAG", "TAG", "TAG", "TAG", "S", "TAG", "S", "TAG", "TAG", "TAG", "TAG", "n", "n", "n", "NUMBER", "format", "nginx", "n", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "process", "finished", "code", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "process", "died", "within", "NUMBER", "second", "NUMBER", "exit", "NUMBER", "unexpect", "back", "slash", "escape", "character", "S", "at", "NUMBER", "conf", "line", "NUMBER", "NUMBER", "can", "you", "help", "me", "I", "haven", "t", "find", "the", "problem", "studying", "the", "document", "format", "TAG", "TAG", "TAG", "TAG", "TAG", "S", "TAG", "S", "TAG", "TAG", "TAG", "TAG", "TAG", "i", "writed", "instead", "of", "and", "still", "error", "format", "TAG", "TAG", "TAG", "TAG", "TAG", "S", "TAG", "S", "TAG", "TAG", "TAG", "TAG", "still", "same", "error", "unexpect", "back", "slash", "escape", "character", "S", "at", "NUMBER", "conf", "line", "NUMBER", "NUMBER", "sorry", "i", "test", "diffrent", "conf", "file", "NUMBER", "i", "sloved", "it", "thx", "for", "you", "help", "NUMBER", "NUMBER", "for", "the", "idea", "NUMBER", "for", "the", "naming", "Registry", "sounds", "confusing", "to", "me", "and", "for", "Windows", "folks", "it", "means", "something", "completely", "different", "NUMBER", "repeatedly", "hah", "NUMBER", "my", "ignorance", "NUMBER", "for", "idea", "NUMBER", "My", "fluent", "mixin", "plaintextformatter", "be", "doing", "like", "you", "mean", "and", "I", "ll", "fix", "it", "to", "use", "TextFormatter", "after", "this", "issue", "solve", "NUMBER", "LINK", "mixin", "plaintextformatter", "All", "test", "be", "file", "on", "travis", "ci", "NUMBER", "Please", "check", "NUMBER", "Output", "plugin", "should", "be", "able", "to", "overwrite", "buffer", "chunk", "key", "to", "determine", "forwarding", "host", "by", "chunk", "key", "in", "out_forward", "become", "buffer", "file", "human", "readable", "in", "out_file", "NUMBER", "Does", "DummyLogDevice", "suppress", "the", "plugin", "s", "log", "right", "Maybe", "DummyLogDevice", "seems", "to", "not", "good", "name", "but", "I", "can", "t", "think", "of", "the", "good", "name", "NUMBER", "So", "merge", "it", "for", "now", "NUMBER", "Current", "out_stdout", "outputs", "message", "as", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "test", "test", "where", "the", "time", "expresses", "the", "time", "parameter", "of", "message", "i", "NUMBER", "e", "NUMBER", "the", "time", "when", "the", "message", "be", "created", "or", "the", "time", "write", "in", "application", "logs", "NUMBER", "current_time", "option", "enable", "to", "output", "the", "current", "time", "of", "_logging_", "which", "looks", "like", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "test", "test", "so", "that", "we", "can", "tell", "the", "latency", "between", "receiving", "logging", "and", "sending", "creating", "of", "message", "NUMBER", "PS", "NUMBER", "I", "be", "still", "wondering", "the", "log", "format", "and", "the", "option", "name", "NUMBER", "The", "idea", "sounds", "reasonable", "but", "NUMBER", "for", "the", "current", "change", "NUMBER", "If", "the", "log", "contains", "multiple", "times", "subsequently", "it", "s", "really", "confusing", "as", "a", "user", "NUMBER", "I", "have", "never", "seen", "such", "logs", "before", "NUMBER", "Could", "you", "work", "on", "proposing", "some", "formats", "which", "be", "more", "obvious", "And", "do", "you", "think", "we", "can", "break", "the", "backword", "compatibility", "of", "log", "format", "without", "add", "the", "option", "cc", "repeatedly", "frsyuki", "tagomoris", "without", "add", "option", "I", "do", "not", "think", "we", "can", "break", "the", "backward", "compatibility", "because", "someone", "would", "be", "use", "the", "stdout", "logs", "for", "system", "monitoring", "already", "NUMBER", "One", "idea", "How", "about", "LTSV", "format", "like", "current_time", "xxx", "tab", "time", "xxxx", "tab", "tag", "xxxx", "tab", "record", "xxxx", "but", "we", "may", "need", "another", "option", "to", "specify", "the", "format", "NUMBER", "ALL", "Any", "idea", "for", "a", "nice", "format", "Yes", "I", "release", "as", "LINK", "plugin", "stdout_ex", "for", "now", "but", "I", "be", "still", "wondering", "how", "to", "merge", "it", "into", "fluentd", "without", "breaking", "the", "backward", "compatibility", "NUMBER", "repeatedly", "kzk", "As", "a", "final", "thought", "I", "renamed", "the", "option", "to", "log_header", "NUMBER", "I", "thought", "an", "option", "be", "mandatory", "to", "keep", "backward", "compatibility", "but", "I", "think", "this", "option", "can", "be", "default", "true", "on", "v", "NUMBER", "log_header", "true", "uses", "log", "NUMBER", "info", "so", "it", "outputs", "the", "current", "logging", "time", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "test", "test", "log_header", "false", "uses", "log", "NUMBER", "write", "original", "behavior", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "test", "test", "Any", "opinions", "repeatedly", "ping", "It", "seems", "better", "to", "use", "SetTimeKeyMixin", "rather", "than", "to", "change", "output", "format", "to", "show", "original", "time", "of", "event", "NUMBER", "If", "we", "do", "so", "current_time", "option", "simply", "do", "print", "current", "time", "on", "time", "field", "NUMBER", "I", "feel", "all", "logs", "of", "fluentd", "should", "keep", "the", "same", "format", "as", "much", "as", "possible", "as", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "blah", "blah", "Currently", "only", "out_stdout", "outputs", "in", "the", "different", "manner", "NUMBER", "And", "I", "think", "log", "should", "always", "output", "the", "logging", "time", "NUMBER", "It", "be", "not", "special", "thing", "NUMBER", "Idea", "At", "the", "moment", "in_http", "LINK", "_http", "support", "msgpack", "and", "JSON", "formatted", "data", "NUMBER", "What", "about", "support", "arbitrary", "text", "format", "with", "user", "defined", "format", "I", "have", "something", "like", "this", "in", "mind", "TAG", "type", "in_http", "port", "NUMBER", "field_name", "foobar", "format", "TAG", "d", "TAG", "w", "TAG", "NUMBER", "curl", "X", "POST", "d", "foobar", "NUMBER", "awesome", "fluentd", "NUMBER", "example", "NUMBER", "com", "test", "this", "would", "be", "parsed", "as", "field", "NUMBER", "field_", "NUMBER", "awesome", "Background", "One", "user", "be", "considering", "to", "send", "data", "from", "embedded", "devices", "to", "Fluentd", "via", "HTTP", "NUMBER", "However", "these", "devices", "aren", "t", "very", "programmable", "and", "can", "t", "output", "data", "in", "JSON", "or", "msgpack", "NUMBER", "This", "idea", "be", "to", "allow", "these", "users", "to", "send", "data", "to", "Fluentd", "NUMBER", "This", "might", "be", "a", "good", "feature", "to", "make", "Fluentd", "a", "useful", "tool", "for", "IoT", "NUMBER", "Only", "one", "line", "or", "need", "multi", "line", "support", "like", "CSV", "file", "NUMBER", "It", "s", "interesting", "to", "send", "data", "from", "embedded", "devices", "since", "I", "was", "previously", "embedded", "system", "engineer", "NUMBER", "If", "we", "support", "multiple", "lines", "msgpack", "and", "json", "also", "should", "support", "array", "types", "NUMBER", "repeatedly", "I", "like", "the", "first", "one", "better", "NUMBER", "If", "each", "HTTP", "request", "needs", "to", "specify", "a", "format", "this", "feature", "would", "be", "cumbersome", "to", "use", "NUMBER", "Also", "I", "can", "easily", "imagine", "the", "programmers", "on", "the", "application", "side", "forgetting", "to", "specify", "the", "format", "field", "in", "their", "logging", "code", "NUMBER", "The", "other", "reason", "be", "even", "custom", "formatted", "log", "message", "don", "t", "change", "their", "formats", "very", "often", "NUMBER", "If", "a", "message", "be", "get", "rejected", "chances", "be", "good", "it", "s", "a", "problem", "on", "the", "sender", "s", "side", "NUMBER", "re", "multi", "line", "I", "don", "t", "think", "the", "first", "version", "needs", "it", "NUMBER", "repeatedly", "that", "would", "be", "my", "vote", "NUMBER", "If", "we", "be", "going", "to", "support", "format", "csv", "tsv", "then", "we", "need", "something", "like", "header", "for", "parameter", "i", "NUMBER", "e", "NUMBER", "TAG", "type", "http", "format", "csv", "header", "user_id", "action", "time", "some_field", "TAG", "This", "example", "would", "reject", "the", "message", "unless", "it", "be", "NUMBER", "a", "valid", "CSV", "NUMBER", "with", "NUMBER", "field", "NUMBER", "This", "be", "not", "critical", "issue", "but", "I", "want", "feedbacks", "NUMBER", "I", "be", "now", "checking", "old", "configurations", "with", "use", "v", "NUMBER", "config", "NUMBER", "Almost", "configurations", "work", "but", "format", "pattern", "sometimes", "fail", "because", "be", "interpreted", "as", "escape", "character", "in", "v", "NUMBER", "format", "NUMBER", "If", "you", "want", "to", "use", "include", "pattern", "you", "should", "write", "foo", "bar", "in", "old", "config", "NUMBER", "foo", "bar", "in", "v", "NUMBER", "config", "NUMBER", "Should", "v", "NUMBER", "format", "also", "allow", "foo", "bar", "in", "pattern", "configuration", "Question", "In", "the", "above", "example", "what", "do", "foo", "bar", "match", "I", "think", "the", "v", "NUMBER", "format", "behavior", "be", "more", "general", "as", "a", "regular", "expression", "so", "in", "my", "opinion", "current", "v", "NUMBER", "behavior", "be", "fine", "NUMBER", "kiyoto", "foo", "bar", "I", "forgot", "to", "say", "my", "opinion", "NUMBER", "Potentially", "v", "NUMBER", "format", "doesn", "t", "have", "a", "compatibility", "with", "old", "one", "e", "NUMBER", "g", "NUMBER", "foo", "be", "interpreted", "as", "foo", "NUMBER", "So", "I", "think", "support", "special", "case", "for", "foo", "bar", "be", "not", "needed", "NUMBER", "Okay", "keep", "current", "behaviour", "and", "I", "write", "this", "note", "to", "docs", "NUMBER", "fluentd", "NUMBER", "org", "NUMBER", "If", "the", "user", "change", "buf_file", "to", "buf_memory", "with", "flush_at_shutdown", "false", "the", "user", "may", "discard", "buffered", "chunks", "unexpectedly", "NUMBER", "I", "think", "printing", "warn", "message", "be", "better", "NUMBER", "sonots", "tagomoris", "Please", "check", "NUMBER", "LGTM", "From", "this", "change", "we", "can", "load", "NUMBER", "party", "parser", "which", "located", "in", "fluent", "plugin", "parser_xxx", "NUMBER", "rb", "automatically", "NUMBER", "After", "merge", "should", "we", "create", "contribute", "based", "fluent", "plugin", "parser", "collections", "which", "collects", "minior", "but", "useful", "parsers", "LGTM", "both", "NUMBER", "Are", "there", "any", "plan", "to", "be", "bundled", "parser", "for", "fluent", "plugin", "parser", "collections", "e", "NUMBER", "x", "NUMBER", "which", "i", "have", "just", "brainstormed", "squid", "LINK", "regex", "debug", "elasticsearch", "LINK", "ken", "fluent", "plugin", "tail", "addon", "format", "blob", "master", "lib", "fluent", "plugin", "in_tail_addon_format", "NUMBER", "rb", "L", "NUMBER", "L", "NUMBER", "postgresql", "LINK", "_csv_log_with_fluentd", "NUMBER", "html", "mysql", "slow", "query", "LINK", "fortigate", "LINK", "plugin", "fortigate", "log", "parser", "glusterfs", "LINK", "_and_d", "technology", "gluster_fs_fluentd", "NUMBER", "html", "postfix", "LINK", "qmail", "LINK", "var", "log", "cron", "var", "log", "secure", "Travis", "CI", "pass", "NUMBER", "tagomoris", "Travis", "CI", "be", "fail", "with", "Ruby", "NUMBER", "NUMBER", "Could", "you", "check", "this", "I", "m", "now", "considering", "how", "to", "support", "config_argument", "NUMBER", "Maybe", "config_argument", "be", "only", "use", "with", "string", "type", "like", "TAG", "not", "use", "array", "hash", "and", "other", "primitives", "NUMBER", "So", "implement", "config_param", "level", "complexity", "seems", "overengineering", "I", "think", "NUMBER", "Element", "provide", "arg", "accessor", "for", "TAG", "s", "bar", "NUMBER", "So", "provide", "similar", "API", "or", "integrating", "config_section", "with", "argument_name", "option", "seem", "to", "be", "more", "maintanable", "NUMBER", "lgtm", "LINK", "If", "someone", "doesn", "t", "have", "any", "question", "I", "will", "merge", "this", "PR", "tomorrow", "NUMBER", "Retries", "test", "and", "test", "be", "pass", "NUMBER", "Maybe", "Ruby", "or", "Travis", "CI", "environment", "has", "a", "ObjectSpace", "relate", "bug", "NUMBER", "Merged", "NUMBER", "Good", "work", "NUMBER", "If", "find", "the", "bug", "we", "will", "handle", "it", "use", "new", "issue", "NUMBER", "LINK", "L", "NUMBER", "Raising", "an", "exception", "at", "this", "point", "will", "break", "the", "chain", "so", "in", "the", "context", "of", "a", "CopyOutput", "be", "use", "if", "one", "plugin", "type", "runs", "into", "a", "problem", "it", "causes", "all", "to", "fail", "NUMBER", "One", "reasonable", "use", "case", "would", "be", "I", "have", "the", "copy", "plugin", "sending", "my", "data", "to", "S", "NUMBER", "and", "ElasticSearch", "if", "the", "ElasticSearch", "cluster", "goes", "down", "I", "m", "ok", "to", "lose", "that", "data", "provide", "that", "I", "know", "it", "will", "still", "be", "sent", "to", "S", "NUMBER", "This", "type", "of", "configuration", "based", "on", "copy", "helps", "that", "be", "would", "help", "reduce", "SPFs", "in", "logging", "NUMBER", "Another", "point", "be", "why", "would", "BasicBuffer", "ever", "raise", "an", "exception", "losing", "data", "be", "a", "big", "thing", "and", "I", "understand", "it", "should", "fail", "loudly", "but", "not", "at", "the", "cost", "of", "other", "outputs", "NUMBER", "This", "code", "be", "really", "easy", "to", "change", "error", "logging", "instead", "of", "raising", "but", "if", "you", "feel", "like", "another", "solution", "be", "needed", "I", "m", "willing", "to", "submit", "a", "pull", "request", "NUMBER", "Maybe", "add", "buffer_ignore_exceeded_chunk", "or", "similar", "option", "be", "better", "NUMBER", "Raising", "exeception", "be", "needed", "because", "some", "plugins", "return", "an", "error", "to", "the", "client", "for", "fail", "over", "NUMBER", "repeatedly", "do", "you", "think", "that", "should", "be", "available", "only", "to", "BasicBuffer", "or", "be", "a", "property", "of", "CopyOutput", "My", "reasoning", "be", "that", "the", "contract", "for", "fail", "be", "only", "different", "for", "out_copy", "NUMBER", "dterror", "CopyOutput", "itself", "can", "t", "handle", "above", "case", "because", "CopyOutput", "be", "simple", "output", "and", "doesn", "t", "touch", "a", "store", "s", "plugin", "NUMBER", "How", "about", "following", "configuration", "aconf", "TAG", "type", "copy", "TAG", "type", "s", "NUMBER", "NUMBER", "TAG", "TAG", "type", "elasticsearch", "buffer_ignore_exceeded_chunk", "true", "output", "error", "to", "log", "not", "raise", "an", "exception", "NUMBER", "NUMBER", "TAG", "TAG", "I", "was", "thinking", "of", "something", "like", "in", "out_copy", "needs", "to", "be", "made", "more", "sophisticated", "ruby", "def", "emit", "tag", "es", "chain", "begin", "chain", "NUMBER", "next", "rescue", "Exception", "e", "raise", "e", "unless", "ignore_individual_errors", "chain", "NUMBER", "next", "end", "end", "But", "I", "m", "ok", "with", "your", "idea", "too", "NUMBER", "Let", "me", "know", "what", "you", "think", "and", "I", "ll", "implement", "it", "NUMBER", "I", "see", "NUMBER", "Maybe", "implement", "I", "and", "your", "ideas", "be", "good", "for", "covering", "more", "cases", "NUMBER", "We", "have", "a", "plan", "to", "implement", "error", "stream", "which", "sends", "error", "record", "to", "another", "plugin", "NUMBER", "But", "it", "needs", "more", "time", "so", "implement", "ignore_individual_errors", "parameter", "be", "good", "for", "now", "NUMBER", "Could", "you", "send", "ignore_individual_errors", "pull", "request", "sure", "will", "work", "on", "it", "only", "for", "v", "NUMBER", "config", "or", "for", "both", "of", "traditional", "and", "v", "NUMBER", "Need", "both", "because", "if", "only", "v", "NUMBER", "the", "user", "hard", "to", "use", "this", "configuration", "NUMBER", "Sounds", "good", "idea", "I", "don", "t", "think", "we", "should", "limit", "nesting", "level", "NUMBER", "NUMBER", "Both", "v", "NUMBER", "and", "traditional", "config", "be", "better", "anyone", "can", "say", "better", "though", "NUMBER", "Seems", "unlimited", "be", "fine", "NUMBER", "Users", "will", "restrict", "by", "themselves", "if", "they", "want", "NUMBER", "I", "have", "a", "plan", "to", "release", "new", "Fluentd", "in", "this", "week", "or", "weekend", "NUMBER", "If", "you", "want", "to", "include", "this", "feature", "in", "this", "version", "please", "send", "pull", "request", "ASAP", "NUMBER", "children", "NUMBER", "first", "should", "be", "a", "instance", "of", "Config", "Element", "or", "Hash", "w", "symbol", "keys", "or", "Object", "instance", "w", "specified", "methods", "by", "config_param", "Maybe", "Element", "be", "better", "for", "consistency", "because", "current", "implementaion", "uses", "Element", "for", "TAG", "syntax", "NUMBER", "LINK", "L", "NUMBER", "I", "see", "NUMBER", "fluient", "plugin", "sql", "uses", "sub", "TAG", "sections", "NUMBER", "LINK", "plugin", "sql", "blob", "f", "NUMBER", "d", "NUMBER", "bda", "NUMBER", "a", "NUMBER", "b", "NUMBER", "e", "NUMBER", "fd", "NUMBER", "bd", "NUMBER", "ac", "lib", "fluent", "plugin", "in_sql", "NUMBER", "rb", "L", "NUMBER", "If", "you", "can", "keep", "this", "use", "cases", "please", "feel", "free", "to", "add", "best", "class", "for", "config_section", "NUMBER", "Please", "refer", "to", "LINK", "first", "NUMBER", "I", "applied", "above", "issue", "result", "to", "new", "configuration", "format", "NUMBER", "This", "pull", "request", "include", "several", "refactoring", "to", "share", "old", "and", "new", "format", "code", "NUMBER", "Current", "implemention", "uses", "yajl", "for", "parsing", "array", "and", "hash", "so", "the", "user", "can", "t", "add", "trailinig", "commas", "and", "can", "t", "write", "comment", "NUMBER", "I", "don", "t", "know", "these", "features", "be", "must", "or", "not", "NUMBER", "frsyuki", "tagomoris", "sonots", "Please", "check", "this", "pull", "request", "NUMBER", "V", "NUMBER", "configuration", "document", "be", "here", "LINK", "file", "v", "NUMBER", "format", "tagomoris", "Maybe", "v", "NUMBER", "config", "be", "better", "because", "I", "want", "to", "deprecate", "old", "format", "after", "release", "v", "NUMBER", "Renamed", "to", "V", "NUMBER", "Does", "someone", "have", "more", "suggestions", "Good", "work", "clap", "Installed", "td", "agent", "on", "my", "Ubuntu", "system", "and", "start", "it", "NUMBER", "Now", "trying", "to", "get", "it", "to", "work", "with", "Fluent", "PHP", "Logger", "but", "it", "be", "miss", "td", "agent", "NUMBER", "sock", "NUMBER", "The", "only", "thing", "in", "var", "run", "td", "agent", "folder", "be", "td", "agent", "NUMBER", "pid", "NUMBER", "Permission", "of", "the", "folder", "be", "drwxrwxrwx", "and", "ownership", "be", "td", "agent", "td", "agent", "NUMBER", "Added", "to", "td", "agent", "NUMBER", "conf", "the", "UNIX", "input", "source", "NUMBER", "TAG", "type", "unix", "path", "var", "run", "td", "agent", "td", "agent", "NUMBER", "sock", "TAG", "Any", "idea", "why", "the", "td", "agent", "NUMBER", "sock", "isn", "t", "be", "created", "I", "resolve", "it", "NUMBER", "Thanks", "for", "replying", "NUMBER", "Sorry", "for", "the", "trouble", "NUMBER", "Hi", "I", "be", "get", "following", "error", "while", "run", "fluentd", "tail", "ex", "plugin", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "rescue", "in", "main_process", "unexpect", "error", "error", "undefined", "method", "split", "for", "nil", "NilClass", "Operating", "system", "be", "solaris", "NUMBER", "sparc", "Following", "be", "the", "source", "configuration", "file", "TAG", "type", "tail_ex", "format", "none", "path", "export", "home", "scp", "log", "NUMBER", "log", "pos_file", "export", "home", "scp", "output", "HLR", "NUMBER", "log", "NUMBER", "pos", "tag", "td", "NUMBER", "hlr", "refresh_interval", "NUMBER", "TAG", "Please", "provide", "some", "suggestions", "NUMBER", "Yes", "it", "seems", "a", "bug", "to", "me", "please", "check", "NUMBER", "I", "also", "posted", "it", "on", "google", "group", "you", "mention", "Please", "reopen", "it", "it", "be", "a", "bug", "and", "not", "work", "on", "solaris", "system", "Hello", "Are", "you", "guys", "planning", "on", "release", "the", "latest", "version", "of", "fluentd", "with", "the", "td", "agent", "RPM", "Would", "like", "to", "take", "advantage", "of", "Per", "Plugin", "Log", "LINK", "per", "plugin", "log", "fluentd", "v", "NUMBER", "and", "above", "repeatedly", "these", "spec", "file", "describe", "how", "v", "NUMBER", "parser", "works", "LINK", "_parser_spec", "NUMBER", "rb", "LINK", "_parser_spec", "NUMBER", "rb", "e", "don", "t", "have", "to", "add", "typed", "literals", "to", "config", "file", "because", "it", "s", "too", "early", "optimization", "in", "my", "opinion", "NUMBER", "My", "idea", "be", "Parser", "returns", "string", "values", "and", "config_param", "converts", "the", "strings", "to", "typed", "values", "Implementation", "idea", "be", "Modify", "LiteralParser", "parse_literal", "to", "not", "parse", "typed", "values", "comment", "out", "L", "NUMBER", "L", "NUMBER", "from", "LINK", "_parser", "NUMBER", "rb", "L", "NUMBER", "Engine", "NUMBER", "parse_config", "uses", "the", "new", "parser", "NUMBER", "to", "Parser", "returns", "string", "values", "and", "config_param", "converts", "the", "strings", "to", "typed", "values", "NUMBER", "With", "this", "approach", "we", "can", "do", "this", "traditional", "plugins", "inherits", "Fluent", "InputPlugin", "or", "others", "can", "recognize", "it", "as", "same", "with", "traditional", "format", "NUMBER", "new", "type", "plugins", "ex", "Fluentd", "Plugin", "Input", "or", "other", "can", "recognize", "it", "as", "typed", "values", "NUMBER", "to", "json", "array", "object", "NUMBER", "It", "s", "more", "popular", "than", "ruby", "s", "one", "for", "many", "users", "NUMBER", "Me", "too", "NUMBER", "NUMBER", "to", "json", "array", "object", "NUMBER", "BTW", "will", "type", "names", "be", "array", "and", "object", "or", "array", "and", "hash", "As", "one", "of", "users", "I", "feel", "the", "latter", "be", "better", "NUMBER", "I", "merge", "the", "implementation", "pull", "request", "NUMBER", "I", "want", "to", "work", "fluentd", "without", "input", "plugins", "if", "the", "configuration", "has", "TAG", "options", "NUMBER", "It", "means", "the", "Fluentd", "do", "not", "receive", "new", "message", "and", "only", "work", "with", "current", "remaining", "buffers", "NUMBER", "The", "use", "case", "be", "Flushing", "all", "buffers", "without", "receiving", "new", "message", "for", "retiring", "servers", "NUMBER", "Debugging", "output", "plugins", "Of", "course", "this", "feature", "be", "accomplished", "by", "modifying", "configurations", "manually", "but", "I", "want", "it", "to", "be", "support", "officially", "NUMBER", "For", "example", "it", "be", "difficult", "to", "modify", "a", "part", "of", "configurations", "for", "specific", "servers", "if", "they", "be", "provide", "via", "http", "NUMBER", "There", "be", "two", "candidates", "for", "the", "implementation", "I", "think", "NUMBER", "Fluentd", "starts", "normally", "then", "send", "signal", "such", "as", "a", "SIGUSR", "NUMBER", "to", "a", "work", "process", "to", "disable", "input", "plugins", "NUMBER", "Fluentd", "starts", "with", "a", "option", "such", "as", "a", "without", "source", "to", "disable", "input", "plugins", "NUMBER", "I", "think", "second", "one", "be", "better", "because", "first", "one", "requires", "new", "signal", "NUMBER", "Actually", "it", "be", "good", "for", "debugging", "purpose", "that", "disabled", "input", "plugin", "be", "selectable", "but", "I", "don", "t", "care", "it", "for", "now", "NUMBER", "Are", "there", "any", "comments", "or", "objections", "for", "this", "feature", "NUMBER", "for", "this", "feature", "request", "NUMBER", "My", "colleague", "also", "said", "as", "he", "wants", "the", "same", "feature", "NUMBER", "I", "think", "SIGUSR", "NUMBER", "be", "fine", "NUMBER", "This", "feature", "can", "be", "implement", "without", "signals", "so", "I", "think", "we", "should", "not", "use", "signals", "NUMBER", "NUMBER", "for", "a", "new", "command", "line", "option", "NUMBER", "NUMBER", "for", "a", "new", "command", "line", "option", "NUMBER", "signal", "handle", "be", "hard", "to", "implement", "on", "top", "of", "JRuby", "NUMBER", "sabottenda", "In", "the", "first", "use", "case", "be", "restarting", "fluentd", "with", "without", "source", "acceptable", "Could", "you", "explain", "the", "context", "in", "a", "little", "bit", "more", "detail", "I", "prefer", "without", "source", "option", "but", "not", "sure", "if", "it", "meets", "all", "your", "needs", "NUMBER", "Another", "thing", "comes", "to", "my", "mind", "NUMBER", "It", "might", "be", "overkill", "for", "the", "use", "cases", "but", "provide", "web", "apis", "to", "control", "fluentd", "would", "be", "nice", "to", "me", "NUMBER", "Let", "me", "talk", "about", "the", "usecase", "of", "my", "colleague", "NUMBER", "He", "wants", "this", "to", "make", "sure", "all", "buffer", "be", "flushed", "before", "shutdown", "NUMBER", "To", "do", "so", "input", "must", "be", "stopped", "before", "shutdown", "because", "otherwise", "we", "never", "can", "make", "sure", "all", "buffer", "be", "flushed", "NUMBER", "He", "be", "actually", "having", "a", "problem", "that", "some", "chunks", "be", "lost", "with", "the", "current", "Fluentd", "on", "shutdown", "and", "tweaking", "only", "in_forward", "to", "let", "it", "stops", "receiving", "new", "data", "by", "sending", "signal", "NUMBER", "Restarting", "Fluentd", "with", "without", "source", "do", "not", "satisfy", "this", "use", "case", "NUMBER", "One", "another", "option", "be", "to", "use", "debug_agent", "instead", "of", "signal", "NUMBER", "I", "remember", "that", "the", "debug_agent", "would", "become", "default", "NUMBER", "But", "I", "do", "not", "like", "that", "another", "port", "be", "use", "as", "default", "and", "I", "believe", "some", "users", "should", "have", "same", "opinions", "NUMBER", "The", "solution", "about", "this", "be", "to", "use", "UNIX", "domain", "socket", "in", "the", "default", "but", "unix", "domain", "socket", "do", "not", "work", "on", "windows", "NUMBER", "Hmm", "NUMBER", "Thanks", "sonots", "NUMBER", "That", "s", "my", "use", "case", "too", "NUMBER", "But", "if", "the", "feature", "be", "implement", "with", "without", "source", "option", "I", "was", "planning", "to", "do", "the", "following", "Shutdown", "fluentd", "NUMBER", "We", "may", "still", "be", "left", "with", "some", "buffer", "data", "not", "sure", "if", "I", "will", "lose", "some", "data", "here", "Start", "fluentd", "again", "with", "without", "source", "option", "Shutdown", "again", "ensuring", "that", "the", "entire", "buffer", "be", "flushed", "One", "thing", "with", "user", "signals", "be", "what", "if", "fluentd", "has", "to", "support", "n", "different", "features", "not", "sure", "if", "it", "will", "ever", "have", "to", "like", "this", "NUMBER", "You", "cant", "have", "n", "different", "USR", "signals", "rt", "I", "be", "new", "to", "fluentd", "so", "please", "correct", "me", "if", "I", "have", "understood", "something", "wrong", "here", "NUMBER", "Thanks", "for", "your", "support", "NUMBER", "sriramflydata", "In", "the", "case", "of", "mem_buffer", "it", "do", "not", "work", "NUMBER", "He", "wants", "this", "to", "make", "sure", "all", "buffer", "be", "flushed", "before", "shutdown", "NUMBER", "This", "be", "exactly", "what", "i", "want", "NUMBER", "In", "_my_", "case", "it", "be", "acceptable", "to", "restart", "fluentd", "with", "command", "line", "option", "such", "as", "without", "source", "because", "I", "don", "t", "use", "mem_buffer", "for", "such", "case", "NUMBER", "As", "a", "future", "option", "we", "can", "use", "unix", "domain", "sockets", "on", "path", "with", "pid", "for", "only", "unix", "like", "OSs", "NUMBER", "for", "fluentd", "daemon", "controls", "instead", "of", "signals", "NUMBER", "TCP", "ports", "be", "also", "available", "for", "this", "purpose", "but", "port", "number", "selection", "be", "another", "confusing", "points", "especially", "for", "multi", "process", "environment", "NUMBER", "Using", "a", "named", "pipe", "would", "be", "good", "as", "a", "future", "option", "Implementation", "of", "RPC", "layer", "on", "HTTP", "be", "not", "so", "difficult", "but", "we", "need", "more", "gem", "dependencies", "especially", "rack", "NUMBER", "That", "brings", "some", "troubles", "for", "maintenance", "NUMBER", "Without", "HTTP", "we", "be", "needed", "to", "design", "text", "binary", "protocol", "from", "scratch", "and", "it", "will", "needs", "more", "time", "and", "it", "be", "not", "an", "easy", "work", "NUMBER", "I", "often", "use", "setup", "option", "to", "create", "initial", "configuration", "file", "NUMBER", "The", "file", "created", "by", "the", "setup", "option", "uses", "obsoleted", "host", "option", "in", "out_forward", "so", "the", "following", "warnins", "occur", "when", "Fluentd", "starts", "with", "the", "configuration", "NUMBER", "If", "there", "be", "no", "reason", "to", "keep", "it", "please", "fix", "it", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "host", "option", "in", "forward", "output", "be", "obsoleted", "NUMBER", "Use", "TAG", "host", "xxx", "TAG", "instead", "NUMBER", "repeatedly", "Sorry", "for", "be", "late", "to", "review", "this", "big", "change", "NUMBER", "I", "think", "overall", "implementation", "be", "good", "as", "long", "as", "we", "can", "notice", "all", "users", "that", "path", "pattern", "must", "not", "include", "rotated", "file", "to", "not", "cause", "duplicate", "records", "NUMBER", "If", "we", "repeat", "refresh_interval", "pos_file", "size", "increases", "for", "ever", "NUMBER", "Usually", "it", "doesn", "t", "matter", "because", "pos_file", "be", "small", "NUMBER", "However", "it", "s", "better", "to", "have", "a", "cleanup", "code", "NUMBER", "For", "example", "we", "can", "set", "NUMBER", "xffffffff", "to", "pos", "on", "stop_watchers", "and", "remove", "those", "lines", "on", "start", "NUMBER", "The", "other", "code", "looks", "good", "to", "me", "NUMBER", "I", "review", "NUMBER", "The", "others", "look", "good", "repeatedly", "frsyuki", "I", "be", "curious", "what", "be", "the", "reason", "for", "this", "limitation", "as", "long", "as", "we", "can", "notice", "all", "users", "that", "path", "pattern", "must", "not", "include", "rotated", "file", "to", "not", "cause", "duplicate", "records", "NUMBER", "Is", "there", "any", "way", "around", "this", "I", "was", "hoping", "to", "watch", "stdout", "file", "which", "be", "be", "rotated", "NUMBER", "wsorenson", "Because", "in_tail", "can", "t", "track", "file", "rotation", "correctly", "with", "glob", "pattern", "NUMBER", "We", "use", "inode", "for", "file", "track", "but", "some", "rotation", "tool", "change", "the", "inode", "with", "file", "compression", "or", "something", "NUMBER", "in_tail", "doesn", "t", "know", "the", "rotation", "tool", "implementation", "so", "including", "rotation", "file", "in", "causes", "the", "log", "duplication", "NUMBER", "Is", "there", "any", "way", "around", "this", "I", "was", "hoping", "to", "watch", "stdout", "file", "which", "be", "be", "rotated", "NUMBER", "Simple", "way", "be", "separating", "log", "path", "NUMBER", "For", "example", "aconf", "TAG", "type", "tail", "path", "path", "to", "rotation", "file", "path", "to", "rotation", "never", "macth", "unique", "prefix", "path", "to", "dynamic", "TAG", "repeatedly", "what", "about", "the", "case", "where", "the", "file", "be", "simply", "rotated", "with", "copytruncate", "I", "assume", "it", "handles", "this", "by", "noticing", "the", "underlying", "file", "size", "has", "gone", "down", "wsorenson", "Yes", "NUMBER", "in_tail", "checks", "inode", "change", "or", "file", "size", "reduction", "NUMBER", "The", "code", "be", "here", "LINK", "_tail", "NUMBER", "rb", "L", "NUMBER", "Installed", "fluentd", "with", "the", "following", "install", "ruby", "NUMBER", "use", "rubyinstaller", "install", "devkit", "from", "rubyinstaller", "website", "download", "zip", "of", "windows", "branch", "LINK", "install", "fluentd", "gem", "install", "pkg", "fluentd", "NUMBER", "gem", "add", "RUBY_INSTALL_DIR", "C", "Ruby", "NUMBER", "to", "C", "Ruby", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "env", "NUMBER", "rb", "fluentd", "s", "conf", "fluentd", "c", "conf", "fluent", "NUMBER", "conf", "fluent", "NUMBER", "conf", "TAG", "type", "tail_multiline", "path", "C", "fluentd", "hello", "NUMBER", "txt", "tag", "jvm", "format", "TAG", "d", "d", "d", "d", "d", "d", "d", "d", "d", "d", "d", "d", "d", "d", "NUMBER", "NUMBER", "TAG", "NUMBER", "time_format", "Y", "m", "d", "H", "M", "S", "TAG", "TAG", "type", "stdout", "TAG", "Using", "Windows", "Server", "NUMBER", "NUMBER", "bits", "It", "was", "satisfactory", "at", "Windows", "NUMBER", "NUMBER", "bit", "NUMBER", "Since", "it", "checks", "by", "WindowsServer", "NUMBER", "please", "wait", "a", "little", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "FYI", "Seeing", "same", "issue", "on", "Server", "NUMBER", "NUMBER", "bits", "NUMBER", "Let", "me", "know", "how", "I", "can", "help", "with", "test", "NUMBER", "Hi", "NUMBER", "It", "seems", "a", "problem", "of", "combination", "of", "cool", "NUMBER", "io", "NUMBER", "and", "Windows", "NUMBER", "We", "re", "still", "checking", "NUMBER", "Are", "you", "able", "to", "reproduce", "I", "m", "use", "a", "m", "NUMBER", "small", "instance", "on", "AWS", "NUMBER", "When", "commenting", "this", "section", "I", "m", "no", "longer", "seeing", "the", "issue", "build", "in", "TCP", "input", "echo", "TAG", "fluent", "cat", "TAG", "TAG", "type", "forward", "TAG", "cool", "NUMBER", "io", "makes", "it", "NUMBER", "I", "posted", "it", "with", "a", "sample", "code", "NUMBER", "LINK", "okahashi", "NUMBER", "I", "find", "the", "problem", "and", "send", "PR", "to", "resolve", "the", "problem", "NUMBER", "On", "my", "environment", "your", "program", "works", "NUMBER", "Please", "try", "this", "patch", "NUMBER", "LINK", "how", "can", "I", "test", "the", "patch", "without", "having", "to", "compile", "cool", "NUMBER", "io", "amagnus", "Currently", "nothing", "NUMBER", "If", "you", "already", "setup", "DevKit", "you", "can", "easy", "to", "build", "Cool", "NUMBER", "io", "with", "rake", "command", "NUMBER", "On", "the", "other", "hand", "after", "okahashi", "NUMBER", "or", "MasayukiKiyota", "checked", "the", "patch", "on", "their", "environment", "I", "will", "release", "Cool", "NUMBER", "io", "NUMBER", "for", "Windows", "environment", "NUMBER", "okahashi", "NUMBER", "MasayukiKiyota", "amagnus", "I", "uploaded", "cool", "NUMBER", "io", "NUMBER", "for", "Windows", "gem", "to", "Dropbox", "LINK", "NUMBER", "x", "NUMBER", "mingw", "NUMBER", "gem", "This", "gem", "be", "build", "on", "my", "new", "Ubuntu", "cross", "compile", "environment", "so", "I", "want", "to", "test", "this", "gem", "works", "on", "Windows", "NUMBER", "But", "I", "don", "t", "have", "Windows", "machine", "on", "hand", "so", "could", "you", "test", "this", "gem", "on", "your", "Windows", "machine", "If", "works", "correctly", "I", "will", "push", "this", "gem", "to", "rubygems", "NUMBER", "org", "NUMBER", "After", "that", "you", "can", "install", "this", "gem", "via", "gem", "install", "NUMBER", "repeatedly", "I", "test", "it", "on", "Windows", "Server", "NUMBER", "NUMBER", "bit", "Windows", "NUMBER", "NUMBER", "bit", "and", "NUMBER", "NUMBER", "bit", "NUMBER", "Works", "fine", "NUMBER", "okahashi", "NUMBER", "Thank", "you", "for", "the", "test", "I", "will", "release", "the", "gem", "later", "NUMBER", "okahashi", "NUMBER", "MasayukiKiyota", "amagnus", "Just", "registered", "on", "rubygems", "NUMBER", "You", "can", "install", "fix", "version", "via", "gem", "install", "command", "NUMBER", "I", "ve", "notice", "that", "timeout", "paramter", "at", "LINK", "_forward", "NUMBER", "rb", "L", "NUMBER", "was", "always", "nil", "NUMBER", "MEMO", "Since", "linger_timeout", "be", "NUMBER", "in_forward", "returns", "RST", "instead", "of", "FIN", "NUMBER", "This", "be", "effective", "to", "clear", "TIME_WAIT", "sockets", "at", "src", "NUMBER", "See", "LINK", "option", "so", "linger", "zero", "when", "its", "required", "frsyuki", "I", "want", "to", "know", "whether", "in_forward", "be", "sending", "RST", "by", "setting", "timeout", "NUMBER", "_intentionally_", "or", "not", "NUMBER", "Good", "catch", "sonots", "It", "s", "completely", "unintentional", "NUMBER", "oh", "NUMBER", "Let", "me", "keep", "the", "linger_timeout", "to", "be", "default", "NUMBER", "because", "fluentd", "s", "out_forward", "connect", "NUMBER", "everytime", "to", "send", "data", "and", "would", "result", "in", "lots", "of", "TIME_WAIT", "sockets", "if", "it", "neatly", "receives", "FIN", "NUMBER", "FYI", "TIME_WAIT", "sits", "NUMBER", "seconds", "in", "Linux", "as", "default", "we", "need", "to", "tweak", "linux", "kernel", "source", "code", "to", "shorten", "it", "NUMBER", "In", "our", "production", "environment", "we", "shortened", "to", "NUMBER", "seconds", "for", "example", "NUMBER", "Added", "comments", "about", "this", "at", "this", "commit", "LINK", "This", "patch", "fix", "two", "issue", "which", "cause", "a", "unstoppable", "process", "NUMBER", "The", "first", "one", "be", "that", "SIGTERM", "be", "ignored", "when", "it", "be", "call", "before", "starting", "default", "loop", "in", "engine", "NUMBER", "rb", "NUMBER", "If", "you", "send", "SIGTERM", "immediately", "after", "starting", "fluentd", "_", "default_loop_", "be", "not", "set", "and", "the", "signal", "be", "ignored", "NUMBER", "synchronize", "method", "cannot", "be", "use", "in", "trap", "block", "so", "I", "use", "a", "variable", "without", "semaphore", "for", "cheking", "the", "state", "NUMBER", "The", "second", "issue", "be", "that", "shutdown", "of", "plugins", "be", "blocked", "because", "in_tail", "plugin", "contiues", "to", "reading", "logs", "NUMBER", "Shutdown", "of", "in_tail", "be", "blocked", "here", "LINK", "_tail", "NUMBER", "rb", "L", "NUMBER", "NUMBER", "IOHandler", "keep", "reading", "logs", "independently", "in", "while", "loop", "if", "there", "be", "unread", "logs", "so", "I", "fix", "to", "stop", "reading", "on", "shutdown", "phaze", "NUMBER", "The", "second", "issue", "be", "that", "shutdown", "of", "plugins", "be", "blocked", "because", "in_tail", "plugin", "contiues", "to", "reading", "logs", "NUMBER", "From", "this", "patch", "Fluentd", "doesn", "t", "wait", "the", "apache", "nginx", "shutdown", "log", "flush", "Sorry", "for", "late", "reply", "NUMBER", "The", "answer", "be", "yes", "I", "think", "so", "NUMBER", "Hmm", "the", "question", "means", "you", "expect", "in_tail", "plugin", "reads", "all", "remaining", "logs", "before", "shutting", "down", "right", "I", "think", "if", "all", "logs", "be", "flushed", "at", "that", "time", "new", "logs", "come", "in", "one", "after", "another", "after", "Fluentd", "be", "stopped", "NUMBER", "My", "use", "case", "be", "I", "want", "to", "stop", "Fluentd", "immediately", "for", "maintenance", "or", "debugging", "NUMBER", "Fluentd", "takes", "much", "time", "to", "stop", "on", "very", "high", "traffic", "servers", "or", "servers", "use", "slow", "output", "plugins", "NUMBER", "However", "it", "eventually", "stops", "when", "it", "receives", "signal", "so", "it", "be", "not", "a", "severe", "issue", "NUMBER", "Anyway", "if", "in_tail", "plugin", "be", "expected", "to", "read", "all", "remaining", "logs", "before", "shutting", "down", "this", "patch", "breaks", "backward", "compatibility", "NUMBER", "I", "want", "to", "fix", "only", "first", "issue", "for", "now", "NUMBER", "Just", "remove", "the", "commit", "from", "my", "branch", "NUMBER", "Host", "and", "architecture", "SunOS", "TAG", "NUMBER", "Generic_", "NUMBER", "NUMBER", "sun", "NUMBER", "u", "sparc", "SUNW", "Sun", "Fire", "V", "NUMBER", "Ruby", "bash", "NUMBER", "ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "sparc", "solaris", "NUMBER", "Error", "detail", "TAG", "ERROR", "Error", "installing", "fluentd", "NUMBER", "gem", "ERROR", "Failed", "to", "build", "gem", "native", "extension", "NUMBER", "opt", "local", "bin", "ruby", "extconf", "NUMBER", "rb", "checking", "for", "rb_thread_blocking_region", "NUMBER", "yes", "checking", "for", "rb_thread_alone", "NUMBER", "yes", "checking", "for", "rb_str_set_len", "NUMBER", "yes", "checking", "for", "clock_gettime", "in", "lrt", "NUMBER", "yes", "checking", "for", "sys", "select", "NUMBER", "h", "NUMBER", "yes", "checking", "for", "poll", "NUMBER", "h", "NUMBER", "yes", "checking", "for", "sys", "epoll", "NUMBER", "h", "NUMBER", "no", "checking", "for", "sys", "event", "NUMBER", "h", "NUMBER", "no", "checking", "for", "port", "NUMBER", "h", "NUMBER", "yes", "checking", "for", "sys", "resource", "NUMBER", "h", "NUMBER", "yes", "checking", "for", "sysctlbyname", "in", "sys", "param", "NUMBER", "h", "sys", "sysctl", "NUMBER", "h", "NUMBER", "no", "creating", "Makefile", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "libev", "ev", "NUMBER", "c", "NUMBER", "warning", "control", "reaches", "end", "of", "non", "void", "function", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "usr", "ccs", "bin", "as", "var", "tmp", "ccjQQ", "NUMBER", "rr", "NUMBER", "s", "line", "NUMBER", "error", "cannot", "use", "v", "NUMBER", "plus", "instructions", "in", "a", "non", "v", "NUMBER", "plus", "target", "binary", "Error", "code", "NUMBER", "The", "following", "command", "cause", "the", "error", "gcc", "I", "NUMBER", "I", "opt", "local", "include", "ruby", "NUMBER", "sparc", "solaris", "NUMBER", "I", "opt", "local", "include", "ruby", "NUMBER", "ruby", "backward", "I", "opt", "local", "include", "ruby", "NUMBER", "I", "NUMBER", "DRUBY_VERSION_CODE", "NUMBER", "DHAVE_RB_THREAD_BLOCKING_REGION", "DHAVE_RB_THREAD_BLOCKING_REGION", "DHAVE_RB_THREAD_ALONE", "DHAVE_RB_THREAD_ALONE", "DHAVE_RB_STR_SET_LEN", "DHAVE_RB_STR_SET_LEN", "DHAVE_SYS_SELECT_H", "DEV_USE_SELECT", "DHAVE_POLL_H", "DEV_USE_POLL", "DHAVE_PORT_H", "DEV_USE_PORT", "DHAVE_SYS_RESOURCE_H", "DHAVE_SYS_RESOURCE_H", "D_FILE_OFFSET_BITS", "NUMBER", "I", "usr", "local", "lib", "include", "fPIC", "O", "NUMBER", "ggdb", "Wall", "Wno", "unuse", "parameter", "Wno", "parentheses", "Wno", "long", "long", "Wpointer", "arith", "Wwrite", "strings", "Wdeclaration", "after", "statement", "Wimplicit", "function", "declaration", "fPIC", "o", "libev", "NUMBER", "o", "c", "libev", "NUMBER", "c", "make", "Fatal", "error", "Command", "fail", "for", "target", "libev", "NUMBER", "o", "Gem", "file", "will", "remain", "install", "in", "opt", "local", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "for", "inspection", "NUMBER", "TAG", "I", "think", "there", "a", "problem", "while", "compile", "the", "cool", "NUMBER", "io", "rubygem", "NUMBER", "It", "seems", "that", "xarch", "generic", "compiles", "as", "sparcv", "NUMBER", "which", "do", "not", "include", "them", "hence", "the", "compiler", "error", "NUMBER", "If", "you", "want", "to", "compile", "it", "you", "will", "need", "to", "specify", "xarch", "v", "NUMBER", "plus", "Link", "LINK", "NUMBER", "tstart", "NUMBER", "I", "was", "able", "to", "run", "it", "by", "upgrading", "the", "bash", "to", "v", "NUMBER", "and", "gcc", "version", "to", "NUMBER", "Earlier", "I", "had", "bash", "version", "NUMBER", "and", "gcc", "version", "NUMBER", "Yes", "it", "do", "NUMBER", "On", "NUMBER", "Mar", "NUMBER", "NUMBER", "NUMBER", "Masahiro", "Nakagawa", "notifications", "github", "NUMBER", "com", "write", "So", "upgrading", "gcc", "resolve", "the", "problem", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "NUMBER", "I", "agree", "that", "automatic", "flush", "be", "not", "needed", "NUMBER", "But", "I", "forgot", "to", "mention", "that", "my", "original", "code", "has", "a", "bug", "in", "handle", "multiple", "file", "NUMBER", "LINK", "plugin", "tail", "multiline", "issue", "NUMBER", "In", "short", "line_buffer", "should", "be", "defined", "per", "parser", "not", "per", "plugin", "NUMBER", "And", "it", "seems", "that", "new", "code", "has", "same", "problem", "NUMBER", "BTW", "I", "be", "Objective", "C", "programmer", "and", "be", "use", "Ruby", "just", "for", "Fluentd", "NUMBER", "So", "I", "will", "feel", "much", "safer", "it", "somebody", "else", "would", "do", "the", "code", "review", "NUMBER", "Thanks", "NUMBER", "I", "love", "that", "idea", "NUMBER", "As", "I", "request", "this", "on", "the", "mailing", "list", "a", "big", "NUMBER", "from", "me", "NUMBER", "I", "also", "agree", "with", "you", "It", "s", "nice", "idea", "repeatedly", "be", "you", "actively", "work", "on", "the", "in_tail_ex", "merge", "If", "not", "I", "may", "be", "able", "to", "help", "NUMBER", "It", "be", "a", "feature", "we", "would", "benefit", "from", "having", "NUMBER", "repeatedly", "Awesome", "NUMBER", "Sure", "I", "ll", "try", "this", "out", "today", "Hi", "i", "try", "to", "use", "fluentd", "with", "the", "in_syslog", "plugin", "for", "logs", "from", "network", "devices", "cisco", "i", "have", "install", "in", "fedora", "NUMBER", "with", "gem", "and", "this", "be", "the", "config", "bash", "NUMBER", "fluentd", "vv", "conf", "etc", "fluent", "fluent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "supervise", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "read_config", "reading", "config", "file", "path", "etc", "fluent", "fluent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "buffer", "plugin", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "buffer", "plugin", "memory", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "debug_agent", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "exec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "gc_stat", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "http", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "monitor_agent", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "object_space", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "status", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "tcp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "unix", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "syslog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "tail", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "exec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "exec_filter", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "null", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "roundrobin", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "stdout", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "tcp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "unix", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "test", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "gem", "fluent", "plugin", "elasticsearch", "version", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "gem", "fluentd", "version", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "configure", "use", "configuration", "file", "TAG", "TAG", "type", "syslog", "port", "NUMBER", "bind", "NUMBER", "tag", "syslog", "log_level", "debug", "TAG", "TAG", "type", "elasticsearch", "host", "NUMBER", "port", "NUMBER", "logstash_format", "true", "flush_interval", "NUMBER", "s", "TAG", "TAG", "type", "elasticsearch", "host", "NUMBER", "port", "NUMBER", "logstash_format", "true", "flush_interval", "NUMBER", "s", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "source", "type", "syslog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "match", "pattern", "syslog", "NUMBER", "type", "elasticsearch", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "elasticsearch", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "match", "pattern", "fluent", "NUMBER", "type", "elasticsearch", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "listen", "listening", "syslog", "socket", "on", "NUMBER", "NUMBER", "with", "udp", "now", "if", "i", "send", "syslog", "message", "from", "devices", "or", "via", "logger", "command", "i", "get", "these", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "rescue", "in", "receive_data", "TAG", "NUMBER", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "CET", "LINK", "NUMBER", "CHANGED", "Interface", "GigabitEthernet", "NUMBER", "NUMBER", "NUMBER", "change", "state", "to", "administratively", "down", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "share", "ruby", "time", "NUMBER", "rb", "NUMBER", "in", "strptime", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "block", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "fluentd", "main", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "get", "start", "to", "shutdown", "main", "process", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_supervisor_signal_handlers", "fluentd", "supervisor", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "fluentd", "main", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "rescue", "in", "receive_data", "TAG", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "ssss", "x", "NUMBER", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "share", "ruby", "time", "NUMBER", "rb", "NUMBER", "in", "strptime", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "block", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "fluentd", "main", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "get", "start", "to", "shutdown", "main", "process", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_supervisor_signal_handlers", "fluentd", "supervisor", "process", "get", "SIGINT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "block", "in", "install_main_process_signal_handlers", "fluentd", "main", "process", "get", "SIGINT", "ideas", "regards", "f", "NUMBER", "Hi", "this", "number", "be", "increasing", "so", "i", "assume", "its", "always", "add", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "rescue", "in", "receive_data", "TAG", "NUMBER", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "CET", "LINK", "NUMBER", "UPDOWN", "Interface", "GigabitEthernet", "NUMBER", "NUMBER", "NUMBER", "change", "state", "to", "down", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "share", "ruby", "time", "NUMBER", "rb", "NUMBER", "in", "strptime", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "block", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "rescue", "in", "receive_data", "TAG", "NUMBER", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "CET", "SYS", "NUMBER", "CONFIG_I", "Configured", "from", "console", "by", "wieck", "on", "vty", "NUMBER", "NUMBER", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "share", "ruby", "time", "NUMBER", "rb", "NUMBER", "in", "strptime", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "block", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "call", "usr", "local", "share", "gems", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "run", "Since", "the", "Dir", "glob", "returns", "results", "in", "a", "different", "order", "given", "different", "operate", "system", "We", "need", "to", "call", "Array", "sort", "to", "guarantee", "the", "inclusion", "order", "NUMBER", "What", "troubles", "be", "there", "about", "mis", "ordered", "fluentd", "configurations", "I", "cannot", "imagine", "such", "cases", "NUMBER", "I", "think", "that", "sorting", "file", "by", "alphabetic", "name", "order", "be", "good", "idea", "NUMBER", "There", "be", "no", "reason", "not", "to", "sort", "these", "NUMBER", "Managing", "configurations", "by", "hand", "be", "maybe", "fine", "and", "have", "no", "troubles", "NUMBER", "However", "with", "provisioning", "tool", "such", "as", "Puppet", "Chef", "or", "etc", "may", "face", "the", "difficulties", "with", "its", "ordering", "NUMBER", "Consider", "the", "case", "which", "include", "file", "provide", "by", "different", "modules", "Puppet", "case", "like", "as", "following", "text", "etc", "td", "agent", "conf", "NUMBER", "d", "NUMBER", "in_http", "NUMBER", "conf", "provide", "by", "base", "module", "NUMBER", "in_tail", "ltsv", "NUMBER", "httpd", "NUMBER", "access", "NUMBER", "conf", "provide", "by", "web", "module", "NUMBER", "out_mongo_replset", "xxx", "NUMBER", "conf", "provide", "by", "xxx", "module", "NUMBER", "forward", "aggregator", "NUMBER", "conf", "provide", "by", "base", "module", "td", "agent", "NUMBER", "conf", "Managing", "these", "order", "be", "pretty", "hard", "to", "do", "since", "each", "module", "has", "no", "way", "to", "know", "other", "modules", "configuration", "NUMBER", "well", "it", "s", "possible", "but", "hard", "to", "do", "thou", "If", "fluentd", "support", "this", "feature", "like", "as", "apache", "include", "each", "module", "just", "need", "to", "name", "config", "file", "alphabeticaly", "orderd", "NUMBER", "Ah", "I", "see", "NUMBER", "sorry", "it", "s", "my", "bad", "I", "m", "ashamed", "to", "say", "that", "since", "we", "use", "match", "for", "forwarding", "NUMBER", "forward", "aggregator", "NUMBER", "conf", "as", "above", "I", "thought", "it", "be", "nice", "that", "fluentd", "guarantee", "the", "ordering", "NUMBER", "But", "yes", "in", "that", "case", "as", "you", "mention", "it", "s", "MUST", "move", "forward", "to", "last", "of", "the", "config", "NUMBER", "td", "agent", "NUMBER", "conf", "include", "conf", "NUMBER", "d", "NUMBER", "conf", "TAG", "type", "forward", "TAG", "But", "anyway", "I", "think", "it", "s", "good", "to", "guarantee", "the", "sort", "if", "there", "be", "no", "block", "case", "NUMBER", "use", "Refinements", "to", "override", "Fluent", "Engine", "NUMBER", "emit", "rspec", "style", "plugin", "test", "be", "only", "for", "Ruby", "NUMBER", "or", "later", "we", "need", "event_router", "to", "hook", "emits", "from", "plugins", "it", "also", "needed", "for", "EventStream", "ErrorStreams", "For", "ruby", "version", "ruby", "community", "strongly", "recommends", "to", "use", "NUMBER", "x", "or", "later", "NUMBER", "LINK", "lang", "NUMBER", "org", "en", "news", "NUMBER", "NUMBER", "NUMBER", "ruby", "NUMBER", "NUMBER", "NUMBER", "will", "end", "on", "NUMBER", "Merging", "v", "NUMBER", "have", "many", "barriers", "like", "implementations", "of", "new", "syntax", "configuration", "actors", "socket", "managers", "event", "streams", "and", "so", "on", "NUMBER", "This", "style", "test", "drivers", "plugin", "calls", "actual", "emit", "and", "test", "driver", "stubs", "it", "cannot", "be", "implement", "for", "v", "NUMBER", "style", "Fluent", "Input", "Output", "without", "refinements", "or", "other", "hacky", "methods", "NUMBER", "This", "test", "driver", "be", "hacky", "in", "fact", "but", "we", "cannot", "get", "test", "drivers", "that", "calls", "real", "Engine", "NUMBER", "emit", "without", "hacky", "code", "NUMBER", "Released", "as", "gem", "NUMBER", "LINK", "helper", "plugin", "spec", "LINK", "helper", "plugin", "spec", "This", "patch", "enable", "us", "to", "check", "the", "instance", "variable", "without", "run", "undef_method", "instance_variable_get", "NUMBER", "before", "ruby", "irb", "main", "NUMBER", "NUMBER", "out", "Engine", "NUMBER", "match", "hoge", "NUMBER", "output", "TAG", "irb", "main", "NUMBER", "NUMBER", "class", "TAG", "undef_method", "instance_variables", "irb", "main", "NUMBER", "NUMBER", "undef_method", "instance_variable_get", "irb", "main", "NUMBER", "NUMBER", "end", "TAG", "irb", "main", "NUMBER", "NUMBER", "out", "NUMBER", "instance_variables", "log_level", "buffer_type", "flush_interval", "try_flush_interval", "retry_limit", "retry_wait", "max_retry_wait", "num_threads", "queued_chunk_flush_interval", "send_timeout", "heartbeat_type", "heartbeat_interval", "recover_wait", "hard_timeout", "expire_dns_cache", "phi_threshold", "port", "host", "log", "next_flush_time", "last_retry_time", "next_retry_time", "error_history", "secondary_limit", "emit_count", "nodes", "id", "config", "buffer", "writers", "writer_current_position", "writers_size", "rand_seed", "weight_array", "rr", "loop", "usock", "hb", "timer", "thread", "irb", "main", "NUMBER", "NUMBER", "buffer", "out", "NUMBER", "instance_variable_get", "buffer", "TAG", "irb", "main", "NUMBER", "NUMBER", "buffer", "NUMBER", "instance_variables", "uri", "ref", "after", "ruby", "irb", "main", "NUMBER", "NUMBER", "out", "Engine", "NUMBER", "match", "hoge", "NUMBER", "output", "TAG", "irb", "main", "NUMBER", "NUMBER", "out", "NUMBER", "instance_variables", "log_level", "buffer_type", "flush_interval", "try_flush_interval", "retry_limit", "retry_wait", "max_retry_wait", "num_threads", "queued_chunk_flush_interval", "send_timeout", "heartbeat_type", "heartbeat_interval", "recover_wait", "hard_timeout", "expire_dns_cache", "phi_threshold", "port", "host", "log", "next_flush_time", "last_retry_time", "next_retry_time", "error_history", "secondary_limit", "emit_count", "nodes", "id", "config", "buffer", "writers", "writer_current_position", "writers_size", "rand_seed", "weight_array", "rr", "loop", "usock", "hb", "timer", "thread", "irb", "main", "NUMBER", "NUMBER", "buffer", "out", "NUMBER", "instance_variable_get", "buffer", "TAG", "irb", "main", "NUMBER", "NUMBER", "buffer", "NUMBER", "instance_variables", "buffer_chunk_limit", "buffer_queue_limit", "mon_owner", "mon_count", "mon_mutex", "parallel_pop", "config", "buffer_path", "buffer_path_prefix", "buffer_path_suffix", "flush_at_shutdown", "queue", "map", "irb", "main", "NUMBER", "NUMBER", "exit", "Hi", "there", "It", "seems", "that", "out_forward", "plugin", "opens", "a", "new", "connection", "every", "time", "it", "has", "any", "data", "to", "send", "NUMBER", "Here", "be", "the", "tcpdump", "that", "shows", "that", "connection", "has", "be", "opened", "twice", "while", "sending", "two", "separate", "log", "message", "by", "means", "of", "forwarding", "No", "NUMBER", "Time", "Source", "Destination", "Protocol", "Length", "Info", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "SYN", "Seq", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "MSS", "NUMBER", "SACK_PERM", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "WS", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "SYN", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "MSS", "NUMBER", "SACK_PERM", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "WS", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "PSH", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "PSH", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "PSH", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "PSH", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "FIN", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "FIN", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "SYN", "Seq", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "MSS", "NUMBER", "SACK_PERM", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "WS", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "SYN", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "MSS", "NUMBER", "SACK_PERM", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "WS", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "PSH", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "PSH", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "PSH", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "PSH", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "FIN", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "FIN", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TCP", "NUMBER", "NUMBER", "NUMBER", "ACK", "Seq", "NUMBER", "Ack", "NUMBER", "Win", "NUMBER", "Len", "NUMBER", "TSval", "NUMBER", "TSecr", "NUMBER", "Is", "it", "possible", "to", "keep", "the", "connection", "open", "up", "to", "the", "connection", "failure", "and", "reconnect", "attempt", "to", "the", "backup", "server", "Kind", "Regards", "Sergey", "keep", "forward", "plugin", "works", "like", "a", "charm", "NUMBER", "Thanks", "so", "much", "Regards", "Sergey", "There", "be", "no", "support", "for", "rbx", "NUMBER", "mode", "on", "Travis", "CI", "LINK", "ci", "NUMBER", "com", "user", "languages", "ruby", "Rubinius", "I", "think", "this", "be", "typo", "NUMBER", "The", "change", "log", "was", "change", "NUMBER", "days", "ago", "NUMBER", "But", "the", "date", "be", "NUMBER", "NUMBER", "NUMBER", "It", "s", "my", "pleasure", "I", "met", "troubles", "that", "fluentd", "do", "not", "terminate", "sometimes", "NUMBER", "Using", "sigdump", "LINK", "I", "find", "that", "fluentd", "was", "stuck", "at", "TCPSocket", "NUMBER", "new", "on", "shutdown", "NUMBER", "Please", "see", "LINK", "for", "details", "NUMBER", "So", "I", "implement", "SocketUtil", "NUMBER", "create_tcp_socket", "and", "SocketUtil", "NUMBER", "open_tcp_socket", "having", "connect_timeout", "option", "as", "LINK", "lang", "NUMBER", "org", "issue", "NUMBER", "says", "NUMBER", "PS", "NUMBER", "Please", "wait", "to", "merge", "NUMBER", "I", "will", "test", "for", "a", "week", "on", "my", "production", "environment", "NUMBER", "I", "again", "met", "situations", "that", "fluentd", "do", "not", "die", "NUMBER", "The", "sigdump", "be", "here", "LINK", "This", "be", "telling", "as", "the", "process", "was", "stuck", "at", "Socket", "NUMBER", "pack_sockaddr_in", "port", "host", "line", "of", "SocketUtil", "create_tcp_socket", "NUMBER", "ruby", "def", "create_tcp_socket", "host", "port", "opts", "connect_timeout", "opts", "connect_timeout", "NUMBER", "addr", "Socket", "NUMBER", "pack_sockaddr_in", "port", "host", "s", "Socket", "NUMBER", "new", "AF_INET", "SOCK_STREAM", "NUMBER", "begin", "s", "NUMBER", "connect_nonblock", "addr", "rescue", "Errno", "EINPROGRESS", "IO", "NUMBER", "select", "nil", "s", "nil", "connect_timeout", "or", "raise", "Timeout", "Error", "end", "s", "end", "Let", "me", "summarize", "here", "NUMBER", "SocketUtil", "NUMBER", "create_tcp_socket", "resolve", "some", "of", "problem", "that", "fluentd", "do", "not", "terminate", "NUMBER", "Before", "applying", "it", "I", "get", "fluentd", "stuck", "very", "often", "like", "once", "out", "of", "NUMBER", "times", "of", "fluentd", "cluster", "restart", "NUMBER", "After", "applying", "it", "the", "frequency", "was", "reduced", "like", "once", "out", "of", "NUMBER", "times", "NUMBER", "NUMBER", "Still", "Fluentd", "get", "stuck", "at", "Socket", "NUMBER", "pack_sockaddr_in", "but", "this", "problem", "was", "resolve", "by", "applying", "patches", "from", "LINK", "lang", "NUMBER", "org", "issue", "NUMBER", "NUMBER", "New", "Still", "Fluentd", "get", "stuck", "at", "lsock", "NUMBER", "close", "NUMBER", "See", "LINK", "It", "looks", "the", "NUMBER", "new", "issue", "be", "cause", "by", "TCPSocket", "NUMBER", "open", "listen_address", "port", "sock", "be", "for", "stopping", "event", "loop", "NUMBER", "If", "a", "connection", "causes", "a", "timeout", "do", "it", "still", "affect", "event", "loop", "I", "will", "implement", "the", "timeout", "option", "for", "Coolio", "Loop", "run_once", "as", "frsyuki", "said", "at", "LINK", "Implemented", "Coolio", "Loop", "run", "timeout", "at", "LINK", "and", "LINK", "I", "restarted", "my", "fluentd", "cluster", "NUMBER", "times", "and", "get", "stuck", "NUMBER", "time", "NUMBER", "great", "work", "NUMBER", "NUMBER", "Let", "me", "write", "a", "note", "here", "NUMBER", "So", "plugin", "creators", "can", "support", "log_level", "without", "breaking", "backward", "compatibility", "I", "mean", "without", "discarding", "support", "of", "old", "fluentd", "version", "as", "ruby", "module", "Fluent", "class", "FoobarOuput", "TAG", "LINK", "We", "should", "be", "able", "to", "use", "headers", "NUMBER", "This", "be", "especially", "important", "when", "a", "proxy", "pass", "IP", "in", "a", "custom", "header", "NUMBER", "Might", "be", "useful", "for", "other", "headers", "as", "well", "NUMBER", "repeatedly", "How", "about", "now", "NUMBER", "NUMBER", "Let", "me", "write", "a", "note", "here", "for", "when", "porting", "LINK", "plugin", "record", "reformer", "LINK", "plugin", "record", "reformer", "NUMBER", "NUMBER", "I", "like", "to", "rename", "output_tag", "option", "to", "tag", "option", "output_tag", "be", "obsolete", "NUMBER", "I", "like", "to", "discard", "the", "classic", "style", "want", "to", "support", "only", "record", "directive", "style", "NUMBER", "NUMBER", "I", "like", "to", "default", "false", "for", "enable_ruby", "NUMBER", "I", "like", "and", "dislike", "the", "idea", "NUMBER", "I", "dislike", "the", "idea", "because", "I", "like", "the", "fact", "that", "Fluentd", "be", "very", "simple", "and", "lightweight", "you", "get", "only", "what", "you", "need", "t", "he", "module", "architecture", "be", "obviously", "part", "of", "the", "success", "and", "that", "this", "goes", "against", "the", "philosophy", "NUMBER", "I", "like", "the", "idea", "because", "as", "repeatedly", "says", "these", "plugins", "be", "very", "simple", "light", "and", "commonly", "use", "so", "it", "make", "sense", "NUMBER", "In", "the", "end", "I", "would", "vote", "for", "It", "be", "very", "useful", "for", "type", "converting", "with", "in_tail", "plugin", "or", "use", "fluent", "plugin", "typecast", "NUMBER", "But", "for", "now", "other", "plugin", "couldn", "t", "use", "this", "module", "as", "mix", "in", "plugin", "NUMBER", "I", "have", "created", "fluent", "mixin", "type", "converter", "LINK", "ken", "fluent", "mixin", "type", "converter", "to", "act", "calling", "Fluent", "TextParser", "TypeConverter", "LINK", "L", "NUMBER", "as", "mix", "in", "plugin", "NUMBER", "However", "It", "be", "better", "to", "provide", "this", "function", "as", "build", "in", "mix", "in", "NUMBER", "Would", "you", "please", "give", "me", "opinion", "about", "this", "issue", "Thank", "you", "NUMBER", "What", "use", "cases", "be", "there", "The", "use", "cases", "be", "mainly", "for", "input", "plugins", "which", "not", "have", "type", "NUMBER", "emitting", "all", "of", "keys", "be", "string", "NUMBER", "It", "be", "the", "useful", "solution", "type", "converting", "with", "this", "mixin", "transparently", "NUMBER", "But", "I", "have", "notice", "this", "type", "of", "mixin", "has", "less", "use", "cases", "than", "SetXXXKeyMixin", "by", "repeatedly", "s", "post", "NUMBER", "Thus", "I", "feel", "like", "it", "would", "be", "better", "keep", "this", "mixin", "as", "fluent", "mixin", "type", "converter", "NUMBER", "Related", "NUMBER", "NUMBER", "Add", "start_reading_head", "parameter", "option", "to", "in_tail", "input", "plugin", "NUMBER", "A", "new", "behavior", "in_tail", "starts", "reading", "the", "head", "of", "a", "log", "file", "if", "pos", "file", "exists", "and", "fluentd", "starts", "first", "time", "NUMBER", "An", "old", "behavior", "in_tail", "starts", "reading", "the", "tail", "of", "a", "log", "file", "if", "pos", "file", "exists", "and", "fluentd", "starts", "first", "time", "NUMBER", "in_tail", "work", "like", "a", "new", "behavior", "if", "start_reading_head", "be", "true", "NUMBER", "in_tail", "work", "like", "a", "old", "behavior", "if", "start_reading_head", "be", "fasle", "NUMBER", "By", "default", "start_reading_head", "be", "false", "NUMBER", "Fix", "InputTestDriver", "InputTestDriver", "overrides", "Engine", "NUMBER", "emit_stream", "for", "test", "before", "input", "plguin", "starts", "NUMBER", "Before", "fix", "Override", "Engine", "NUMBER", "emit_stream", "for", "test", "after", "in_tail", "input", "plguin", "starts", "NUMBER", "When", "input", "plugin", "reads", "logs", "which", "exists", "before", "it", "starts", "it", "call", "Engine", "stream_emit", "but", "InputTestDriver", "do", "not", "still", "override", "Engine", "stream_emit", "NUMBER", "The", "old", "behavior", "should", "ve", "worked", "as", "following", "in_tail", "starts", "reading", "the", "tail", "of", "a", "log", "file", "if", "pos", "file", "do", "not", "exist", "that", "be", "the", "first", "starting", "time", "or", "when", "pos_file", "option", "be", "not", "specified", "NUMBER", "So", "I", "think", "the", "new", "behavior", "should", "work", "as", "following", "in_tail", "starts", "reading", "from", "the", "head", "of", "a", "log", "file", "if", "pos", "file", "do", "not", "exist", "that", "be", "the", "first", "starting", "time", "or", "when", "pos_file", "option", "be", "not", "specified", "NUMBER", "In", "both", "case", "in_tail", "should", "continue", "to", "read", "from", "the", "recorded", "position", "if", "pos", "file", "exists", "NUMBER", "A", "suggestion", "for", "the", "name", "read_from_head", "Any", "other", "opinions", "A", "suggestion", "for", "the", "name", "read_from_head", "I", "think", "it", "be", "a", "good", "name", "because", "the", "opposite", "of", "tail", "be", "head", "NUMBER", "It", "be", "easy", "to", "imagine", "opposite", "word", "of", "tail", "NUMBER", "repeatedly", "be", "read_from_head", "okay", "for", "you", "sonots", "sonots", "says", "in_tail", "starts", "reading", "from", "the", "head", "of", "a", "log", "file", "if", "pos", "file", "do", "not", "exist", "that", "be", "the", "first", "starting", "time", "or", "when", "pos_file", "option", "be", "not", "specified", "NUMBER", "When", "pos_file", "option", "be", "not", "specifed", "pos", "file", "do", "not", "exsits", "NUMBER", "Logs", "be", "read", "duplicately", "in", "the", "following", "case", "in_tail", "starts", "reading", "log", "file", "from", "head", "in_tail", "be", "shoutdowned", "NUMBER", "in_tail", "starts", "reading", "log", "file", "from", "head", "pos", "file", "do", "not", "existed", "so", "in_tail", "reads", "logs", "from", "head", "duplicately", "NUMBER", "I", "think", "that", "in_tail", "should", "read", "logs", "form", "tail", "when", "pos_file", "option", "be", "not", "specified", "NUMBER", "suzukaze", "it", "reading", "from", "tail", "can", "be", "achieved", "by", "the", "original", "old", "behavior", "NUMBER", "The", "duplication", "issue", "be", "the", "reason", "why", "we", "did", "not", "have", "read_from_head", "option", "but", "NUMBER", "be", "saying", "as", "he", "still", "wants", "it", "NUMBER", "sonots", "repeatedly", "OK", "I", "will", "implement", "in_tail", "to", "work", "as", "the", "following", "in_tail", "starts", "reading", "from", "the", "head", "of", "a", "log", "file", "if", "pos", "file", "do", "not", "exist", "that", "be", "the", "first", "starting", "time", "or", "when", "pos_file", "option", "be", "not", "specified", "NUMBER", "repeatedly", "says", "I", "think", "in_tail", "should", "print", "the", "warning", "when", "read_from_head", "be", "true", "without", "pos_file", "parameter", "NUMBER", "I", "will", "implelement", "the", "above", "NUMBER", "To", "build", "a", "new", "brach", "pass", "in", "ruby", "NUMBER", "but", "fail", "in", "NUMBER", "p", "NUMBER", "I", "ll", "check", "it", "NUMBER", "An", "old", "branch", "be", "LINK", "_tail_backup", "Add", "start_reading_head", "cofing", "parameter", "Override", "Engine", "NUMBER", "emit_stream", "for", "test", "before", "input", "plguin", "start", "I", "ll", "test", "commit", "in", "Travis", "CI", "of", "my", "repository", "because", "my", "commit", "causes", "Travis", "CI", "build", "error", "NUMBER", "repeatedly", "I", "delete", "NUMBER", "test", "for", "testintg", "rotate", "when", "fluent", "doesn", "t", "start", "because", "they", "cannot", "work", "in", "travis", "ci", "NUMBER", "I", "use", "CONFIG_WITHOUT_POST_FILE", "I", "push", "commit", "Travis", "CI", "doest", "not", "start", "build", "please", "start", "build", "in", "travis", "CI", "NUMBER", "In", "my", "repository", "build", "pass", "LINK", "ci", "NUMBER", "org", "suzukaze", "fluentd", "build", "NUMBER", "Deleted", "NUMBER", "test", "be", "important", "because", "we", "make", "sure", "that", "fluentd", "reads", "rotated", "logs", "when", "it", "doesn", "t", "start", "NUMBER", "LINK", "_tail", "NUMBER", "rb", "L", "NUMBER", "Ruby", "NUMBER", "on", "travis", "ci", "pass", "NUMBER", "Ruby", "NUMBER", "on", "travis", "ci", "faild", "NUMBER", "thread", "variable", "in", "shutdown", "medhod", "of", "in_tail", "NUMBER", "rb", "be", "nil", "NUMBER", "thread", "variable", "be", "set", "instance", "by", "start", "method", "of", "in_tail", "NUMBER", "rb", "NUMBER", "In", "shutdown", "method", "thread", "be", "not", "nil", "normally", "NUMBER", "LINK", "ci", "NUMBER", "org", "fluent", "fluentd", "jobs", "NUMBER", "NUMBER", "NUMBER", "TailInputTest", "test_rotate_file_when_fluent_doesnot_start_with_", "NUMBER", "Error", "test_rotate_file_when_fluent_doesnot_start_with_read_from_head", "TailInputTest", "TypeError", "wrong", "argument", "type", "nil", "expected", "Data", "NUMBER", "NOTE", "You", "may", "have", "encountered", "a", "bug", "in", "the", "Ruby", "interpreter", "or", "extension", "libraries", "NUMBER", "Bug", "report", "be", "welcome", "NUMBER", "For", "details", "LINK", "lang", "NUMBER", "org", "bugreport", "NUMBER", "html", "I", "think", "the", "fail", "reason", "be", "Linux", "problem", "Ruby", "NUMBER", "repeatedly", "I", "install", "ruby", "NUMBER", "dev", "in", "Ubuntu", "but", "I", "coudn", "t", "install", "cool", "NUMBER", "io", "v", "NUMBER", "because", "of", "compile", "error", "NUMBER", "gem", "install", "cool", "NUMBER", "io", "v", "NUMBER", "error", "log", "LINK", "I", "give", "up", "NUMBER", "I", "close", "PR", "NUMBER", "Thank", "you", "so", "far", "NUMBER", "Our", "team", "be", "trying", "to", "determine", "if", "this", "makes", "sense", "or", "would", "be", "possible", "NUMBER", "Currently", "we", "re", "use", "Debian", "and", "the", "we", "can", "just", "add", "the", "td", "agent", "user", "to", "the", "adm", "group", "but", "this", "may", "not", "always", "be", "the", "case", "NUMBER", "We", "d", "prefer", "not", "to", "run", "fluentd", "as", "root", "and", "we", "d", "prefer", "to", "keep", "certain", "logfiles", "not", "world", "readable", "NUMBER", "This", "may", "be", "be", "better", "suited", "to", "a", "google", "group", "discussion", "NUMBER", "Suggestions", "or", "explanation", "as", "to", "why", "this", "be", "not", "preferable", "would", "be", "fantastic", "NUMBER", "No", "reply", "NUMBER", "Please", "reopen", "this", "issue", "if", "you", "have", "detailed", "comment", "NUMBER", "At", "submit_buffer", "fix", "writer", "selection", "makes", "throughput", "bottleneck", "NUMBER", "Fix", "to", "select", "a", "writer", "by", "rough", "round", "robin", "to", "reduce", "bottlenecks", "not", "to", "reduce", "performance", "without", "locks", "What", "be", "important", "be", "to", "select", "a", "different", "writer", "from", "previous", "submits", "not", "to", "select", "strictly", "next", "writer", "NUMBER", "That", "be", "why", "this", "patch", "doesn", "t", "include", "locks", "NUMBER", "Tests", "add", "LINK", "LINK", "issuecomment", "NUMBER", "slove", "it", "maybe", "your", "s_", "NUMBER", "_", "NUMBER", "match", "line", "NUMBER", "NUMBER", "length", "be", "NUMBER", "my", "env", "have", "an", "n", "NUMBER", "Later", "on", "I", "then", "test", "under", "New", "configuration", "format", "also", "resolve", "this", "problem", "NUMBER", "LINK", "be", "it", "possible", "to", "steam", "minute", "file", "to", "s", "NUMBER", "we", "have", "an", "application", "which", "create", "new", "file", "every", "minute", "with", "filename_CURHOUR_CURMINUTE", "NUMBER", "txt", "thanks", "vijeesh", "my", "format", "be", "separator", "be", "td", "agent", "NUMBER", "conf", "NUMBER", "format", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "_", "TAG", "_", "s_", "_", "_", "NUMBER", "_sshd", "NUMBER", "_from", "TAG", "_", "NUMBER", "_", "NUMBER", "or", "format", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "_", "TAG", "_", "s_", "_", "NUMBER", "_sshd", "NUMBER", "_from", "TAG", "_", "NUMBER", "but", "problem", "be", "come", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "tail_ex", "path", "data", "log", "format", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "_", "pos_file", "var", "tmp", "securelog", "tag", "audit", "NUMBER", "securelog", "TAG", "TAG", "type", "file", "path", "tmp", "test", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "tail_ex", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "config", "error", "file", "td", "agent", "NUMBER", "conf", "error", "Unknown", "format", "template", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "_", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "process", "finished", "code", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "process", "died", "within", "NUMBER", "second", "NUMBER", "exit", "NUMBER", "NUMBER", "can", "you", "give", "me", "a", "patch", "my", "work", "be", "starting", "NUMBER", "What", "about", "time", "release", "next", "version", "thx", "i", "modify", "v", "NUMBER", "config", "parse", "code", "slove", "it", "thx", "hello", "v", "NUMBER", "still", "not", "fix", "it", "Will", "be", "fix", "by", "v", "NUMBER", "configuration", "format", "since", "next", "Fluentd", "version", "NUMBER", "NUMBER", "party", "buffer", "plugins", "needs", "hook", "point", "how", "to", "check", "whether", "chunk", "should", "be", "flushed", "or", "not", "NUMBER", "Chunks", "be", "flushed", "for", "many", "reasons", "like", "how", "many", "data", "stored", "in", "it", "how", "many", "data", "stored", "in", "one", "second", "NUMBER", "and", "many", "other", "types", "of", "buffers", "may", "exists", "Hmm", "I", "should", "commit", "directly", "with", "this", "pull", "request", "comment", "on", "commit", "comment", "NUMBER", "I", "m", "sorry", "that", "I", "cannot", "wait", "for", "travis", "ci", "test", "before", "commit", "it", "NUMBER", "Some", "minutes", "later", "of", "that", "I", "fix", "bug", "of", "that", "commit", "NUMBER", "LINK", "ci", "NUMBER", "org", "fluent", "fluentd", "build", "To", "do", "flushing", "with", "more", "high", "frequency", "with", "floating", "point", "value", "of", "flush_interval", "This", "patch", "do", "not", "breaks", "both", "of", "compatibilities", "and", "internal", "external", "apis", "NUMBER", "So", "I", "ll", "merge", "this", "myself", "NUMBER", "I", "feel", "the", "difference", "between", "flush_interval", "and", "try_flush_interval", "be", "very", "ambiguous", "NUMBER", "I", "understood", "but", "users", "may", "not", "NUMBER", "try_flush_interval", "be", "very", "minor", "option", "for", "users", "who", "wants", "intervals", "sub", "NUMBER", "so", "I", "think", "naming", "be", "not", "important", "NUMBER", "Do", "you", "have", "any", "other", "idea", "for", "this", "option", "s", "name", "Once", "I", "thought", "enqueue_interval", "would", "be", "suitable", "but", "looks", "it", "be", "not", "NUMBER", "Hmm", "NUMBER", "What", "about", "run_interval", "It", "would", "be", "still", "ambiguous", "though", "NUMBER", "I", "can", "t", "come", "up", "with", "any", "alternatives", "more", "NUMBER", "Can", "we", "do", "this", "if", "flush_interval", "be", "less", "than", "NUMBER", "set", "try_flush_interval", "flush_interval", "NUMBER", "users", "can", "set", "flush_interval", "NUMBER", "thus", "we", "don", "t", "have", "to", "add", "confusing", "option", "NUMBER", "Automatically", "configured", "try_flush_interval", "seems", "very", "confusing", "NUMBER", "What", "value", "should", "we", "set", "it", "for", "flush_interval", "NUMBER", "s", "NUMBER", "s", "current", "default", "NUMBER", "NUMBER", "NUMBER", "s", "flush_interval", "NUMBER", "for", "flush_interval", "NUMBER", "NUMBER", "NUMBER", "for", "flush_interval", "NUMBER", "s", "NUMBER", "NUMBER", "Moreover", "the", "worst", "case", "of", "real", "intervals", "per", "flushes", "be", "flush_interval", "try_flush_interval", "NUMBER", "This", "be", "a", "bother", "for", "serious", "situations", "about", "flush", "timing", "NUMBER", "Actual", "flush", "intervals", "and", "configured", "flush_interval", "has", "different", "values", "and", "we", "cannot", "understand", "why", "these", "values", "be", "different", "without", "implementation", "knowledges", "NUMBER", "These", "be", "why", "explicit", "configuration", "options", "try_flush_interval", "should", "exists", "NUMBER", "We", "don", "t", "have", "to", "change", "existent", "behavior", "NUMBER", "We", "need", "small", "try_flush_interval", "only", "when", "flush_interval", "be", "less", "than", "NUMBER", "try_flush_interval", "NUMBER", "flush_interval", "NUMBER", "NUMBER", "min", "What", "do", "you", "mean", "about", "the", "worst", "case", "Do", "you", "mean", "possibility", "if", "having", "NUMBER", "s", "NUMBER", "NUMBER", "NUMBER", "interval", "when", "flush_interval", "NUMBER", "be", "too", "long", "How", "do", "you", "think", "should", "flush", "threads", "run", "if", "num_threads", "NUMBER", "This", "be", "not", "necessary", "for", "v", "NUMBER", "though", "NUMBER", "NUMBER", "All", "threads", "run", "roughly", "every", "flush_interval", "seconds", "write", "method", "will", "be", "call", "num_threads", "times", "every", "flush_interval", "seconds", "current", "behavior", "NUMBER", "Exactly", "one", "thread", "runs", "roughly", "every", "flush_interval", "seconds", "NUMBER", "NUMBER", "Exactly", "one", "thread", "runs", "exactly", "every", "flush_interval", "seconds", "Yes", "NUMBER", "NUMBER", "s", "be", "too", "long", "for", "flush_interval", "NUMBER", "NUMBER", "That", "be", "NUMBER", "x", "longer", "than", "expected", "NUMBER", "More", "complex", "mechanism", "for", "flushing", "flush", "threads", "looks", "bad", "for", "me", "NUMBER", "NUMBER", "Current", "default", "configuration", "NUMBER", "s", "flush_interval", "NUMBER", "s", "satisfy", "expectations", "of", "almost", "all", "of", "users", "NUMBER", "For", "serious", "situations", "simple", "mechanism", "and", "explicit", "configurations", "be", "good", "to", "understand", "NUMBER", "More", "maintenance", "cost", "for", "v", "NUMBER", "looks", "bad", "idea", "My", "alternatives", "about", "this", "problem", "be", "to", "rename", "from", "try_flush_interval", "to", "anyone", "to", "fix", "flush_interval", "specifications", "like", "below", "For", "precise", "flush_interval", "and", "automatic", "configuration", "we", "can", "do", "this", "NUMBER", "alternative", "above", "ruby", "internal_try_flush_interval", "min", "NUMBER", "flush_interval", "NUMBER", "internal_flush_interval", "flush_interval", "internal_try_flush_interval", "use", "internal_flush_interval", "instead", "of", "flush_interval", "But", "this", "code", "works", "differently", "from", "current", "version", "of", "BufferedOutput", "NUMBER", "Apparently", "v", "NUMBER", "already", "implement", "idea", "NUMBER", "as", "I", "commented", "above", "NUMBER", "I", "think", "it", "s", "ok", "to", "have", "additional", "try_flush_interval", "option", "for", "v", "NUMBER", "And", "v", "NUMBER", "will", "obsolete", "it", "NUMBER", "Hello", "It", "looks", "like", "someone", "maybe", "you", "add", "fluentd", "to", "Code", "Climate", "a", "few", "months", "back", "and", "I", "thought", "you", "might", "want", "to", "know", "NUMBER", "I", "work", "at", "Code", "Climate", "we", "do", "automate", "code", "reviews", "for", "Ruby", "and", "JavaScript", "use", "static", "analysis", "and", "we", "re", "completely", "free", "for", "open", "source", "NUMBER", "You", "can", "view", "your", "metrics", "here", "LINK", "In", "case", "you", "want", "this", "information", "to", "be", "available", "to", "contributors", "this", "PR", "just", "add", "a", "dynamic", "badge", "to", "the", "README", "similar", "to", "Travis", "that", "displays", "the", "code", "quality", "GPA", "If", "you", "have", "any", "question", "let", "me", "know", "NUMBER", "I", "hope", "you", "find", "Code", "Climate", "useful", "NUMBER", "Cheers", "Mike", "NUMBER", "LINK", "At", "least", "there", "be", "nothing", "to", "break", "code", "or", "documents", "NUMBER", "hi", "i", "can", "t", "understand", "one", "thing", "when", "i", "transfer", "an", "wrong", "structure", "events", "to", "the", "fluentd", "service", "then", "it", "will", "start", "to", "retry", "at", "that", "time", "i", "transfer", "some", "correct", "structure", "events", "to", "fluentd", "but", "they", "will", "not", "be", "output", "timely", "because", "it", "had", "be", "still", "retrying", "NUMBER", "i", "just", "want", "to", "know", "whether", "this", "be", "required", "to", "design", "or", "i", "had", "miss", "some", "configuration", "can", "multiple", "threads", "let", "the", "new", "events", "output", "and", "retrying", "at", "the", "same", "time", "and", "now", "fluentd", "support", "multiple", "threads", "thanks", "i", "just", "see", "your", "comment", "NUMBER", "for", "example", "i", "create", "mysql", "table", "with", "columns", "id", "int", "NUMBER", "NOT", "NULL", "AUTO_INCREMENT", "job_name", "varchar", "NUMBER", "NOT", "NULL", "DEFAULT", "host", "varchar", "NUMBER", "NOT", "NULL", "DEFAULT", "PRIMARY", "KEY", "id", "then", "i", "transfered", "one", "log", "like", "logger", "post", "job_monitor", "NUMBER", "access", "job_name", "test", "i", "didn", "t", "transfer", "host", "then", "the", "fluentd", "log", "will", "report", "temporarily", "fail", "to", "flush", "the", "buffer", "NUMBER", "next_retry", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error_class", "Mysql", "NUMBER", "Error", "error", "Column", "host", "cannot", "be", "null", "instance", "NUMBER", "it", "will", "keep", "retrying", "until", "the", "times", "of", "retry", "reach", "the", "number", "of", "retry_limit", "NUMBER", "At", "that", "time", "i", "transfered", "an", "correct", "log", "logger", "post", "job_monitor", "NUMBER", "access", "job_name", "test", "host", "myhost", "This", "log", "will", "be", "blocked", "to", "output", "to", "mysql", "until", "fluentd", "retry", "s", "stoped", "NUMBER", "Then", "i", "use", "num_threads", "set", "to", "NUMBER", "like", "num_threads", "NUMBER", "but", "it", "didn", "t", "work", "the", "problem", "still", "continue", "NUMBER", "The", "following", "be", "my", "configuration", "apache", "TAG", "type", "mysql", "buffer_type", "memory", "buffer_chunk_limit", "NUMBER", "m", "buffer_queue_limit", "NUMBER", "num_threads", "NUMBER", "retry_limit", "NUMBER", "retry_wait", "NUMBER", "s", "host", "NUMBER", "port", "NUMBER", "database", "dc", "username", "root", "password", "secret", "table", "job_log", "key_names", "job_name", "start_time", "end_time", "spend_time", "error_info", "level", "host", "columns", "job_name", "start_time", "end_time", "spend_time", "error_info", "level", "host", "flush_interval", "NUMBER", "s", "TAG", "Was", "this", "issue", "solve", "with", "NUMBER", "repeatedly", "Looks", "good", "NUMBER", "Sorry", "for", "the", "late", "reply", "NUMBER", "Now", "we", "be", "still", "work", "for", "a", "technical", "problem", "in", "other", "area", "so", "give", "us", "a", "little", "time", "NUMBER", "Plus", "we", "think", "need", "some", "idea", "for", "this", "issue", "NUMBER", "Please", "wait", "NUMBER", "Could", "you", "close", "this", "issue", "at", "present", "We", "need", "those", "code", "currently", "to", "merge", "with", "trunk", "code", "efficiently", "and", "to", "compare", "Linux", "behavior", "and", "Windows", "behavior", "NUMBER", "In", "future", "We", "ll", "want", "to", "try", "this", "issue", "again", "after", "we", "ll", "get", "a", "better", "continuous", "way", "to", "merge", "with", "trunk", "code", "and", "get", "a", "better", "stable", "version", "NUMBER", "add", "elastic", "search", "and", "kibana", "inegration", "steps", "as", "part", "of", "the", "installation", "or", "the", "rpm", "file", "installation", "steps", "LGTM", "NUMBER", "NUMBER", "I", "commented", "for", "bool", "type", "LINK", "issuecomment", "NUMBER", "NUMBER", "NUMBER", "Large", "refactoring", "Hi", "On", "Debian", "Wheezy", "I", "get", "the", "following", "error", "NUMBER", "TAG", "NUMBER", "k", "NUMBER", "however", "Package", "libssl", "NUMBER", "be", "not", "install", "NUMBER", "NUMBER", "Can", "you", "please", "either", "provide", "an", "update", "version", "of", "this", "package", "or", "provide", "the", "debian", "source", "package", "so", "that", "one", "can", "repack", "the", "NUMBER", "deb", "Greetz", "Andre", "Hi", "thanks", "for", "the", "reply", "NUMBER", "Sorry", "I", "miss", "the", "source", "package", "completely", "NUMBER", "Will", "try", "it", "on", "Debian", "NUMBER", "Greetz", "Andre", "PS", "Debian", "Squeeze", "will", "soon", "loose", "support", "Wheezy", "be", "define", "as", "stable", "in", "May", "NUMBER", "NUMBER", "NUMBER", "for", "Debian", "support", "NUMBER", "I", "d", "like", "to", "run", "Fluentd", "on", "Google", "Compute", "Engine", "Debian", "image", "We", "re", "in", "a", "process", "of", "migrating", "the", "build", "script", "from", "custom", "to", "omnibus", "ruby", "NUMBER", "That", "should", "make", "us", "easier", "to", "support", "multiple", "version", "platforms", "NUMBER", "LINK", "td", "agent", "Great", "to", "hear", "that", "NUMBER", "Any", "estimate", "on", "when", "you", "ll", "be", "do", "with", "the", "migration", "to", "omnibus", "ruby", "kzk", "do", "you", "have", "an", "idea", "of", "when", "this", "migration", "will", "be", "complete", "hernandesbsousa", "Our", "plan", "be", "change", "NUMBER", "Keeping", "compatible", "be", "hard", "so", "we", "wil", "provide", "td", "agent", "NUMBER", "use", "omunibus", "ruby", "NUMBER", "td", "agent", "NUMBER", "doesn", "t", "have", "a", "directory", "strucutre", "compatiblity", "with", "old", "td", "agent", "from", "usr", "lib", "fluent", "to", "opt", "td", "agent", "NUMBER", "I", "also", "post", "the", "td", "agent", "NUMBER", "idea", "in", "Fluentd", "ML", "NUMBER", "LINK", "topic", "fluentd", "YSZvylqbO", "NUMBER", "Currenlty", "we", "be", "now", "clean", "up", "td", "agent", "NUMBER", "and", "test", "the", "installation", "NUMBER", "I", "want", "to", "release", "td", "agent", "NUMBER", "in", "the", "next", "week", "or", "early", "May", "NUMBER", "That", "s", "great", "news", "thank", "you", "very", "much", "Will", "be", "looking", "forward", "to", "this", "new", "release", "interesting", "but", "true", "or", "yes", "to", "true", "in", "bool", "type", "be", "not", "enough", "NUMBER", "NUMBER", "should", "also", "be", "support", "think", "of", "log", "outputs", "from", "perl", "NUMBER", "Some", "people", "from", "other", "programming", "language", "communities", "would", "have", "similar", "opinions", "for", "this", "like", "support", "True", "NUMBER", "In", "my", "opinion", "because", "ruby", "has", "the", "boolean", "type", "treating", "the", "word", "true", "as", "true", "be", "enough", "for", "ruby", "NUMBER", "I", "believe", "rubyist", "will", "not", "output", "NUMBER", "into", "the", "log", "file", "to", "express", "boolean", "true", "_never_", "NUMBER", "Logger", "NUMBER", "new", "STDOUT", "NUMBER", "info", "true", "I", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "INFO", "true", "I", "don", "t", "have", "positive", "impression", "to", "add", "syntax", "extension", "to", "regexp", "w", "named", "capture", "NUMBER", "On", "the", "other", "hand", "I", "understand", "importance", "of", "typing", "of", "in_tail", "s", "output", "data", "NUMBER", "repeatedly", "Yes", "that", "be", "simple", "solution", "and", "doesn", "t", "need", "change", "regular", "expressions", "NUMBER", "repeatedly", "NUMBER", "yes", "false", "False", "and", "FALSE", "to", "false", "NUMBER", "no", "true", "True", "and", "TRUE", "to", "true", "otherwise", "undetermined", "whichever", "you", "like", "Sorry", "mistake", "NUMBER", "no", "false", "False", "and", "FALSE", "to", "false", "NUMBER", "yes", "true", "True", "and", "TRUE", "to", "true", "otherwise", "undetermined", "whichever", "you", "like", "LGTM", "NUMBER", "ok_hand", "Looks", "good", "NUMBER", "NUMBER", "How", "do", "you", "suppress", "regular", "message", "non", "stacktrace", "message", "I", "add", "some", "comments", "on", "NUMBER", "eb", "NUMBER", "Hi", "let", "me", "give", "my", "NUMBER", "ct", "on", "this", "topic", "althought", "I", "m", "kind", "of", "new", "to", "fluentd", "NUMBER", "For", "me", "as", "a", "user", "as", "and", "administrator", "of", "a", "system", "use", "td", "agent", "fluentd", "it", "be", "important", "to", "see", "the", "log", "message", "they", "make", "sense", "to", "me", "they", "be", "short", "and", "meaningful", "NUMBER", "Only", "in", "cases", "where", "I", "want", "to", "debug", "and", "understand", "certain", "issue", "I", "m", "interested", "in", "stacktraces", "I", "m", "a", "user", "not", "a", "developer", "at", "the", "end", "NUMBER", "In", "my", "opinion", "stacktraces", "should", "only", "be", "logged", "in", "an", "trace", "log", "level", "which", "be", "more", "than", "the", "error", "level", "or", "if", "a", "certain", "commandline", "option", "be", "given", "NUMBER", "Again", "just", "my", "NUMBER", "ct", "NUMBER", "Keep", "on", "the", "awesome", "work", "Markus", "I", "want", "some", "message", "like", "NUMBER", "and", "suppressed", "same", "stacktrace", "instead", "of", "stacktrace", "itself", "NUMBER", "repeatedly", "thekorn", "may", "say", "that", "Logger", "stacktrace", "should", "not", "output", "nothing", "in", "normal", "log", "level", "without", "v", "options", "NUMBER", "Isn", "t", "it", "repeatedly", "Yes", "we", "need", "log", "lines", "that", "indicates", "stacktrace", "should", "be", "printed", "but", "suppressed", "NUMBER", "Without", "such", "indicator", "we", "cannot", "see", "whether", "normal", "error", "log", "or", "raise", "and", "unexpect", "error", "NUMBER", "Right", "what", "I", "wanted", "to", "say", "be", "with", "any", "logging", "option", "lower", "than", "vv", "means", "q", "qq", "and", "v", "I", "don", "t", "want", "to", "see", "any", "stacktrace", "in", "the", "logs", "As", "a", "developer", "of", "Fluentd", "having", "stacktrace", "at", "least", "once", "in", "log", "file", "be", "helpful", "even", "in", "users", "environment", "NUMBER", "It", "makes", "easy", "to", "improve", "Fluentd", "NUMBER", "Let", "s", "say", "Fluentd", "has", "a", "bug", "and", "an", "user", "report", "it", "on", "mailing", "list", "NUMBER", "I", "ll", "ask", "the", "user", "to", "attach", "log", "file", "NUMBER", "If", "there", "be", "stacktrace", "it", "makes", "very", "easy", "to", "investigate", "the", "problem", "NUMBER", "Otherwise", "I", "need", "to", "ask", "the", "user", "to", "investigate", "the", "issue", "on", "their", "environment", "NUMBER", "Especially", "if", "the", "problem", "be", "hard", "to", "reproduce", "it", "takes", "long", "time", "NUMBER", "repeatedly", "I", "agree", "with", "your", "decision", "NUMBER", "I", "also", "think", "that", "stable", "version", "of", "fluentd", "should", "not", "report", "its", "stack", "traces", "in", "non", "debugging", "level", "logs", "in", "near", "far", "future", "NUMBER", "Sounds", "good", "NUMBER", "Once", "you", "remove", "stacktrace", "optionally", "you", "can", "add", "suppression", "into", "the", "logger", "NUMBER", "Syslogd", "suppresses", "repeated", "message", "for", "a", "while", "NUMBER", "If", "application", "doesn", "t", "show", "stacktrace", "it", "repeats", "exactly", "same", "message", "every", "time", "it", "emit", "s", "a", "record", "NUMBER", "It", "should", "be", "possible", "for", "logger", "to", "suppress", "the", "repeated", "message", "NUMBER", "fix", "stacktrace", "explosion", "branch", "looks", "good", "NUMBER", "For", "NUMBER", "NUMBER", "You", "mean", "you", "like", "to", "change", "the", "default", "behavior", "The", "document", "LINK", "_forward", "buffer", "parameters", "be", "telling", "currently", "as", "The", "interval", "between", "write", "retries", "and", "the", "number", "of", "retries", "NUMBER", "The", "default", "values", "be", "NUMBER", "and", "NUMBER", "respectively", "NUMBER", "retry_wait", "doubles", "every", "retry", "e", "NUMBER", "g", "NUMBER", "the", "last", "retry", "waits", "for", "NUMBER", "sec", "roughly", "NUMBER", "hours", "NUMBER", "I", "will", "modify", "the", "code", "if", "I", "can", "get", "agreement", "to", "change", "the", "default", "behavior", "and", "a", "suitable", "default", "value", "NUMBER", "Good", "point", "NUMBER", "Maybe", "we", "shouldn", "t", "change", "it", "NUMBER", "Then", "having", "unlimited", "default", "value", "be", "just", "fine", "NUMBER", "Okay", "I", "ll", "merge", "clap", "I", "be", "use", "in_tail", "plugin", "to", "gather", "mysql_slow", "log", "NUMBER", "and", "we", "have", "some", "problem", "sometimes", "NUMBER", "it", "be", "encoding", "problem", "NUMBER", "our", "slow", "query", "was", "include", "Japanese", "character", "NUMBER", "this", "Japanese", "character", "has", "be", "occur", "encoding", "error", "NUMBER", "do", "you", "know", "this", "problem", "and", "can", "you", "resolve", "this", "problem", "I", "be", "use", "fluent", "plugin", "mysqlslowquery", "LINK", "plugin", "mysqlslowquery", "and", "it", "be", "use", "in_tail", "plugin", "NUMBER", "I", "attach", "slow", "query", "and", "error", "log", "NUMBER", "could", "you", "please", "check", "this", "query", "and", "error", "log", "thank", "you", "for", "your", "cooperation", "QUERY", "Time", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "User", "Host", "db_cia", "db_cia", "wsystool", "NUMBER", "d", "NUMBER", "db", "NUMBER", "rakuten", "NUMBER", "co", "NUMBER", "jp", "NUMBER", "Query_time", "NUMBER", "Lock_time", "NUMBER", "Rows_sent", "NUMBER", "Rows_examined", "NUMBER", "SET", "timestamp", "NUMBER", "SELECT", "count", "DISTINCT", "issue", "NUMBER", "id", "AS", "count_all", "FROM", "issue", "LEFT", "OUTER", "JOIN", "projects", "ON", "projects", "NUMBER", "id", "issue", "NUMBER", "project_id", "LEFT", "OUTER", "JOIN", "journals", "ON", "journals", "NUMBER", "journalized_id", "issue", "NUMBER", "id", "AND", "journals", "NUMBER", "journalized_type", "Issue", "WHERE", "LOWER", "subject", "LIKE", "\u3046\u3044\u3058\u3085\u3093", "OR", "LOWER", "issue", "NUMBER", "description", "LIKE", "\u3046\u3044\u3058\u3085\u3093", "OR", "LOWER", "journals", "NUMBER", "note", "LIKE", "\u3046\u3044\u3058\u3085\u3093", "OR", "issue", "NUMBER", "id", "IN", "SELECT", "customized_id", "FROM", "custom_values", "WHERE", "customized_type", "Issue", "AND", "customized_id", "issue", "NUMBER", "id", "AND", "LOWER", "value", "LIKE", "\u3046\u3044\u3058\u3085\u3093", "AND", "custom_values", "NUMBER", "custom_field_id", "IN", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "AND", "projects", "NUMBER", "atus", "NUMBER", "AND", "projects", "NUMBER", "id", "IN", "SELECT", "em", "NUMBER", "project_id", "FROM", "enabled_modules", "em", "WHERE", "em", "NUMBER", "name", "issue_tracking", "AND", "projects", "NUMBER", "is_public", "NUMBER", "AND", "issue", "NUMBER", "is_private", "NUMBER", "OR", "issue", "NUMBER", "author_id", "NUMBER", "OR", "issue", "NUMBER", "assigned_to_id", "IN", "NUMBER", "ERROR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "emit", "transaction", "fail", "error_class", "Encoding", "UndefinedConversionError", "error", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "json", "NUMBER", "lib", "json", "common", "NUMBER", "rb", "NUMBER", "in", "encode", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "json", "NUMBER", "lib", "json", "common", "NUMBER", "rb", "NUMBER", "in", "generate", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "json", "NUMBER", "lib", "json", "common", "NUMBER", "rb", "NUMBER", "in", "generate", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "json", "NUMBER", "lib", "json", "common", "NUMBER", "rb", "NUMBER", "in", "dump", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "out", "http", "NUMBER", "lib", "fluent", "plugin", "out_http", "NUMBER", "rb", "NUMBER", "in", "set_json_body", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "out", "http", "NUMBER", "lib", "fluent", "plugin", "out_http", "NUMBER", "rb", "NUMBER", "in", "set_body", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "out", "http", "NUMBER", "lib", "fluent", "plugin", "out_http", "NUMBER", "rb", "NUMBER", "in", "create_request", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "out", "http", "NUMBER", "lib", "fluent", "plugin", "out_http", "NUMBER", "rb", "NUMBER", "in", "handle_record", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "out", "http", "NUMBER", "lib", "fluent", "plugin", "out_http", "NUMBER", "rb", "NUMBER", "in", "block", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "block", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "out", "http", "NUMBER", "lib", "fluent", "plugin", "out_http", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "mysqlslowquery", "NUMBER", "lib", "fluent", "plugin", "in_mysql_slow_query", "NUMBER", "rb", "NUMBER", "in", "receive_lines", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_notify", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_notify", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_change", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "detected", "rotation", "of", "MYSQL", "LOG", "test", "NUMBER", "log", "slow", "queries", "NUMBER", "log", "waiting", "NUMBER", "seconds", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "following", "tail", "of", "MYSQL", "LOG", "test", "NUMBER", "log", "slow", "queries", "NUMBER", "log", "I", "think", "that", "our", "slow", "query", "be", "UTF", "NUMBER", "basically", "NUMBER", "our", "database", "character", "set", "be", "UTF", "NUMBER", "and", "OS", "character", "set", "be", "UTF", "NUMBER", "too", "NUMBER", "OS", "NUMBER", "NUMBER", "NUMBER", "leeuijun", "NUMBER", "dm", "systool", "NUMBER", "z", "cat", "etc", "sysconfig", "i", "NUMBER", "n", "LANG", "en_US", "NUMBER", "UTF", "NUMBER", "SYSFONT", "latarcyrheb", "sun", "NUMBER", "SUPPORTED", "en_US", "NUMBER", "UTF", "NUMBER", "en_US", "en", "ja_JP", "NUMBER", "UTF", "NUMBER", "ja_JP", "ja", "MYSQL", "mysql", "show", "variables", "like", "char", "Variable_name", "Value", "character_set_client", "latin", "NUMBER", "character_set_connection", "latin", "NUMBER", "character_set_database", "utf", "NUMBER", "character_set_filesystem", "binary", "character_set_results", "latin", "NUMBER", "character_set_server", "utf", "NUMBER", "character_set_system", "utf", "NUMBER", "character_sets_dir", "test", "NUMBER", "mysql", "NUMBER", "linux", "NUMBER", "x", "NUMBER", "_", "NUMBER", "share", "charsets", "NUMBER", "rows", "in", "set", "NUMBER", "sec", "I", "be", "wondering", "why", "be", "translating", "ASC", "II", "format", "NUMBER", "you", "mean", "that", "in_tail", "be", "not", "problem", "to", "send", "the", "result", "to", "out", "http", "but", "out", "http", "be", "not", "use", "standard", "JSON", "NUMBER", "this", "be", "problem", "you", "think", "NUMBER", "be", "it", "OK", "Could", "you", "upload", "slow", "query", "log", "file", "only", "problem", "lines", "on", "somewhere", "Via", "this", "github", "form", "I", "can", "t", "get", "actual", "log", "NUMBER", "be", "it", "OK", "if", "you", "want", "that", "log", "file", "I", "can", "send", "you", "this", "log", "by", "email", "or", "something", "NUMBER", "thank", "you", "for", "your", "pull", "request", "NUMBER", "I", "will", "check", "this", "problem", "once", "again", "after", "merge", "your", "pull", "request", "NUMBER", "Thanks", "for", "the", "pull", "request", "NUMBER", "I", "ve", "release", "a", "new", "version", "of", "out", "http", "plugin", "NUMBER", "that", "include", "the", "fix", "NUMBER", "repeatedly", "ento", "thank", "you", "so", "much", "for", "your", "cooperation", "I", "m", "use", "the", "tail", "plugin", "for", "apache", "logs", "and", "Time", "NUMBER", "rptime", "be", "throw", "an", "argument", "out", "of", "range", "error", "NUMBER", "Stack", "track", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "X", "NUMBER", "X", "NUMBER", "X", "NUMBER", "X", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "GET", "HTTP", "NUMBER", "NUMBER", "NUMBER", "UA", "error", "argument", "out", "of", "range", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "time", "NUMBER", "rb", "NUMBER", "in", "local", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "time", "NUMBER", "rb", "NUMBER", "in", "make_time", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "time", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "NUMBER", "levels", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "TAG", "NUMBER", "in", "synchronize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "parse_line", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "block", "in", "receive_lines", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "receive_lines", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_notify", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_notify", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_change", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "run", "My", "time", "format", "be", "d", "b", "Y", "H", "M", "S", "z", "NUMBER", "This", "was", "work", "fine", "for", "about", "NUMBER", "months", "and", "stopped", "work", "a", "few", "days", "ago", "after", "software", "update", "NUMBER", "Any", "idea", "why", "it", "s", "throw", "this", "error", "Thanks", "for", "your", "help", "NUMBER", "If", "I", "run", "the", "following", "through", "irb", "on", "the", "server", "it", "do", "seem", "to", "work", "though", "NUMBER", "p", "NUMBER", "NUMBER", "Time", "NUMBER", "rptime", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "d", "b", "Y", "H", "M", "S", "z", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Oh", "I", "m", "sorry", "I", "didn", "t", "see", "that", "so", "this", "be", "fix", "for", "next", "release", "When", "do", "you", "think", "that", "will", "be", "release", "Thanks", "it", "s", "fix", "smile", "This", "pull", "request", "be", "for", "NUMBER", "to", "pass", "Kernel", "function", "ruby", "file_path_list", "ruby", "NUMBER", "open", "path", "to", "log_file", "NUMBER", "list", "f", "f", "NUMBER", "readlines", "NUMBER", "map", "chomp", "file_path_list", "NUMBER", "each", "do", "path_string", "source", "type", "tail", "path", "path_string", "NUMBER", "end", "to", "provide", "blocks", "with", "normal", "ruby", "syntax", "features", "ruby", "file_path_list", "ruby", "require", "net", "http", "res", "Net", "HTTP", "NUMBER", "art", "ourserver", "NUMBER", "local", "NUMBER", "http", "http", "NUMBER", "get", "server_list", "NUMBER", "txt", "res", "NUMBER", "split", "r", "n", "file_path_list", "NUMBER", "each", "do", "path_string", "NUMBER", "end", "NUMBER", "Awesome", "ping", "frsyuki", "repeatedly", "ruby", "keyword", "be", "enough", "for", "almost", "all", "of", "use", "cases", "I", "think", "NUMBER", "ex", "ruby", "NUMBER", "open", "NUMBER", "And", "ruby", "NUMBER", "function", "needs", "very", "small", "maintenance", "cost", "because", "of", "very", "simple", "implementation", "NUMBER", "I", "ve", "merge", "Trying", "to", "feed", "fluentd", "with", "Apache", "access_log", "fail", "with", "error", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "rescue", "in", "block", "in", "receive_lines", "aaa", "NUMBER", "bbb", "NUMBER", "ccc", "NUMBER", "ddd", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TLSv", "NUMBER", "DHE", "RSA", "AES", "NUMBER", "SHA", "POST", "DmcWS", "NUMBER", "SupervisionWS", "HTTP", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "argument", "out", "of", "range", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "usr", "share", "ruby", "time", "NUMBER", "rb", "NUMBER", "in", "local", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "usr", "share", "ruby", "time", "NUMBER", "rb", "NUMBER", "in", "make_time", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "usr", "share", "ruby", "time", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "NUMBER", "levels", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "synchronize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "parse_line", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "block", "in", "receive_lines", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "receive_lines", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_notify", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_notify", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_change", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "debug", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "block", "in", "receive_lines", "home", "ple", "NUMBER", "gem", "ruby", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "run", "TAG", "Fluentd", "configuration", "TAG", "lt", "source", "type", "tail", "path", "tmp", "ssl_access_log", "pos_file", "tmp", "ssl_access_log", "NUMBER", "pos", "tag", "apache", "NUMBER", "ssl_access_log", "format", "lt", "client", "lt", "time", "lt", "ssl_protocol", "lt", "ssl_cipher", "lt", "method", "S", "lt", "path", "lt", "QS", "S", "lt", "code", "lt", "size", "NUMBER", "NUMBER", "lt", "micros", "time_format", "d", "b", "Y", "H", "M", "S", "z", "lt", "source", "TAG", "Ruby", "version", "TAG", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "linux", "TAG", "Apache", "log", "format", "TAG", "h", "l", "u", "t", "SSL_PROTOCOL", "x", "SSL_CIPHER", "x", "r", "s", "b", "T", "D", "TAG", "NUMBER", "was", "partially", "fix", "and", "then", "close", "and", "I", "was", "wondering", "if", "we", "could", "get", "the", "second", "suggestion", "implement", "NUMBER", "Basically", "fluentd", "in", "our", "environment", "writes", "it", "s", "logs", "to", "TAG", "fluentd", "where", "fluentd", "be", "a", "symlink", "to", "another", "directory", "on", "the", "system", "NUMBER", "The", "problem", "be", "that", "all", "of", "the", "directories", "that", "fluentd", "makes", "as", "a", "service", "be", "created", "as", "NUMBER", "which", "be", "definitely", "not", "preferable", "NUMBER", "My", "assumption", "be", "that", "since", "the", "base", "directory", "for", "fluentd", "be", "a", "symlink", "it", "inherits", "the", "directory", "permissions", "from", "that", "NUMBER", "Can", "we", "explicitly", "make", "it", "a", "default", "of", "NUMBER", "instead", "or", "let", "it", "be", "configurable", "NUMBER", "to", "this", "issue", "NUMBER", "I", "ve", "get", "the", "same", "problem", "and", "be", "currently", "handle", "this", "manually", "through", "puppet", "change", "permissions", "recursively", "in", "my", "log", "directory", "NUMBER", "In", "my", "case", "I", "don", "t", "use", "symlinks", "in", "any", "way", "for", "example", "in", "the", "form", "of", "parent", "directories", "but", "see", "the", "same", "behavior", "for", "all", "file", "directories", "created", "by", "the", "td", "agent", "daemon", "NUMBER", "Sorry", "this", "may", "be", "outside", "the", "scope", "of", "fluentd", "itself", "I", "m", "use", "the", "file", "alternative", "plugin", "to", "write", "some", "directories", "that", "end", "up", "with", "these", "permissions", "NUMBER", "However", "in", "my", "test", "I", "ve", "manually", "set", "the", "permissions", "option", "to", "the", "file", "alternative", "plugin", "s", "call", "to", "mkdir_p", "with", "the", "same", "results", "so", "I", "feel", "like", "this", "issue", "be", "probably", "relate", "NUMBER", "This", "be", "a", "weird", "one", "so", "bear", "with", "me", "NUMBER", "I", "aggregate", "both", "the", "auth", "and", "authpriv", "logs", "on", "all", "our", "boxes", "Ubuntu", "via", "syslog", "fluentd", "NUMBER", "The", "weird", "behavior", "I", "be", "seeing", "be", "that", "from", "one", "and", "only", "one", "the", "same", "one", "always", "of", "my", "hosts", "let", "s", "call", "it", "login", "NUMBER", "fluentd", "be", "logging", "that", "hosts", "logs", "to", "separate", "file", "instead", "of", "the", "regular", "file", "NUMBER", "Let", "me", "give", "some", "directory", "listings", "and", "explain", "bash", "user", "host", "TAG", "ls", "alh", "auth", "NUMBER", "log", "NUMBER", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "K", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "rw", "r", "r", "NUMBER", "td", "agent", "td", "agent", "NUMBER", "Oct", "NUMBER", "NUMBER", "NUMBER", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "This", "be", "just", "a", "snippet", "but", "it", "demonstrates", "what", "I", "be", "seeing", "NUMBER", "Basically", "in", "the", "file", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "we", "have", "all", "the", "auth", "logs", "for", "all", "the", "machines", "in", "my", "network", "EXCEPT", "login", "NUMBER", "for", "the", "first", "hour", "of", "the", "day", "auth", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "has", "the", "next", "hours", "worth", "without", "login", "NUMBER", "etc", "NUMBER", "All", "the", "other", "file", "for", "that", "hour", "have", "the", "logs", "for", "login", "NUMBER", "but", "nothing", "else", "NUMBER", "I", "end", "up", "with", "basically", "hundreds", "of", "logs", "for", "every", "hour", "but", "most", "of", "them", "just", "have", "NUMBER", "or", "NUMBER", "log", "entries", "in", "them", "for", "login", "NUMBER", "Any", "idea", "There", "doesn", "t", "seem", "to", "be", "anything", "special", "about", "login", "NUMBER", "in", "my", "setup", "the", "syslog", "setup", "be", "the", "same", "on", "all", "the", "boxes", "NUMBER", "Andy", "Here", "s", "the", "relevant", "section", "in", "my", "config", "on", "the", "aggregator", "bash", "TAG", "type", "file", "buffer_chunk_limit", "NUMBER", "m", "path", "TAG", "auth", "NUMBER", "log", "symlink_path", "TAG", "auth", "NUMBER", "log", "NUMBER", "current", "time_slice_format", "Y", "m", "d", "H", "TAG", "This", "be", "definitely", "weird", "situation", "NUMBER", "I", "have", "no", "idea", "why", "this", "happens", "NUMBER", "It", "seems", "to", "me", "that", "logs", "flushed", "hourly", "and", "minutely", "use", "same", "path", "NUMBER", "could", "you", "give", "us", "your", "entire", "configuration", "So", "the", "only", "other", "part", "of", "my", "configuration", "that", "relate", "to", "the", "auth", "logs", "be", "the", "syslog", "directive", "that", "I", "use", "to", "push", "logs", "to", "fluent", "bash", "auth", "NUMBER", "authpriv", "NUMBER", "TAG", "NUMBER", "And", "then", "in", "my", "td", "agent", "NUMBER", "conf", "on", "the", "aggregator", "I", "have", "this", "also", "bash", "TAG", "type", "syslog", "port", "NUMBER", "tag", "system", "TAG", "Do", "you", "guys", "want", "all", "of", "the", "rest", "of", "my", "configuration", "I", "ll", "sanitize", "it", "and", "post", "it", "if", "you", "want", "NUMBER", "I", "ll", "check", "the", "cause", "of", "this", "problem", "NUMBER", "Please", "tell", "me", "in", "detail", "if", "you", "can", "NUMBER", "Your", "configuration", "seems", "to", "flush", "a", "buffer", "every", "hour", "but", "your", "log", "file", "be", "emitted", "every", "minite", "and", "the", "size", "be", "under", "buffer_chunk_limit", "NUMBER", "This", "be", "very", "weird", "NUMBER", "NUMBER", "Please", "give", "us", "at", "least", "NUMBER", "consecuive", "log", "file", "in", "chronological", "order", "by", "doing", "a", "following", "command", "NUMBER", "ls", "alhtr", "auth", "NUMBER", "log", "NUMBER", "NUMBER", "When", "this", "problem", "happens", "please", "confirm", "there", "be", "two", "or", "more", "buffer", "file", "which", "be", "with", "random", "suffix", "like", "auth", "NUMBER", "log", "NUMBER", "b", "NUMBER", "e", "NUMBER", "cc", "NUMBER", "f", "NUMBER", "ee", "or", "not", "and", "what", "be", "write", "to", "those", "file", "NUMBER", "NUMBER", "Can", "you", "_always_", "reproduce", "this", "problem", "even", "after", "restarting", "td", "agent", "This", "issue", "happens", "in", "my", "environments", "and", "finally", "I", "figured", "out", "why", "this", "happens", "NUMBER", "I", "think", "this", "be", "not", "a", "bug", "and", "can", "t", "be", "fix", "NUMBER", "This", "issue", "be", "cause", "by", "a", "large", "gap", "of", "time", "in", "your", "servers", "NUMBER", "Your", "server", "login", "NUMBER", "s", "time", "be", "behind", "more", "than", "one", "hour", "NUMBER", "Logfile", "names", "be", "determined", "with", "reference", "to", "time", "of", "a", "message", "so", "a", "new", "buffer", "file", "be", "generate", "when", "old", "message", "be", "arrived", "and", "flushed", "immediately", "every", "minutes", "NUMBER", "As", "a", "result", "many", "log", "file", "with", "small", "data", "size", "be", "created", "NUMBER", "To", "avoid", "this", "problem", "you", "had", "better", "set", "up", "NTP", "NUMBER", "This", "be", "recommended", "by", "official", "docs", "LINK", "install", "NUMBER", "And", "set", "time_slice_wait", "parameter", "to", "higher", "value", "NUMBER", "NUMBER", "be", "also", "cause", "by", "this", "issue", "so", "that", "be", "not", "a", "problem", "NUMBER", "You", "can", "reproduce", "this", "with", "following", "configuration", "and", "scripts", "NUMBER", "After", "first", "flush", "be", "happened", "new", "log", "file", "will", "be", "generate", "every", "minutes", "NUMBER", "TAG", "type", "forward", "TAG", "TAG", "type", "file", "path", "NUMBER", "hoge", "time_slice_format", "Y", "m", "d_", "H", "compress", "gz", "TAG", "A", "script", "that", "generates", "message", "with", "current", "timestamp", "NUMBER", "bin", "env", "ruby", "require", "fluent", "logger", "log", "Fluent", "Logger", "FluentLogger", "NUMBER", "new", "nil", "host", "localhost", "port", "NUMBER", "loop", "do", "log", "NUMBER", "post_with_time", "test", "foo", "bar", "NUMBER", "Time", "NUMBER", "now", "sleep", "NUMBER", "end", "A", "script", "that", "generates", "message", "with", "timestamp", "half", "an", "hour", "ago", "NUMBER", "bin", "env", "ruby", "require", "fluent", "logger", "log", "Fluent", "Logger", "FluentLogger", "NUMBER", "new", "nil", "host", "localhost", "port", "NUMBER", "loop", "do", "log", "NUMBER", "post_with_time", "test", "foo", "bar", "NUMBER", "Time", "NUMBER", "now", "NUMBER", "NUMBER", "sleep", "NUMBER", "end", "Hi", "Currently", "fluentd", "do", "not", "implement", "bandwidth", "feature", "NUMBER", "We", "could", "control", "bandwidth", "with", "chunk_limit", "and", "flush_intervals", "but", "it", "s", "very", "roughly", "NUMBER", "fluentd", "has", "possibility", "to", "spike", "network", "traffic", "NUMBER", "Why", "fluentd", "spikes", "traffic", "I", "suspect", "ruby", "s", "copy_stream", "as", "it", "doesn", "t", "care", "about", "traffic", "NUMBER", "ruby", "s", "copy", "stream", "implementation", "LINK", "L", "NUMBER", "Bandwidth", "limit", "option", "will", "provide", "controllable", "network", "traffic", "feature", "NUMBER", "Writer", "thread", "will", "sleep", "when", "it", "exceeds", "bandwidth", "limit", "per", "each", "second", "If", "you", "set", "this", "option", "NUMBER", "I", "know", "this", "be", "not", "strict", "bandwidth", "limit", "feature", "NUMBER", "but", "this", "will", "prevent", "spikes", "in", "most", "cases", "NUMBER", "Added", "Configuration", "bwlimit", "integer", "byte", "per", "second", "Pros", "controllable", "network", "traffic", "NUMBER", "Cons", "performance", "will", "get", "slowly", "when", "enable", "this", "feature", "NUMBER", "This", "feature", "requires", "many", "method", "calls", "when", "write", "message", "NUMBER", "expects", "num_threads", "NUMBER", "fluentd", "will", "saturate", "if", "it", "doesn", "t", "have", "enough", "threads", "NUMBER", "also", "requires", "correct", "configuration", "NUMBER", "this", "feature", "has", "big", "impact", "for", "out_forward", "NUMBER", "Here", "be", "my", "rough", "patch", "NUMBER", "I", "hope", "out_forward", "support", "bwlimit", "option", "NUMBER", "But", "It", "has", "very", "big", "impact", "for", "applying", "bwlimit", "patch", "NUMBER", "so", "I", "split", "it", "at", "this", "time", "NUMBER", "LINK", "I", "don", "t", "deploy", "this", "feature", "on", "any", "prod", "environment", "NUMBER", "for", "now", "I", "want", "to", "have", "feedback", "on", "the", "idea", "NUMBER", "Thanks", "Shuhei", "Any", "update", "on", "this", "Or", "maybe", "any", "other", "solution", "s", "to", "limit", "fluentd", "agent", "s", "output", "Also", "i", "haven", "t", "come", "across", "chunk_limit", "anywhere", "in", "the", "documentation", "NUMBER", "What", "do", "it", "do", "erbdex", "It", "should", "be", "buffer_chunk_limit", "correctly", "NUMBER", "It", "be", "write", "on", "the", "official", "document", "of", "out_forward", "NUMBER", "But", "why", "didn", "t", "we", "allow", "uses", "to", "include", "configs", "in", "elements", "If", "we", "can", "just", "turning", "the", "flag", "at", "LINK", "L", "NUMBER", "to", "true", "be", "OK", "NUMBER", "ref", "NUMBER", "NUMBER", "What", "usecase", "you", "want", "this", "feature", "about", "Please", "refer", "to", "NUMBER", "NUMBER", "I", "ll", "change", "embed", "to", "include", "and", "I", "think", "it", "might", "be", "better", "NUMBER", "NUMBER", "for", "include", "NUMBER", "for", "include", "fluent", "plugin", "norikra", "has", "parameter", "named", "as", "include", "and", "exclude", "NUMBER", "How", "about", "TAG", "instead", "of", "bare", "include", "And", "new", "directive", "style", "include", "be", "only", "allow", "in", "non", "top", "level", "NUMBER", "It", "seems", "a", "bit", "complicated", "but", "not", "avoidable", "to", "be", "consistent", "with", "backward", "compatibility", "I", "think", "NUMBER", "I", "ll", "try", "it", "NUMBER", "Add", "a", "comment", "but", "totally", "it", "looks", "good", "I", "tried", "the", "newest", "version", "of", "td", "agent", "today", "and", "the", "symlink", "specified", "by", "symlink_path", "still", "isn", "t", "be", "created", "correctly", "NUMBER", "From", "my", "experience", "the", "symlink", "be", "valid", "and", "point", "to", "a", "buffer", "file", "for", "about", "a", "minute", "and", "then", "the", "buffer", "file", "disappears", "NUMBER", "Something", "like", "this", "bash", "TAG", "tail", "F", "auth", "NUMBER", "log", "NUMBER", "current", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "system", "NUMBER", "auth", "NUMBER", "info", "TAG", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "system", "NUMBER", "auth", "NUMBER", "info", "TAG", "tail", "auth", "NUMBER", "log", "NUMBER", "current", "has", "become", "inaccessible", "No", "such", "file", "or", "directory", "This", "happens", "every", "few", "minutes", "NUMBER", "It", "looks", "like", "fluentd", "be", "actually", "write", "to", "a", "different", "buffer", "file", "during", "this", "whole", "time", "and", "I", "never", "get", "more", "than", "NUMBER", "message", "in", "the", "file", "that", "be", "symlinked", "to", "NUMBER", "Any", "ideas", "Thanks", "Andy", "It", "s", "as", "I", "expected", "NUMBER", "Logs", "and", "symlink", "be", "currently", "handle", "in", "following", "procedure", "NUMBER", "A", "new", "message", "be", "push", "to", "buffer", "which", "means", "it", "be", "write", "to", "buffer", "file", "such", "as", "foo", "NUMBER", "b", "NUMBER", "e", "NUMBER", "dcde", "NUMBER", "f", "NUMBER", "f", "NUMBER", "NUMBER", "A", "symlink", "which", "links", "to", "the", "buffer", "file", "be", "created", "after", "that", "NUMBER", "NUMBER", "The", "buffer", "file", "be", "renamed", "to", "something", "like", "foo", "NUMBER", "when", "its", "time", "to", "flush", "NUMBER", "As", "a", "result", "the", "symlink", "which", "be", "created", "in", "seq", "NUMBER", "NUMBER", "links", "nothing", "after", "seq", "NUMBER", "NUMBER", "until", "next", "message", "be", "arrived", "seq", "NUMBER", "NUMBER", "NUMBER", "However", "the", "symlink", "re", "links", "new", "buffer", "file", "correctly", "when", "new", "message", "be", "arrived", "NUMBER", "So", "some", "warnings", "occur", "on", "log", "rotation", "but", "the", "tail", "command", "should", "chase", "logs", "without", "miss", "NUMBER", "So", "that", "s", "not", "what", "I", "see", "NUMBER", "I", "only", "see", "the", "NUMBER", "message", "be", "publish", "to", "that", "log", "then", "the", "tail", "warning", "occur", "and", "I", "don", "t", "see", "any", "more", "message", "NUMBER", "Do", "you", "always", "get", "in", "such", "trouble", "Please", "show", "me", "your", "configuration", "NUMBER", "Sure", "here", "s", "the", "relevant", "section", "bash", "TAG", "type", "file", "buffer_chunk_limit", "NUMBER", "m", "path", "logs", "fluentd", "system", "auth", "auth", "NUMBER", "log", "symlink_path", "logs", "fluentd", "system", "auth", "auth", "NUMBER", "log", "NUMBER", "current", "time_slice_format", "Y", "m", "d", "H", "TAG", "TAG", "type", "file", "buffer_chunk_limit", "NUMBER", "m", "path", "logs", "fluentd", "system", "authpriv", "authpriv", "NUMBER", "log", "symlink_path", "logs", "fluentd", "system", "authpriv", "authpriv", "NUMBER", "log", "NUMBER", "current", "time_slice_format", "Y", "m", "d", "H", "TAG", "Do", "you", "need", "more", "than", "that", "I", "definitely", "don", "t", "get", "all", "the", "logs", "that", "be", "come", "into", "this", "server", "through", "that", "symlink", "NUMBER", "Andy", "To", "add", "a", "few", "more", "comments", "The", "logs", "that", "match", "both", "those", "stanza", "s", "above", "be", "be", "sent", "via", "syslog", "NUMBER", "What", "s", "interesting", "be", "that", "via", "the", "NUMBER", "log", "NUMBER", "current", "file", "I", "m", "only", "get", "logs", "from", "NUMBER", "machine", "in", "our", "network", "let", "s", "call", "it", "login", "NUMBER", "NUMBER", "When", "I", "then", "look", "for", "logs", "for", "login", "NUMBER", "in", "any", "of", "the", "other", "log", "file", "they", "aren", "t", "there", "NUMBER", "Make", "sense", "So", "I", "dug", "into", "this", "a", "little", "further", "on", "my", "end", "and", "I", "m", "noticing", "a", "few", "very", "weird", "things", "in", "regard", "to", "the", "syslog", "logs", "that", "I", "collect", "and", "I", "don", "t", "think", "it", "s", "relate", "to", "the", "symlink", "stuff", "NUMBER", "I", "m", "going", "to", "open", "up", "another", "ticket", "for", "that", "NUMBER", "So", "far", "on", "other", "logs", "I", "aggregate", "through", "fluentd", "the", "symlink", "looks", "to", "be", "work", "well", "NUMBER", "We", "can", "probably", "close", "this", "issue", "now", "and", "I", "ll", "reopen", "it", "if", "I", "see", "anymore", "problem", "NUMBER", "\u3053\u3093\u306b\u3061\u306f", "CentOS", "\u306e", "var", "log", "messges", "\u3092\u98df\u308f\u305b\u3066\u307f\u305f\u306e\u3067\u3059\u304c", "\u3053\u306e\u3088\u3046\u306b\u3057\u306a\u3044\u3068", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "forward", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "\u306e\u3088\u3046\u306b\u51fa\u3066\u3057\u307e\u3063\u3066", "\u3046\u307e\u304f\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f", "\u5fc5\u8981\u306afix\u304b\u5206\u304b\u308a\u307e\u305b\u3093\u304c", "\u5fa1\u5831\u544a\u307e\u3067", "\u3042", "\u3042\u3068Web\u30b5\u30a4\u30c8\u3068\u30b3\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059", "LINK", "_tail", "\u5931\u793c\u3044\u305f\u3057\u307e\u3059", "\u3053\u306e\u3088\u3046\u306a\u30ed\u30b0\u306e", "last", "message", "repeated", "n", "times", "\u304c", "\u4f8b\u5916\u3092\u8d77\u3053\u3057\u3066\u3044\u308b\u884c\u306e\u3088\u3046\u3067\u3059", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "hogeserver", "named", "NUMBER", "client", "NUMBER", "NUMBER", "query", "cache", "NUMBER", "ANY", "IN", "denied", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "hogeserver", "last", "message", "repeated", "NUMBER", "times", "puts", "time", "\u3059\u308b\u3068", "Sep", "\u3068\u306a\u308a\u307e\u3059", "\u82f1\u8a9e\u306f", "\u52c9\u5f37\u3057\u307e\u3059", "\u306a\u3093\u304b\u304a\u624b\u6570\u304a\u639b\u3051\u3057\u3066\u3057\u307e\u3044", "\u3082\u3046\u3057\u308f\u3051\u3042\u308a\u307e\u305b\u3093", "\u78ba\u304b\u306b\u76f4\u3063\u3066\u3044\u307e\u305b\u3093\u306d", "cat", "sample", "NUMBER", "rb", "usr", "bin", "env", "ruby", "code", "utf", "NUMBER", "require", "fluent", "load", "log", "Fluent", "Log", "NUMBER", "new", "STDOUT", "Fluent", "Log", "LEVEL_WARN", "parser", "NUMBER", "Fluent", "TextParser", "RegexpParser", "NUMBER", "new", "TAG", "s", "TAG", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "TAG", "NUMBER", "NUMBER", "TAG", "NUMBER", "time_format", "b", "d", "H", "M", "S", "parser", "NUMBER", "Fluent", "TextParser", "RegexpParser", "NUMBER", "new", "TAG", "s", "TAG", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "TAG", "NUMBER", "NUMBER", "TAG", "NUMBER", "time_format", "b", "d", "H", "M", "S", "p", "parser", "NUMBER", "call", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "hogeserver", "last", "message", "repeated", "NUMBER", "times", "p", "parser", "NUMBER", "call", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "hogeserver", "last", "message", "repeated", "NUMBER", "times", "ruby", "sample", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "pattern", "not", "match", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "hogeserver", "last", "message", "repeated", "NUMBER", "times", "nil", "nil", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "pattern", "not", "match", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "hogeserver", "last", "message", "repeated", "NUMBER", "times", "nil", "nil", "\u9061\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u304c", "\u305d\u3082\u305d\u3082\u6b21\u306e\u3088\u3046\u306b\u3057\u3066\u52d5\u304b\u3057\u305f\u3068\u304d\u306b\u6c17\u4ed8\u3044\u305f\u3082\u306e\u3067\u3057\u305f", "cat", "sample_src", "NUMBER", "log", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "newsyslog", "NUMBER", "logfile", "turned", "over", "due", "to", "size", "NUMBER", "K", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "kernel", "em", "NUMBER", "link", "state", "change", "to", "DOWN", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "bokutin", "usr", "local", "etc", "rc", "NUMBER", "d", "elasticsearch", "DEBUG", "Sourcing", "etc", "defaults", "rc", "NUMBER", "conf", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "last", "message", "repeated", "NUMBER", "times", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "sudo", "bokutin", "TTY", "pts", "NUMBER", "PWD", "usr", "home", "bokutin", "USER", "root", "COMMAND", "usr", "local", "bin", "zsh", "fluentd", "c", "copy", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "conf", "copy", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "tail_asis", "path", "sample", "NUMBER", "log", "pos_file", "sample", "NUMBER", "pos", "tag", "raw", "NUMBER", "log", "NUMBER", "messsages", "asis_key", "message", "TAG", "TAG", "type", "copy", "TAG", "type", "parser", "remove_prefix", "raw", "add_prefix", "parsed", "format", "syslog", "key_name", "message", "TAG", "TAG", "TAG", "type", "stdout", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "tail_asis", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "raw", "NUMBER", "type", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "parsed", "NUMBER", "type", "stdout", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "following", "tail", "of", "sample", "NUMBER", "log", "\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067", "cat", "sample_src", "NUMBER", "log", "sample", "NUMBER", "log", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "parsed", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "newsyslog", "pid", "NUMBER", "message", "logfile", "turned", "over", "due", "to", "size", "NUMBER", "K", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "parsed", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "kernel", "message", "em", "NUMBER", "link", "state", "change", "to", "DOWN", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "parsed", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "bokutin", "message", "usr", "local", "etc", "rc", "NUMBER", "d", "elasticsearch", "DEBUG", "Sourcing", "etc", "defaults", "rc", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "emit", "transaction", "fail", "error_class", "ArgumentError", "error", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "time", "NUMBER", "rb", "NUMBER", "in", "strptime", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "parser", "NUMBER", "lib", "fluent", "plugin", "fixed_parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "parser", "NUMBER", "lib", "fluent", "plugin", "fixed_parser", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "parser", "NUMBER", "lib", "fluent", "plugin", "fixed_parser", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "parser", "NUMBER", "lib", "fluent", "plugin", "fixed_parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "parser", "NUMBER", "lib", "fluent", "plugin", "out_parser", "NUMBER", "rb", "NUMBER", "in", "parse", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "parser", "NUMBER", "lib", "fluent", "plugin", "out_parser", "NUMBER", "rb", "NUMBER", "in", "block", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "block", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "parser", "NUMBER", "lib", "fluent", "plugin", "out_parser", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "next", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_copy", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "receive_lines", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_notify", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_notify", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "on_timer", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "home", "bokutin", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "in", "run", "copy", "NUMBER", "conf\u3092\u4e00\u90e8\u4fee\u6b63\u3059\u308b\u3068", "format", "syslog", "format", "TAG", "s", "TAG", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "TAG", "NUMBER", "NUMBER", "TAG", "NUMBER", "time_format", "b", "d", "H", "M", "S", "fluentd", "c", "copy", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "conf", "copy", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "tail_asis", "path", "sample", "NUMBER", "log", "pos_file", "sample", "NUMBER", "pos", "tag", "raw", "NUMBER", "log", "NUMBER", "messsages", "asis_key", "message", "TAG", "TAG", "type", "copy", "TAG", "type", "parser", "remove_prefix", "raw", "add_prefix", "parsed", "format", "TAG", "s", "TAG", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "TAG", "NUMBER", "NUMBER", "TAG", "NUMBER", "time_format", "b", "d", "H", "M", "S", "key_name", "message", "TAG", "TAG", "TAG", "type", "stdout", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "tail_asis", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "raw", "NUMBER", "type", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "parsed", "NUMBER", "type", "stdout", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "following", "tail", "of", "sample", "NUMBER", "log", "\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067", "cat", "sample_src", "NUMBER", "log", "sample", "NUMBER", "log", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "parsed", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "newsyslog", "pid", "NUMBER", "message", "logfile", "turned", "over", "due", "to", "size", "NUMBER", "K", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "parsed", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "kernel", "message", "em", "NUMBER", "link", "state", "change", "to", "DOWN", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "parsed", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "bokutin", "message", "usr", "local", "etc", "rc", "NUMBER", "d", "elasticsearch", "DEBUG", "Sourcing", "etc", "defaults", "rc", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "pattern", "not", "match", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "last", "message", "repeated", "NUMBER", "times", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "parsed", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "sudo", "message", "bokutin", "TTY", "pts", "NUMBER", "PWD", "usr", "home", "bokutin", "USER", "root", "COMMAND", "usr", "local", "bin", "zsh", "\u3068\u306a\u308a", "\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304c\u51fa\u3066\u3073\u3063\u304f\u308a\u3059\u308b\u3053\u3068\u3082\u306a\u304f\u306a\u308a", "\u51e6\u7406\u3082\u7d99\u7d9a\u3082\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059", "\u3068", "\u3053\u3053\u307e\u3067\u3084\u3063\u3066", "\u3054\u5831\u544a\u3044\u305f\u3057\u307e\u3057\u305f", "\u30b7\u30f3\u30d7\u30eb\u306aconf\u3067\u3082\u8abf\u3079\u3066\u307f\u307e\u3057\u305f", "fluentd", "c", "conf", "tail", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "conf", "tail", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "tail", "path", "sample", "NUMBER", "log", "tag", "log", "NUMBER", "messsages", "format", "syslog", "TAG", "TAG", "type", "stdout", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "tail", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "pos_file", "PATH", "parameter", "be", "not", "set", "to", "a", "tail", "source", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "this", "parameter", "be", "highly", "recommended", "to", "save", "the", "position", "to", "resume", "tailing", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "type", "stdout", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "following", "tail", "of", "sample", "NUMBER", "log", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "last", "message", "repeated", "NUMBER", "times", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "newsyslog", "pid", "NUMBER", "message", "logfile", "turned", "over", "due", "to", "size", "NUMBER", "K", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "kernel", "message", "em", "NUMBER", "link", "state", "change", "to", "DOWN", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "bokutin", "message", "usr", "local", "etc", "rc", "NUMBER", "d", "elasticsearch", "DEBUG", "Sourcing", "etc", "defaults", "rc", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "sudo", "message", "bokutin", "TTY", "pts", "NUMBER", "PWD", "usr", "home", "bokutin", "USER", "root", "COMMAND", "usr", "local", "bin", "zsh", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "NUMBER", "warn", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "message", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "last", "message", "repeated", "NUMBER", "times", "\u3067parser", "NUMBER", "rb\u306b\u5148\u306e\u4e00\u6587\u5b57\u306e\u30d1\u30c3\u30c1\u3092\u3042\u3066\u308b\u3068", "ruby", "Ilib", "bin", "fluentd", "c", "conf", "tail", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "conf", "tail", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "tail", "path", "sample", "NUMBER", "log", "tag", "log", "NUMBER", "messsages", "format", "syslog", "TAG", "TAG", "type", "stdout", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "tail", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "pos_file", "PATH", "parameter", "be", "not", "set", "to", "a", "tail", "source", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "this", "parameter", "be", "highly", "recommended", "to", "save", "the", "position", "to", "resume", "tailing", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "type", "stdout", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "following", "tail", "of", "sample", "NUMBER", "log", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "pattern", "not", "match", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "last", "message", "repeated", "NUMBER", "times", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "newsyslog", "pid", "NUMBER", "message", "logfile", "turned", "over", "due", "to", "size", "NUMBER", "K", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "kernel", "message", "em", "NUMBER", "link", "state", "change", "to", "DOWN", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "bokutin", "message", "usr", "local", "etc", "rc", "NUMBER", "d", "elasticsearch", "DEBUG", "Sourcing", "etc", "defaults", "rc", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "log", "NUMBER", "messsages", "host", "fvm", "ident", "sudo", "message", "bokutin", "TTY", "pts", "NUMBER", "PWD", "usr", "home", "bokutin", "USER", "root", "COMMAND", "usr", "local", "bin", "zsh", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "NUMBER", "warn", "message", "pattern", "not", "match", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fvm", "last", "message", "repeated", "NUMBER", "times", "\u3068\u306a\u308a\u307e\u3057\u305f", "warn\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u3060\u3051\u3067\u3057\u305f", "plugin", "parser\u3068\u3082\u9055\u3044", "\u51e6\u7406\u306f\u7d99\u7d9a\u3055\u308c\u3066\u3044\u307e\u3057\u305f", "\u307e\u305fplugin", "parser\u306f", "parser", "NUMBER", "rb\u306eTEMPLATE_FACTORIES\u3092\u30b3\u30d4\u30da\u3057\u305f\u3082\u306e\u3092\u4f7f\u3063\u3066\u3044\u3066", "\u5225\u306e\u3082\u306e\u3067\u3057\u305f", "\u3067\u3059\u306e\u3067parser", "NUMBER", "rb\u306e\u6b63\u898f\u8868\u73fe\u3092\u76f4\u3057\u3066\u3082", "\u3053\u3061\u3089\u306b\u306f\u6ce2\u53ca\u3055\u308c\u306a\u3044\u3068\u601d\u3044\u307e\u3059", "\u78ba\u304b\u306b\u91cd\u8981\u3058\u3083\u306a\u3055\u305d\u3046\u3067\u3059", "\u305f\u3060", "last", "message", "repeated", "n", "times", "\u3092\u5410\u3044\u305fCentOS\u306f\u5b9f\u306b\u6a19\u6e96\u7684\u306a\u69cb\u6210\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u3082\u306e\u3067\u3057\u3066", "\u3088\u304f\u3042\u308b\u3082\u306e\u3060\u3068\u601d\u3044\u307e\u3059", "\u4e0a\u3067\u7528\u3044\u305f", "sample", "NUMBER", "log", "\u306f", "FreeBSD", "NUMBER", "\u306e", "var", "log", "message", "\u304b\u3089\u629c\u7c8b\u3057\u305f\u3082\u306e\u3067\u3059", "\u305f\u3057\u304b\u306b", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "\u3067\u3042\u3063\u3066", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "\u3068\u3044\u3046\u30b1\u30fc\u30b9\u304c\u7121\u3044\u306e\u3067\u3042\u308c\u3070", "s", "\u3092", "s", "\u306b\u3059\u308c\u3070", "warn\u304c\u5c11\u3057\u81ea\u7136\u306b\u306a\u3063\u3066\u3088\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c", "\u73fe\u306b\u7a3c\u52d5\u3057\u3066\u3044\u308b\u898f\u6a21\u3092\u8003\u3048\u308c\u3070", "\u3053\u306e\u7a0b\u5ea6\u306e\u4e9b\u7d30\u306a\u3053\u3068\u3067\u5f71\u97ff\u304c\u51fa\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3053\u3068\u3092\u52d8\u6848\u3059\u308b\u3068", "\u4fee\u6b63\u3059\u308b\u5fc5\u8981\u306f\u7121\u3044\u3068\u8003\u3048\u308b\u306e\u304c\u59a5\u5f53\u306a\u6c17\u304c\u3057\u307e\u3059", "\u306a\u3093\u304b\u304a\u6642\u9593\u3092\u3068\u3089\u305b\u3066\u3057\u307e\u3063\u3066\u3059\u307f\u307e\u305b\u3093", "\u5148\u8d70\u3089\u305a\u306b", "\u3061\u3083\u3093\u3068\u8abf\u3079\u3066\u304b\u3089\u5831\u544a\u3059\u308b\u3079\u304d\u3067\u3057\u305f", "\u82f1\u8a9e\u306b\u3057\u3066\u3044\u305f\u3060\u304b\u306a\u304f\u3066\u9589\u3058\u3067\u304f\u3060\u3055\u3063\u3066\u5927\u4e08\u592b\u3067\u3059", "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f", "\u5931\u793c\u3044\u305f\u3057\u307e\u3059", "I", "was", "confused", "when", "I", "use", "out_file", "type", "with", "file_buffer", "NUMBER", "It", "s", "double", "disk", "I", "O", "load", "NUMBER", "Mem_buffer", "may", "lost", "some", "message", "on", "my", "test", "with", "kill", "forward", "node", "but", "not", "with", "file_buffer", "NUMBER", "So", "I", "want", "to", "use", "file_buffre", "or", "none", "buffer", "NUMBER", "Not", "a", "critical", "NUMBER", "I", "just", "wan", "t", "know", "if", "there", "be", "some", "reason", "here", "NUMBER", "If", "just", "not", "care", "this", "performance", "and", "no", "other", "reasons", "I", "ll", "try", "to", "write", "a", "none", "buffered", "plugin", "NUMBER", "Thanks", "NUMBER", "Fluentd", "dumps", "whole", "configuration", "content", "into", "log", "by", "default", "info", "log", "level", "NUMBER", "It", "can", "be", "dangerous", "when", "a", "plugin", "include", "secret", "data", "NUMBER", "There", "s", "actually", "such", "a", "plugin", "for", "example", "fluent", "plugin", "secure", "forward", "NUMBER", "With", "the", "plugin", "fluentd", "dumps", "configuration", "like", "below", "NUMBER", "TAG", "type", "secure_forward", "shared_key", "xxxxxxxxxxxxxxxx", "self_hostname", "app", "NUMBER", "example", "NUMBER", "com", "TAG", "host", "log", "NUMBER", "example", "NUMBER", "com", "username", "foo", "password", "xxxxxxxxxxxxxxxx", "TAG", "TAG", "NUMBER", "We", "had", "better", "not", "to", "expose", "secret", "data", "in", "such", "a", "place", "where", "people", "don", "t", "think", "their", "secret", "data", "can", "be", "NUMBER", "I", "want", "any", "command", "line", "option", "to", "dump", "configurations", "at", "INFO", "level", "NUMBER", "That", "option", "be", "for", "people", "who", "thinks", "that", "debug", "level", "logs", "be", "too", "heavy", "but", "configuration", "dump", "be", "important", "NUMBER", "I", "m", "a", "one", "of", "them", "NUMBER", "who", "thinks", "that", "NUMBER", "tagomoris", "Did", "you", "mean", "like", "below", "Default", "Not", "dump", "the", "content", "of", "configurations", "same", "as", "this", "PR", "With", "an", "option", "Dump", "the", "content", "to", "be", "implement", "later", "kentaro", "Yes", "NUMBER", "ruby", "if", "awesome_option_specified", "log", "NUMBER", "info", "use", "configuration", "file", "conf", "NUMBER", "to_s", "NUMBER", "rstrip", "else", "log", "NUMBER", "debug", "use", "configuration", "file", "conf", "NUMBER", "to_s", "NUMBER", "rstrip", "end", "Added", "a", "new", "command", "line", "option", "NUMBER", "NUMBER", "Any", "other", "thoughts", "Or", "can", "I", "merge", "this", "As", "Treasure", "Data", "this", "feature", "dramatically", "reduces", "our", "burden", "to", "troubleshoot", "fluentd", "td", "agent", "NUMBER", "The", "reason", "be", "people", "often", "don", "t", "send", "us", "an", "exact", "config", "file", "which", "cause", "some", "troubles", "NUMBER", "So", "can", "we", "dump", "by", "default", "and", "hide", "by", "option", "Or", "can", "we", "do", "some", "rule", "based", "anonymization", "Thanks", "K", "I", "have", "same", "opinion", "with", "kaz", "actually", "NUMBER", "How", "about", "this", "idea", "plugins", "add", "sensitive", "true", "option", "to", "config_param", "line", "if", "the", "parameter", "include", "secret", "information", "such", "as", "password", "if", "the", "config", "name", "be", "password", "sensitive", "option", "be", "true", "by", "default", "fluentd", "replaces", "the", "option", "with", "when", "it", "shows", "the", "config", "to", "log", "file", "I", "think", "Ruby", "on", "Rails", "use", "the", "same", "strategy", "when", "it", "logs", "request", "parameters", "to", "local", "file", "NUMBER", "One", "big", "concern", "be", "that", "we", "need", "to", "ask", "plugin", "creators", "to", "set", "the", "parameter", "NUMBER", "At", "first", "I", "thought", "of", "an", "idea", "like", "frsyuki", "said", "and", "abandoned", "it", "because", "it", "seem", "difficult", "for", "plugin", "authors", "to", "change", "their", "plugin", "NUMBER", "In", "practice", "the", "kzk", "s", "idea", "sounds", "feasible", "NUMBER", "I", "ll", "fix", "this", "PR", "along", "with", "it", "NUMBER", "Changed", "the", "strategy", "along", "with", "kzk", "s", "idea", "NUMBER", "looks", "good", "for", "me", "LGTM", "I", "propose", "to", "add", "format", "raw", "NUMBER", "Currently", "even", "if", "users", "do", "not", "require", "to", "parse", "log", "lines", "we", "have", "to", "write", "configuration", "like", "TAG", "type", "tail", "format", "TAG", "NUMBER", "NUMBER", "TAG", "This", "requires", "to", "parse", "log", "lines", "by", "a", "regular", "expression", "and", "its", "overhead", "be", "not", "trivial", "NUMBER", "user", "system", "total", "real", "asis", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "regexp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "cf", "NUMBER", "LINK", "agent", "lite", "E", "NUMBER", "NUMBER", "A", "NUMBER", "in_tail", "This", "plugin", "enable", "to", "write", "configuration", "like", "TAG", "type", "tail", "format", "raw", "message_key", "message", "NUMBER", "TAG", "where", "message_key", "be", "set", "to", "message", "as", "default", "and", "do", "not", "require", "to", "parse", "log", "lines", "by", "a", "regular", "expression", "NUMBER", "There", "be", "a", "plugin", "fluent", "plugin", "tail", "asis", "LINK", "plugin", "tail", "asis", "which", "do", "the", "same", "thing", "with", "this", "patch", "and", "downloaded", "NUMBER", "times", "as", "in", "NUMBER", "LINK", "It", "tells", "us", "that", "some", "users", "be", "already", "use", "this", "feature", "and", "I", "propose", "to", "have", "this", "feature", "in", "the", "fluentd", "itself", "NUMBER", "Structured", "raw", "logs", "come", "here", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "proposal", "format", "message", "It", "still", "creates", "a", "structured", "record", "and", "its", "key", "name", "be", "msssage", "NUMBER", "raw", "doesn", "t", "imply", "this", "behavior", "NUMBER", "Apart", "from", "the", "name", "I", "think", "it", "s", "good", "idea", "to", "include", "this", "REGEXP", "NUMBER", "GJ", "NUMBER", "totally", "up", "for", "this", "one", "NUMBER", "sometimes", "you", "just", "dont", "want", "to", "parse", "the", "stuff", "NUMBER", "NUMBER", "NUMBER", "proposal", "format", "none", "I", "think", "that", "the", "value", "of", "format", "option", "should", "describe", "the", "name", "of", "a", "format", "NUMBER", "format", "message", "lets", "me", "feel", "like", "what", "was", "the", "message", "format", "NUMBER", "In", "contrast", "I", "think", "format", "none", "clearly", "describes", "as", "its", "format", "be", "none", "although", "I", "felt", "the", "same", "thing", "for", "format", "raw", "too", "NUMBER", "How", "do", "you", "think", "NUMBER", "format", "none", "or", "How", "about", "format", "plain", "I", "feel", "format", "plain", "be", "the", "best", "one", "NUMBER", "proposal", "format", "whole_line", "This", "indicates", "directly", "what", "will", "comes", "in", "records", "NUMBER", "NUMBER", "format", "plain", "repeatedly", "it", "seems", "format", "plain", "be", "the", "most", "popular", "NUMBER", "what", "do", "you", "think", "If", "it", "s", "okay", "I", "will", "modify", "the", "source", "code", "NUMBER", "All", "of", "you", "can", "use", "fluent", "agent", "lite", "for", "raw", "plain", "whole", "message", "record", "NUMBER", "LINK", "agent", "lite", "tagomoris", "Anybody", "knows", "your", "work", "octocat", "NUMBER", "format", "none", "repeatedly", "renamed", "raw", "to", "none", "format", "none", "be", "also", "good", "NUMBER", "thanks", "A", "feature", "like", "this", "was", "discussed", "on", "the", "previous", "issue", "LINK", "The", "current", "symlink", "feature", "be", "something", "different", "from", "what", "I", "want", "NUMBER", "out_file", "plugin", "uses", "buf_file", "plugin", "as", "buffer", "in", "default", "so", "new", "records", "be", "write", "to", "buffer", "at", "first", "NUMBER", "After", "a", "while", "the", "buffer", "be", "flushed", "out", "as", "logfile", "by", "out_file", "A", "matter", "be", "what", "be", "a", "current", "logfile", "The", "current", "symlink", "points", "a", "file", "created", "by", "out_file", "NUMBER", "But", "I", "think", "the", "symlink", "should", "point", "to", "a", "file", "created", "by", "buf_file", "NUMBER", "The", "feature", "to", "symlink", "a", "current", "buffer", "file", "can", "be", "use", "for", "not", "only", "out_file", "but", "also", "other", "BufferedOutput", "plugins", "NUMBER", "Let", "me", "confirm", "your", "opinion", "NUMBER", "A", "point", "at", "issue", "be", "how", "to", "set", "symlink_path", "via", "config_param", "or", "setter", "method", "right", "In", "both", "cases", "the", "capability", "to", "create", "symlink", "be", "in", "FileBuffer", "and", "FileBufferChunk", "NUMBER", "The", "difference", "be", "just", "who", "sets", "symlink", "path", "NUMBER", "If", "that", "s", "correct", "it", "s", "ok", "in", "either", "case", "NUMBER", "Fixed", "as", "you", "commented", "NUMBER", "out_copy", "plugin", "be", "expected", "to", "send", "exactly", "same", "records", "to", "each", "sub", "plugins", "NUMBER", "When", "a", "plugin", "which", "modifies", "records", "like", "record_modifier", "plugin", "be", "use", "the", "subsequent", "plugins", "get", "records", "modify", "by", "previous", "plugins", "NUMBER", "This", "patch", "fix", "this", "issue", "by", "deeply", "copying", "records", "EventStream", "NUMBER", "In", "a", "following", "simple", "configration", "TAG", "type", "copy", "TAG", "type", "record_modifier", "tag", "test", "NUMBER", "aa", "foo", "bar", "TAG", "TAG", "type", "stdout", "TAG", "TAG", "TAG", "type", "stdout", "TAG", "When", "you", "send", "a", "message", "echo", "aaa", "bbb", "fluent", "cat", "test", "You", "expect", "following", "results", "NUMBER", "test", "NUMBER", "aa", "aaa", "bbb", "foo", "bar", "test", "aaa", "bbb", "But", "you", "get", "results", "as", "blow", "NUMBER", "test", "NUMBER", "aa", "aaa", "bbb", "foo", "bar", "test", "aaa", "bbb", "foo", "bar", "I", "use", "the", "original", "behavior", "as", "a", "trick", "currently", "and", "doing", "deep", "copy", "always", "would", "make", "processing", "slow", "so", "NUMBER", "for", "deep_copy", "option", "NUMBER", "Added", "deep_copy", "option", "NUMBER", "I", "made", "CopyOutputChain", "which", "extend", "OutputChain", "to", "simplify", "the", "implementation", "NUMBER", "NUMBER", "Sounds", "good", "to", "have", "deep_copy", "option", "NUMBER", "The", "insntance_eval", "method", "do", "not", "always", "return", "self", "NUMBER", "Make", "sure", "to", "return", "DSLElement", "instance", "NUMBER", "Fluentd", "assumes", "record", "be", "not", "nil", "and", "some", "loggers", "validate", "record", "be", "nil", "or", "not", "NUMBER", "But", "some", "implementation", "can", "send", "nil", "to", "in_forward", "or", "something", "NUMBER", "So", "input", "plugin", "or", "engine", "should", "ignore", "nil", "record", "event", "NUMBER", "This", "fix", "do", "not", "skip", "nil", "records", "submitted", "to", "in_forward", "use", "PackedForward", "format", "NUMBER", "To", "be", "consistent", "shouldn", "t", "MessagePackEventStream", "also", "skip", "nil", "records", "in", "MessagePackEventStream", "each", "Plus", "MessagePackEventStream", "to_msgpack_stream", "do", "not", "skip", "nil", "records", "NUMBER", "If", "output", "plugin", "be", "ObjectBufferedOutput", "its", "format", "method", "will", "still", "get", "nil", "records", "from", "in_forward", "NUMBER", "Do", "you", "think", "a", "it", "s", "input", "plugin", "s", "responsibility", "to", "skip", "nil", "records", "Or", "b", "be", "it", "output", "plugins", "responsibility", "If", "a", "we", "can", "t", "use", "MessagePackEventStream", "to_msgpack_stream", "optimization", "because", "MessagePackEventStream", "or", "in_forward", "needs", "to", "deserialize", "PackedForward", "message", "to", "skip", "nil", "records", "NUMBER", "I", "wanted", "to", "have", "a", "test", "helper", "method", "pitches", "which", "calls", "pugin", "s", "emits", "tag", "es", "to", "test", "plugins", "such", "as", "fluent", "plugin", "grepcounter", "NUMBER", "This", "be", "maybe", "useful", "for", "fluent", "plugin", "datacounter", "too", "NUMBER", "Thanks", "tagomoris", "In", "addition", "to", "NUMBER", "time", "Time", "NUMBER", "now", "NUMBER", "to_i", "d", "NUMBER", "with", "xxx", "time", "do", "d", "d", "NUMBER", "pitch", "f", "NUMBER", "data", "NUMBER", "f", "NUMBER", "data", "NUMBER", "end", "I", "propose", "to", "support", "ways", "to", "write", "test", "as", "NUMBER", "time", "Time", "NUMBER", "now", "NUMBER", "to_i", "d", "NUMBER", "with", "xxx", "do", "d", "d", "NUMBER", "pitch", "f", "NUMBER", "data", "NUMBER", "f", "NUMBER", "data", "NUMBER", "time", "end", "and", "NUMBER", "d", "NUMBER", "with", "xxx", "do", "d", "d", "NUMBER", "pitch", "f", "NUMBER", "data", "NUMBER", "f", "NUMBER", "data", "NUMBER", "end", "The", "NUMBER", "way", "be", "good", "for", "v", "NUMBER", "compatibility", "since", "v", "NUMBER", "s", "TestDriver", "emit", "support", "NUMBER", "argument", "as", "def", "emit", "record", "time", "Time", "NUMBER", "now", "Futhermore", "someone", "may", "want", "to", "write", "test", "with", "different", "time", "s", "NUMBER", "We", "should", "support", "it", "NUMBER", "The", "NUMBER", "way", "be", "the", "simplest", "way", "to", "write", "test", "NUMBER", "We", "often", "do", "not", "care", "of", "time", "in", "some", "test", "cases", "NUMBER", "In", "the", "NUMBER", "way", "the", "time", "property", "be", "initialized", "with", "Time", "NUMBER", "now", "NUMBER", "to_i", "internally", "NUMBER", "Thanks", "text_parser", "NUMBER", "rb", "be", "almost", "same", "as", "v", "NUMBER", "s", "parser", "NUMBER", "rb", "There", "be", "some", "diferrences", "listed", "below", "NUMBER", "remove", "undocumented", "parser", "apache", "and", "ngingx", "rename", "apache", "NUMBER", "to", "apache", "remove", "default", "time", "If", "time_key", "be", "not", "specified", "return", "null", "NUMBER", "add", "nginx", "parser", "rename", "apache", "to", "apache", "NUMBER", "Thanks", "choplin", "ok", "NUMBER", "I", "will", "follow", "your", "code", "style", "NUMBER", "made", "a", "patch", "which", "fix", "an", "indentation", "NUMBER", "NUMBER", "tagomoris", "I", "get", "an", "error", "as", "bolows", "when", "I", "test", "my", "plugin", "fluent", "plugin", "grep", "NUMBER", "Users", "seo", "NUMBER", "naotoshi", "NUMBER", "rbenv", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "logger", "NUMBER", "rb", "NUMBER", "in", "TAG", "suzukaze", "We", "can", "t", "accept", "only", "new", "behaviour", "because", "almost", "users", "expect", "existence", "behaviour", "NUMBER", "Isn", "t", "it", "acceptable", "to", "add", "new", "behavior", "that", "by", "default", "works", "like", "before", "ie", "NUMBER", "it", "be", "backwards", "compatible", "but", "works", "for", "new", "configurations", "For", "instance", "by", "add", "an", "option", "that", "do", "not", "exist", "in", "old", "configurations", "elsif", "read_from_head", "pe", "NUMBER", "instance_of", "FilePositionEntry", "or", "last_inode", "NUMBER", "old", "configurations", "don", "t", "have", "read_from_head", "and", "therefore", "this", "should", "only", "work", "for", "people", "who", "force", "reading", "from", "the", "beginning", "of", "the", "file", "in", "new", "configurations", "NUMBER", "Yes", "I", "agree", "we", "should", "preserve", "the", "exist", "behaviour", "just", "add", "a", "new", "directive", "to", "read", "from", "the", "head", "NUMBER", "by", "the", "way", "LINK", "plugin", "tail", "ex", "calls", "this", "option", "read_all", "repeatedly", "actually", "neither", "to", "me", "to", "be", "frank", "hehe", "My", "suggestion", "read_new_files_from_beginning", "true", "Although", "a", "little", "bit", "long", "for", "my", "taste", "NUMBER", "summary", "We", "have", "a", "problem", "to", "analyzing", "int", "float", "columns", "with", "TreasureData", "or", "mongoDB", "which", "parsed", "from", "file", "with", "in_tail", "NUMBER", "I", "expect", "NUMBER", "to", "be", "integer", "NUMBER", "to", "be", "float", "value", "but", "in_tail", "makes", "them", "string", "type", "NUMBER", "On", "use", "fluent", "plugin", "typecast", "It", "could", "convert", "types", "by", "manually", "NUMBER", "It", "be", "not", "cool", "to", "convert", "type", "cast", "by", "manually", "NUMBER", "it", "have", "to", "update", "whenever", "log", "format", "has", "change", "NUMBER", "it", "takes", "much", "cost", "of", "maintenance", "NUMBER", "Thus", "I", "have", "add", "auto", "type", "conversion", "option", "for", "parser", "NUMBER", "rb", "NUMBER", "configuration", "sample", "TAG", "type", "tail", "format", "ltsv", "time_format", "d", "b", "Y", "H", "M", "S", "z", "path", "var", "log", "httpd", "access_log", "tag", "debug", "NUMBER", "apache", "NUMBER", "access", "auto_type_convert", "yes", "TAG", "sample", "results", "the", "difference", "seems", "in", "status", "size", "response_time", "NUMBER", "diff", "diff", "u", "before", "NUMBER", "json", "after", "NUMBER", "json", "before", "NUMBER", "json", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "after", "NUMBER", "json", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "domain", "NUMBER", "host", "NUMBER", "server", "NUMBER", "ident", "user", "method", "GET", "path", "protocol", "HTTP", "NUMBER", "status", "NUMBER", "size", "NUMBER", "referer", "agent", "Mozilla", "response_time", "NUMBER", "cookie", "set_cookie", "domain", "NUMBER", "host", "NUMBER", "server", "NUMBER", "ident", "user", "method", "GET", "path", "protocol", "HTTP", "NUMBER", "status", "NUMBER", "size", "NUMBER", "referer", "agent", "Mozilla", "response_time", "NUMBER", "cookie", "set_cookie", "benchmark", "result", "I", "have", "benchmarked", "the", "type", "conversion", "speed", "because", "it", "be", "very", "important", "to", "parse", "as", "fast", "as", "possible", "NUMBER", "The", "result", "Integer", "value", "rescue", "false", "be", "faster", "than", "value", "NUMBER", "to_i", "NUMBER", "to_s", "implementation", "NUMBER", "benchmark", "ken", "bundle", "exec", "ruby", "test", "NUMBER", "rb", "user", "system", "total", "real", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "benchmark", "ken", "bundle", "exec", "ruby", "test", "NUMBER", "rb", "user", "system", "total", "real", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "benchmark", "ken", "bundle", "exec", "ruby", "test", "NUMBER", "rb", "user", "system", "total", "real", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "benchmark", "ken", "bundle", "exec", "ruby", "test", "NUMBER", "rb", "user", "system", "total", "real", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "benchmark", "code", "ruby", "require", "benchmark", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "index", "value", "if", "value", "value", "NUMBER", "to_i", "NUMBER", "to_s", "record", "index", "value", "NUMBER", "to_i", "elsif", "value", "value", "NUMBER", "to_f", "NUMBER", "to_s", "record", "index", "value", "NUMBER", "to_f", "end", "end", "return", "record", "end", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "index", "value", "if", "Integer", "value", "rescue", "false", "record", "index", "value", "NUMBER", "to_i", "elsif", "Float", "value", "rescue", "false", "record", "index", "value", "NUMBER", "to_f", "end", "end", "return", "record", "end", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "index", "value", "if", "int_value", "Integer", "value", "rescue", "false", "record", "index", "int_value", "elsif", "float_value", "Float", "value", "rescue", "false", "record", "index", "float_value", "end", "end", "return", "record", "end", "record", "int", "NUMBER", "float", "NUMBER", "n", "NUMBER", "Benchmark", "NUMBER", "bm", "do", "x", "x", "NUMBER", "report", "convert_type", "NUMBER", "record", "x", "NUMBER", "report", "convert_type", "NUMBER", "record", "x", "NUMBER", "report", "convert_type", "NUMBER", "record", "end", "I", "have", "write", "a", "blog", "about", "this", "pull", "req", "NUMBER", "LINK", "ken", "NUMBER", "hatenablog", "NUMBER", "com", "entry", "fluentd", "parser", "auto", "type", "conversion", "Why", "use", "string", "type", "Oops", "I", "ve", "fix", "NUMBER", "LINK", "ken", "fluentd", "commit", "NUMBER", "e", "NUMBER", "a", "NUMBER", "f", "NUMBER", "c", "NUMBER", "a", "NUMBER", "ffe", "NUMBER", "a", "NUMBER", "ca", "NUMBER", "b", "NUMBER", "cfd", "It", "s", "sorry", "for", "my", "misunderstood", "usage", "for", "config_param", "parameter", "NUMBER", "thank", "you", "NUMBER", "The", "result", "Integer", "value", "rescue", "false", "be", "slower", "than", "value", "NUMBER", "to_i", "NUMBER", "to_s", "implementation", "NUMBER", "bash", "ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "bundle", "exec", "ruby", "test", "NUMBER", "rb", "Rehearsal", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "total", "NUMBER", "sec", "user", "system", "total", "real", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "On", "add", "this", "test", "convert_type", "NUMBER", "be", "same", "speed", "or", "faster", "a", "little", "than", "convert_type", "NUMBER", "I", "m", "planning", "to", "update", "convert_type", "like", "following", "convert_type", "NUMBER", "code", "NUMBER", "How", "do", "you", "think", "to", "use", "convert_type", "NUMBER", "instead", "of", "convert_type", "NUMBER", "ruby", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "index", "value", "if", "value", "int_value", "value", "NUMBER", "to_i", "NUMBER", "to_s", "record", "index", "int_value", "elsif", "value", "float_value", "value", "NUMBER", "to_f", "NUMBER", "to_s", "record", "index", "float_value", "end", "end", "return", "record", "end", "results", "ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "bundle", "exec", "ruby", "test", "NUMBER", "rb", "Rehearsal", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "total", "NUMBER", "sec", "user", "system", "total", "real", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "code", "ruby", "require", "benchmark", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "index", "value", "if", "value", "value", "NUMBER", "to_i", "NUMBER", "to_s", "record", "index", "value", "NUMBER", "to_i", "elsif", "value", "value", "NUMBER", "to_f", "NUMBER", "to_s", "record", "index", "value", "NUMBER", "to_f", "end", "end", "return", "record", "end", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "index", "value", "if", "Integer", "value", "rescue", "false", "record", "index", "value", "NUMBER", "to_i", "elsif", "Float", "value", "rescue", "false", "record", "index", "value", "NUMBER", "to_f", "end", "end", "return", "record", "end", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "index", "value", "if", "int_value", "Integer", "value", "rescue", "false", "record", "index", "int_value", "elsif", "float_value", "Float", "value", "rescue", "false", "record", "index", "float_value", "end", "end", "return", "record", "end", "def", "convert_type", "NUMBER", "record", "record", "NUMBER", "each", "do", "index", "value", "if", "value", "int_value", "value", "NUMBER", "to_i", "NUMBER", "to_s", "record", "index", "int_value", "elsif", "value", "float_value", "value", "NUMBER", "to_f", "NUMBER", "to_s", "record", "index", "float_value", "end", "end", "return", "record", "end", "record", "int", "NUMBER", "float", "NUMBER", "str", "NUMBER", "hoge", "msg", "path", "to", "n", "NUMBER", "Benchmark", "NUMBER", "bmbm", "do", "x", "x", "NUMBER", "report", "n", "NUMBER", "times", "convert_type", "NUMBER", "record", "NUMBER", "dup", "x", "NUMBER", "report", "n", "NUMBER", "times", "convert_type", "NUMBER", "record", "NUMBER", "dup", "x", "NUMBER", "report", "n", "NUMBER", "times", "convert_type", "NUMBER", "record", "NUMBER", "dup", "x", "NUMBER", "report", "n", "NUMBER", "times", "convert_type", "NUMBER", "record", "NUMBER", "dup", "end", "I", "have", "update", "the", "code", "and", "also", "confirmed", "rake", "test", "has", "pass", "NUMBER", "LINK", "ken", "fluentd", "commit", "NUMBER", "cdf", "NUMBER", "e", "NUMBER", "f", "NUMBER", "bf", "NUMBER", "f", "NUMBER", "c", "NUMBER", "b", "NUMBER", "c", "NUMBER", "c", "NUMBER", "cb", "Variable", "name", "index", "be", "wrong", "NUMBER", "It", "s", "not", "index", "NUMBER", "field", "name", "Thank", "you", "tagomoris", "NUMBER", "I", "quite", "agree", "NUMBER", "It", "should", "use", "field", "name", "or", "key", "NUMBER", "I", "have", "modify", "it", "as", "key", "as", "like", "official", "document", "NUMBER", "LINK", "lang", "NUMBER", "org", "ja", "NUMBER", "class", "Hash", "NUMBER", "html", "It", "may", "results", "unexpect", "conversion", "and", "it", "should", "use", "non", "missin", "critical", "situation", "NUMBER", "On", "add", "this", "option", "as", "official", "it", "may", "raise", "support", "cost", "and", "or", "decrease", "a", "feeling", "of", "trust", "for", "fluentd", "NUMBER", "Thus", "I", "d", "be", "better", "to", "write", "this", "function", "as", "meta", "plugin", "like", "below", "NUMBER", "Would", "you", "please", "give", "me", "a", "opinion", "for", "this", "issue", "input", "sample", "TAG", "type", "autocast", "TAG", "type", "tail", "format", "ltsv", "time_format", "d", "b", "Y", "H", "M", "S", "z", "path", "var", "log", "httpd", "access_log", "tag", "apache", "NUMBER", "access", "TAG", "TAG", "output", "filter", "sample", "TAG", "type", "autocast", "TAG", "type", "mongo", "database", "fluent", "collection", "test", "TAG", "TAG", "Thank", "you", "I", "met", "an", "error", "as", "below", "when", "fluentd", "tried", "to", "stdout", "a", "hash", "including", "Float", "NAN", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "emit", "transaction", "fail", "error", "NaN", "be", "an", "invalid", "number", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "yajl", "ruby", "NUMBER", "lib", "yajl", "NUMBER", "rb", "NUMBER", "in", "encode", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "yajl", "ruby", "NUMBER", "lib", "yajl", "NUMBER", "rb", "NUMBER", "in", "dump", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_stdout", "NUMBER", "rb", "NUMBER", "in", "block", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "yajl", "ruby", "NUMBER", "lib", "yajl", "NUMBER", "rb", "NUMBER", "in", "encode", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "yajl", "ruby", "NUMBER", "lib", "yajl", "NUMBER", "rb", "NUMBER", "in", "encode", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "yajl", "ruby", "NUMBER", "lib", "yajl", "NUMBER", "rb", "NUMBER", "in", "encode", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "yajl", "ruby", "NUMBER", "lib", "yajl", "NUMBER", "rb", "NUMBER", "in", "encode", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "yajl", "ruby", "NUMBER", "lib", "yajl", "NUMBER", "rb", "NUMBER", "in", "dump", "It", "occur", "by", "Yajl", "NUMBER", "dump", "record", "at", "LINK", "_stdout", "NUMBER", "rb", "L", "NUMBER", "and", "yes", "JSON", "do", "not", "have", "any", "representations", "for", "NaN", "as", "stated", "at", "LINK", "_gen", "NUMBER", "h", "L", "NUMBER", "I", "believe", "similar", "things", "occur", "for", "other", "non", "JSONable", "datatypes", "too", "NUMBER", "My", "idea", "to", "fix", "this", "be", "not", "to", "convert", "into", "JSON", "in", "out_stdout", "plugin", "NUMBER", "What", "do", "you", "think", "repeatedly", "I", "get", "NaN", "when", "I", "use", "fluent", "plugin", "anomalydetect", "NUMBER", "I", "already", "sent", "a", "pull", "request", "to", "fix", "it", "at", "LINK", "plugin", "anomalydetect", "pull", "NUMBER", "but", "as", "I", "write", "above", "I", "believe", "similar", "things", "would", "occur", "for", "other", "reasons", "NUMBER", "Adding", "output_type", "option", "be", "nice", "idea", "NUMBER", "I", "will", "send", "a", "pull", "request", "in", "the", "near", "future", "NUMBER", "this", "case", "be", "from", "very", "simple", "case", "NUMBER", "TAG", "type", "file", "path", "Users", "junyoung", "results", "NUMBER", "txt", "TAG", "after", "starting", "a", "fluentd", "process", "I", "ve", "delete", "the", "output", "file", "results", "NUMBER", "txt", "when", "it", "was", "under", "be", "use", "by", "fluentd", "NUMBER", "but", "fluentd", "couldn", "t", "write", "anymore", "although", "outputs", "be", "still", "generating", "from", "a", "process", "NUMBER", "I", "have", "an", "issue", "td", "agent", "fail", "to", "parse", "the", "config", "file", "that", "include", "multi", "bytes", "characters", "NUMBER", "Which", "doesn", "t", "occur", "when", "td", "agent", "be", "start", "with", "etc", "init", "NUMBER", "d", "td", "agent", "but", "do", "when", "start", "with", "service", "command", "NUMBER", "It", "seems", "to", "be", "due", "to", "the", "difference", "of", "environment", "variables", "between", "etc", "init", "NUMBER", "d", "td", "agent", "and", "service", "command", "NUMBER", "The", "latter", "doesn", "t", "inherit", "environment", "variables", "from", "the", "terminal", "from", "which", "the", "command", "be", "executed", "NUMBER", "You", "can", "see", "the", "details", "in", "this", "blog", "post", "LINK", "start", "stop", "NUMBER", "html", "NUMBER", "I", "ll", "propose", "we", "set", "default", "encoding", "of", "the", "config", "file", "and", "provide", "an", "option", "to", "change", "the", "encoding", "via", "fluentd", "command", "NUMBER", "The", "default", "value", "UTF", "NUMBER", "can", "be", "considered", "safe", "in", "almost", "all", "of", "the", "cases", "I", "guess", "NUMBER", "This", "thread", "of", "fluentd", "ML", "describes", "the", "same", "issue", "LINK", "topic", "fluentd", "fdi", "NUMBER", "rfZuC", "NUMBER", "A", "repeatedly", "rubinious", "get", "SEGV", "NUMBER", "do", "we", "really", "need", "to", "test", "on", "that", "So", "what", "do", "you", "guys", "think", "about", "THIS", "issue", "kentaro", "repeatedly", "my", "question", "be", "do", "we", "really", "need", "this", "to", "be", "option", "i", "think", "support", "only", "UTF", "NUMBER", "be", "just", "fine", "NUMBER", "Personally", "agree", "if", "you", "think", "it", "s", "OK", "Omitted", "the", "e", "option", "and", "now", "use", "force_encoding", "UTF", "NUMBER", "by", "default", "NUMBER", "I", "waited", "long", "for", "this", "system", "to", "come", "repeatedly", "my", "test", "log", "NUMBER", "td", "agent", "NUMBER", "conf", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "parser", "format", "ltsv", "key_name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "log", "usr", "lib", "NUMBER", "fluent", "ruby", "bin", "ruby", "NUMBER", "bin", "fluentd", "dry", "run", "c", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "parser", "format", "ltsv", "key_name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "nginx", "NUMBER", "access", "NUMBER", "type", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "type", "file", "echo", "NUMBER", "Setting", "in", "the", "case", "of", "insufficiency", "td", "agent", "NUMBER", "conf", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "parser", "format", "ltsv", "key_name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "log", "usr", "lib", "NUMBER", "fluent", "ruby", "bin", "ruby", "NUMBER", "bin", "fluentd", "dry", "run", "c", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "parser", "format", "ltsv", "key_name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dry", "run", "fail", "Missing", "type", "parameter", "on", "TAG", "directive", "echo", "NUMBER", "Case", "of", "typo", "TAG", "td", "agent", "NUMBER", "conf", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "parser", "format", "ltsv", "key_name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "log", "usr", "lib", "NUMBER", "fluent", "ruby", "bin", "ruby", "NUMBER", "bin", "fluentd", "dry", "run", "c", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dry", "run", "fail", "parse", "error", "at", "td", "agent", "NUMBER", "conf", "line", "NUMBER", "echo", "NUMBER", "Case", "of", "typo", "at", "plugin", "name", "td", "agent", "NUMBER", "conf", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "perser", "format", "ltsv", "key_name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "log", "usr", "lib", "NUMBER", "fluent", "ruby", "bin", "ruby", "NUMBER", "bin", "fluentd", "dry", "run", "c", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "perser", "format", "ltsv", "key_name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "nginx", "NUMBER", "access", "NUMBER", "type", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dry", "run", "fail", "Unknown", "output", "plugin", "perser", "NUMBER", "Run", "gem", "search", "rd", "fluent", "plugin", "to", "find", "plugins", "echo", "NUMBER", "Case", "of", "typo", "at", "plugin", "key", "td", "agent", "NUMBER", "conf", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "parser", "format", "ltsv", "name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "log", "usr", "lib", "NUMBER", "fluent", "ruby", "bin", "ruby", "NUMBER", "bin", "fluentd", "dry", "run", "c", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "parser", "format", "ltsv", "name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "nginx", "NUMBER", "access", "NUMBER", "type", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "config", "error", "in", "TAG", "type", "parser", "format", "ltsv", "name", "message", "add_prefix", "parsed", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dry", "run", "fail", "key_name", "parameter", "be", "required", "echo", "NUMBER", "Case", "of", "typo", "at", "plugin", "value", "td", "agent", "NUMBER", "conf", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "parser", "format", "ltvs", "key_name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "log", "usr", "lib", "NUMBER", "fluent", "ruby", "bin", "ruby", "NUMBER", "bin", "fluentd", "dry", "run", "c", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "file_alternative", "time_slice_format", "Y", "m", "d", "H", "path", "var", "log", "test", "nginx", "access", "output_data_type", "attr", "message", "localtime", "output_include_time", "false", "TAG", "TAG", "type", "anomalydetect", "tag", "nginx", "NUMBER", "anomaly", "NUMBER", "access_log", "tick", "NUMBER", "store_file", "var", "tmp", "anomalydetect", "NUMBER", "dat", "TAG", "TAG", "type", "parser", "format", "ltvs", "key_name", "message", "add_prefix", "parsed", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "test", "unmatched", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "nginx", "NUMBER", "access", "NUMBER", "type", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dry", "run", "fail", "Unknown", "format", "template", "ltvs", "echo", "NUMBER", "NUMBER", "to", "separate", "Engine", "NUMBER", "emit", "for", "log", "from", "each", "plugin", "s", "main", "thread", "NUMBER", "On", "current", "code", "if", "Engine", "NUMBER", "emit", "on", "log", "raises", "any", "exception", "main", "thread", "of", "each", "plugins", "that", "calls", "logger", "will", "fail", "and", "run", "into", "shutdown", "sequence", "NUMBER", "This", "behavior", "be", "unexpect", "for", "many", "users", "NUMBER", "I", "guess", "the", "intention", "of", "log_event_queue_signal_context", "be", "that", "signal", "handlers", "could", "cause", "a", "deadlock", "if", "the", "handler", "be", "call", "by", "the", "same", "signal", "handler", "NUMBER", "It", "makes", "sense", "to", "not", "use", "mutex", "to", "avoid", "the", "problem", "NUMBER", "But", "if", "you", "once", "use", "periodical", "polling", "you", "don", "t", "have", "to", "use", "mutex", "any", "more", "NUMBER", "Another", "problem", "be", "that", "c", "caller", "if", "c", "NUMBER", "count", "c", "NUMBER", "shift", "TAG", "be", "handle", "correctly", "as", "infinite", "loop", "as", "same", "as", "events", "of", "non", "fluentd", "logs", "NUMBER", "raw_log", "method", "be", "for", "events", "which", "cannot", "be", "emitted", "correctly", "NUMBER", "We", "must", "log", "about", "such", "events", "in", "local", "log", "file", "at", "least", "without", "emitting", "NUMBER", "Updated", "my", "code", "NUMBER", "The", "biggest", "difference", "between", "frsyuki", "s", "and", "mine", "be", "where", "background", "emit", "thread", "should", "be", "exists", "NUMBER", "My", "idea", "be", "logger", "be", "about", "format", "and", "any", "others", "not", "about", "event", "handle", "NUMBER", "When", "an", "error", "occur", "in", "on_read", "method", "UnixDomainSocketConnection", "be", "leak", "NUMBER", "This", "Pull", "Request", "be", "Close", "Connection", "at", "error", "NUMBER", "NUMBER", "OK", "NUMBER", "I", "understanding", "NUMBER", "I", "will", "change", "the", "error", "message", "NUMBER", "OK", "NUMBER", "I", "could", "NUMBER", "commit", "into", "NUMBER", "commit", "NUMBER", "Thank", "you", "NUMBER", "The", "method", "phi", "now", "of", "FailureDetector", "class", "seems", "to", "calculate", "the", "variable", "t", "wrong", "way", "NUMBER", "When", "heartbeat_interval", "be", "not", "the", "default", "value", "NUMBER", "sec", "t", "value", "contains", "heartbeat_interval", "NUMBER", "sec", "NUMBER", "But", "mean", "doesn", "t", "NUMBER", "So", "heartbeat_interval", "be", "set", "higher", "phi", "now", "returns", "a", "higher", "value", "NUMBER", "I", "m", "sorry", "but", "I", "don", "t", "know", "the", "phi", "accuracy", "calculation", "logic", "precisely", "NUMBER", "But", "there", "seems", "no", "documentation", "or", "reference", "of", "the", "phi_threshold", "directive", "and", "this", "logic", "may", "confuse", "some", "people", "like", "me", "NUMBER", "Thank", "you", "in", "advance", "NUMBER", "I", "think", "your", "correct", "tsuda", "NUMBER", "It", "should", "work", "with", "heartbeat_interval", "TAG", "type", "forward", "port", "NUMBER", "bind", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "forest", "subtype", "webhdfs", "remove_prefix", "applog", "TAG", "host", "NUMBER", "port", "NUMBER", "username", "hadoop", "path", "applog", "tag", "Y", "m", "d", "H", "NUMBER", "log", "flush_interval", "NUMBER", "s", "read_timeout", "NUMBER", "field_separator", "TAB", "output_include_time", "false", "output_include_tag", "false", "output_data_type", "attr", "all", "TAG", "TAG", "path", "applog", "tag", "Y", "m", "d", "H_", "M", "NUMBER", "log", "flush_interval", "NUMBER", "s", "TAG", "TAG", "copy", "log", "and", "forward", "to", "another", "fluentd", "TAG", "type", "forward", "flush_interval", "NUMBER", "s", "heartbeat_interval", "NUMBER", "s", "TAG", "name", "app", "NUMBER", "NUMBER", "host", "NUMBER", "port", "NUMBER", "weight", "NUMBER", "TAG", "TAG", "TAG", "repeatedly", "thanks", "for", "you", "reply", "NUMBER", "here", "be", "entire", "log", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "bind", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "forest", "subtype", "webhdfs", "remove_prefix", "applog", "TAG", "host", "NUMBER", "port", "NUMBER", "username", "hadoop", "path", "applog", "tag", "Y", "m", "d", "H", "NUMBER", "log", "flush_interval", "NUMBER", "s", "read_timeout", "NUMBER", "field_separator", "TAB", "output_include_time", "false", "output_include_tag", "false", "output_data_type", "attr", "all", "TAG", "TAG", "path", "applog", "tag", "Y", "m", "d", "H_", "M", "NUMBER", "log", "flush_interval", "NUMBER", "s", "TAG", "TAG", "TAG", "type", "forward", "flush_interval", "NUMBER", "s", "heartbeat_interval", "NUMBER", "s", "TAG", "name", "app", "NUMBER", "NUMBER", "host", "NUMBER", "port", "NUMBER", "weight", "NUMBER", "TAG", "TAG", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "applog", "NUMBER", "type", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "forwarding", "server", "app", "NUMBER", "NUMBER", "host", "NUMBER", "port", "NUMBER", "weight", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "listening", "fluent", "socket", "on", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "corp", "NUMBER", "ais", "NUMBER", "oragelog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "pro_tag_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "pic_speed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "dw", "NUMBER", "mobile_api_action", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "del_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "dw", "NUMBER", "soj", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "fix_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "process", "finished", "code", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "home", "www", "fluentd", "conf", "app", "log", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "bind", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "forest", "subtype", "webhdfs", "remove_prefix", "applog", "TAG", "host", "NUMBER", "port", "NUMBER", "username", "hadoop", "path", "applog", "tag", "Y", "m", "d", "H", "NUMBER", "log", "flush_interval", "NUMBER", "s", "read_timeout", "NUMBER", "field_separator", "TAB", "output_include_time", "false", "output_include_tag", "false", "output_data_type", "attr", "all", "TAG", "TAG", "path", "applog", "tag", "Y", "m", "d", "H_", "M", "NUMBER", "log", "flush_interval", "NUMBER", "s", "TAG", "TAG", "TAG", "type", "forward", "flush_interval", "NUMBER", "s", "heartbeat_interval", "NUMBER", "s", "TAG", "name", "app", "NUMBER", "NUMBER", "host", "NUMBER", "port", "NUMBER", "weight", "NUMBER", "TAG", "TAG", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "applog", "NUMBER", "type", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "forwarding", "server", "app", "NUMBER", "NUMBER", "host", "NUMBER", "port", "NUMBER", "weight", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "listening", "fluent", "socket", "on", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "corp", "NUMBER", "ais", "NUMBER", "oragelog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "pro_tag_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "pic_speed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "dw", "NUMBER", "soj", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "del_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "dw", "NUMBER", "mobile_api_action", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "fix_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "pro_click", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "hp_pricing_click_new", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "hp_pricing_click", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "haozu_test", "NUMBER", "g_ppc_system", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "broker_report_download_new", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "process", "finished", "code", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "home", "www", "fluentd", "conf", "app", "log", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "bind", "NUMBER", "TAG", "TAG", "type", "forest", "subtype", "webhdfs", "remove_prefix", "applog", "TAG", "host", "NUMBER", "port", "NUMBER", "username", "hadoop", "path", "applog", "tag", "Y", "m", "d", "H", "NUMBER", "log", "flush_interval", "NUMBER", "s", "read_timeout", "NUMBER", "field_separator", "TAB", "output_include_time", "false", "output_include_tag", "false", "output_data_type", "attr", "all", "TAG", "TAG", "path", "applog", "tag", "Y", "m", "d", "H_", "M", "NUMBER", "log", "flush_interval", "NUMBER", "s", "TAG", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "applog", "NUMBER", "type", "forest", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "listening", "fluent", "socket", "on", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "corp", "NUMBER", "ais", "NUMBER", "oragelog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "pro_tag_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "pic_speed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "del_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "webhdfs", "connection", "confirmed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "out_forest", "plants", "new", "output", "webhdfs", "for", "tag", "ekujna", "NUMBER", "jingjia_stop_data_collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "restarting", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "shutting", "down", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "process", "finished", "code", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "reading", "config", "file", "path", "home", "www", "fluentd", "conf", "app", "log", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "use", "configuration", "file", "TAG", "TAG", "type", "forward", "port", "NUMBER", "bind", "NUMBER", "TAG", "TAG", "type", "forest", "subtype", "webhdfs", "remove_prefix", "applog", "TAG", "host", "NUMBER", "port", "NUMBER", "username", "hadoop", "path", "applog", "tag", "Y", "m", "d", "H", "NUMBER", "log", "flush_interval", "NUMBER", "s", "read_timeout", "NUMBER", "field_separator", "TAB", "output_include_time", "false", "output_include_tag", "false", "output_data_type", "attr", "all", "TAG", "TAG", "path", "applog", "tag", "Y", "m", "d", "H_", "M", "NUMBER", "log", "flush_interval", "NUMBER", "s", "TAG", "TAG", "TAG", "I", "have", "shutdown", "fluentd", "and", "restart", "it", "NUMBER", "When", "I", "find", "that", "it", "be", "unstable", "I", "disable", "out_copy", "plugin", "NUMBER", "repeatedly", "yes", "process", "finished", "code", "NUMBER", "be", "always", "occur", "NUMBER", "Is", "it", "possible", "that", "it", "be", "cause", "by", "data", "I", "received", "Is", "there", "anyway", "to", "change", "the", "permissions", "of", "file", "outputted", "by", "out_file", "Right", "now", "they", "seem", "to", "be", "NUMBER", "which", "be", "way", "too", "open", "for", "our", "setup", "NUMBER", "Thanks", "Andy", "Well", "the", "problem", "be", "that", "if", "you", "have", "sensitive", "data", "in", "your", "log", "file", "you", "don", "t", "want", "them", "world", "writeable", "NUMBER", "That", "seems", "like", "a", "bad", "idea", "NUMBER", "now", "daemonized", "fluentd", "s", "umask", "be", "NUMBER", "not", "daemonized", "fluentd", "s", "umask", "be", "same", "as", "the", "run", "environment", "NUMBER", "and", "out_file", "has", "not", "specified", "a", "permission", "at", "File", "NUMBER", "open", "NUMBER", "I", "propose", "the", "following", "NUMBER", "NUMBER", "fluentd", "should", "have", "a", "default", "permission", "to", "handle", "file", "NUMBER", "typically", "NUMBER", "NUMBER", "out_file", "will", "have", "config_param", "permission", "to", "set", "it", "for", "output", "file", "NUMBER", "That", "sounds", "like", "a", "good", "ideal", "to", "me", "NUMBER", "I", "believe", "I", "misspoke", "before", "actually", "all", "my", "file", "have", "a", "permission", "of", "NUMBER", "NUMBER", "My", "assumption", "be", "that", "since", "the", "base", "fluentd", "directory", "for", "our", "setup", "srv", "logs", "fluentd", "be", "actually", "a", "symlink", "to", "another", "place", "the", "symlink", "itself", "has", "permissions", "NUMBER", "that", "be", "why", "we", "be", "get", "log", "file", "with", "NUMBER", "as", "the", "permission", "NUMBER", "This", "fix", "a", "serious", "bug", "that", "makes", "the", "copy", "plugin", "leak", "events", "when", "use", "with", "time", "sliced", "output", "plugins", "NUMBER", "And", "possibly", "other", "cases", "of", "event", "leak", "NUMBER", "Sharing", "a", "a", "single", "instance", "of", "MesspaPack", "Unpacker", "between", "input", "plugins", "and", "MessagePackEventStream", "instances", "be", "unsafe", "NUMBER", "A", "test", "case", "has", "be", "add", "to", "prove", "how", "easy", "it", "be", "leak", "events", "with", "the", "copy", "plugin", "and", "multiple", "output", "plugins", "NUMBER", "cc", "kzk", "I", "ve", "be", "use", "this", "patch", "in", "production", "since", "last", "Sunday", "and", "it", "works", "perfectly", "NUMBER", "No", "more", "events", "lost", "Any", "feedback", "repeatedly", "I", "m", "surprised", "too", "NUMBER", "Many", "users", "might", "be", "loosing", "events", "without", "noticing", "Did", "you", "see", "the", "test", "case", "It", "s", "very", "easy", "to", "reproduce", "NUMBER", "Here", "s", "how", "LINK", "repeatedly", "kzk", "any", "update", "on", "this", "I", "m", "going", "on", "vacation", "next", "Sunday", "and", "I", "want", "to", "make", "sure", "this", "gets", "merge", "before", "I", "leave", "NUMBER", "I", "think", "it", "s", "a", "critical", "bug", "and", "should", "be", "fix", "asap", "NUMBER", "I", "m", "pretty", "sure", "many", "users", "be", "loosing", "events", "without", "noticing", "NUMBER", "Please", "let", "me", "know", "if", "you", "need", "more", "details", "NUMBER", "Thanks", "Good", "catch", "repeatedly", "NUMBER", "I", "find", "that", "the", "code", "cause", "this", "situation", "LINK", "Actually", "the", "result", "be", "different", "between", "msgpack", "v", "NUMBER", "and", "v", "NUMBER", "Calling", "reset", "in", "feed_each", "block", "was", "unexpect", "usage", "NUMBER", "In", "v", "NUMBER", "Unpacker", "NUMBER", "new", "doesn", "t", "impact", "on", "performance", "because", "it", "has", "cache", "memory", "internally", "NUMBER", "So", "I", "agree", "that", "MessagePackEventStream", "shouldn", "t", "use", "cached", "Unpacker", "NUMBER", "abecciu", "td", "agent", "stable", "distribution", "of", "Fluentd", "still", "uses", "msgpack", "v", "NUMBER", "If", "you", "want", "a", "stable", "version", "i", "recommend", "you", "to", "check", "this", "repository", "LINK", "data", "td", "agent", "blob", "master", "debian", "source", "include", "binaries", "repeatedly", "frsyuki", "please", "merge", "Thanks", "for", "merge", "guys", "You", "should", "release", "a", "new", "version", "of", "the", "gem", "soon", "so", "that", "users", "don", "t", "get", "hit", "by", "this", "bug", "NUMBER", "Hi", "I", "followed", "all", "of", "the", "instructions", "to", "set", "up", "fluentd", "with", "the", "webhdfs", "plugin", "very", "well", "do", "by", "the", "way", "NUMBER", "I", "configured", "my", "namenode", "path", "NUMBER", "I", "have", "include", "the", "configuration", "snippet", "and", "the", "log", "NUMBER", "tmp", "log_fluentd", "be", "a", "directory", "with", "mode", "NUMBER", "so", "webhdfs", "should", "be", "able", "to", "open", "it", "NUMBER", "What", "do", "this", "error", "mean", "Thank", "you", "for", "your", "time", "and", "all", "of", "your", "effort", "Lance", "TAG", "type", "webhdfs", "host", "TAG", "port", "NUMBER", "path", "tmp", "log_fluentd", "access", "NUMBER", "log", "NUMBER", "hostname", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "http", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "source", "type", "debug_agent", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "td", "NUMBER", "NUMBER", "type", "tdlog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "debug", "NUMBER", "type", "stdout", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "add", "match", "pattern", "hdfs", "NUMBER", "NUMBER", "type", "webhdfs", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "webdhfs", "check", "request", "fail", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "unexpect", "error", "error", "TAG", "TAG", "TAG", "TAG", "Error", "NUMBER", "NOT_FOUND", "TAG", "TAG", "TAG", "TAG", "HTTP", "ERROR", "NUMBER", "TAG", "TAG", "Problem", "accessing", "webhdfs", "v", "NUMBER", "NUMBER", "Reason", "TAG", "NOT_FOUND", "TAG", "TAG", "TAG", "TAG", "TAG", "Powered", "by", "Jetty", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "webhdfs", "NUMBER", "lib", "webhdfs", "client_v", "NUMBER", "rb", "NUMBER", "in", "request", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "webhdfs", "NUMBER", "lib", "webhdfs", "client_v", "NUMBER", "rb", "NUMBER", "in", "operate_requests", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "webhdfs", "NUMBER", "lib", "webhdfs", "client_v", "NUMBER", "rb", "NUMBER", "in", "list", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "webhdfs", "NUMBER", "lib", "fluent", "plugin", "out_webhdfs", "NUMBER", "rb", "NUMBER", "in", "start", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "start", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "block", "in", "start", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "start", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "run_engine", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "block", "in", "start", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "main_process", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "block", "in", "supervise", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "fork", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "supervise", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "in", "start", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "command", "fluentd", "NUMBER", "rb", "NUMBER", "in", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "NUMBER", "rubygems", "custom_require", "NUMBER", "rb", "NUMBER", "in", "require", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "NUMBER", "rubygems", "custom_require", "NUMBER", "rb", "NUMBER", "in", "require", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "bin", "fluentd", "NUMBER", "in", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "bin", "fluentd", "NUMBER", "in", "load", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "NUMBER", "fluent", "ruby", "bin", "fluentd", "NUMBER", "in", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "sbin", "td", "agent", "NUMBER", "in", "load", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "sbin", "td", "agent", "NUMBER", "in", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "process", "finished", "code", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "process", "died", "within", "NUMBER", "second", "NUMBER", "exit", "NUMBER", "as", "repeatedly", "suggested", "this", "be", "fluent", "plugin", "webhdfs", "issue", "NUMBER", "btw", "did", "you", "enable", "webhdfs", "for", "sure", "Seems", "like", "the", "client", "get", "NUMBER", "Yes", "you", "re", "right", "on", "both", "counts", "NUMBER", "Apologies", "NUMBER", "When", "fluentd", "be", "in", "trouble", "ex", "buffer", "chunk", "full", "that", "every", "emit", "for", "all", "message", "will", "fail", "Fluent", "Engine", "NUMBER", "emit", "writes", "error", "log", "and", "stacktrace", "for", "every", "emit", "event", "NUMBER", "This", "brings", "error", "log", "storm", "for", "fluentd", "s", "log", "NUMBER", "Traffic", "of", "NUMBER", "message", "per", "seconds", "brings", "NUMBER", "lines", "of", "warn", "log", "and", "stacktrace", "lines", "in", "Fluent", "Engine", "emit", "NUMBER", "And", "out_exec_filter", "calls", "every", "time", "for", "each", "one", "message", "NUMBER", "This", "brings", "more", "fluentd", "error", "log", "storm", "and", "its", "including", "message", "content", "itself", "NUMBER", "In", "troubles", "investigations", "be", "very", "hard", "by", "this", "fluentd", "s", "log", "storm", "NUMBER", "We", "need", "options", "to", "suppress", "these", "logs", "seriously", "NUMBER", "For", "farther", "version", "we", "may", "need", "configuration", "sections", "like", "TAG", "or", "other", "such", "that", "NUMBER", "Is", "this", "a", "top", "level", "configuration", "yes", "NUMBER", "It", "may", "be", "better", "to", "implement", "as", "command", "line", "option", "NUMBER", "Where", "be", "the", "test", "oh", "NUMBER", "squashed", "NUMBER", "Fluentd", "s", "code", "of", "HEAD", "doesn", "t", "take", "care", "for", "situations", "executed", "as", "foreground", "process", "NUMBER", "For", "foreground", "process", "terminals", "and", "daemonize", "tool", "send", "signals", "to", "all", "processes", "in", "target", "process", "group", "NUMBER", "In", "result", "Fluent", "Engine", "NUMBER", "op", "will", "be", "call", "twice", "and", "invalid", "shutdown", "processes", "will", "be", "executed", "NUMBER", "This", "patch", "cannot", "solve", "problem", "about", "out_exec_filter", "completely", "NUMBER", "Child", "processes", "of", "out_exec_filter", "will", "exit", "with", "signals", "for", "process", "group", "and", "out_exec_filter", "cannot", "make", "proper", "dicision", "to", "ignore", "exiting", "child", "process", "or", "not", "NUMBER", "Below", "be", "my", "td", "agent", "NUMBER", "conf", "file", "NUMBER", "I", "be", "get", "following", "warn", "message", "in", "td", "agent", "NUMBER", "log", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "parameter", "tag", "in", "lt", "source", "gt", "type", "unix", "path", "var", "run", "td", "agent", "td", "agent", "NUMBER", "sock", "tag", "s", "NUMBER", "webapp", "NUMBER", "logs", "lt", "source", "gt", "be", "not", "use", "NUMBER", "but", "it", "seems", "to", "be", "work", "ok", "NUMBER", "why", "be", "it", "warning", "it", "be", "not", "use", "lt", "source", "gt", "type", "tail", "format", "apache", "NUMBER", "path", "var", "log", "apache", "NUMBER", "access", "sconnect", "NUMBER", "log", "pos_file", "var", "log", "td", "agent", "apache", "NUMBER", "access_log", "sconnect", "NUMBER", "pos", "tag", "s", "NUMBER", "apache", "NUMBER", "access", "lt", "source", "gt", "lt", "match", "s", "NUMBER", "apache", "NUMBER", "access", "gt", "type", "s", "NUMBER", "aws_key_id", "abcd", "aws_sec_key", "efgh", "s", "NUMBER", "_bucket", "ijkl_logs", "path", "apache_logs", "buffer_path", "var", "log", "td", "agent", "buffer", "s", "NUMBER", "time_slice_format", "Y", "m", "d", "H", "time_slice_wait", "NUMBER", "m", "utc", "buffer_chunk_limit", "NUMBER", "m", "lt", "match", "gt", "webapp", "logs", "lt", "source", "gt", "type", "unix", "path", "var", "run", "td", "agent", "td", "agent", "NUMBER", "sock", "tag", "s", "NUMBER", "webapp", "NUMBER", "logs", "lt", "source", "gt", "lt", "match", "s", "NUMBER", "webapp", "NUMBER", "logs", "gt", "type", "s", "NUMBER", "aws_key_id", "abcd", "aws_sec_key", "efgh", "s", "NUMBER", "_bucket", "ijkl_logs", "path", "webapp_logs", "buffer_path", "var", "log", "td", "agent", "buffer", "webapp_s", "NUMBER", "time_slice_format", "Y", "m", "d", "H", "time_slice_wait", "NUMBER", "m", "utc", "buffer_chunk_limit", "NUMBER", "m", "lt", "match", "gt", "Hello", "What", "i", "want", "to", "do", "be", "different", "source", "be", "linked", "to", "different", "match", "block", "NUMBER", "So", "this", "wont", "be", "problem", "right", "Hmm", "i", "get", "it", "NUMBER", "we", "do", "not", "need", "to", "set", "tag", "paramater", "for", "source", "type", "unix", "right", "NUMBER", "thanks", "like", "this", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "temporarily", "fail", "to", "flush", "the", "buffer", "NUMBER", "next_retry", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error_class", "RuntimeError", "error", "command", "returns", "NUMBER", "hoge", "var", "folders", "hr", "m", "NUMBER", "p", "NUMBER", "kwx", "NUMBER", "fj", "NUMBER", "gc", "NUMBER", "_phc", "NUMBER", "bnmr", "NUMBER", "gn", "T", "fluent", "plugin", "exec", "NUMBER", "NUMBER", "NUMBER", "b", "NUMBER", "dld", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "Users", "tagomoris", "Documents", "fluentd", "lib", "fluent", "plugin", "out_exec", "NUMBER", "rb", "NUMBER", "in", "write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "Users", "tagomoris", "Documents", "fluentd", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "write_chunk", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "Users", "tagomoris", "Documents", "fluentd", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "pop", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "Users", "tagomoris", "Documents", "fluentd", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "try_flush", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "Users", "tagomoris", "Documents", "fluentd", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "run", "To", "suppress", "warn", "error", "logs", "we", "need", "same", "string", "for", "same", "error", "NUMBER", "Next", "retry", "time", "at", "the", "end", "of", "warn", "string", "prevent", "same", "warn", "error", "check", "NUMBER", "LabeledTSVParser", "has", "overriding", "ValuesParser", "method", "of", "configure", "NUMBER", "But", "it", "skipped", "error", "handle", "of", "configure", "in", "ValuesParser", "NUMBER", "LINK", "L", "NUMBER", "Yes", "NUMBER", "This", "issue", "merge", "to", "NUMBER", "ValuesParser", "be", "not", "delete", "the", "output", "of", "time", "key", "like", "other", "do", "so", "NUMBER", "Time", "key", "should", "be", "delete", "when", "it", "has", "use", "for", "fluentd", "internal", "time", "like", "TSVParser", "CSVParser", "do", "so", "NUMBER", "LabeledTSVParser", "error", "handle", "problem", "The", "error", "of", "time_format", "parameter", "be", "ignored", "puts", "message", "to", "log", "NUMBER", "warn", "NUMBER", "It", "should", "raise", "ConfigError", "NUMBER", "The", "default", "of", "time_key", "for", "LabeledTSVParser", "I", "think", "LabeledTSVParser", "should", "be", "time", "for", "the", "default", "of", "time_key", "NUMBER", "This", "behavior", "causes", "confusion", "and", "not", "same", "as", "ApacheParser", "JSONParser", "and", "RegexpParser", "NUMBER", "It", "cannot", "seamless", "upgrade", "from", "in_tail", "with", "regex", "or", "apache", "apache", "NUMBER", "nginx", "and", "so", "on", "NUMBER", "There", "configuration", "usualy", "have", "time_format", "but", "not", "it", "has", "time_key", "NUMBER", "like", "LINK", "If", "it", "not", "time", "for", "the", "default", "of", "time_key", "it", "could", "result", "use", "current", "time", "when", "time_format", "be", "blank", "NUMBER", "footnote", "ValuesParser", "was", "use", "by", "LabeledTSVParser", "TSVParser", "CSVParser", "repeatedly", "I", "have", "update", "issue", "NUMBER", "Would", "you", "please", "check", "it", "again", "Log", "event", "be", "not", "emitted", "when", "you", "have", "TAG", "because", "log", "NUMBER", "tag", "fluent", "do", "not", "match", "that", "pattern", "alone", "NUMBER", "Discard", "this", "patch", "if", "this", "be", "intended", "behavior", "NUMBER", "ok", "NUMBER", "thank", "you", "for", "a", "comment", "NUMBER", "Is", "there", "the", "v", "NUMBER", "specification", "about", "internal", "messaging", "system", "available", "Because", "of", "massive", "cluster", "I", "don", "t", "know", "which", "td", "agent", "transfer", "be", "breaked", "down", "look", "fluentd", "agent", "ip", "hostname", "status", "up", "down", "dead", "how", "much", "times", "and", "so", "on", "in", "a", "api", "or", "web", "for", "example", "flumes", "server", "monitor", "agent", "web", "Hi", "loveshell", "We", "be", "thinking", "of", "build", "this", "exact", "service", "as", "a", "hosted", "service", "at", "Treasure", "Data", "NUMBER", "Would", "you", "be", "interested", "Of", "course", "the", "client", "fluentd", "side", "of", "this", "will", "be", "open", "sourced", "NUMBER", "can", "I", "monitor", "my", "fluentd", "cluster", "sloved", "it", "RotationRequest", "should", "have", "wait", "attr_reader", "NUMBER", "Because", "the", "following", "line", "exists", "in", "in_tail", "NUMBER", "rb", "NUMBER", "wait", "rotate_queue", "NUMBER", "first", "NUMBER", "wait", "unless", "rotate_queue", "NUMBER", "empty", "Great", "job", "cool", "shipit", "Hi", "NUMBER", "I", "tried", "fluentd", "v", "NUMBER", "with", "msgpack", "NUMBER", "but", "i", "cannot", "NUMBER", "ruby", "v", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "cat", "Gemfile", "source", "LINK", "gem", "fluentd", "gem", "msgpack", "NUMBER", "bundle", "install", "Fetching", "gem", "metadata", "from", "LINK", "Resolving", "dependencies", "NUMBER", "Bundler", "could", "not", "find", "compatible", "version", "for", "gem", "msgpack", "In", "Gemfile", "fluentd", "NUMBER", "ruby", "depends", "on", "msgpack", "NUMBER", "ruby", "msgpack", "NUMBER", "It", "seems", "necessary", "to", "update", "fluentd", "NUMBER", "gemspec", "NUMBER", "I", "think", "v", "NUMBER", "release", "be", "to", "enable", "to", "use", "msgpack", "NUMBER", "Changed", "gemspec", "MUST", "be", "distributed", "as", "new", "version", "rubygem", "NUMBER", "I", "see", "NUMBER", "thanks", "NUMBER", "v", "NUMBER", "will", "be", "release", "soon", "NUMBER", "please", "wait", "for", "a", "while", "NUMBER", "I", "thought", "wrong", "to", "include", "Rakefile", "change", "in", "NUMBER", "I", "m", "sorry", "NUMBER", "This", "pull", "request", "allow", "fluentd", "get", "full", "configure", "from", "a", "url", "such", "as", "an", "API", "of", "SCM", "The", "configure", "content", "could", "be", "dynamic", "generate", "by", "a", "managment", "system", "NUMBER", "It", "would", "be", "very", "useful", "if", "we", "have", "a", "large", "number", "of", "machines", "and", "different", "configure", "on", "each", "machine", "NUMBER", "Two", "new", "params", "has", "be", "add", "u", "remote_config", "t", "timeout", "ps", "I", "get", "a", "error", "when", "run", "rake", "install", "ERROR", "Error", "installing", "NUMBER", "pkg", "fluentd", "NUMBER", "gem", "fluentd", "requires", "fluentd", "NUMBER", "I", "don", "t", "know", "how", "to", "fix", "this", "so", "I", "switch", "jeweler", "to", "bundler", "LINK", "oh", "NUMBER", "no", "I", "didn", "t", "seen", "HTTP", "include", "directive", "before", "NUMBER", "This", "pull", "request", "be", "not", "necessary", "close", "When", "run", "this", "super", "trivial", "filter", "memory", "usage", "keep", "growing", "growing", "growing", "TAG", "type", "exec_filter", "command", "bin", "cat", "in_format", "msgpack", "out_format", "msgpack", "time_key", "time", "tag", "authlogs", "NUMBER", "input", "NUMBER", "parsed", "TAG", "Any", "idea", "why", "This", "be", "with", "td", "agent", "NUMBER", "It", "may", "be", "fragmentations", "of", "memory", "space", "by", "msgpack", "v", "NUMBER", "x", "NUMBER", "I", "find", "that", "behavior", "with", "exec_filter", "msgpack", "option", "and", "also", "with", "heavy", "traffic", "in_forward", "out_forward", "environment", "NUMBER", "Options", "be", "to", "use", "jemalloc", "If", "you", "be", "use", "td", "agent", "v", "NUMBER", "or", "later", "jemalloc", "be", "automatically", "loaded", "NUMBER", "to", "use", "tsv", "or", "other", "format", "to", "use", "msgpack", "v", "NUMBER", "x", "If", "you", "want", "to", "use", "msgpack", "v", "NUMBER", "x", "you", "should", "change", "fluentd", "s", "dependency", "NUMBER", "It", "be", "relatively", "hard", "NUMBER", "We", "be", "now", "discussing", "that", "fix", "of", "fluentd", "on", "NUMBER", "NUMBER", "Hi", "Satoshi", "I", "use", "the", "current", "td", "agent", "version", "so", "it", "be", "definitely", "use", "jemalloc", "NUMBER", "The", "input", "be", "already", "an", "msgpack", "stream", "so", "converting", "it", "to", "another", "format", "presumably", "JSON", "be", "sad", "NUMBER", "But", "well", "I", "ll", "try", "this", "as", "a", "workaround", "no", "matter", "what", "NUMBER", "Thanks", "for", "your", "help", "NUMBER", "pinging", "jedisct", "NUMBER", "Yep", "this", "issue", "can", "be", "close", "NUMBER", "Fluentd", "with", "msgpack", "NUMBER", "works", "with", "dramatically", "less", "memory", "than", "with", "msgpack", "NUMBER", "Memory", "resource", "graphs", "for", "my", "personal", "benchmarks", "below", "Fluentd", "NUMBER", "ruby", "NUMBER", "p", "NUMBER", "msgpack", "NUMBER", "LINK", "ak", "NUMBER", "f", "NUMBER", "hatena", "NUMBER", "com", "images", "fotolife", "t", "tagomoris", "NUMBER", "NUMBER", "png", "Fluentd", "NUMBER", "ruby", "NUMBER", "p", "NUMBER", "msgpack", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "LINK", "ak", "NUMBER", "f", "NUMBER", "hatena", "NUMBER", "com", "images", "fotolife", "t", "tagomoris", "NUMBER", "NUMBER", "png", "FYI", "I", "m", "trying", "NUMBER", "days", "long", "run", "test", "with", "ruby", "NUMBER", "p", "NUMBER", "and", "msgpack", "NUMBER", "Long", "run", "test", "with", "fluentd", "v", "NUMBER", "msgpack", "v", "NUMBER", "and", "ruby", "NUMBER", "p", "NUMBER", "has", "successfully", "ended", "NUMBER", "NUMBER", "hours", "NUMBER", "NUMBER", "msgs", "sec", "NUMBER", "Mbps", "inbound", "outbound", "traffic", "by", "in_foward", "and", "out_forward", "cool", "clap", "NUMBER", "It", "looks", "good", "idea", "for", "me", "NUMBER", "NUMBER", "on", "repeatedly", "jeweler", "may", "not", "support", "such", "that", "syntax", "like", "NUMBER", "NUMBER", "rake", "build", "with", "gemspec", "NUMBER", "add_dependency", "msgpack", "NUMBER", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "Oh", "realy", "LINK", "file", "fluentd", "gemspec", "diff", "L", "NUMBER", "Your", "jeweler", "version", "be", "old", "My", "jeweler", "version", "be", "NUMBER", "Oh", "i", "might", "have", "a", "mistake", "NUMBER", "rake", "gemspec", "after", "gem", "i", "jeweler", "has", "succeeded", "NUMBER", "NUMBER", "Updated", "patch", "to", "include", "dependencies", "both", "msgpack", "NUMBER", "x", "and", "NUMBER", "x", "NUMBER", "Can", "anyone", "install", "fluentd", "with", "msgpack", "NUMBER", "x", "from", "my", "branch", "I", "m", "still", "fail", "with", "error", "rake", "build", "WARNING", "no", "description", "specified", "Successfully", "build", "RubyGem", "Name", "fluentd", "Version", "NUMBER", "File", "fluentd", "NUMBER", "gem", "gem", "i", "pkg", "fluentd", "NUMBER", "gem", "ERROR", "While", "executing", "gem", "NUMBER", "Gem", "DependencyError", "Unable", "to", "resolve", "dependencies", "fluentd", "requires", "msgpack", "NUMBER", "fluentd", "NUMBER", "gemspec", "be", "mkdir", "tmp", "cd", "tmp", "gem", "unpack", "NUMBER", "pkg", "fluentd", "NUMBER", "gem", "Unpacked", "gem", "Users", "tagomoris", "Documents", "fluentd", "tmp", "fluentd", "NUMBER", "cat", "fluentd", "NUMBER", "fluentd", "NUMBER", "gemspec", "Generated", "by", "jeweler", "DO", "NOT", "EDIT", "THIS", "FILE", "DIRECTLY", "Instead", "edit", "Jeweler", "Tasks", "in", "Rakefile", "and", "run", "rake", "gemspec", "encoding", "utf", "NUMBER", "Gem", "Specification", "NUMBER", "new", "do", "s", "s", "NUMBER", "name", "fluentd", "s", "NUMBER", "version", "NUMBER", "s", "NUMBER", "required_rubygems_version", "Gem", "Requirement", "NUMBER", "new", "NUMBER", "if", "s", "NUMBER", "respond_to", "required_rubygems_version", "s", "NUMBER", "authors", "Sadayuki", "Furuhashi", "s", "NUMBER", "date", "NUMBER", "NUMBER", "NUMBER", "s", "NUMBER", "email", "frsyuki", "gmail", "NUMBER", "com", "s", "NUMBER", "executables", "fluentd", "fluent", "cat", "fluent", "gem", "fluent", "debug", "s", "NUMBER", "extra_rdoc_files", "ChangeLog", "README", "NUMBER", "oc", "s", "NUMBER", "file", "AUTHORS", "COPYING", "Gemfile", "Rakefile", "VERSION", "bin", "fluent", "cat", "bin", "fluent", "debug", "bin", "fluent", "gem", "bin", "fluentd", "fluent", "NUMBER", "conf", "fluentd", "NUMBER", "gemspec", "lib", "fluent", "buffer", "NUMBER", "rb", "lib", "fluent", "command", "cat", "NUMBER", "rb", "lib", "fluent", "command", "debug", "NUMBER", "rb", "lib", "fluent", "command", "fluentd", "NUMBER", "rb", "lib", "fluent", "config", "NUMBER", "rb", "lib", "fluent", "engine", "NUMBER", "rb", "lib", "fluent", "env", "NUMBER", "rb", "lib", "fluent", "event", "NUMBER", "rb", "lib", "fluent", "input", "NUMBER", "rb", "lib", "fluent", "load", "NUMBER", "rb", "lib", "fluent", "log", "NUMBER", "rb", "lib", "fluent", "match", "NUMBER", "rb", "lib", "fluent", "mixin", "NUMBER", "rb", "lib", "fluent", "output", "NUMBER", "rb", "lib", "fluent", "parser", "NUMBER", "rb", "lib", "fluent", "plugin", "NUMBER", "rb", "lib", "fluent", "plugin", "buf_file", "NUMBER", "rb", "lib", "fluent", "plugin", "buf_memory", "NUMBER", "rb", "lib", "fluent", "plugin", "buf_zfile", "NUMBER", "rb", "lib", "fluent", "plugin", "in_debug_agent", "NUMBER", "rb", "lib", "fluent", "plugin", "in_exec", "NUMBER", "rb", "lib", "fluent", "plugin", "in_forward", "NUMBER", "rb", "lib", "fluent", "plugin", "in_gc_stat", "NUMBER", "rb", "lib", "fluent", "plugin", "in_http", "NUMBER", "rb", "lib", "fluent", "plugin", "in_object_space", "NUMBER", "rb", "lib", "fluent", "plugin", "in_status", "NUMBER", "rb", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "lib", "fluent", "plugin", "out_copy", "NUMBER", "rb", "lib", "fluent", "plugin", "out_exec", "NUMBER", "rb", "lib", "fluent", "plugin", "out_exec_filter", "NUMBER", "rb", "lib", "fluent", "plugin", "out_file", "NUMBER", "rb", "lib", "fluent", "plugin", "out_forward", "NUMBER", "rb", "lib", "fluent", "plugin", "out_null", "NUMBER", "rb", "lib", "fluent", "plugin", "out_roundrobin", "NUMBER", "rb", "lib", "fluent", "plugin", "out_stdout", "NUMBER", "rb", "lib", "fluent", "plugin", "out_stream", "NUMBER", "rb", "lib", "fluent", "plugin", "out_test", "NUMBER", "rb", "lib", "fluent", "plugin", "socket_util", "NUMBER", "rb", "lib", "fluent", "process", "NUMBER", "rb", "lib", "fluent", "status", "NUMBER", "rb", "lib", "fluent", "supervisor", "NUMBER", "rb", "lib", "fluent", "test", "NUMBER", "rb", "lib", "fluent", "test", "base", "NUMBER", "rb", "lib", "fluent", "test", "input_test", "NUMBER", "rb", "lib", "fluent", "test", "output_test", "NUMBER", "rb", "lib", "fluent", "version", "NUMBER", "rb", "test", "config", "NUMBER", "rb", "test", "helper", "NUMBER", "rb", "test", "match", "NUMBER", "rb", "test", "mixin", "NUMBER", "rb", "test", "parser", "NUMBER", "rb", "test", "plugin", "in_exec", "NUMBER", "rb", "test", "plugin", "in_forward", "NUMBER", "rb", "test", "plugin", "in_gc_stat", "NUMBER", "rb", "test", "plugin", "in_http", "NUMBER", "rb", "test", "plugin", "in_object_space", "NUMBER", "rb", "test", "plugin", "in_status", "NUMBER", "rb", "test", "plugin", "in_stream", "NUMBER", "rb", "test", "plugin", "in_syslog", "NUMBER", "rb", "test", "plugin", "in_tail", "NUMBER", "rb", "test", "plugin", "out_copy", "NUMBER", "rb", "test", "plugin", "out_exec", "NUMBER", "rb", "test", "plugin", "out_exec_filter", "NUMBER", "rb", "test", "plugin", "out_file", "NUMBER", "rb", "test", "plugin", "out_forward", "NUMBER", "rb", "test", "plugin", "out_roundrobin", "NUMBER", "rb", "test", "plugin", "out_stdout", "NUMBER", "rb", "test", "plugin", "out_stream", "NUMBER", "rb", "s", "NUMBER", "homepage", "LINK", "s", "NUMBER", "require_paths", "lib", "s", "NUMBER", "required_ruby_version", "Gem", "Requirement", "NUMBER", "new", "NUMBER", "s", "NUMBER", "rubygems_version", "NUMBER", "s", "NUMBER", "summary", "Fluent", "event", "collector", "s", "NUMBER", "test_files", "test", "config", "NUMBER", "rb", "test", "helper", "NUMBER", "rb", "test", "match", "NUMBER", "rb", "test", "mixin", "NUMBER", "rb", "test", "parser", "NUMBER", "rb", "test", "plugin", "in_exec", "NUMBER", "rb", "test", "plugin", "in_forward", "NUMBER", "rb", "test", "plugin", "in_gc_stat", "NUMBER", "rb", "test", "plugin", "in_http", "NUMBER", "rb", "test", "plugin", "in_object_space", "NUMBER", "rb", "test", "plugin", "in_status", "NUMBER", "rb", "test", "plugin", "in_stream", "NUMBER", "rb", "test", "plugin", "in_syslog", "NUMBER", "rb", "test", "plugin", "in_tail", "NUMBER", "rb", "test", "plugin", "out_copy", "NUMBER", "rb", "test", "plugin", "out_exec", "NUMBER", "rb", "test", "plugin", "out_exec_filter", "NUMBER", "rb", "test", "plugin", "out_file", "NUMBER", "rb", "test", "plugin", "out_forward", "NUMBER", "rb", "test", "plugin", "out_roundrobin", "NUMBER", "rb", "test", "plugin", "out_stdout", "NUMBER", "rb", "test", "plugin", "out_stream", "NUMBER", "rb", "if", "s", "NUMBER", "respond_to", "specification_version", "then", "s", "NUMBER", "specification_version", "NUMBER", "if", "Gem", "Version", "NUMBER", "new", "Gem", "VERSION", "Gem", "Version", "NUMBER", "new", "NUMBER", "then", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_runtime_dependency", "q", "TAG", "NUMBER", "NUMBER", "s", "NUMBER", "add_runtime_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_runtime_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_runtime_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_runtime_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_development_dependency", "q", "TAG", "NUMBER", "else", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "end", "else", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "s", "NUMBER", "add_dependency", "q", "TAG", "NUMBER", "end", "end", "I", "cannot", "understand", "what", "happens", "NUMBER", "oh", "I", "can", "t", "install", "official", "fluentd", "gem", "in", "my", "clean", "ruby", "environment", "don", "t", "install", "fluentd", "yet", "NUMBER", "NUMBER", "_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "NUMBER", "Anyway", "can", "t", "work", "gemspec", "NUMBER", "add_dependency", "msgpack", "NUMBER", "NUMBER", "because", "dependency", "resolver", "resolv", "AND", "condition", "only", "NUMBER", "gemspec", "NUMBER", "add_dependency", "msgpack", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "This", "dirty", "code", "can", "work", "NUMBER", "Should", "we", "remove", "dependency", "to", "fluentd", "itself", "s", "NUMBER", "add_runtime_dependency", "q", "TAG", "NUMBER", "from", "gemspec", "by", "editor", "and", "build", "with", "gem", "build", "fluentd", "NUMBER", "gemspec", "instead", "of", "rake", "build", "jeweler", "Finally", "i", "had", "build", "install", "fluentd", "NUMBER", "gem", "successfully", "with", "hotchpotch", "s", "huck", "for", "msgpack", "version", "specifications", "NUMBER", "frsyuki", "please", "merge", "great", "when", "i", "run", "sudo", "fluentd", "c", "etc", "fluent", "fluent", "NUMBER", "conf", "vv", "it", "show", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "supervise", "starting", "fluentd", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "read_config", "reading", "config", "file", "path", "etc", "fluent", "fluent", "NUMBER", "conf", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "buffer", "plugin", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "buffer", "plugin", "memory", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "debug_agent", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "exec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "gc_stat", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "http", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "object_space", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "status", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "tcp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "unix", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "syslog", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "tail", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "copy", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "exec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "exec_filter", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "null", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "roundrobin", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "stdout", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "tcp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "unix", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "test", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "configure", "use", "configuration", "file", "lt", "ROOT", "gt", "lt", "source", "gt", "type", "forward", "lt", "source", "gt", "lt", "source", "gt", "type", "http", "port", "NUMBER", "lt", "source", "gt", "lt", "source", "gt", "type", "tail", "format", "apache", "NUMBER", "path", "private", "var", "log", "apache", "NUMBER", "access_log", "pos_file", "var", "log", "td", "agent", "apache", "NUMBER", "access_log", "NUMBER", "pos", "tag", "mongo", "NUMBER", "apache", "lt", "source", "gt", "lt", "source", "gt", "type", "debug_agent", "port", "NUMBER", "lt", "source", "gt", "lt", "match", "debug", "NUMBER", "gt", "type", "stdout", "lt", "match", "gt", "lt", "match", "mongo", "NUMBER", "gt", "type", "mongo", "database", "apache", "collection", "access", "host", "NUMBER", "port", "NUMBER", "flush_interval", "NUMBER", "s", "lt", "match", "gt", "lt", "ROOT", "gt", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "source", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "source", "type", "http", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "source", "type", "tail", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "source", "type", "debug_agent", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "match", "pattern", "debug", "NUMBER", "type", "stdout", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "match", "pattern", "mongo", "NUMBER", "type", "mongo", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "mongo", "usr", "local", "Cellar", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "custom_require", "NUMBER", "rb", "NUMBER", "stack", "level", "too", "deep", "SystemStackError", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "info", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "supervise", "process", "finished", "code", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warn", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "supervise", "process", "died", "within", "NUMBER", "second", "NUMBER", "exit", "NUMBER", "TAG", "TAG", "what", "s", "the", "meaning", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "trace", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "mongo", "usr", "local", "Cellar", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "custom_require", "NUMBER", "rb", "NUMBER", "stack", "level", "too", "deep", "SystemStackError", "how", "to", "solve", "this", "problem", "my", "environment", "mac", "os", "NUMBER", "sudo", "gem", "list", "LOCAL", "GEMS", "fluent", "plugin", "mongo", "NUMBER", "fluentd", "NUMBER", "mongo", "NUMBER", "ruby", "v", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "I", "think", "this", "error", "be", "cause", "by", "mongo", "NUMBER", "If", "i", "commented", "the", "match", "of", "mongo", "this", "error", "disappears", "NUMBER", "thank", "you", "for", "your", "suggestion", "NUMBER", "I", "solve", "this", "problem", "by", "degrade", "the", "fluentd", "version", "NUMBER", "NUMBER", "sudo", "gem", "uninstall", "fluentd", "NUMBER", "sudo", "gem", "install", "fluentd", "v", "NUMBER", "NUMBER", "sudo", "fluentd", "c", "etc", "fluent", "fluent", "NUMBER", "conf", "vv", "it", "show", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "output", "plugin", "mongo", "Notice", "C", "extension", "not", "loaded", "NUMBER", "This", "be", "required", "for", "optimum", "MongoDB", "Ruby", "driver", "performance", "NUMBER", "You", "can", "install", "the", "extension", "as", "follows", "gem", "install", "bson_ext", "If", "you", "continue", "to", "receive", "this", "message", "after", "installing", "make", "sure", "that", "the", "bson_ext", "gem", "be", "in", "your", "load", "path", "and", "that", "the", "bson_ext", "and", "mongo", "gems", "be", "of", "the", "same", "version", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "out_mongo", "NUMBER", "rb", "NUMBER", "configure", "Setup", "mongo", "configuration", "mode", "normal", "NUMBER", "sudo", "gem", "install", "bson_ext", "run", "fluent", "again", "the", "same", "notice", "error", "NUMBER", "sudo", "gem", "uninstall", "bson_ext", "NUMBER", "sudo", "gem", "install", "bson_ext", "v", "NUMBER", "because", "my", "mongo", "version", "be", "NUMBER", "then", "run", "fluent", "again", "everything", "nomal", "NUMBER", "format_stream", "pass", "tag", "variable", "to", "filter_record", "without", "deep", "copying", "NUMBER", "It", "works", "fine", "when", "there", "be", "only", "NUMBER", "record", "in", "stream", "NUMBER", "But", "If", "the", "stream", "have", "n", "records", "filter_record", "filters", "tag", "n", "times", "NUMBER", "Yes", "NUMBER", "I", "be", "use", "HandleTagNameMixin", "NUMBER", "So", "I", "m", "aware", "that", "rewrite", "be", "allow", "and", "useful", "NUMBER", "Actually", "I", "faced", "this", "issue", "when", "use", "HandleTagNameMixin", "plugin", "NUMBER", "LINK", "plugin", "forward", "aws", "blob", "master", "lib", "fluent", "plugin", "in_forward_aws", "NUMBER", "rb", "I", "think", "it", "be", "easier", "to", "look", "at", "my", "unit", "test", "test_remove_tag_suffix", "in", "mixin", "NUMBER", "rb", "Input", "tag", "be", "testst", "remove_tag_suffix", "be", "st", "and", "input", "has", "NUMBER", "lines", "NUMBER", "In", "original", "implementation", "first", "tag", "becomes", "test", "and", "second", "tag", "becomes", "te", "remove_tag_suffix", "get", "applied", "NUMBER", "times", "due", "to", "NUMBER", "input", "lines", "With", "my", "patch", "output", "tag", "becomes", "test", "for", "both", "tags", "NUMBER", "remove_tag_suffix", "get", "applied", "only", "NUMBER", "time", "per", "line", "Here", "s", "source", "code", "NUMBER", "ruby", "def", "test_remove_tag_suffix", "format_check", "a", "NUMBER", "test", "format_check", "a", "NUMBER", "test", "TAG", "NUMBER", "d", "NUMBER", "emit", "a", "NUMBER", "d", "NUMBER", "run", "end", "Signed", "off", "by", "Tsuyoshi", "Ozawa", "ozawa", "NUMBER", "tsuyoshi", "gmail", "NUMBER", "com", "fluentd", "NUMBER", "\u3092rubygems\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059", "\u30b3\u30f3\u30d5\u30a3\u30b0\u5185\u306e", "\u6587\u5b57\u3092\u30b3\u30e1\u30f3\u30c8\u3067\u306a\u304f\u6271\u3044\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059", "mongodb\u3068\u306e\u63a5\u7d9a\u3067", "fluent", "plugin", "mongo", "\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c", "mongodb\u3068\u306e\u63a5\u7d9a\u60c5\u5831\u306b", "\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30b1\u30fc\u30b9\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u6307\u5b9a\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059", "user", "username", "password", "hoge", "hoge", "\u4e0a\u8a18\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u3067\u3059\u3068", "\u4ee5\u964d\u304c\u30b3\u30e1\u30f3\u30c8\u6271\u3044\u3068\u306a\u308a", "Mongodb\u306e\u8a8d\u8a3c\u3067\u5f3e\u304b\u308c\u3066\u3044\u307e\u3059", "\u30a8\u30b9\u30b1\u30fc\u30d7\u7b49\u3067\u304d\u308b\u3068\u826f\u3044\u306e\u3067\u3059\u304c", "Thank", "you", "NUMBER", "I", "m", "looking", "forward", "to", "the", "fluentd", "v", "NUMBER", "LabeledTSVParser", "cannot", "handle", "time_key", "and", "time_format", "expectedly", "NUMBER", "Without", "this", "fix", "ValuesParser", "configure", "will", "throw", "following", "ConfigError", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "config", "error", "file", "fluent", "NUMBER", "conf", "error", "time_key", "time", "be", "not", "include", "in", "keys", "I", "use", "following", "fluent", "NUMBER", "conf", "for", "my", "test", "NUMBER", "TAG", "type", "tail", "path", "var", "log", "nginx", "ltsv", "NUMBER", "log", "pos_file", "tmp", "ltsv", "NUMBER", "log", "NUMBER", "pos", "tag", "nginx", "NUMBER", "ltsv", "format", "ltsv", "time_key", "time", "time_format", "d", "b", "Y", "H", "M", "S", "z", "TAG", "Great", "LGTM", "NUMBER", "repeatedly", "Path", "field", "match", "be", "not", "strict", "may", "cause", "data", "loss", "NUMBER", "NUMBER", "Jan", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "GET", "a", "b", "HTTP", "NUMBER", "NUMBER", "NUMBER", "Mozilla", "NUMBER", "notice", "Path", "field", "not", "match", "space", "Add", "Labeled", "Tab", "separated", "Values", "LTSV", "format", "support", "to", "parser", "NUMBER", "rb", "NUMBER", "LTSV", "format", "be", "a", "variant", "of", "TSV", "NUMBER", "Each", "field", "of", "LTSV", "has", "a", "label", "separated", "by", "NUMBER", "The", "log", "line", "of", "LTSV", "be", "like", "this", "time", "NUMBER", "Feb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "host", "NUMBER", "req", "GET", "list", "HTTP", "NUMBER", "status", "NUMBER", "The", "configuration", "of", "in_tail", "with", "ltsv", "format", "be", "like", "this", "TAG", "type", "tail", "format", "ltsv", "time_format", "d", "b", "Y", "H", "M", "S", "z", "path", "var", "log", "nginx", "access_log", "pos_file", "var", "log", "nginx", "access_log", "NUMBER", "pos", "tag", "nginx", "NUMBER", "access", "TAG", "time_key", "and", "time_format", "can", "be", "specified", "like", "JSONParser", "NUMBER", "delimiter", "and", "label_delimiter", "also", "can", "be", "specified", "NUMBER", "yes", "You", "can", "choose", "either", "you", "like", "NUMBER", "ref", "NUMBER", "LINK", "You", "can", "see", "what", "Labeled", "TSV", "be", "at", "the", "blog", "posts", "below", "LINK", "LINK", "In", "this", "pull", "request", "I", "add", "a", "LabeledTSVParser", "and", "confirmed", "fluentd", "worked", "well", "with", "such", "a", "config", "below", "TAG", "type", "tail", "format", "ltsv", "path", "path", "to", "log", "tag", "debug", "TAG", "LGTM", "NUMBER", "\u65e5\u672c\u8a9e\u3067\u3059", "fluentd\u81ea\u4f53\u306e\u30ed\u30b0\u306f", "log", "NUMBER", "rb\u306e\u5b9f\u88c5\u3092\u898b\u308b\u9650\u308aANSI", "Color\u306b\u3082\u3068\u3065\u3044\u3066\u8272\u5206\u3051\u3057\u3066\u51fa\u529b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059", "\u305f\u3060\u3057", "out", "NUMBER", "tty", "\u304c\u507d\u306e\u5834\u5408", "\u30a8\u30b9\u30b1\u30fc\u30d7\u30b7\u30fc\u30b1\u30f3\u30b9\u304c\u51fa\u529b\u3055\u308c\u305a", "\u30ed\u30b0\u30ec\u30d9\u30eb\u3092\u8868\u3059\u30e1\u30bf\u60c5\u5831\u304c\u6b20\u843d\u3057\u307e\u3059", "\u7aef\u7684\u306b\u8a00\u3046\u3068", "o", "\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u51fa\u529b\u3057\u305f\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u4e2d\u306b\u30ed\u30b0\u30ec\u30d9\u30eb\u306e\u8a18\u8ff0\u304c\u7121\u304f", "\u30ed\u30b0\u76e3\u8996\u306e\u969b\u306b\u30ec\u30d9\u30eb\u306b\u5fdc\u3058\u3066\u30a2\u30e9\u30fc\u30c8\u3092\u9001\u308b", "\u3068\u3044\u3046\u4e8b\u304c\u884c\u3044\u3065\u3089\u304f\u306a\u3063\u3066\u3044\u307e\u3059", "log", "NUMBER", "rb\u306b\u3064\u3044\u3066", "\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30ed\u30b0\u30ec\u30d9\u30eb\u306e\u8a18\u8ff0\u3092\u8ffd\u8a18\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u53ef\u80fd\u3067\u3057\u3087\u3046\u304b", "NUMBER", "\u884c\u76ee\u3042\u305f\u308a", "LEVEL_TRACE", "NUMBER", "LEVEL_DEBUG", "NUMBER", "LEVEL_INFO", "NUMBER", "LEVEL_WARN", "NUMBER", "LEVEL_ERROR", "NUMBER", "LEVEL_FATAL", "NUMBER", "\u4ee5\u4e0b\u3092\u8ffd\u52a0", "LOG_TEXT", "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", "NUMBER", "\u884c\u76ee\u3042\u305f\u308a", "return", "time", "NUMBER", "rftime", "time_format", "\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4", "return", "time", "NUMBER", "rftime", "time_format", "LOG_TEXT", "level", "Good", "I", "agree", "with", "you", "there", "NUMBER", "Just", "a", "proof", "of", "concept", "NUMBER", "Not", "ready", "for", "merge", "NUMBER", "If", "name", "of", "config", "file", "specified", "use", "c", "option", "be", "ended", "with", "NUMBER", "rb", "then", "it", "be", "loaded", "as", "Config", "DSL", "NUMBER", "Below", "be", "example", "config", "use", "DSL", "NUMBER", "ruby", "build", "in", "TCP", "input", "echo", "TAG", "fluent", "cat", "TAG", "source", "type", "forward", "HTTP", "input", "LINK", "TAG", "json", "TAG", "source", "type", "http", "port", "NUMBER", "Listen", "DRb", "for", "debug", "source", "type", "debug_agent", "port", "NUMBER", "match", "tag", "debug", "NUMBER", "and", "dump", "to", "console", "match", "debug", "NUMBER", "type", "stdout", "match", "tag", "myapp", "NUMBER", "and", "forward", "and", "write", "to", "file", "match", "myapp", "NUMBER", "type", "copy", "store", "type", "forward", "host", "NUMBER", "buffer_type", "file", "buffer_path", "var", "log", "fluent", "myapp", "forward", "retry_limit", "NUMBER", "flush_interval", "NUMBER", "s", "store", "type", "file", "path", "var", "log", "fluent", "myapp", "Comments", "be", "welcome", "NUMBER", "NUMBER", "Plus", "I", "hope", "the", "DSL", "can", "take", "Proc", "s", "for", "configuration", "values", "like", "match", "foo", "type", "bar", "key", "baz", "match", "que", "callback", "matched", "NUMBER", "Is", "it", "possible", "kentaro", "Possible", "NUMBER", "Only", "type", "and", "buffer_type", "be", "converted", "into", "String", "NUMBER", "cool", "NUMBER", "Symmetric", "property", "between", "the", "NUMBER", "styles", "of", "configuration", "be", "not", "always", "needed", "I", "guess", "NUMBER", "was", "there", "any", "movement", "on", "this", "topic", "I", "really", "don", "t", "get", "ruby", "projects", "which", "provide", "the", "mean", "to", "have", "a", "great", "config", "system", "and", "yet", "decide", "to", "build", "an", "horrible", "custom", "xml", "like", "static", "config", "format", "NUMBER", "why", "on", "earth", "would", "anyone", "do", "that", "I", "just", "start", "use", "fluentd", "and", "it", "already", "annoys", "me", "let", "s", "say", "I", "have", "ten", "file", "I", "want", "to", "tail", "if", "it", "was", "ruby", "I", "just", "need", "a", "loop", "but", "all", "I", "can", "do", "now", "be", "copy", "paste", "awesome", "NUMBER", "In", "fact", "I", "will", "probably", "hook", "myself", "into", "the", "ruby", "code", "and", "bypass", "the", "current", "config", "file", "altogether", "but", "having", "an", "official", "ruby", "support", "for", "the", "config", "would", "be", "nice", "NUMBER", "and", "NUMBER", "I", "can", "t", "even", "bypass", "this", "xml", "crap", "since", "it", "be", "so", "deeply", "implement", "that", "every", "class", "knows", "about", "it", "s", "After", "my", "last", "look", "at", "the", "code", "and", "my", "attempt", "at", "configuring", "the", "core", "directly", "in", "ruby", "bypassing", "the", "config", "file", "I", "just", "don", "t", "think", "that", "s", "even", "possible", "due", "to", "design", "decisions", "NUMBER", "Every", "plugin", "receive", "an", "instance", "of", "the", "Config", "class", "which", "be", "a", "nearly", "direct", "mapping", "of", "the", "pseudo", "xml", "structure", "of", "the", "current", "config", "file", "so", "even", "if", "we", "have", "a", "ruby", "dsl", "it", "will", "have", "to", "rebuild", "this", "xml", "internally", "which", "be", "stupid", "NUMBER", "What", "be", "the", "status", "of", "this", "pull", "request", "Are", "all", "participants", "OK", "with", "this", "implementation", "This", "pull", "request", "be", "just", "a", "suggestion", "that", "configuration", "file", "should", "be", "Ruby", "inner", "DSL", "NUMBER", "And", "I", "think", "that", "there", "be", "many", "topics", "to", "be", "discussed", "about", "NUMBER", "Syntax", "e", "NUMBER", "g", "NUMBER", "type", "forward", "vs", "set", "type", "forward", "Compatibility", "for", "current", "config", "format", "types", "like", "Proc", "can", "t", "be", "use", "in", "it", "Should", "I", "close", "this", "PR", "I", "guess", "this", "issue", "have", "be", "solve", "without", "callbacks", "in", "configurations", "NUMBER", "Please", "open", "other", "issue", "for", "additional", "feature", "request", "of", "configuration", "DSL", "NUMBER", "Thanks", "great", "I", "m", "looking", "forward", "to", "the", "next", "release", "NUMBER", "I", "do", "no", "wish", "my", "timestamps", "to", "be", "formatted", "NUMBER", "This", "do", "not", "appear", "to", "be", "possible", "at", "present", "it", "defaults", "to", "iso", "NUMBER", "Perhaps", "if", "config", "had", "disable_time_format", "true", "then", "we", "could", "conditionally", "format", "time", "NUMBER", "You", "can", "get", "seconds", "from", "Epoch", "by", "time_format", "s", "Thats", "useful", "thanks", "NUMBER", "Actually", "I", "be", "wanting", "milliseconds", "I", "understand", "many", "of", "the", "input", "plugins", "only", "timestamp", "to", "the", "second", "I", "have", "made", "local", "change", "to", "allow", "millisecond", "timestamps", "would", "it", "be", "possible", "to", "get", "milliseconds", "from", "Epoch", "time", "format", "Fluentd", "has", "time", "of", "message", "as", "second", "so", "we", "cannot", "get", "time", "as", "milliseconds", "in", "any", "way", "NUMBER", "I", "made", "a", "simple", "change", "to", "node", "NUMBER", "js", "input", "plugin", "and", "fluentd", "be", "passing", "through", "time", "of", "message", "in", "milliseconds", "it", "be", "only", "the", "format", "for", "output", "that", "be", "cause", "a", "problem", "NUMBER", "Is", "there", "any", "particular", "reason", "why", "time", "be", "only", "to", "the", "second", "I", "have", "several", "use", "cases", "where", "millisecond", "timing", "be", "required", "NUMBER", "Thanks", "for", "the", "info", "NUMBER", "So", "outputting", "a", "raw", "timestamp", "be", "possible", "use", "s", "NUMBER", "And", "hopefully", "we", "will", "soon", "be", "able", "to", "use", "timestamps", "with", "milliseconds", "from", "Epoch", "NUMBER", "I", "will", "close", "this", "issue", "and", "perhaps", "open", "a", "separate", "request", "for", "milliseconds", "NUMBER", "Jimflip", "Just", "curious", "Why", "do", "you", "need", "milliseconds", "I", "m", "interested", "in", "how", "you", "re", "use", "Fluentd", "NUMBER", "To", "support", "milliseconds", "performance", "and", "backward", "compatibility", "be", "the", "issue", "Backward", "compatibility", "all", "output", "plugins", "assume", "the", "time", "be", "an", "integers", "in", "seconds", "NUMBER", "If", "the", "next", "version", "support", "milliseconds", "from", "Epoch", "it", "will", "be", "a", "floating", "point", "which", "doesn", "t", "change", "the", "meaning", "NUMBER", "Performance", "Integers", "Fixnum", "be", "a", "immediate", "while", "floating", "points", "be", "reference", "in", "Ruby", "NUMBER", "It", "means", "performance", "will", "get", "worse", "slightly", "NUMBER", "I", "want", "to", "know", "the", "a", "specific", "example", "when", "milliseconds", "be", "useful", "NUMBER", "Thanks", "NUMBER", "frsyuki", "We", "be", "looking", "to", "use", "fluentd", "as", "part", "of", "our", "user", "monitoring", "system", "NUMBER", "Part", "of", "which", "be", "track", "user", "interaction", "client", "side", "NUMBER", "Users", "be", "capable", "of", "interacting", "with", "the", "UI", "multiple", "times", "per", "second", "i", "NUMBER", "e", "NUMBER", "they", "can", "click", "mouse", "over", "multiple", "items", "per", "second", "the", "timestamp", "be", "use", "to", "track", "order", "of", "interaction", "NUMBER", "For", "backwards", "compatability", "I", "would", "suggest", "keep", "seconds", "since", "epoch", "as", "the", "default", "and", "having", "an", "optional", "msec", "since", "epoch", "as", "an", "option", "NUMBER", "I", "have", "made", "a", "branch", "to", "do", "this", "for", "fluent", "node", "logger", "very", "simple", "and", "the", "timestamp", "as", "an", "integer", "be", "pass", "through", "fluentd", "with", "no", "issue", "except", "at", "the", "format", "stage", "NUMBER", "I", "be", "then", "use", "couchdb", "output", "plugin", "NUMBER", "I", "m", "not", "sure", "if", "there", "be", "a", "significant", "performance", "cost", "but", "ruby", "be", "a", "bit", "different", "from", "other", "platforms", "in", "that", "it", "provides", "the", "millisconds", "as", "a", "float", "which", "isn", "t", "really", "desirable", "an", "integer", "would", "make", "a", "lot", "more", "sense", "and", "in", "fact", "be", "necessary", "for", "my", "project", "NUMBER", "We", "originally", "start", "looking", "at", "openTSDB", "and", "there", "be", "a", "lot", "of", "people", "requiring", "millisecond", "granularity", "mostly", "for", "sensors", "NUMBER", "In", "previous", "track", "projects", "I", "have", "always", "use", "to", "milliseconds", "from", "epoch", "without", "issue", "and", "would", "be", "concerned", "what", "issue", "it", "might", "throw", "up", "use", "seconds", "NUMBER", "Another", "NUMBER", "for", "milliseconds", "NUMBER", "My", "use", "case", "be", "apache", "logging", "and", "without", "millisecond", "level", "precision", "for", "hundreds", "of", "request", "per", "second", "or", "more", "I", "need", "the", "ability", "to", "parse", "out", "milliseconds", "otherwise", "apache", "logs", "become", "very", "hard", "to", "analyze", "NUMBER", "I", "actually", "worked", "around", "this", "by", "altering", "the", "parser", "plugin", "to", "store", "parsed", "time", "objects", "as", "floats", "but", "it", "would", "be", "better", "to", "have", "this", "as", "native", "functionality", "NUMBER", "another", "call", "from", "the", "peanut", "gallery", "for", "microseconds", "NUMBER", "use", "it", "to", "dump", "haproxy", "logs", "into", "elasticsearch", "NUMBER", "NUMBER", "for", "milliseconds", "NUMBER", "Use", "case", "be", "application", "logs", "from", "cluster", "of", "nodes", "where", "I", "want", "order", "on", "a", "millisecond", "level", "hi", "i", "test", "type", "forward", "retry_limit", "i", "find", "default", "be", "NUMBER", "but", "when", "i", "test", "it", "s", "NUMBER", "NUMBER", "times", "NUMBER", "why", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "configure", "use", "configuration", "file", "TAG", "TAG", "type", "tail_ex", "format", "apache", "path", "data", "logs", "weblog", "NUMBER", "log", "tag", "ff", "NUMBER", "file", "pos_file", "tmp", "pos_file", "TAG", "TAG", "type", "forward", "host", "NUMBER", "port", "NUMBER", "retry_limit", "NUMBER", "send_timeout", "NUMBER", "s", "recover_wait", "NUMBER", "s", "heartbeat_interval", "NUMBER", "s", "phi_threshold", "NUMBER", "hard_timeout", "NUMBER", "s", "flush_interval", "NUMBER", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "source", "type", "tail_ex", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "register_impl", "registered", "input", "plugin", "tail_ex", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "match", "pattern", "type", "forward", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "NUMBER", "rb", "NUMBER", "configure", "host", "option", "in", "forward", "output", "be", "obsoleted", "NUMBER", "Use", "TAG", "host", "xxx", "TAG", "instead", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "NUMBER", "rb", "NUMBER", "block", "in", "configure", "add", "forwarding", "server", "NUMBER", "NUMBER", "host", "NUMBER", "port", "NUMBER", "weight", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "NUMBER", "rb", "NUMBER", "rebuild_weight_array", "rebuilding", "weight", "array", "lost_weight", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "initialize", "following", "tail", "of", "data", "logs", "weblog", "access", "NUMBER", "log", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "temporarily", "fail", "to", "flush", "the", "buffer", "next", "retry", "will", "be", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Connection", "refused", "connect", "NUMBER", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "new", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "connect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "send_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "block", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "times", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "write_chunk", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "pop", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "try_flush", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "temporarily", "fail", "to", "flush", "the", "buffer", "next", "retry", "will", "be", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Connection", "refused", "connect", "NUMBER", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "new", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "connect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "send_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "block", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "times", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "write_chunk", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "pop", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "try_flush", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "temporarily", "fail", "to", "flush", "the", "buffer", "next", "retry", "will", "be", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Connection", "refused", "connect", "NUMBER", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "new", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "connect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "send_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "block", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "times", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "write_chunk", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "pop", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "try_flush", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "temporarily", "fail", "to", "flush", "the", "buffer", "next", "retry", "will", "be", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Connection", "refused", "connect", "NUMBER", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "new", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "connect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "send_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "block", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "times", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "write_chunk", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "pop", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "try_flush", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "temporarily", "fail", "to", "flush", "the", "buffer", "next", "retry", "will", "be", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Connection", "refused", "connect", "NUMBER", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "new", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "connect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "send_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "block", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "times", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "write_chunk", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "pop", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "try_flush", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "NUMBER", "rb", "NUMBER", "tick", "detached", "forwarding", "server", "NUMBER", "NUMBER", "host", "NUMBER", "port", "NUMBER", "phi", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "NUMBER", "rb", "NUMBER", "rebuild_weight_array", "rebuilding", "weight", "array", "lost_weight", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "temporarily", "fail", "to", "flush", "the", "buffer", "next", "retry", "will", "be", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "no", "nodes", "be", "available", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "write_chunk", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "in", "pop", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "try_flush", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "temporarily", "fail", "to", "flush", "the", "buffer", "next", "retry", "will", "be", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "no", "nodes", "be", "available", "instance", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "in", "write_objects", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "usr", "lib", "NUMBER", "fluent", "r", "sorry", "I", "was", "wrong", "this", "issue", "can", "be", "close", "and", "very", "thx", "for", "your", "reply", "Hi", "We", "may", "have", "a", "platform", "issue", "in", "that", "be", "seeing", "a", "lot", "of", "CLOSE_WAIT", "state", "at", "the", "fluent", "aggregator", "side", "so", "I", "have", "forwarders", "sending", "to", "two", "aggregators", "NUMBER", "It", "runs", "for", "a", "while", "and", "then", "stops", "NUMBER", "The", "forwarders", "give", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "output", "NUMBER", "rb", "NUMBER", "rescue", "in", "try_flush", "temporarily", "fail", "to", "flush", "the", "buffer", "next", "retry", "will", "be", "at", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "no", "nodes", "be", "available", "instance", "NUMBER", "The", "aggregators", "give", "have", "many", "CLOSE_WAIT", "state", "for", "TCP", "and", "I", "can", "see", "many", "socket", "accepts", "and", "few", "close", "NUMBER", "ubuntu", "fluent", "worker", "NUMBER", "live", "netstat", "an", "awk", "tcp", "print", "NUMBER", "sort", "uniq", "c", "NUMBER", "CLOSE_WAIT", "NUMBER", "ESTABLISHED", "NUMBER", "LISTEN", "ubuntu", "fluent", "worker", "NUMBER", "live", "uname", "a", "Linux", "fluent", "worker", "NUMBER", "live", "NUMBER", "NUMBER", "virtual", "NUMBER", "Ubuntu", "SMP", "Fri", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "UTC", "NUMBER", "x", "NUMBER", "_", "NUMBER", "x", "NUMBER", "_", "NUMBER", "x", "NUMBER", "_", "NUMBER", "GNU", "Linux", "Running", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "linux", "Any", "ideas", "workaround", "maybe", "num_threads", "NUMBER", "Is", "this", "still", "relevant", "We", "re", "having", "an", "issue", "where", "a", "plugin", "be", "use", "a", "gem", "that", "has", "NUMBER", "syntax", "i", "symbol", "symbol", "NUMBER", "ForwardOutput", "node", "selection", "has", "bug", "of", "OutOfIndex", "with", "rr", "and", "weight_array", "after", "resize", "of", "weight_array", "NUMBER", "Just", "after", "recovery", "of", "detached", "nodes", "weight_array", "be", "shortened", "but", "rr", "be", "not", "initialized", "and", "may", "be", "greater", "than", "weight_array", "NUMBER", "length", "NUMBER", "This", "makes", "OutOfIndex", "node", "be", "nil", "NUMBER", "This", "pullreq", "fix", "this", "problem", "NUMBER", "rr", "starts", "from", "NUMBER", "not", "NUMBER", "but", "this", "be", "very", "little", "problem", "NUMBER", "tagomoris", "It", "seems", "like", "fluent", "plugin", "http", "enhanced", "could", "do", "that", "NUMBER", "LINK", "plugin", "http", "enhanced", "TAG", "type", "httpenhanced", "port", "NUMBER", "full_query_string_record", "true", "respond_with_empty_img", "true", "TAG", "Under", "heavy", "load", "we", "be", "not", "seeing", "fluentd", "flush_interval", "NUMBER", "m", "flush", "very", "NUMBER", "minutes", "and", "it", "be", "taking", "almost", "a", "day", "for", "the", "log", "data", "to", "go", "through", "the", "system", "NUMBER", "Any", "ideas", "Very", "basic", "setup", "we", "be", "use", "with", "some", "simple", "plugins", "NUMBER", "Hi", "thank", "you", "for", "the", "quick", "reply", "Can", "I", "pose", "the", "question", "the", "other", "way", "round", "please", "I", "be", "not", "a", "Ruby", "expert", "and", "fluentd", "be", "a", "new", "solution", "and", "maybe", "you", "be", "in", "a", "better", "position", "to", "advise", "us", "NUMBER", "I", "was", "use", "very", "standard", "fluentd", "configurations", "from", "the", "examples", "on", "your", "wiki", "but", "to", "explain", "I", "will", "explain", "our", "architecture", "NUMBER", "We", "have", "a", "real", "time", "application", "as", "a", "service", "on", "the", "internet", "responding", "to", "HTTP", "request", "which", "in", "your", "examples", "on", "the", "wiki", "you", "might", "refer", "to", "as", "a", "forwarder", "this", "indeed", "forwards", "data", "to", "a", "processing", "layer", "which", "you", "call", "an", "aggregator", "NUMBER", "As", "we", "be", "logging", "each", "HTTP", "request", "and", "processing", "the", "data", "up", "to", "NUMBER", "NUMBER", "qps", "at", "the", "moment", "we", "have", "an", "additional", "data", "layer", "to", "capture", "all", "the", "logs", "from", "the", "cluster", "NUMBER", "Currently", "we", "have", "W", "W", "P", "W", "P", "D", "W", "where", "W", "web", "tier", "P", "processing", "tier", "and", "D", "data", "tier", "NUMBER", "Each", "tier", "has", "a", "fluent", "sending", "data", "downstream", "as", "shown", "by", "the", "arrows", "NUMBER", "The", "problem", "we", "see", "be", "that", "the", "data", "gets", "stuck", "at", "tier", "P", "sure", "some", "data", "be", "sent", "to", "D", "but", "if", "there", "be", "any", "re", "starts", "to", "the", "fluentd", "processes", "at", "P", "then", "we", "loose", "all", "data", "NUMBER", "So", "maybe", "you", "could", "recommend", "a", "good", "configuration", "for", "this", "I", "would", "be", "very", "grateful", "NUMBER", "NUMBER", "why", "do", "fluents", "P", "not", "read", "and", "resend", "the", "buffer", "file", "on", "the", "disk", "during", "re", "start", "I", "see", "fluentd", "touching", "the", "timestamps", "but", "it", "be", "very", "very", "slow", "to", "clear", "the", "file", "backlog", "NUMBER", "NUMBER", "If", "the", "timeout", "worked", "i", "NUMBER", "e", "NUMBER", "if", "we", "set", "it", "very", "short", "I", "would", "expect", "the", "CPU", "load", "to", "increase", "but", "this", "be", "not", "change", "as", "expected", "so", "maybe", "we", "have", "a", "configuration", "issue", "logs", "be", "still", "sent", "very", "slow", "NUMBER", "NUMBER", "What", "should", "we", "use", "as", "the", "buffer", "queue", "sizes", "P", "receives", "NUMBER", "x", "W", "and", "D", "receives", "NUMBER", "x", "W", "under", "normal", "conditions", "NUMBER", "I", "hope", "you", "can", "help", "NUMBER", "Paul", "web", "tier", "template", "ruby", "TAG", "type", "forward", "port", "NUMBER", "bind", "NUMBER", "TAG", "TAG", "type", "copy", "TAG", "type", "forward", "buffer_type", "file", "buffer_path", "TAG", "NUMBER", "buffer", "flush_interval", "NUMBER", "s", "send_timeout", "NUMBER", "s", "recover_wait", "NUMBER", "s", "heartbeat_interval", "NUMBER", "s", "phi_threshold", "NUMBER", "hard_timeout", "NUMBER", "s", "TAG", "TAG", "TAG", "host", "TAG", "port", "TAG", "TAG", "TAG", "TAG", "type", "file", "path", "TAG", "bidder", "NUMBER", "fail", "time_slice_format", "Y", "m", "d", "time_slice_wait", "NUMBER", "m", "time_format", "Y", "m", "dT", "H", "M", "S", "z", "compress", "gzip", "utc", "TAG", "TAG", "TAG", "type", "flowcounter", "count_keys", "unit", "minute", "aggregate", "tag", "tag", "flowcount", "TAG", "TAG", "TAG", "type", "file", "path", "var", "log", "fluent", "flowcounter", "NUMBER", "bidder", "time_slice_format", "Y", "m", "d", "time_slice_wait", "NUMBER", "m", "utc", "TAG", "processing", "tier", "ruby", "TAG", "type", "copy", "TAG", "type", "bidder", "proprietary", "solution", "statements", "TAG", "TAG", "type", "forward", "hard_timeout", "NUMBER", "s", "flush_interval", "NUMBER", "s", "buffer_type", "file", "buffer_path", "var", "log", "fluent", "bidder", "fw", "buf", "buffer_chunk_limit", "NUMBER", "m", "buffer_queue_limit", "NUMBER", "forward", "server", "statements", "TAG", "TAG", "If", "CPU", "load", "of", "P", "nodes", "be", "always", "high", "I", "suggest", "you", "to", "try", "remove", "copy", "and", "bidder", "plugins", "temporarily", "from", "the", "P", "nodes", "Note", "that", "it", "means", "high", "load", "if", "a", "core", "be", "fully", "use", "NUMBER", "Because", "current", "version", "of", "fluentd", "can", "use", "only", "one", "CPU", "core", "NUMBER", "I", "d", "like", "you", "to", "show", "error", "message", "show", "at", "P", "nodes", "NUMBER", "If", "it", "shows", "message", "such", "as", "no", "nodes", "be", "available", "detached", "forwarding", "server", "NUMBER", "fail", "to", "send", "heartbeat", "packet", "to", "NUMBER", "then", "configuration", "seems", "wrong", "NUMBER", "Otherwise", "performance", "seems", "insufficient", "NUMBER", "Hi", "Thank", "you", "all", "for", "the", "comments", "originally", "use", "for", "example", "S", "NUMBER", "plugin", "we", "had", "a", "good", "CPU", "load", "on", "the", "nodes", "P", "NUMBER", "The", "load", "was", "not", "a", "real", "issue", "as", "we", "be", "use", "EC", "NUMBER", "and", "can", "adjust", "NUMBER", "We", "did", "however", "not", "want", "to", "risk", "the", "availability", "of", "nodes", "P", "due", "to", "issue", "with", "S", "NUMBER", "or", "other", "file", "type", "storage", "such", "as", "tag_file", "for", "example", "NUMBER", "So", "we", "tried", "to", "forward", "logs", "from", "node", "P", "to", "another", "later", "the", "data", "layer", "NUMBER", "NUMBER", "but", "the", "CPU", "load", "be", "now", "low", "and", "be", "just", "run", "bidder", "processing", "as", "normal", "i", "NUMBER", "e", "NUMBER", "most", "of", "the", "load", "be", "seen", "from", "the", "file", "activities", "via", "fluent", "plugins", "as", "expected", "NUMBER", "The", "real", "question", "be", "why", "can", "t", "I", "see", "the", "same", "level", "of", "file", "processing", "from", "just", "forwarding", "logs", "to", "tier", "D", "NUMBER", "We", "did", "not", "see", "any", "fail", "log", "data", "over", "this", "period", "just", "the", "buffer", "file", "on", "the", "var", "log", "fluent", "location", "NUMBER", "Also", "tried", "different", "buffer_queue_limit", "and", "buffer_chunk_limit", "s", "with", "no", "luck", "NUMBER", "That", "be", "why", "the", "original", "issue", "was", "with", "the", "flush", "timeout", "as", "I", "was", "hoping", "that", "this", "would", "pickup", "and", "flush", "the", "log", "file", "from", "nodes", "P", "D", "NUMBER", "Also", "I", "notice", "that", "the", "lagging", "file", "timestamps", "be", "be", "touched", "but", "that", "the", "file", "size", "remains", "the", "same", "and", "remains", "on", "disk", "NUMBER", "For", "now", "we", "will", "do", "tag_file", "nodes", "P", "and", "then", "transfer", "the", "logs", "via", "scp", "etc", "NUMBER", "but", "I", "hope", "you", "guys", "can", "come", "up", "with", "a", "workable", "forward", "forward", "aggregator", "example", "pauldavidgilligan", "forward", "forward", "aggregator", "example", "be", "typical", "usage", "of", "fluentd", "but", "unfortunately", "we", "have", "never", "get", "performance", "issue", "NUMBER", "I", "guess", "there", "be", "a", "problem", "which", "occur", "on", "specific", "condition", "NUMBER", "We", "re", "curious", "about", "the", "problem", "and", "I", "d", "like", "you", "to", "cooperate", "with", "us", "to", "catch", "the", "cause", "NUMBER", "What", "happens", "if", "you", "remove", "buffer_type", "file", "configuration", "from", "P", "nodes", "It", "will", "use", "memory", "based", "buffering", "NUMBER", "I", "want", "to", "know", "the", "performance", "issue", "comes", "from", "buf_file", "or", "not", "NUMBER", "NUMBER", "What", "happens", "if", "you", "set", "flush_interval", "NUMBER", "s", "and", "num_threads", "NUMBER", "on", "P", "nodes", "as", "well", "An", "user", "who", "handles", "NUMBER", "NUMBER", "msgs", "sec", "on", "NUMBER", "fluentd", "servers", "uses", "this", "configuration", "with", "memory", "based", "buffering", "NUMBER", "NUMBER", "How", "about", "the", "CPU", "load", "of", "D", "nodes", "One", "problem", "of", "current", "fluentd", "be", "that", "it", "can", "t", "utilize", "multiple", "cores", "NUMBER", "Some", "users", "run", "several", "number", "of", "fluentd", "processes", "to", "scale", "NUMBER", "NUMBER", "What", "happens", "if", "you", "remove", "the", "copy", "and", "bidder", "plugins", "from", "P", "I", "want", "to", "know", "the", "problem", "be", "specifically", "at", "the", "forward", "plugin", "or", "not", "NUMBER", "I", "add", "nginx", "template", "NUMBER", "This", "be", "for", "default", "nginx", "access", "log", "NUMBER", "default", "nginx", "access", "log", "means", "combined", "log", "format", "of", "nginx", "and", "combined", "log", "format", "be", "activated", "if", "you", "do", "not", "configure", "log_format", "NUMBER", "If", "the", "format", "be", "not", "indicated", "it", "defaults", "to", "combined", "NUMBER", "NUMBER", "log_format", "combined", "remote_addr", "remote_user", "time_local", "request", "status", "body_bytes_sent", "http_referer", "http_user_agent", "You", "can", "get", "the", "detail", "here", "NUMBER", "LINK", "Wanted", "to", "throw", "this", "in", "here", "I", "m", "use", "fluentd", "to", "aggregate", "our", "nginx", "logs", "and", "this", "regex", "and", "time_format", "work", "fine", "for", "me", "when", "I", "put", "it", "in", "manually", "NUMBER", "Hello", "It", "works", "fine", "but", "I", "have", "a", "question", "NUMBER", "The", "size", "field", "should", "be", "numeric", "like", "Apache", "NUMBER", "format", "but", "I", "m", "get", "a", "string", "value", "NUMBER", "How", "can", "I", "fix", "this", "Thank", "you", "update", "fix", "I", "looked", "into", "lib", "fluent", "parser", "NUMBER", "rb", "copied", "the", "ApacheParser", "class", "to", "NginxParser", "and", "replaced", "the", "REGEXP", "properly", "NUMBER", "you", "lost", "x", "forward", "for", "Is", "there", "any", "chance", "we", "could", "get", "a", "symlink", "to", "the", "current", "log", "file", "in", "the", "log", "directory", "Something", "like", "access", "NUMBER", "log_current", "that", "always", "points", "to", "the", "logfile", "be", "write", "to", "Scribe", "has", "a", "facility", "like", "this", "and", "it", "makes", "tailing", "logs", "quite", "simple", "NUMBER", "So", "Scribe", "s", "documentation", "be", "notoriously", "bad", "and", "this", "be", "all", "I", "could", "find", "LINK", "Configuration", "About", "halfway", "down", "there", "be", "this", "blurb", "create_symlink", "yes", "or", "anything", "else", "yes", "by", "default", "if", "true", "will", "maintain", "a", "symlink", "that", "points", "to", "the", "most", "recently", "write", "file", "So", "in", "the", "log", "file", "directory", "for", "test_log", "there", "be", "always", "a", "test_log_current", "that", "points", "to", "the", "log", "file", "that", "be", "currently", "be", "write", "to", "NUMBER", "When", "the", "file", "be", "rotated", "you", "just", "change", "the", "link", "and", "this", "allows", "tail", "F", "to", "work", "on", "the", "test_log_current", "file", "NUMBER", "Any", "update", "on", "this", "Pinging", "this", "issue", "again", "NUMBER", "Yeah", "I", "think", "that", "will", "totally", "work", "NUMBER", "Will", "you", "re", "link", "the", "symlink", "right", "after", "switching", "what", "file", "you", "be", "write", "to", "For", "instance", "the", "reason", "we", "want", "this", "be", "for", "display", "logs", "in", "our", "office", "NUMBER", "Perfect", "Thanks", "Sorry", "to", "reopen", "this", "I", "just", "install", "the", "newest", "td", "agent", "package", "and", "the", "way", "this", "works", "seems", "not", "that", "useful", "NUMBER", "Right", "now", "the", "symlink_path", "file", "be", "symlinked", "to", "the", "last", "fully", "write", "file", "not", "the", "file", "that", "s", "currently", "be", "write", "NUMBER", "For", "instance", "in", "our", "nginx", "access", "log", "directory", "last", "fully", "write", "log", "access", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "current", "file", "be", "write", "to", "access", "NUMBER", "log", "NUMBER", "b", "NUMBER", "e", "NUMBER", "f", "NUMBER", "fb", "NUMBER", "e", "The", "symlink", "access", "NUMBER", "log_current", "be", "currently", "point", "to", "access", "NUMBER", "log", "NUMBER", "_", "NUMBER", "log", "when", "I", "would", "expect", "it", "to", "be", "point", "to", "access", "NUMBER", "log", "NUMBER", "b", "NUMBER", "e", "NUMBER", "f", "NUMBER", "fb", "NUMBER", "e", "NUMBER", "Am", "I", "miss", "something", "Configuration", "TAG", "type", "tail", "format", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "S", "TAG", "_", "S_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "_", "path", "usr", "local", "nginx", "logs", "access", "NUMBER", "log", "pos_file", "var", "log", "td", "agent", "access", "NUMBER", "log", "NUMBER", "pos", "time_format", "d", "b", "Y", "H", "M", "S", "z", "tag", "hostname", "NUMBER", "in", "NUMBER", "tail", "hostname_command", "hostname", "TAG", "Result", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "hostname", "NUMBER", "in", "NUMBER", "tail", "hostname", "myhost", "remote", "NUMBER", "host", "user", "method", "GET", "path", "monitor", "code", "NUMBER", "size", "NUMBER", "referer", "agent", "forward", "response_time", "NUMBER", "Thank", "you", "for", "your", "review", "NUMBER", "Oops", "Sorry", "for", "format", "thing", "NUMBER", "It", "was", "broke", "NUMBER", "This", "hostname_command", "option", "was", "inspired", "by", "dstat", "plugin", "NUMBER", "Users", "can", "customize", "hostname_command", "like", "hostname", "or", "hostname", "s", "in", "different", "OS", "environments", "NUMBER", "I", "believe", "that", "this", "option", "helps", "people", "who", "runs", "many", "servers", "NUMBER", "May", "I", "ask", "what", "general", "problem", "do", "mean", "repeatedly", "have", "you", "given", "any", "more", "thought", "to", "the", "add", "custom", "input", "field", "problem", "I", "d", "also", "like", "my", "log", "records", "to", "contain", "a", "hostname", "field", "in", "addition", "to", "other", "things", "like", "the", "tag", "itself", "NUMBER", "Fluentd", "do", "not", "provide", "authentication", "methods", "between", "fluentd", "nodes", "NUMBER", "This", "makes", "it", "impossible", "to", "gain", "security", "for", "circumstances", "like", "this", "LINK", "availability", "network", "topology", "NUMBER", "Currently", "the", "only", "way", "to", "maintain", "security", "be", "to", "run", "all", "servers", "within", "a", "local", "network", "NUMBER", "As", "in", "Fluentd", "Meetup", "Japan", "NUMBER", "it", "be", "said", "that", "currently", "there", "be", "no", "authentication", "methods", "between", "fluentd", "nodes", "NUMBER", "Grep", "\u8a8d\u8a3c", "on", "this", "page", "LINK", "NUMBER", "Also", "see", "this", "thread", "on", "the", "ML", "LINK", "I", "think", "that", "this", "issue", "can", "be", "resolve", "by", "pull", "request", "NUMBER", "Sorry", "for", "the", "duplicate", "issue", "but", "please", "consider", "about", "this", "feature", "seriously", "NUMBER", "Please", "merge", "the", "pull", "request", "or", "provide", "us", "some", "answer", "NUMBER", "I", "understanded", "the", "situation", "now", "NUMBER", "I", "think", "we", "need", "to", "think", "this", "issue", "separately", "NUMBER", "There", "be", "two", "problem", "authentication", "and", "encryption", "NUMBER", "Authentication", "Need", "to", "provide", "an", "authentication", "method", "based", "on", "user", "password", "NUMBER", "This", "feature", "be", "include", "in", "most", "of", "popular", "RDBs", "NUMBER", "Encryption", "Need", "to", "encrypt", "the", "data", "flow", "between", "fluentd", "nodes", "in_forward", "out_forward", "NUMBER", "This", "be", "_especially", "important_", "because", "Fluentd", "focuses", "on", "Log", "Everything", "in", "JSON", "thus", "it", "be", "going", "to", "deal", "with", "sensitive", "or", "private", "data", "NUMBER", "For", "example", "user", "activities", "on", "your", "web", "service", "or", "gathered", "protected", "tweets", "be", "such", "NUMBER", "Providing", "an", "option", "to", "switching", "on", "off", "this", "feature", "in", "config", "would", "be", "necessary", "NUMBER", "Implementing", "these", "both", "feature", "makes", "it", "available", "to", "run", "fluentd", "on", "any", "circumstances", "NUMBER", "No", "need", "to", "say", "it", "be", "intended", "to", "use", "in", "local", "network", "only", "anymore", "NUMBER", "I", "see", "NUMBER", "I", "d", "rather", "think", "it", "s", "better", "not", "to", "think", "about", "encryption", "on", "the", "layer", "of", "fluentd", "NUMBER", "Thanks", "for", "point", "Stunnel", "I", "ll", "check", "it", "out", "NUMBER", "Later", "on", "I", "have", "discover", "that", "MySQL", "support", "SSL", "encryption", "see", "here", "LINK", "ssl", "connections", "NUMBER", "html", "and", "MongoDB", "also", "support", "SSL", "see", "here", "LINK", "NUMBER", "repeatedly", "has", "said", "that", "it", "be", "difficult", "to", "fulfill", "each", "users", "separate", "requirements", "NUMBER", "I", "once", "agreed", "NUMBER", "But", "I", "find", "other", "databases", "be", "provide", "encryption", "feature", "NUMBER", "Isn", "t", "it", "worth", "to", "consider", "implement", "I", "don", "t", "feel", "the", "requirements", "vary", "so", "much", "for", "each", "user", "Isn", "t", "it", "enough", "to", "just", "simply", "implement", "a", "SSL", "connection", "I", "think", "we", "need", "more", "opinions", "from", "other", "users", "NUMBER", "Could", "you", "invite", "some", "experts", "to", "this", "issue", "if", "you", "know", "them", "Thanks", "I", "ll", "check", "it", "out", "when", "it", "be", "release", "NUMBER", "I", "add", "hostname", "command", "option", "NUMBER", "Because", "I", "operate", "over", "NUMBER", "servers", "and", "I", "be", "supposed", "to", "figure", "out", "which", "server", "be", "in", "trouble", "NUMBER", "If", "you", "had", "already", "your", "hostname", "in", "your", "log", "skip", "this", "option", "NUMBER", "Host", "name", "be", "add", "at", "head", "of", "line", "NUMBER", "Please", "see", "the", "following", "example", "NUMBER", "Configuration", "TAG", "type", "tail", "format", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "S", "TAG", "_", "S_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "path", "nginx", "logs", "access", "NUMBER", "log", "pos_file", "var", "log", "td", "agent", "access", "NUMBER", "log", "NUMBER", "pos", "tag", "access", "hostname_command", "hostname", "TAG", "Result", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "access", "hostname", "myhost", "remot", "address", "NUMBER", "host", "user", "method", "GET", "path", "test", "status", "NUMBER", "size", "NUMBER", "referer", "LINK", "agent", "Linux", "U", "Android", "NUMBER", "ja", "jp", "IS", "NUMBER", "Build", "S", "NUMBER", "AppleWebKit", "NUMBER", "KHTML", "like", "Gecko", "Version", "NUMBER", "android", "NUMBER", "forward", "response_time", "NUMBER", "I", "modify", "hostname", "to", "hostname_command", "I", "close", "this", "pull", "request", "NUMBER", "And", "I", "will", "send", "two", "pull", "request", "NUMBER", "Sorry", "for", "bothering", "you", "NUMBER", "The", "link", "Store", "Apache", "Logs", "into", "MongoDB", "on", "page", "out_mongo", "Output", "Plugin", "Fluentd", "LINK", "_mongo", "has", "a", "typo", "NUMBER", "s", "montodb", "mongodb", "Sorry", "I", "didn", "t", "know", "about", "the", "docs", "repo", "NUMBER", "Thanks", "for", "the", "support", "NUMBER", "I", "faced", "a", "trouble", "in", "bellow", "condition", "NUMBER", "Ruby", "NUMBER", "p", "NUMBER", "on", "Mac", "OS", "X", "NUMBER", "fluentd", "NUMBER", "fluent", "plugin", "forest", "NUMBER", "There", "no", "trouble", "on", "CentOS", "release", "NUMBER", "Final", "NUMBER", "NUMBER", "el", "NUMBER", "I", "cannot", "find", "that", "the", "trouble", "be", "derived", "from", "my", "environment", "only", "or", "not", "NUMBER", "fluentd", "NUMBER", "conf", "TAG", "type", "forward", "port", "NUMBER", "TAG", "TAG", "type", "file", "time_slice_format", "Y", "m", "d", "H", "path", "NUMBER", "a", "NUMBER", "log", "TAG", "TAG", "type", "file", "time_slice_format", "Y", "m", "d", "H", "path", "NUMBER", "b", "NUMBER", "log", "TAG", "TAG", "type", "file", "time_slice_format", "Y", "m", "d", "H", "path", "NUMBER", "c", "NUMBER", "log", "TAG", "fluentd", "start", "fluentd", "c", "fluentd", "NUMBER", "conf", "o", "system", "NUMBER", "log", "information", "fluentd", "fluentd", "c", "fluentd", "NUMBER", "conf", "o", "system", "NUMBER", "log", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "thread", "NUMBER", "rb", "NUMBER", "BUG", "pthread_cond_wait", "Invalid", "argument", "EINVAL", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "Control", "frame", "information", "c", "NUMBER", "p", "s", "NUMBER", "b", "NUMBER", "l", "NUMBER", "d", "NUMBER", "CFUNC", "sleep", "c", "NUMBER", "p", "NUMBER", "s", "NUMBER", "b", "NUMBER", "l", "NUMBER", "d", "NUMBER", "METHOD", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "thread", "NUMBER", "rb", "NUMBER", "c", "NUMBER", "p", "NUMBER", "s", "NUMBER", "b", "NUMBER", "l", "NUMBER", "d", "NUMBER", "METHOD", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "c", "NUMBER", "p", "NUMBER", "s", "NUMBER", "b", "NUMBER", "l", "NUMBER", "d", "NUMBER", "METHOD", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "c", "NUMBER", "p", "s", "NUMBER", "b", "NUMBER", "l", "NUMBER", "d", "NUMBER", "FINISH", "c", "NUMBER", "p", "s", "NUMBER", "b", "NUMBER", "l", "NUMBER", "d", "NUMBER", "IFUNC", "c", "NUMBER", "p", "s", "NUMBER", "b", "NUMBER", "l", "NUMBER", "d", "NUMBER", "TOP", "Ruby", "level", "backtrace", "information", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "run", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "cond_wait", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "thread", "NUMBER", "rb", "NUMBER", "in", "wait", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "thread", "NUMBER", "rb", "NUMBER", "in", "sleep", "C", "level", "backtrace", "information", "See", "Crash", "Report", "log", "file", "under", "Library", "Logs", "CrashReporter", "or", "Library", "Logs", "CrashReporter", "for", "the", "more", "detail", "of", "NUMBER", "Other", "runtime", "information", "Loaded", "script", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "bin", "fluentd", "Loaded", "features", "NUMBER", "enumerator", "NUMBER", "so", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "enc", "encdb", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "enc", "trans", "transdb", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "defaults", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "rbconfig", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "deprecate", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "exception", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "custom_require", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "version", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "requirement", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "platform", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "specification", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "path_support", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "dependency", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "etc", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "fileutils", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "pathname", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "pathname", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "psych", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "stringio", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "nodes", "node", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "nodes", "stream", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "nodes", "document", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "nodes", "sequence", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "nodes", "scalar", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "nodes", "mapping", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "nodes", "alias", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "nodes", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "streaming", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "visitor", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "strscan", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "scalar_scanner", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "to_ruby", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "emitter", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "yaml_tree", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "json", "ruby_events", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "json_tree", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "depth_first", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "handler", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "tree_builder", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "parser", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "omap", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "set", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "coder", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "core_ext", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "date_core", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "date", "format", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "date", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "deprecate", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "json", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "yaml", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "bundler", "NUMBER", "lib", "bundler", "psyched_yaml", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "bundler", "NUMBER", "lib", "bundler", "gem_helpers", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "bundler", "NUMBER", "lib", "bundler", "match_platform", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "bundler", "NUMBER", "lib", "bundler", "rubygems_ext", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "rubygems", "config_file", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "bundler", "NUMBER", "lib", "bundler", "rubygems_integration", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "bundler", "NUMBER", "lib", "bundler", "version", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "bundler", "NUMBER", "lib", "bundler", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "rubygems", "bundler", "NUMBER", "lib", "rubygems", "bundler", "noexec", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "optparse", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "log", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "env", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "version", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "thread", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "socket", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "socket", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "time", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "monitor", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "json", "NUMBER", "lib", "json", "version", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "ostruct", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "json", "NUMBER", "lib", "json", "generic_object", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "json", "NUMBER", "lib", "json", "common", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "enc", "utf_", "NUMBER", "be", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "enc", "utf_", "NUMBER", "le", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "enc", "utf_", "NUMBER", "be", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "enc", "utf_", "NUMBER", "le", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "json", "NUMBER", "lib", "json", "ext", "parser", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "json", "NUMBER", "lib", "json", "ext", "generator", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "json", "NUMBER", "lib", "json", "ext", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "json", "NUMBER", "lib", "json", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "yajl", "ruby", "NUMBER", "lib", "yajl", "yajl", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "yajl", "ruby", "NUMBER", "lib", "yajl", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "uri", "common", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "uri", "generic", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "uri", "ftp", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "uri", "http", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "uri", "https", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "uri", "ldap", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "uri", "ldaps", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "uri", "mailto", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "uri", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "msgpack", "NUMBER", "lib", "msgpack", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "iobuffer", "NUMBER", "lib", "iobuffer", "version", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "iobuffer", "NUMBER", "lib", "iobuffer_ext", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "iobuffer", "NUMBER", "lib", "iobuffer", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "version", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io_ext", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "meta", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "iowatcher", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "timer_watcher", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "async_watcher", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "listener", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "dns_resolver", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "fcntl", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "timeout", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "digest", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "digest", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "openssl", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "bn", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "cipher", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "config", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "digest", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "ssl", "internal", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "x", "NUMBER", "internal", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "securerandom", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "resolv", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "socket", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "server", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "http", "NUMBER", "_client", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "http_client", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "dsl", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "eventmachine", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "status", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "config", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "mixin", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "singleton", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "process", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "parser", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "buffer", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "input", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "load", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "buf_file", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "buf_memory", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "buf_zfile", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_debug_agent", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_exec", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_forward", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_gc_stat", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "http_parser", "NUMBER", "rb", "NUMBER", "lib", "ruby_http_parser", "NUMBER", "bundle", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "http_parser", "NUMBER", "rb", "NUMBER", "lib", "http_parser", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "http_parser", "NUMBER", "rb", "NUMBER", "lib", "http", "parser", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_http", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_object_space", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_status", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_copy", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_exec", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_exec_filter", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_file", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_forward", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_null", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_roundrobin", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_stdout", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_stream", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "out_test", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "delegate", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "tmpdir", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "tempfile", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "global", "gems", "fluent", "plugin", "forest", "NUMBER", "lib", "fluent", "plugin", "out_forest", "NUMBER", "rb", "NUMBER", "Users", "muddydixon", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "zlib", "NUMBER", "bundle", "NOTE", "You", "may", "have", "encountered", "a", "bug", "in", "the", "Ruby", "interpreter", "or", "extension", "libraries", "NUMBER", "Bug", "report", "be", "welcome", "NUMBER", "For", "details", "LINK", "lang", "NUMBER", "org", "bugreport", "NUMBER", "html", "Thx", "I", "try", "other", "environment", "use", "my", "private", "computer", "ruby", "version", "etc", "NUMBER", "Hello", "I", "ve", "notice", "that", "fluentd", "will", "blow", "when", "processing", "certain", "message", "that", "use", "non", "ASCII", "NUMBER", "BIT", "characters", "NUMBER", "This", "be", "a", "message", "come", "from", "syslog", "NUMBER", "It", "blows", "up", "in", "the", "s", "NUMBER", "plugin", "NUMBER", "Peter", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "emit", "transaction", "fail", "error", "xC", "NUMBER", "from", "ASCII", "NUMBER", "BIT", "to", "UTF", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "s", "NUMBER", "NUMBER", "lib", "fluent", "plugin", "out_s", "NUMBER", "rb", "NUMBER", "in", "e", "ncode", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "s", "NUMBER", "NUMBER", "lib", "fluent", "plugin", "out_s", "NUMBER", "rb", "NUMBER", "in", "t", "o_json", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "s", "NUMBER", "NUMBER", "lib", "fluent", "plugin", "out_s", "NUMBER", "rb", "NUMBER", "in", "f", "ormat", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "block", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "forest", "NUMBER", "lib", "fluent", "plugin", "out_forest", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "rewrite", "NUMBER", "lib", "fluent", "plugin", "out_rewrite", "NUMBER", "r", "b", "NUMBER", "in", "block", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "rewrite", "NUMBER", "lib", "fluent", "plugin", "out_rewrite", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "emit", "transaction", "fail", "error", "xC", "NUMBER", "from", "ASCII", "NUMBER", "BIT", "to", "UTF", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "s", "NUMBER", "NUMBER", "lib", "fluent", "plugin", "out_s", "NUMBER", "rb", "NUMBER", "in", "encode", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "s", "NUMBER", "NUMBER", "lib", "fluent", "plugin", "out_s", "NUMBER", "rb", "NUMBER", "in", "to_json", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "s", "NUMBER", "NUMBER", "lib", "fluent", "plugin", "out_s", "NUMBER", "rb", "NUMBER", "in", "format", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "block", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "forest", "NUMBER", "lib", "fluent", "plugin", "out_forest", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "rewrite", "NUMBER", "lib", "fluent", "plugin", "out_rewrite", "NUMBER", "rb", "NUMBER", "in", "block", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "plugin", "rewrite", "NUMBER", "lib", "fluent", "plugin", "out_rewrite", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "receive_data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_syslog", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TAG", "Nov", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "mingle", "test", "NUMBER", "web", "NUMBER", "a", "NUMBER", "zfu", "test", "NUMBER", "INFO", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "btpool", "NUMBER", "NUMBER", "com", "NUMBER", "oughtworks", "NUMBER", "mingle", "Parameters", "authenticity_token", "VMG", "dV", "NUMBER", "ACJpfZlZqejAyrpT", "NUMBER", "E", "NUMBER", "P", "NUMBER", "CJcQ", "NUMBER", "ImkI", "user", "login", "solutions", "password", "FILTERED", "commit", "Sign", "in", "xC", "NUMBER", "xBB", "controller", "profile", "action", "login", "n", "error", "xC", "NUMBER", "from", "ASCII", "NUMBER", "BIT", "to", "UTF", "NUMBER", "Hi", "I", "change", "fluent", "plugin", "s", "NUMBER", "to", "use", "Yajl", "to", "convert", "objects", "into", "JSON", "NUMBER", "Yajl", "replaces", "those", "invalid", "characters", "into", "and", "do", "not", "raise", "exception", "NUMBER", "Here", "be", "the", "commit", "LINK", "plugin", "s", "NUMBER", "commit", "NUMBER", "d", "NUMBER", "c", "NUMBER", "a", "NUMBER", "cd", "NUMBER", "f", "NUMBER", "a", "NUMBER", "c", "NUMBER", "eb", "NUMBER", "da", "NUMBER", "f", "NUMBER", "f", "NUMBER", "Thank", "you", "for", "your", "report", "I", "m", "write", "a", "plugin", "for", "fluent", "and", "I", "meet", "a", "error", "when", "I", "require", "mime", "types", "in", "the", "plugin", "NUMBER", "Here", "be", "the", "error", "message", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "unexpect", "error", "error", "U", "NUMBER", "FC", "from", "UTF", "NUMBER", "to", "ASCII", "NUMBER", "BIT", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "local", "Cellar", "rbenv", "NUMBER", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "mime", "types", "NUMBER", "lib", "mime", "types", "NUMBER", "rb", "NUMBER", "in", "read", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "local", "Cellar", "rbenv", "NUMBER", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "mime", "types", "NUMBER", "lib", "mime", "types", "NUMBER", "rb", "NUMBER", "in", "block", "in", "load_from_file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "local", "Cellar", "rbenv", "NUMBER", "version", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "mime", "types", "NUMBER", "lib", "mime", "types", "NUMBER", "rb", "NUMBER", "in", "open", "NUMBER", "It", "seens", "to", "be", "a", "encoding", "problem", "I", "find", "that", "both", "Encoding", "NUMBER", "default_internal", "and", "Encoding", "NUMBER", "default_external", "be", "set", "to", "ASCII", "NUMBER", "BIT", "that", "made", "this", "problem", "NUMBER", "Finally", "I", "find", "that", "the", "code", "in", "lib", "fluent", "engine", "NUMBER", "rb", "make", "this", "setting", "NUMBER", "LINK", "So", "why", "set", "default", "encoding", "to", "ASCII", "NUMBER", "BIT", "and", "how", "could", "I", "fix", "it", "NUMBER", "Yes", "I", "made", "a", "quick", "fix", "like", "that", "NUMBER", "LINK", "plugin", "sndacs", "blob", "master", "lib", "fluent", "plugin", "out_sndacs", "NUMBER", "rb", "L", "NUMBER", "L", "NUMBER", "I", "think", "it", "be", "a", "bug", "of", "mime", "types", "gem", "LINK", "types", "issue", "NUMBER", "Please", "use", "your", "quick", "fix", "for", "now", "NUMBER", "kzk", "frsyuki", "repeatedly", "This", "be", "not", "a", "mime", "types", "issue", "I", "cannot", "in", "fact", "reproduce", "the", "issue", "identified", "in", "halostatue", "mime", "types", "NUMBER", "on", "my", "Mac", "which", "isn", "t", "the", "same", "as", "what", "you", "be", "suggesting", "in", "any", "case", "NUMBER", "Since", "October", "NUMBER", "NUMBER", "mime", "types", "has", "read", "file", "when", "run", "on", "Ruby", "NUMBER", "with", "r", "utf", "NUMBER", "and", "maintains", "its", "data", "entirely", "as", "UTF", "NUMBER", "sparkle", "be", "correct", "that", "this", "has", "to", "do", "with", "the", "default", "ASCII", "NUMBER", "BIT", "setting", "chosen", "there", "be", "no", "conversion", "from", "U", "NUMBER", "FC", "to", "ASCII", "NUMBER", "BIT", "you", "can", "force_encoding", "it", "or", "you", "can", "convert", "it", "to", "ISO", "NUMBER", "NUMBER", "and", "then", "force_encoding", "it", "to", "ASCII", "NUMBER", "BIT", "but", "you", "can", "t", "just", "use", "ASCII", "NUMBER", "BIT", "as", "the", "default", "encoding", "NUMBER", "I", "don", "t", "have", "an", "answer", "but", "the", "bug", "here", "be", "not", "in", "MIME", "Types", "NUMBER", "I", "have", "UTF", "NUMBER", "data", "as", "part", "of", "the", "external", "dataset", "I", "pull", "from", "this", "be", "because", "Maik", "St\u00fchrenberg", "was", "involved", "in", "the", "application", "prs", "NUMBER", "xsf", "xml", "MIME", "Type", "definition", "NUMBER", "If", "matz", "were", "involved", "in", "the", "definition", "of", "an", "application", "ruby", "MIME", "Type", "definition", "and", "had", "his", "name", "on", "the", "contact", "people", "page", "as", "\u677e\u672c\u884c\u5f18", "\u307e\u3064\u3082\u3068\u3086\u304d\u3072\u308d", "I", "would", "keep", "that", "in", "my", "source", "data", "too", "NUMBER", "To", "solve", "issue", "NUMBER", "send", "TCP", "blank", "msgpack", "tag", "event", "array", "as", "heartbeat", "Modify", "branch", "as", "rebase", "from", "HEAD", "IPv", "NUMBER", "support", "fix", "in_forward", "not", "to", "emit", "blank", "tag", "and", "message", "assumed", "as", "tcp", "heartbeat", "Now", "this", "NUMBER", "hours", "all", "of", "our", "fluentd", "NUMBER", "processes", "with", "heartbeat", "tcp", "option", "seems", "to", "be", "work", "well", "NUMBER", "This", "change", "has", "a", "backward", "compatibility", "problem", "NUMBER", "Could", "you", "see", "this", "change", "LINK", "NUMBER", "Hi", "I", "be", "use", "IPv", "NUMBER", "now", "NUMBER", "but", "Fluentd", "do", "not", "support", "IPv", "NUMBER", "Do", "you", "have", "any", "plan", "to", "support", "IPv", "NUMBER", "Please", "check", "this", "gist", "NUMBER", "LINK", "td", "agent", "NUMBER", "NUMBER", "\u306b\u3066fluent\u3092\u4f7f\u7528\u3057\u3066\u304a\u308a\u307e\u3059", "in_tail", "NUMBER", "rb\u306e\u30bd\u30fc\u30b9\u3092\u898b\u305f\u3068\u3053\u308d", "\u5931\u793c\u306a\u304c\u3089\u30ed\u30b0\u3082\u57cb\u3081\u8fbc\u307e\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f", "\u308f\u3056\u3068forward\u5148\u306eFluend\u3092\u30c0\u30a6\u30f3\u3055\u305b", "Buffer", "Queue\u3092FULL\u306b\u3057\u307e\u3057\u305f", "\u305d\u306e\u5f8cFluentd\u3092\u518d\u958b\u3055\u305b\u3066\u3082", "buffer", "NUMBER", "empty", "\u304cfalse\u306e\u307e\u307e\u3068\u306a\u308a\u4f8b\u5916\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5410\u304d\u7d9a\u3051\u308b\u72b6\u614b\u3068\u306a\u308a\u307e\u3057\u305f", "\u3071\u3063\u3068\u307f\u305f\u539f\u56e0\u3067\u3059\u304c\u6700\u521d\u306b", "NUMBER", "\u884c\u306erescue\u306b\u3066", "BufferQueueLimitError", "queue", "size", "exceeds", "limit", "\u3092\u51e6\u7406\u3057\u3066\u3044\u307e\u3059", "rescue", "log", "NUMBER", "error", "NUMBER", "to_s", "log", "NUMBER", "error_backtrace", "close", "\u3057\u304b\u3057", "\u3053\u3053\u3067close\u3057\u3066\u3044\u308b\u70ba", "\u3053\u308c\u4ee5\u964d\u30d5\u30a1\u30a4\u30eb\u304cclose\u72b6\u614b\u306b\u306a\u308a", "close", "stream", "\u306e\u4f8b\u5916\u304c", "\u767a\u751f\u3057\u7d9a\u3051fluentd\u3092\u518d\u8d77\u52d5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059", "\u5358\u7d14\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\u3068\u3053\u308d\u4e00\u5fdc\u4f8b\u5916\u51e6\u7406\u306f\u767a\u751f\u3057\u306a\u304f\u306a\u3063\u3066\u304a\u308a\u307e\u3059", "\u5358\u7d14\u306b\u5225\u9014BufferQueueLimitError\u4f8b\u5916\u51e6\u7406\u3092\u7528\u610f\u3057\u3066close\u3092\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u305f\u3060\u3051\u3067\u3059", "rescue", "BufferQueueLimitError", "log", "NUMBER", "error", "NUMBER", "to_s", "log", "NUMBER", "error_backtrace", "rescue", "err", "log", "NUMBER", "error", "NUMBER", "to_s", "log", "NUMBER", "error_backtrace", "close", "end", "cat", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "TAG", "type", "tail", "format", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "s", "NUMBER", "_", "s", "NUMBER", "_", "s", "NUMBER", "path", "data", "logs", "www", "NUMBER", "test", "NUMBER", "com", "NUMBER", "log", "tag", "nginx", "NUMBER", "access", "TAG", "TAG", "type", "file", "path", "var", "log", "td", "agent", "access_log", "TAG", "root", "nginx", "etc", "init", "NUMBER", "d", "td", "agent", "restart", "Shutting", "down", "td", "agent", "FAILED", "Starting", "td", "agent", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "rescue", "in", "main_process", "config", "error", "file", "etc", "td", "agent", "td", "agent", "NUMBER", "conf", "error", "Invalid", "regexp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "s", "NUMBER", "_", "s", "NUMBER", "_", "s", "NUMBER", "No", "named", "captures", "FAILED", "Where", "did", "we", "go", "wrong", "TAG", "type", "tail", "format", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "TAG", "NUMBER", "path", "data", "logs", "hack", "www", "NUMBER", "test", "NUMBER", "com", "NUMBER", "log", "tag", "nginx", "NUMBER", "access", "TAG", "TAG", "type", "file", "path", "var", "log", "td", "agent", "access_log", "TAG", "visit", "the", "web", "but", "var", "log", "td", "agent", "access_log", "be", "not", "find", "NUMBER", "regex", "be", "wrong", "how", "can", "i", "debug", "it", "the", "log", "be", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "GET", "curl", "NUMBER", "x", "NUMBER", "_", "NUMBER", "redhat", "linux", "gnu", "libcurl", "NUMBER", "NSS", "NUMBER", "zlib", "NUMBER", "libidn", "NUMBER", "libssh", "NUMBER", "NUMBER", "i", "had", "solve", "it", "thx", "Some", "async", "I", "O", "libraries", "like", "libuv", "doesn", "t", "have", "on_readable", "event", "NUMBER", "So", "heartbeat", "UDP", "packets", "should", "have", "some", "data", "in", "its", "payloads", "NUMBER", "I", "run", "into", "this", "limitation", "in", "my", "environment", "use", "the", "td", "agent", "distribution", "when", "trying", "to", "tail", "a", "file", "for", "input", "NUMBER", "I", "have", "a", "log", "file", "which", "be", "owned", "by", "an", "app", "specific", "user", "group", "and", "has", "permissions", "of", "NUMBER", "I", "don", "t", "want", "to", "run", "fluentd", "td", "agent", "as", "root", "nor", "as", "my", "app", "specific", "user", "NUMBER", "I", "assumed", "that", "add", "the", "td", "agent", "user", "to", "my", "app", "specific", "group", "would", "inherit", "the", "secondary", "group", "membership", "and", "therefore", "be", "able", "to", "access", "my", "log", "file", "but", "that", "s", "currently", "not", "the", "case", "NUMBER", "Attached", "be", "a", "patch", "which", "will", "update", "the", "process", "with", "any", "secondary", "group", "when", "change", "the", "uid", "of", "the", "process", "NUMBER", "This", "fix", "to", "mark", "node", "of", "out_forward", "when", "TCP", "data", "transportation", "succeeded", "for", "udp", "unavailable", "or", "unstable", "udp", "transportation", "environment", "NUMBER", "fluent", "debug", "do", "not", "recognize", "any", "command", "line", "options", "NUMBER", "This", "pull", "request", "fix", "this", "bug", "and", "add", "a", "connected", "URI", "to", "startup", "display", "for", "user", "convenience", "NUMBER", "When", "day", "of", "the", "month", "be", "one", "digit", "SYSLOG_ALL_REGEXP", "doesn", "t", "match", "time", "properly", "ruby", "message", "TAG", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "dhclient", "DHCPACK", "of", "NUMBER", "from", "NUMBER", "from", "fluent", "debug", "fluent", "NUMBER", "warn", "message", "TAG", "Sep", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "dhclient", "DHCPACK", "of", "NUMBER", "from", "NUMBER", "error", "invalid", "strptime", "format", "b", "d", "H", "M", "S", "SYSLOG_ALL_REGEXP", "TAG", "NUMBER", "NUMBER", "TAG", "TAG", "TAG", "a", "zA", "Z", "NUMBER", "NUMBER", "_", "NUMBER", "TAG", "NUMBER", "NUMBER", "TAG", "NUMBER", "m", "SYSLOG_ALL_REGEXP", "NUMBER", "match", "message", "m", "time", "output", "Sep", "NUMBER", "m", "host", "output", "NUMBER", "NUMBER", "NUMBER", "Care", "for", "two", "spaces", "between", "Sep", "and", "NUMBER", "When", "day", "of", "the", "month", "be", "two", "digit", "SYSLOG_ALL_REGEXP", "matches", "time", "properly", "SYSLOG_ALL_REGEXP", "assumes", "that", "there", "will", "be", "a", "single", "space", "With", "this", "minor", "fix", "time", "matches", "properly", "Thanks", "for", "pull", "request", "NUMBER", "I", "will", "check", "the", "later", "I", "will", "check", "this", "pull", "request", "after", "return", "to", "Japan", "NUMBER", "Please", "wait", "for", "NUMBER", "or", "NUMBER", "days", "NUMBER", "Thanks", "frsyuki", "and", "add", "test", "be", "cool", "Perfect", "I", "close", "the", "pull", "request", "I", "ve", "add", "test", "cases", "for", "NUMBER", "plugins", "in_gc_stat", "in_status", "and", "in_syslog", "NUMBER", "LGTM", "LGTM", "sushi", "I", "will", "merge", "this", "pull", "request", "later", "Sorry", "current", "wifi", "can", "t", "do", "git", "fetch", "NUMBER", "NUMBER", "Please", "wait", "LINK", "\u5bfe\u7b56\u3067\u3059", "pos_file\u672a\u6307\u5b9a\u306e\u5834\u5408\u306b\u4ee5\u524d\u306e\u30dd\u30b8\u30b7\u30e7\u30f3\u60c5\u5831\u3068\u6bd4\u8f03\u3059\u308b\u624b\u6bb5\u304c\u306a\u3044\u305f\u3081", "\uff2e\uff55\uff4c\uff4cPositionEntry\u306esingleton\u3092\u5916\u3059\u3068\u3044\u3046\u65b9\u6cd5\u3067", "\u4ee5\u524d\u306e\u30dd\u30b8\u30b7\u30e7\u30f3\u3068\u306e\u6bd4\u8f03\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059", "\u3059\u3093\u307e\u305b\u3093", "Pull", "Request\u306e\u4ed5\u69d8\u826f\u304f\u5206\u304b\u3063\u3066\u306a\u304f\u3066Issue\u4e8c\u3064\u306b\u3057\u3061\u3083\u3044\u307e\u3057\u305f", "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f", "Fix", "Gemfile", "Rakefile", "gemspec", "to", "use", "bundler", "for", "build", "NUMBER", "gem", "jeweler", "be", "not", "maintained", "today", "NUMBER", "LGTM", "NUMBER", "NOTE", "someone", "must", "edit", "gem", "NUMBER", "description", "before", "first", "release", "with", "this", "gemspec", "Ruby", "NUMBER", "doesn", "t", "have", "rubygems", "builder", "so", "we", "cannot", "rake", "build", "with", "jeweler", "NUMBER", "I", "switch", "jeweler", "to", "bundler", "and", "build", "rpm", "use", "td", "agent", "s", "build", "script", "it", "works", "fine", "repeatedly", "I", "use", "master", "but", "I", "replaced", "Rakefile", "and", "fluentd", "NUMBER", "gemspec", "NUMBER", "Those", "two", "file", "come", "from", "branch", "goodbye", "jeweler", "NUMBER", "but", "I", "only", "tied", "rpm", "not", "deb", "in_tail\u306b\u304a\u3044\u3066", "PositionEntry\u3092\u7528\u3044\u308b\u3053\u3068\u3067inode\u306e\u7ba1\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u304c", "log", "rotation\u304c\u8d77\u3053\u3063\u305f\u969b\u306binode\u3092\u66f4\u65b0\u3059\u308b\u51e6\u7406\u304c\u3069\u3053\u306b\u3082\u306a\u3044\u306e\u3067", "log", "rotation\u304c\u8d77\u3053\u308b\u3068PositionEntry\u306einode\u3068", "\u5b9f\u969b\u306b\u8aad\u307f\u3053\u307f\u3092\u884c\u3063\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306einode\u304c\u7570\u306a\u308b\u5024\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059", "\u3053\u306e\u305f\u3081", "\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u52d5\u304d\u304c\u8d77\u3053\u3063\u305f\u5834\u5408", "\u30ed\u30b0\u306e\u6b20\u640d\u304c\u767a\u751f\u3057\u307e\u3059", "fluentd\u8d77\u52d5", "log", "rotation", "fluentd\u518d\u8d77\u52d5", "path\u306e\u5834\u6240\u306b\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306einode\u3068", "pos_file\u306einode\u304c\u7570\u306a\u308b\u305f\u3081", "\u65b0\u3057\u3044\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3057\u3066\u3044\u308b\u3068\u8aa4\u5224\u5b9a\u3057", "\u30d5\u30a1\u30a4\u30eb\u306e\u672b\u5c3e\u304b\u3089\u8aad\u307f\u8fbc\u307f\u59cb\u3081\u308b", "TAG", "type", "tail", "format", "TAG", "t", "t", "TAG", "NUMBER", "path", "tmp", "cronolog", "NUMBER", "log", "tag", "cronolog", "TAG", "TAG", "type", "file", "path", "var", "log", "td", "agent", "cronolog", "log", "TAG", "\u7701\u7565", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "echo", "date", "Y", "m", "e", "H", "M", "S", "tmessage", "NUMBER", "cronolog", "H", "tmp", "cronolog", "NUMBER", "log", "tmp", "cronolog", "NUMBER", "Y", "m", "d", "NUMBER", "log", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "echo", "date", "Y", "m", "e", "H", "M", "S", "tmessage", "NUMBER", "cronolog", "H", "tmp", "cronolog", "NUMBER", "log", "tmp", "cronolog", "NUMBER", "Y", "m", "d", "NUMBER", "log", "tail", "n", "NUMBER", "var", "log", "td", "agent", "td", "agent", "NUMBER", "log", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_forward", "NUMBER", "rb", "NUMBER", "listen", "listening", "fluent", "socket", "on", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_http", "NUMBER", "rb", "NUMBER", "start", "listening", "http", "on", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "initialize", "following", "tail", "of", "tmp", "cronolog", "NUMBER", "log", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_tail", "NUMBER", "rb", "NUMBER", "on_rotate", "detected", "rotation", "of", "tmp", "cronolog", "NUMBER", "log", "waiting", "NUMBER", "seconds", "TAG", "\u691c\u8a3c\u6642\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059", "fluentd", "NUMBER", "cronolog", "NUMBER", "log", "NUMBER", "trace\u8cbc\u3063\u3066", "\u6319\u52d5\u3092\u8ffd\u3063\u3066\u307f\u305f\u3093\u3067\u3059\u304c", "\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u52d5\u304d\u3092\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059", "inode", "NUMBER", "fsize", "NUMBER", "\u3068\u3044\u3046\u5024\u304c\u5165\u3063\u3066\u3044\u308b\u3068\u4eee\u5b9a", "cronolog\u306e\u30cf\u30fc\u30c9\u30ea\u30f3\u30af\u306e\u8cbc\u308a\u76f4\u3057\u306b\u3088\u308a", "\u30d5\u30a1\u30a4\u30eb\u304c\u4e00\u77ac\u5b58\u5728\u3057\u306a\u304f\u306a\u308b", "Errno", "ENOENT\u4f8b\u5916\u304c\u51fa\u529b", "inode", "TAG", "\u30ed\u30b0\u306e\u8aad\u307f\u8fbc\u307f\u306f\u3057\u306a\u3044", "inode", "TAG", "type", "forward", "password", "pass", "compression_level", "NUMBER", "TAG", "host", "localhost", "weight", "NUMBER", "TAG", "TAG", "in_forward", "s", "example", "goes", "bellow", "TAG", "type", "forward", "password", "pass", "TAG", "description", "in", "Japanese", "I", "m", "Sorry", "I", "m", "not", "good", "at", "write", "English", "NUMBER", "\u5171\u901a\u4e8b\u9805", "forward\u6642\u306emessage\u30bf\u30a4\u30d7\u304cPackedForward\u3067\u3042\u308b\u5834\u5408", "\u5f8c\u8ff0\u306e\u901a\u308a\u8a2d\u5b9a\u306b\u5fdc\u3058\u3066message\u304c\u6697\u53f7\u5316", "\u5727\u7e2e\u3055\u308c\u307e\u3059", "NUMBER", "\u6697\u53f7\u5316\u3068\u5727\u7e2e\u306f\u500b\u5225\u306benable", "disable\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059", "NUMBER", "\u672cpatch\u9069\u7528\u5f8c\u306ein_forward", "out_forward\u306f", "\u6697\u53f7\u5316\u3068\u5727\u7e2e\u3092disable\u306b\u3057\u3066\u3044\u308b\u9650\u308a", "\u904e\u53bb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u306e\u4e92\u63db\u6027\u3092\u4fdd\u3061\u307e\u3059", "NUMBER", "\u6697\u53f7\u5316\u3068\u5727\u7e2e\u306b\u3064\u3044\u3066\u306e\u5c5e\u6027\u60c5\u5831\u3092\u4f1d\u9054\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081", "in_forward\u3068out_forward\u306f\u4ee5\u4e0b\u3092\u884c\u3044\u307e\u3059", "NUMBER", "out_forward\u3067\u306fPackedForward", "message\u306e\u7b2c", "NUMBER", "\u8981\u7d20\u306bHash\u3092\u683c\u7d0d\u3057\u3066\u9001\u4fe1\u3057\u307e\u3059", "NUMBER", "in_forward\u3067\u306f\u53d7\u4fe1\u3057\u305fmessage\u304cPackedForward\u3067\u3042\u308a", "\u304b\u3064\u7b2c", "NUMBER", "\u8981\u7d20\u304c\u4ed8\u52a0\u3055\u308c\u3066\u3044\u308b\u5834\u5408", "\u7b2c", "NUMBER", "\u8981\u7d20\u3092\u5c5e\u6027\u60c5\u5831\u3068\u3057\u3066\u89e3\u91c8\u3057\u307e\u3059", "NUMBER", "\u6697\u53f7\u5316\u306b\u3064\u3044\u3066", "out_forward\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e", "password", "\u9805\u76ee\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u3068message\u304c\u6697\u53f7\u5316\u3055\u308c\u307e\u3059", "NUMBER", "in_forward\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e", "password", "\u9805\u76ee\u306b\u306f", "out_forward\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u4e00\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059", "NUMBER", "\u6697\u53f7\u5316\u306b\u306fOpenSSL\u3092\u4f7f\u7528\u3057\u307e\u3059", "NUMBER", "\u6697\u53f7\u5316\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f\u73fe\u6642\u70b9\u3067\u306fBlowfish\u306b\u9650\u5b9a\u3057\u3066\u3044\u307e\u3059", "\u3053\u308c\u306f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u9078\u629e\u3059\u308b\u5fc5\u8981\u6027\u3092\u898b\u3044\u3060\u3055\u306a\u304b\u3063\u305f\u305f\u3081\u3067\u3059", "NUMBER", "\u6bce\u56de\u7570\u306a\u308bsalt\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c", "out_forward\u304b\u3089in_forward\u3078\u5e73\u6587\u3067\u9001\u4fe1\u3055\u308c\u307e\u3059", "NUMBER", "\u5727\u7e2e\u306b\u3064\u3044\u3066", "out_forward\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e", "compression_level", "\u9805\u76ee\u306b", "NUMBER", "\u4ee5\u4e0a\u306e\u6570\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u3068message\u306eraw", "entries\u304c\u5727\u7e2e\u3055\u308c\u307e\u3059", "NUMBER", "\u5727\u7e2e\u306b\u306fzlib\u3092\u4f7f\u7528\u3057\u307e\u3059", "NUMBER", "compression_level", "\u306e\u8a2d\u5b9a\u6570\u5024\u306f", "NUMBER", "\u304c\u4e00\u756a\u5727\u7e2e\u7387\u304c\u9ad8\u304f", "NUMBER", "\u3092\u8d85\u3048\u308b\u6570\u5024\u3092\u8a2d\u5b9a\u3057\u305f\u5834\u5408", "NUMBER", "\u306b\u88dc\u6b63\u3055\u308c\u307e\u3059", "NUMBER", "compression_level", "\u306b", "NUMBER", "\u3092\u8a2d\u5b9a\u3057\u305f\u5834\u5408", "\u5727\u7e2e\u3055\u308c\u307e\u305b\u3093", "NUMBER", "I", "write", "this", "patch", "because", "forward", "plugin", "needs", "Encryption", "and", "Compression", "NUMBER", "But", "I", "find", "a", "problem", "with", "use", "FileBufferChunk", "in", "out_forward", "so", "I", "would", "like", "to", "withdraw", "this", "patch", "NUMBER", "Problem", "happens", "following", "way", "TAG", "buffer_type", "file", "buffer_path", "path", "to", "buffer", "NUMBER", "file", "type", "forward", "NUMBER", "TAG", "When", "I", "find", "out", "the", "better", "way", "I", "ll", "send", "again", "NUMBER", "Thank", "you", "for", "your", "hard", "work", "NUMBER", "tagomoris", "and", "others", "Thank", "you", "for", "better", "way", "NUMBER", "I", "fix", "a", "little", "typo", "NUMBER", "See", "diff", "NUMBER", "Add", "option", "q", "to", "decrement", "log", "level", "to", "output", "only", "warn", "or", "more", "critic", "logs", "NUMBER", "Patches", "that", "we", "can", "specify", "weight", "for", "each", "stores", "like", "this", "TAG", "type", "roundrobin", "TAG", "A", "type", "bar", "NUMBER", "TAG", "TAG", "B", "type", "bar", "NUMBER", "TAG", "TAG", "C", "type", "bar", "NUMBER", "TAG", "TAG", "out_roundrobin", "with", "this", "patch", "do", "very", "simple", "weighted", "round", "robin", "like", "below", "A", "NUMBER", "B", "NUMBER", "C", "NUMBER", "A", "NUMBER", "B", "NUMBER", "A", "NUMBER", "A", "NUMBER", "B", "NUMBER", "C", "NUMBER", "A", "NUMBER", "B", "NUMBER", "A", "NUMBER", "NUMBER", "Please", "merge", "thanks", "NUMBER", "Changes", "I", "change", "String", "rstrip", "to", "String", "chomp", "for", "recieve_lines", "method", "of", "in_tail", "plugin", "NUMBER", "Reason", "String", "rsrip", "deletes", "all", "whitespace", "tab", "space", "line", "break", "NUMBER", "That", "means", "it", "deletes", "end", "of", "null", "columns", "for", "TSV", "Tab", "Separated", "Values", "NUMBER", "Thank", "you", "for", "merge", "NUMBER", "The", "if", "statement", "be", "reversed", "it", "checks", "for", "a", "Regexp", "type", "but", "handles", "the", "case", "of", "a", "Regexp", "type", "in", "the", "else", "block", "NUMBER", "If", "you", "pass", "a", "Regexp", "in", "it", "treats", "it", "as", "a", "class", "instance", "which", "results", "in", "error", "undefined", "method", "call", "for", "TAG", "thanks", "for", "the", "quick", "merge", "I", "don", "t", "know", "what", "fluentd", "td", "agent", "s", "release", "schedule", "looks", "like", "but", "I", "ll", "be", "happy", "when", "the", "fix", "makes", "it", "into", "a", "td", "agent", "distribution", "release", "NUMBER", "fluentd", "NUMBER", "td", "agent", "NUMBER", "NUMBER", "CentOS", "NUMBER", "SL", "NUMBER", "\u3067\u767a\u751f", "apache\u30ed\u30b0\u3092in_tail\u3067\u8aad\u307f\u8fbc\u307f", "\u304a\u304a\u3088\u305d", "NUMBER", "\u53f0\u304f\u3089\u3044\u306e\u30b5\u30fc\u30d0\u304b\u3089out_foward\u3067\u9001\u4fe1\u3059\u308b\u3068", "\u9001\u4fe1\u5074\u3067\u4ee5\u4e0b\u306e\u69d8\u306adetached", "recovered\u3092\u7e70\u308a\u8fd4\u3059\u30ed\u30b0\u304c\u51fa\u307e\u3059", "LINK", "\u53d7\u4fe1\u5074\u306f\u5927\u4f53\u5168\u4f53\u306e\u30ed\u30b0\u6d41\u5165\u91cf\u304c", "NUMBER", "NUMBER", "message", "sec\u306e\u8ca0\u8377\u72b6\u6cc1\u3067\u3082\u767a\u751f\u3057\u3066\u3044\u307e\u3059", "\u305f\u3060\u3057", "\u5168\u3066\u306e\u30b5\u30fc\u30d0\u3067\u51fa\u308b\u306e\u3067\u306f\u306a\u304f", "\u6563\u767a\u7684\u306b\u51fa\u308b\u30ec\u30d9\u30eb\u3067\u3059", "out_forward\u306eheartbeat\u306e\u8a2d\u5b9a\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067\u5229\u7528\u3057\u3066\u3044\u307e\u3059", "\u3053\u308c\u306f", "heartbeat\u3092UDP\u3067\u884c\u3063\u3066\u3044\u308b\u70ba\u306b\u5bfe\u5411\u5074\u306e\u51e6\u7406\u304c\u591a\u3044\u3068\u30d1\u30b1\u30c3\u30c8\u3092drop\u3057\u3066\u3057\u307e\u3046", "\u53d7\u4fe1\u5074\u306ein_forward\u3067heartbeat\u51e6\u7406\u304c\u9045\u5ef6\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u306a\u3069\u306e\u53ef\u80fd\u6027\u3092\u8003\u3048\u3066\u3044\u307e\u3059", "\u53ef\u80fd\u3067\u3042\u308c\u3070", "heartbeat\u306b\u3064\u3044\u3066\u3082\u4fe1\u983c\u6027\u306e\u9ad8\u3044TCP\u901a\u4fe1\u304c\u3042\u308b\u3068UDP\u7279\u6709\u306e\u554f\u984c\u306f", "\u89e3\u6d88\u51fa\u6765\u308b\u306e\u3067\u306f\u7121\u3044\u304b\u3068\u8003\u3048\u3066\u3044\u307e\u3059", "\u4e00\u5831\u544a\u3068\u3057\u3066\u6271\u3063\u3066\u8cb0\u3048\u308c\u3070\u52a9\u304b\u308a\u307e\u3059", "On", "the", "cloud", "environment", "such", "as", "AWS", "the", "same", "hostname", "could", "be", "resolve", "into", "the", "different", "IP", "after", "the", "reboot", "NUMBER", "Therefore", "it", "s", "safer", "to", "resolve", "the", "hostname", "each", "time", "network", "transfer", "happens", "NUMBER", "However", "this", "could", "incur", "the", "performance", "problem", "NUMBER", "So", "having", "the", "caching", "be", "ideal", "here", "NUMBER", "Could", "it", "be", "that", "this", "needs", "only", "to", "be", "do", "on", "node", "failure", "so", "the", "perforamnce", "issue", "do", "not", "need", "to", "be", "too", "high", "i", "NUMBER", "e", "NUMBER", "only", "when", "you", "start", "trying", "to", "see", "if", "a", "node", "has", "recovered", "which", "I", "believe", "be", "do", "at", "a", "decreasing", "frequency", "e", "NUMBER", "g", "NUMBER", "NUMBER", "secs", "NUMBER", "min", "NUMBER", "min", "etc", "Just", "wondered", "where", "this", "fix", "fits", "into", "the", "fluentd", "roadmap", "as", "its", "the", "only", "thing", "that", "really", "stopping", "me", "switching", "from", "Flume", "to", "fluentd", "NUMBER", "tagomoris", "Do", "you", "think", "be", "it", "acceptable", "to", "have", "new", "TCP", "connections", "everytime", "chunks", "be", "sent", "On", "EC", "NUMBER", "environment", "the", "same", "hostname", "could", "be", "resolve", "in", "to", "different", "IP", "NUMBER", "So", "we", "want", "to", "resolve", "DNS", "every", "time", "NUMBER", "To", "reconnect", "for", "every", "chunks", "be", "not", "so", "bad", "for", "good", "network", "conditions", "but", "a", "few", "times", "of", "SYN", "packet", "resending", "in", "Linux", "it", "needs", "NUMBER", "sec", "timeout", "makes", "great", "problem", "with", "reconnect", "per", "chunks", "and", "cofigurations", "such", "as", "flush_interval", "NUMBER", "NUMBER", "I", "vote", "NUMBER", "to", "reconnection", "revery", "NUMBER", "sec", "NUMBER", "min", "NUMBER", "min", "or", "configurable", "default", "NUMBER", "min", "NUMBER", "I", "vote", "NUMBER", "to", "reconnection", "revery", "NUMBER", "sec", "NUMBER", "min", "NUMBER", "min", "or", "configurable", "default", "NUMBER", "min", "NUMBER", "Sounds", "reasonable", "NUMBER", "I", "will", "take", "a", "look", "at", "current", "implementation", "NUMBER", "see", "change", "This", "just", "corrects", "a", "minor", "spelling", "error", "NUMBER", "fluentd", "cannot", "apply", "filter", "per", "record", "currenty", "NUMBER", "This", "patch", "provides", "user", "defined", "filter", "feature", "per", "record", "even", "when", "use", "MultiEventStream", "NUMBER", "This", "problem", "be", "one", "proposal", "for", "solving", "the", "issue", "NUMBER", "LINK", "Signed", "off", "by", "UEMURA", "Yuichi", "y", "NUMBER", "uemura", "ntt", "NUMBER", "com", "Unfortunately", "as", "an", "OSS", "product", "it", "s", "hard", "to", "accept", "the", "patch", "which", "include", "company", "s", "copyright", "NUMBER", "That", "could", "be", "a", "problem", "when", "we", "change", "the", "license", "or", "donate", "the", "code", "to", "somewhere", "NUMBER", "Please", "reconsider", "it", "NUMBER", "Sorry", "about", "this", "NUMBER", "Thanks", "K", "frsyuki", "Yes", "TailInput", "be", "enough", "to", "filter", "when", "tailing", "NUMBER", "Therefore", "my", "patch", "be", "needless", "in", "case", "just", "tail", "time", "filtering", "NUMBER", "Our", "problem", "be", "that", "some", "input", "plugins", "of", "fluentd", "cannot", "restrict", "the", "size", "of", "input", "NUMBER", "For", "example", "the", "ForwardInput", "plugin", "doesn", "t", "have", "such", "mechanism", "ruby", "module", "Fluent", "class", "ForwardInput", "TAG", "So", "you", "can", "t", "trust", "the", "sender", "of", "logs", "at", "all", "right", "I", "imagine", "you", "need", "multi", "tenant", "capability", "NUMBER", "Yes", "you", "re", "right", "NUMBER", "These", "validations", "tend", "to", "be", "complex", "and", "slow", "task", "because", "it", "needs", "be", "strict", "to", "prevent", "potential", "security", "holes", "NUMBER", "They", "have", "different", "requirements", "than", "backend", "aggregation", "system", "which", "needs", "simplicity", "and", "high", "performance", "NUMBER", "It", "seems", "like", "the", "best", "solution", "to", "layer", "between", "trusted", "and", "untrusted", "zone", "NUMBER", "So", "it", "will", "be", "a", "another", "input", "plugin", "like", "in_secure_forward", "rather", "than", "a", "kind", "of", "add", "ons", "NUMBER", "This", "be", "our", "next", "work", "to", "come", "true", "layering", "We", "re", "going", "to", "share", "it", "as", "soon", "as", "possible", "NUMBER", "I", "want", "to", "change", "tag", "name", "NUMBER", "add", "remove", "remove_tag_prefix", "prefix", "NUMBER", "tag", "NUMBER", "remove_tag_suffix", "NUMBER", "tag", "NUMBER", "suffix", "add_tag_prefix", "change", "NUMBER", "tag", "NUMBER", "add_tag_suffix", "NUMBER", "tag", "NUMBER", "change", "Thank", "you", "for", "merge", "I", "notice", "that", "the", "in_tail", "plugin", "shipped", "with", "fluentd", "NUMBER", "consumes", "NUMBER", "CPU", "time", "on", "my", "box", "NUMBER", "OS", "Ubuntu", "NUMBER", "RHEL", "NUMBER", "Ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "linux", "fluentd", "gem", "install", "version", "NUMBER", "fluentd", "It", "seems", "the", "io", "object", "pass", "to", "IOHandler", "be", "always", "readable", "and", "on_readable", "be", "call", "repeatedly", "NUMBER", "Sorry", "that", "I", "have", "no", "idea", "how", "to", "fix", "it", "NUMBER", "Here", "be", "my", "fluent", "NUMBER", "conf", "TAG", "TAG", "lt", "source", "type", "tail", "path", "var", "log", "apache", "NUMBER", "ssl_access", "NUMBER", "log", "format", "apache", "tag", "apache", "NUMBER", "ssl_access", "lt", "source", "lt", "match", "type", "stdout", "lt", "match", "TAG", "TAG", "Run", "fluentd", "like", "this", "TAG", "opt", "ruby", "bin", "fluentd", "TAG", "I", "get", "this", "TAG", "dstat", "total", "cpu", "usage", "dsk", "total", "net", "total", "paging", "system", "usr", "sys", "idl", "wai", "hiq", "siq", "read", "writ", "recv", "send", "in", "out", "int", "csw", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "B", "NUMBER", "B", "NUMBER", "NUMBER", "NUMBER", "B", "NUMBER", "B", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "B", "NUMBER", "B", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "B", "NUMBER", "B", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "B", "NUMBER", "B", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "TAG", "Now", "in_tail", "uses", "MultiEventStream", "to", "emit", "input", "data", "NUMBER", "If", "the", "size", "of", "MultiEventStream", "gets", "over", "buffer_chunk_limit", "Fluentd", "pass", "its", "chunk", "formatted", "from", "MultiEventStream", "to", "output", "plugin", "NUMBER", "In", "this", "case", "buffer_chunk_limit", "be", "ignored", "NUMBER", "Any", "ideas", "Nothing", "because", "input", "doesn", "t", "consider", "buffer", "and", "output", "but", "the", "policy", "be", "needed", "NUMBER", "We", "should", "clarify", "where", "responsibility", "lies", "to", "avoid", "this", "issue", "NUMBER", "We", "sent", "pull", "request", "to", "solve", "this", "problem", "user", "defined", "filter", "per", "records", "NUMBER", "The", "overview", "of", "this", "patch", "be", "NUMBER", "load", "user", "defined", "script", "specified", "by", "the", "option", "filter_script", "NUMBER", "invoke", "filter", "method", "in", "user", "defined", "script", "per", "record", "NUMBER", "The", "sample", "code", "be", "here", "LINK", "Note", "that", "this", "code", "be", "just", "a", "sample", "therefore", "there", "remain", "some", "tasks", "to", "merge", "NUMBER", "Todo", "list", "be", "as", "follows", "NUMBER", "Add", "test", "cases", "NUMBER", "NUMBER", "Multiple", "filter", "support", "NUMBER", "Please", "tell", "me", "if", "you", "have", "any", "ideas", "or", "question", "NUMBER", "Thank", "you", "frsyuki", "Thank", "you", "for", "your", "be", "dealing", "with", "this", "difficult", "problem", "NUMBER", "This", "solution", "seems", "to", "work", "well", "on", "the", "occurrence", "of", "exceeding", "chunk", "limit", "NUMBER", "Could", "I", "ask", "you", "whether", "my", "understanding", "be", "correct", "or", "not", "Divide", "buffer", "plugins", "emit", "method", "into", "open", "append", "append", "close", "Change", "BufferedOutput", "format_stream", "method", "as", "following", "You", "mean", "you", "ll", "change", "the", "current", "chunk", "format", "chunk", "header", "chunk", "body", "into", "new", "chunk", "format", "like", "as", "follows", "chunk", "header", "record", "header", "user", "s", "formatted", "record", "record", "header", "user", "s", "formatted", "record", "record", "header", "user", "s", "formatted", "record", "right", "ObjectBufferedOutput", "emit", "fallbacks", "to", "non", "optimized", "routine", "that", "calls", "BufferedOutput", "format_stream", "if", "the", "optimized", "routine", "raise", "BufferChunkLimitError", "NUMBER", "The", "non", "optimized", "routine", "means", "the", "routine", "which", "processes", "per", "record", "not", "per", "chunk", "doesn", "t", "it", "frsyuki", "Okey", "I", "understood", "what", "you", "re", "going", "to", "do", "NUMBER", "I", "believe", "that", "it", "works", "well", "I", "can", "help", "you", "if", "you", "need", "and", "I", "ll", "watch", "the", "modification", "if", "you", "create", "the", "branch", "for", "this", "problem", "NUMBER", "in_tail", "NUMBER", "rb\u3092\u5229\u7528\u3057\u305f\u6642\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u306b\u5bfe\u3057\u3066tail\u3059\u308b\u3068\u6c38\u4e45\u30eb\u30fc\u30d7\u306b\u5165\u308a", "\u540c\u3058\u30ed\u30b0\u3092\u62fe\u3063\u3066\u3057\u307e\u3046\u73fe\u8c61\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059", "\u30cf\u30fc\u30c9\u30ea\u30f3\u30af\u3067tail\u3059\u308b\u3068\u767a\u751f\u3057\u306a\u3044\u306e\u3067", "\u5224\u5b9a\u3067\u4f55\u304b\u554f\u984c\u767a\u751f\u3057\u3066\u3044\u306a\u3044\u3067\u3057\u3087\u3046\u304b", "OS", "CentOS", "release", "NUMBER", "Final", "fluentd", "v", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "supervisor", "NUMBER", "rb", "NUMBER", "supervise", "starting", "fluentd", "NUMBER", "ruby", "v", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "linux", "\u3067\u3059", "TAG", "type", "tail", "format", "TAG", "_", "_", "TAG", "_", "TAG", "_", "TAG", "S", "TAG", "_", "S_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "_", "TAG", "time_format", "d", "b", "Y", "H", "M", "S", "z", "path", "var", "log", "httpd", "access_log_sym", "tag", "apache", "NUMBER", "access", "pos_file", "var", "tmp", "access", "NUMBER", "log", "NUMBER", "pos", "TAG", "\u3068\u3044\u3046\u8a2d\u5b9a\u3067\u3059", "fluentd", "NUMBER", "\u3067\u76f4\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f", "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059", "Using", "NUMBER", "fail", "with", "Finished", "test", "in", "NUMBER", "s", "NUMBER", "test", "s", "NUMBER", "assertions", "s", "NUMBER", "NUMBER", "Failure", "test_emit_", "NUMBER", "ExecFilterOutputTest", "out_exec_filter", "NUMBER", "rb", "NUMBER", "TAG", "expected", "but", "was", "TAG", "NUMBER", "NUMBER", "Failure", "test_emit_", "NUMBER", "ExecFilterOutputTest", "out_exec_filter", "NUMBER", "rb", "NUMBER", "TAG", "expected", "but", "was", "TAG", "NUMBER", "NUMBER", "test", "NUMBER", "assertions", "NUMBER", "failures", "NUMBER", "error", "NUMBER", "skips", "I", "can", "t", "get", "it", "to", "work", "with", "anything", "more", "complex", "than", "cat", "NUMBER", "The", "idea", "be", "that", "it", "calls", "a", "command", "feeds", "it", "events", "as", "input", "and", "reads", "the", "output", "of", "that", "command", "to", "generate", "new", "events", "right", "That", "seems", "to", "be", "the", "idea", "but", "the", "documentation", "isn", "t", "very", "clear", "NUMBER", "I", "m", "use", "Scientific", "Linux", "NUMBER", "which", "be", "apparently", "a", "RHEL", "variant", "NUMBER", "Ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "x", "NUMBER", "_", "NUMBER", "linux", "in_http", "becomes", "more", "useful", "for", "some", "applications", "if", "we", "can", "post", "JSON", "with", "Content", "Type", "application", "json", "I", "ve", "just", "add", "you", "to", "the", "contaributor", "list", "NUMBER", "thx", "NUMBER", "Not", "a", "big", "deal", "at", "all", "but", "I", "believe", "that", "this", "error", "message", "has", "a", "typo", "NUMBER", "LINK", "With", "enough", "eyeballs", "all", "bug", "be", "shallow", "NUMBER", "Linus", "Torvalds", "Regards", "NUMBER", "I", "have", "a", "fluentd", "server", "accepting", "request", "via", "HTTP", "POST", "NUMBER", "The", "URL", "use", "becomes", "the", "tag", "of", "the", "event", "unless", "it", "contains", "a", "period", "in", "which", "case", "it", "be", "ignored", "NUMBER", "Example", "curl", "d", "json", "event", "body", "LINK", "be", "fine", "curl", "d", "json", "event", "body", "LINK", "Events", "use", "the", "second", "URL", "don", "t", "show", "up", "in", "the", "logs", "NUMBER", "Is", "this", "intentional", "Ah", "of", "course", "that", "worked", "I", "had", "a", "match", "_", "and", "not", "a", "match", "_", "NUMBER", "Sorry", "for", "the", "false", "alarm", "Some", "syslog", "daemons", "rsyslog", "on", "CentOS", "for", "example", "seem", "to", "format", "the", "day", "in", "the", "date", "string", "without", "a", "leading", "NUMBER", "in", "the", "case", "of", "days", "NUMBER", "NUMBER", "The", "parser", "would", "not", "parse", "them", "before", "even", "with", "the", "data", "format", "set", "to", "b", "d", "H", "M", "S", "NUMBER", "By", "allowing", "for", "NUMBER", "or", "more", "spaces", "between", "the", "month", "and", "day", "this", "issue", "be", "resolve", "NUMBER", "Hi", "I", "find", "that", "the", "tail", "plugin", "can", "not", "tail", "a", "file", "here", "s", "the", "configuration", "TAG", "type", "tail", "path", "home", "ld", "desktop", "tmp", "test", "NUMBER", "txt", "tag", "test", "format", "TAG", "NUMBER", "_", "TAG", "TAG", "type", "stdout", "TAG", "And", "I", "add", "to", "test", "NUMBER", "txt", "LINE", "BY", "LINE", "request", "hello", "request", "echo", "server", "request", "blabla", "However", "I", "can", "see", "the", "outputs", "of", "fluentd", "be", "not", "a", "Tail", "one", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "request", "request", "hello", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "request", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "request", "request", "hello", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "request", "request", "echo", "server", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "request", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "request", "request", "hello", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "request", "request", "echo", "server", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "request", "request", "blabla", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "test", "request", "Am", "I", "wrong", "in", "configuring", "the", "fluentd", "or", "the", "tail", "plugin", "has", "some", "bug", "I", "ve", "seen", "such", "warning", "which", "could", "be", "find", "in", "the", "sources", "of", "in_tail", "NUMBER", "rb", "log", "NUMBER", "warn", "pos_file", "PATH", "parameter", "be", "not", "set", "to", "a", "tail", "source", "NUMBER", "log", "NUMBER", "warn", "this", "parameter", "be", "highly", "recommended", "to", "save", "the", "position", "to", "resume", "tailing", "NUMBER", "However", "pos_file", "has", "not", "be", "set", "at", "all", "NUMBER", "Even", "if", "I", "manually", "set", "pos_file", "to", "be", "a", "temporary", "file", "I", "could", "not", "get", "fluentd", "start", "with", "an", "exception", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "unexpect", "error", "error", "undefined", "method", "persistent", "for", "Fluent", "TailInput", "PositionEntry", "NUMBER", "x", "NUMBER", "a", "NUMBER", "bc", "NUMBER", "I", "think", "the", "tail", "plugin", "has", "not", "be", "production", "ready", "right", "Thank", "you", "Could", "you", "try", "to", "use", "echo", "command", "and", "redirection", "to", "add", "lines", "like", "this", "echo", "request", "hello", "test", "NUMBER", "txt", "echo", "request", "echo", "server", "test", "NUMBER", "txt", "echo", "request", "blabla", "test", "NUMBER", "txt", "Editors", "like", "vim", "create", "new", "file", "to", "save", "file", "even", "if", "you", "just", "add", "lines", "NUMBER", "The", "tail", "plugin", "assumes", "these", "change", "as", "the", "complete", "file", "update", "NUMBER", "I", "find", "the", "bug", "around", "the", "pos_file", "parameter", "NUMBER", "Thank", "you", "for", "your", "report", "NUMBER", "If", "you", "want", "stable", "version", "please", "consider", "to", "use", "td", "agent", "which", "be", "stable", "package", "maintained", "by", "Treasure", "Data", "Inc", "NUMBER", "LINK", "install", "from", "binary", "package", "Thank", "you", "it", "works", "NUMBER", "tail", "plugin", "seeks", "to", "last", "position", "of", "the", "specified", "file", "when", "it", "s", "a", "first", "read", "NUMBER", "It", "doesn", "t", "mention", "how", "to", "specify", "the", "external", "command", "NUMBER", "From", "the", "test", "it", "appears", "the", "parameter", "be", "command", "NUMBER", "That", "should", "probably", "be", "mention", "NUMBER", "No", "worries", "thanks", "for", "the", "fix", "NUMBER", "I", "made", "original", "TimeSlicedOutputTestDriver", "to", "ignore", "expect_format", "NUMBER", "That", "be", "bug", "NUMBER", "This", "be", "very", "useful", "if", "you", "want", "to", "hook", "fluentd", "directly", "on", "heroku", "dyno", "or", "any", "Foreman", "managed", "system", "Imagine", "run", "something", "like", "this", "TAG", "ruby", "bin", "fluentd", "c", "etc", "fluent", "NUMBER", "conf", "i", "TAG", "n", "type", "http", "n", "port", "PORT", "n", "TAG", "TAG", "This", "immensely", "helps", "when", "port", "numbers", "be", "not", "know", "before", "hand", "NUMBER", "Thanks", "parolkar", "NUMBER", "fantastic", "patch", "Also", "add", "you", "to", "the", "contributors", "list", "NUMBER", "Thx", "NUMBER", "Bug", "in", "buf_file", "NUMBER", "rb", "def", "encode_key", "key", "URI", "NUMBER", "encode", "key", "_", "NUMBER", "a", "zA", "Z", "NUMBER", "NUMBER", "n", "end", "def", "decode_key", "encoded_key", "URI", "NUMBER", "decode", "encoded_key", "_", "NUMBER", "a", "zA", "Z", "NUMBER", "NUMBER", "n", "end", "URI", "NUMBER", "encode", "_", "NUMBER", "a", "zA", "Z", "NUMBER", "NUMBER", "n", "returns", "NUMBER", "F", "and", "URI", "NUMBER", "decode", "NUMBER", "F", "_", "NUMBER", "a", "zA", "Z", "NUMBER", "NUMBER", "n", "returns", "u", "NUMBER", "F", "NUMBER", "so", "the", "fluent", "s", "NUMBER", "plugin", "cannot", "create", "sub", "directories", "NUMBER", "I", "test", "in", "ruby", "NUMBER", "create", "TestDriver", "for", "TimeSlicedOutput", "plugins", "with", "support", "for", "chunk", "NUMBER", "key", "and", "output", "all", "chunks", "on", "run", "in", "spite", "of", "time_slice_cache_interval", "settings", "NUMBER", "rubygem", "NUMBER", "\u74b0\u5883\u3067\u306fGem", "NUMBER", "searcher\u30e1\u30bd\u30c3\u30c9\u306fdeprecated\u3068\u8b66\u544a\u304c\u51fa\u308b\u306e\u3067", "rubygem", "NUMBER", "\u304b\u3089\u4f7f\u3048\u308bGem", "Specification", "NUMBER", "find_all\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u8b66\u544a\u3092\u6291\u6b62\u3057\u307e\u3057\u305f", "\u4e92\u63db\u6027\u306e\u305f\u3081\u5143\u306e\u90e8\u5206\u3082\u6b8b\u3057\u3066\u3044\u307e\u3059\u306e\u3067", "NUMBER", "\u672a\u6e80\u306erubygem\u3067\u3082\u4f7f\u3048\u308b\u306f\u305a\u3067\u3059", "NUMBER", "fluentd", "o", "log", "option", "NUMBER", "SIGHUP", "fluentd", "process", "NUMBER", "unexpect", "error", "error", "undefined", "method", "reopen", "for", "Fluent", "Log", "NUMBER", "x", "NUMBER", "ec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "unexpect", "error", "error", "undefined", "method", "reopen", "for", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "NUMBER", "lib", "fluent", "command", "fluentd", "NUMBER", "rb", "NUMBER", "in", "block", "in", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "NUMBER", "lib", "fluent", "command", "fluentd", "NUMBER", "rb", "NUMBER", "in", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rubygems", "custom_require", "NUMBER", "rb", "NUMBER", "in", "require", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "ruby", "NUMBER", "rubygems", "custom_require", "NUMBER", "rb", "NUMBER", "in", "require", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fluent", "NUMBER", "bin", "fluentd", "NUMBER", "in", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "bin", "fluentd", "NUMBER", "in", "load", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "usr", "bin", "fluentd", "NUMBER", "in", "TAG", "fluent", "plugin", "mongo", "has", "follwing", "code", "ruby", "records", "chunk", "NUMBER", "msgpack_each", "record", "record", "time_key", "Time", "NUMBER", "at", "record", "time_key", "if", "include_time_key", "records", "TAG", "you", "can", "do", "the", "map", "operation", "in", "the", "format", "method", "NUMBER", "Right", "In", "Mongo", "time", "field", "needs", "Time", "object", "but", "MessagePack", "can", "t", "serialize", "such", "objects", "NUMBER", "There", "be", "two", "reasons", "Thanks", "for", "the", "explanation", "NUMBER", "Hmm", "I", "understand", "the", "different", "roles", "of", "write", "and", "format", "NUMBER", "Second", "I", "see", "NUMBER", "msgpack_map", "be", "still", "useful", "Yes", "for", "the", "code", "clarification", "NUMBER", "No", "for", "other", "reasons", "NUMBER", "This", "issue", "be", "not", "critical", "NUMBER", "I", "leave", "a", "decision", "up", "to", "you", "Signed", "off", "by", "OZAWA", "Tsuyoshi", "ozawa", "NUMBER", "tsuyoshi", "gmail", "NUMBER", "com", "The", "fluentd", "NUMBER", "fail", "to", "gem", "install", "when", "rake", "it", "from", "source", "code", "NUMBER", "The", "log", "dump", "be", "as", "follows", "ozawa", "ozamba", "workspace", "fluentd", "rake", "WARNING", "no", "description", "specified", "Successfully", "build", "RubyGem", "Name", "fluentd", "Version", "NUMBER", "File", "fluentd", "NUMBER", "gem", "Generated", "fluentd", "NUMBER", "gemspec", "fluentd", "NUMBER", "gemspec", "be", "valid", "NUMBER", "ozawa", "ozamba", "workspace", "fluentd", "gem", "install", "pkg", "fluentd", "NUMBER", "gem", "ERROR", "Error", "installing", "pkg", "fluentd", "NUMBER", "gem", "fluentd", "requires", "fluentd", "NUMBER", "NUMBER", "\u74b0\u5883\u304c\u5fc5\u8981\u3068\u77e5\u3089\u305a\u306b", "NUMBER", "\u74b0\u5883\u3067gem", "install", "\u5b9f\u884c\u3057\u3066\u60b2\u3057\u3044\u601d\u3044\u3092\u3057\u305f\u306e\u3067", "ruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u8981\u6c42\u3092gemspec\u306b\u8ffd\u52a0\u3057\u3066\u307f\u307e\u3057\u305f", "gemspec\u306e\u518d\u751f\u6210\u306f\u5fa1\u624b\u5143\u306ejeweler\u3067\u884c\u3063\u305f\u307b\u3046\u304c\u3088\u308d\u3057\u3044\u304b\u3068\u601d\u3044", "\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3044\u307e\u305b\u3093", "\u624b\u5143\u3067\u3084\u3063\u305f\u3089\u30d5\u30a1\u30a4\u30eb\u5217\u6319\u306e\u51fa\u529b\u306a\u3069\u304c\u5fae\u5999\u306b\u9055\u3063\u3066\u30d1\u30c3\u30c1\u304c\u4e0d\u5fc5\u8981\u306b\u81a8\u3089\u3093\u3060\u306e\u3067", "LINK", "add", "you", "to", "the", "contributors", "section", "thx", "Thanks", "but", "my", "family", "name", "be", "OZAWA", "not", "OGAWA", "Sorry", "now", "it", "s", "fix", "I", "be", "test", "fluentd", "NUMBER", "It", "cannnot", "transfer", "apache", "access", "log", "since", "NUMBER", "update", "NUMBER", "I", "looked", "that", "fluentd", "be", "fail", "parse", "apache", "access", "log", "NUMBER", "transfer", "image", "transfer", "server", "apache", "fluentd", "receive", "server", "Following", "be", "my", "environmment", "and", "stack", "trace", "NUMBER", "environment", "transfer", "server", "OS", "CentOS", "NUMBER", "fluentd", "NUMBER", "apache", "NUMBER", "receive", "server", "OS", "CentOS", "NUMBER", "fluentd", "NUMBER", "fluent", "plugin", "mongo", "NUMBER", "stack", "trace", "Error", "log", "be", "output", "at", "receive", "server", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "initialize", "accepted", "fluent", "socket", "object_id", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "emit", "transaction", "faild", "error", "undefined", "method", "for", "nil", "NilClass", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "mixin", "NUMBER", "rb", "NUMBER", "in", "filter_record", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "mixin", "NUMBER", "rb", "NUMBER", "in", "block", "in", "format_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "feed_each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "mixin", "NUMBER", "rb", "NUMBER", "in", "format_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "on_message", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "feed_each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "on_read_msgpack", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "on_read", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "fluent", "engine", "NUMBER", "rb", "NUMBER", "rescue", "in", "emit_stream", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "unexpect", "error", "error", "undefined", "method", "for", "nil", "NilClass", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "mixin", "NUMBER", "rb", "NUMBER", "in", "filter_record", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "mixin", "NUMBER", "rb", "NUMBER", "in", "block", "in", "format_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "feed_each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "event", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "mixin", "NUMBER", "rb", "NUMBER", "in", "format_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "output", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "match", "NUMBER", "rb", "NUMBER", "in", "emit", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "engine", "NUMBER", "rb", "NUMBER", "in", "emit_stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "on_message", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "feed_each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "on_read_msgpack", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "on_read", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "io", "NUMBER", "rb", "NUMBER", "in", "on_readable", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run_once", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "cool", "NUMBER", "io", "NUMBER", "lib", "cool", "NUMBER", "io", "loop", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "rescue", "in", "run", "usr", "local", "lib", "fluent", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "fluentd", "NUMBER", "lib", "fluent", "plugin", "in_stream", "NUMBER", "rb", "NUMBER", "in", "run", "Please", "help", "me", "NUMBER", "In", "SetTagKeyMixin", "filter_record", "ruby", "record", "time_key", "timef", "NUMBER", "format", "time", "It", "s", "a", "SetTimeKeyMixin", "operation", "NUMBER", "I", "think", "following", "code", "be", "correct", "NUMBER", "ruby", "record", "tag_key", "tag", "This", "be", "a", "bug", "and", "blocks", "fluent", "plugin", "mongo", "update", "to", "NUMBER", "Gemfile", "\u306e\u5bfe\u5fdc\u3092\u884c\u3044", "\u610f\u56f3\u7684\u306b\u30b3\u30df\u30c3\u30c8\u306b\u542b\u307e\u308c\u306a\u304b\u3063\u305f", "fluent", "NUMBER", "gemspec", "\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f", "\u7406\u7531\u306f\u4e8c\u3064\u3042\u308a", "\u4e00\u3064\u76ee\u306f", "bundle", "install", "bundle", "exec", "rake", "test", "\u3067\u4f9d\u5b58\u95a2\u4fc2\u3092\u89e3\u6c7a\u3055\u305b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3055\u305b\u305f\u304b\u3063\u305f\u3053\u3068", "\u4e8c\u3064\u76ee\u306f", "fork", "\u3057\u305f", "fluent", "\u306b\u5bfe\u3057\u3066", "Gemfile", "\u306e", "git", "git_url", "\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u305b\u305f\u304b\u3063\u305f", "\u305d\u306e\u305f\u3081\u306b", "gemspec", "\u304c\u5fc5\u8981", "\u305f\u3081\u3067\u3059", "\u307e\u305f", "NUMBER", "rvmrc", "\u3092\u8ffd\u52a0\u3057", "rvm", "\u306e\u5229\u7528\u8005\u306f\u81ea\u52d5\u3067\u5207\u308a\u66ff\u308f\u308b\u69d8\u306b\u5909\u66f4\u3057\u307e\u3057\u305f", "fluent", "\u304c", "NUMBER", "\u3082\u5bfe\u5fdc\u4e88\u5b9a\u3067\u3057\u305f\u3089\u524a\u9664\u4e0b\u3055\u3044", "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059", "fluent", "fluent", "plugin", "\u306f\u904b\u7528\u3057\u3066\u307f\u308b\u4e88\u5b9a\u3067\u3059\u3057", "rails", "NUMBER", "\u5411\u3051\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u66f8\u304f\u4e88\u5b9a\u3067\u3059\u306e\u3067", "\u3044\u305f\u3060\u3051\u308b\u3068\u3046\u308c\u3057\u3044\u3067\u3059", "fluent", "cat\u304c", "port\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u53d7\u3051\u4ed8\u3051\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u8abf\u3079\u3066\u307f\u305f\u3089\u5358\u7d14\u306atypo\u3060\u3063\u305f\u306e\u3067\u4fee\u6b63\u3057\u3066\u307f\u307e\u3057\u305f", "\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059", "LINK", "add", "you", "to", "the", "contributors", "section", "thx", "undefined", "local", "variable", "or", "method", "occur", "when", "TextParser", "NUMBER", "register_template", "be", "call", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "command", "fluentd", "NUMBER", "rb", "NUMBER", "rescue", "in", "TAG", "unexpect", "error", "error", "undefined", "local", "variable", "or", "method", "time_format", "for", "Fluent", "TextParser", "Class", "This", "patch", "solves", "the", "problem", "by", "add", "the", "argument", "to", "TextParser", "NUMBER", "register_template"], "text_count": [0, 13331, 3472, 2078, 1574, 148, 1656, 4, 29, 1391, 1283, 4010, 1962, 1131, 1367, 760, 0, 0, 0, 0, 4296, 1446, 710, 424, 945, 647, 0, 0, 0, 0, 9238, 4994, 4313, 235, 2247, 453, 0, 0, 0, 0, 13188, 31, 7430, 7137, 2172, 0, 0, 0, 0, 0, 2853, 1592, 1454, 675, 995, 434, 1019, 0, 0, 0, 10319, 563, 8719, 705, 0, 0, 0, 0, 0, 0, 7252, 578, 4780, 2720, 1275, 0, 0, 0, 0, 0, 14734, 8044, 942, 4828, 581, 944, 0, 0, 0, 0, 492, 3204, 285, 0, 0, 0, 0, 0, 0, 0, 10170, 1784, 6338, 2883, 0, 0, 0, 0, 0, 0, 22091, 40167, 485, 2549, 388, 812, 0, 0, 0, 0, 59868, 159, 43247, 578, 6818, 15289]}]