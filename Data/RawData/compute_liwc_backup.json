[{"repo": "backup", "type": "elite", "title": "", "number of text": 341, "text": "  Looks good. Ill merge it in. Thanks!\n @SteveNewson mind adding an entry with more information regarding PushOver to the Wiki? https://github.com/meskyanichi/backup/wiki/Notifiers\n\nThis would help people unfamiliar with this service/tool to get up and running easier.\n Excellent. No rush, just whenever you have time. I'll update the README now, and release a new patch version of the gem.\n  Long ass commit bro!\n  There we go.\n  I think we could allow putting in a password directly, but provide a warning comment in the command-line under `backup help decrypt` and on the wiki where we point out it'll store it in Bash history by typing it out instead of using a password file. I think this kind of security should be up to the end-user, as long as they are aware of the potential security vulnerabilities.\n  Thanks!\n  Since we're bumping stuff anyway now, I noticed `gem \"fog\", \"~> 1.4.0\"` on RubyGems.org. If you want to see if this is compatible with Backup I'll pull it in. \n Looks good, thanks! Mind pointing the pull request to the develop branch instead? Master branch is only for releases. Then i'll pull it in. Thanks for trying out Fog 1.4.0.\n  Ah yeah, I noticed the deprecation warnings when I generated the config. \n  Can someone explain to me why they associate \"Ruby on Rails\" (or something similar), a web framework, with Backup, a command line utility? I don't really understand why people would add Backup to their applications' Gemfile at all.\n\n```\nssh user@ip -p<port>\ngem install backup\n# .. generate config/models .. configure config/models\nbackup perform -t <trigger>\n```\n\nThat's it. I don't see how people relate Backup to a Ruby application. Rather, it's related to datastores and file systems which don't have gem dependencies. So, the Backup dependencies should be completely decoupled from your application dependencies and cause zero conflict.\n\nWe also do not want to over complicate the gem. I have not thought of releasing a gem for every potential dependency that comes around. Seeing as we have a fairly large list of components, making a gem for everything seems tedious to me. I can see some benefits, but I don't know if they outweigh the cons that come with them. Please understand that Backup is a fairly large project with a ton of dependencies and it's not very easy to maintain. It's hard to make everyone happy.\n\nFeel free however to convince @burns and myself why it should be added to a Gemfile of a Ruby application, rather than just using it in the stand-alone way it was meant to be. There are a lot of non-Ruby programmers that only use Ruby to utilize tools such as Backup, Whenever, Capistrano, Chef, Puppet, etc. and don't use anything like Rails, Sinatra, Merb, Padrino etc.\n > Fair enough. I don't think this fact of keeping backup outside of rails project has been clear in communication enough. I have been using backup for over 1.5 years and always worked inside of rails even with Gemfile. I believe, people just assume that it all works until it doesn't. Lately though, dependency graph of backup gem has expanded and it causes such conflicts to occur often.\n\nBackup in fact did start out as a Rails plugin (back in version 1, not sure if it was in version 2). In any case, once I released version 2 or 3 I came to realize what I just stated, about a backup utility having nothing to do with a web framework and only overcomplicates things due to compatibility issues, and that it would be much better suited as it's own thing.\n\n> About extracting optional functionality as plugin, I believe, it is a matter of runtime vs. build time convenience. Sure, it will be more work to maintain 30 separate gems as opposed to one. But most end users use only 2-3 of those optional features and will be just happy to install those and go their way.\n\nWe would have to evaluate this some time.\n\n> Some warning to rails folks to keep backup separate from Gemfile will help.\n\nWill probably add something like that to the README sometime.\n\nThanks for the feedback!\n > Personally I believe you should be able to bundle backup with your Rails app. I set require false within the Gemfile so that it isn't being loaded with the app.\n\nBut doesn't think still cause dependency issues when running `bundle install`?\n\n> The reason I do this is so that I can keep all my application dependencies within the project. That includes services you may not consider part of the application such as Whenever, Backup, Capistrano, God, and anything else I am relying on for my application.\n\nUnderstandable.\n\n> While it may make sense for you to use Backup outside the context of your application it simply causes more work, more documentation, more organization, and more processes to manage. I'm just working on some small apps, and it works much better to keep everything I need within the application repository. It helps new developers bootstrap the application, and have everything they need in one place. It also allows me to have my Capistrano deployment scripts manage updating my Backup configuration when necessary.\n> \n> While I understand you not wanting to always support dependency updates I think it's foolish not to update this Fog dependency to please the dozen or so people in favor of it. More time is being spent debating whether or not to update Backup to better support cloud storage than it would take to simply update it when I've already submitted and tested a pull request for it.\n\nThe problem is that Rails (and typically the gems people typically use around Rails) evolve at a rapid pace. If these tools constantly update then people will constantly be coming back to Backup asking for dependency updates because otherwise Bundler is unable to bundle their app due to Backup using an older version of `fog` compared to what another dependency in the app requires.\n\n> It is very plausible that someone trying to use Backup even separately from their application could still run into this dependency error if they have multiple versions of different Gems installed. So to me the argument that this should be kept separate from the Rails app doesn't hold much weight personally.\n\nBackup always requires gems through the `gem` function before `require`-ing it, meaning it always loads in the correct gem version and does not conflict even if newer versions are installed. Of course, if you're bundling it along with say Carrierwave in a Rails app which also uses Fog (but a later version) then it will conflict because of Bundler.\n\n---\n\nNow, despite all of this, it might be worth trying to just losen the dependencies to a `>=` rather than `~>` where any newer version would work, rather than needing a certain `minor` version of a gem. I think most things are backwards compatible so there would less likely be need for dependency updates when other gem authors update their gems and dependencies.\n\nWhat do other people think of this?\n > Agreed 100% to Jeff  \"More time is being spent debating whether or not to update Backup to better support cloud storage than it would take to simply update ...\" Gemfile, bundle, ... were made to keep things simple and easy. Why do not\n> use them? Maybe it brings some extra work. But that's the strength of social coding. You don't have to do all by yourself. Is this case in particular we've seen this. The solution was given by a user and published in a branch ready to be merged.\n\nI understand that social coding in a lot of cases reduces the amount of work there is to be done by the maintainers. But consider that any changes might also have a negative impact on the project. Backup 2 is a good example of that, I pulled in too much unnecessary things and the gem became unmaintainable.\n\nNow, this might look like a minor/insignificant change. However, I still feel it's an unnecessary one. So let me explain how I'm dealing with my own projects when I deploy to EC2/VPS or dedicated servers.\n\n1) Mina/Capistrano for application deployment\n2) Chef for provisioning\n\nWhen I deploy my application, I scope it out to only doing what is essential for getting the application deployed and running. Backup plays no role here. However, when I provision my server with Chef (installing/configuring everything like nginx, mongodb, redis, ruby, deployment user, etc, etc) Backup is no exception here. I tell Chef to install Backup and Whenever. I tell it to write my Backup main config to /root/Backup/config.rb, my model to /root/Backup/models/*.rb and Whenever's schedule.rb to `/root/Backup/schedule.rb`. Once in place, I tell it to update the crontab with `whenever --update-crontab -i myapp -f /root/Backup/schedule.rb`. Done. Backup is now in place and is performing scheduled backups.\n\nIn my opinion, this is what you should be doing. Zero gem conflicts should occur when you do it this way (which I consider the appropriate way). Keep a separate Chef repository aside of your App repository. I understand people will always have mixed feelings but considering everything (should) work when you do not directly tie it in to a Ruby app means it's not broken, and Rails isn't an excuse to update any Backup dependencies. A bug/issue in Backup _because_ of a dependency of course is a valid reason for updating a dependency, assuming the update fixes that particular bug.\n\nAlso, Chef is very easy to learn if you haven't already, and if you're not using it you're missing out. Go check out RailsCasts.com for Chef-Solo, then check out the Knife-Solo and Librarian gems which make managing cookbooks easy. It makes a world of a difference compared to regular shell scripts or using Capistrano to as a provisioning tool.\n\nI'm not sure whether I'm going to want to change `~>` to `>=` dependencies. Because this has a lot higher potential for causing issues than a simple Rails dependency conflict. If Fog does something to it's API, causing backwards incompatibility, then Backup is **forced** to push out a new gem just because Fog decided to change it's API in a newer version, which caused people that installed Backup afterwards to break and start posting issues regarding that again here. It'll become an endless loop which in my opinion is unnecessary and avoidable by just having users use Backup as it should be used, which is \"stand-alone\".\n\nI hope people can understand this decision.\n\nOne more thing to note, seeing as most people will be using Capistrano + Bundler + Backup. If you really don't want to use a separate provisioning tool like Chef/Puppet, why don't you just make another Capistrano task instead?\n\n``` ruby\ntask :manage_backup do\n  run \"gem install backup\"\nend\n```\n\nThen you won't have any dependency conflicts with your Rails dependencies in Bundler.\n > I understand your reservations but shouldn't it also be a goal of backup to continue progressing forward? There's reasons that backups dependencies release new versions like bug fixes, performance improvements or new features. I think it's in the best interest of the project to periodically update it's dependencies when there are not upgrade issues.\n\nPeriodically updating dependencies to keep up should be fine. Preferably iterate through **all** of Backups dependencies on a monthly basis to check for non-breaking updates might be worthwhile. Then release a gem based on these updates. I just don't feel much for doing one commit to update dependencies and then releasing a whole new gem just for that.\n\n> Otherwise it's very short sighted to just say hey guys my setup works so there's no reason to update it. That's how projects slowly die as everyone else continues moving forward, but the project waits so long to try getting up to date that people move on elsewhere or it becomes more of a hassle to upgrade than it's worth.\n\nWell, why fix something that isn't broken really. It works perfectly fine (I assume). Assuming everyone wouldn't associate Backup as a dependency for their application. That's the main issue. Backup isn't a dependency of a project. Everyone's project will still run even if Backup isn't present. This seems, for some odd reason, very hard to understand for many people. Lots of non-Rubyists use Backup as their backup tool for Python, Java, Scala, PHP, etc, projects. It even got ported to the FreeBSD ports system so even sysadmins that don't even deploy applications use it. It is a tool on it's own and is in no way related to pretty much anything.\n\nNow, as I stated I do not see a problem periodically updating dependencies. But these are not meant to \"fix\" dependency conflicts people have in their Rails apps. Note that if someone uses an older version of CarrierWave and I update Fog but CarrierWave isn't compatible, then even though I updated it, CarrierWave has not and the dependency issue is back again. So while I agree that periodically updating _all_ the dependencies you see in `backup dependencies --list`, it wouldn't be to help fix Bundler dependency conflicts. Like you said, the benefits would be potential bugfixes/performance improvements/features.\n\nI will have to make this clear somewhere in the README because people keep opening tickets thinking that backup is supposed to go in to a project's Gemfile.\n  I'll push out a new version soon, probably within the next 24 hours.\n Pushed out the new version (3.0.25).\n  Thanks!\n Oh by the way, mind updating the OpenSSL entry over at https://github.com/meskyanichi/backup/wiki/Encryptors with these new options in the config block, as well as maybe another decryption example for people using keys?\n\nCheers!\n Very soon. It's been a long time since I did, and there have been some major changes since the last release:\n\nhttps://github.com/meskyanichi/backup/compare/master...develop\n\n_106 commits, 125 changed files with 2,701 additions and 1,228 deletions._\n\nI'm currently spamming commits to get things done for the next release, particularly the majority of the open tickets and pull requests here, as well as some internal refactoring.\n\nI think we'll need just a few more days and I'll be releasing 3.0.20.\n\nBecause this is quite a large update, I'd like to see how it goes in production for Backup users for a while, and try to resolve every (bug/issue) ticket that opens for it (if any), then keep pushing out new versions until the major overhaul from the past 1-2 months feel solid and is polished, and then I'm hoping to finally release a 3.1.0 once it looks like there aren't any significant issues.\n  @szymonpk sounds like a neat idea. I currently have zero knowledge of how to generate a checksum on files, I assume there are unix utilities that can take care of this? It would be great to be able to check whether the local and the remote files are the same, and raise an exception if not.\n\nWhat's important is that this utility is both available on Linux and OSX. Is it a default utility, or one that you must install via a package manager? Or are there built-in Ruby functions that can do this? As I said, I have zero experience with this so if you could provide some information on what tools there should be used, maybe some simple command snippets so I can try it locally, etc, that would be great!\n\nAlso, something like this would likely want it's own class/module depending on how it's being implemented. A new object would have to be created inside the storage objects (FTP/SFTP/SCP/etc). Also, I'm not sure whether this would work with services like Amazon S3, Cloud Files, Ninefold, Dropbox, etc. I would assume you need the checksum utility on both the local as well as the remote machine? In which case it would only work with the FTP/SFTP/SCP storage methods.\n\nBut, if you could provide me with some more insight in what utilities to use, how it should be used, maybe some code snippets to get a good checksum going so I can test it locally, then I can better tell what/how/where and if it could/should be implemented.\n\nCheers!\n  Looks good to me. If you could update the Wiki and add this compressor to it that would be great. I'll go ahead and merge it in. Thanks!\n Thanks - I merged it in\n  Nice work @josephcrim! I've never used Riak myself before, but will gladly merge this in. Cheers\n @josephcrim oh and would you mind adding Riak to the databases list in the wiki?\n\nhttps://github.com/meskyanichi/backup/wiki/Databases\n Thanks!\n  I am going to assume you're running on Heroku because of your other ticket, in which case the `s3.keep` method will not work. Backup generates a YAML dump in your Backup directory ( `s3.yml` ) which contains all the references to the files that have been stored using the S3 storage module. However, because every time when a process restarts on Heroku, all the data that was generated inside that particular dyno at the time will be lost, and the data from the precompiled slug will be reset. There is no way for Backup to persist any object references to all your backups on Heroku because of this. On for example a regular Linux/OSX server, such data would be stored in: `$HOME/Backup/data/<my_backup_trigger>/S3.yml` and this is what happens on Heroku as well, except that Heroku keeps throwing it away every time the process restarts.\n  Isn't Fog the one that sets the content-type? Is there a way to force it to use octet-stream?\n  How are you invoking the backup? Be sure to set the temp path to a writable path if you're not running on Celadon Cedar, e.g. the APP_ROOT/tmp directory.\n\n```\nbackup perform -t db_backup --tmp-path=\"APP_ROOT/tmp\"\n```\n\nIt's probably a good idea to handle all the logs/cache in the tmp dir as well, see options: `--cache-path` `--log-path`. I haven't ever run Backup from Heroku yet so I'm not sure what might be the problem if that isn't it.\n\nAlso, I assume that the backup is run on a new dyno that spins up specifically to run that command? That's how it is on Cedar, not sure how it works on Bamboo, I think that changed as well since their billing changed. If that is the case, then it doesn't really matter if the process exists during the cleaning process, since all the data is lost anyway once the dyno spins down.\n\nNow that I mention it, looking at the STDOUT, Heroku just says \"Process exited\" right after the cleaning of the tmp files. This is normal since the dyno will be spun down right after the ruby process exits, which is does after cleaning the tmp files. Are you sure this is actually an issue? Looks like normal behavior to me.\n\nCheers!\nMichael\n Question by the way:\n\nAre you saying you can just add the mongodump unix utility in to your Ruby app and push that to Heroku and it'll just work? That's pretty sweet if that's the case, I never thought that'd work.\n Ah I see. Then it is indeed odd that it shuts down the process, because backup only calls `exit(1)` when an exception is raised, which is not the case here. I'm not sure what to tell you really in this case. You might want to contact Heroku themselves and ask if they can take a look at it.\n Thanks!\n I see what the problem is, I actually overlooked it when I looked at your code snippet. It isn't Backup that exits the proces, it's when Backup finishes after you run `Kernel.exec`.\n\n``` ruby\nexec \"echo *\"       # echoes list of files in current directory\n# never get here because it Process.exit() right after the Kernel.exec()\n```\n\nTaken from http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exec\n\nWhat you should be invoking if you do not want the shell to exit is `Kernel.system()`. This will perform the given command in a sub shell (and the master shell will wait for it to finish) instead of in the master process. So when the sub shell exits, the master shell continues where it left off. With that, your clockwork process should no longer exit.\n\nSo, try `Kernel.system()` in your `clockwork` process, instead of `Kernel.exec()`:\n\n``` ruby\nevery(6.hour, 'db_backup') do\n  if (Rails.env.production?)\n    Kernel.system \"backup perform --trigger db_backup --config_file config/backup.rb\"\n  end \nend\n```\n\nHope this helps!\n  Yeah you could also use the regular `uri` library and parse it, and split the `path` to get the database name. If anything I will be implementing it using standard libs to avoid adding more gem dependencies to Backup.\n  Been wanting to do this. Going to see what to name it seeing as Backup::CLI is already taken. Will probably go with Backup::Utility or something.\n\nThis would also make it testable seeing as when you load this file normally, it'll initialize the CLI immediately.\n Done: 9fb52f1be384aeccfc48dbb8b55b7450eb1874d0\n\n> Moved the Backup CLI in to it's own class file. Changed the Backup::CLI class in to a module, splitting it in to Backup::CLI::Helpers (which was previously known as Backup::CLI), and Backup::CLI::Utility, which is the new file that holds the Thor CLI utility.\n  Haven't used MongoDB since 1.8 so I'm not sure what a good solution to this problem would be. What happens when you omit the name variable? Does it dump all the databases? But what if you want to dump only a single database?\n Would replacing this:\n\n``` ruby\ndef mongo_shell\n  [utility(:mongo), database, credential_options, connectivity_options, ipv6].join(' ')\nend\n```\n\nwith this:\n\n``` ruby\ndef mongo_shell\n  [utility(:mongo), \"#{ host }:#{ port }#{ name ? \"/#{ name }\" : \"\" }\", credential_options, connectivity_options, ipv6].join(' ')\nend\n```\n\ndo the trick? Also, is this type of syntax compatible with previous versions of MongoDB (such as 1.8?) Seeing as it had the `--db` option, or did it support both syntaxes?\n\nCheers\n We would have to ask @tomash - I think he was the one that implemented the (un)lock feature because MongoDB didn't support it at that time. \n Do you think that rather than doing what we currently are here:  https://github.com/meskyanichi/backup/blob/develop/lib/backup/database/mongodb.rb#L146-172\n\nWe should be doing this instead?\n\n``` ruby\ndef mongo_shell\n  [utility(:mongo), \"#{ host }:#{ port }#{ name ? \"/#{ name }\" : \"\" }\", credential_options, connectivity_options, ipv6].join(' ')\nend\n\ndef lock_database\n  lock_command = <<-EOS\n    echo 'use #{ name }\n    db.runCommand({\"fsync\" : 1, \"lock\" : 1})' | #{ mongo_shell }\n  EOS\n\n  run(lock_command)\nend\n\ndef unlock_database\n  unlock_command = <<-EOS\n    echo 'use #{ name }\n    db.$cmd.sys.unlock.findOne()' | #{ mongo_shell }\n  EOS\n\n  run(unlock_command)\nend\n```\n\nNotice the `use #{ name }` instead of `use admin` and the way the mongo shell is created now. I think this kind of URI works in mongo <= 1.8.x as well because I recall getting such URI's from MongoHQ. The question is: should we be doing `use admin` or `use #{ name }` (where name = the name of the database to dump). We've been using `use admin` up until this point, isn't this maybe due to `\"fsync\" : 1, \"lock\" : 1` privileges that you use admin? I'm not sure cause I don't have a lot of MongoDB knowledge.\n @imanel ok - so the only thing that should probably happen is to remove the `--db` option and use a Mongo Protocol URI instead, for example something like this:\n\n```\nmongo flame.mongohq.com:12345/my_database --username my_user --password my_password --otheroptions\n```\n OK I have just pushed a commit that fixes it for 2.0 - I'm not entirely sure if it's backwards compatible with 1.8.x because when I tested both the previous and the new updated implementation, they both failed. Although I was connecting to MongoHQ.com and iirc they just updated their databases to 2.0.1, just like everyone else should. So worst case people will have to either stick with an older version of Backup, or people can upgrade Backup along with MongoDB -> 2.0.1. But it might be backwards compatible to 1.8.x. Most apps will probably sit on external services like MongoHQ, MongoLabs, MongoMachine, and will be auto-upgraded regardless.\n\nIf anyone is running 1.8.x and has the time to pull down the current HEAD to try it out, feel free to do so.\n\nThis was the commit: 545bd935c8e9666a2c2ab6dcff819c75564b4f1d\n  When a path doesn't exist for the archiver, it should return STDERR in an exception such as:\n\n```\n\n[2011/11/26 18:44:51][message] Performing backup for Description for test!\n[2011/11/26 18:44:51][message] Backup::Archive started packaging and archiving \"/path/to/a/file.rb\", \"/path/to/a/folder\".\n[2011/11/26 18:44:51][message] Backup started cleaning up the temporary files.\n===========================================================================\nException that got raised:\nBackup::Exception::CommandFailed - Failed to run \"tar\" on \"x86_64-darwin11.2.0\".\n\nExit code was:\n\n  256\n\nSTDERR was:\n\n  tar: /path/to/a/file.rb: Cannot stat: No such file or directory\n  tar: /path/to/a/folder: Cannot stat: No such file or directory\n  tar: Error exit delayed from previous errors.\n\n===========================================================================\n/Users/Michael/Desktop/backup/lib/backup/cli.rb:90:in `raise_if_command_failed!'\n/Users/Michael/Desktop/backup/lib/backup/cli.rb:30:in `run'\n/Users/Michael/Desktop/backup/lib/backup/archive.rb:53:in `perform!'\n/Users/Michael/Desktop/backup/lib/backup/model.rb:246:in `block in perform!'\n/Users/Michael/Desktop/backup/lib/backup/model.rb:246:in `each'\n/Users/Michael/Desktop/backup/lib/backup/model.rb:246:in `perform!'\n./bin/backup:136:in `block in perform'\n./bin/backup:115:in `each'\n./bin/backup:115:in `perform'\n/Users/Michael/.rvm/gems/ruby-1.9.3-rc1/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/Users/Michael/.rvm/gems/ruby-1.9.3-rc1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/Users/Michael/.rvm/gems/ruby-1.9.3-rc1/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/Users/Michael/.rvm/gems/ruby-1.9.3-rc1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n./bin/backup:311:in `<main>'\n===========================================================================\n\nYou are running Backup version \"3.0.19\" and Ruby version \"1.9.3 (patchlevel -1)\" on platform \"x86_64-darwin11.2.0\".\nIf you've setup a \"Notification\" in your configuration file, the above error will have been sent.\n```\n You'll need the latest gem (3.0.19) - this should be available: https://github.com/meskyanichi/backup/blob/master/lib/backup/cli.rb#L98-107 (initial version)\n\nThe develop branch is now pretty far ahead from master https://github.com/meskyanichi/backup/compare/master...develop so I'll probably be releasing 3.0.20 not too long from now. _61 changed files with 1,199 additions and 341 deletions._ So in 3.0.20 it'll definitely be available with good console output.\n No problem!\n  So basically what you're saying is, change:\n\n``` ruby\ndef connection\n  Fog::Storage.new(\n    :provider           => provider,\n    :rackspace_username => username,\n    :rackspace_api_key  => api_key,\n    :rackspace_auth_url => auth_url\n  )\nend\n```\n\nto\n\n``` ruby\ndef connection\n  Fog::Storage.new(\n    :provider             => provider,\n    :rackspace_username   => username,\n    :rackspace_api_key    => api_key,\n    :rackspace_auth_url   => auth_url,\n    :rackspace_servicenet => true\n  )\nend\n```\n\nAnd it'll transfer via LAN?\n ok. I'll have it default to **false** and the user can then pass in **true** via configuration.\n\nThanks for letting me know!\n Done: 7ad5f288309fffc120445cbde4b6cf421e162ab4\n\n> Added support for Rackspace ServiceNet.\n  Might add this eventually, but it's not on my current to-do list. Will keep issue open.\n  I have just committed changes to this behavior: 6b7cdf94a00c1b36fa5dac42d994ad165422ac2f\n\nAll rescue blocks have been removed from all `transfer!` and `remove!` methods, ensuring that exceptions are raised when something goes wrong during either of these processes. Backtrace is always logged in this case, since exceptions are always logged (including backtrace) and notifiers will now be triggered.\n\nCheers!\n  I'm not sure how much this would impact the whole backup process at this time. I recall implementing it using symbols explicitly to constrain people from using things like spaces and other things since it acts as an identifier and needs to be triggered as such from the CLI. Things like:\n\n```\nbackup perform -t \"Michael's Backup\"\n```\n\nWould prefer to force the use of a simplified versions like:\n\n```\nbackup perform -t michaels_backup\n```\n  hi @fjuan\n\nI'm not sure what SVNSync is/does or why you would want to use it over RSync or anything else Backup currently provides. I tried looking up some info briefly but it still isn't really clear to me. Could you provide some use cases/scenarios where SVNSync would be better than what backup currently provides/supports?\n\nThanks!\n  Changing `instance_eval` to `load` causes the following error to be raised:\n\n```\n\n/Users/Michael/Desktop/backup/lib/backup/finder.rb:76:in `instance_eval': uninitialized constant Local (NameError)\n    from /Users/Michael/Desktop/backup/lib/backup/model.rb:124:in `instance_eval'\n    from /Users/Michael/Desktop/backup/lib/backup/model.rb:124:in `initialize'\n    from /Users/Michael/Backup/models/test.rb:9:in `new'\n    from /Users/Michael/Backup/models/test.rb:9:in `<top (required)>'\n    from (eval):31:in `load'\n    from (eval):31:in `block in load_config!'\n    from (eval):29:in `each'\n    from (eval):29:in `load_config!'\n    from /Users/Michael/Desktop/backup/lib/backup/finder.rb:76:in `instance_eval'\n    from /Users/Michael/Desktop/backup/lib/backup/finder.rb:76:in `load_config!'\n    from /Users/Michael/Desktop/backup/lib/backup/finder.rb:24:in `find'\n    from ./bin/backup:134:in `block in perform'\n    from ./bin/backup:118:in `each'\n    from ./bin/backup:118:in `perform'\n    from /Users/Michael/.rvm/gems/ruby-1.9.3-rc1/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n    from /Users/Michael/.rvm/gems/ruby-1.9.3-rc1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n    from /Users/Michael/.rvm/gems/ruby-1.9.3-rc1/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n    from /Users/Michael/.rvm/gems/ruby-1.9.3-rc1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n    from ./bin/backup:311:in `<main>'\n```\n\nWasn't sure how to get `load()` to work without getting this error. Any idea's? This applies to two locations, one is in the Finder class which you pointed out, and the other is in the new `config.rb` that Backup generates as of the next gem release.  https://github.com/meskyanichi/backup/blob/develop/lib/templates/config#L30\n\nCheers!\n Didn't seem to do the trick either.\n Confirmed that it works, and it's been patched: 1a4846456a704cdf45fe16f691c4eef7331312cc Thanks!\n  Looks good. Will probably merge it in soon. Thanks!\n Merged it in. I personally don't have much experience with HipChat, only used it once.\n\n@jessedearing any chance you could update the Notifiers' Wiki page and add the HipChat notifier template/additional information?\n\nhttps://github.com/meskyanichi/backup/wiki/Notifiers\n\nCheers!\n  Maybe Dropbox updated their API, will need to check that out.\n @jonthewayne I just tried to do this myself and I am not having any issues.\n\nAre you filling in the api_key and secret_key provided by dropbox, and does the authorization say it is successful?\n\n``` ruby\nstore_with Dropbox do |db|\n  db.api_key    = 'my_api_key'\n  db.api_secret = 'my_api_secret'\n  db.path       = '/path/to/my/backups'\n  db.keep       = 25\n  db.timeout    = 300\nend\n```\n\nThis just works for me after manually authorizing by visiting the link provided by Backup for Dropbox and hitting \"Enter\" after successfully authorizing.\n Actually there might've been a bug that hasn't been updated yet, or the dependencies weren't updated yet. What you could try is to get the latest version from backup @ develop:\n\n```\ngit clone git://github.com/meskyanichi/backup.git\ncd backup\ngit checkout develop\n./bin/backup perform -t my_backup\n```\n\nSee if that helps. It has been a long time since the last gem release, and the code base has been changed A LOT so the fix might've not yet been incorporated in to the new gem.\n\nI am going to release a new version that contains every commit up until now pretty soon after I finish the last few issues in the issue tracker here that I find are necessary to fix before I roll out a new gem. Though, Backup 3.0.20 should be out in a matter of days.\n Sounds like a plan. And thanks! :)\n  Hey, I actually just switched dependencies from `popen4` to `POpen4` in one of my recent comments.\n\nReasons:\n- 100% Ruby implementation instead of partially C-based\n- Would allow us to support JRuby/Rubinius in the future if needed\n- Backup is being added to the FreeBSD ports tree and needed this change in order to avoid conflict\n- POpen4 is more up to date than popen4\n\nSo once Backup 3.0.20 hits you'll get POpen4 installed instead of the previous popen4.\n\nCheers!\nMichael\n Ahh you're probably right in that case. I had both gems installed so it would work in any case. I'll try to get rid of all the popen4 gems and re-install only the one that's required and see what happens. Thanks a lot for pointing that out!\n Does the `gem` method also immediately require, or does it just set the target lib to require instead of the default?\n Thanks, now using the lower-case solution as it seems to work!\n  Hey, what backslashes are exactly missing? All tests are passing 100% here on all ruby versions. It might be that it changed since I applied some changes to the archiver recently to fix paths with `File.expand_path` in `archive.rb`\n\n``` ruby\n\n    ##\n    # Adds new paths to the @paths instance variable array\n    def add(path)\n      @paths << File.expand_path(path)\n    end\n\n    ##\n    # Adds new paths to the @excludes instance variable array\n    def exclude(path)\n      @excludes << File.expand_path(path)\n    end\n```\n\nThis always ensures the absolute path is provided even when providing a relative one, which appears to have been failing for people. Switching to `File.expand_path(\"~/Desktop\")` would change it to `/Users/Michael/Desktop` and fix the path issue.\n\nCheers,\nMichael\n  Good catch! Must've been when we switched to POpen4 that I forgot about the response check, seeing as STDOUT/STDERR only show up during exceptions.\n\nThanks!\n  So basically if HOME isn't set, it results in an empty string instead of nil?\n Yeah I just fixed the issue with https://github.com/meskyanichi/backup/commit/dae99930ad816348aab2a807d32c710b03ba2fb8\n  So basically you install the Backup gem on the Backup server itself, rather than on the production box? And then you pull the filesystem data from the production box in to the Backup box?\n  Right, the credentials are stored in YAML at the moment and will always be read out instead of using the configuration. Have considered **not** storing credentials in YAML and always relying on the credentials from the config.rb.\n\nI am currently doing a huge overhaul on the cycling process which involves a splitter being implement (which splits files in to multiple chunks so you can upload backups of unlimited sizes to for example Amazon S3), so it will likely conflict a lot with your commits. Could you summarize what you've done these commits? I would assume it has something to do with loading the config.rb rather than reading from YAML (except for reading out the storage location etc).\n Hi @burns,\n\nI took some time today to properly take a look at your commit. I'm liking the implementation. From what I can see the procedure is now as follows:\n- If a new backup is made (not coming from YAML), it will assign defaults from `pre_configure` and `post_configure` for each storage individually. (and in between these invocations it will evaluate the configuration block from the backup config file)\n- If a backup config is loaded from YAML, it will again run the pre_configure block to assign instance variable which weren't set yet (although they should've been), then it will evaluate the backup config file, thus, overwriting the configuration where possible from the YAML config block (such as user/pass/port/ip etc) to ensure fresh data is loaded every time a backup is being cycled, which will avoid issues with authentication when credentials are updated.\n\nAre the above statements correct? One thing that I was wondering is whether it's a problem when someone updates the `@path` - Backup would transfer files to the new location, but try to delete old files from the new location as well. This means the user must either move all the backups to the new location, or Backup should not overwrite the `@path` variable. Though, I think the former applies since if people want to change backup locations then they should probably also transfer the old backup files to the new location and don't leave everything except new backups lying around on the old location.\n\nWhat are your thoughts?\nThanks, I would probably like to merge this in, not sure how much it would conflict with the current develop @ head. I finished the major overhaul I mentioned in the previous comment so if the conflicts are minimal that would be great.\n\nCheers!\nMichael\n @burns thanks!\n\nAs it stands now, if backup cannot remove a file from the given `@path` it will raise an exception, notifying the user that it could not remove the file at the specified path. This should be enough to inform the user what the deal is in my opinion and what the problem is.\n\nThanks for rebasing, I will have a look at it and see if I can get it merged in now. I would like to have this applied to Backup 3.0.20 which I'll be releasing soon. There are a few pull requests open that I think I want to pull in as well for 3.0.20 and perhaps [this](https://github.com/meskyanichi/backup/issues/208) needs to be fixed as well, although I'm not sure how yet, it involves cycling so maybe you have any insight?\n\nCheers!\n The merge went cleanly, i just `git cherry-pick`'d the commit. Two tests were failing, but they weren't a problem in production, it was simply the spec calling a private method `cycle!` so I use `send(:cycle!)` now.\n\nI forgot to ask about this part:\n\n``` ruby\n## TODO: keep it from even showing up in the YAML file?\n# objects.map! do |obj|\n#   obj.send(:remove_instance_variable, :@configure_block); obj\n# end\nobjects.map! {|obj| obj.configure_block = nil; obj }\n```\n\nWe might as well get rid of the instance variable since it'll always just write `nil` to the YAML file in this case, so I think it would be fine if did this?\n\n``` ruby\nobjects.each do |object|\n  object.send(:remove_instance_variable, :@configure_block)\nend\n```\n\nAny particular reason you used `map!()` by the way? Seeing as you're only returning the object itself every time, should be able to use `each()` instead I think.\n\nI will go ahead and test this myself on my test server and see how it goes. Let me know what you think about my above questions. Will get back to you after I test this myself.\n\nCheers\n Thanks. Yes, I initially thought of actually clearing out only the credentials, but since I'm merging in your commit everything is being reloaded meaning that the only applicable attribute is going to be the filename I think.\n\nIf that's the case, and everything except the filename is stored, then something could be done in the Base Storage class to only persist the filename attribute and ignore the rest, that way we probably don't have to do anything in all the Storage classes. That's just my quick take on it, without looking at the code, or thinking about it too much. Would have to confirm it.\n I have confirmed that your patch works (manually tested with splitting enabled and credential changes) and have merged it in to the develop branch.\n\nYour commit: 62eb2fdddc18bbf07cbe5756e13ab88777b4b53a\nMy small commit that fixes the storage base specs: f50856a48e03a1fb6bd6d16c8e765f1ad834a2be\n\n---\n\nNext up would be finding a solution to that issue you referenced. And also we'll consider **not** persisting all data other than the backup file name to YAML. The main thing I wonder is how we can keep it backwards compatible while keeping the code-base clean. Then again, it doesn't really matter that much that more data is stored, also seeing as that issue #208 might require some unique identifier (which is also additional data that needs to be persisted) in order to allow for multiple storage locations with the same storage adapter.\n\nI think that this ^ is the last \"hard\" part to figure out how do to well, if you can call it \"hard\" at all. Just need a good solution and we should be good to finally release 3.0.20. (although there are some open pull requests I'm still looking at like the SVNSyncer which is an independent component from the main process. It's probably a simple merge/wiki update and should be fine, but I don't know what an SVNSyncer actually is so I'll have to check that out.)\n I just remembered that chunking also persists data (an Array) now:\n\n``` yml\n- !ruby/object:Backup::Storage::FTP\n  username: Michael\n  password: ...\n  ip: 123.456.78.90\n  port: 21\n  path: backups/\n  passive_mode: false\n  keep: 5\n  time: 2011.11.30.09.02.27\n  chunk_suffixes: []\n  filename: 2011.11.30.09.02.27.fc.tar\n```\n\nIt might be easier to just ignore it as it doesn't cause any harm since we're overwriting configuration that users can set anyway so the filename, chunk_suffixes, and such that Backup sets will stay intact. It might also not be a bad idea to have such detail in YAML - you could perhaps call it a \"registered transaction\" with all it's information so if someone for whatever reason wants to look up what the settings were previously or something, they can.\n\nI think fixing issue #208 has higher priority as that actually causes unexpected behavior, while this doesn't matter with your commit in place.\n  Unfortunately you can't since I'm sure Heroku's platform doesn't have mongodb installed. If you're using MongoHQ or other 3rd party hosted mongodb's then you'll have to spin up a separate little VPS (and install the latest mongodb on it) dedicated to running MongoDB backups.\n  Not at this time. You'll have to extract the options from it. It'll probably look something like this:\n\n``` ruby\nrequire \"uri\"\nuri = URI(config[RAILS_ENV][\"uri\"])\n\ndatabase MongoDB do |db|\n  db.name               = uri.path.split(\"/\").last\n  db.username           = uri.user\n  db.password           = uri.password\n  db.host               = uri.host\n  db.port               = uri.port\n  db.lock               = true\nend\n```\n\nI might implement support for URI's in the future, but for now you'll have to go about doing it that way. Also I am assuming MongoHQ here, but I noticed you're using MongoLabs. This is what a URI in MongoHQ looks like: `mongodb://<user>:<password>@flame.mongohq.com:27097/mydatabasename` which is why I simply split on the slash from the `uri.path` with `split(\"/\").last` and get the last entry which is `mydatabasename`. If your URI differs from MongoHQ then you might have to extract the database name in a different way.\n  If you have an SSH key in place then it should ignore the password field.\n  What version of REE are you using?\n Are you using some kind of gem dependency management tool, such as RVM or RBenv? Perhaps when you actually run the backup utility it runs it under a different ruby version.\n For some reason I cannot get REE installed on my machine. However, I see no problems on my end on 1.8.7 1.9.2 and 1.9.3 - during runtime, are you sure that the correct ruby version is loaded (that runs the backup utility)? Because it uses the system default.\n  Interesting. It's probably because you're using two SFTP storages and the files get stored to a YAML both as **SFTP** - I hadn't thought of this scenario. I'll have to see what I can do about it. Thanks for informing me!\n Still looking in to this. Will probably have to make some sort of unique identifier/key based on all the data passed in (username, ip, port, path, keep) in order to create a difference between the two SFTP (and other storage) objects. Backup currently sees it as the same thing. Will try and see if I can figure out a good solution to this.\n  Thanks, will fix this soon!\n Fixed by commit d8949fb17fa690bc8d22cf714da50fc7eac1013a\n\n> Get rid of all debug options for Backup::Syncer::RSync. Particularly the -P option caused file transfer issues.\n  With the #prepare! method removed out of the #initialize method, this error would not occur, am I right?\n\n``` ruby\n##\n# Defines the @dump_path and ensures it exists by creating it\ndef prepare!\n  @dump_path = File.join(TMP_PATH, TRIGGER, self.class.name.split('::').last)\n  mkdir(dump_path)\nend\n```\n\nThis is the only thing it does, basically assigns the `@dump_path` and ensures the directory exists. Moving it to the top of the #perform! method seems like a valid solution (and a better approach) seeing as the dump path isn't necessary unless there is actually something going to be dumped, which of course only happens once #perform! is invoked.\n Working on this issue now.\n Fixed by commit 48ee409a36acafebf1233fa34a22ece1adc19c55\n\n> Updated all the Database classes, and the Archive class. Moved the #prepare! and #log! methods from #initialize and #perform! in to the Backup::Database::Base class in the #perform! super-method. Now, instead of running #prepare! and #log! from within the child (Database) class, we invoke it from the Backup::Database::Base class by calling #super in the child (Database) class's #perform! method. This cleans up / refactors / abstracts code, and also fixes the WILDCARD triggering issue.\n @joegoggins you should be able to reference it with\n\n``` ruby\ngem \"backup\", :git => \"git://github.com/meskyanichi/backup.git\", :branch => \"develop\"\n```\n\nThough it's probably not going to take long before I release a new gem, so keep a look out. ;)\n  Might be useful. Not sure how easy this is to implement (or even whether it's performant enough to include it). I assume you're referring to \"remote storages\" to see whether there are any files in for example your S3 bucket, but not locally. You would have to do a lot of API requests to get such information I think, or if they have a method that returns an array of objects for a given path/key. But it would have to work with all storage locations, and each storage class needs it's own implementation to retrieve such information.\n\nIs that what you're referring to or am i misunderstanding something?\n  Good idea! I don't think I knew that `File.expand_path` would convert `~` in to the proper path. This should be implemented, it's a lot more readable and solid.\n Applied in commit 57cc6b3bf52fec5723547852edcdb8fc4ba4e9fc\n\n> Ensure absolute (full path) using File.expand_path(path) rather than using relative paths and \" ~ \" for $HOME. This provides more flexibility in the backup configuration file, improves the readability of the code and makes the overall implementation more solid and the generated paths more consistent.\n\nThanks again for the great suggestions. I really like `File.expand_path` a lot more than using the regular expressions, especially since it converts from relative paths to full (absolute) paths.\n  @maxmeyer any idea why such info isn't being displayed in the STOUT/STDERR? Haven't looked at it myself yet but it seems to be causing a lot of confusion since no real feedback is being returned.\n Oh right. Yeah I totally forgot about that! That's likely what's causing the issue. Probably going to have to remove that. I used it to silence the noise during the backup process, but I guess that using popen4 it would already be silenced (not sure) and only display STDERR/STDOUT when an exception is raised.\n\nGoing to check it out soon. I've been working on a separate branch which I want to finish first before I start working in the develop branch myself again. It's a pretty large update which affects all the storage objects as it splits all the backup files in to multiple chunks (the size of the chunks is configurable by you) so that if you're pushing to remote services like S3 which have a 5gb file limit, you could simply specify in the backup config file that you want Backup to split it in to chunks of 5gb if the file size exceeds 5gb. So a file of 15gb would be split into 3 files and uploaded one-by-one. I'll probably be finished with that fairly soon, and once I am, I'll get back to fixing stuff like this.\n\nThanks for pointing it out!\n splitter branch I'm currently finishing up first:\n\nhttps://github.com/meskyanichi/backup/compare/f4c79e05afe9c21686af4e7d3faeefb523ab74ae...3a0e2f2021e06166e5dd406a22f758505ef8980d\n Nice. Thanks for letting me know. I think it had something to do with `tar: blah blah trailing slashes` | but that isn't the case anymore?\n Fixed by commit e0de11f68a71a074d40391ddf4dcfdd3b3dc2bad\n\n> Removed `2> /dev/null` for the `tar` utility since we're using the POpen4 library now. STDOUT is already being silenced from the Backup::Logger thanks to POpen4. `2> /dev/null` caused the STDERR to be silenced when an exception occurred, so users had a hard time figuring out what the problem was. This has now been fixed.\n  Looking good! Merging it in now. Would you mind updating the Notifiers wiki page with Prowl?\n\nhttps://github.com/meskyanichi/backup/wiki/Notifiers\n\nThanks!\n  Are you using 2.2.15 and does it still work with that version?\n  Fixed in commit d5519b83997839b550a8f1db84627e804d33fb0e\n  Cheers, thanks for this!\n  Merged your pull request, thanks!\n  Are you still experiencing issues with archiving whole directories?\n  It could be done by mimicking the `perform` method in this file: https://github.com/meskyanichi/backup/blob/develop/bin/backup\n\nThere's not a _very_ elegant way of going about doing it because the most initialization logic resides inside the backup executable file. But it can be done.\n  Nope, `db.lock` is not necessary for PostgreSQL. The `pg_dump` utility we use automatically ensures a safe dump is performed (I believe it always locks). `db.lock` is only an option for MongoDB where it by default isn't locked since MongoDB's dump utility didn't have anything that did it out of the box, so we rolled our own.\n\nhttps://github.com/meskyanichi/backup/wiki/Databases for more info on available options for each database.\n  Will consider removing the write to /dev/null in favor of providing better feedback.\n Fixed by commit e0de11f68a71a074d40391ddf4dcfdd3b3dc2bad\n\n> Removed `2> /dev/null` for the `tar` utility since we're using the POpen4 library now. STDOUT is already being silenced from the Backup::Logger thanks to POpen4. `2> /dev/null` caused the STDERR to be silenced when an exception occurred, so users had a hard time figuring out what the problem was. This has now been fixed.\n  Set up a separate branch: [splitter](https://github.com/meskyanichi/backup/tree/splitter) for this and will investigate the implementation from there.\n I have a few initial questions.\n1. How do I enable the Splitting feature?\n2. How do I configure the chunk size?\n3. Assume you set up 3 different storage locations for the same backup (S3, CF, and Dropbox). Does it re-split it 3 times?\n\nThe implementation overal looks OK, though I'm not sure about putting Splitting logic in the Storage logic. Of course, using a `chuncks` method and iterating through that is good, and greatly simplifies the transferring implementation. But the actual Splitting I think should be it's own stage.\n\nI was thinking something like:\n\n``` ruby\nBackup::Model.new(.....) do\n  split_into_chunks_of 1000 # megabytes\n\n  ... storages, archives, compressors, encryptors, etc here ...\nend\n```\n\nBut, if you were using Dropbox, you could do something like:\n\n``` ruby\nBackup::Model.new(.....) do\n  split_into_chunks_of 300 # megabytes\n\n  ... storages, archives, compressors, encryptors, etc here ...\nend\n```\n @m4 thanks for the info! (/cc @tomash) I'm re-implementing the whole splitter in a separate branch (locally for now) using parts of your code and idea's. This implementation will look something like this in the DSL:\n\n``` ruby\nBackup::Model.new(:my_backup, 'My Backup') do\n\n  split_into_chunks_of 1 # in megabytes\n\n  archive :my_archive do |archive|\n    archive.add \"/Users/Michael/Desktop/SomeFolder\"\n  end\n\n  store_with S3 do |s3|\n    s3.access_key_id      = '...'\n    s3.secret_access_key  = '...'\n    s3.region             = 'us-east-1'\n    s3.bucket             = '...'\n    s3.path               = '/backups'\n    s3.keep               = 3\n  end\n\nend\n```\n\nSo using `split_into_chunks_of` takes a single argument, an integer representing the chunk size. This phase will occur right before the actual storage phase:\n\n``` ruby\ndatabases.each   { |d| d.perform! }\narchives.each    { |a| a.perform! }\npackage!\ncompressors.each { |c| c.perform! }\nencryptors.each  { |e| e.perform! }\nsplit!\nstorages.each    { |s| s.perform! }\nclean!\n```\n\nSo, assuming you have a folder (like in the above example) which is 5 megabytes, this would be the output in the console when running the backup:\n\n``` shell\n[2011/10/21 22:16:09][message] Performing backup for My Backup!\n[2011/10/21 22:16:09][message] Backup::Archive started packaging and archiving \"/Users/Michael/Desktop/SomeFolder\".\n[2011/10/21 22:16:09][message] Backup started packaging everything to a single archive file.\n[2011/10/21 22:16:09][message] Backup started splitting the packaged archive in to chunks of 1 megabytes.\n[2011/10/21 22:44:44][message] Backup::Storage::S3 started transferring '2011.10.21.22.44.43.my_backup.tar-aa' to bucket 'mybucket'\n[2011/10/21 22:44:46][message] Backup::Storage::S3 started transferring '2011.10.21.22.44.43.my_backup.tar-ab' to bucket 'mybucket'\n[2011/10/21 22:44:48][message] Backup::Storage::S3 started transferring '2011.10.21.22.44.43.my_backup.tar-ac' to bucket 'mybucket'\n[2011/10/21 22:44:51][message] Backup::Storage::S3 started transferring '2011.10.21.22.44.43.my_backup.tar-ad' to bucket 'mybucket'\n[2011/10/21 22:44:53][message] Backup::Storage::S3 started transferring '2011.10.21.22.44.43.my_backup.tar-ae' to bucket 'mybucket'\n[2011/10/21 22:44:55][message] Backup::Storage::S3 started removing (cycling) \"2011.10.21.22.42.32.my_backup.tar\".\n[2011/10/21 22:44:56][message] Backup::Storage::S3 started removing '2011.10.21.22.42.32.my_backup.tar-aa' from bucket 'mybucket'\n[2011/10/21 22:44:56][message] Backup::Storage::S3 started removing '2011.10.21.22.42.32.my_backup.tar-ab' from bucket 'mybucket'\n[2011/10/21 22:44:56][message] Backup::Storage::S3 started removing '2011.10.21.22.42.32.my_backup.tar-ac' from bucket 'mybucket'\n[2011/10/21 22:44:57][message] Backup::Storage::S3 started removing '2011.10.21.22.42.32.my_backup.tar-ad' from bucket 'mybucket'\n[2011/10/21 22:44:57][message] Backup::Storage::S3 started removing '2011.10.21.22.42.32.my_backup.tar-ae' from bucket 'mybucket'\n[2011/10/21 22:16:24][message] Backup started cleaning up the temporary files.\n```\n\nAs you can see I've ended up using alphabetical suffixes, rather than numerical. I did this because OSX doens't support the `-d` option. So in order to ensure (hopefully) that this works cross-platform, im going with alphabetical suffixes. Also, cycling \"just works\" as well.\n\nI've managed to get all this going now with a very simple Splitter class, and all splitting logic is removed from the storage layer. So splitting only happens once per backup run, rather than per storage object.\n\nWhile building this I've also found a bunch of things I'll be cleaning up as well, it'll make maintaining and implementing new storage methods even easier, and it'll all work with splitting out of the box via a simple API. Not sure when I'll have it out. I got it working on S3, still working on fixing specs that broke when i scrambled the internals, will be fixing that first. Then I'll go ahead and implement support for the other storage objects and do some more refactoring/cleaning up where needed (trying to make it as abstract and re-usable as possible). \n\nThe only downside is that it's probably not going to backwards compatible with previous versions of Backup (only the cycling part, the `config.rb` isn't affected and will still work unchanged. I'll let you know when I push this branch to GitHub so you can check out the code-base and see what you think, maybe you can find any pointers or things that i missed.\n\nCheers!\n\nNote, this is what the current `Backup::Splitter` looks like, very concise!\n\n``` ruby\n# encoding: utf-8\n\nmodule Backup\n  class Splitter\n    include Backup::CLI\n\n    ##\n    # Separates the end of the file from the chunk extension name\n    SUFFIX_SEPARATOR = \"-\"\n\n    ##\n    # Holds an instance of the current Backup model\n    attr_accessor :model\n\n    ##\n    # Instantiates a new instance of Backup::Splitter and takes\n    # a Backup model as an argument\n    def initialize(model)\n      @model = model\n    end\n\n    ##\n    # Splits the file in multiple chunks if necessary, and it's necessary\n    # when the requested chunk size is smaller than the actual backup file\n    def split!\n      return unless model.chunk_size.is_a?(Integer)\n\n      if File.size(model.file) > bytes_representation_of(model.chunk_size)\n        Logger.message \"Backup started splitting the packaged archive in to chunks of #{ model.chunk_size } megabytes.\"\n        run(\"#{ utility(\"split\") } -b #{ model.chunk_size }m '#{ model.file }' '#{ model.file + SUFFIX_SEPARATOR }'\")\n        Backup::Model.chunk_suffixes = chunk_suffixes\n      end\n    end\n\n  private\n\n    ##\n    # Returns an array of suffixes for each chunk.\n    # For example: [aa, ab, ac, ad, ae] - Chunk suffixes are sorted on alphabetical order\n    def chunk_suffixes\n      chunks.map do |chunk|\n        File.extname(chunk).split(\"-\").last\n      end.sort\n    end\n\n    ##\n    # Returns an array of full paths to the backup chunks.\n    # Chunks aresorted on alphabetical order\n    def chunks\n      Dir[\"#{model.file}-*\"].sort\n    end\n\n    ##\n    # Converts the provided megabytes to a bytes representation\n    def bytes_representation_of(megabytes)\n      megabytes * 1024 * 1024\n    end\n\n  end\nend\n```\n @m4 @tomash\n\nUpdate:\n\nI just finished updating all the storage types and tests and it's 100% passing now. I've only storage type I manually tested is the S3 Storage, but it might work with all storages already. I'll have to go and manually test the rest tomorrow probably  and see if everything still works and is basically able to split and transfer/remove (cycle). It's looking good so hopefully this'll be merge in to **develop** the coming week.\n\n[Check out the commit here](https://github.com/meskyanichi/backup/commit/43aa2d3de4c6f53cfeca71c3b9381fd694319190) Please let me know what you guys think and any feedback/suggestions are welcome!\n Thanks. Haven't gotten around to manually tested 100% of the functionality just yet. Will be working on it soon. I'm going to also run through the code and comments to double check that everything i stated is correct since I had to change a few things during the implementation but probably forgot to update comments. If there's one thing that really sucks is that the comments are providing inaccurate information and you're assuming it's correct. :P brings up a lot of confusion.\n\nI'll post updates here whenever I have them. cheers!\n Amazon S3 and Rackspace Cloud files appear to work. Dropbox was completely broken due the way they upload and delete files. But I've already fixed all of that here. https://github.com/meskyanichi/backup/commit/f341e24390cb486471c4dba54f7a81ac9d88852e\n\nGoing to check out Ninefold. Never used it so I'll have to see how that works. Was a contribution. :)\n Had some improvements to do for Ninefold storage. It semi-worked but had an issue where it tried to remove a directory which wasn't empty (which raises an exception) when there were still chunks present. Ninefold support has now been fixed: https://github.com/meskyanichi/backup/commit/3a0e2f2021e06166e5dd406a22f758505ef8980d\n Another fairly large commit that fixes (and finishes) Backup::Splitter integration with `Backup::Storage::[FTP|SFTP|SCP|RSync|Local]`.\n\nhttps://github.com/meskyanichi/backup/commit/ca4d7c58a4ee603da1f42ce30f8cbec8fbfef2ec\n\nBoth automatically and manually tested and all seem to be working now.\n\n(Note: I'm considering getting rid of the Storage::RSync's `@local` option and tell users to just use Storage::Local (which was built for local storage instead).\n  This is odd. I wonder what the issue could be. I'm afraid it is coming from Fog but I'm not sure. Maybe you could open an issue over at the Fog git repository and refer to this issue and ask Wesley whether he knows why this issue occurs. I'm assuming it happens on files larger than 100mb? It of course should not happen at all since you can transfer up to 5gb. Maybe it's not streaming but instead it's buffering it all and trying to send it afterwards, in which case you might be running out of memory. Could you check to see whether your memory usage increases dramatically when performing your S3 backup? Fog does support streaming to S3 and CF as far as I know, for a long time already but maybe it's not activated by default?\n  Thanks! I hadn't thought of inheritance, your example seems like an interesting use case. I will leave this pull request open and consider such functionality.\n  Good catch! Pulling it in!\n  Hi Marcelo, sorry for the late response. Currently working on getting almost every requested and important feature implemented and every bug fixed.\n\nBasically what you require is a way to RSync something on your local file system am I right?\n Thanks @artbikes | I am going to get rid of the `rsync.local = true` feature since it was a temporary solution and I rather have consistent solutions. So either use the method you mentioned or use the Local storage method.\n  Deg,\n\nThanks for pointing that out. Also, thanks for the suggestions. I think that providing an array of exit codes to ignore is the right solution to this problem, simply because there might be other utilities (existing, and future) that might behave the same way and might need some exit-code whitelisting.\n\nFeel free to set together a pull request if you have time/want to do it. Otherwise, once I have some time I'll take a look at it.\n\nCheers!\nMichael\n Sounds good, keep me posted!\n @deg any info on when you can release it? If not, then I don't mind implementing it myself. Finishing up the last bunch of \"important to implement\" features and fixed crucial bugs. I'd like to get a whitelist array in for the next release as well with the exit codes to ignore as well.\n\nThanks!\n @deg I went ahead and implemented it myself as I was doing some basic householding in the app in general. Started out with some basic snippets and turned out the implemented was fairly simple so I went ahead and did it.\n\nThis is what I have now:\n\n``` ruby\n\n# encoding: utf-8\n\nmodule Backup\n  module CLI\n\n    ##\n    # Runs a given command in an isolated (sub) process using POpen4.\n    # The STDOUT, STDERR and the returned exit code of the utility will be stored in the process_data Hash.\n    #\n    # If a command returns an exit code other than 0, an exception will raise and the backup process will abort.\n    # Some utilities return exit codes other than 0 which aren't an issue in Backup's context. If this is the case,\n    # you can pass in an array of exit codes to ignore (whitelist), for example:\n    #\n    #   run(\"tar -cf /output.tar /some/folder\", :ignore_exit_codes => [1])\n    #\n    # So if the `tar` utility returns in this case 1, Backup will consider it an acceptable return code.\n    #\n    # Note: Exit code 0 is always automatically added to the :ignore_exit_codes array, regardless of whether you specify an\n    #       array to ignore or not.\n    def run(command, options = {})\n      command.gsub!(/^\\s+/, \"\")\n\n      process_data                     = Hash.new\n      pid, stdin, stdout, stderr       = Open4::popen4(command)\n      ignored, process_data[:status]   = Process::waitpid2(pid)\n      process_data[:stdout]            = stdout.read\n      process_data[:stderr]            = stderr.read\n      process_data[:ignore_exit_codes] = ((options[:ignore_exit_codes] || Array.new) << 0).uniq\n\n      raise_if_command_failed!(command_name(command), process_data)\n    end\n\n    ##\n    # Wrapper method for FileUtils.mkdir_p to create directories\n    # through a ruby method. This helps with test coverage and\n    # improves readability\n    def mkdir(path)\n      FileUtils.mkdir_p(path)\n    end\n\n    ##\n    # Wrapper for the FileUtils.rm_rf to remove files and folders\n    # through a ruby method. This helps with test coverage and\n    # improves readability\n    def rm(path)\n      FileUtils.rm_rf(path)\n    end\n\n    ##\n    # Tries to find the full path of the specified utility. If the full\n    # path is found, it'll return that. Otherwise it'll just return the\n    # name of the utility. If the 'utility_path' is defined, it'll check\n    # to see if it isn't an empty string, and if it isn't, it'll go ahead and\n    # always use that path rather than auto-detecting it\n    def utility(name)\n      if respond_to?(:utility_path)\n        if utility_path.is_a?(String) and not utility_path.empty?\n          return utility_path\n        end\n      end\n\n      if path = %x[which #{name}].chomp and not path.empty?\n        return path\n      end\n      name\n    end\n\n    ##\n    # Returns the name of the command\n    def command_name(command)\n      command.slice(0, command.index(/\\s/)).split('/')[-1]\n    end\n\n    ##\n    # Inspects the exit code returned from the POpen4 child process. If the exit code isn't listed\n    # in the process_data[:ignore_exit_codes] array, an exception will be raised, aborting the backup process.\n    #\n    # Information regarding the error ( EXIT CODE and STDERR ) will be returned to the shell so the user can\n    # investigate the issue.\n    #\n    # The \"Exception::CommandFailed\" exception will be raised.\n    def raise_if_command_failed!(utility, process_data)\n      unless process_data[:ignore_exit_codes].include?(process_data[:status].to_i)\n        exception_string =  \"Failed to run \\\"#{ utility }\\\" on \\\"#{ RUBY_PLATFORM }\\\".\\n\\n\" +\n                            \"Exit code was:\\n\\n\\s\\s#{ process_data[:status].to_i }\\n\\n\"\n        exception_string << \"STDOUT was:\\n\\n\\s\\s#{ process_data[:stdout].gsub(\"\\n\", \"\\n\\s\\s\") }\" unless process_data[:stdout].empty?\n        exception_string << \"STDERR was:\\n\\n\\s\\s#{ process_data[:stderr].gsub(\"\\n\", \"\\n\\s\\s\") }\" unless process_data[:stderr].empty?\n\n        raise Exception::CommandFailed, exception_string\n      end\n    end\n\n  end\nend\n```\n\nAlso, what exit codes should be ignored for the archiver's `tar` operation? `[0, 1]`? I assume it does not corrupt the archive if files on the filesystem changed (or added/removed) during the `tar` archiving process? Am I right to say that the exit(1) code only implies that it's not an exact copy anymore since there were changes to the file system, but the archive was properly put together?\n\nThanks!\n\nNote: I also got rid of the old CommandNotFound exception since the CommandFailed exception we're already using already picks that up when trying to run a command that doesn't exist, since that'd return a non-0 error code from the `sh` utility.\n\nCheers\n Whoops! Sorry David! It's cause @maxmeyer ended with \"deg\" I guess I automatically assumed his username was **deg** :) my bad!\n @maxmeyer I just tried to add files during the `tar -cf` and it does indeed return a message (likely error code 1) but the archive does indeed still extract just fine (On Linux). Then i tried to do the same on OSX and it just works, and doesn't even display an error message (so i assume it exits with 0).\n\nAlso, I'm pretty sure you want to keep archiving even if new files get added or removed or updated. Consider the fact that lots of users probably have a file system with for example \"user avatars\" or \"user uploads\" or whatever that are constantly updated. Assuming Backup keeps aborting because of error code 1 because a new file was uploaded to that tree structure, that would be problematic and would cause backups to not occur at all. I'm quite sure lots of people have a bunch of assets that need to be backed up frequently and more are probably being added while the archiving occurs.\n\nI'll go ahead and implement it and add exit code 1 to the ignore list (whitelist).\n Changed were applied here ( 70defdda354662bd16f67fb6c607894ac21f02e9) and here ( b4b075f608dfb6af85a83a7f191723934f29e1f7 ). The archiver will now ignore exit codes `[0, 1]`.\n\nCommit Messages:\n\n> Revamped the Backup::CLI module. Removed the CommandNotFound exception and method since the CommandFailed exception already picks it up, and it isn't necessary to check whether the command isn't found twice. Also, it is now possible to pass in an array of exit codes to ignore in to the #run method, rather than raising an exception when a non-0 exit code gets returned. Cleaned up the rest of the code in the cli.rb file.\n> \n> The Backup::Archive now ignores the exit(1) code, as it only indicates that the files in one or more of the directories that are being archived have changed since the archive was being read by the `tar` utility. This can happen when a folder that's constantly updated by for example user data from a website (e.g. user uploads) and you do not want backup to abort every single time someone uploads a new file during the archiving process. The new file will be picked up during the next backup process and ignored during the current one rather than aborting the whole backup operation.\n\nThis will be included in the next backup release.\n  Great, thanks! Pulling this in now. Mind updating the Cloud Files Storage wiki regarding this addition?\n\nhttps://github.com/meskyanichi/backup/wiki/Storages\n\nCheers!\n  That's odd. I doubt it's a timeout since it's transferring files individually. It might have something to do with the `s3sync` gem, in which case it'll be hard to debug because I don't really have a fundamental understanding of the gem itself. I've been meaning to look in to ways to write a gem that accomplishes the same as `s3sync` and support both Ruby 1.8.7 and 1.9.2.\n\nI'm not entirely sure how the gems internals work. You could try to transfer your data directly with `s3sync` to see if that solves the problem, in which case the problem might be the Backup gem. I'm afraid that if the problem lies within the s3sync gem I'm unable to help much. It also doesn't seem like it's actively being supported anymore either (yet another reason for someone to go and write a new version that's also maintained).\n It'll probably require a custom implementation of the s3sync functionality to fix this. Might be possible to create a new tool that'll replace s3sync by utilizing the fog gem and threads to gain a high level of concurrency. Not entirely sure how to go about it at this time, since it does involve some kind of checks on files without actually pulling them down from S3 to see whether the file differs from the local one.\n  Looking good. Using a separate gemset seems like a nice way to isolate the gems. Although I personally stopped using gemsets when Bundler became stable since I always run everything in bundlers context with `bundle exec` so it wouldn't matter if every single gem that exists would be installed.\n\nI actually never used Sendmail but read about it years ago, how does it exactly work? Do you need to setup stuff on your server? Do you use your own mail server? Or doesn't it require anything to be set up? When would i want to use Sendmail over Mail (SMTP)?\n\nAnd lastly, any reason for reverting back to 2.2.x from 2.3.0? Ruby on Rails is 0% related to Backup as of Backup >= 3.0 and dependency versions should no longer be adjusted because of what Rails is using.\n\nIn any case, the implementation looks good. Please let me hear your thoughts on the changes and I'll get back to you.\n\nCheers\n Gotcha.\n\nWhile I agree with the addition/changes of RVM/Guardfile and Sendmail, I don't agree with the change from Mail 2.3 to 2.2.x simply because Backup has zero relation with Rails. However, if it had then moving it back to 2.2.x would break it with Rails 3.1 (latest stable) apps.\n\nI'm curious though, how (and why) are you using Backup in Rails? Is there any reason why you don't use it as a stand-alone gem? The dependency issue is one of the main reasons I got rid of \"Rails\" support because it constantly caused people headaches, broke their apps, or made Backup unusable. Also I find that Backup should be seen as a stand-alone utility that isn't tied to anything else (web frameworks, other gems). Although if possible (maybe to simplify deployment + backup provisioning) it might be interesting to combine it nonetheless. But yeah, let me know what / how you're using it, maybe there's a better approach that doesn't mess with your Rails dependencies.\n\nCheers\n  This is probably a bug, however, Backup intentionally doesn't install all it's dependencies since it would probably install like 30-40 gems on your system, while you probably only need maybe 5-10 at most. However, the error you're receiving is odd so I'll have to investigate that in a clean environment. I've had all the dependencies installed of course so that error probably never occurred in my environment.\n\nThanks for letting me know!\n I've found the issue and will push a new gem shortly. Sorry about that!\n Thanks! Glad you like it. Will be adding `popen4` to the gemspec since it's a dependency that's actually required at all times. Fixed the issue and will be pushing the version 3.0.18 in a few, and yank version 3.0.17.\n\nAlso, I'll update the quick start guide. Actually it's quite straightforward since Backup tells you what gems to install, but the error you experienced kind of crushed the whole \"get up and running quickly\"-experience. :p Should be fixed for future installs as of 3.0.18!\n\nCheers\n Just pushed Backup version 3.0.18 and yanked 3.0.17 with the broken CLI. Should now work out of the box, additionally popen4 will be installed when backup is installed since it's a dependency that's used by Backup, and isn't specific to any 3rd party API or anything.\n  Hi.\n\nYes, he has done a good job of implementing something in the right direction. Here are more of his commits: https://github.com/meskyanichi/backup/pull/163/files\n\nThe reason it didn't make it in was that it was built quite a while ago and internals have changed, and he didn't have any specs. But the overall approach is great and should definitely be used as a reference, especially the Split class idea seemed great.\n\nIf something like a **Splitter** class would be implemented it must:\n- Be abstract: Must be able to work with ALL current and future storage methods (S3, CloudFiles, NineFold, Dropbox, etc)\n- The Split-size must be adjustable for every storage method (e.g. S3 5gb, Dropbox 300mb, etc)\n- Work seamlessly with the current functionality (upload/remove/cycling of backups)\n- Contain specs\n **Regarding your first commment**\n\nThat seems like a good approach. A few things to note:\n- Might be better to call the parts `filename.part-1`, `filename.part-2`, `filename.part-3` etc\n- Might be useful to have an `assemble` command for the Backup CLI. `backup assemble /path/to/backup/parts`\n- If possible try to make it backwards compatible so that existing backups still get removed when cycled, this might already work the way you want to implement it with the split! command\n\nOther than that I think it should be fine.\n\n**Regarding your last comment**\n\nThat's weird. When I pull down the develop branch and ensure all ruby versions and gems are installed using RVM, and then issuing `bundle exec guard`, it should simply work.\n\n```\n\u2192 bundle exec guard\nGuard is now watching at '/Users/Michael/Desktop/backup'\nGuard::RSpec is running, with RSpec 2!\nRunning all specs\n\n\nRuby version: ruby-1.9.3-preview1\n\n  344/344:     100% |==========================================| Time: 00:00:00\n\nFinished in 0.3506 seconds\n344 examples, 0 failures\n\n\nRuby version: ruby-1.9.2-p290\n\n  344/344:     100% |==========================================| Time: 00:00:00\n\nFinished in 0.35859 seconds\n344 examples, 0 failures\n\n\nRuby version: ruby-1.8.7-p352\n\n  344/344:     100% |==========================================| Time: 00:00:02\n\nFinished in 2.34 seconds\n344 examples, 0 failures\n\n\nRuby version: ree-1.8.7-2011.03\n\n  344/344:     100% |==========================================| Time: 00:00:01\n\nFinished in 1.97 seconds\n344 examples, 0 failures\n```\n\nAlso, travis-ci.org indicates that all tests are passing: http://travis-ci.org/#!/meskyanichi/backup\n @m4 good catch! Yeah, I recently did some massive refactoring by removing all the Backup::Logger.stubs(:message) by adding it to the global config in the spec_helper (including the FileUtils stub)\n\n``` rb\nRSpec.configure do |config|\n  config.mock_with :mocha\n  config.before(:each) do\n    FileUtils.stubs(:mkdir_p)\n    [:message, :error, :warn, :normal, :silent].each do |message_type|\n      Backup::Logger.stubs(message_type)\n    end\n  end\nend\n```\n\nMaybe it's better to move your snippet\n\n``` rb\nafter(:each) do\n  Backup::Model.extension = 'tar'\nend\n```\n\nIn to the spec_helper since this is something that (i think) should always be done, regardless of what spec is running. If it works, feel free to add it underneath the `config.before(:each)` block:\n\n``` rb\nRSpec.configure do |config|\n  config.mock_with :mocha\n  config.before(:each) do\n    ...\n  end\n  config.after(:each) do\n    Backup::Model.extension = 'tar'\n  end\nend\n```\n\nCheers\n @m4 thanks! Also sorry I haven't had much time to look at pull requests and other stuff on GitHub. I'll get to it asap! :)\n Thanks @m4, I'll probably pull it in to a separate remote branch and see how it works and what can be done to further improve if (if at all needed). Thanks a lot for your time and effort! Will get back to you once I have some time to further investigate! :)\n  That's odd. I'm not experiencing any issues on my Ubuntu server. Are you running the latest backup and the appropriate fog version? Are you using RVM? Does the user that's using (root? deployer? other?) have access to the same gems as the user that's installing them?\n So you're installing the gems as root, so I assume you're also running backup as root? I usually go with the systemwide RVM install which shares the same gems across all users pretty much, and that simply works out of the box. What's odd is that it is able to find the backup executable, but not the fog gem.\n @daenperry great! thanks for letting me know. Will add an entry to the wiki regarding this.\n  There is no out-of-the-box way to do a full dump of all the databases, but there is probably a way you can accomplish it since the configuration file is pure Ruby.\n\n```\n%w[db1 db2 db3 db3].each do |db_name|\n  database MySQL do |db|\n    db.name     = db_name\n    db.username = \"my_username\"\n    db.password = \"my_password\"\n    db.host     = \"localhost\"\n    db.port     = 3306\n    ... etc etc\n  end\nend\n```\n\nYou could iterate through an array of databases and dump them. You could try to use the mysql2, pg, mongo, etc gems to connect to your desired database and there are probably methods available to get a list of all the databases, then just build an array of database names and iterate through that in the `~/Backup/config.rb`.\n @smith good catch. Hadn't thought of that. Maybe this would be a nice addition to have in Backup's core since I can see more people wanting such functionality to get up and running and backup server. There are probably people that make use of a single server to serve multiple client applications, so being able to just install Backup, and flag it to backup everything would be nice, no need for any custom ruby in the config files.\n\nAny idea if PostgreSQL and MongoDB both have the ability to dump all the databases with a single command? Fairly sure they are capable of doing that.\n\nMaybe we could do something like this:\n\n``` rb\ndatabase MySQL do |db|\n  db.name     = :all\n  db.username = \"my_username\"\n  db.password = \"my_password\"\n  db.host     = \"localhost\"\n  db.port     = 3306\nend\n```\n\nOr this?\n\n``` rb\ndatabase MySQL do |db|\n  db.all      = true\n  db.username = \"my_username\"\n  db.password = \"my_password\"\n  db.host     = \"localhost\"\n  db.port     = 3306\nend\n```\n\nIf this were to be implemented, what DSL syntax do you think would be preferred?\n\nCheers\n @smith thanks for the info! Yeah it doesn't matter really since we will update the template generator to have the `# db.all = true` commented out by default, but at least all users know that it's an available option. (of course, also updating the wiki and what not).\n\nI guess the `db.all = true` is a nice flag to use. Marked it as a To-Do.\n  Something like `backup perform -t my_backup --syslog` ? I've never written to the syslog, is there some kind of unix utility that can accomplish this on OSX and Linux?\n  Hi,\n\nIt did not notify you because no exception was raised. This isn't the appropriate behavior of course. This should be fixed in the current `develop` branch where we check on exit codes of every unix command we run. If it isn't 0 then we raise an exception containing information on why it failed and it will be sent to all your defined notifiers.\n\nThis will be added with the next gem release, which should be coming soon.\n Backup gem version 3.0.17 has been pushed. Closing this issue. If the problem persists in the new version, feel free to re-open the issue.\n  Looks good to me. \n  @tomash We don't use infinity_test any longer. Try this:\n\n```\nbundle install\nbundle exec guard start\n```\n\n(Make sure you update the bundle for 1.9.2, 1.8.7 and REE btw, otherwise it'll say it cant find all the gems in the Gemfile)\n\nI have a single test failing: \n\n```\n1) Backup::Configuration::Storage::RSync should set the default rsync configuration\n   Failure/Error: rsync.local.should    == false\n   undefined method `local' for Backup::Configuration::Storage::RSync:Class\n   # ./spec/configuration/storage/rsync_spec.rb:23\n```\n Sorry, scratch that, 3 tests are failing, the `--fail-fast` flag is turned on in the `Guardfile`\n\n```\nRuby version: ruby-1.9.2-p290\n\n\n  1) Backup::Configuration::Storage::RSync should set the default rsync configuration\n     Failure/Error: rsync.local.should    == false\n     undefined method `local' for Backup::Configuration::Storage::RSync:Class\n     # ./spec/configuration/storage/rsync_spec.rb:23:in `block (2 levels) in <top (required)>'\n\n\n  2) Backup::Configuration::Storage::RSync#clear_defaults! should clear all the defaults, resetting them to nil\n     Failure/Error: rsync.local.should    == nil\n     undefined method `local' for Backup::Configuration::Storage::RSync:Class\n     # ./spec/configuration/storage/rsync_spec.rb:36:in `block (3 levels) in <top (required)>'\n\n\n  3) Backup::Encryptor::GPG#write_tmp_file! \n     Failure/Error: encryptor.send(:write_tmp_file!)\n     unexpected invocation: #<Mock:TmpFile>.to_ary()\nunsatisfied expectations:\n- expected exactly once, not yet invoked: #<Mock:TmpFile>.close(any_parameters)\n- expected exactly once, not yet invoked: #<Mock:TmpFile>.write('secret')\nsatisfied expectations:\n- expected exactly once, invoked once: Tempfile.new(any_parameters)\n\n     # ./lib/backup/encryptor/gpg.rb:65:in `write_tmp_file!'\n     # ./spec/encryptor/gpg_spec.rb:54:in `block (3 levels) in <top (required)>'\n\n  329/329:     100% |==========================================| Time: 00:00:00\n\nFinished in 0.15648 seconds\n```\n There appear to be even more broken tests. I'm currently working on fixing all of them and pushing it back to `develop`. Meanwhile I noticed a while back that there are a few things missing in Backup (missing global configuration for new additions etc) so I'll be fixing that as well so it's polished and up-to-date.\n @coderjoe So people are now forced to visit the Dropbox website in order to create an authenticated session?\n @coderjoe Ah, gotcha. I didn't know they were using a scraper to automatically authorize. So anyway I checked out the pull request and I think we could possibly accomplish it in more simplified way that would not involve needing a new executable, and the `consumer_key` / `secret_key` would not have to be deprecated/removed as they can act as session cache identifiers in case the user wants to use the same Dropbox account for multiple triggers.\n\nI think the majority of the code can remain the same, except that the initial request would require you to visit the URL, after that it'll write out a cache file in the Backup directory, something like `$BACKUP_PATH/cache/#{consumer_key + secret_key}.session` - That way we can always use the `consumer_key` and `secret_key` to check and see if a session was already created or not, this will also mean the user doesn't have to worry/think about where to put the cached session or how it works, or that it's even happening. I think that the user doesn't even have to change/add new configuration options to their backup.rb configuration file since it's all handled by backup, it would be a simple transition from doing nothing, to opening a authorization URL only once per Dropbox account.\n I'm currently hacking together something quickly to see if it would work, if it does I'll fully implement it.\n @coderjoe Thanks for the info!\n\nI've actually partially implemented it, haven't tested it manually yet but I'll get around to it later tonight. I'll push it to a separate branch and link it here so you can check it out. The code adjustments are quite simple. I will be deprecating the Email/Password attributes (they can stay in place, but issue a warning so it's still backwards compatible for a couple of months at least) since they are no longer needed from what I can see, but the api key/secret will remain. I won't be adding a serialized_session attribute that'll link to the file, that'd be handled by Backup itself under a new `.cache` directory. At first I thought: how would you make it unique and know what account it binds to, but that's quite easy: api_key + api_secret = unique. So re-using that as the identifier of the cache file and testing if the session is authorized will happen whenever the `connection` method is called in the Backup::Storage::Dropbox class. It'll automatically check to see if the cached file is in place, if not then it will create a new session, make you authorize via URL, if successful it'll immediately serialize and write it to a file in the `.cache` dir and will load it every other time. This is what that method looks like at the moment (other methods are available, just not present in this snippet right now)\n\n```\ndef connection\n  if cache_exists?\n    begin\n      cached_session = Dropbox::Session.deserialize(File.read(cached_file))\n      return cached_session if cached_session.authorized?\n    rescue ArgumentError\n      Logger.warn \"Could not deserialize cached session data, file might be corrupt.\"\n      Logger.warn \"Creating a new session.\"\n    end\n  end\n\n  session      = ::Dropbox::Session.new(api_key, api_secret)\n  session.mode = :dropbox\n  Logger.message \"Visit: #{session.authorize_url}\"\n  Logger.message \"to authorize a session for your Dropbox account.\"\n  Logger.message\n  Logger.message \"When you've successfully authorized the session, hit enter.\"\n  gets\n  Logger.message \"Authorizing..\"\n  begin\n    session.authorize\n  rescue OAuth::Unauthorized => error\n    Logger.error \"Authorization failed!\"\n    raise error\n  end\n  Logger.message \"Authorized!\"\n\n  Logger.message \"Caching session data to #{cached_file}..\"\n  write_cache!(session)\n  Logger.message \"Done! You will no longer need to manually authorize via an URL on this machine for this Dropbox account.\"\n  Logger.message \"Note: If you run Backup with Dropbox on other machines, you will need to authorize them to use your Dropbox account as well.\"\n\n  session\nend\n```\n\nSo with this in place, even if you have 10 different Backup Models in place that make use of the same Dropbox account, the same `.cache/asdfghjklzxcvbnmqwertyuio` file will be used and you only have to authorize once. Of course, if you have multiple machines then you will either want to copy the .cache file, or just re-authorize on the other machines as well. You can have multiple session `.cache` files for the same Dropbox account from what I can see.\n\nAnyway, I'll push the `dropbox` branch soon so everyone can check it out. Probably in a few hours from now.\n Yeah, you would run it once interactively so it writes the cache file on the machine and from that point on every backup model that wants to that particular dropbox account will simply work.\n\nregarding the `gets` I was thinking of wrapping a timeout around it and set it to 3 minutes, so if it takes longer than 3 minutes to respond then it'll simply timeout and an exception will be raised.\n\n```\nTimeout::timeout(180) do\n  gets\nend\n```\n\nTypically users will test their configuration to see if everything is working properly after configuring anything, so they'll see that they will be prompted. I doubt anyone would blindly accept the fact that \"it probably works\" when it comes to running backups. Also, the wiki page will be updated with instructions on what's happening. We could even add a little description to the generated Dropbox configuration indicating that the initial session must be authorized, and that the user must perform the first backup manually on the machine in order to cache it.\n\nWhat do you think?\n Basically all you have to do is copy over the `$HOME/Backup/.cache` directory to all your instances and it will work, so if you have an automated script to provision/configure servers then all you'd have to do is move that cache dir and it's files in to place. The reason I would like to implement it in this way is because it stays consistent with the rest of the Backup gem. It's basically a modular mini-framework for defining Backup models, and would prefer to keep everything consistent in terms of how stuff works/is defined/setup/configured. It's too bad that Dropbox doesn't provide a direct API like Amazon and such to directly upload without the annoying session, it's quite unfortunate. But I guess we can't complain cause we get free tier storage. :)\n @coderjoe The `.cache` directory never existed until now. I actually just named it that simply because the only thing that would possibly be cached would be sessions like this, and it's a cached file of course. We currently have, if we include `.cache`:\n\n```\nPATH        = File.join(ENV['HOME'], 'Backup')\nDATA_PATH   = File.join(ENV['HOME'], 'Backup', 'data')\nCONFIG_FILE = File.join(ENV['HOME'], 'Backup', 'config.rb')\nLOG_PATH    = File.join(ENV['HOME'], 'Backup', 'log')\nCACHE_PATH  = File.join(ENV['HOME'], 'Backup', '.cache')\nTMP_PATH    = File.join(ENV['HOME'], 'Backup', '.tmp')\n```\n @coderjoe good catch. I'll probably go for writing out the file initially. Maybe later we could add the option to specify the serialized data as an optional approach in case that works better for some people, but by default I'll let Backup do the heavy lifting by automating that and having the user open the URL once.\n Here's the initial setup for the Dropbox re-implementation.\n\nhttps://github.com/meskyanichi/backup/commit/e198b29109c625b95fda7fd479806aabcaee9cfe\n Just merged the Dropbox branch back in to develop, both spec'd and manually tested, it should work out of the box.\n\n[Full list of commits for Dropbox 1.3.0 support](https://github.com/meskyanichi/backup/compare/06d0f7ab8d...e198b29109c625b95fda7fd479806aabcaee9cfe)\n  Since when is Amazon S3 capable of doing incremental backups? I thought that the S3-platform didn't support any kind of RSync-like technology and only accepts files as a whole, rather than parts/bytes of files.\n  Closing issue since we don't support 1.9.1. We support 1.9.2, 1.8.7 and Ruby Enterprise Edition (And 1.9.3 once the stable release comes out)\n  This seems like a more reliable way to handle non-zero returned values. I'd say merge it in.\n  I'll have a look soon\n In the current `develop` branch this is (or should be) fixed since we're now using POpen4 to check if all unix commands exited with 0. If it exists with a non-zero value (in this case, when trying to `tar` an archive or file that doesn't exist, it will raise an exception, triggering the notifier as well).\n\nWill be pushing out a new gem soon, going over a bunch of other issues prior to that.\n Backup gem version 3.0.17 has been pushed. Closing this issue. If the problem persists in the new version, feel free to re-open the issue.\n  @tomash any idea how to apply that as an option? Is there a flag for the unix utility we could use that you know of?\n I'm not sure if backup runs on windows at all to be honest, does Windows also have the unix utilities we use at all, like `tar` and `cp` and what not?\n\nIn any case, using `File.symlink?(file)` should work fine I think. I'll check out the rest of the Ruby File API and see what I can use. In any case you basically want it to follow symlinks and include them in the archive if one of the folders you've added to the archive happens to contain symlinks to other folders.\n\nSo you're basically looking for some functionality that you could possible enable like so?\n\n``` ruby\narchive :my_files do |archive|\n \u00a0archive.follow_symlinks = true # default false\n \u00a0archive.add \"/path/to/some/folder\"\nend\n```\n\nLet me know.\nCheers\n Turns out that `File.realpath(symlink_file)` is only available in Ruby 1.9 which is a problem. Looking in to way to get the same behavior in Ruby 1.8.7.\n Ah, it seems that Ruby has a library called `Pathname`. You can simply do this in Ruby 1.8.7 which is the equivalent in Ruby 1.9.\n\n**Ruby 1.9**\n\n``` ruby\nFile.realpath(symlink)\n```\n\n**Ruby 1.8**\n\n``` ruby\nrequire \"pathname\"\nPathname.new(symlink_file).realpath\n```\n\n**The latter works in both Ruby 1.8 and Ruby 1.9**. This is probably the way to go.\n Yeah also the Mac OSX tar utility doesn't seem to have options/flags that you can use (afaik) that automatically follows symlinks, gotta build that behavior in to Backup to make it cross-platform (well, Linux and OSX in any case). Shouldn't take too long to implement I think, I'll have a go at it soon. :)\n @coreyt @tomash and anyone else following this issue.\n\nAlright. I just wrote a slick method that'll return an array of symlinks in the given path.\n\n``` ruby\nrequire 'pathname'\n\ndef collect_symlinks(pathname)\n  pathname.children.map do |entry|\n    Array.new([\n      (entry.symlink? ? entry : nil),\n      (entry.directory? ? collect_symlinks(entry) : nil)\n    ])\n  end.flatten.compact\nend\n\npathname = Pathname.new(\"/path/to/my/archive\")\nsymlinks = collect_symlinks(pathname)\n\nputs symlinks\n```\n\nPretty amazed how small the code-size is to get this going. Though, I refactored it like 3 times after the initial implementation to figure out how (and if) it would work.\n\n**Basically what this does is the following:**\n\nIt will take the example path `/path/to/my/archive` (which you will add to `archive.add`) and create a Pathname object. We pass the object to the `collect_symlinks(pathname)` method and it'll iterate through all the child entries (which are generated by the Pathname object) and I, in every case, return an array with the entry at index 0 (if its a symlink, else it returns nil) and a new array at index 1 (with exactly the same as index 0). So it's a recursive procedure that keeps going as long as there are directories to navigate to.\n\nIn the end we have a big array of symlink objects, nil objects and nested arrays containing symlink objects, nil objects and more nested arrays, etc. etc.\n\nI then flatten them to a single-level array, and remove all the nil values it picked up. So the end result is a single-level array, containing only symlinks (if any).\n\nSo when implementing this functionality in to Backup, I would just iterate through the added archive paths, something like this:\n\n``` ruby\n# Update the @paths instance variable (Array) with new paths to any potential symlinks\n# if @follow_symlinks is true (set by the user in the Backup config file\nif follow_symlinks\n  paths.each do |path|\n    collect_symlinks(pathname).each do |symlink|\n      @paths << symlink.realpath\n    end\n  end\n\n  # Ensure there are no duplicate paths in the @paths array\n  # (This might happen when a symlink goes in to a folder that is already in the path to be archived)\n  @paths.uniq!\nend\n```\n\nWith that I think we have a working implementation (except for the DSL, I'll need to update that, but that's easy).\nWhat do you guys think?\n\nCheers\n Sweet. I'll probably implement the feature in to Backup today or tomorrow, then you can try it out by cloning the git repo and running backup from it. (no need to wait on a new gem to try it out).\n\nI'll probably go ahead and implement the method i built instead of using the tar flags and it's happened to me a few times that some flags differ depending on the distributor type (GNU, BSD, or w/e). Like with the `split()` utility im working with in the Splitter branch, it cant split into numeric suffixes on OSX, only on Linux. So whenever possible I try to stick with pure Ruby implementations of specific functionality like the symlink following to ensure it works cross-platform.\n\nIll let you know when I push this to the develop branch so you can clone and test it out before I finally release it as a gem. That cool with you @coreyt?\n Great. 'll keep you posted.\n @coreyt just pushed an update in the **symlink** branch at commit d35d5bb05b397186419939c722ad3129bd9f1c44.\n\nYou can try it out by doing the following:\n\n```\ngit clone git://github.com/meskyanichi/backup.git\ncd backup\ngit checkout symlink\n./bin/backup perform -t my_backup\n```\n\nbe sure to enable symlink following:\n\n``` ruby\narchive :my_archive do |archive|\n  archive.follow_symlinks = true\n  archive.add \"~/some_folder\"\nend\n```\n\nLet me know how it works out :) Haven't added any tests yet, wanted to see if it works at all on your end with your series of (nested) symlinks. If it all works well then I'll go ahead and apply the tests and merge it to the the main develop branch.\n > It does not throw an error (like earlier versions did), but it seems to\n> only be backing up the symlink file itself.\n\nThat's weird. Well, for me it does indeed copy over the exact symlink, but in the root of the `.tar` file are all the folders that the symlinks pointed to. Are you sure the contents of the symlinks aren't being backed up anywhere in the `.tar` file?\n  Oops. I recall someone mentioning this issue and I forgot that --port was the incorrect syntax. Merging it in, thanks for fixing it!\n  looks good, merging. thank you! \n  good one. i'll take a look at it on weekend, unless somebody's quicker and files a pull request before that.\n Sorry, I forgot to correct the syntax of the rsync port flag. This should now be fixed in the Develop branch and will be released in the next gem shortly.\n Backup gem version 3.0.17 has been pushed. Closing this issue. If the problem persists in the new version, feel free to re-open the issue.\n  Sorry, I'm not entirely sure what you want to accomplish. Could you elaborate?\n Closing issue for now, please reply here anyway if you have any questions. Cheers\n  This is fixed in the current develop branch, [see here a list of commits](https://github.com/meskyanichi/backup/compare/06d0f7ab8d...e198b29109c625b95fda7fd479806aabcaee9cfe).\n\nThis will be included in the next gem release, which will be coming out fairly soon.\n Dropbox requires a manual session authorization from now on, so when you update, be sure to run the backup procedure manually once so you can be authorized by Dropbox. Backup will write the session cache data to a file and use that to authenticate itself afterwards (so you can still use Cron to perform backups in the background after the initial manual authorization process which consists of simply visiting a URL that Backup provides you and hitting enter afterwards. It's self-explanatory when you run the backup trigger, so no worries.)\n Backup gem version 3.0.17 has been pushed. Closing this issue. If the problem persists in the new version, feel free to re-open the issue.\n  Great feature, but I'd feel easier with some tests for it. Could you?\n Will still want to see specs for this. I haven't had time to look in to it yet, but have been fixing most of the current issues and pull requests that were quite crucial. Pushed out a new gem meanwhile that incorporated A LOT of commits/fixes.\n\nI like that you take a general approach, making it re-usable for CloudFiles, Dropbox, etc, instead of only solving it for one storage service. If you have time, and could bring it up to date with the current develop branch, add ninefold (cloud storage service) support, apply specs and such, then that would be great.\n\nI'm going to close the pull request for now. If I myself decide to implement this at some point (if you're lacking time or w/e) then this pull request will make for a great reference.\n\nCheers!\n  Same question as in #162 -- could you write some tests for that?\n  wow, good catch!\n  looking good for me (my only possible comments is a single nitpicks about coding style :)). if nobody objects, i'll merge it within 1-2 days :)\n  Looking good, merging! Thank you for this useful patch :)\n  rsync sounds like a better approach, maybe you could then reuse Backup::Storage::Rsync that's already here and working?\n\nremember about tests :) \n current tests for storage::rspec should be enough of a hint :) \n  stuff from .tmp is removed after completing backup, i.e. copying the backup files to destination (s3, ftp or wherever you'd like them to).\nI think having the possibility to backup to a local directory is somewhere in the issues / ideas, but I don't know if it has been implemented and merged? @meskyanichi ?\n The RSync storage has a local storage option (I believe it's still in the develop branch, but I'll be releasing a new gem soon that will contain the option)\n\n```\n##\n# RSync [Storage]\n#\nstore_with RSync do |server|\n  server.username = 'my_username'\n  server.password = 'my_password'\n  server.ip       = '123.45.678.90'\n  server.port     = 22\n  server.path     = '~/backups/'\n  server.local    = true # set this to true and Backup will RSync it locally instead of to a remote location\nend\n```\n\nIs this what you were looking for @Emerson?\n I forgot there is actually a Local storage method these days. Should be sufficient. If it isn't please open a new ticket. Cheers!\n  Sorry Gerard, I'm no longer maintaining Backup 2.x - I saw you already upgraded to Backup 3.x in another discussion. Closing this issue\n  Sorry for the late response. I'm working my way through all the issues now and a lot of commits have been done since a while ago. I'll try to update most client gems and then push out a new Backup gem. Hopefully that'll solve these issues.\n\n@simaob typically I think you can upload up to 5gb single files to Amazon S3 these days, so the 400mb shouldn't be an issue. Please let me know how it goes after I push out a new gem and you update.\n Backup gem version 3.0.17 has been pushed. Closing this issue. If the problem persists in the new version, feel free to re-open the issue.\n  nope, not merged yet. @meskyanichi what do you think?\n Thanks for putting together this pull request, though I'm looking for a more generic way of doing this (so it works not only for Amazon S3, but also Cloud Files, Ninefold, Dropbox, etc)\n\nWill also need to see specs. Going to close this for now, might use it as a reference in the future. If you have any idea's please let me know.\n\nCheers\n  Yup. Will be re-checking versions on all gems that are extremely out of date, particularly API gems for S3, CloudFiles, etc and set their dependency to >= rather than ~> since this is frequently occurring with API gems.\n\nWill be pushing out a new gem soon.\n Backup gem version 3.0.17 has been pushed. Closing this issue. If the problem persists in the new version, feel free to re-open the issue.\n Hmm. I just pushed a lot of commits to the \"develop\" branch, you might want to try out that branch as it will display STDERR's unlike in the current version of backup. It will tell you why the `tar` command failed and `exit(2)`'d.\n\nI'll also be pushing out a new gem soon, I haven't experienced any issues with the Archiver on OSX, but maybe the tar version on Linux is different and for some reason doesn't comply to the options passed in (i doubt it though, since I've used the Archiver on Linux a short while back without any issues).\n\nRegardless, the latest commit in the develop branch contains changes that'll print out the actual TAR error so you'll probably be able to identify the real problem. So clone the repo and try to run backup from it.\n\n```\ngit clone git://github.com/meskyanichi/backup.git\ncd ./backup\n./bin/backup perform -t .... etc\n```\n\nCheers\n Great! Yeah the new gem that I'll be pushing out soon has some great changes/improvements and fixes for certain things. Still want to do a few more commits before I push out the gem.\n  @mikz to comment on your last comment, we might want to consider moving the CLI in to the ./lib folder as a class, and initializing it from the ./bin/backup executable. This way we could probably test it with the current test suite by including, but not actually initialzing it as a CLI util. Not yet sure how to go about testing CLI utilities since I've never done that before, so any pointers are welcome if you know of any.\n  Are you actually using a password? Or do you use SSH keys? Or do you use SSH keys with a passphrase? In your command I don't see you're using the `--pasword-file` option, but in the backup configuration you essentially are because you've defined `rsync.password = \"password\"`. If you're not using a password, try removing the `rsync.password` attribute and try again.\n  Thanks for submitting this. I'll have a look soon!\n I just tested this again, against the latest develop branch and it's still working properly, so I'm closing this issue for now. Once the new gem comes out, and you're still experiencing the issue, feel free to re-open the issue. Thanks!\n Sorry for the spam. :p\n  I'm not sure how to go about implementing something like that, but could you give an example of how that would look and what exactly it will do?\n  Backup has not been tested against Ruby 1.9.1. Any particular reason why you are running 1.9.1 on your production box? This may very well be the problem. You could try installing Ruby 1.9.1 locally and see if it fails there as well (or install 1.9.2 on your production box). From what I hear it's quite crucial to upgrade any Ruby 1.9.x to the latest stable (currently 1.9.2) due to particular issues with previous 1.9 versions.\n\nAre you using RVM to manage your Ruby versions? If so then it should be easy to try out.\n  That's really odd. I'll have to try this locally soon and see if I can reproduce that problem.\n\nThanks! And sorry for the trouble.\n @tsigo thanks for helping on this one. So basically you're using we should just hardcore `/bin/cp` rather than using the `utility()` method? Seems fine to me since as you mentioned you most likely have bigger problems if that's not there. :p Unless it's placed in a different location on other Linux distro's? I'd assume /bin/cp is the same everywhere.\n  Check out this issue: https://github.com/meskyanichi/backup/issues/121\n\nBackup 3 is independent from Ruby on Rails. Though, because of how it's built it shouldn't be hard to hook it up with any Ruby application, whether it's Rails, Sinatra, etc.\n\nAlso, check out this tutorial someone wrote up: http://erik.debill.org/2011/03/26/csing-backup-with-rails\n  Thanks. I'll pull this in soon. Were there any tests affected by the change? Mind updating these specs if so?\nI'll pull it once I have time ( hopefully within the next day or 2-3 ).\n\nThanks!\n Oh, sorry I didn't notice! Thanks, i'll pull it in right now in that case. :) Thanks!\n  You bring up a good point. I think during development I failed to see it from that perspective. My initial thought was that if you try it out first (to see if the tool actually works) you'd receive that exception when the bucket does not exist.\n\nI'll see what I can do about it and leave this ticket open. Any suggestions are welcome.\n I think it would- maybe something like:\n\n```\nbegin\n  ... code ...\nrescue Excon::Errors::NotFound\n  raise \"user friendly message regarding bucket not being found\"\nrescue => e # anything else?\n  raise e # still raise it cause something still went wrong\nend\n```\n\nSomething like that would do, what do you think?\n Actually, nevermind the 2nd rescue block since it'll raise that exception regardless even when it isn't present. Man :) too many brain farts lately.\n That'd be great!\n  I'll need to investigate various return codes from particular commands invoked on the OS and see what I can do about that so it'll be able to raise more exceptions when needed. Haven't thought about using the return code for other purposes actually so I'll have a look soon. Thanks!\n Thanks for looking that up. I'll have to dig in to the code base again some time since I'm lacking time as of late. I agree that all OS commands should be checked for their return code so we can raise exceptions when necessary.\n @bgarret as of Backup 3.0.17 we now check the exit code of every command ( https://github.com/meskyanichi/backup/blob/develop/lib/backup/cli.rb#L99 ) so now whenever a unix command doesn't \"cleanly\" exit, an exception will be raised, containing information (if returned) from the unix command. The backup will be aborted and the notifications will be triggered (and send the raised exception with unix utility exit code and any additional provided details that may be provided by the utility).\n  Thanks! I'll take a more in-depth look soon and merge it in. Will get around to doing it soon. Just letting you know! :)\n Pardon my corrupt sentence above, (before I updated it), lol\n  Hi.\n\nThe gem has no relation to Ruby on Rails. You just call `backup --help` for more information. The command you're looking for is `backup generate`, not `./script/generate backup` (it's not a Rails generator).\n\nRunning `backup --help` yields:\n\n```\nTasks:\n  backup decrypt --encryptor=ENCRYPTOR --in=IN --out=OUT  # Decrypts encrypted files\n  backup dependencies                                     # Display the list of dependencies for Backup, or install them through ...\n  backup generate                                         # Generates configuration blocks based on the arguments you pass in\n  backup help [TASK]                                      # Describe available tasks or one specific task\n  backup perform -t, --triggers, --trigger=TRIGGER        # Performs the backup for the specified trigger. You may perform multip...\n  backup version                                          # Display installed Backup version\n```\n\nAnd `backup help generate` yields:\n\n```\nUsage:\n  backup generate\n\nOptions:\n  [--path=PATH]                \n  [--databases=DATABASES]      \n  [--storages=STORAGES]        \n  [--syncers=SYNCERS]          \n  [--encryptors=ENCRYPTORS]    \n  [--compressors=COMPRESSORS]  \n  [--notifiers=NOTIFIERS]      \n  [--archives]                 \n\nGenerates configuration blocks based on the arguments you pass in\n```\n Oh - Nah that's for Backup 2.x which was a Rails gem. Since Backup 3.0 it is Rails independent, but can still work perfectly well with Ruby on Rails regardless.\n\nI haven't used it with Rails in a long time to be honest, not since 2.x that is. I came across a post where someone demonstrates Backup 3.x integration with Ruby on Rails.\n\nThis may help: http://erik.debill.org/2011/03/26/csing-backup-with-rails\n  Are you talking about syncing as in s3syncing full directory trees? Or are you talking about transferring single files that are 5gb?\n\nAs far as I know if you use the `Syncer S3` method (assuming your files aren't 5gb each) it should transfer all the files, even if the total size of all the files combined is greater than 5gb, since it'll transfer each file individually.\n Thanks, good reference for if we're actually going to implement it!\n  Hmm. I've never run in to this problem. Did you compile Ruby yourself? Or was it already installed on your machine? You may want to consider using RVM to install Ruby versions ( if you aren't already that is ) - I've never had issues with that. If you want to install Ruby's system-wide (meaning all users, including root can use them) you can also do this with RVM: https://rvm.beginrescueend.com/ just install it as root and follow the instructions.\n Gotcha - Let me know how it goes!\n\n---\n\nMichael van Rooijen\nhttps://github.com/meskyanichi\nhttp://twitter.com/#!/meskyanichi\n\nOn Monday, May 16, 2011 at 10:28 PM, lecochien wrote:\nmeskyanichi : I've installed ruby with aptitude install ruby1.9.1-full\n\n>  jschwindt : I will try to follow tips on openssl bug and reinstall ruby with rvm... (http://cjohansen.no/en/ruby/ruby_version_manager_ubuntu_and_openssl)\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/119#comment_1182180\n  You could try using the develop branch and see if that helps. Someone gave me a pull request which fixed some GPG issues. It might solve your problem as well. If not, let me know!\n  Looks good! Merging - Thanks!\n  Were you able to manage?\n I just pulled down the develop branch and run my tests with InfinityTest:\n\n```\ninfinity_test --rspec\n```\n\nThat should do it. If you want to run it against multiple rubies as I am:\n\n```\ninfinity_test --rspec --rubies=1.9.2,1.8.7,ree\n```\n\nIt yields the following: http://cl.ly/0a2p1C0x2S0Y2b2I1Z2o\n\nLet me know if this helps.\n Yeah I find it great for testing open source projects with. https://github.com/tomas-stefano/infinity_test\n\nFor Rails / Sinatra / etc project I just started using Guard - really great stuff.\n Closing issue for now. Let me know if you still run in to any issues! :)\n  Currently there is no automated way to restore backups. Basically you just pull down your backup from whereever you store it. Decrypt it, extract it, and restore it to where ever it should be restored.\n\nAt the moment I'm lacking time to contribute significantly to open source. My knowledge is also limited to certain points so when going in to heavier backup usage it would certainly help if people could share knowledge and even contribute to the project.\n\nPerhaps in the future I'll get around to implementing such features, but they currently aren't on my to-do list.\n  Ha, another good catch ;) I always seem to make that mistake :P thanks!\n  Ouch. Good catch! Merging :)\n  It's not on my to-do list at the moment. But feel free to add any compressors you need! :) We still only have one compressor and that's gzip. Support for any others would be a great addition. I actually lack knowledge of compressors, but I knew it was in demand for Backup 2 so I ensured everything (including compressors) would be modular in Backup 3 so you can add any compressors you need, and i'll merge it back in to the main branch.\n\nThanks! Let me know if you need any help.\n  Ouch! Good catch there! Thanks a lot! \n  Hey. That's odd, when I run `mongodump --help` I get the following:\n\n```\n\u2192 mongodump --help\noptions:\n  --help                   produce help message\n  -v [ --verbose ]         be more verbose (include multiple times for more \n                           verbosity e.g. -vvvvv)\n  -h [ --host ] arg        mongo host to connect to ( <set name>/s1,s2 for \n                           sets)\n  --port arg               server port. Can also use --host hostname:port\n  --ipv6                   enable IPv6 support (disabled by default)\n  -u [ --username ] arg    username\n  -p [ --password ] arg    password\n  --dbpath arg             directly access mongod database files in the given \n                           path, instead of connecting to a mongod  server - \n                           needs to lock the data directory, so cannot be used \n                           if a mongod is currently accessing the same path\n  --directoryperdb         if dbpath specified, each db is in a separate \n                           directory\n  -d [ --db ] arg          database to use\n  -c [ --collection ] arg  collection to use (some commands)\n  -o [ --out ] arg (=dump) output directory or \"-\" for stdout\n  -q [ --query ] arg       json query\n  --oplog                  Use oplog for point-in-time snapshotting\n  --repair                 try to recover a crashed database\n```\n\nAre you sure its not available? I see that it isn't available on the help screen as shown on the MongoDB website, but im my shell it is available. What version of Mongo are you running? This help screen I'm showing you is running MongoDB version 1.8.1 (Latest stable)\n Woah! That's really an old version. I just spun up a new server to see if it's also the same version when running a fresh install with the latest package list, and it is. after running `apt-get update; apt-get upgrade -y` and then `apt-get install mongodb` it installed version 1.2.2. So I recommend you just pull down the tarball from the official site (or get the latest version in any other way)\n\nAnother reason why I recommend 1.8.1 is because it comes with the `--journal` option for the `mongod` utility so you get Single Server Durability which ensures your data isn't corrupt when your server or the mongod instance crashes. Definitely worth the upgrade. `mongod --journal`\n np! good luck :)\n  @trystant thanks for pointing that out. I would've thought the mongodump utility would be safe to use. If not, then this must indeed be addressed! :)\n\n@tomash thanks for the resources and ideas. I certainly am open for pull requests, especially at this time since I'm lacking time to work on the current issue log, so any pull requests are certainly much appreciated! Do you think it could be a drop-in replacement for the current method (mongodump utility) to basically allow users to seamlessly update the gem and gain the benefit of the \"safe\" method without adjusting the configuration DSL?\n @lapluviosilla I agree with you on this one. I found it weird to think that the creators of MongoDB would provide an un-safe utility. We should keep it the way it works right now (not locking) and add the locking as an optional feature. Something along the lines of `mongodb.lock = true` as mentioned above.\n\nAlso, you mentioned there will be a \"lock\" feature ( [SERVER-2279](https://jira.mongodb.org/browse/SERVER-2279) ) in the future, provided by the MongoDB core that'll (as far as I can see) enable what this feature request is all about. Am I right? Do you think it may be better to wait for this to release and then add support for it (since it's afaik a fact that the mongodump utility, as it currently stands, is already a safe way of doing hot backups?)\n\n@tomash and @trystant what do you think? I believe it'll be quite a bit cleaner/easier to just use the self-contained `mongodump --lock` flag once it comes out and add support for that? Though we don't know when it'll come out. But I heard that the MongoDB Core releases stuff quite frequently. Let me know your input.\n @rgnitz @trystant thanks for the info.\n\n@tomash @lapluviosilla since `--lock` won't be available until at least version 1.9 then I'm fine with there being a more \"hackish\" version until MongoDB version 2.0+, since odd-numbered versions are considered development/unstable branches and I prefer to only support stable ones since it's likely barely anyone will be using it along with Backup.\n\n@imanel is that pull request fairly complete? It looks like it, only the exception handling hasn't been tested from what i read in the comments. We'll have to look in to that soon. Other than that it seems like we can use it?\n Gotcha. I'll put this on my to-do list and see if i can fix that exception handling later. Then i'll pull it in soon, along with another open pull request and push out a new gem containing these updates. Thanks for everyones contribution!\n I merged this time. Im applying a few changes and will probably pull in the other open pull requests as well as add a few other features and then i'll be pushing out a new gem. Expect to see this lock/fsync functionality in 3.0.15. Thanks everyone!\n Finished the merge.\n\nSee my commit log for further implementation details. I modified a bit of the code. Wrote a spec to cover the exception handling you implemented as well. Also Added a \"space prefix remover\" to the `run()` command inside the `Backup::CLI` module to ensure it removes any prefixing whitespace on each line. This'll allow us to write nicer implementation code with the `<<-EOS ... EOS` blocks without having to omit indention.\n\nI'm working on a few other issues and pull requests and will be pushing out version 3.0.15 which introduces the locking/syncing feature.\n Forgot to add the links.\n\nCommit Log (see commits for today, after the merge)\nhttps://github.com/meskyanichi/backup/commits/develop\n\nAnd i updated the Wiki (see MongoDB section)\nhttps://github.com/meskyanichi/backup/wiki/Databases\n  Hi, what exactly are you trying to back up? files, folders or databases (or all of these)?\n Right. Then what you're looking for is a Local Storage method. Currently Backup doesn't have one. Someone requested it earlier ( https://github.com/meskyanichi/backup/issues/105 ) and I've added it to my To-Do list.\n No problem!\n  Gotcha. I'll add this to the To-Do list!\n Well it'll just become an additional storage method. You can always decide whether you want to store it to 5 different locations, or just to a single location, regardless of whether its remote, local, s3, cloudfiles, another server, etc.\n @tomash As you might've guessed, \"not in progress\" at the moment. :p Lacking time to work on open source at the moment. So as I mentioned in the other issue (mongodump replacement) any pull requests are certainly welcome, also let me know if you have any questions about the code-base. Thanks!\n  ^ read the title.\n Yup. Came across it on the Ruby5 podcast. It's a good idea and simple to add to Backup, lots of people could benefit from it. Thanks!\n  Aight. I finally got around to work on Backup again, so I'm drilling through all the pull requests and feature requests now to see what can be done. I'm going to merge in your additions since it looks good.\n\nThanks! This'll be available in 3.0.15 which I'll be pushing out soon.\n  @tsigo thanks for picking this up! I've been a bit busy with another gem the past few days so haven't had time to check on Backup. I'll get back in to it soon and check your pull request.\n\nThanks for your time!\n Merged!\n  You might have to specify the full path to the backup utility. Try running `which backup` and use that with Whenever, something like:\n\n```\nevery 1.hour do\n  command \"/Users/Michael/.rvm/gems/ruby-1.9.2-p180/bin/backup perform -t <trigger here>\"\nend\n```\n\nI don't have this issue but I'm assuming it's cause it wants a full path for some reason.\n Well, figuring it out would basically mean running `which backup` on your server after installing the backup gem, it **should** return the path (at least on my server and desktop). Let me know if it works for you. :)\n No problem, good luck! \n  ^\n  Hi Fenio,\n\nThanks for pointing this out. It seems that the RSync Syncer's password functionality wasn't fully implemented. I will implement this soon and push out a new gem version.\n\nA safer practice would be to use SSH Keys rather than passwords. You could use that if you like. Regardless, I'll be adding the password feature in the near future and then you'll be able to use it. Thanks!\n SSH should be the default protocol over which RSync transfers files, and I'm not explicitly setting it to any other transfer protocol, so SSH keys should work in this case.\n\nThough if you have any problems, let me know. Also it's good you point out about the wiki lacking information on this. I'll keep that in mind  as well. Thanks again!\n This gem was built to run backups from servers, not from Desktops.\n\nLots of people don't have large databases, but would like to store them to a cheap location like Dropbox which is free. In this case you'd use a [Storage](https://github.com/meskyanichi/backup/wiki/Storages) method.\n\nIf you want to skip the whole **package**, **compression** and **encryption** process and want to directly mirror directories of your production box to Amazon S3 or another remote server, then you use a [Syncer](https://github.com/meskyanichi/backup/wiki/Syncers) instead of a Storage method.\n\nIsn't that what you're looking for? If not, what exactly are you trying to accomplish?\n Gotcha. So what you're looking for is an additional way (perhaps a new Syncer) to handle true incremental backups that actually stores revisions which you can roll back while using minimum storage space?\n\nI haven't had the time to look in to this but I'm definitely interested in looking in to it when I can. What do you feel are good tools to do this? rdiff-backup? any others?\n\nThanks for your feedback!\n Thanks. I'll have a look at some point.\n\nClosing issue with f03e37254376fcb4f81b468678b77793dba2ec69 - Should fix the password issue by writing it to a tempfile so rsync can read it out again.\n  Right. I myself don't have any experience with FreeBSD so I'm not sure how to work around this issue. How would you normally invoke the mysqldump utility, just provide the full path? The only thing Backup does is run a `which mysqldump` in this case to detect the fullpath (to avoid issues in Cron), but of course since it's not in the PATH the it won't find the full path at all (which is why it fails).\n\nIf you know of any ways to find the full path automatically, let me know. Also as you mentioned it'll probably be a good idea to raise an error when a utility like mysqldump cannot be found. I guess this is by default the case when `which mysqldump` returns an empty line, even from cron.\n\nLet me know what you think or if you have any suggestions/ideas. Thanks!\n Oh, by the way, in the mean time you should be able to fix your issue by defining the `utility_path` in your configuration:\n\n```\nBackup::Configuration::Database::MySQL.defaults do |mysqldump|\n  mysqldump.utility_path = '/usr/local/bin/mysqldump'\nend\n```\n\nThis'll force Backup to use the specified `mysqldump` utility rather than detecting it.\n I believe a good way to handle this is to use the return value to see if something went wrong. Should be abel to use this to determine whether something went wrong (like if the utility doesn't exist).\n This commit should check whether the utility that gets invoked ( `mysqldump` in your case ) if it could be found or not based on the error code that gets returned.\n\nThis is the commit that implements a lot of error raising / debugging improvements:\n3019e704a5cac5f20e7b7a1558954c12b097292e\n\nIf the `mysqldump` utility could not be found it'll raise an exception, rather than ignoring it and continuing the process. (this goes for any command from now on, whether its `mysqldump`, `pgdump`, `mongodump` or even other utilities like `tar`, `gzip` etc).\n\nI'm pushing out a new gem, let me know if it works on FreeBSD if you can (that it does indeed raise an exception since it can't find the mysql utility when Backup tries to auto-detect it).\n\nThanks!\n Just pushed Backup version 3.0.14, if you can, install it and see if you get an exception raised when it can't find the `mysqldump` utility.\n Great, thanks for trying it out!\n\nYeah I forgot to add the `utility_path` global database option to the wiki, sorry about that. I added it a few hours ago. : )\n\nhttps://github.com/meskyanichi/backup/wiki/Databases\n\nAlso, you're right, it's probably a good idea to mention the `utility_path` option in the exception templates. I'll leave this ticket open so I don't forget.\n Added a more helpful message to the exception.\n\nClosed by 9d97680d54f09a968f77ea8556aedfd6a0373118\n  Good point. I'll have to revise all the removal methods on all the storage methods actually since it might be an issue for other storage methods as well.\n Looks like it's only the Dropbox storage that I forgot to handle. I'll fix this up in a few. Thanks for pointing this out.\n Patched by fa3a868addb8f5aea3f414ba287fd3d2651805c5\n  Hey mate. Thanks! I tried it out and it works. I'm just cleaning it up now, adding comments everywhere. Moving the Campfire and Room classes to a different location and reviewing all of it. I'll have this included in a new gem version soon, thanks for your contribution, great addition!\n No worries. It's all good if the core is there then I can restructure stuff easily.\n  Requested Feature: Campfire notifications.\n\ndeveloper resource:\nhttp://developer.37signals.com/campfire/\n Finished implementing it in 35d78cc21e22bdb8cf48752f4115bbdb4bb9205a. Closing issue.\n  Hey, thanks for this! I actually only tested the whole Backup gem against OSX and Ubuntu. From what I can see the `tar` utility used with that distro also supports the `-f` param so i should be able to merge this in soon. Ty!\n  Are you running multiple backups simultaneously? (3 different triggers?)\n\nThen you might want to consider trying to invoke them like so:\n\n```\nbackup perform --triggers backup1,backup2,backup3\n```\n\nThis will perform 3 triggers in a row (one by one, not all at once). Let me know if this helps.\n Closing issue since this should work.\n  Hi!\n\nThe first thing that comes to mind is: Is the Cron triggering Backup from the same user as when you triggered it manually via the command line? It seems the authentication (with the ssh key) fails.\n\nAlso, have you set up a passphrase for your ssh key?\n\nAre you currently performing backups on OSX or Linux? (in the above example, it looks like OSX looking at the paths)\n\nI'm not entirely sure what may be causing this problem, but maybe if you could answer my questions I could reproduce the error and have a look myself.\n\nThanks!\n Maybe try to generate another SSH Key without a passphrase? (or do you **need** the passphrase?)\n Great. I'll actually leave this ticket open since there should be a way to pass in the passphrase you wanted. I have a hunch that if i pass it in the options for the NET::SCP library `:passphrase => 'mypassphrase'` it'd probably also work for your main ssh key. I'm not positive but I find it unlikely that that option doesn't exist at all. It's just that I never actually used a passphrase myself so i didn't bother to check if it actually existed.\n\nGlad your workaround works for now! I'll see what i can do about the passphrase later. :)\n  Ty, pulled.\n  Hi. Thanks for pointing this out. I already considered this a while ago but for some reason I believe I got ahold of an old version that seemed to be either abandoned or just didn't work, so I assumed it was no longer supported.\n\nI just briefly checked out s3sync.rb and successfully got it up and running (with Ruby 1.8.7 and REE, but not with Ruby 1.9.2 due to the fact that it can't find the md5 encryptor library.\n\nI haven't looked in to this yet myself but if you know why I get the following error and how to fix it, it'd save me some research time.\n\n```\n/Users/Michael/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file to load -- md5 (LoadError)\n    from /Users/Michael/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from ./s3sync:29:in `<module:S3sync>'\n    from ./s3sync:17:in `<main>'\n```\n\nIf not then I'll see why it occurs. Probably used to be in Ruby's core and was removed since 1.9 or something.\n\nHowever since I got it to work under 1.8 and it seems like a very useful addition to the Backup gem I will most certainly implement this very soon. It also has the ability to mirror using the `--delete` flag, similar to RSync. However do you by any chance know if it'll transfer the **whole** file again when it's only partially changed? Like for example a MySQL dump? Or will it **always** transfer the whole file, even if only a couple of bytes of that particular file changed?\n\nPreviously, before I implemented **Syncers** this was the reason why I didn't use the **s3sync** approach, because from what I read there was no way to get the real RSync ( diff ) effect on files on the S3 filesystem, so it'd always transfer the full bytes, and since **storages** in Backup always bundled everything up as a single **.tar.gz.enc** file, the whole syncing purpose would be pointless since it'd always transfer the whole file. However since the introduction of **Syncers** in Backup, where you can specify a whole directory (and sub-directories) to directly sync to a remote location, bypassing the whole copy/tar/compress/encrypt procedure then s3sync will regardless be an very awesome addition to the Backup gem.\n\nSo let me know if you have any info on the above error which only occurs in Ruby 1.9, and whether you know if a file that only changed a few bytes will be completely re-uploaded.\n\nThanks!\n Something tells me that S3Sync hasn't been updated to work with Ruby 1.9.2 :/\n Thanks. Yeah actually for Ruby 1.9.2 the path to the md5 library is `require 'digest/md5'`rather than just `require 'md5'`. That's the first thing that goes wrong in the s3sync.rb file. The second issue is in the Thread library:\n\n```\n/Users/Michael/Desktop/s3sync/thread_generator.rb:112:in `end?': undefined method `critical=' for Thread:Class (NoMethodError)\n    from /Users/Michael/Desktop/s3sync/thread_generator.rb:129:in `next?'\n    from ./s3sync.rb:366:in `main'\n    from ./s3sync.rb:738:in `<main>'\n```\n\nHopefully there aren't much more issues that need to be made compatible, then we can make it Ruby 1.9 compatible and add S3Sync to Backup.\n I just found this on GitHub, a Ruby 1.9.2 compatible S3Sync:\n\nhttps://github.com/aproxacs/s3sync\n\nHowever now I run it with Ruby 1.8.7 and i get errors ha. But this is a good step in the right direction. Going to see what can be done. In the worst case we now have 2 separate libraries that work the same, but one is compaitble for Ruby1.8 and the other for Ruby1.9\n Update:\n\nRuby 1.9 compatible S3Sync\n    gem install aproxacs-s3sync\n\nRuby 1.8 compatible S3Sync\n    gem install s3sync\n\nThe user will have to ensure the correct one is installed for their Ruby version.\n Well I actually got it working with Backup. I'm just running some more tests on it, and writing more specs, and i'll push a gem soon that includes the S3 Syncer. :) hurray. Works both with Ruby 1.8 and Ruby 1.9, but you gotta use a different gem depending on which you want to use (as stated above in my comment) but that's absolutely no problem, just a different `gem install` command.\n Boom: https://github.com/meskyanichi/backup/commit/69e81d0f3745a4797ec3185ba29de619778b94b6\n\nThis commit integrates S3Sync with the Backup gem. Going to update the Syncer Wiki page.\n And it has been released. \n\n```\ngem install backup\n```\n\nand check out the docs here: https://github.com/meskyanichi/backup/wiki/Syncers\n You're welcome! I know I'll enjoy this one as well : )\n @ponny add what to the wiki? the S3syncer? It's here already: https://github.com/meskyanichi/backup/wiki/Syncers\n  Enable the ability to specify multiple `--trigger`'s to perform.\n\nExample:\n    backup perform --triggers backup1,backup2,backup3\n\nThis would perform the 3 backup configurations in the specified order.\n So you would invoke it like so?\n\n```\nbackup perform --trigger backup1 backup2 backup3\n```\n I merged your commit and applied some changes. Check it out:\n\nThe changes:\nhttps://github.com/meskyanichi/backup/commit/aad1b297249d06c46998ee94cf32637087fe462a\n\nThe current version of the backup bin file:\nhttps://github.com/meskyanichi/backup/blob/develop/bin/backup\n\nhave not yet released a new gem. I tested this locally, you can now provide either a single trigger, or multiple triggers, and they will run in the order specified.\n\n```\n$ backup perform --trigger my_backup\n```\n\nand\n\n```\n$ backup perform --triggers backup1,backup2,backup3,backup4\n```\n\nAlso added an alias ( `--triggers` - plural ) just some more syntactical sugar.\n This has been added in Backup 3.0.7\n\n```\ngem install backup\n```\n\nhttps://github.com/meskyanichi/backup/wiki/Triggers\n  Cherry-picked this in to develop. Ty\n  What is the file size you're uploading to Dropbox? Their docs state that the file size limit is 300MB. I'm not sure what kind of error it throws if it gets exceeded though.\n\nBut you're right in general it'd be a good idea to allow the user to set the timeout. i'll leave this issue open as a To-Do. Thanks!\n Weird that it takes more than 3 minutes to transfer 13mb from a data center to Dropbox. Maybe you can check your log `~/Backup/log/backup.log` and see if there is a gap between the time that it started transferring to Dropbox and it raising an exception. It should display a time cause when an error gets raised it should clean up the temp files and that gets logged as well.\n\nIf possible show me the log :)\n Hmm. As you said it might be that your account has multiple connections open at the same time.\n\nAlso, your suggestion for a `--trigger b1,b2,b3` is a very nice idea! That would be a great addition, also reduces the amount of crontasks people need to set.\n\nI will both add this feature, and also pull in your timeout commit soon. I'll open a new ticket with the `--trigger` chaining feature. Thanks, great idea!\n Merged in to develop.\n  Is this error raised because it tried to send the same message twice in a row on the same Twitter account?\n Ok, what do you think of this?\n\n```\n##\n# Sends a tweet informing the user that the backup operation\n# proceeded without any errors\ndef notify_success!\n  twitter_client.update(\"[Backup::Succeeded] #{model.label} (#{ File.basename(Backup::Model.file) })\")\nend\n\n##\n# Sends a tweet informing the user that the backup operation\n# raised an exception and will send the user the error details\ndef notify_failure!(exception)\n  twitter_client.update(\"[Backup::Failed] #{model.label} (#{ File.basename(Backup::Model.file) })\")\nend\n```\n\nIt'll basically contain the backed up filename (which is always unique). then you also know which file was actually backed up.\n What would this Hashtag enable?\n Alright cool. Then for now I'll leave it at this and push out a new gem that fixes this issue. Then later we can see for additional options to notifiers. Thanks!\n Pushed out version 3.0.6 that fixes this issue. Thanks!\n  Hi! Merging now and pushing out a new gem! Thanks for these additions!\n  Thanks, I'm pulling this and right now and going to see how it works. I'll get back to you soon. Thanks! : )\n  Yup! As with all the other modules (Databases, Storages, Encryptors, Compressors), Notifiers are just as easy to extend and add new notifiers to.\n\nA Backup::Notifier::Twitter would be a nice addition indeed!\n\nI am currently working on a \"sync\" solution, namely the **sync_with** (similar to **store_with** option) that bypasses the \"copying, packaging, compressing and encrypting\" and directly syncs folders from the production server to the backup server. \n\nDSL will look something like this: http://pastie.org/private/k1t6tk003gg1e8tofda4ya\n\nSo i'm currently building this but feel free to fork the repository and clone the **develop** branch. You'll probably only have to do 3 things:\n- Create a `lib/backup/notifier/twitter.rb`\n- Create a `spec/notifier/twitter_spec.rb`\n- Add `\"Twitter\"` to the array `NOTIFIERS   = ['Mail']` in `lib/backup.rb`\n\nThat should be enough to get the Twitter notifier up and running. You can use `lib/notifier/mail.rb` as an example file. It's pretty minimalistic.\n\nLet me know if you have any further questions!\nThanks!\n Forgot to mention 2 things that you'll also want to do.\n\n**Being able to set \"defaults\" for the Twitter notifier.**\n\nTo do this you simply need to create this file: `lib/backup/configuration/notifier/twitter.rb` (Just copy the `lib/backup/configuration/notifier/mail.rb` and change the attributes to for example the Twitter credentials and it should work out of the box).\n\n**And don't forget to autoload**\n\nAgain inside `lib/backup.rb` you see a lot of `autoload` lines. Be sure to add the paths to the twitter.rb (both the notifier as well as the configuration files) so they are are required.\n\nBut that should be it. Again let me know if you need any help or have any questions.\n Thanks a lot! Glad to hear that! And no problem, re-opening the ticket now. : )\n I have merged your branch in to the develop branch, cleaned up the code and comments a bit. Going to to add the Twitter notifier to the Wiki.\n\nThanks for your contribution! : )\n  Strange. Seems to be failing over something very simple. At a first glace it seems to try to allocate 1gig of data in to memory. Then later it looks like it has issues determining where the `rm` command is located.\n\nI will try to reproduce this error. If you have time and if possible, could you try this in Ruby 1.9.2 and see if the error gets raised here as well? I noticed the above error might possibly a bug in Ruby 1.8.\n\nThanks, I'll post here if I find anything!\n I think I found the issue. Ouch!\n\nI attempted to upload a file around 1gb and look at the memory consumption. Weird. This happens once it begins transferring to Amazon S3. It tries to allocate to **allocate** the whole file in memory.\n\nI'll look in to this, using the Fog library as I thought it supported **streaming** rather than allocating everything before transferring.\n\nNote: this applies to Ruby 1.9.2, Ruby Enterprise Edition\n I found the issue and I'll apply the patch for version 3.0.1. I'll go through all the storage methods to see if the bug applies to the other protocols and fix these as well and this memory issue should be fixed as of 3.0.1 which i'll release today.\n\nThanks for your feedback!\n You're welcome!\n\nNote to self:\n- Amazon S3 allocation issue fixed\n- Rackspace Cloud Files seems like it doesn't support streaming (asking Fog gem author)\n- Dropbox does stream\n The Amazon S3 memory allocation issue has been patched in Backup 3.0.1 which is now available.\n\n```\ngem install backup\n```\n\nAbout Rackspace Cloud Files:\n\nI spoke with Wesley Beary (of the Fog gem), and it seemed there was a small bug in the Rackspace Cloud Files storage adapter which led to the same issue I produced (but from the Backup gem's side) that it allocates memory for the whole file, and doesn't stream. Wesley has patched this issue here: https://github.com/geemus/fog/commit/9bdf1ed585b885132ece112c63d5ad6d28da294e\n\nOnce he releases a new gem, I'll update the Backup gemspec and add his new gem as a dependency so that the latest version gets installed that includes the Rackspace CF patch.\n  Hi, I actually tested this before hand and had encryption come before compression, but it turned out that the more data you had to encrypt, the larger the file became. So for this reason I actually let it encrypt before compress. (I had it the way you described it prior to that).\n\nHowever, I only tested that on files around 10-20mb in size so maybe if you're dealing with larger files.. 50-500+ mb that doesn't apply anymore?\n\nThanks for your feedback, I'll double check it soon. : )\n Gotcha. Thank you both for pointing this out and providing me with that link. I'll push out a new version soon ( v 3.0.2 ) that changes the order to Compression => Encryption.\n Released Backup 3.0.2 which changes the order to Compression => Encryption.\n  Hi Pat,\n\nThanks for your work on this. Although it hasn't been pulled, I took your idea for failure notifications in to Backup 3 (the upcoming huge 100% rewrite release). This release should be out soon and will enable both notifications on success and failure.\n\nSee the new DSL here:\nhttp://pastie.org/private/3hfkoj14fndvnbkblnv2a\n\nsee line 53 for Mail notifications.\n\nThanks!\n Also, Backup 3 is on the develop branch here for additional information:\nhttps://github.com/meskyanichi/backup\n", "text_all_count": 22471, "text_word_token": ["Looks", "good", "NUMBER", "Ill", "merge", "it", "in", "NUMBER", "Thanks", "SteveNewson", "mind", "add", "an", "entry", "with", "more", "information", "regard", "PushOver", "to", "the", "Wiki", "LINK", "This", "would", "help", "people", "unfamiliar", "with", "this", "service", "tool", "to", "get", "up", "and", "run", "easier", "NUMBER", "Excellent", "NUMBER", "No", "rush", "just", "whenever", "you", "have", "time", "NUMBER", "I", "ll", "update", "the", "README", "now", "and", "release", "a", "new", "patch", "version", "of", "the", "gem", "NUMBER", "Long", "ass", "commit", "bro", "There", "we", "go", "NUMBER", "I", "think", "we", "could", "allow", "putting", "in", "a", "password", "directly", "but", "provide", "a", "warning", "comment", "in", "the", "command", "line", "under", "backup", "help", "decrypt", "and", "on", "the", "wiki", "where", "we", "point", "out", "it", "ll", "store", "it", "in", "Bash", "history", "by", "typing", "it", "out", "instead", "of", "use", "a", "password", "file", "NUMBER", "I", "think", "this", "kind", "of", "security", "should", "be", "up", "to", "the", "end", "user", "as", "long", "as", "they", "be", "aware", "of", "the", "potential", "security", "vulnerabilities", "NUMBER", "Thanks", "Since", "we", "re", "bumping", "stuff", "anyway", "now", "I", "notice", "gem", "fog", "NUMBER", "on", "RubyGems", "NUMBER", "org", "NUMBER", "If", "you", "want", "to", "see", "if", "this", "be", "compatible", "with", "Backup", "I", "ll", "pull", "it", "in", "NUMBER", "Looks", "good", "thanks", "Mind", "point", "the", "pull", "request", "to", "the", "develop", "branch", "instead", "Master", "branch", "be", "only", "for", "release", "NUMBER", "Then", "i", "ll", "pull", "it", "in", "NUMBER", "Thanks", "for", "trying", "out", "Fog", "NUMBER", "Ah", "yeah", "I", "notice", "the", "deprecation", "warnings", "when", "I", "generate", "the", "config", "NUMBER", "Can", "someone", "explain", "to", "me", "why", "they", "associate", "Ruby", "on", "Rails", "or", "something", "similar", "a", "web", "framework", "with", "Backup", "a", "command", "line", "utility", "I", "don", "t", "really", "understand", "why", "people", "would", "add", "Backup", "to", "their", "applications", "Gemfile", "at", "all", "NUMBER", "ssh", "user", "ip", "p", "TAG", "gem", "install", "backup", "NUMBER", "generate", "config", "models", "NUMBER", "configure", "config", "models", "backup", "perform", "t", "TAG", "That", "s", "it", "NUMBER", "I", "don", "t", "see", "how", "people", "relate", "Backup", "to", "a", "Ruby", "application", "NUMBER", "Rather", "it", "s", "relate", "to", "datastores", "and", "file", "systems", "which", "don", "t", "have", "gem", "dependencies", "NUMBER", "So", "the", "Backup", "dependencies", "should", "be", "completely", "decoupled", "from", "your", "application", "dependencies", "and", "cause", "zero", "conflict", "NUMBER", "We", "also", "do", "not", "want", "to", "over", "complicate", "the", "gem", "NUMBER", "I", "have", "not", "thought", "of", "release", "a", "gem", "for", "every", "potential", "dependency", "that", "comes", "around", "NUMBER", "Seeing", "as", "we", "have", "a", "fairly", "large", "list", "of", "components", "make", "a", "gem", "for", "everything", "seems", "tedious", "to", "me", "NUMBER", "I", "can", "see", "some", "benefits", "but", "I", "don", "t", "know", "if", "they", "outweigh", "the", "cons", "that", "come", "with", "them", "NUMBER", "Please", "understand", "that", "Backup", "be", "a", "fairly", "large", "project", "with", "a", "ton", "of", "dependencies", "and", "it", "s", "not", "very", "easy", "to", "maintain", "NUMBER", "It", "s", "hard", "to", "make", "everyone", "happy", "NUMBER", "Feel", "free", "however", "to", "convince", "burns", "and", "myself", "why", "it", "should", "be", "add", "to", "a", "Gemfile", "of", "a", "Ruby", "application", "rather", "than", "just", "use", "it", "in", "the", "stand", "alone", "way", "it", "was", "meant", "to", "be", "NUMBER", "There", "be", "a", "lot", "of", "non", "Ruby", "programmers", "that", "only", "use", "Ruby", "to", "utilize", "tool", "such", "as", "Backup", "Whenever", "Capistrano", "Chef", "Puppet", "etc", "NUMBER", "and", "don", "t", "use", "anything", "like", "Rails", "Sinatra", "Merb", "Padrino", "etc", "NUMBER", "Fair", "enough", "NUMBER", "I", "don", "t", "think", "this", "fact", "of", "keep", "backup", "outside", "of", "rails", "project", "has", "be", "clear", "in", "communication", "enough", "NUMBER", "I", "have", "be", "use", "backup", "for", "over", "NUMBER", "years", "and", "always", "worked", "inside", "of", "rails", "even", "with", "Gemfile", "NUMBER", "I", "believe", "people", "just", "assume", "that", "it", "all", "works", "until", "it", "doesn", "t", "NUMBER", "Lately", "though", "dependency", "graph", "of", "backup", "gem", "has", "expanded", "and", "it", "causes", "such", "conflict", "to", "occur", "often", "NUMBER", "Backup", "in", "fact", "did", "start", "out", "as", "a", "Rails", "plugin", "back", "in", "version", "NUMBER", "not", "sure", "if", "it", "was", "in", "version", "NUMBER", "NUMBER", "In", "any", "case", "once", "I", "release", "version", "NUMBER", "or", "NUMBER", "I", "came", "to", "realize", "what", "I", "just", "stated", "about", "a", "backup", "utility", "having", "nothing", "to", "do", "with", "a", "web", "framework", "and", "only", "overcomplicates", "things", "due", "to", "compatibility", "issue", "and", "that", "it", "would", "be", "much", "better", "suited", "as", "it", "s", "own", "thing", "NUMBER", "About", "extracting", "optional", "functionality", "as", "plugin", "I", "believe", "it", "be", "a", "matter", "of", "runtime", "vs", "NUMBER", "build", "time", "convenience", "NUMBER", "Sure", "it", "will", "be", "more", "work", "to", "maintain", "NUMBER", "separate", "gems", "as", "oppose", "to", "one", "NUMBER", "But", "most", "end", "users", "use", "only", "NUMBER", "NUMBER", "of", "those", "optional", "features", "and", "will", "be", "just", "happy", "to", "install", "those", "and", "go", "their", "way", "NUMBER", "We", "would", "have", "to", "evaluate", "this", "some", "time", "NUMBER", "Some", "warning", "to", "rails", "folks", "to", "keep", "backup", "separate", "from", "Gemfile", "will", "help", "NUMBER", "Will", "probably", "add", "something", "like", "that", "to", "the", "README", "sometime", "NUMBER", "Thanks", "for", "the", "feedback", "Personally", "I", "believe", "you", "should", "be", "able", "to", "bundle", "backup", "with", "your", "Rails", "app", "NUMBER", "I", "set", "require", "false", "within", "the", "Gemfile", "so", "that", "it", "isn", "t", "be", "loaded", "with", "the", "app", "NUMBER", "But", "doesn", "t", "think", "still", "cause", "dependency", "issue", "when", "run", "bundle", "install", "The", "reason", "I", "do", "this", "be", "so", "that", "I", "can", "keep", "all", "my", "application", "dependencies", "within", "the", "project", "NUMBER", "That", "include", "services", "you", "may", "not", "consider", "part", "of", "the", "application", "such", "as", "Whenever", "Backup", "Capistrano", "God", "and", "anything", "else", "I", "be", "relying", "on", "for", "my", "application", "NUMBER", "Understandable", "NUMBER", "While", "it", "may", "make", "sense", "for", "you", "to", "use", "Backup", "outside", "the", "context", "of", "your", "application", "it", "simply", "causes", "more", "work", "more", "documentation", "more", "organization", "and", "more", "processes", "to", "manage", "NUMBER", "I", "m", "just", "work", "on", "some", "small", "apps", "and", "it", "works", "much", "better", "to", "keep", "everything", "I", "need", "within", "the", "application", "repository", "NUMBER", "It", "helps", "new", "developers", "bootstrap", "the", "application", "and", "have", "everything", "they", "need", "in", "one", "place", "NUMBER", "It", "also", "allows", "me", "to", "have", "my", "Capistrano", "deployment", "scripts", "manage", "update", "my", "Backup", "configuration", "when", "necessary", "NUMBER", "While", "I", "understand", "you", "not", "wanting", "to", "always", "support", "dependency", "update", "I", "think", "it", "s", "foolish", "not", "to", "update", "this", "Fog", "dependency", "to", "please", "the", "dozen", "or", "so", "people", "in", "favor", "of", "it", "NUMBER", "More", "time", "be", "be", "spent", "debating", "whether", "or", "not", "to", "update", "Backup", "to", "better", "support", "cloud", "storage", "than", "it", "would", "take", "to", "simply", "update", "it", "when", "I", "ve", "already", "submitted", "and", "test", "a", "pull", "request", "for", "it", "NUMBER", "The", "problem", "be", "that", "Rails", "and", "typically", "the", "gems", "people", "typically", "use", "around", "Rails", "evolve", "at", "a", "rapid", "pace", "NUMBER", "If", "these", "tool", "constantly", "update", "then", "people", "will", "constantly", "be", "come", "back", "to", "Backup", "ask", "for", "dependency", "update", "because", "otherwise", "Bundler", "be", "unable", "to", "bundle", "their", "app", "due", "to", "Backup", "use", "an", "older", "version", "of", "fog", "compared", "to", "what", "another", "dependency", "in", "the", "app", "requires", "NUMBER", "It", "be", "very", "plausible", "that", "someone", "trying", "to", "use", "Backup", "even", "separately", "from", "their", "application", "could", "still", "run", "into", "this", "dependency", "error", "if", "they", "have", "multiple", "version", "of", "different", "Gems", "install", "NUMBER", "So", "to", "me", "the", "argument", "that", "this", "should", "be", "keep", "separate", "from", "the", "Rails", "app", "doesn", "t", "hold", "much", "weight", "personally", "NUMBER", "Backup", "always", "requires", "gems", "through", "the", "gem", "function", "before", "require", "ing", "it", "meaning", "it", "always", "loads", "in", "the", "correct", "gem", "version", "and", "do", "not", "conflict", "even", "if", "newer", "version", "be", "install", "NUMBER", "Of", "course", "if", "you", "re", "bundling", "it", "along", "with", "say", "Carrierwave", "in", "a", "Rails", "app", "which", "also", "uses", "Fog", "but", "a", "later", "version", "then", "it", "will", "conflict", "because", "of", "Bundler", "NUMBER", "Now", "despite", "all", "of", "this", "it", "might", "be", "worth", "trying", "to", "just", "losen", "the", "dependencies", "to", "a", "rather", "than", "where", "any", "newer", "version", "would", "work", "rather", "than", "needing", "a", "certain", "minor", "version", "of", "a", "gem", "NUMBER", "I", "think", "most", "things", "be", "backwards", "compatible", "so", "there", "would", "less", "likely", "be", "need", "for", "dependency", "update", "when", "other", "gem", "authors", "update", "their", "gems", "and", "dependencies", "NUMBER", "What", "do", "other", "people", "think", "of", "this", "Agreed", "NUMBER", "to", "Jeff", "More", "time", "be", "be", "spent", "debating", "whether", "or", "not", "to", "update", "Backup", "to", "better", "support", "cloud", "storage", "than", "it", "would", "take", "to", "simply", "update", "NUMBER", "Gemfile", "bundle", "NUMBER", "were", "made", "to", "keep", "things", "simple", "and", "easy", "NUMBER", "Why", "do", "not", "use", "them", "Maybe", "it", "brings", "some", "extra", "work", "NUMBER", "But", "that", "s", "the", "strength", "of", "social", "code", "NUMBER", "You", "don", "t", "have", "to", "do", "all", "by", "yourself", "NUMBER", "Is", "this", "case", "in", "particular", "we", "ve", "seen", "this", "NUMBER", "The", "solution", "was", "given", "by", "a", "user", "and", "publish", "in", "a", "branch", "ready", "to", "be", "merge", "NUMBER", "I", "understand", "that", "social", "code", "in", "a", "lot", "of", "cases", "reduces", "the", "amount", "of", "work", "there", "be", "to", "be", "do", "by", "the", "maintainers", "NUMBER", "But", "consider", "that", "any", "change", "might", "also", "have", "a", "negative", "impact", "on", "the", "project", "NUMBER", "Backup", "NUMBER", "be", "a", "good", "example", "of", "that", "I", "pull", "in", "too", "much", "unnecessary", "things", "and", "the", "gem", "became", "unmaintainable", "NUMBER", "Now", "this", "might", "look", "like", "a", "minor", "insignificant", "change", "NUMBER", "However", "I", "still", "feel", "it", "s", "an", "unnecessary", "one", "NUMBER", "So", "let", "me", "explain", "how", "I", "m", "dealing", "with", "my", "own", "projects", "when", "I", "deploy", "to", "EC", "NUMBER", "VPS", "or", "dedicated", "servers", "NUMBER", "NUMBER", "Mina", "Capistrano", "for", "application", "deployment", "NUMBER", "Chef", "for", "provisioning", "When", "I", "deploy", "my", "application", "I", "scope", "it", "out", "to", "only", "doing", "what", "be", "essential", "for", "get", "the", "application", "deployed", "and", "run", "NUMBER", "Backup", "plays", "no", "role", "here", "NUMBER", "However", "when", "I", "provision", "my", "server", "with", "Chef", "installing", "configuring", "everything", "like", "nginx", "mongodb", "redis", "ruby", "deployment", "user", "etc", "etc", "Backup", "be", "no", "exception", "here", "NUMBER", "I", "tell", "Chef", "to", "install", "Backup", "and", "Whenever", "NUMBER", "I", "tell", "it", "to", "write", "my", "Backup", "main", "config", "to", "root", "Backup", "config", "NUMBER", "rb", "my", "model", "to", "root", "Backup", "models", "NUMBER", "rb", "and", "Whenever", "s", "schedule", "NUMBER", "rb", "to", "root", "Backup", "schedule", "NUMBER", "rb", "NUMBER", "Once", "in", "place", "I", "tell", "it", "to", "update", "the", "crontab", "with", "whenever", "update", "crontab", "i", "myapp", "f", "root", "Backup", "schedule", "NUMBER", "rb", "NUMBER", "Done", "NUMBER", "Backup", "be", "now", "in", "place", "and", "be", "performing", "scheduled", "backups", "NUMBER", "In", "my", "opinion", "this", "be", "what", "you", "should", "be", "doing", "NUMBER", "Zero", "gem", "conflict", "should", "occur", "when", "you", "do", "it", "this", "way", "which", "I", "consider", "the", "appropriate", "way", "NUMBER", "Keep", "a", "separate", "Chef", "repository", "aside", "of", "your", "App", "repository", "NUMBER", "I", "understand", "people", "will", "always", "have", "mix", "feelings", "but", "considering", "everything", "should", "work", "when", "you", "do", "not", "directly", "tie", "it", "in", "to", "a", "Ruby", "app", "means", "it", "s", "not", "broken", "and", "Rails", "isn", "t", "an", "excuse", "to", "update", "any", "Backup", "dependencies", "NUMBER", "A", "bug", "issue", "in", "Backup", "_because_", "of", "a", "dependency", "of", "course", "be", "a", "valid", "reason", "for", "update", "a", "dependency", "assuming", "the", "update", "fix", "that", "particular", "bug", "NUMBER", "Also", "Chef", "be", "very", "easy", "to", "learn", "if", "you", "haven", "t", "already", "and", "if", "you", "re", "not", "use", "it", "you", "re", "miss", "out", "NUMBER", "Go", "check", "out", "RailsCasts", "NUMBER", "com", "for", "Chef", "Solo", "then", "check", "out", "the", "Knife", "Solo", "and", "Librarian", "gems", "which", "make", "managing", "cookbooks", "easy", "NUMBER", "It", "makes", "a", "world", "of", "a", "difference", "compared", "to", "regular", "shell", "scripts", "or", "use", "Capistrano", "to", "as", "a", "provisioning", "tool", "NUMBER", "I", "m", "not", "sure", "whether", "I", "m", "going", "to", "want", "to", "change", "to", "dependencies", "NUMBER", "Because", "this", "has", "a", "lot", "higher", "potential", "for", "cause", "issue", "than", "a", "simple", "Rails", "dependency", "conflict", "NUMBER", "If", "Fog", "do", "something", "to", "it", "s", "API", "cause", "backwards", "incompatibility", "then", "Backup", "be", "forced", "to", "push", "out", "a", "new", "gem", "just", "because", "Fog", "decided", "to", "change", "it", "s", "API", "in", "a", "newer", "version", "which", "cause", "people", "that", "install", "Backup", "afterwards", "to", "break", "and", "start", "posting", "issue", "regard", "that", "again", "here", "NUMBER", "It", "ll", "become", "an", "endless", "loop", "which", "in", "my", "opinion", "be", "unnecessary", "and", "avoidable", "by", "just", "having", "users", "use", "Backup", "as", "it", "should", "be", "use", "which", "be", "stand", "alone", "NUMBER", "I", "hope", "people", "can", "understand", "this", "decision", "NUMBER", "One", "more", "thing", "to", "note", "seeing", "as", "most", "people", "will", "be", "use", "Capistrano", "Bundler", "Backup", "NUMBER", "If", "you", "really", "don", "t", "want", "to", "use", "a", "separate", "provisioning", "tool", "like", "Chef", "Puppet", "why", "don", "t", "you", "just", "make", "another", "Capistrano", "task", "instead", "ruby", "task", "manage_backup", "do", "run", "gem", "install", "backup", "end", "Then", "you", "won", "t", "have", "any", "dependency", "conflict", "with", "your", "Rails", "dependencies", "in", "Bundler", "NUMBER", "I", "understand", "your", "reservations", "but", "shouldn", "t", "it", "also", "be", "a", "goal", "of", "backup", "to", "continue", "progressing", "forward", "There", "s", "reasons", "that", "backups", "dependencies", "release", "new", "version", "like", "bug", "fix", "performance", "improvement", "or", "new", "features", "NUMBER", "I", "think", "it", "s", "in", "the", "best", "interest", "of", "the", "project", "to", "periodically", "update", "it", "s", "dependencies", "when", "there", "be", "not", "upgrade", "issue", "NUMBER", "Periodically", "update", "dependencies", "to", "keep", "up", "should", "be", "fine", "NUMBER", "Preferably", "iterate", "through", "all", "of", "Backups", "dependencies", "on", "a", "monthly", "basis", "to", "check", "for", "non", "breaking", "update", "might", "be", "worthwhile", "NUMBER", "Then", "release", "a", "gem", "based", "on", "these", "update", "NUMBER", "I", "just", "don", "t", "feel", "much", "for", "doing", "one", "commit", "to", "update", "dependencies", "and", "then", "release", "a", "whole", "new", "gem", "just", "for", "that", "NUMBER", "Otherwise", "it", "s", "very", "short", "sighted", "to", "just", "say", "hey", "guys", "my", "setup", "works", "so", "there", "s", "no", "reason", "to", "update", "it", "NUMBER", "That", "s", "how", "projects", "slowly", "die", "as", "everyone", "else", "continues", "moving", "forward", "but", "the", "project", "waits", "so", "long", "to", "try", "get", "up", "to", "date", "that", "people", "move", "on", "elsewhere", "or", "it", "becomes", "more", "of", "a", "hassle", "to", "upgrade", "than", "it", "s", "worth", "NUMBER", "Well", "why", "fix", "something", "that", "isn", "t", "broken", "really", "NUMBER", "It", "works", "perfectly", "fine", "I", "assume", "NUMBER", "Assuming", "everyone", "wouldn", "t", "associate", "Backup", "as", "a", "dependency", "for", "their", "application", "NUMBER", "That", "s", "the", "main", "issue", "NUMBER", "Backup", "isn", "t", "a", "dependency", "of", "a", "project", "NUMBER", "Everyone", "s", "project", "will", "still", "run", "even", "if", "Backup", "isn", "t", "present", "NUMBER", "This", "seems", "for", "some", "odd", "reason", "very", "hard", "to", "understand", "for", "many", "people", "NUMBER", "Lots", "of", "non", "Rubyists", "use", "Backup", "as", "their", "backup", "tool", "for", "Python", "Java", "Scala", "PHP", "etc", "projects", "NUMBER", "It", "even", "get", "ported", "to", "the", "FreeBSD", "ports", "system", "so", "even", "sysadmins", "that", "don", "t", "even", "deploy", "applications", "use", "it", "NUMBER", "It", "be", "a", "tool", "on", "it", "s", "own", "and", "be", "in", "no", "way", "relate", "to", "pretty", "much", "anything", "NUMBER", "Now", "as", "I", "stated", "I", "do", "not", "see", "a", "problem", "periodically", "update", "dependencies", "NUMBER", "But", "these", "be", "not", "meant", "to", "fix", "dependency", "conflict", "people", "have", "in", "their", "Rails", "apps", "NUMBER", "Note", "that", "if", "someone", "uses", "an", "older", "version", "of", "CarrierWave", "and", "I", "update", "Fog", "but", "CarrierWave", "isn", "t", "compatible", "then", "even", "though", "I", "update", "it", "CarrierWave", "has", "not", "and", "the", "dependency", "issue", "be", "back", "again", "NUMBER", "So", "while", "I", "agree", "that", "periodically", "update", "_all_", "the", "dependencies", "you", "see", "in", "backup", "dependencies", "list", "it", "wouldn", "t", "be", "to", "help", "fix", "Bundler", "dependency", "conflict", "NUMBER", "Like", "you", "said", "the", "benefits", "would", "be", "potential", "bugfixes", "performance", "improvement", "features", "NUMBER", "I", "will", "have", "to", "make", "this", "clear", "somewhere", "in", "the", "README", "because", "people", "keep", "open", "tickets", "thinking", "that", "backup", "be", "supposed", "to", "go", "in", "to", "a", "project", "s", "Gemfile", "NUMBER", "I", "ll", "push", "out", "a", "new", "version", "soon", "probably", "within", "the", "next", "NUMBER", "hours", "NUMBER", "Pushed", "out", "the", "new", "version", "NUMBER", "NUMBER", "Thanks", "Oh", "by", "the", "way", "mind", "update", "the", "OpenSSL", "entry", "over", "at", "LINK", "with", "these", "new", "options", "in", "the", "config", "block", "as", "well", "as", "maybe", "another", "decryption", "example", "for", "people", "use", "keys", "Cheers", "Very", "soon", "NUMBER", "It", "s", "be", "a", "long", "time", "since", "I", "did", "and", "there", "have", "be", "some", "major", "change", "since", "the", "last", "release", "LINK", "_", "NUMBER", "commit", "NUMBER", "change", "file", "with", "NUMBER", "NUMBER", "additions", "and", "NUMBER", "NUMBER", "deletions", "NUMBER", "_", "I", "m", "currently", "spamming", "commit", "to", "get", "things", "do", "for", "the", "next", "release", "particularly", "the", "majority", "of", "the", "open", "tickets", "and", "pull", "request", "here", "as", "well", "as", "some", "internal", "refactoring", "NUMBER", "I", "think", "we", "ll", "need", "just", "a", "few", "more", "days", "and", "I", "ll", "be", "release", "NUMBER", "Because", "this", "be", "quite", "a", "large", "update", "I", "d", "like", "to", "see", "how", "it", "goes", "in", "production", "for", "Backup", "users", "for", "a", "while", "and", "try", "to", "resolve", "every", "bug", "issue", "ticket", "that", "opens", "for", "it", "if", "any", "then", "keep", "push", "out", "new", "version", "until", "the", "major", "overhaul", "from", "the", "past", "NUMBER", "NUMBER", "months", "feel", "solid", "and", "be", "polished", "and", "then", "I", "m", "hoping", "to", "finally", "release", "a", "NUMBER", "once", "it", "looks", "like", "there", "aren", "t", "any", "significant", "issue", "NUMBER", "szymonpk", "sounds", "like", "a", "neat", "idea", "NUMBER", "I", "currently", "have", "zero", "knowledge", "of", "how", "to", "generate", "a", "checksum", "on", "file", "I", "assume", "there", "be", "unix", "utilities", "that", "can", "take", "care", "of", "this", "It", "would", "be", "great", "to", "be", "able", "to", "check", "whether", "the", "local", "and", "the", "remote", "file", "be", "the", "same", "and", "raise", "an", "exception", "if", "not", "NUMBER", "What", "s", "important", "be", "that", "this", "utility", "be", "both", "available", "on", "Linux", "and", "OSX", "NUMBER", "Is", "it", "a", "default", "utility", "or", "one", "that", "you", "must", "install", "via", "a", "package", "manager", "Or", "be", "there", "build", "in", "Ruby", "function", "that", "can", "do", "this", "As", "I", "said", "I", "have", "zero", "experience", "with", "this", "so", "if", "you", "could", "provide", "some", "information", "on", "what", "tool", "there", "should", "be", "use", "maybe", "some", "simple", "command", "snippets", "so", "I", "can", "try", "it", "locally", "etc", "that", "would", "be", "great", "Also", "something", "like", "this", "would", "likely", "want", "it", "s", "own", "class", "module", "depending", "on", "how", "it", "s", "be", "implement", "NUMBER", "A", "new", "object", "would", "have", "to", "be", "created", "inside", "the", "storage", "objects", "FTP", "SFTP", "SCP", "etc", "NUMBER", "Also", "I", "m", "not", "sure", "whether", "this", "would", "work", "with", "services", "like", "Amazon", "S", "NUMBER", "Cloud", "Files", "Ninefold", "Dropbox", "etc", "NUMBER", "I", "would", "assume", "you", "need", "the", "checksum", "utility", "on", "both", "the", "local", "as", "well", "as", "the", "remote", "machine", "In", "which", "case", "it", "would", "only", "work", "with", "the", "FTP", "SFTP", "SCP", "storage", "methods", "NUMBER", "But", "if", "you", "could", "provide", "me", "with", "some", "more", "insight", "in", "what", "utilities", "to", "use", "how", "it", "should", "be", "use", "maybe", "some", "code", "snippets", "to", "get", "a", "good", "checksum", "going", "so", "I", "can", "test", "it", "locally", "then", "I", "can", "better", "tell", "what", "how", "where", "and", "if", "it", "could", "should", "be", "implement", "NUMBER", "Cheers", "Looks", "good", "to", "me", "NUMBER", "If", "you", "could", "update", "the", "Wiki", "and", "add", "this", "compressor", "to", "it", "that", "would", "be", "great", "NUMBER", "I", "ll", "go", "ahead", "and", "merge", "it", "in", "NUMBER", "Thanks", "Thanks", "I", "merge", "it", "in", "Nice", "work", "josephcrim", "I", "ve", "never", "use", "Riak", "myself", "before", "but", "will", "gladly", "merge", "this", "in", "NUMBER", "Cheers", "josephcrim", "oh", "and", "would", "you", "mind", "add", "Riak", "to", "the", "databases", "list", "in", "the", "wiki", "LINK", "Thanks", "I", "be", "going", "to", "assume", "you", "re", "run", "on", "Heroku", "because", "of", "your", "other", "ticket", "in", "which", "case", "the", "s", "NUMBER", "keep", "method", "will", "not", "work", "NUMBER", "Backup", "generates", "a", "YAML", "dump", "in", "your", "Backup", "directory", "s", "NUMBER", "yml", "which", "contains", "all", "the", "references", "to", "the", "file", "that", "have", "be", "stored", "use", "the", "S", "NUMBER", "storage", "module", "NUMBER", "However", "because", "every", "time", "when", "a", "process", "restarts", "on", "Heroku", "all", "the", "data", "that", "was", "generate", "inside", "that", "particular", "dyno", "at", "the", "time", "will", "be", "lost", "and", "the", "data", "from", "the", "precompiled", "slug", "will", "be", "reset", "NUMBER", "There", "be", "no", "way", "for", "Backup", "to", "persist", "any", "object", "references", "to", "all", "your", "backups", "on", "Heroku", "because", "of", "this", "NUMBER", "On", "for", "example", "a", "regular", "Linux", "OSX", "server", "such", "data", "would", "be", "stored", "in", "HOME", "Backup", "data", "TAG", "S", "NUMBER", "yml", "and", "this", "be", "what", "happens", "on", "Heroku", "as", "well", "except", "that", "Heroku", "keep", "throw", "it", "away", "every", "time", "the", "process", "restarts", "NUMBER", "Isn", "t", "Fog", "the", "one", "that", "sets", "the", "content", "type", "Is", "there", "a", "way", "to", "force", "it", "to", "use", "octet", "stream", "How", "be", "you", "invoking", "the", "backup", "Be", "sure", "to", "set", "the", "temp", "path", "to", "a", "writable", "path", "if", "you", "re", "not", "run", "on", "Celadon", "Cedar", "e", "NUMBER", "g", "NUMBER", "the", "APP_ROOT", "tmp", "directory", "NUMBER", "backup", "perform", "t", "db_backup", "tmp", "path", "APP_ROOT", "tmp", "It", "s", "probably", "a", "good", "idea", "to", "handle", "all", "the", "logs", "cache", "in", "the", "tmp", "dir", "as", "well", "see", "options", "cache", "path", "log", "path", "NUMBER", "I", "haven", "t", "ever", "run", "Backup", "from", "Heroku", "yet", "so", "I", "m", "not", "sure", "what", "might", "be", "the", "problem", "if", "that", "isn", "t", "it", "NUMBER", "Also", "I", "assume", "that", "the", "backup", "be", "run", "on", "a", "new", "dyno", "that", "spins", "up", "specifically", "to", "run", "that", "command", "That", "s", "how", "it", "be", "on", "Cedar", "not", "sure", "how", "it", "works", "on", "Bamboo", "I", "think", "that", "change", "as", "well", "since", "their", "billing", "change", "NUMBER", "If", "that", "be", "the", "case", "then", "it", "doesn", "t", "really", "matter", "if", "the", "process", "exists", "during", "the", "cleaning", "process", "since", "all", "the", "data", "be", "lost", "anyway", "once", "the", "dyno", "spins", "down", "NUMBER", "Now", "that", "I", "mention", "it", "looking", "at", "the", "STDOUT", "Heroku", "just", "says", "Process", "exited", "right", "after", "the", "cleaning", "of", "the", "tmp", "file", "NUMBER", "This", "be", "normal", "since", "the", "dyno", "will", "be", "spun", "down", "right", "after", "the", "ruby", "process", "exits", "which", "be", "do", "after", "cleaning", "the", "tmp", "file", "NUMBER", "Are", "you", "sure", "this", "be", "actually", "an", "issue", "Looks", "like", "normal", "behavior", "to", "me", "NUMBER", "Cheers", "Michael", "Question", "by", "the", "way", "Are", "you", "saying", "you", "can", "just", "add", "the", "mongodump", "unix", "utility", "in", "to", "your", "Ruby", "app", "and", "push", "that", "to", "Heroku", "and", "it", "ll", "just", "work", "That", "s", "pretty", "sweet", "if", "that", "s", "the", "case", "I", "never", "thought", "that", "d", "work", "NUMBER", "Ah", "I", "see", "NUMBER", "Then", "it", "be", "indeed", "odd", "that", "it", "shuts", "down", "the", "process", "because", "backup", "only", "calls", "exit", "NUMBER", "when", "an", "exception", "be", "raise", "which", "be", "not", "the", "case", "here", "NUMBER", "I", "m", "not", "sure", "what", "to", "tell", "you", "really", "in", "this", "case", "NUMBER", "You", "might", "want", "to", "contact", "Heroku", "themselves", "and", "ask", "if", "they", "can", "take", "a", "look", "at", "it", "NUMBER", "Thanks", "I", "see", "what", "the", "problem", "be", "I", "actually", "overlooked", "it", "when", "I", "looked", "at", "your", "code", "snippet", "NUMBER", "It", "isn", "t", "Backup", "that", "exits", "the", "proces", "it", "s", "when", "Backup", "finishes", "after", "you", "run", "Kernel", "NUMBER", "exec", "NUMBER", "ruby", "exec", "echo", "echoes", "list", "of", "file", "in", "current", "directory", "never", "get", "here", "because", "it", "Process", "NUMBER", "exit", "right", "after", "the", "Kernel", "NUMBER", "exec", "Taken", "from", "LINK", "doc", "NUMBER", "org", "core", "NUMBER", "Kernel", "NUMBER", "html", "method", "i", "exec", "What", "you", "should", "be", "invoking", "if", "you", "do", "not", "want", "the", "shell", "to", "exit", "be", "Kernel", "NUMBER", "system", "NUMBER", "This", "will", "perform", "the", "given", "command", "in", "a", "sub", "shell", "and", "the", "master", "shell", "will", "wait", "for", "it", "to", "finish", "instead", "of", "in", "the", "master", "process", "NUMBER", "So", "when", "the", "sub", "shell", "exits", "the", "master", "shell", "continues", "where", "it", "left", "off", "NUMBER", "With", "that", "your", "clockwork", "process", "should", "no", "longer", "exit", "NUMBER", "So", "try", "Kernel", "NUMBER", "system", "in", "your", "clockwork", "process", "instead", "of", "Kernel", "NUMBER", "exec", "ruby", "every", "NUMBER", "hour", "db_backup", "do", "if", "Rails", "NUMBER", "env", "NUMBER", "production", "Kernel", "NUMBER", "system", "backup", "perform", "trigger", "db_backup", "config_file", "config", "backup", "NUMBER", "rb", "end", "end", "Hope", "this", "helps", "Yeah", "you", "could", "also", "use", "the", "regular", "uri", "library", "and", "parse", "it", "and", "split", "the", "path", "to", "get", "the", "database", "name", "NUMBER", "If", "anything", "I", "will", "be", "implement", "it", "use", "standard", "libs", "to", "avoid", "add", "more", "gem", "dependencies", "to", "Backup", "NUMBER", "Been", "wanting", "to", "do", "this", "NUMBER", "Going", "to", "see", "what", "to", "name", "it", "seeing", "as", "Backup", "CLI", "be", "already", "taken", "NUMBER", "Will", "probably", "go", "with", "Backup", "Utility", "or", "something", "NUMBER", "This", "would", "also", "make", "it", "testable", "seeing", "as", "when", "you", "load", "this", "file", "normally", "it", "ll", "initialize", "the", "CLI", "immediately", "NUMBER", "Done", "NUMBER", "fb", "NUMBER", "f", "NUMBER", "be", "NUMBER", "aeccfc", "NUMBER", "dbb", "NUMBER", "b", "NUMBER", "b", "NUMBER", "eb", "NUMBER", "d", "NUMBER", "Moved", "the", "Backup", "CLI", "in", "to", "it", "s", "own", "class", "file", "NUMBER", "Changed", "the", "Backup", "CLI", "class", "in", "to", "a", "module", "splitting", "it", "in", "to", "Backup", "CLI", "Helpers", "which", "was", "previously", "know", "as", "Backup", "CLI", "and", "Backup", "CLI", "Utility", "which", "be", "the", "new", "file", "that", "holds", "the", "Thor", "CLI", "utility", "NUMBER", "Haven", "t", "use", "MongoDB", "since", "NUMBER", "so", "I", "m", "not", "sure", "what", "a", "good", "solution", "to", "this", "problem", "would", "be", "NUMBER", "What", "happens", "when", "you", "omit", "the", "name", "variable", "Does", "it", "dump", "all", "the", "databases", "But", "what", "if", "you", "want", "to", "dump", "only", "a", "single", "database", "Would", "replacing", "this", "ruby", "def", "mongo_shell", "utility", "mongo", "database", "credential_options", "connectivity_options", "ipv", "NUMBER", "NUMBER", "join", "end", "with", "this", "ruby", "def", "mongo_shell", "utility", "mongo", "host", "port", "name", "name", "credential_options", "connectivity_options", "ipv", "NUMBER", "NUMBER", "join", "end", "do", "the", "trick", "Also", "be", "this", "type", "of", "syntax", "compatible", "with", "previous", "version", "of", "MongoDB", "such", "as", "NUMBER", "Seeing", "as", "it", "had", "the", "db", "option", "or", "did", "it", "support", "both", "syntaxes", "Cheers", "We", "would", "have", "to", "ask", "tomash", "I", "think", "he", "was", "the", "one", "that", "implement", "the", "un", "lock", "feature", "because", "MongoDB", "didn", "t", "support", "it", "at", "that", "time", "NUMBER", "Do", "you", "think", "that", "rather", "than", "doing", "what", "we", "currently", "be", "here", "LINK", "L", "NUMBER", "NUMBER", "We", "should", "be", "doing", "this", "instead", "ruby", "def", "mongo_shell", "utility", "mongo", "host", "port", "name", "name", "credential_options", "connectivity_options", "ipv", "NUMBER", "NUMBER", "join", "end", "def", "lock_database", "lock_command", "TAG", "NUMBER", "But", "it", "might", "be", "backwards", "compatible", "to", "NUMBER", "x", "NUMBER", "Most", "apps", "will", "probably", "sit", "on", "external", "services", "like", "MongoHQ", "MongoLabs", "MongoMachine", "and", "will", "be", "auto", "upgrade", "regardless", "NUMBER", "If", "anyone", "be", "run", "NUMBER", "x", "and", "has", "the", "time", "to", "pull", "down", "the", "current", "HEAD", "to", "try", "it", "out", "feel", "free", "to", "do", "so", "NUMBER", "This", "was", "the", "commit", "NUMBER", "bd", "NUMBER", "c", "NUMBER", "e", "NUMBER", "a", "NUMBER", "c", "NUMBER", "ab", "NUMBER", "dcff", "NUMBER", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "d", "When", "a", "path", "doesn", "t", "exist", "for", "the", "archiver", "it", "should", "return", "STDERR", "in", "an", "exception", "such", "as", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "Description", "for", "test", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Archive", "start", "packaging", "and", "archiving", "path", "to", "a", "file", "NUMBER", "rb", "path", "to", "a", "folder", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "Exception", "that", "get", "raise", "Backup", "Exception", "CommandFailed", "Failed", "to", "run", "tar", "on", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "NUMBER", "Exit", "code", "was", "NUMBER", "STDERR", "was", "tar", "path", "to", "a", "file", "NUMBER", "rb", "Cannot", "stat", "No", "such", "file", "or", "directory", "tar", "path", "to", "a", "folder", "Cannot", "stat", "No", "such", "file", "or", "directory", "tar", "Error", "exit", "delayed", "from", "previous", "error", "NUMBER", "Users", "Michael", "Desktop", "backup", "lib", "backup", "cli", "NUMBER", "rb", "NUMBER", "in", "raise_if_command_failed", "Users", "Michael", "Desktop", "backup", "lib", "backup", "cli", "NUMBER", "rb", "NUMBER", "in", "run", "Users", "Michael", "Desktop", "backup", "lib", "backup", "archive", "NUMBER", "rb", "NUMBER", "in", "perform", "Users", "Michael", "Desktop", "backup", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "block", "in", "perform", "Users", "Michael", "Desktop", "backup", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "Users", "Michael", "Desktop", "backup", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "Users", "Michael", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "rc", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "Users", "Michael", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "rc", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "Users", "Michael", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "rc", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "Users", "Michael", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "rc", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "on", "platform", "x", "NUMBER", "_", "NUMBER", "darwin", "NUMBER", "NUMBER", "If", "you", "ve", "setup", "a", "Notification", "in", "your", "configuration", "file", "the", "above", "error", "will", "have", "be", "sent", "NUMBER", "You", "ll", "need", "the", "latest", "gem", "NUMBER", "this", "should", "be", "available", "LINK", "L", "NUMBER", "NUMBER", "initial", "version", "The", "develop", "branch", "be", "now", "pretty", "far", "ahead", "from", "master", "LINK", "so", "I", "ll", "probably", "be", "release", "NUMBER", "not", "too", "long", "from", "now", "NUMBER", "_", "NUMBER", "change", "file", "with", "NUMBER", "NUMBER", "additions", "and", "NUMBER", "deletions", "NUMBER", "_", "So", "in", "NUMBER", "it", "ll", "definitely", "be", "available", "with", "good", "console", "output", "NUMBER", "No", "problem", "So", "basically", "what", "you", "re", "saying", "be", "change", "ruby", "def", "connection", "Fog", "Storage", "NUMBER", "new", "provider", "provider", "rackspace_username", "username", "rackspace_api_key", "api_key", "rackspace_auth_url", "auth_url", "end", "to", "ruby", "def", "connection", "Fog", "Storage", "NUMBER", "new", "provider", "provider", "rackspace_username", "username", "rackspace_api_key", "api_key", "rackspace_auth_url", "auth_url", "rackspace_servicenet", "true", "end", "And", "it", "ll", "transfer", "via", "LAN", "ok", "NUMBER", "I", "ll", "have", "it", "default", "to", "false", "and", "the", "user", "can", "then", "pass", "in", "true", "via", "configuration", "NUMBER", "Thanks", "for", "letting", "me", "know", "Done", "NUMBER", "ad", "NUMBER", "f", "NUMBER", "fffc", "NUMBER", "cbde", "NUMBER", "b", "NUMBER", "cf", "NUMBER", "e", "NUMBER", "ab", "NUMBER", "Added", "support", "for", "Rackspace", "ServiceNet", "NUMBER", "Might", "add", "this", "eventually", "but", "it", "s", "not", "on", "my", "current", "to", "do", "list", "NUMBER", "Will", "keep", "issue", "open", "NUMBER", "I", "have", "just", "commit", "change", "to", "this", "behavior", "NUMBER", "b", "NUMBER", "cdf", "NUMBER", "a", "NUMBER", "c", "NUMBER", "b", "NUMBER", "fa", "NUMBER", "dac", "NUMBER", "d", "NUMBER", "ad", "NUMBER", "ac", "NUMBER", "f", "All", "rescue", "blocks", "have", "be", "remove", "from", "all", "transfer", "and", "remove", "methods", "ensuring", "that", "exception", "be", "raise", "when", "something", "goes", "wrong", "during", "either", "of", "these", "processes", "NUMBER", "Backtrace", "be", "always", "logged", "in", "this", "case", "since", "exception", "be", "always", "logged", "including", "backtrace", "and", "notifiers", "will", "now", "be", "triggered", "NUMBER", "Cheers", "I", "m", "not", "sure", "how", "much", "this", "would", "impact", "the", "whole", "backup", "process", "at", "this", "time", "NUMBER", "I", "recall", "implement", "it", "use", "symbols", "explicitly", "to", "constrain", "people", "from", "use", "things", "like", "spaces", "and", "other", "things", "since", "it", "acts", "as", "an", "identifier", "and", "needs", "to", "be", "triggered", "as", "such", "from", "the", "CLI", "NUMBER", "Things", "like", "backup", "perform", "t", "Michael", "s", "Backup", "Would", "prefer", "to", "force", "the", "use", "of", "a", "simplified", "version", "like", "backup", "perform", "t", "michaels_backup", "hi", "fjuan", "I", "m", "not", "sure", "what", "SVNSync", "be", "do", "or", "why", "you", "would", "want", "to", "use", "it", "over", "RSync", "or", "anything", "else", "Backup", "currently", "provides", "NUMBER", "I", "tried", "looking", "up", "some", "info", "briefly", "but", "it", "still", "isn", "t", "really", "clear", "to", "me", "NUMBER", "Could", "you", "provide", "some", "use", "cases", "scenarios", "where", "SVNSync", "would", "be", "better", "than", "what", "backup", "currently", "provides", "support", "Thanks", "Changing", "instance_eval", "to", "load", "causes", "the", "following", "error", "to", "be", "raise", "Users", "Michael", "Desktop", "backup", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "instance_eval", "uninitialized", "constant", "Local", "NameError", "from", "Users", "Michael", "Desktop", "backup", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "instance_eval", "from", "Users", "Michael", "Desktop", "backup", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "initialize", "from", "Users", "Michael", "Backup", "models", "test", "NUMBER", "rb", "NUMBER", "in", "new", "from", "Users", "Michael", "Backup", "models", "test", "NUMBER", "rb", "NUMBER", "in", "TAG", "from", "eval", "NUMBER", "in", "load", "from", "eval", "NUMBER", "in", "block", "in", "load_config", "from", "eval", "NUMBER", "in", "each", "from", "eval", "NUMBER", "in", "load_config", "from", "Users", "Michael", "Desktop", "backup", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "instance_eval", "from", "Users", "Michael", "Desktop", "backup", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "load_config", "from", "Users", "Michael", "Desktop", "backup", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "find", "from", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "from", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "from", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "from", "Users", "Michael", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "rc", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "from", "Users", "Michael", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "rc", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "from", "Users", "Michael", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "rc", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "from", "Users", "Michael", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "rc", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "from", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "Wasn", "t", "sure", "how", "to", "get", "load", "to", "work", "without", "get", "this", "error", "NUMBER", "Any", "idea", "s", "This", "applies", "to", "two", "locations", "one", "be", "in", "the", "Finder", "class", "which", "you", "point", "out", "and", "the", "other", "be", "in", "the", "new", "config", "NUMBER", "rb", "that", "Backup", "generates", "as", "of", "the", "next", "gem", "release", "NUMBER", "LINK", "L", "NUMBER", "Cheers", "Didn", "t", "seem", "to", "do", "the", "trick", "either", "NUMBER", "Confirmed", "that", "it", "works", "and", "it", "s", "be", "patched", "NUMBER", "a", "NUMBER", "a", "NUMBER", "cdf", "NUMBER", "fe", "NUMBER", "f", "NUMBER", "c", "NUMBER", "eef", "NUMBER", "cc", "Thanks", "Looks", "good", "NUMBER", "Will", "probably", "merge", "it", "in", "soon", "NUMBER", "Thanks", "Merged", "it", "in", "NUMBER", "I", "personally", "don", "t", "have", "much", "experience", "with", "HipChat", "only", "use", "it", "once", "NUMBER", "jessedearing", "any", "chance", "you", "could", "update", "the", "Notifiers", "Wiki", "page", "and", "add", "the", "HipChat", "notifier", "template", "additional", "information", "LINK", "Cheers", "Maybe", "Dropbox", "update", "their", "API", "will", "need", "to", "check", "that", "out", "NUMBER", "jonthewayne", "I", "just", "tried", "to", "do", "this", "myself", "and", "I", "be", "not", "having", "any", "issue", "NUMBER", "Are", "you", "filling", "in", "the", "api_key", "and", "secret_key", "provide", "by", "dropbox", "and", "do", "the", "authorization", "say", "it", "be", "successful", "ruby", "store_with", "Dropbox", "do", "db", "db", "NUMBER", "api_key", "my_api_key", "db", "NUMBER", "api_secret", "my_api_secret", "db", "NUMBER", "path", "path", "to", "my", "backups", "db", "NUMBER", "keep", "NUMBER", "db", "NUMBER", "timeout", "NUMBER", "end", "This", "just", "works", "for", "me", "after", "manually", "authorizing", "by", "visiting", "the", "link", "provide", "by", "Backup", "for", "Dropbox", "and", "hitting", "Enter", "after", "successfully", "authorizing", "NUMBER", "Actually", "there", "might", "ve", "be", "a", "bug", "that", "hasn", "t", "be", "update", "yet", "or", "the", "dependencies", "weren", "t", "update", "yet", "NUMBER", "What", "you", "could", "try", "be", "to", "get", "the", "latest", "version", "from", "backup", "develop", "git", "clone", "git", "github", "NUMBER", "com", "meskyanichi", "backup", "NUMBER", "git", "cd", "backup", "git", "checkout", "develop", "NUMBER", "bin", "backup", "perform", "t", "my_backup", "See", "if", "that", "helps", "NUMBER", "It", "has", "be", "a", "long", "time", "since", "the", "last", "gem", "release", "and", "the", "code", "base", "has", "be", "change", "A", "LOT", "so", "the", "fix", "might", "ve", "not", "yet", "be", "incorporated", "in", "to", "the", "new", "gem", "NUMBER", "I", "be", "going", "to", "release", "a", "new", "version", "that", "contains", "every", "commit", "up", "until", "now", "pretty", "soon", "after", "I", "finish", "the", "last", "few", "issue", "in", "the", "issue", "tracker", "here", "that", "I", "find", "be", "necessary", "to", "fix", "before", "I", "roll", "out", "a", "new", "gem", "NUMBER", "Though", "Backup", "NUMBER", "should", "be", "out", "in", "a", "matter", "of", "days", "NUMBER", "Sounds", "like", "a", "plan", "NUMBER", "And", "thanks", "Hey", "I", "actually", "just", "switched", "dependencies", "from", "popen", "NUMBER", "to", "POpen", "NUMBER", "in", "one", "of", "my", "recent", "comments", "NUMBER", "Reasons", "NUMBER", "Ruby", "implementation", "instead", "of", "partially", "C", "based", "Would", "allow", "us", "to", "support", "JRuby", "Rubinius", "in", "the", "future", "if", "needed", "Backup", "be", "be", "add", "to", "the", "FreeBSD", "ports", "tree", "and", "needed", "this", "change", "in", "order", "to", "avoid", "conflict", "POpen", "NUMBER", "be", "more", "up", "to", "date", "than", "popen", "NUMBER", "So", "once", "Backup", "NUMBER", "hits", "you", "ll", "get", "POpen", "NUMBER", "install", "instead", "of", "the", "previous", "popen", "NUMBER", "Cheers", "Michael", "Ahh", "you", "re", "probably", "right", "in", "that", "case", "NUMBER", "I", "had", "both", "gems", "install", "so", "it", "would", "work", "in", "any", "case", "NUMBER", "I", "ll", "try", "to", "get", "rid", "of", "all", "the", "popen", "NUMBER", "gems", "and", "re", "install", "only", "the", "one", "that", "s", "required", "and", "see", "what", "happens", "NUMBER", "Thanks", "a", "lot", "for", "point", "that", "out", "Does", "the", "gem", "method", "also", "immediately", "require", "or", "do", "it", "just", "set", "the", "target", "lib", "to", "require", "instead", "of", "the", "default", "Thanks", "now", "use", "the", "lower", "case", "solution", "as", "it", "seems", "to", "work", "Hey", "what", "backslashes", "be", "exactly", "miss", "All", "test", "be", "passing", "NUMBER", "here", "on", "all", "ruby", "version", "NUMBER", "It", "might", "be", "that", "it", "change", "since", "I", "applied", "some", "change", "to", "the", "archiver", "recently", "to", "fix", "paths", "with", "File", "NUMBER", "expand_path", "in", "archive", "NUMBER", "rb", "ruby", "Adds", "new", "paths", "to", "the", "paths", "instance", "variable", "array", "def", "add", "path", "paths", "TAG", "TAG", "flame", "NUMBER", "mongohq", "NUMBER", "com", "NUMBER", "mydatabasename", "which", "be", "why", "I", "simply", "split", "on", "the", "slash", "from", "the", "uri", "NUMBER", "path", "with", "split", "NUMBER", "last", "and", "get", "the", "last", "entry", "which", "be", "mydatabasename", "NUMBER", "If", "your", "URI", "differs", "from", "MongoHQ", "then", "you", "might", "have", "to", "extract", "the", "database", "name", "in", "a", "different", "way", "NUMBER", "If", "you", "have", "an", "SSH", "key", "in", "place", "then", "it", "should", "ignore", "the", "password", "field", "NUMBER", "What", "version", "of", "REE", "be", "you", "use", "Are", "you", "use", "some", "kind", "of", "gem", "dependency", "management", "tool", "such", "as", "RVM", "or", "RBenv", "Perhaps", "when", "you", "actually", "run", "the", "backup", "utility", "it", "runs", "it", "under", "a", "different", "ruby", "version", "NUMBER", "For", "some", "reason", "I", "cannot", "get", "REE", "install", "on", "my", "machine", "NUMBER", "However", "I", "see", "no", "problem", "on", "my", "end", "on", "NUMBER", "NUMBER", "and", "NUMBER", "during", "runtime", "be", "you", "sure", "that", "the", "correct", "ruby", "version", "be", "loaded", "that", "runs", "the", "backup", "utility", "Because", "it", "uses", "the", "system", "default", "NUMBER", "Interesting", "NUMBER", "It", "s", "probably", "because", "you", "re", "use", "two", "SFTP", "storages", "and", "the", "file", "get", "stored", "to", "a", "YAML", "both", "as", "SFTP", "I", "hadn", "t", "thought", "of", "this", "scenario", "NUMBER", "I", "ll", "have", "to", "see", "what", "I", "can", "do", "about", "it", "NUMBER", "Thanks", "for", "informing", "me", "Still", "looking", "in", "to", "this", "NUMBER", "Will", "probably", "have", "to", "make", "some", "sort", "of", "unique", "identifier", "key", "based", "on", "all", "the", "data", "pass", "in", "username", "ip", "port", "path", "keep", "in", "order", "to", "create", "a", "difference", "between", "the", "two", "SFTP", "and", "other", "storage", "objects", "NUMBER", "Backup", "currently", "sees", "it", "as", "the", "same", "thing", "NUMBER", "Will", "try", "and", "see", "if", "I", "can", "figure", "out", "a", "good", "solution", "to", "this", "NUMBER", "Thanks", "will", "fix", "this", "soon", "Fixed", "by", "commit", "d", "NUMBER", "fb", "NUMBER", "fa", "NUMBER", "bc", "NUMBER", "d", "NUMBER", "cf", "NUMBER", "da", "NUMBER", "fc", "NUMBER", "eac", "NUMBER", "a", "Get", "rid", "of", "all", "debug", "options", "for", "Backup", "Syncer", "RSync", "NUMBER", "Particularly", "the", "P", "option", "cause", "file", "transfer", "issue", "NUMBER", "With", "the", "prepare", "method", "remove", "out", "of", "the", "initialize", "method", "this", "error", "would", "not", "occur", "be", "I", "right", "ruby", "Defines", "the", "dump_path", "and", "ensures", "it", "exists", "by", "creating", "it", "def", "prepare", "dump_path", "File", "NUMBER", "join", "TMP_PATH", "TRIGGER", "self", "NUMBER", "class", "NUMBER", "name", "NUMBER", "split", "NUMBER", "last", "mkdir", "dump_path", "end", "This", "be", "the", "only", "thing", "it", "do", "basically", "assigns", "the", "dump_path", "and", "ensures", "the", "directory", "exists", "NUMBER", "Moving", "it", "to", "the", "top", "of", "the", "perform", "method", "seems", "like", "a", "valid", "solution", "and", "a", "better", "approach", "seeing", "as", "the", "dump", "path", "isn", "t", "necessary", "unless", "there", "be", "actually", "something", "going", "to", "be", "dumped", "which", "of", "course", "only", "happens", "once", "perform", "be", "invoked", "NUMBER", "Working", "on", "this", "issue", "now", "NUMBER", "Fixed", "by", "commit", "NUMBER", "ee", "NUMBER", "a", "NUMBER", "acafebf", "NUMBER", "fa", "NUMBER", "a", "NUMBER", "ece", "NUMBER", "adc", "NUMBER", "c", "NUMBER", "Updated", "all", "the", "Database", "classes", "and", "the", "Archive", "class", "NUMBER", "Moved", "the", "prepare", "and", "log", "methods", "from", "initialize", "and", "perform", "in", "to", "the", "Backup", "Database", "Base", "class", "in", "the", "perform", "super", "method", "NUMBER", "Now", "instead", "of", "run", "prepare", "and", "log", "from", "within", "the", "child", "Database", "class", "we", "invoke", "it", "from", "the", "Backup", "Database", "Base", "class", "by", "calling", "super", "in", "the", "child", "Database", "class", "s", "perform", "method", "NUMBER", "This", "cleans", "up", "refactors", "abstracts", "code", "and", "also", "fix", "the", "WILDCARD", "triggering", "issue", "NUMBER", "joegoggins", "you", "should", "be", "able", "to", "reference", "it", "with", "ruby", "gem", "backup", "git", "git", "github", "NUMBER", "com", "meskyanichi", "backup", "NUMBER", "git", "branch", "develop", "Though", "it", "s", "probably", "not", "going", "to", "take", "long", "before", "I", "release", "a", "new", "gem", "so", "keep", "a", "look", "out", "NUMBER", "Might", "be", "useful", "NUMBER", "Not", "sure", "how", "easy", "this", "be", "to", "implement", "or", "even", "whether", "it", "s", "performant", "enough", "to", "include", "it", "NUMBER", "I", "assume", "you", "re", "referring", "to", "remote", "storages", "to", "see", "whether", "there", "be", "any", "file", "in", "for", "example", "your", "S", "NUMBER", "bucket", "but", "not", "locally", "NUMBER", "You", "would", "have", "to", "do", "a", "lot", "of", "API", "request", "to", "get", "such", "information", "I", "think", "or", "if", "they", "have", "a", "method", "that", "returns", "an", "array", "of", "objects", "for", "a", "given", "path", "key", "NUMBER", "But", "it", "would", "have", "to", "work", "with", "all", "storage", "locations", "and", "each", "storage", "class", "needs", "it", "s", "own", "implementation", "to", "retrieve", "such", "information", "NUMBER", "Is", "that", "what", "you", "re", "referring", "to", "or", "be", "i", "misunderstanding", "something", "Good", "idea", "I", "don", "t", "think", "I", "knew", "that", "File", "NUMBER", "expand_path", "would", "convert", "in", "to", "the", "proper", "path", "NUMBER", "This", "should", "be", "implement", "it", "s", "a", "lot", "more", "readable", "and", "solid", "NUMBER", "Applied", "in", "commit", "NUMBER", "cc", "NUMBER", "b", "NUMBER", "bf", "NUMBER", "fec", "NUMBER", "edcdb", "NUMBER", "fc", "NUMBER", "ba", "NUMBER", "e", "NUMBER", "fc", "Ensure", "absolute", "full", "path", "use", "File", "NUMBER", "expand_path", "path", "rather", "than", "use", "relative", "paths", "and", "for", "HOME", "NUMBER", "This", "provides", "more", "flexibility", "in", "the", "backup", "configuration", "file", "improves", "the", "readability", "of", "the", "code", "and", "makes", "the", "overall", "implementation", "more", "solid", "and", "the", "generate", "paths", "more", "consistent", "NUMBER", "Thanks", "again", "for", "the", "great", "suggestions", "NUMBER", "I", "really", "like", "File", "NUMBER", "expand_path", "a", "lot", "more", "than", "use", "the", "regular", "expressions", "especially", "since", "it", "converts", "from", "relative", "paths", "to", "full", "absolute", "paths", "NUMBER", "maxmeyer", "any", "idea", "why", "such", "info", "isn", "t", "be", "display", "in", "the", "STOUT", "STDERR", "Haven", "t", "looked", "at", "it", "myself", "yet", "but", "it", "seems", "to", "be", "cause", "a", "lot", "of", "confusion", "since", "no", "real", "feedback", "be", "be", "returned", "NUMBER", "Oh", "right", "NUMBER", "Yeah", "I", "totally", "forgot", "about", "that", "That", "s", "likely", "what", "s", "cause", "the", "issue", "NUMBER", "Probably", "going", "to", "have", "to", "remove", "that", "NUMBER", "I", "use", "it", "to", "silence", "the", "noise", "during", "the", "backup", "process", "but", "I", "guess", "that", "use", "popen", "NUMBER", "it", "would", "already", "be", "silenced", "not", "sure", "and", "only", "display", "STDERR", "STDOUT", "when", "an", "exception", "be", "raise", "NUMBER", "Going", "to", "check", "it", "out", "soon", "NUMBER", "I", "ve", "be", "work", "on", "a", "separate", "branch", "which", "I", "want", "to", "finish", "first", "before", "I", "start", "work", "in", "the", "develop", "branch", "myself", "again", "NUMBER", "It", "s", "a", "pretty", "large", "update", "which", "affects", "all", "the", "storage", "objects", "as", "it", "splits", "all", "the", "backup", "file", "in", "to", "multiple", "chunks", "the", "size", "of", "the", "chunks", "be", "configurable", "by", "you", "so", "that", "if", "you", "re", "push", "to", "remote", "services", "like", "S", "NUMBER", "which", "have", "a", "NUMBER", "gb", "file", "limit", "you", "could", "simply", "specify", "in", "the", "backup", "config", "file", "that", "you", "want", "Backup", "to", "split", "it", "in", "to", "chunks", "of", "NUMBER", "gb", "if", "the", "file", "size", "exceeds", "NUMBER", "gb", "NUMBER", "So", "a", "file", "of", "NUMBER", "gb", "would", "be", "split", "into", "NUMBER", "file", "and", "uploaded", "one", "by", "one", "NUMBER", "I", "ll", "probably", "be", "finished", "with", "that", "fairly", "soon", "and", "once", "I", "be", "I", "ll", "get", "back", "to", "fix", "stuff", "like", "this", "NUMBER", "Thanks", "for", "point", "it", "out", "splitter", "branch", "I", "m", "currently", "finishing", "up", "first", "LINK", "Nice", "NUMBER", "Thanks", "for", "letting", "me", "know", "NUMBER", "I", "think", "it", "had", "something", "to", "do", "with", "tar", "blah", "blah", "trail", "slashes", "but", "that", "isn", "t", "the", "case", "anymore", "Fixed", "by", "commit", "e", "NUMBER", "de", "NUMBER", "f", "NUMBER", "a", "NUMBER", "a", "NUMBER", "d", "NUMBER", "ddf", "NUMBER", "dcfdd", "NUMBER", "b", "NUMBER", "dc", "NUMBER", "bad", "Removed", "NUMBER", "dev", "null", "for", "the", "tar", "utility", "since", "we", "re", "use", "the", "POpen", "NUMBER", "library", "now", "NUMBER", "STDOUT", "be", "already", "be", "silenced", "from", "the", "Backup", "Logger", "thanks", "to", "POpen", "NUMBER", "NUMBER", "dev", "null", "cause", "the", "STDERR", "to", "be", "silenced", "when", "an", "exception", "occur", "so", "users", "had", "a", "hard", "time", "figuring", "out", "what", "the", "problem", "was", "NUMBER", "This", "has", "now", "be", "fix", "NUMBER", "Looking", "good", "Merging", "it", "in", "now", "NUMBER", "Would", "you", "mind", "update", "the", "Notifiers", "wiki", "page", "with", "Prowl", "LINK", "Thanks", "Are", "you", "use", "NUMBER", "and", "do", "it", "still", "work", "with", "that", "version", "Fixed", "in", "commit", "d", "NUMBER", "b", "NUMBER", "b", "NUMBER", "a", "NUMBER", "f", "NUMBER", "db", "NUMBER", "e", "NUMBER", "d", "NUMBER", "fb", "NUMBER", "e", "Cheers", "thanks", "for", "this", "Merged", "your", "pull", "request", "thanks", "Are", "you", "still", "experience", "issue", "with", "archiving", "whole", "directories", "It", "could", "be", "do", "by", "mimicking", "the", "perform", "method", "in", "this", "file", "LINK", "There", "s", "not", "a", "_very_", "elegant", "way", "of", "going", "about", "doing", "it", "because", "the", "most", "initialization", "logic", "resides", "inside", "the", "backup", "executable", "file", "NUMBER", "But", "it", "can", "be", "do", "NUMBER", "Nope", "db", "NUMBER", "lock", "be", "not", "necessary", "for", "PostgreSQL", "NUMBER", "The", "pg_dump", "utility", "we", "use", "automatically", "ensures", "a", "safe", "dump", "be", "performed", "I", "believe", "it", "always", "locks", "NUMBER", "db", "NUMBER", "lock", "be", "only", "an", "option", "for", "MongoDB", "where", "it", "by", "default", "isn", "t", "locked", "since", "MongoDB", "s", "dump", "utility", "didn", "t", "have", "anything", "that", "did", "it", "out", "of", "the", "box", "so", "we", "rolled", "our", "own", "NUMBER", "LINK", "for", "more", "info", "on", "available", "options", "for", "each", "database", "NUMBER", "Will", "consider", "remove", "the", "write", "to", "dev", "null", "in", "favor", "of", "provide", "better", "feedback", "NUMBER", "Fixed", "by", "commit", "e", "NUMBER", "de", "NUMBER", "f", "NUMBER", "a", "NUMBER", "a", "NUMBER", "d", "NUMBER", "ddf", "NUMBER", "dcfdd", "NUMBER", "b", "NUMBER", "dc", "NUMBER", "bad", "Removed", "NUMBER", "dev", "null", "for", "the", "tar", "utility", "since", "we", "re", "use", "the", "POpen", "NUMBER", "library", "now", "NUMBER", "STDOUT", "be", "already", "be", "silenced", "from", "the", "Backup", "Logger", "thanks", "to", "POpen", "NUMBER", "NUMBER", "dev", "null", "cause", "the", "STDERR", "to", "be", "silenced", "when", "an", "exception", "occur", "so", "users", "had", "a", "hard", "time", "figuring", "out", "what", "the", "problem", "was", "NUMBER", "This", "has", "now", "be", "fix", "NUMBER", "Set", "up", "a", "separate", "branch", "splitter", "LINK", "for", "this", "and", "will", "investigate", "the", "implementation", "from", "there", "NUMBER", "I", "have", "a", "few", "initial", "question", "NUMBER", "NUMBER", "How", "do", "I", "enable", "the", "Splitting", "feature", "NUMBER", "How", "do", "I", "configure", "the", "chunk", "size", "NUMBER", "Assume", "you", "set", "up", "NUMBER", "different", "storage", "locations", "for", "the", "same", "backup", "S", "NUMBER", "CF", "and", "Dropbox", "NUMBER", "Does", "it", "re", "split", "it", "NUMBER", "times", "The", "implementation", "overal", "looks", "OK", "though", "I", "m", "not", "sure", "about", "putting", "Splitting", "logic", "in", "the", "Storage", "logic", "NUMBER", "Of", "course", "use", "a", "chuncks", "method", "and", "iterating", "through", "that", "be", "good", "and", "greatly", "simplifies", "the", "transferring", "implementation", "NUMBER", "But", "the", "actual", "Splitting", "I", "think", "should", "be", "it", "s", "own", "stage", "NUMBER", "I", "was", "thinking", "something", "like", "ruby", "Backup", "Model", "NUMBER", "new", "NUMBER", "do", "split_into_chunks_of", "NUMBER", "megabytes", "NUMBER", "storages", "archives", "compressors", "encryptors", "etc", "here", "NUMBER", "end", "But", "if", "you", "were", "use", "Dropbox", "you", "could", "do", "something", "like", "ruby", "Backup", "Model", "NUMBER", "new", "NUMBER", "do", "split_into_chunks_of", "NUMBER", "megabytes", "NUMBER", "storages", "archives", "compressors", "encryptors", "etc", "here", "NUMBER", "end", "m", "NUMBER", "thanks", "for", "the", "info", "cc", "tomash", "I", "m", "re", "implement", "the", "whole", "splitter", "in", "a", "separate", "branch", "locally", "for", "now", "use", "parts", "of", "your", "code", "and", "idea", "s", "NUMBER", "This", "implementation", "will", "look", "something", "like", "this", "in", "the", "DSL", "ruby", "Backup", "Model", "NUMBER", "new", "my_backup", "My", "Backup", "do", "split_into_chunks_of", "NUMBER", "in", "megabytes", "archive", "my_archive", "do", "archive", "archive", "NUMBER", "add", "Users", "Michael", "Desktop", "SomeFolder", "end", "store_with", "S", "NUMBER", "do", "s", "NUMBER", "s", "NUMBER", "access_key_id", "NUMBER", "s", "NUMBER", "secret_access_key", "NUMBER", "s", "NUMBER", "region", "us", "east", "NUMBER", "s", "NUMBER", "bucket", "NUMBER", "s", "NUMBER", "path", "backups", "s", "NUMBER", "keep", "NUMBER", "end", "end", "So", "use", "split_into_chunks_of", "takes", "a", "single", "argument", "an", "integer", "representing", "the", "chunk", "size", "NUMBER", "This", "phase", "will", "occur", "right", "before", "the", "actual", "storage", "phase", "ruby", "databases", "NUMBER", "each", "d", "d", "NUMBER", "perform", "archives", "NUMBER", "each", "a", "a", "NUMBER", "perform", "package", "compressors", "NUMBER", "each", "c", "c", "NUMBER", "perform", "encryptors", "NUMBER", "each", "e", "e", "NUMBER", "perform", "split", "storages", "NUMBER", "each", "s", "s", "NUMBER", "perform", "clean", "So", "assuming", "you", "have", "a", "folder", "like", "in", "the", "above", "example", "which", "be", "NUMBER", "megabytes", "this", "would", "be", "the", "output", "in", "the", "console", "when", "run", "the", "backup", "shell", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "My", "Backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Archive", "start", "packaging", "and", "archiving", "Users", "Michael", "Desktop", "SomeFolder", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "packaging", "everything", "to", "a", "single", "archive", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "splitting", "the", "packaged", "archive", "in", "to", "chunks", "of", "NUMBER", "megabytes", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "my_backup", "NUMBER", "tar", "aa", "to", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "my_backup", "NUMBER", "tar", "ab", "to", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "my_backup", "NUMBER", "tar", "ac", "to", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "my_backup", "NUMBER", "tar", "ad", "to", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "my_backup", "NUMBER", "tar", "ae", "to", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "remove", "cycling", "NUMBER", "my_backup", "NUMBER", "tar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "remove", "NUMBER", "my_backup", "NUMBER", "tar", "aa", "from", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "remove", "NUMBER", "my_backup", "NUMBER", "tar", "ab", "from", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "remove", "NUMBER", "my_backup", "NUMBER", "tar", "ac", "from", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "remove", "NUMBER", "my_backup", "NUMBER", "tar", "ad", "from", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "remove", "NUMBER", "my_backup", "NUMBER", "tar", "ae", "from", "bucket", "mybucket", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "As", "you", "can", "see", "I", "ve", "ended", "up", "use", "alphabetical", "suffixes", "rather", "than", "numerical", "NUMBER", "I", "did", "this", "because", "OSX", "doens", "t", "support", "the", "d", "option", "NUMBER", "So", "in", "order", "to", "ensure", "hopefully", "that", "this", "works", "cross", "platform", "im", "going", "with", "alphabetical", "suffixes", "NUMBER", "Also", "cycling", "just", "works", "as", "well", "NUMBER", "I", "ve", "managed", "to", "get", "all", "this", "going", "now", "with", "a", "very", "simple", "Splitter", "class", "and", "all", "splitting", "logic", "be", "remove", "from", "the", "storage", "layer", "NUMBER", "So", "splitting", "only", "happens", "once", "per", "backup", "run", "rather", "than", "per", "storage", "object", "NUMBER", "While", "build", "this", "I", "ve", "also", "find", "a", "bunch", "of", "things", "I", "ll", "be", "cleaning", "up", "as", "well", "it", "ll", "make", "maintaining", "and", "implement", "new", "storage", "methods", "even", "easier", "and", "it", "ll", "all", "work", "with", "splitting", "out", "of", "the", "box", "via", "a", "simple", "API", "NUMBER", "Not", "sure", "when", "I", "ll", "have", "it", "out", "NUMBER", "I", "get", "it", "work", "on", "S", "NUMBER", "still", "work", "on", "fix", "specs", "that", "broke", "when", "i", "scrambled", "the", "internals", "will", "be", "fix", "that", "first", "NUMBER", "Then", "I", "ll", "go", "ahead", "and", "implement", "support", "for", "the", "other", "storage", "objects", "and", "do", "some", "more", "refactoring", "cleaning", "up", "where", "needed", "trying", "to", "make", "it", "as", "abstract", "and", "re", "usable", "as", "possible", "NUMBER", "The", "only", "downside", "be", "that", "it", "s", "probably", "not", "going", "to", "backwards", "compatible", "with", "previous", "version", "of", "Backup", "only", "the", "cycling", "part", "the", "config", "NUMBER", "rb", "isn", "t", "affected", "and", "will", "still", "work", "unchanged", "NUMBER", "I", "ll", "let", "you", "know", "when", "I", "push", "this", "branch", "to", "GitHub", "so", "you", "can", "check", "out", "the", "code", "base", "and", "see", "what", "you", "think", "maybe", "you", "can", "find", "any", "pointers", "or", "things", "that", "i", "miss", "NUMBER", "Cheers", "Note", "this", "be", "what", "the", "current", "Backup", "Splitter", "looks", "like", "very", "concise", "ruby", "encoding", "utf", "NUMBER", "module", "Backup", "class", "Splitter", "include", "Backup", "CLI", "Separates", "the", "end", "of", "the", "file", "from", "the", "chunk", "extension", "name", "SUFFIX_SEPARATOR", "Holds", "an", "instance", "of", "the", "current", "Backup", "model", "attr_accessor", "model", "Instantiates", "a", "new", "instance", "of", "Backup", "Splitter", "and", "takes", "a", "Backup", "model", "as", "an", "argument", "def", "initialize", "model", "model", "model", "end", "Splits", "the", "file", "in", "multiple", "chunks", "if", "necessary", "and", "it", "s", "necessary", "when", "the", "request", "chunk", "size", "be", "smaller", "than", "the", "actual", "backup", "file", "def", "split", "return", "unless", "model", "NUMBER", "chunk_size", "NUMBER", "is_a", "Integer", "if", "File", "NUMBER", "size", "model", "NUMBER", "file", "bytes_representation_of", "model", "NUMBER", "chunk_size", "Logger", "NUMBER", "message", "Backup", "start", "splitting", "the", "packaged", "archive", "in", "to", "chunks", "of", "model", "NUMBER", "chunk_size", "megabytes", "NUMBER", "run", "utility", "split", "b", "model", "NUMBER", "chunk_size", "m", "model", "NUMBER", "file", "model", "NUMBER", "file", "SUFFIX_SEPARATOR", "Backup", "Model", "NUMBER", "chunk_suffixes", "chunk_suffixes", "end", "end", "private", "Returns", "an", "array", "of", "suffixes", "for", "each", "chunk", "NUMBER", "For", "example", "aa", "ab", "ac", "ad", "ae", "Chunk", "suffixes", "be", "sorted", "on", "alphabetical", "order", "def", "chunk_suffixes", "chunks", "NUMBER", "map", "do", "chunk", "File", "NUMBER", "extname", "chunk", "NUMBER", "split", "NUMBER", "last", "end", "NUMBER", "sort", "end", "Returns", "an", "array", "of", "full", "paths", "to", "the", "backup", "chunks", "NUMBER", "Chunks", "aresorted", "on", "alphabetical", "order", "def", "chunks", "Dir", "model", "NUMBER", "file", "NUMBER", "sort", "end", "Converts", "the", "provide", "megabytes", "to", "a", "bytes", "representation", "def", "bytes_representation_of", "megabytes", "megabytes", "NUMBER", "NUMBER", "end", "end", "end", "m", "NUMBER", "tomash", "Update", "I", "just", "finished", "update", "all", "the", "storage", "types", "and", "test", "and", "it", "s", "NUMBER", "passing", "now", "NUMBER", "I", "ve", "only", "storage", "type", "I", "manually", "test", "be", "the", "S", "NUMBER", "Storage", "but", "it", "might", "work", "with", "all", "storages", "already", "NUMBER", "I", "ll", "have", "to", "go", "and", "manually", "test", "the", "rest", "tomorrow", "probably", "and", "see", "if", "everything", "still", "works", "and", "be", "basically", "able", "to", "split", "and", "transfer", "remove", "cycle", "NUMBER", "It", "s", "looking", "good", "so", "hopefully", "this", "ll", "be", "merge", "in", "to", "develop", "the", "come", "week", "NUMBER", "Check", "out", "the", "commit", "here", "LINK", "Please", "let", "me", "know", "what", "you", "guys", "think", "and", "any", "feedback", "suggestions", "be", "welcome", "Thanks", "NUMBER", "Haven", "t", "gotten", "around", "to", "manually", "test", "NUMBER", "of", "the", "functionality", "just", "yet", "NUMBER", "Will", "be", "work", "on", "it", "soon", "NUMBER", "I", "m", "going", "to", "also", "run", "through", "the", "code", "and", "comments", "to", "double", "check", "that", "everything", "i", "stated", "be", "correct", "since", "I", "had", "to", "change", "a", "few", "things", "during", "the", "implementation", "but", "probably", "forgot", "to", "update", "comments", "NUMBER", "If", "there", "s", "one", "thing", "that", "really", "sucks", "be", "that", "the", "comments", "be", "provide", "inaccurate", "information", "and", "you", "re", "assuming", "it", "s", "correct", "NUMBER", "P", "brings", "up", "a", "lot", "of", "confusion", "NUMBER", "I", "ll", "post", "update", "here", "whenever", "I", "have", "them", "NUMBER", "cheer", "Amazon", "S", "NUMBER", "and", "Rackspace", "Cloud", "file", "appear", "to", "work", "NUMBER", "Dropbox", "was", "completely", "broken", "due", "the", "way", "they", "upload", "and", "delete", "file", "NUMBER", "But", "I", "ve", "already", "fix", "all", "of", "that", "here", "NUMBER", "LINK", "Going", "to", "check", "out", "Ninefold", "NUMBER", "Never", "use", "it", "so", "I", "ll", "have", "to", "see", "how", "that", "works", "NUMBER", "Was", "a", "contribution", "NUMBER", "Had", "some", "improvement", "to", "do", "for", "Ninefold", "storage", "NUMBER", "It", "semi", "worked", "but", "had", "an", "issue", "where", "it", "tried", "to", "remove", "a", "directory", "which", "wasn", "t", "empty", "which", "raises", "an", "exception", "when", "there", "were", "still", "chunks", "present", "NUMBER", "Ninefold", "support", "has", "now", "be", "fix", "LINK", "Another", "fairly", "large", "commit", "that", "fix", "and", "finishes", "Backup", "Splitter", "integration", "with", "Backup", "Storage", "FTP", "SFTP", "SCP", "RSync", "Local", "NUMBER", "LINK", "Both", "automatically", "and", "manually", "test", "and", "all", "seem", "to", "be", "work", "now", "NUMBER", "Note", "I", "m", "considering", "get", "rid", "of", "the", "Storage", "RSync", "s", "local", "option", "and", "tell", "users", "to", "just", "use", "Storage", "Local", "which", "was", "build", "for", "local", "storage", "instead", "NUMBER", "This", "be", "odd", "NUMBER", "I", "wonder", "what", "the", "issue", "could", "be", "NUMBER", "I", "m", "afraid", "it", "be", "come", "from", "Fog", "but", "I", "m", "not", "sure", "NUMBER", "Maybe", "you", "could", "open", "an", "issue", "over", "at", "the", "Fog", "git", "repository", "and", "refer", "to", "this", "issue", "and", "ask", "Wesley", "whether", "he", "knows", "why", "this", "issue", "occur", "NUMBER", "I", "m", "assuming", "it", "happens", "on", "file", "larger", "than", "NUMBER", "mb", "It", "of", "course", "should", "not", "happen", "at", "all", "since", "you", "can", "transfer", "up", "to", "NUMBER", "gb", "NUMBER", "Maybe", "it", "s", "not", "streaming", "but", "instead", "it", "s", "buffering", "it", "all", "and", "trying", "to", "send", "it", "afterwards", "in", "which", "case", "you", "might", "be", "run", "out", "of", "memory", "NUMBER", "Could", "you", "check", "to", "see", "whether", "your", "memory", "usage", "increases", "dramatically", "when", "performing", "your", "S", "NUMBER", "backup", "Fog", "do", "support", "streaming", "to", "S", "NUMBER", "and", "CF", "as", "far", "as", "I", "know", "for", "a", "long", "time", "already", "but", "maybe", "it", "s", "not", "activated", "by", "default", "Thanks", "I", "hadn", "t", "thought", "of", "inheritance", "your", "example", "seems", "like", "an", "interesting", "use", "case", "NUMBER", "I", "will", "leave", "this", "pull", "request", "open", "and", "consider", "such", "functionality", "NUMBER", "Good", "catch", "Pulling", "it", "in", "Hi", "Marcelo", "sorry", "for", "the", "late", "response", "NUMBER", "Currently", "work", "on", "get", "almost", "every", "request", "and", "important", "feature", "implement", "and", "every", "bug", "fix", "NUMBER", "Basically", "what", "you", "require", "be", "a", "way", "to", "RSync", "something", "on", "your", "local", "file", "system", "be", "I", "right", "Thanks", "artbikes", "I", "be", "going", "to", "get", "rid", "of", "the", "rsync", "NUMBER", "local", "true", "feature", "since", "it", "was", "a", "temporary", "solution", "and", "I", "rather", "have", "consistent", "solutions", "NUMBER", "So", "either", "use", "the", "method", "you", "mention", "or", "use", "the", "Local", "storage", "method", "NUMBER", "Deg", "Thanks", "for", "point", "that", "out", "NUMBER", "Also", "thanks", "for", "the", "suggestions", "NUMBER", "I", "think", "that", "provide", "an", "array", "of", "exit", "code", "to", "ignore", "be", "the", "right", "solution", "to", "this", "problem", "simply", "because", "there", "might", "be", "other", "utilities", "exist", "and", "future", "that", "might", "behave", "the", "same", "way", "and", "might", "need", "some", "exit", "code", "whitelisting", "NUMBER", "Feel", "free", "to", "set", "together", "a", "pull", "request", "if", "you", "have", "time", "want", "to", "do", "it", "NUMBER", "Otherwise", "once", "I", "have", "some", "time", "I", "ll", "take", "a", "look", "at", "it", "NUMBER", "Cheers", "Michael", "Sounds", "good", "keep", "me", "posted", "deg", "any", "info", "on", "when", "you", "can", "release", "it", "If", "not", "then", "I", "don", "t", "mind", "implement", "it", "myself", "NUMBER", "Finishing", "up", "the", "last", "bunch", "of", "important", "to", "implement", "features", "and", "fix", "crucial", "bug", "NUMBER", "I", "d", "like", "to", "get", "a", "whitelist", "array", "in", "for", "the", "next", "release", "as", "well", "with", "the", "exit", "code", "to", "ignore", "as", "well", "NUMBER", "Thanks", "deg", "I", "went", "ahead", "and", "implement", "it", "myself", "as", "I", "was", "doing", "some", "basic", "householding", "in", "the", "app", "in", "general", "NUMBER", "Started", "out", "with", "some", "basic", "snippets", "and", "turned", "out", "the", "implement", "was", "fairly", "simple", "so", "I", "went", "ahead", "and", "did", "it", "NUMBER", "This", "be", "what", "I", "have", "now", "ruby", "encoding", "utf", "NUMBER", "module", "Backup", "module", "CLI", "Runs", "a", "given", "command", "in", "an", "isolated", "sub", "process", "use", "POpen", "NUMBER", "The", "STDOUT", "STDERR", "and", "the", "returned", "exit", "code", "of", "the", "utility", "will", "be", "stored", "in", "the", "process_data", "Hash", "NUMBER", "If", "a", "command", "returns", "an", "exit", "code", "other", "than", "NUMBER", "an", "exception", "will", "raise", "and", "the", "backup", "process", "will", "abort", "NUMBER", "Some", "utilities", "return", "exit", "code", "other", "than", "NUMBER", "which", "aren", "t", "an", "issue", "in", "Backup", "s", "context", "NUMBER", "If", "this", "be", "the", "case", "you", "can", "pass", "in", "an", "array", "of", "exit", "code", "to", "ignore", "whitelist", "for", "example", "run", "tar", "cf", "output", "NUMBER", "tar", "some", "folder", "ignore_exit_codes", "NUMBER", "So", "if", "the", "tar", "utility", "returns", "in", "this", "case", "NUMBER", "Backup", "will", "consider", "it", "an", "acceptable", "return", "code", "NUMBER", "Note", "Exit", "code", "NUMBER", "be", "always", "automatically", "add", "to", "the", "ignore_exit_codes", "array", "regardless", "of", "whether", "you", "specify", "an", "array", "to", "ignore", "or", "not", "NUMBER", "def", "run", "command", "options", "command", "NUMBER", "gsub", "s", "process_data", "Hash", "NUMBER", "new", "pid", "stdin", "stdout", "stderr", "Open", "NUMBER", "popen", "NUMBER", "command", "ignored", "process_data", "status", "Process", "waitpid", "NUMBER", "pid", "process_data", "stdout", "stdout", "NUMBER", "read", "process_data", "stderr", "stderr", "NUMBER", "read", "process_data", "ignore_exit_codes", "options", "ignore_exit_codes", "Array", "NUMBER", "new", "TAG", "Revamped", "the", "Backup", "CLI", "module", "NUMBER", "Removed", "the", "CommandNotFound", "exception", "and", "method", "since", "the", "CommandFailed", "exception", "already", "pick", "it", "up", "and", "it", "isn", "t", "necessary", "to", "check", "whether", "the", "command", "isn", "t", "find", "twice", "NUMBER", "Also", "it", "be", "now", "possible", "to", "pass", "in", "an", "array", "of", "exit", "code", "to", "ignore", "in", "to", "the", "run", "method", "rather", "than", "raising", "an", "exception", "when", "a", "non", "NUMBER", "exit", "code", "gets", "returned", "NUMBER", "Cleaned", "up", "the", "rest", "of", "the", "code", "in", "the", "cli", "NUMBER", "rb", "file", "NUMBER", "The", "Backup", "Archive", "now", "ignores", "the", "exit", "NUMBER", "code", "as", "it", "only", "indicates", "that", "the", "file", "in", "one", "or", "more", "of", "the", "directories", "that", "be", "be", "archived", "have", "change", "since", "the", "archive", "was", "be", "read", "by", "the", "tar", "utility", "NUMBER", "This", "can", "happen", "when", "a", "folder", "that", "s", "constantly", "update", "by", "for", "example", "user", "data", "from", "a", "website", "e", "NUMBER", "g", "NUMBER", "user", "uploads", "and", "you", "do", "not", "want", "backup", "to", "abort", "every", "single", "time", "someone", "uploads", "a", "new", "file", "during", "the", "archiving", "process", "NUMBER", "The", "new", "file", "will", "be", "pick", "up", "during", "the", "next", "backup", "process", "and", "ignored", "during", "the", "current", "one", "rather", "than", "aborting", "the", "whole", "backup", "operation", "NUMBER", "This", "will", "be", "include", "in", "the", "next", "backup", "release", "NUMBER", "Great", "thanks", "Pulling", "this", "in", "now", "NUMBER", "Mind", "update", "the", "Cloud", "Files", "Storage", "wiki", "regard", "this", "addition", "LINK", "Cheers", "That", "s", "odd", "NUMBER", "I", "doubt", "it", "s", "a", "timeout", "since", "it", "s", "transferring", "file", "individually", "NUMBER", "It", "might", "have", "something", "to", "do", "with", "the", "s", "NUMBER", "sync", "gem", "in", "which", "case", "it", "ll", "be", "hard", "to", "debug", "because", "I", "don", "t", "really", "have", "a", "fundamental", "understanding", "of", "the", "gem", "itself", "NUMBER", "I", "ve", "be", "meaning", "to", "look", "in", "to", "ways", "to", "write", "a", "gem", "that", "accomplishes", "the", "same", "as", "s", "NUMBER", "sync", "and", "support", "both", "Ruby", "NUMBER", "and", "NUMBER", "I", "m", "not", "entirely", "sure", "how", "the", "gems", "internals", "work", "NUMBER", "You", "could", "try", "to", "transfer", "your", "data", "directly", "with", "s", "NUMBER", "sync", "to", "see", "if", "that", "solves", "the", "problem", "in", "which", "case", "the", "problem", "might", "be", "the", "Backup", "gem", "NUMBER", "I", "m", "afraid", "that", "if", "the", "problem", "lies", "within", "the", "s", "NUMBER", "sync", "gem", "I", "m", "unable", "to", "help", "much", "NUMBER", "It", "also", "doesn", "t", "seem", "like", "it", "s", "actively", "be", "support", "anymore", "either", "yet", "another", "reason", "for", "someone", "to", "go", "and", "write", "a", "new", "version", "that", "s", "also", "maintained", "NUMBER", "It", "ll", "probably", "require", "a", "custom", "implementation", "of", "the", "s", "NUMBER", "sync", "functionality", "to", "fix", "this", "NUMBER", "Might", "be", "possible", "to", "create", "a", "new", "tool", "that", "ll", "replace", "s", "NUMBER", "sync", "by", "utilizing", "the", "fog", "gem", "and", "threads", "to", "gain", "a", "high", "level", "of", "concurrency", "NUMBER", "Not", "entirely", "sure", "how", "to", "go", "about", "it", "at", "this", "time", "since", "it", "do", "involve", "some", "kind", "of", "checks", "on", "file", "without", "actually", "pulling", "them", "down", "from", "S", "NUMBER", "to", "see", "whether", "the", "file", "differs", "from", "the", "local", "one", "NUMBER", "Looking", "good", "NUMBER", "Using", "a", "separate", "gemset", "seems", "like", "a", "nice", "way", "to", "isolate", "the", "gems", "NUMBER", "Although", "I", "personally", "stopped", "use", "gemsets", "when", "Bundler", "became", "stable", "since", "I", "always", "run", "everything", "in", "bundlers", "context", "with", "bundle", "exec", "so", "it", "wouldn", "t", "matter", "if", "every", "single", "gem", "that", "exists", "would", "be", "install", "NUMBER", "I", "actually", "never", "use", "Sendmail", "but", "read", "about", "it", "years", "ago", "how", "do", "it", "exactly", "work", "Do", "you", "need", "to", "setup", "stuff", "on", "your", "server", "Do", "you", "use", "your", "own", "mail", "server", "Or", "doesn", "t", "it", "require", "anything", "to", "be", "set", "up", "When", "would", "i", "want", "to", "use", "Sendmail", "over", "Mail", "SMTP", "And", "lastly", "any", "reason", "for", "revert", "back", "to", "NUMBER", "x", "from", "NUMBER", "Ruby", "on", "Rails", "be", "NUMBER", "relate", "to", "Backup", "as", "of", "Backup", "NUMBER", "and", "dependency", "version", "should", "no", "longer", "be", "adjusted", "because", "of", "what", "Rails", "be", "use", "NUMBER", "In", "any", "case", "the", "implementation", "looks", "good", "NUMBER", "Please", "let", "me", "hear", "your", "thoughts", "on", "the", "change", "and", "I", "ll", "get", "back", "to", "you", "NUMBER", "Cheers", "Gotcha", "NUMBER", "While", "I", "agree", "with", "the", "addition", "change", "of", "RVM", "Guardfile", "and", "Sendmail", "I", "don", "t", "agree", "with", "the", "change", "from", "Mail", "NUMBER", "to", "NUMBER", "x", "simply", "because", "Backup", "has", "zero", "relation", "with", "Rails", "NUMBER", "However", "if", "it", "had", "then", "moving", "it", "back", "to", "NUMBER", "x", "would", "break", "it", "with", "Rails", "NUMBER", "latest", "stable", "apps", "NUMBER", "I", "m", "curious", "though", "how", "and", "why", "be", "you", "use", "Backup", "in", "Rails", "Is", "there", "any", "reason", "why", "you", "don", "t", "use", "it", "as", "a", "stand", "alone", "gem", "The", "dependency", "issue", "be", "one", "of", "the", "main", "reasons", "I", "get", "rid", "of", "Rails", "support", "because", "it", "constantly", "cause", "people", "headaches", "broke", "their", "apps", "or", "made", "Backup", "unusable", "NUMBER", "Also", "I", "find", "that", "Backup", "should", "be", "seen", "as", "a", "stand", "alone", "utility", "that", "isn", "t", "tied", "to", "anything", "else", "web", "frameworks", "other", "gems", "NUMBER", "Although", "if", "possible", "maybe", "to", "simplify", "deployment", "backup", "provisioning", "it", "might", "be", "interesting", "to", "combine", "it", "nonetheless", "NUMBER", "But", "yeah", "let", "me", "know", "what", "how", "you", "re", "use", "it", "maybe", "there", "s", "a", "better", "approach", "that", "doesn", "t", "mess", "with", "your", "Rails", "dependencies", "NUMBER", "Cheers", "This", "be", "probably", "a", "bug", "however", "Backup", "intentionally", "doesn", "t", "install", "all", "it", "s", "dependencies", "since", "it", "would", "probably", "install", "like", "NUMBER", "NUMBER", "gems", "on", "your", "system", "while", "you", "probably", "only", "need", "maybe", "NUMBER", "NUMBER", "at", "most", "NUMBER", "However", "the", "error", "you", "re", "receiving", "be", "odd", "so", "I", "ll", "have", "to", "investigate", "that", "in", "a", "clean", "environment", "NUMBER", "I", "ve", "had", "all", "the", "dependencies", "install", "of", "course", "so", "that", "error", "probably", "never", "occur", "in", "my", "environment", "NUMBER", "Thanks", "for", "letting", "me", "know", "I", "ve", "find", "the", "issue", "and", "will", "push", "a", "new", "gem", "shortly", "NUMBER", "Sorry", "about", "that", "Thanks", "Glad", "you", "like", "it", "NUMBER", "Will", "be", "add", "popen", "NUMBER", "to", "the", "gemspec", "since", "it", "s", "a", "dependency", "that", "s", "actually", "required", "at", "all", "times", "NUMBER", "Fixed", "the", "issue", "and", "will", "be", "push", "the", "version", "NUMBER", "in", "a", "few", "and", "yank", "version", "NUMBER", "Also", "I", "ll", "update", "the", "quick", "start", "guide", "NUMBER", "Actually", "it", "s", "quite", "straightforward", "since", "Backup", "tells", "you", "what", "gems", "to", "install", "but", "the", "error", "you", "experienced", "kind", "of", "crushed", "the", "whole", "get", "up", "and", "run", "quickly", "experience", "NUMBER", "p", "Should", "be", "fix", "for", "future", "installs", "as", "of", "NUMBER", "Cheers", "Just", "push", "Backup", "version", "NUMBER", "and", "yanked", "NUMBER", "with", "the", "broken", "CLI", "NUMBER", "Should", "now", "work", "out", "of", "the", "box", "additionally", "popen", "NUMBER", "will", "be", "install", "when", "backup", "be", "install", "since", "it", "s", "a", "dependency", "that", "s", "use", "by", "Backup", "and", "isn", "t", "specific", "to", "any", "NUMBER", "party", "API", "or", "anything", "NUMBER", "Hi", "NUMBER", "Yes", "he", "has", "do", "a", "good", "job", "of", "implement", "something", "in", "the", "right", "direction", "NUMBER", "Here", "be", "more", "of", "his", "commit", "LINK", "The", "reason", "it", "didn", "t", "make", "it", "in", "was", "that", "it", "was", "build", "quite", "a", "while", "ago", "and", "internals", "have", "change", "and", "he", "didn", "t", "have", "any", "specs", "NUMBER", "But", "the", "overall", "approach", "be", "great", "and", "should", "definitely", "be", "use", "as", "a", "reference", "especially", "the", "Split", "class", "idea", "seem", "great", "NUMBER", "If", "something", "like", "a", "Splitter", "class", "would", "be", "implement", "it", "must", "Be", "abstract", "Must", "be", "able", "to", "work", "with", "ALL", "current", "and", "future", "storage", "methods", "S", "NUMBER", "CloudFiles", "NineFold", "Dropbox", "etc", "The", "Split", "size", "must", "be", "adjustable", "for", "every", "storage", "method", "e", "NUMBER", "g", "NUMBER", "S", "NUMBER", "NUMBER", "gb", "Dropbox", "NUMBER", "mb", "etc", "Work", "seamlessly", "with", "the", "current", "functionality", "upload", "remove", "cycling", "of", "backups", "Contain", "specs", "Regarding", "your", "first", "commment", "That", "seems", "like", "a", "good", "approach", "NUMBER", "A", "few", "things", "to", "note", "Might", "be", "better", "to", "call", "the", "parts", "filename", "NUMBER", "part", "NUMBER", "filename", "NUMBER", "part", "NUMBER", "filename", "NUMBER", "part", "NUMBER", "etc", "Might", "be", "useful", "to", "have", "an", "assemble", "command", "for", "the", "Backup", "CLI", "NUMBER", "backup", "assemble", "path", "to", "backup", "parts", "If", "possible", "try", "to", "make", "it", "backwards", "compatible", "so", "that", "exist", "backups", "still", "get", "remove", "when", "cycled", "this", "might", "already", "work", "the", "way", "you", "want", "to", "implement", "it", "with", "the", "split", "command", "Other", "than", "that", "I", "think", "it", "should", "be", "fine", "NUMBER", "Regarding", "your", "last", "comment", "That", "s", "weird", "NUMBER", "When", "I", "pull", "down", "the", "develop", "branch", "and", "ensure", "all", "ruby", "version", "and", "gems", "be", "install", "use", "RVM", "and", "then", "issue", "bundle", "exec", "guard", "it", "should", "simply", "work", "NUMBER", "bundle", "exec", "guard", "Guard", "be", "now", "watching", "at", "Users", "Michael", "Desktop", "backup", "Guard", "RSpec", "be", "run", "with", "RSpec", "NUMBER", "Running", "all", "specs", "Ruby", "version", "ruby", "NUMBER", "preview", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Time", "NUMBER", "NUMBER", "NUMBER", "Finished", "in", "NUMBER", "seconds", "NUMBER", "examples", "NUMBER", "failures", "Ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Time", "NUMBER", "NUMBER", "NUMBER", "Finished", "in", "NUMBER", "seconds", "NUMBER", "examples", "NUMBER", "failures", "Ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Time", "NUMBER", "NUMBER", "NUMBER", "Finished", "in", "NUMBER", "seconds", "NUMBER", "examples", "NUMBER", "failures", "Ruby", "version", "ree", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Time", "NUMBER", "NUMBER", "NUMBER", "Finished", "in", "NUMBER", "seconds", "NUMBER", "examples", "NUMBER", "failures", "Also", "travis", "ci", "NUMBER", "org", "indicates", "that", "all", "test", "be", "passing", "LINK", "ci", "NUMBER", "org", "meskyanichi", "backup", "m", "NUMBER", "good", "catch", "Yeah", "I", "recently", "did", "some", "massive", "refactoring", "by", "remove", "all", "the", "Backup", "Logger", "NUMBER", "ubs", "message", "by", "add", "it", "to", "the", "global", "config", "in", "the", "spec_helper", "including", "the", "FileUtils", "stub", "rb", "RSpec", "NUMBER", "configure", "do", "config", "config", "NUMBER", "mock_with", "mocha", "config", "NUMBER", "before", "each", "do", "FileUtils", "NUMBER", "ubs", "mkdir_p", "message", "error", "warn", "normal", "silent", "NUMBER", "each", "do", "message_type", "Backup", "Logger", "NUMBER", "ubs", "message_type", "end", "end", "end", "Maybe", "it", "s", "better", "to", "move", "your", "snippet", "rb", "after", "each", "do", "Backup", "Model", "NUMBER", "extension", "tar", "end", "In", "to", "the", "spec_helper", "since", "this", "be", "something", "that", "i", "think", "should", "always", "be", "do", "regardless", "of", "what", "spec", "be", "run", "NUMBER", "If", "it", "works", "feel", "free", "to", "add", "it", "underneath", "the", "config", "NUMBER", "before", "each", "block", "rb", "RSpec", "NUMBER", "configure", "do", "config", "config", "NUMBER", "mock_with", "mocha", "config", "NUMBER", "before", "each", "do", "NUMBER", "end", "config", "NUMBER", "after", "each", "do", "Backup", "Model", "NUMBER", "extension", "tar", "end", "end", "Cheers", "m", "NUMBER", "thanks", "Also", "sorry", "I", "haven", "t", "had", "much", "time", "to", "look", "at", "pull", "request", "and", "other", "stuff", "on", "GitHub", "NUMBER", "I", "ll", "get", "to", "it", "asap", "Thanks", "m", "NUMBER", "I", "ll", "probably", "pull", "it", "in", "to", "a", "separate", "remote", "branch", "and", "see", "how", "it", "works", "and", "what", "can", "be", "do", "to", "further", "improve", "if", "if", "at", "all", "needed", "NUMBER", "Thanks", "a", "lot", "for", "your", "time", "and", "effort", "Will", "get", "back", "to", "you", "once", "I", "have", "some", "time", "to", "further", "investigate", "That", "s", "odd", "NUMBER", "I", "m", "not", "experience", "any", "issue", "on", "my", "Ubuntu", "server", "NUMBER", "Are", "you", "run", "the", "latest", "backup", "and", "the", "appropriate", "fog", "version", "Are", "you", "use", "RVM", "Does", "the", "user", "that", "s", "use", "root", "deployer", "other", "have", "access", "to", "the", "same", "gems", "as", "the", "user", "that", "s", "installing", "them", "So", "you", "re", "installing", "the", "gems", "as", "root", "so", "I", "assume", "you", "re", "also", "run", "backup", "as", "root", "I", "usually", "go", "with", "the", "systemwide", "RVM", "install", "which", "shares", "the", "same", "gems", "across", "all", "users", "pretty", "much", "and", "that", "simply", "works", "out", "of", "the", "box", "NUMBER", "What", "s", "odd", "be", "that", "it", "be", "able", "to", "find", "the", "backup", "executable", "but", "not", "the", "fog", "gem", "NUMBER", "daenperry", "great", "thanks", "for", "letting", "me", "know", "NUMBER", "Will", "add", "an", "entry", "to", "the", "wiki", "regard", "this", "NUMBER", "There", "be", "no", "out", "of", "the", "box", "way", "to", "do", "a", "full", "dump", "of", "all", "the", "databases", "but", "there", "be", "probably", "a", "way", "you", "can", "accomplish", "it", "since", "the", "configuration", "file", "be", "pure", "Ruby", "NUMBER", "w", "db", "NUMBER", "db", "NUMBER", "db", "NUMBER", "db", "NUMBER", "NUMBER", "each", "do", "db_name", "database", "MySQL", "do", "db", "db", "NUMBER", "name", "db_name", "db", "NUMBER", "username", "my_username", "db", "NUMBER", "password", "my_password", "db", "NUMBER", "host", "localhost", "db", "NUMBER", "port", "NUMBER", "NUMBER", "etc", "etc", "end", "end", "You", "could", "iterate", "through", "an", "array", "of", "databases", "and", "dump", "them", "NUMBER", "You", "could", "try", "to", "use", "the", "mysql", "NUMBER", "pg", "mongo", "etc", "gems", "to", "connect", "to", "your", "desired", "database", "and", "there", "be", "probably", "methods", "available", "to", "get", "a", "list", "of", "all", "the", "databases", "then", "just", "build", "an", "array", "of", "database", "names", "and", "iterate", "through", "that", "in", "the", "Backup", "config", "NUMBER", "rb", "NUMBER", "smith", "good", "catch", "NUMBER", "Hadn", "t", "thought", "of", "that", "NUMBER", "Maybe", "this", "would", "be", "a", "nice", "addition", "to", "have", "in", "Backup", "s", "core", "since", "I", "can", "see", "more", "people", "wanting", "such", "functionality", "to", "get", "up", "and", "run", "and", "backup", "server", "NUMBER", "There", "be", "probably", "people", "that", "make", "use", "of", "a", "single", "server", "to", "serve", "multiple", "client", "applications", "so", "be", "able", "to", "just", "install", "Backup", "and", "flag", "it", "to", "backup", "everything", "would", "be", "nice", "no", "need", "for", "any", "custom", "ruby", "in", "the", "config", "file", "NUMBER", "Any", "idea", "if", "PostgreSQL", "and", "MongoDB", "both", "have", "the", "ability", "to", "dump", "all", "the", "databases", "with", "a", "single", "command", "Fairly", "sure", "they", "be", "capable", "of", "doing", "that", "NUMBER", "Maybe", "we", "could", "do", "something", "like", "this", "rb", "database", "MySQL", "do", "db", "db", "NUMBER", "name", "all", "db", "NUMBER", "username", "my_username", "db", "NUMBER", "password", "my_password", "db", "NUMBER", "host", "localhost", "db", "NUMBER", "port", "NUMBER", "end", "Or", "this", "rb", "database", "MySQL", "do", "db", "db", "NUMBER", "all", "true", "db", "NUMBER", "username", "my_username", "db", "NUMBER", "password", "my_password", "db", "NUMBER", "host", "localhost", "db", "NUMBER", "port", "NUMBER", "end", "If", "this", "were", "to", "be", "implement", "what", "DSL", "syntax", "do", "you", "think", "would", "be", "preferred", "Cheers", "smith", "thanks", "for", "the", "info", "Yeah", "it", "doesn", "t", "matter", "really", "since", "we", "will", "update", "the", "template", "generator", "to", "have", "the", "db", "NUMBER", "all", "true", "commented", "out", "by", "default", "but", "at", "least", "all", "users", "know", "that", "it", "s", "an", "available", "option", "NUMBER", "of", "course", "also", "update", "the", "wiki", "and", "what", "not", "NUMBER", "I", "guess", "the", "db", "NUMBER", "all", "true", "be", "a", "nice", "flag", "to", "use", "NUMBER", "Marked", "it", "as", "a", "To", "Do", "NUMBER", "Something", "like", "backup", "perform", "t", "my_backup", "syslog", "I", "ve", "never", "write", "to", "the", "syslog", "be", "there", "some", "kind", "of", "unix", "utility", "that", "can", "accomplish", "this", "on", "OSX", "and", "Linux", "Hi", "It", "did", "not", "notify", "you", "because", "no", "exception", "was", "raise", "NUMBER", "This", "isn", "t", "the", "appropriate", "behavior", "of", "course", "NUMBER", "This", "should", "be", "fix", "in", "the", "current", "develop", "branch", "where", "we", "check", "on", "exit", "code", "of", "every", "unix", "command", "we", "run", "NUMBER", "If", "it", "isn", "t", "NUMBER", "then", "we", "raise", "an", "exception", "containing", "information", "on", "why", "it", "fail", "and", "it", "will", "be", "sent", "to", "all", "your", "defined", "notifiers", "NUMBER", "This", "will", "be", "add", "with", "the", "next", "gem", "release", "which", "should", "be", "come", "soon", "NUMBER", "Backup", "gem", "version", "NUMBER", "has", "be", "push", "NUMBER", "Closing", "this", "issue", "NUMBER", "If", "the", "problem", "persists", "in", "the", "new", "version", "feel", "free", "to", "re", "open", "the", "issue", "NUMBER", "Looks", "good", "to", "me", "NUMBER", "tomash", "We", "don", "t", "use", "infinity_test", "any", "longer", "NUMBER", "Try", "this", "bundle", "install", "bundle", "exec", "guard", "start", "Make", "sure", "you", "update", "the", "bundle", "for", "NUMBER", "NUMBER", "and", "REE", "btw", "otherwise", "it", "ll", "say", "it", "cant", "find", "all", "the", "gems", "in", "the", "Gemfile", "I", "have", "a", "single", "test", "fail", "NUMBER", "Backup", "Configuration", "Storage", "RSync", "should", "set", "the", "default", "rsync", "configuration", "Failure", "Error", "rsync", "NUMBER", "local", "NUMBER", "should", "false", "undefined", "method", "local", "for", "Backup", "Configuration", "Storage", "RSync", "Class", "NUMBER", "spec", "configuration", "storage", "rsync_spec", "NUMBER", "rb", "NUMBER", "Sorry", "scratch", "that", "NUMBER", "test", "be", "fail", "the", "fail", "fast", "flag", "be", "turned", "on", "in", "the", "Guardfile", "Ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "Backup", "Configuration", "Storage", "RSync", "should", "set", "the", "default", "rsync", "configuration", "Failure", "Error", "rsync", "NUMBER", "local", "NUMBER", "should", "false", "undefined", "method", "local", "for", "Backup", "Configuration", "Storage", "RSync", "Class", "NUMBER", "spec", "configuration", "storage", "rsync_spec", "NUMBER", "rb", "NUMBER", "in", "block", "NUMBER", "levels", "in", "TAG", "NUMBER", "Backup", "Configuration", "Storage", "RSync", "clear_defaults", "should", "clear", "all", "the", "defaults", "resetting", "them", "to", "nil", "Failure", "Error", "rsync", "NUMBER", "local", "NUMBER", "should", "nil", "undefined", "method", "local", "for", "Backup", "Configuration", "Storage", "RSync", "Class", "NUMBER", "spec", "configuration", "storage", "rsync_spec", "NUMBER", "rb", "NUMBER", "in", "block", "NUMBER", "levels", "in", "TAG", "NUMBER", "Backup", "Encryptor", "GPG", "write_tmp_file", "Failure", "Error", "encryptor", "NUMBER", "send", "write_tmp_file", "unexpect", "invocation", "TAG", "NUMBER", "to_ary", "unsatisfied", "expectations", "expected", "exactly", "once", "not", "yet", "invoked", "TAG", "NUMBER", "close", "any_parameters", "expected", "exactly", "once", "not", "yet", "invoked", "TAG", "NUMBER", "write", "secret", "satisfied", "expectations", "expected", "exactly", "once", "invoked", "once", "Tempfile", "NUMBER", "new", "any_parameters", "NUMBER", "lib", "backup", "encryptor", "gpg", "NUMBER", "rb", "NUMBER", "in", "write_tmp_file", "NUMBER", "spec", "encryptor", "gpg_spec", "NUMBER", "rb", "NUMBER", "in", "block", "NUMBER", "levels", "in", "TAG", "NUMBER", "NUMBER", "NUMBER", "Time", "NUMBER", "NUMBER", "NUMBER", "Finished", "in", "NUMBER", "seconds", "There", "appear", "to", "be", "even", "more", "broken", "test", "NUMBER", "I", "m", "currently", "work", "on", "fix", "all", "of", "them", "and", "push", "it", "back", "to", "develop", "NUMBER", "Meanwhile", "I", "notice", "a", "while", "back", "that", "there", "be", "a", "few", "things", "miss", "in", "Backup", "miss", "global", "configuration", "for", "new", "additions", "etc", "so", "I", "ll", "be", "fix", "that", "as", "well", "so", "it", "s", "polished", "and", "up", "to", "date", "NUMBER", "coderjoe", "So", "people", "be", "now", "forced", "to", "visit", "the", "Dropbox", "website", "in", "order", "to", "create", "an", "authenticated", "session", "coderjoe", "Ah", "gotcha", "NUMBER", "I", "didn", "t", "know", "they", "were", "use", "a", "scraper", "to", "automatically", "authorize", "NUMBER", "So", "anyway", "I", "checked", "out", "the", "pull", "request", "and", "I", "think", "we", "could", "possibly", "accomplish", "it", "in", "more", "simplified", "way", "that", "would", "not", "involve", "needing", "a", "new", "executable", "and", "the", "consumer_key", "secret_key", "would", "not", "have", "to", "be", "deprecate", "remove", "as", "they", "can", "act", "as", "session", "cache", "identifiers", "in", "case", "the", "user", "wants", "to", "use", "the", "same", "Dropbox", "account", "for", "multiple", "triggers", "NUMBER", "I", "think", "the", "majority", "of", "the", "code", "can", "remain", "the", "same", "except", "that", "the", "initial", "request", "would", "require", "you", "to", "visit", "the", "URL", "after", "that", "it", "ll", "write", "out", "a", "cache", "file", "in", "the", "Backup", "directory", "something", "like", "BACKUP_PATH", "cache", "consumer_key", "secret_key", "NUMBER", "session", "That", "way", "we", "can", "always", "use", "the", "consumer_key", "and", "secret_key", "to", "check", "and", "see", "if", "a", "session", "was", "already", "created", "or", "not", "this", "will", "also", "mean", "the", "user", "doesn", "t", "have", "to", "worry", "think", "about", "where", "to", "put", "the", "cached", "session", "or", "how", "it", "works", "or", "that", "it", "s", "even", "happening", "NUMBER", "I", "think", "that", "the", "user", "doesn", "t", "even", "have", "to", "change", "add", "new", "configuration", "options", "to", "their", "backup", "NUMBER", "rb", "configuration", "file", "since", "it", "s", "all", "handle", "by", "backup", "it", "would", "be", "a", "simple", "transition", "from", "doing", "nothing", "to", "open", "a", "authorization", "URL", "only", "once", "per", "Dropbox", "account", "NUMBER", "I", "m", "currently", "hacking", "together", "something", "quickly", "to", "see", "if", "it", "would", "work", "if", "it", "do", "I", "ll", "fully", "implement", "it", "NUMBER", "coderjoe", "Thanks", "for", "the", "info", "I", "ve", "actually", "partially", "implement", "it", "haven", "t", "test", "it", "manually", "yet", "but", "I", "ll", "get", "around", "to", "it", "later", "tonight", "NUMBER", "I", "ll", "push", "it", "to", "a", "separate", "branch", "and", "link", "it", "here", "so", "you", "can", "check", "it", "out", "NUMBER", "The", "code", "adjustments", "be", "quite", "simple", "NUMBER", "I", "will", "be", "deprecating", "the", "Email", "Password", "attributes", "they", "can", "stay", "in", "place", "but", "issue", "a", "warning", "so", "it", "s", "still", "backwards", "compatible", "for", "a", "couple", "of", "months", "at", "least", "since", "they", "be", "no", "longer", "needed", "from", "what", "I", "can", "see", "but", "the", "api", "key", "secret", "will", "remain", "NUMBER", "I", "won", "t", "be", "add", "a", "serialized_session", "attribute", "that", "ll", "link", "to", "the", "file", "that", "d", "be", "handle", "by", "Backup", "itself", "under", "a", "new", "NUMBER", "cache", "directory", "NUMBER", "At", "first", "I", "thought", "how", "would", "you", "make", "it", "unique", "and", "know", "what", "account", "it", "binds", "to", "but", "that", "s", "quite", "easy", "api_key", "api_secret", "unique", "NUMBER", "So", "re", "use", "that", "as", "the", "identifier", "of", "the", "cache", "file", "and", "test", "if", "the", "session", "be", "authorized", "will", "happen", "whenever", "the", "connection", "method", "be", "call", "in", "the", "Backup", "Storage", "Dropbox", "class", "NUMBER", "It", "ll", "automatically", "check", "to", "see", "if", "the", "cached", "file", "be", "in", "place", "if", "not", "then", "it", "will", "create", "a", "new", "session", "make", "you", "authorize", "via", "URL", "if", "successful", "it", "ll", "immediately", "serialize", "and", "write", "it", "to", "a", "file", "in", "the", "NUMBER", "cache", "dir", "and", "will", "load", "it", "every", "other", "time", "NUMBER", "This", "be", "what", "that", "method", "looks", "like", "at", "the", "moment", "other", "methods", "be", "available", "just", "not", "present", "in", "this", "snippet", "right", "now", "def", "connection", "if", "cache_exists", "begin", "cached_session", "Dropbox", "Session", "NUMBER", "deserialize", "File", "NUMBER", "read", "cached_file", "return", "cached_session", "if", "cached_session", "NUMBER", "authorized", "rescue", "ArgumentError", "Logger", "NUMBER", "warn", "Could", "not", "deserialize", "cached", "session", "data", "file", "might", "be", "corrupt", "NUMBER", "Logger", "NUMBER", "warn", "Creating", "a", "new", "session", "NUMBER", "end", "end", "session", "Dropbox", "Session", "NUMBER", "new", "api_key", "api_secret", "session", "NUMBER", "mode", "dropbox", "Logger", "NUMBER", "message", "Visit", "session", "NUMBER", "authorize_url", "Logger", "NUMBER", "message", "to", "authorize", "a", "session", "for", "your", "Dropbox", "account", "NUMBER", "Logger", "NUMBER", "message", "Logger", "NUMBER", "message", "When", "you", "ve", "successfully", "authorized", "the", "session", "hit", "enter", "NUMBER", "gets", "Logger", "NUMBER", "message", "Authorizing", "NUMBER", "begin", "session", "NUMBER", "authorize", "rescue", "OAuth", "Unauthorized", "error", "Logger", "NUMBER", "error", "Authorization", "fail", "raise", "error", "end", "Logger", "NUMBER", "message", "Authorized", "Logger", "NUMBER", "message", "Caching", "session", "data", "to", "cached_file", "NUMBER", "write_cache", "session", "Logger", "NUMBER", "message", "Done", "You", "will", "no", "longer", "need", "to", "manually", "authorize", "via", "an", "URL", "on", "this", "machine", "for", "this", "Dropbox", "account", "NUMBER", "Logger", "NUMBER", "message", "Note", "If", "you", "run", "Backup", "with", "Dropbox", "on", "other", "machines", "you", "will", "need", "to", "authorize", "them", "to", "use", "your", "Dropbox", "account", "as", "well", "NUMBER", "session", "end", "So", "with", "this", "in", "place", "even", "if", "you", "have", "NUMBER", "different", "Backup", "Models", "in", "place", "that", "make", "use", "of", "the", "same", "Dropbox", "account", "the", "same", "NUMBER", "cache", "asdfghjklzxcvbnmqwertyuio", "file", "will", "be", "use", "and", "you", "only", "have", "to", "authorize", "once", "NUMBER", "Of", "course", "if", "you", "have", "multiple", "machines", "then", "you", "will", "either", "want", "to", "copy", "the", "NUMBER", "cache", "file", "or", "just", "re", "authorize", "on", "the", "other", "machines", "as", "well", "NUMBER", "You", "can", "have", "multiple", "session", "NUMBER", "cache", "file", "for", "the", "same", "Dropbox", "account", "from", "what", "I", "can", "see", "NUMBER", "Anyway", "I", "ll", "push", "the", "dropbox", "branch", "soon", "so", "everyone", "can", "check", "it", "out", "NUMBER", "Probably", "in", "a", "few", "hours", "from", "now", "NUMBER", "Yeah", "you", "would", "run", "it", "once", "interactively", "so", "it", "writes", "the", "cache", "file", "on", "the", "machine", "and", "from", "that", "point", "on", "every", "backup", "model", "that", "wants", "to", "that", "particular", "dropbox", "account", "will", "simply", "work", "NUMBER", "regard", "the", "gets", "I", "was", "thinking", "of", "wrapping", "a", "timeout", "around", "it", "and", "set", "it", "to", "NUMBER", "minutes", "so", "if", "it", "takes", "longer", "than", "NUMBER", "minutes", "to", "respond", "then", "it", "ll", "simply", "timeout", "and", "an", "exception", "will", "be", "raise", "NUMBER", "Timeout", "timeout", "NUMBER", "do", "gets", "end", "Typically", "users", "will", "test", "their", "configuration", "to", "see", "if", "everything", "be", "work", "properly", "after", "configuring", "anything", "so", "they", "ll", "see", "that", "they", "will", "be", "prompted", "NUMBER", "I", "doubt", "anyone", "would", "blindly", "accept", "the", "fact", "that", "it", "probably", "works", "when", "it", "comes", "to", "run", "backups", "NUMBER", "Also", "the", "wiki", "page", "will", "be", "update", "with", "instructions", "on", "what", "s", "happening", "NUMBER", "We", "could", "even", "add", "a", "little", "description", "to", "the", "generate", "Dropbox", "configuration", "indicating", "that", "the", "initial", "session", "must", "be", "authorized", "and", "that", "the", "user", "must", "perform", "the", "first", "backup", "manually", "on", "the", "machine", "in", "order", "to", "cache", "it", "NUMBER", "What", "do", "you", "think", "Basically", "all", "you", "have", "to", "do", "be", "copy", "over", "the", "HOME", "Backup", "NUMBER", "cache", "directory", "to", "all", "your", "instances", "and", "it", "will", "work", "so", "if", "you", "have", "an", "automate", "script", "to", "provision", "configure", "servers", "then", "all", "you", "d", "have", "to", "do", "be", "move", "that", "cache", "dir", "and", "it", "s", "file", "in", "to", "place", "NUMBER", "The", "reason", "I", "would", "like", "to", "implement", "it", "in", "this", "way", "be", "because", "it", "stays", "consistent", "with", "the", "rest", "of", "the", "Backup", "gem", "NUMBER", "It", "s", "basically", "a", "modular", "mini", "framework", "for", "defining", "Backup", "models", "and", "would", "prefer", "to", "keep", "everything", "consistent", "in", "terms", "of", "how", "stuff", "works", "be", "defined", "setup", "configured", "NUMBER", "It", "s", "too", "bad", "that", "Dropbox", "doesn", "t", "provide", "a", "direct", "API", "like", "Amazon", "and", "such", "to", "directly", "upload", "without", "the", "annoying", "session", "it", "s", "quite", "unfortunate", "NUMBER", "But", "I", "guess", "we", "can", "t", "complain", "cause", "we", "get", "free", "tier", "storage", "NUMBER", "coderjoe", "The", "NUMBER", "cache", "directory", "never", "existed", "until", "now", "NUMBER", "I", "actually", "just", "named", "it", "that", "simply", "because", "the", "only", "thing", "that", "would", "possibly", "be", "cached", "would", "be", "sessions", "like", "this", "and", "it", "s", "a", "cached", "file", "of", "course", "NUMBER", "We", "currently", "have", "if", "we", "include", "NUMBER", "cache", "PATH", "File", "NUMBER", "join", "ENV", "HOME", "Backup", "DATA_PATH", "File", "NUMBER", "join", "ENV", "HOME", "Backup", "data", "CONFIG_FILE", "File", "NUMBER", "join", "ENV", "HOME", "Backup", "config", "NUMBER", "rb", "LOG_PATH", "File", "NUMBER", "join", "ENV", "HOME", "Backup", "log", "CACHE_PATH", "File", "NUMBER", "join", "ENV", "HOME", "Backup", "NUMBER", "cache", "TMP_PATH", "File", "NUMBER", "join", "ENV", "HOME", "Backup", "NUMBER", "tmp", "coderjoe", "good", "catch", "NUMBER", "I", "ll", "probably", "go", "for", "write", "out", "the", "file", "initially", "NUMBER", "Maybe", "later", "we", "could", "add", "the", "option", "to", "specify", "the", "serialized", "data", "as", "an", "optional", "approach", "in", "case", "that", "works", "better", "for", "some", "people", "but", "by", "default", "I", "ll", "let", "Backup", "do", "the", "heavy", "lifting", "by", "automating", "that", "and", "having", "the", "user", "open", "the", "URL", "once", "NUMBER", "Here", "s", "the", "initial", "setup", "for", "the", "Dropbox", "re", "implementation", "NUMBER", "LINK", "Just", "merge", "the", "Dropbox", "branch", "back", "in", "to", "develop", "both", "spec", "d", "and", "manually", "test", "it", "should", "work", "out", "of", "the", "box", "NUMBER", "Full", "list", "of", "commit", "for", "Dropbox", "NUMBER", "support", "LINK", "Since", "when", "be", "Amazon", "S", "NUMBER", "capable", "of", "doing", "incremental", "backups", "I", "thought", "that", "the", "S", "NUMBER", "platform", "didn", "t", "support", "any", "kind", "of", "RSync", "like", "technology", "and", "only", "accepts", "file", "as", "a", "whole", "rather", "than", "parts", "bytes", "of", "file", "NUMBER", "Closing", "issue", "since", "we", "don", "t", "support", "NUMBER", "We", "support", "NUMBER", "NUMBER", "and", "Ruby", "Enterprise", "Edition", "And", "NUMBER", "once", "the", "stable", "release", "comes", "out", "This", "seems", "like", "a", "more", "reliable", "way", "to", "handle", "non", "zero", "returned", "values", "NUMBER", "I", "d", "say", "merge", "it", "in", "NUMBER", "I", "ll", "have", "a", "look", "soon", "In", "the", "current", "develop", "branch", "this", "be", "or", "should", "be", "fix", "since", "we", "re", "now", "use", "POpen", "NUMBER", "to", "check", "if", "all", "unix", "commands", "exited", "with", "NUMBER", "If", "it", "exists", "with", "a", "non", "zero", "value", "in", "this", "case", "when", "trying", "to", "tar", "an", "archive", "or", "file", "that", "doesn", "t", "exist", "it", "will", "raise", "an", "exception", "triggering", "the", "notifier", "as", "well", "NUMBER", "Will", "be", "push", "out", "a", "new", "gem", "soon", "going", "over", "a", "bunch", "of", "other", "issue", "prior", "to", "that", "NUMBER", "Backup", "gem", "version", "NUMBER", "has", "be", "push", "NUMBER", "Closing", "this", "issue", "NUMBER", "If", "the", "problem", "persists", "in", "the", "new", "version", "feel", "free", "to", "re", "open", "the", "issue", "NUMBER", "tomash", "any", "idea", "how", "to", "apply", "that", "as", "an", "option", "Is", "there", "a", "flag", "for", "the", "unix", "utility", "we", "could", "use", "that", "you", "know", "of", "I", "m", "not", "sure", "if", "backup", "runs", "on", "windows", "at", "all", "to", "be", "honest", "do", "Windows", "also", "have", "the", "unix", "utilities", "we", "use", "at", "all", "like", "tar", "and", "cp", "and", "what", "not", "In", "any", "case", "use", "File", "NUMBER", "symlink", "file", "should", "work", "fine", "I", "think", "NUMBER", "I", "ll", "check", "out", "the", "rest", "of", "the", "Ruby", "File", "API", "and", "see", "what", "I", "can", "use", "NUMBER", "In", "any", "case", "you", "basically", "want", "it", "to", "follow", "symlinks", "and", "include", "them", "in", "the", "archive", "if", "one", "of", "the", "folders", "you", "ve", "add", "to", "the", "archive", "happens", "to", "contain", "symlinks", "to", "other", "folders", "NUMBER", "So", "you", "re", "basically", "looking", "for", "some", "functionality", "that", "you", "could", "possible", "enable", "like", "so", "ruby", "archive", "my_files", "do", "archive", "archive", "NUMBER", "follow_symlinks", "true", "default", "false", "archive", "NUMBER", "add", "path", "to", "some", "folder", "end", "Let", "me", "know", "NUMBER", "Cheers", "Turns", "out", "that", "File", "NUMBER", "realpath", "symlink_file", "be", "only", "available", "in", "Ruby", "NUMBER", "which", "be", "a", "problem", "NUMBER", "Looking", "in", "to", "way", "to", "get", "the", "same", "behavior", "in", "Ruby", "NUMBER", "Ah", "it", "seems", "that", "Ruby", "has", "a", "library", "call", "Pathname", "NUMBER", "You", "can", "simply", "do", "this", "in", "Ruby", "NUMBER", "which", "be", "the", "equivalent", "in", "Ruby", "NUMBER", "Ruby", "NUMBER", "ruby", "File", "NUMBER", "realpath", "symlink", "Ruby", "NUMBER", "ruby", "require", "pathname", "Pathname", "NUMBER", "new", "symlink_file", "NUMBER", "realpath", "The", "latter", "works", "in", "both", "Ruby", "NUMBER", "and", "Ruby", "NUMBER", "NUMBER", "This", "be", "probably", "the", "way", "to", "go", "NUMBER", "Yeah", "also", "the", "Mac", "OSX", "tar", "utility", "doesn", "t", "seem", "to", "have", "options", "flags", "that", "you", "can", "use", "afaik", "that", "automatically", "follows", "symlinks", "gotta", "build", "that", "behavior", "in", "to", "Backup", "to", "make", "it", "cross", "platform", "well", "Linux", "and", "OSX", "in", "any", "case", "NUMBER", "Shouldn", "t", "take", "too", "long", "to", "implement", "I", "think", "I", "ll", "have", "a", "go", "at", "it", "soon", "NUMBER", "coreyt", "tomash", "and", "anyone", "else", "following", "this", "issue", "NUMBER", "Alright", "NUMBER", "I", "just", "write", "a", "slick", "method", "that", "ll", "return", "an", "array", "of", "symlinks", "in", "the", "given", "path", "NUMBER", "ruby", "require", "pathname", "def", "collect_symlinks", "pathname", "pathname", "NUMBER", "children", "NUMBER", "map", "do", "entry", "Array", "NUMBER", "new", "entry", "NUMBER", "symlink", "entry", "nil", "entry", "NUMBER", "directory", "collect_symlinks", "entry", "nil", "end", "NUMBER", "flatten", "NUMBER", "compact", "end", "pathname", "Pathname", "NUMBER", "new", "path", "to", "my", "archive", "symlinks", "collect_symlinks", "pathname", "puts", "symlinks", "Pretty", "amazed", "how", "small", "the", "code", "size", "be", "to", "get", "this", "going", "NUMBER", "Though", "I", "refactored", "it", "like", "NUMBER", "times", "after", "the", "initial", "implementation", "to", "figure", "out", "how", "and", "if", "it", "would", "work", "NUMBER", "Basically", "what", "this", "do", "be", "the", "following", "It", "will", "take", "the", "example", "path", "path", "to", "my", "archive", "which", "you", "will", "add", "to", "archive", "NUMBER", "add", "and", "create", "a", "Pathname", "object", "NUMBER", "We", "pass", "the", "object", "to", "the", "collect_symlinks", "pathname", "method", "and", "it", "ll", "iterate", "through", "all", "the", "child", "entries", "which", "be", "generate", "by", "the", "Pathname", "object", "and", "I", "in", "every", "case", "return", "an", "array", "with", "the", "entry", "at", "index", "NUMBER", "if", "its", "a", "symlink", "else", "it", "returns", "nil", "and", "a", "new", "array", "at", "index", "NUMBER", "with", "exactly", "the", "same", "as", "index", "NUMBER", "NUMBER", "So", "it", "s", "a", "recursive", "procedure", "that", "keep", "going", "as", "long", "as", "there", "be", "directories", "to", "navigate", "to", "NUMBER", "In", "the", "end", "we", "have", "a", "big", "array", "of", "symlink", "objects", "nil", "objects", "and", "nested", "arrays", "containing", "symlink", "objects", "nil", "objects", "and", "more", "nested", "arrays", "etc", "NUMBER", "etc", "NUMBER", "I", "then", "flatten", "them", "to", "a", "single", "level", "array", "and", "remove", "all", "the", "nil", "values", "it", "pick", "up", "NUMBER", "So", "the", "end", "result", "be", "a", "single", "level", "array", "containing", "only", "symlinks", "if", "any", "NUMBER", "So", "when", "implement", "this", "functionality", "in", "to", "Backup", "I", "would", "just", "iterate", "through", "the", "add", "archive", "paths", "something", "like", "this", "ruby", "Update", "the", "paths", "instance", "variable", "Array", "with", "new", "paths", "to", "any", "potential", "symlinks", "if", "follow_symlinks", "be", "true", "set", "by", "the", "user", "in", "the", "Backup", "config", "file", "if", "follow_symlinks", "paths", "NUMBER", "each", "do", "path", "collect_symlinks", "pathname", "NUMBER", "each", "do", "symlink", "paths", "TAG", "It", "do", "not", "throw", "an", "error", "like", "earlier", "version", "did", "but", "it", "seems", "to", "only", "be", "backing", "up", "the", "symlink", "file", "itself", "NUMBER", "That", "s", "weird", "NUMBER", "Well", "for", "me", "it", "do", "indeed", "copy", "over", "the", "exact", "symlink", "but", "in", "the", "root", "of", "the", "NUMBER", "tar", "file", "be", "all", "the", "folders", "that", "the", "symlinks", "point", "to", "NUMBER", "Are", "you", "sure", "the", "contents", "of", "the", "symlinks", "aren", "t", "be", "backed", "up", "anywhere", "in", "the", "NUMBER", "tar", "file", "Oops", "NUMBER", "I", "recall", "someone", "mentioning", "this", "issue", "and", "I", "forgot", "that", "port", "was", "the", "incorrect", "syntax", "NUMBER", "Merging", "it", "in", "thanks", "for", "fix", "it", "looks", "good", "merge", "NUMBER", "thank", "you", "good", "one", "NUMBER", "i", "ll", "take", "a", "look", "at", "it", "on", "weekend", "unless", "somebody", "s", "quicker", "and", "file", "a", "pull", "request", "before", "that", "NUMBER", "Sorry", "I", "forgot", "to", "correct", "the", "syntax", "of", "the", "rsync", "port", "flag", "NUMBER", "This", "should", "now", "be", "fix", "in", "the", "Develop", "branch", "and", "will", "be", "release", "in", "the", "next", "gem", "shortly", "NUMBER", "Backup", "gem", "version", "NUMBER", "has", "be", "push", "NUMBER", "Closing", "this", "issue", "NUMBER", "If", "the", "problem", "persists", "in", "the", "new", "version", "feel", "free", "to", "re", "open", "the", "issue", "NUMBER", "Sorry", "I", "m", "not", "entirely", "sure", "what", "you", "want", "to", "accomplish", "NUMBER", "Could", "you", "elaborate", "Closing", "issue", "for", "now", "please", "reply", "here", "anyway", "if", "you", "have", "any", "question", "NUMBER", "Cheers", "This", "be", "fix", "in", "the", "current", "develop", "branch", "see", "here", "a", "list", "of", "commit", "LINK", "NUMBER", "This", "will", "be", "include", "in", "the", "next", "gem", "release", "which", "will", "be", "come", "out", "fairly", "soon", "NUMBER", "Dropbox", "requires", "a", "manual", "session", "authorization", "from", "now", "on", "so", "when", "you", "update", "be", "sure", "to", "run", "the", "backup", "procedure", "manually", "once", "so", "you", "can", "be", "authorized", "by", "Dropbox", "NUMBER", "Backup", "will", "write", "the", "session", "cache", "data", "to", "a", "file", "and", "use", "that", "to", "authenticate", "itself", "afterwards", "so", "you", "can", "still", "use", "Cron", "to", "perform", "backups", "in", "the", "background", "after", "the", "initial", "manual", "authorization", "process", "which", "consists", "of", "simply", "visiting", "a", "URL", "that", "Backup", "provides", "you", "and", "hitting", "enter", "afterwards", "NUMBER", "It", "s", "self", "explanatory", "when", "you", "run", "the", "backup", "trigger", "so", "no", "worries", "NUMBER", "Backup", "gem", "version", "NUMBER", "has", "be", "push", "NUMBER", "Closing", "this", "issue", "NUMBER", "If", "the", "problem", "persists", "in", "the", "new", "version", "feel", "free", "to", "re", "open", "the", "issue", "NUMBER", "Great", "feature", "but", "I", "d", "feel", "easier", "with", "some", "test", "for", "it", "NUMBER", "Could", "you", "Will", "still", "want", "to", "see", "specs", "for", "this", "NUMBER", "I", "haven", "t", "had", "time", "to", "look", "in", "to", "it", "yet", "but", "have", "be", "fix", "most", "of", "the", "current", "issue", "and", "pull", "request", "that", "were", "quite", "crucial", "NUMBER", "Pushed", "out", "a", "new", "gem", "meanwhile", "that", "incorporated", "A", "LOT", "of", "commit", "fix", "NUMBER", "I", "like", "that", "you", "take", "a", "general", "approach", "make", "it", "re", "usable", "for", "CloudFiles", "Dropbox", "etc", "instead", "of", "only", "solving", "it", "for", "one", "storage", "service", "NUMBER", "If", "you", "have", "time", "and", "could", "bring", "it", "up", "to", "date", "with", "the", "current", "develop", "branch", "add", "ninefold", "cloud", "storage", "service", "support", "apply", "specs", "and", "such", "then", "that", "would", "be", "great", "NUMBER", "I", "m", "going", "to", "close", "the", "pull", "request", "for", "now", "NUMBER", "If", "I", "myself", "decide", "to", "implement", "this", "at", "some", "point", "if", "you", "re", "lacking", "time", "or", "w", "e", "then", "this", "pull", "request", "will", "make", "for", "a", "great", "reference", "NUMBER", "Cheers", "Same", "question", "as", "in", "NUMBER", "could", "you", "write", "some", "test", "for", "that", "wow", "good", "catch", "looking", "good", "for", "me", "my", "only", "possible", "comments", "be", "a", "single", "nitpicks", "about", "code", "style", "NUMBER", "if", "nobody", "objects", "i", "ll", "merge", "it", "within", "NUMBER", "NUMBER", "days", "Looking", "good", "merge", "Thank", "you", "for", "this", "useful", "patch", "rsync", "sounds", "like", "a", "better", "approach", "maybe", "you", "could", "then", "reuse", "Backup", "Storage", "Rsync", "that", "s", "already", "here", "and", "work", "remember", "about", "test", "current", "test", "for", "storage", "rspec", "should", "be", "enough", "of", "a", "hint", "stuff", "from", "NUMBER", "tmp", "be", "remove", "after", "completing", "backup", "i", "NUMBER", "e", "NUMBER", "copying", "the", "backup", "file", "to", "destination", "s", "NUMBER", "ftp", "or", "wherever", "you", "d", "like", "them", "to", "NUMBER", "I", "think", "having", "the", "possibility", "to", "backup", "to", "a", "local", "directory", "be", "somewhere", "in", "the", "issue", "ideas", "but", "I", "don", "t", "know", "if", "it", "has", "be", "implement", "and", "merge", "meskyanichi", "The", "RSync", "storage", "has", "a", "local", "storage", "option", "I", "believe", "it", "s", "still", "in", "the", "develop", "branch", "but", "I", "ll", "be", "release", "a", "new", "gem", "soon", "that", "will", "contain", "the", "option", "RSync", "Storage", "store_with", "RSync", "do", "server", "server", "NUMBER", "username", "my_username", "server", "NUMBER", "password", "my_password", "server", "NUMBER", "ip", "NUMBER", "server", "NUMBER", "port", "NUMBER", "server", "NUMBER", "path", "backups", "server", "NUMBER", "local", "true", "set", "this", "to", "true", "and", "Backup", "will", "RSync", "it", "locally", "instead", "of", "to", "a", "remote", "location", "end", "Is", "this", "what", "you", "were", "looking", "for", "Emerson", "I", "forgot", "there", "be", "actually", "a", "Local", "storage", "method", "these", "days", "NUMBER", "Should", "be", "sufficient", "NUMBER", "If", "it", "isn", "t", "please", "open", "a", "new", "ticket", "NUMBER", "Cheers", "Sorry", "Gerard", "I", "m", "no", "longer", "maintaining", "Backup", "NUMBER", "x", "I", "saw", "you", "already", "upgrade", "to", "Backup", "NUMBER", "x", "in", "another", "discussion", "NUMBER", "Closing", "this", "issue", "Sorry", "for", "the", "late", "response", "NUMBER", "I", "m", "work", "my", "way", "through", "all", "the", "issue", "now", "and", "a", "lot", "of", "commit", "have", "be", "do", "since", "a", "while", "ago", "NUMBER", "I", "ll", "try", "to", "update", "most", "client", "gems", "and", "then", "push", "out", "a", "new", "Backup", "gem", "NUMBER", "Hopefully", "that", "ll", "solve", "these", "issue", "NUMBER", "simaob", "typically", "I", "think", "you", "can", "upload", "up", "to", "NUMBER", "gb", "single", "file", "to", "Amazon", "S", "NUMBER", "these", "days", "so", "the", "NUMBER", "mb", "shouldn", "t", "be", "an", "issue", "NUMBER", "Please", "let", "me", "know", "how", "it", "goes", "after", "I", "push", "out", "a", "new", "gem", "and", "you", "update", "NUMBER", "Backup", "gem", "version", "NUMBER", "has", "be", "push", "NUMBER", "Closing", "this", "issue", "NUMBER", "If", "the", "problem", "persists", "in", "the", "new", "version", "feel", "free", "to", "re", "open", "the", "issue", "NUMBER", "nope", "not", "merge", "yet", "NUMBER", "meskyanichi", "what", "do", "you", "think", "Thanks", "for", "putting", "together", "this", "pull", "request", "though", "I", "m", "looking", "for", "a", "more", "generic", "way", "of", "doing", "this", "so", "it", "works", "not", "only", "for", "Amazon", "S", "NUMBER", "but", "also", "Cloud", "Files", "Ninefold", "Dropbox", "etc", "Will", "also", "need", "to", "see", "specs", "NUMBER", "Going", "to", "close", "this", "for", "now", "might", "use", "it", "as", "a", "reference", "in", "the", "future", "NUMBER", "If", "you", "have", "any", "idea", "s", "please", "let", "me", "know", "NUMBER", "Cheers", "Yup", "NUMBER", "Will", "be", "re", "checking", "version", "on", "all", "gems", "that", "be", "extremely", "out", "of", "date", "particularly", "API", "gems", "for", "S", "NUMBER", "CloudFiles", "etc", "and", "set", "their", "dependency", "to", "rather", "than", "since", "this", "be", "frequently", "occurring", "with", "API", "gems", "NUMBER", "Will", "be", "push", "out", "a", "new", "gem", "soon", "NUMBER", "Backup", "gem", "version", "NUMBER", "has", "be", "push", "NUMBER", "Closing", "this", "issue", "NUMBER", "If", "the", "problem", "persists", "in", "the", "new", "version", "feel", "free", "to", "re", "open", "the", "issue", "NUMBER", "Hmm", "NUMBER", "I", "just", "push", "a", "lot", "of", "commit", "to", "the", "develop", "branch", "you", "might", "want", "to", "try", "out", "that", "branch", "as", "it", "will", "display", "STDERR", "s", "unlike", "in", "the", "current", "version", "of", "backup", "NUMBER", "It", "will", "tell", "you", "why", "the", "tar", "command", "fail", "and", "exit", "NUMBER", "d", "NUMBER", "I", "ll", "also", "be", "push", "out", "a", "new", "gem", "soon", "I", "haven", "t", "experienced", "any", "issue", "with", "the", "Archiver", "on", "OSX", "but", "maybe", "the", "tar", "version", "on", "Linux", "be", "different", "and", "for", "some", "reason", "doesn", "t", "comply", "to", "the", "options", "pass", "in", "i", "doubt", "it", "though", "since", "I", "ve", "use", "the", "Archiver", "on", "Linux", "a", "short", "while", "back", "without", "any", "issue", "NUMBER", "Regardless", "the", "latest", "commit", "in", "the", "develop", "branch", "contains", "change", "that", "ll", "print", "out", "the", "actual", "TAR", "error", "so", "you", "ll", "probably", "be", "able", "to", "identify", "the", "real", "problem", "NUMBER", "So", "clone", "the", "repo", "and", "try", "to", "run", "backup", "from", "it", "NUMBER", "git", "clone", "git", "github", "NUMBER", "com", "meskyanichi", "backup", "NUMBER", "git", "cd", "NUMBER", "backup", "NUMBER", "bin", "backup", "perform", "t", "NUMBER", "etc", "Cheers", "Great", "Yeah", "the", "new", "gem", "that", "I", "ll", "be", "push", "out", "soon", "has", "some", "great", "change", "improvement", "and", "fix", "for", "certain", "things", "NUMBER", "Still", "want", "to", "do", "a", "few", "more", "commit", "before", "I", "push", "out", "the", "gem", "NUMBER", "mikz", "to", "comment", "on", "your", "last", "comment", "we", "might", "want", "to", "consider", "moving", "the", "CLI", "in", "to", "the", "NUMBER", "lib", "folder", "as", "a", "class", "and", "initializing", "it", "from", "the", "NUMBER", "bin", "backup", "executable", "NUMBER", "This", "way", "we", "could", "probably", "test", "it", "with", "the", "current", "test", "suite", "by", "including", "but", "not", "actually", "initialzing", "it", "as", "a", "CLI", "util", "NUMBER", "Not", "yet", "sure", "how", "to", "go", "about", "test", "CLI", "utilities", "since", "I", "ve", "never", "do", "that", "before", "so", "any", "pointers", "be", "welcome", "if", "you", "know", "of", "any", "NUMBER", "Are", "you", "actually", "use", "a", "password", "Or", "do", "you", "use", "SSH", "keys", "Or", "do", "you", "use", "SSH", "keys", "with", "a", "passphrase", "In", "your", "command", "I", "don", "t", "see", "you", "re", "use", "the", "pasword", "file", "option", "but", "in", "the", "backup", "configuration", "you", "essentially", "be", "because", "you", "ve", "defined", "rsync", "NUMBER", "password", "password", "NUMBER", "If", "you", "re", "not", "use", "a", "password", "try", "remove", "the", "rsync", "NUMBER", "password", "attribute", "and", "try", "again", "NUMBER", "Thanks", "for", "submit", "this", "NUMBER", "I", "ll", "have", "a", "look", "soon", "I", "just", "test", "this", "again", "against", "the", "latest", "develop", "branch", "and", "it", "s", "still", "work", "properly", "so", "I", "m", "closing", "this", "issue", "for", "now", "NUMBER", "Once", "the", "new", "gem", "comes", "out", "and", "you", "re", "still", "experience", "the", "issue", "feel", "free", "to", "re", "open", "the", "issue", "NUMBER", "Thanks", "Sorry", "for", "the", "spam", "NUMBER", "p", "I", "m", "not", "sure", "how", "to", "go", "about", "implement", "something", "like", "that", "but", "could", "you", "give", "an", "example", "of", "how", "that", "would", "look", "and", "what", "exactly", "it", "will", "do", "Backup", "has", "not", "be", "test", "against", "Ruby", "NUMBER", "Any", "particular", "reason", "why", "you", "be", "run", "NUMBER", "on", "your", "production", "box", "This", "may", "very", "well", "be", "the", "problem", "NUMBER", "You", "could", "try", "installing", "Ruby", "NUMBER", "locally", "and", "see", "if", "it", "fail", "there", "as", "well", "or", "install", "NUMBER", "on", "your", "production", "box", "NUMBER", "From", "what", "I", "hear", "it", "s", "quite", "crucial", "to", "upgrade", "any", "Ruby", "NUMBER", "x", "to", "the", "latest", "stable", "currently", "NUMBER", "due", "to", "particular", "issue", "with", "previous", "NUMBER", "version", "NUMBER", "Are", "you", "use", "RVM", "to", "manage", "your", "Ruby", "version", "If", "so", "then", "it", "should", "be", "easy", "to", "try", "out", "NUMBER", "That", "s", "really", "odd", "NUMBER", "I", "ll", "have", "to", "try", "this", "locally", "soon", "and", "see", "if", "I", "can", "reproduce", "that", "problem", "NUMBER", "Thanks", "And", "sorry", "for", "the", "trouble", "NUMBER", "tsigo", "thanks", "for", "helping", "on", "this", "one", "NUMBER", "So", "basically", "you", "re", "use", "we", "should", "just", "hardcore", "bin", "cp", "rather", "than", "use", "the", "utility", "method", "Seems", "fine", "to", "me", "since", "as", "you", "mention", "you", "most", "likely", "have", "bigger", "problem", "if", "that", "s", "not", "there", "NUMBER", "p", "Unless", "it", "s", "placed", "in", "a", "different", "location", "on", "other", "Linux", "distro", "s", "I", "d", "assume", "bin", "cp", "be", "the", "same", "everywhere", "NUMBER", "Check", "out", "this", "issue", "LINK", "Backup", "NUMBER", "be", "independent", "from", "Ruby", "on", "Rails", "NUMBER", "Though", "because", "of", "how", "it", "s", "build", "it", "shouldn", "t", "be", "hard", "to", "hook", "it", "up", "with", "any", "Ruby", "application", "whether", "it", "s", "Rails", "Sinatra", "etc", "NUMBER", "Also", "check", "out", "this", "tutorial", "someone", "write", "up", "LINK", "backup", "with", "rails", "Thanks", "NUMBER", "I", "ll", "pull", "this", "in", "soon", "NUMBER", "Were", "there", "any", "test", "affected", "by", "the", "change", "Mind", "update", "these", "specs", "if", "so", "I", "ll", "pull", "it", "once", "I", "have", "time", "hopefully", "within", "the", "next", "day", "or", "NUMBER", "NUMBER", "NUMBER", "Thanks", "Oh", "sorry", "I", "didn", "t", "notice", "Thanks", "i", "ll", "pull", "it", "in", "right", "now", "in", "that", "case", "NUMBER", "Thanks", "You", "bring", "up", "a", "good", "point", "NUMBER", "I", "think", "during", "development", "I", "fail", "to", "see", "it", "from", "that", "perspective", "NUMBER", "My", "initial", "thought", "was", "that", "if", "you", "try", "it", "out", "first", "to", "see", "if", "the", "tool", "actually", "works", "you", "d", "receive", "that", "exception", "when", "the", "bucket", "do", "not", "exist", "NUMBER", "I", "ll", "see", "what", "I", "can", "do", "about", "it", "and", "leave", "this", "ticket", "open", "NUMBER", "Any", "suggestions", "be", "welcome", "NUMBER", "I", "think", "it", "would", "maybe", "something", "like", "begin", "NUMBER", "code", "NUMBER", "rescue", "Excon", "Errors", "NotFound", "raise", "user", "friendly", "message", "regard", "bucket", "not", "be", "find", "rescue", "e", "anything", "else", "raise", "e", "still", "raise", "it", "cause", "something", "still", "went", "wrong", "end", "Something", "like", "that", "would", "do", "what", "do", "you", "think", "Actually", "nevermind", "the", "NUMBER", "rescue", "block", "since", "it", "ll", "raise", "that", "exception", "regardless", "even", "when", "it", "isn", "t", "present", "NUMBER", "Man", "too", "many", "brain", "farts", "lately", "NUMBER", "That", "d", "be", "great", "I", "ll", "need", "to", "investigate", "various", "return", "code", "from", "particular", "commands", "invoked", "on", "the", "OS", "and", "see", "what", "I", "can", "do", "about", "that", "so", "it", "ll", "be", "able", "to", "raise", "more", "exception", "when", "needed", "NUMBER", "Haven", "t", "thought", "about", "use", "the", "return", "code", "for", "other", "purposes", "actually", "so", "I", "ll", "have", "a", "look", "soon", "NUMBER", "Thanks", "Thanks", "for", "looking", "that", "up", "NUMBER", "I", "ll", "have", "to", "dig", "in", "to", "the", "code", "base", "again", "some", "time", "since", "I", "m", "lacking", "time", "as", "of", "late", "NUMBER", "I", "agree", "that", "all", "OS", "commands", "should", "be", "checked", "for", "their", "return", "code", "so", "we", "can", "raise", "exception", "when", "necessary", "NUMBER", "bgarret", "as", "of", "Backup", "NUMBER", "we", "now", "check", "the", "exit", "code", "of", "every", "command", "LINK", "L", "NUMBER", "so", "now", "whenever", "a", "unix", "command", "doesn", "t", "cleanly", "exit", "an", "exception", "will", "be", "raise", "containing", "information", "if", "returned", "from", "the", "unix", "command", "NUMBER", "The", "backup", "will", "be", "abort", "and", "the", "notifications", "will", "be", "triggered", "and", "send", "the", "raise", "exception", "with", "unix", "utility", "exit", "code", "and", "any", "additional", "provide", "details", "that", "may", "be", "provide", "by", "the", "utility", "NUMBER", "Thanks", "I", "ll", "take", "a", "more", "in", "depth", "look", "soon", "and", "merge", "it", "in", "NUMBER", "Will", "get", "around", "to", "doing", "it", "soon", "NUMBER", "Just", "letting", "you", "know", "Pardon", "my", "corrupt", "sentence", "above", "before", "I", "update", "it", "lol", "Hi", "NUMBER", "The", "gem", "has", "no", "relation", "to", "Ruby", "on", "Rails", "NUMBER", "You", "just", "call", "backup", "help", "for", "more", "information", "NUMBER", "The", "command", "you", "re", "looking", "for", "be", "backup", "generate", "not", "NUMBER", "script", "generate", "backup", "it", "s", "not", "a", "Rails", "generator", "NUMBER", "Running", "backup", "help", "yields", "Tasks", "backup", "decrypt", "encryptor", "ENCRYPTOR", "in", "IN", "out", "OUT", "Decrypts", "encrypted", "file", "backup", "dependencies", "Display", "the", "list", "of", "dependencies", "for", "Backup", "or", "install", "them", "through", "NUMBER", "backup", "generate", "Generates", "configuration", "blocks", "based", "on", "the", "argument", "you", "pass", "in", "backup", "help", "TASK", "Describe", "available", "tasks", "or", "one", "specific", "task", "backup", "perform", "t", "triggers", "trigger", "TRIGGER", "Performs", "the", "backup", "for", "the", "specified", "trigger", "NUMBER", "You", "may", "perform", "multip", "NUMBER", "backup", "version", "Display", "install", "Backup", "version", "And", "backup", "help", "generate", "yields", "Usage", "backup", "generate", "Options", "path", "PATH", "databases", "DATABASES", "storages", "STORAGES", "syncers", "SYNCERS", "encryptors", "ENCRYPTORS", "compressors", "COMPRESSORS", "notifiers", "NOTIFIERS", "archives", "Generates", "configuration", "blocks", "based", "on", "the", "argument", "you", "pass", "in", "Oh", "Nah", "that", "s", "for", "Backup", "NUMBER", "x", "which", "was", "a", "Rails", "gem", "NUMBER", "Since", "Backup", "NUMBER", "it", "be", "Rails", "independent", "but", "can", "still", "work", "perfectly", "well", "with", "Ruby", "on", "Rails", "regardless", "NUMBER", "I", "haven", "t", "use", "it", "with", "Rails", "in", "a", "long", "time", "to", "be", "honest", "not", "since", "NUMBER", "x", "that", "be", "NUMBER", "I", "came", "across", "a", "post", "where", "someone", "demonstrates", "Backup", "NUMBER", "x", "integration", "with", "Ruby", "on", "Rails", "NUMBER", "This", "may", "help", "LINK", "backup", "with", "rails", "Are", "you", "talking", "about", "syncing", "as", "in", "s", "NUMBER", "syncing", "full", "directory", "trees", "Or", "be", "you", "talking", "about", "transferring", "single", "file", "that", "be", "NUMBER", "gb", "As", "far", "as", "I", "know", "if", "you", "use", "the", "Syncer", "S", "NUMBER", "method", "assuming", "your", "file", "aren", "t", "NUMBER", "gb", "each", "it", "should", "transfer", "all", "the", "file", "even", "if", "the", "total", "size", "of", "all", "the", "file", "combined", "be", "greater", "than", "NUMBER", "gb", "since", "it", "ll", "transfer", "each", "file", "individually", "NUMBER", "Thanks", "good", "reference", "for", "if", "we", "re", "actually", "going", "to", "implement", "it", "Hmm", "NUMBER", "I", "ve", "never", "run", "in", "to", "this", "problem", "NUMBER", "Did", "you", "compile", "Ruby", "yourself", "Or", "was", "it", "already", "install", "on", "your", "machine", "You", "may", "want", "to", "consider", "use", "RVM", "to", "install", "Ruby", "version", "if", "you", "aren", "t", "already", "that", "be", "I", "ve", "never", "had", "issue", "with", "that", "NUMBER", "If", "you", "want", "to", "install", "Ruby", "s", "system", "wide", "meaning", "all", "users", "including", "root", "can", "use", "them", "you", "can", "also", "do", "this", "with", "RVM", "LINK", "just", "install", "it", "as", "root", "and", "follow", "the", "instructions", "NUMBER", "Gotcha", "Let", "me", "know", "how", "it", "goes", "Michael", "van", "Rooijen", "LINK", "LINK", "meskyanichi", "On", "Monday", "May", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "lecochien", "write", "meskyanichi", "I", "ve", "install", "ruby", "with", "aptitude", "install", "ruby", "NUMBER", "full", "jschwindt", "I", "will", "try", "to", "follow", "tips", "on", "openssl", "bug", "and", "reinstall", "ruby", "with", "rvm", "NUMBER", "LINK", "_version_manager_ubuntu_and_openssl", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "comment_", "NUMBER", "You", "could", "try", "use", "the", "develop", "branch", "and", "see", "if", "that", "helps", "NUMBER", "Someone", "gave", "me", "a", "pull", "request", "which", "fix", "some", "GPG", "issue", "NUMBER", "It", "might", "solve", "your", "problem", "as", "well", "NUMBER", "If", "not", "let", "me", "know", "Looks", "good", "Merging", "Thanks", "Were", "you", "able", "to", "manage", "I", "just", "pull", "down", "the", "develop", "branch", "and", "run", "my", "test", "with", "InfinityTest", "infinity_test", "rspec", "That", "should", "do", "it", "NUMBER", "If", "you", "want", "to", "run", "it", "against", "multiple", "rubies", "as", "I", "be", "infinity_test", "rspec", "rubies", "NUMBER", "NUMBER", "ree", "It", "yields", "the", "following", "LINK", "Let", "me", "know", "if", "this", "helps", "NUMBER", "Yeah", "I", "find", "it", "great", "for", "test", "open", "source", "projects", "with", "NUMBER", "LINK", "stefano", "infinity_test", "For", "Rails", "Sinatra", "etc", "project", "I", "just", "start", "use", "Guard", "really", "great", "stuff", "NUMBER", "Closing", "issue", "for", "now", "NUMBER", "Let", "me", "know", "if", "you", "still", "run", "in", "to", "any", "issue", "Currently", "there", "be", "no", "automate", "way", "to", "restore", "backups", "NUMBER", "Basically", "you", "just", "pull", "down", "your", "backup", "from", "whereever", "you", "store", "it", "NUMBER", "Decrypt", "it", "extract", "it", "and", "restore", "it", "to", "where", "ever", "it", "should", "be", "restored", "NUMBER", "At", "the", "moment", "I", "m", "lacking", "time", "to", "contribute", "significantly", "to", "open", "source", "NUMBER", "My", "knowledge", "be", "also", "limited", "to", "certain", "points", "so", "when", "going", "in", "to", "heavier", "backup", "usage", "it", "would", "certainly", "help", "if", "people", "could", "share", "knowledge", "and", "even", "contribute", "to", "the", "project", "NUMBER", "Perhaps", "in", "the", "future", "I", "ll", "get", "around", "to", "implement", "such", "features", "but", "they", "currently", "aren", "t", "on", "my", "to", "do", "list", "NUMBER", "Ha", "another", "good", "catch", "I", "always", "seem", "to", "make", "that", "mistake", "P", "thanks", "Ouch", "NUMBER", "Good", "catch", "Merging", "It", "s", "not", "on", "my", "to", "do", "list", "at", "the", "moment", "NUMBER", "But", "feel", "free", "to", "add", "any", "compressors", "you", "need", "We", "still", "only", "have", "one", "compressor", "and", "that", "s", "gzip", "NUMBER", "Support", "for", "any", "others", "would", "be", "a", "great", "addition", "NUMBER", "I", "actually", "lack", "knowledge", "of", "compressors", "but", "I", "knew", "it", "was", "in", "demand", "for", "Backup", "NUMBER", "so", "I", "ensured", "everything", "including", "compressors", "would", "be", "modular", "in", "Backup", "NUMBER", "so", "you", "can", "add", "any", "compressors", "you", "need", "and", "i", "ll", "merge", "it", "back", "in", "to", "the", "main", "branch", "NUMBER", "Thanks", "Let", "me", "know", "if", "you", "need", "any", "help", "NUMBER", "Ouch", "Good", "catch", "there", "Thanks", "a", "lot", "Hey", "NUMBER", "That", "s", "odd", "when", "I", "run", "mongodump", "help", "I", "get", "the", "following", "mongodump", "help", "options", "help", "produce", "help", "message", "v", "verbose", "be", "more", "verbose", "include", "multiple", "times", "for", "more", "verbosity", "e", "NUMBER", "g", "NUMBER", "vvvvv", "h", "host", "arg", "mongo", "host", "to", "connect", "to", "TAG", "s", "NUMBER", "s", "NUMBER", "for", "sets", "port", "arg", "server", "port", "NUMBER", "Can", "also", "use", "host", "hostname", "port", "ipv", "NUMBER", "enable", "IPv", "NUMBER", "support", "disabled", "by", "default", "u", "username", "arg", "username", "p", "password", "arg", "password", "dbpath", "arg", "directly", "access", "mongod", "database", "file", "in", "the", "given", "path", "instead", "of", "connecting", "to", "a", "mongod", "server", "needs", "to", "lock", "the", "data", "directory", "so", "cannot", "be", "use", "if", "a", "mongod", "be", "currently", "accessing", "the", "same", "path", "directoryperdb", "if", "dbpath", "specified", "each", "db", "be", "in", "a", "separate", "directory", "d", "db", "arg", "database", "to", "use", "c", "collection", "arg", "collection", "to", "use", "some", "commands", "o", "out", "arg", "dump", "output", "directory", "or", "for", "stdout", "q", "query", "arg", "json", "query", "oplog", "Use", "oplog", "for", "point", "in", "time", "snapshotting", "repair", "try", "to", "recover", "a", "crashed", "database", "Are", "you", "sure", "its", "not", "available", "I", "see", "that", "it", "isn", "t", "available", "on", "the", "help", "screen", "as", "shown", "on", "the", "MongoDB", "website", "but", "im", "my", "shell", "it", "be", "available", "NUMBER", "What", "version", "of", "Mongo", "be", "you", "run", "This", "help", "screen", "I", "m", "showing", "you", "be", "run", "MongoDB", "version", "NUMBER", "Latest", "stable", "Woah", "That", "s", "really", "an", "old", "version", "NUMBER", "I", "just", "spun", "up", "a", "new", "server", "to", "see", "if", "it", "s", "also", "the", "same", "version", "when", "run", "a", "fresh", "install", "with", "the", "latest", "package", "list", "and", "it", "be", "NUMBER", "after", "run", "apt", "get", "update", "apt", "get", "upgrade", "y", "and", "then", "apt", "get", "install", "mongodb", "it", "install", "version", "NUMBER", "So", "I", "recommend", "you", "just", "pull", "down", "the", "tarball", "from", "the", "official", "site", "or", "get", "the", "latest", "version", "in", "any", "other", "way", "Another", "reason", "why", "I", "recommend", "NUMBER", "be", "because", "it", "comes", "with", "the", "journal", "option", "for", "the", "mongod", "utility", "so", "you", "get", "Single", "Server", "Durability", "which", "ensures", "your", "data", "isn", "t", "corrupt", "when", "your", "server", "or", "the", "mongod", "instance", "crashes", "NUMBER", "Definitely", "worth", "the", "upgrade", "NUMBER", "mongod", "journal", "np", "good", "luck", "trystant", "thanks", "for", "point", "that", "out", "NUMBER", "I", "would", "ve", "thought", "the", "mongodump", "utility", "would", "be", "safe", "to", "use", "NUMBER", "If", "not", "then", "this", "must", "indeed", "be", "address", "tomash", "thanks", "for", "the", "resources", "and", "ideas", "NUMBER", "I", "certainly", "be", "open", "for", "pull", "request", "especially", "at", "this", "time", "since", "I", "m", "lacking", "time", "to", "work", "on", "the", "current", "issue", "log", "so", "any", "pull", "request", "be", "certainly", "much", "appreciated", "Do", "you", "think", "it", "could", "be", "a", "drop", "in", "replacement", "for", "the", "current", "method", "mongodump", "utility", "to", "basically", "allow", "users", "to", "seamlessly", "update", "the", "gem", "and", "gain", "the", "benefit", "of", "the", "safe", "method", "without", "adjusting", "the", "configuration", "DSL", "lapluviosilla", "I", "agree", "with", "you", "on", "this", "one", "NUMBER", "I", "find", "it", "weird", "to", "think", "that", "the", "creators", "of", "MongoDB", "would", "provide", "an", "un", "safe", "utility", "NUMBER", "We", "should", "keep", "it", "the", "way", "it", "works", "right", "now", "not", "locking", "and", "add", "the", "locking", "as", "an", "optional", "feature", "NUMBER", "Something", "along", "the", "lines", "of", "mongodb", "NUMBER", "lock", "true", "as", "mention", "above", "NUMBER", "Also", "you", "mention", "there", "will", "be", "a", "lock", "feature", "SERVER", "NUMBER", "LINK", "NUMBER", "in", "the", "future", "provide", "by", "the", "MongoDB", "core", "that", "ll", "as", "far", "as", "I", "can", "see", "enable", "what", "this", "feature", "request", "be", "all", "about", "NUMBER", "Am", "I", "right", "Do", "you", "think", "it", "may", "be", "better", "to", "wait", "for", "this", "to", "release", "and", "then", "add", "support", "for", "it", "since", "it", "s", "afaik", "a", "fact", "that", "the", "mongodump", "utility", "as", "it", "currently", "stands", "be", "already", "a", "safe", "way", "of", "doing", "hot", "backups", "tomash", "and", "trystant", "what", "do", "you", "think", "I", "believe", "it", "ll", "be", "quite", "a", "bit", "cleaner", "easier", "to", "just", "use", "the", "self", "contained", "mongodump", "lock", "flag", "once", "it", "comes", "out", "and", "add", "support", "for", "that", "Though", "we", "don", "t", "know", "when", "it", "ll", "come", "out", "NUMBER", "But", "I", "heard", "that", "the", "MongoDB", "Core", "release", "stuff", "quite", "frequently", "NUMBER", "Let", "me", "know", "your", "input", "NUMBER", "rgnitz", "trystant", "thanks", "for", "the", "info", "NUMBER", "tomash", "lapluviosilla", "since", "lock", "won", "t", "be", "available", "until", "at", "least", "version", "NUMBER", "then", "I", "m", "fine", "with", "there", "be", "a", "more", "hackish", "version", "until", "MongoDB", "version", "NUMBER", "since", "odd", "numbered", "version", "be", "considered", "development", "unstable", "branch", "and", "I", "prefer", "to", "only", "support", "stable", "ones", "since", "it", "s", "likely", "barely", "anyone", "will", "be", "use", "it", "along", "with", "Backup", "NUMBER", "imanel", "be", "that", "pull", "request", "fairly", "complete", "It", "looks", "like", "it", "only", "the", "exception", "handle", "hasn", "t", "be", "test", "from", "what", "i", "read", "in", "the", "comments", "NUMBER", "We", "ll", "have", "to", "look", "in", "to", "that", "soon", "NUMBER", "Other", "than", "that", "it", "seems", "like", "we", "can", "use", "it", "Gotcha", "NUMBER", "I", "ll", "put", "this", "on", "my", "to", "do", "list", "and", "see", "if", "i", "can", "fix", "that", "exception", "handle", "later", "NUMBER", "Then", "i", "ll", "pull", "it", "in", "soon", "along", "with", "another", "open", "pull", "request", "and", "push", "out", "a", "new", "gem", "containing", "these", "update", "NUMBER", "Thanks", "for", "everyones", "contribution", "I", "merge", "this", "time", "NUMBER", "Im", "applying", "a", "few", "change", "and", "will", "probably", "pull", "in", "the", "other", "open", "pull", "request", "as", "well", "as", "add", "a", "few", "other", "features", "and", "then", "i", "ll", "be", "push", "out", "a", "new", "gem", "NUMBER", "Expect", "to", "see", "this", "lock", "fsync", "functionality", "in", "NUMBER", "Thanks", "everyone", "Finished", "the", "merge", "NUMBER", "See", "my", "commit", "log", "for", "further", "implementation", "details", "NUMBER", "I", "modify", "a", "bit", "of", "the", "code", "NUMBER", "Wrote", "a", "spec", "to", "cover", "the", "exception", "handle", "you", "implement", "as", "well", "NUMBER", "Also", "Added", "a", "space", "prefix", "remover", "to", "the", "run", "command", "inside", "the", "Backup", "CLI", "module", "to", "ensure", "it", "remove", "any", "prefixing", "whitespace", "on", "each", "line", "NUMBER", "This", "ll", "allow", "us", "to", "write", "nicer", "implementation", "code", "with", "the", "TAG", "end", "I", "don", "t", "have", "this", "issue", "but", "I", "m", "assuming", "it", "s", "cause", "it", "wants", "a", "full", "path", "for", "some", "reason", "NUMBER", "Well", "figuring", "it", "out", "would", "basically", "mean", "run", "which", "backup", "on", "your", "server", "after", "installing", "the", "backup", "gem", "it", "should", "return", "the", "path", "at", "least", "on", "my", "server", "and", "desktop", "NUMBER", "Let", "me", "know", "if", "it", "works", "for", "you", "NUMBER", "No", "problem", "good", "luck", "Hi", "Fenio", "Thanks", "for", "point", "this", "out", "NUMBER", "It", "seems", "that", "the", "RSync", "Syncer", "s", "password", "functionality", "wasn", "t", "fully", "implement", "NUMBER", "I", "will", "implement", "this", "soon", "and", "push", "out", "a", "new", "gem", "version", "NUMBER", "A", "safer", "practice", "would", "be", "to", "use", "SSH", "Keys", "rather", "than", "passwords", "NUMBER", "You", "could", "use", "that", "if", "you", "like", "NUMBER", "Regardless", "I", "ll", "be", "add", "the", "password", "feature", "in", "the", "near", "future", "and", "then", "you", "ll", "be", "able", "to", "use", "it", "NUMBER", "Thanks", "SSH", "should", "be", "the", "default", "protocol", "over", "which", "RSync", "transfers", "file", "and", "I", "m", "not", "explicitly", "setting", "it", "to", "any", "other", "transfer", "protocol", "so", "SSH", "keys", "should", "work", "in", "this", "case", "NUMBER", "Though", "if", "you", "have", "any", "problem", "let", "me", "know", "NUMBER", "Also", "it", "s", "good", "you", "point", "out", "about", "the", "wiki", "lacking", "information", "on", "this", "NUMBER", "I", "ll", "keep", "that", "in", "mind", "as", "well", "NUMBER", "Thanks", "again", "This", "gem", "was", "build", "to", "run", "backups", "from", "servers", "not", "from", "Desktops", "NUMBER", "Lots", "of", "people", "don", "t", "have", "large", "databases", "but", "would", "like", "to", "store", "them", "to", "a", "cheap", "location", "like", "Dropbox", "which", "be", "free", "NUMBER", "In", "this", "case", "you", "d", "use", "a", "Storage", "LINK", "method", "NUMBER", "If", "you", "want", "to", "skip", "the", "whole", "package", "compression", "and", "encryption", "process", "and", "want", "to", "directly", "mirror", "directories", "of", "your", "production", "box", "to", "Amazon", "S", "NUMBER", "or", "another", "remote", "server", "then", "you", "use", "a", "Syncer", "LINK", "instead", "of", "a", "Storage", "method", "NUMBER", "Isn", "t", "that", "what", "you", "re", "looking", "for", "If", "not", "what", "exactly", "be", "you", "trying", "to", "accomplish", "Gotcha", "NUMBER", "So", "what", "you", "re", "looking", "for", "be", "an", "additional", "way", "perhaps", "a", "new", "Syncer", "to", "handle", "true", "incremental", "backups", "that", "actually", "stores", "revisions", "which", "you", "can", "roll", "back", "while", "use", "minimum", "storage", "space", "I", "haven", "t", "had", "the", "time", "to", "look", "in", "to", "this", "but", "I", "m", "definitely", "interested", "in", "looking", "in", "to", "it", "when", "I", "can", "NUMBER", "What", "do", "you", "feel", "be", "good", "tool", "to", "do", "this", "rdiff", "backup", "any", "others", "Thanks", "for", "your", "feedback", "Thanks", "NUMBER", "I", "ll", "have", "a", "look", "at", "some", "point", "NUMBER", "Closing", "issue", "with", "f", "NUMBER", "e", "NUMBER", "fcb", "NUMBER", "f", "NUMBER", "b", "NUMBER", "b", "NUMBER", "dba", "NUMBER", "ec", "NUMBER", "Should", "fix", "the", "password", "issue", "by", "write", "it", "to", "a", "tempfile", "so", "rsync", "can", "read", "it", "out", "again", "NUMBER", "Right", "NUMBER", "I", "myself", "don", "t", "have", "any", "experience", "with", "FreeBSD", "so", "I", "m", "not", "sure", "how", "to", "work", "around", "this", "issue", "NUMBER", "How", "would", "you", "normally", "invoke", "the", "mysqldump", "utility", "just", "provide", "the", "full", "path", "The", "only", "thing", "Backup", "do", "be", "run", "a", "which", "mysqldump", "in", "this", "case", "to", "detect", "the", "fullpath", "to", "avoid", "issue", "in", "Cron", "but", "of", "course", "since", "it", "s", "not", "in", "the", "PATH", "the", "it", "won", "t", "find", "the", "full", "path", "at", "all", "which", "be", "why", "it", "fail", "NUMBER", "If", "you", "know", "of", "any", "ways", "to", "find", "the", "full", "path", "automatically", "let", "me", "know", "NUMBER", "Also", "as", "you", "mention", "it", "ll", "probably", "be", "a", "good", "idea", "to", "raise", "an", "error", "when", "a", "utility", "like", "mysqldump", "cannot", "be", "find", "NUMBER", "I", "guess", "this", "be", "by", "default", "the", "case", "when", "which", "mysqldump", "returns", "an", "empty", "line", "even", "from", "cron", "NUMBER", "Let", "me", "know", "what", "you", "think", "or", "if", "you", "have", "any", "suggestions", "ideas", "NUMBER", "Thanks", "Oh", "by", "the", "way", "in", "the", "mean", "time", "you", "should", "be", "able", "to", "fix", "your", "issue", "by", "defining", "the", "utility_path", "in", "your", "configuration", "Backup", "Configuration", "Database", "MySQL", "NUMBER", "defaults", "do", "mysqldump", "mysqldump", "NUMBER", "utility_path", "usr", "local", "bin", "mysqldump", "end", "This", "ll", "force", "Backup", "to", "use", "the", "specified", "mysqldump", "utility", "rather", "than", "detecting", "it", "NUMBER", "I", "believe", "a", "good", "way", "to", "handle", "this", "be", "to", "use", "the", "return", "value", "to", "see", "if", "something", "went", "wrong", "NUMBER", "Should", "be", "abel", "to", "use", "this", "to", "determine", "whether", "something", "went", "wrong", "like", "if", "the", "utility", "doesn", "t", "exist", "NUMBER", "This", "commit", "should", "check", "whether", "the", "utility", "that", "gets", "invoked", "mysqldump", "in", "your", "case", "if", "it", "could", "be", "find", "or", "not", "based", "on", "the", "error", "code", "that", "gets", "returned", "NUMBER", "This", "be", "the", "commit", "that", "implement", "a", "lot", "of", "error", "raising", "debugging", "improvement", "NUMBER", "e", "NUMBER", "a", "NUMBER", "cac", "NUMBER", "f", "NUMBER", "e", "NUMBER", "b", "NUMBER", "a", "NUMBER", "c", "NUMBER", "b", "NUMBER", "e", "If", "the", "mysqldump", "utility", "could", "not", "be", "find", "it", "ll", "raise", "an", "exception", "rather", "than", "ignoring", "it", "and", "continuing", "the", "process", "NUMBER", "this", "goes", "for", "any", "command", "from", "now", "on", "whether", "its", "mysqldump", "pgdump", "mongodump", "or", "even", "other", "utilities", "like", "tar", "gzip", "etc", "NUMBER", "I", "m", "push", "out", "a", "new", "gem", "let", "me", "know", "if", "it", "works", "on", "FreeBSD", "if", "you", "can", "that", "it", "do", "indeed", "raise", "an", "exception", "since", "it", "can", "t", "find", "the", "mysql", "utility", "when", "Backup", "try", "to", "auto", "detect", "it", "NUMBER", "Thanks", "Just", "push", "Backup", "version", "NUMBER", "if", "you", "can", "install", "it", "and", "see", "if", "you", "get", "an", "exception", "raise", "when", "it", "can", "t", "find", "the", "mysqldump", "utility", "NUMBER", "Great", "thanks", "for", "trying", "it", "out", "Yeah", "I", "forgot", "to", "add", "the", "utility_path", "global", "database", "option", "to", "the", "wiki", "sorry", "about", "that", "NUMBER", "I", "add", "it", "a", "few", "hours", "ago", "NUMBER", "LINK", "Also", "you", "re", "right", "it", "s", "probably", "a", "good", "idea", "to", "mention", "the", "utility_path", "option", "in", "the", "exception", "template", "NUMBER", "I", "ll", "leave", "this", "ticket", "open", "so", "I", "don", "t", "forget", "NUMBER", "Added", "a", "more", "helpful", "message", "to", "the", "exception", "NUMBER", "Closed", "by", "NUMBER", "d", "NUMBER", "d", "NUMBER", "f", "NUMBER", "a", "NUMBER", "f", "NUMBER", "ea", "NUMBER", "aedfd", "NUMBER", "a", "NUMBER", "Good", "point", "NUMBER", "I", "ll", "have", "to", "revise", "all", "the", "removal", "methods", "on", "all", "the", "storage", "methods", "actually", "since", "it", "might", "be", "an", "issue", "for", "other", "storage", "methods", "as", "well", "NUMBER", "Looks", "like", "it", "s", "only", "the", "Dropbox", "storage", "that", "I", "forgot", "to", "handle", "NUMBER", "I", "ll", "fix", "this", "up", "in", "a", "few", "NUMBER", "Thanks", "for", "point", "this", "out", "NUMBER", "Patched", "by", "fa", "NUMBER", "a", "NUMBER", "addb", "NUMBER", "f", "NUMBER", "aea", "NUMBER", "f", "NUMBER", "ba", "NUMBER", "fd", "NUMBER", "d", "NUMBER", "c", "NUMBER", "Hey", "mate", "NUMBER", "Thanks", "I", "tried", "it", "out", "and", "it", "works", "NUMBER", "I", "m", "just", "cleaning", "it", "up", "now", "add", "comments", "everywhere", "NUMBER", "Moving", "the", "Campfire", "and", "Room", "classes", "to", "a", "different", "location", "and", "reviewing", "all", "of", "it", "NUMBER", "I", "ll", "have", "this", "include", "in", "a", "new", "gem", "version", "soon", "thanks", "for", "your", "contribution", "great", "addition", "No", "worries", "NUMBER", "It", "s", "all", "good", "if", "the", "core", "be", "there", "then", "I", "can", "restructure", "stuff", "easily", "NUMBER", "Requested", "Feature", "Campfire", "notifications", "NUMBER", "developer", "resource", "LINK", "Finished", "implement", "it", "in", "NUMBER", "d", "NUMBER", "cc", "NUMBER", "e", "NUMBER", "bdb", "NUMBER", "cf", "NUMBER", "f", "NUMBER", "bbdb", "NUMBER", "bb", "NUMBER", "a", "NUMBER", "Closing", "issue", "NUMBER", "Hey", "thanks", "for", "this", "I", "actually", "only", "test", "the", "whole", "Backup", "gem", "against", "OSX", "and", "Ubuntu", "NUMBER", "From", "what", "I", "can", "see", "the", "tar", "utility", "use", "with", "that", "distro", "also", "support", "the", "f", "param", "so", "i", "should", "be", "able", "to", "merge", "this", "in", "soon", "NUMBER", "Ty", "Are", "you", "run", "multiple", "backups", "simultaneously", "NUMBER", "different", "triggers", "Then", "you", "might", "want", "to", "consider", "trying", "to", "invoke", "them", "like", "so", "backup", "perform", "triggers", "backup", "NUMBER", "backup", "NUMBER", "backup", "NUMBER", "This", "will", "perform", "NUMBER", "triggers", "in", "a", "row", "one", "by", "one", "not", "all", "at", "once", "NUMBER", "Let", "me", "know", "if", "this", "helps", "NUMBER", "Closing", "issue", "since", "this", "should", "work", "NUMBER", "Hi", "The", "first", "thing", "that", "comes", "to", "mind", "be", "Is", "the", "Cron", "triggering", "Backup", "from", "the", "same", "user", "as", "when", "you", "triggered", "it", "manually", "via", "the", "command", "line", "It", "seems", "the", "authentication", "with", "the", "ssh", "key", "fail", "NUMBER", "Also", "have", "you", "set", "up", "a", "passphrase", "for", "your", "ssh", "key", "Are", "you", "currently", "performing", "backups", "on", "OSX", "or", "Linux", "in", "the", "above", "example", "it", "looks", "like", "OSX", "looking", "at", "the", "paths", "I", "m", "not", "entirely", "sure", "what", "may", "be", "cause", "this", "problem", "but", "maybe", "if", "you", "could", "answer", "my", "question", "I", "could", "reproduce", "the", "error", "and", "have", "a", "look", "myself", "NUMBER", "Thanks", "Maybe", "try", "to", "generate", "another", "SSH", "Key", "without", "a", "passphrase", "or", "do", "you", "need", "the", "passphrase", "Great", "NUMBER", "I", "ll", "actually", "leave", "this", "ticket", "open", "since", "there", "should", "be", "a", "way", "to", "pass", "in", "the", "passphrase", "you", "wanted", "NUMBER", "I", "have", "a", "hunch", "that", "if", "i", "pass", "it", "in", "the", "options", "for", "the", "NET", "SCP", "library", "passphrase", "mypassphrase", "it", "d", "probably", "also", "work", "for", "your", "main", "ssh", "key", "NUMBER", "I", "m", "not", "positive", "but", "I", "find", "it", "unlikely", "that", "that", "option", "doesn", "t", "exist", "at", "all", "NUMBER", "It", "s", "just", "that", "I", "never", "actually", "use", "a", "passphrase", "myself", "so", "i", "didn", "t", "bother", "to", "check", "if", "it", "actually", "existed", "NUMBER", "Glad", "your", "workaround", "works", "for", "now", "I", "ll", "see", "what", "i", "can", "do", "about", "the", "passphrase", "later", "NUMBER", "Ty", "pull", "NUMBER", "Hi", "NUMBER", "Thanks", "for", "point", "this", "out", "NUMBER", "I", "already", "considered", "this", "a", "while", "ago", "but", "for", "some", "reason", "I", "believe", "I", "get", "ahold", "of", "an", "old", "version", "that", "seem", "to", "be", "either", "abandoned", "or", "just", "didn", "t", "work", "so", "I", "assumed", "it", "was", "no", "longer", "support", "NUMBER", "I", "just", "briefly", "checked", "out", "s", "NUMBER", "sync", "NUMBER", "rb", "and", "successfully", "get", "it", "up", "and", "run", "with", "Ruby", "NUMBER", "and", "REE", "but", "not", "with", "Ruby", "NUMBER", "due", "to", "the", "fact", "that", "it", "can", "t", "find", "the", "md", "NUMBER", "encryptor", "library", "NUMBER", "I", "haven", "t", "looked", "in", "to", "this", "yet", "myself", "but", "if", "you", "know", "why", "I", "get", "the", "following", "error", "and", "how", "to", "fix", "it", "it", "d", "save", "me", "some", "research", "time", "NUMBER", "Users", "Michael", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "site_ruby", "NUMBER", "rubygems", "custom_require", "NUMBER", "rb", "NUMBER", "in", "require", "no", "such", "file", "to", "load", "md", "NUMBER", "LoadError", "from", "Users", "Michael", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "site_ruby", "NUMBER", "rubygems", "custom_require", "NUMBER", "rb", "NUMBER", "in", "require", "from", "NUMBER", "s", "NUMBER", "sync", "NUMBER", "in", "TAG", "from", "NUMBER", "s", "NUMBER", "sync", "NUMBER", "in", "TAG", "If", "not", "then", "I", "ll", "see", "why", "it", "occur", "NUMBER", "Probably", "use", "to", "be", "in", "Ruby", "s", "core", "and", "was", "remove", "since", "NUMBER", "or", "something", "NUMBER", "However", "since", "I", "get", "it", "to", "work", "under", "NUMBER", "and", "it", "seems", "like", "a", "very", "useful", "addition", "to", "the", "Backup", "gem", "I", "will", "most", "certainly", "implement", "this", "very", "soon", "NUMBER", "It", "also", "has", "the", "ability", "to", "mirror", "use", "the", "delete", "flag", "similar", "to", "RSync", "NUMBER", "However", "do", "you", "by", "any", "chance", "know", "if", "it", "ll", "transfer", "the", "whole", "file", "again", "when", "it", "s", "only", "partially", "change", "Like", "for", "example", "a", "MySQL", "dump", "Or", "will", "it", "always", "transfer", "the", "whole", "file", "even", "if", "only", "a", "couple", "of", "bytes", "of", "that", "particular", "file", "change", "Previously", "before", "I", "implement", "Syncers", "this", "was", "the", "reason", "why", "I", "didn", "t", "use", "the", "s", "NUMBER", "sync", "approach", "because", "from", "what", "I", "read", "there", "was", "no", "way", "to", "get", "the", "real", "RSync", "diff", "effect", "on", "file", "on", "the", "S", "NUMBER", "filesystem", "so", "it", "d", "always", "transfer", "the", "full", "bytes", "and", "since", "storages", "in", "Backup", "always", "bundled", "everything", "up", "as", "a", "single", "NUMBER", "tar", "NUMBER", "gz", "NUMBER", "enc", "file", "the", "whole", "syncing", "purpose", "would", "be", "pointless", "since", "it", "d", "always", "transfer", "the", "whole", "file", "NUMBER", "However", "since", "the", "introduction", "of", "Syncers", "in", "Backup", "where", "you", "can", "specify", "a", "whole", "directory", "and", "sub", "directories", "to", "directly", "sync", "to", "a", "remote", "location", "bypassing", "the", "whole", "copy", "tar", "compress", "encrypt", "procedure", "then", "s", "NUMBER", "sync", "will", "regardless", "be", "an", "very", "awesome", "addition", "to", "the", "Backup", "gem", "NUMBER", "So", "let", "me", "know", "if", "you", "have", "any", "info", "on", "the", "above", "error", "which", "only", "occur", "in", "Ruby", "NUMBER", "and", "whether", "you", "know", "if", "a", "file", "that", "only", "change", "a", "few", "bytes", "will", "be", "completely", "re", "uploaded", "NUMBER", "Thanks", "Something", "tells", "me", "that", "S", "NUMBER", "Sync", "hasn", "t", "be", "update", "to", "work", "with", "Ruby", "NUMBER", "Thanks", "NUMBER", "Yeah", "actually", "for", "Ruby", "NUMBER", "the", "path", "to", "the", "md", "NUMBER", "library", "be", "require", "digest", "md", "NUMBER", "rather", "than", "just", "require", "md", "NUMBER", "NUMBER", "That", "s", "the", "first", "thing", "that", "goes", "wrong", "in", "the", "s", "NUMBER", "sync", "NUMBER", "rb", "file", "NUMBER", "The", "second", "issue", "be", "in", "the", "Thread", "library", "Users", "Michael", "Desktop", "s", "NUMBER", "sync", "thread_generator", "NUMBER", "rb", "NUMBER", "in", "end", "undefined", "method", "critical", "for", "Thread", "Class", "NoMethodError", "from", "Users", "Michael", "Desktop", "s", "NUMBER", "sync", "thread_generator", "NUMBER", "rb", "NUMBER", "in", "next", "from", "NUMBER", "s", "NUMBER", "sync", "NUMBER", "rb", "NUMBER", "in", "main", "from", "NUMBER", "s", "NUMBER", "sync", "NUMBER", "rb", "NUMBER", "in", "TAG", "Hopefully", "there", "aren", "t", "much", "more", "issue", "that", "need", "to", "be", "made", "compatible", "then", "we", "can", "make", "it", "Ruby", "NUMBER", "compatible", "and", "add", "S", "NUMBER", "Sync", "to", "Backup", "NUMBER", "I", "just", "find", "this", "on", "GitHub", "a", "Ruby", "NUMBER", "compatible", "S", "NUMBER", "Sync", "LINK", "However", "now", "I", "run", "it", "with", "Ruby", "NUMBER", "and", "i", "get", "error", "ha", "NUMBER", "But", "this", "be", "a", "good", "step", "in", "the", "right", "direction", "NUMBER", "Going", "to", "see", "what", "can", "be", "do", "NUMBER", "In", "the", "worst", "case", "we", "now", "have", "NUMBER", "separate", "libraries", "that", "work", "the", "same", "but", "one", "be", "compaitble", "for", "Ruby", "NUMBER", "and", "the", "other", "for", "Ruby", "NUMBER", "Update", "Ruby", "NUMBER", "compatible", "S", "NUMBER", "Sync", "gem", "install", "aproxacs", "s", "NUMBER", "sync", "Ruby", "NUMBER", "compatible", "S", "NUMBER", "Sync", "gem", "install", "s", "NUMBER", "sync", "The", "user", "will", "have", "to", "ensure", "the", "correct", "one", "be", "install", "for", "their", "Ruby", "version", "NUMBER", "Well", "I", "actually", "get", "it", "work", "with", "Backup", "NUMBER", "I", "m", "just", "run", "some", "more", "test", "on", "it", "and", "write", "more", "specs", "and", "i", "ll", "push", "a", "gem", "soon", "that", "include", "the", "S", "NUMBER", "Syncer", "NUMBER", "hurray", "NUMBER", "Works", "both", "with", "Ruby", "NUMBER", "and", "Ruby", "NUMBER", "but", "you", "gotta", "use", "a", "different", "gem", "depending", "on", "which", "you", "want", "to", "use", "as", "stated", "above", "in", "my", "comment", "but", "that", "s", "absolutely", "no", "problem", "just", "a", "different", "gem", "install", "command", "NUMBER", "Boom", "LINK", "This", "commit", "integrates", "S", "NUMBER", "Sync", "with", "the", "Backup", "gem", "NUMBER", "Going", "to", "update", "the", "Syncer", "Wiki", "page", "NUMBER", "And", "it", "has", "be", "release", "NUMBER", "gem", "install", "backup", "and", "check", "out", "the", "docs", "here", "LINK", "You", "re", "welcome", "I", "know", "I", "ll", "enjoy", "this", "one", "as", "well", "ponny", "add", "what", "to", "the", "wiki", "the", "S", "NUMBER", "syncer", "It", "s", "here", "already", "LINK", "Enable", "the", "ability", "to", "specify", "multiple", "trigger", "s", "to", "perform", "NUMBER", "Example", "backup", "perform", "triggers", "backup", "NUMBER", "backup", "NUMBER", "backup", "NUMBER", "This", "would", "perform", "the", "NUMBER", "backup", "configurations", "in", "the", "specified", "order", "NUMBER", "So", "you", "would", "invoke", "it", "like", "so", "backup", "perform", "trigger", "backup", "NUMBER", "backup", "NUMBER", "backup", "NUMBER", "I", "merge", "your", "commit", "and", "applied", "some", "change", "NUMBER", "Check", "it", "out", "The", "change", "LINK", "The", "current", "version", "of", "the", "backup", "bin", "file", "LINK", "have", "not", "yet", "release", "a", "new", "gem", "NUMBER", "I", "test", "this", "locally", "you", "can", "now", "provide", "either", "a", "single", "trigger", "or", "multiple", "triggers", "and", "they", "will", "run", "in", "the", "order", "specified", "NUMBER", "backup", "perform", "trigger", "my_backup", "and", "backup", "perform", "triggers", "backup", "NUMBER", "backup", "NUMBER", "backup", "NUMBER", "backup", "NUMBER", "Also", "add", "an", "alias", "triggers", "plural", "just", "some", "more", "syntactical", "sugar", "NUMBER", "This", "has", "be", "add", "in", "Backup", "NUMBER", "gem", "install", "backup", "LINK", "Cherry", "pick", "this", "in", "to", "develop", "NUMBER", "Ty", "What", "be", "the", "file", "size", "you", "re", "uploading", "to", "Dropbox", "Their", "docs", "state", "that", "the", "file", "size", "limit", "be", "NUMBER", "MB", "NUMBER", "I", "m", "not", "sure", "what", "kind", "of", "error", "it", "throw", "if", "it", "gets", "exceeded", "though", "NUMBER", "But", "you", "re", "right", "in", "general", "it", "d", "be", "a", "good", "idea", "to", "allow", "the", "user", "to", "set", "the", "timeout", "NUMBER", "i", "ll", "leave", "this", "issue", "open", "as", "a", "To", "Do", "NUMBER", "Thanks", "Weird", "that", "it", "takes", "more", "than", "NUMBER", "minutes", "to", "transfer", "NUMBER", "mb", "from", "a", "data", "center", "to", "Dropbox", "NUMBER", "Maybe", "you", "can", "check", "your", "log", "Backup", "log", "backup", "NUMBER", "log", "and", "see", "if", "there", "be", "a", "gap", "between", "the", "time", "that", "it", "start", "transferring", "to", "Dropbox", "and", "it", "raising", "an", "exception", "NUMBER", "It", "should", "display", "a", "time", "cause", "when", "an", "error", "gets", "raise", "it", "should", "clean", "up", "the", "temp", "file", "and", "that", "gets", "logged", "as", "well", "NUMBER", "If", "possible", "show", "me", "the", "log", "Hmm", "NUMBER", "As", "you", "said", "it", "might", "be", "that", "your", "account", "has", "multiple", "connections", "open", "at", "the", "same", "time", "NUMBER", "Also", "your", "suggestion", "for", "a", "trigger", "b", "NUMBER", "b", "NUMBER", "b", "NUMBER", "be", "a", "very", "nice", "idea", "That", "would", "be", "a", "great", "addition", "also", "reduces", "the", "amount", "of", "crontasks", "people", "need", "to", "set", "NUMBER", "I", "will", "both", "add", "this", "feature", "and", "also", "pull", "in", "your", "timeout", "commit", "soon", "NUMBER", "I", "ll", "open", "a", "new", "ticket", "with", "the", "trigger", "chaining", "feature", "NUMBER", "Thanks", "great", "idea", "Merged", "in", "to", "develop", "NUMBER", "Is", "this", "error", "raise", "because", "it", "tried", "to", "send", "the", "same", "message", "twice", "in", "a", "row", "on", "the", "same", "Twitter", "account", "Ok", "what", "do", "you", "think", "of", "this", "Sends", "a", "tweet", "informing", "the", "user", "that", "the", "backup", "operation", "proceeded", "without", "any", "error", "def", "notify_success", "twitter_client", "NUMBER", "update", "Backup", "Succeeded", "model", "NUMBER", "label", "File", "NUMBER", "basename", "Backup", "Model", "NUMBER", "file", "end", "Sends", "a", "tweet", "informing", "the", "user", "that", "the", "backup", "operation", "raise", "an", "exception", "and", "will", "send", "the", "user", "the", "error", "details", "def", "notify_failure", "exception", "twitter_client", "NUMBER", "update", "Backup", "Failed", "model", "NUMBER", "label", "File", "NUMBER", "basename", "Backup", "Model", "NUMBER", "file", "end", "It", "ll", "basically", "contain", "the", "backed", "up", "filename", "which", "be", "always", "unique", "NUMBER", "then", "you", "also", "know", "which", "file", "was", "actually", "backed", "up", "NUMBER", "What", "would", "this", "Hashtag", "enable", "Alright", "cool", "NUMBER", "Then", "for", "now", "I", "ll", "leave", "it", "at", "this", "and", "push", "out", "a", "new", "gem", "that", "fix", "this", "issue", "NUMBER", "Then", "later", "we", "can", "see", "for", "additional", "options", "to", "notifiers", "NUMBER", "Thanks", "Pushed", "out", "version", "NUMBER", "that", "fix", "this", "issue", "NUMBER", "Thanks", "Hi", "Merging", "now", "and", "push", "out", "a", "new", "gem", "Thanks", "for", "these", "additions", "Thanks", "I", "m", "pulling", "this", "and", "right", "now", "and", "going", "to", "see", "how", "it", "works", "NUMBER", "I", "ll", "get", "back", "to", "you", "soon", "NUMBER", "Thanks", "Yup", "As", "with", "all", "the", "other", "modules", "Databases", "Storages", "Encryptors", "Compressors", "Notifiers", "be", "just", "as", "easy", "to", "extend", "and", "add", "new", "notifiers", "to", "NUMBER", "A", "Backup", "Notifier", "Twitter", "would", "be", "a", "nice", "addition", "indeed", "I", "be", "currently", "work", "on", "a", "sync", "solution", "namely", "the", "sync_with", "similar", "to", "store_with", "option", "that", "bypasses", "the", "copying", "packaging", "compressing", "and", "encrypting", "and", "directly", "syncs", "folders", "from", "the", "production", "server", "to", "the", "backup", "server", "NUMBER", "DSL", "will", "look", "something", "like", "this", "LINK", "So", "i", "m", "currently", "build", "this", "but", "feel", "free", "to", "fork", "the", "repository", "and", "clone", "the", "develop", "branch", "NUMBER", "You", "ll", "probably", "only", "have", "to", "do", "NUMBER", "things", "Create", "a", "lib", "backup", "notifier", "twitter", "NUMBER", "rb", "Create", "a", "spec", "notifier", "twitter_spec", "NUMBER", "rb", "Add", "Twitter", "to", "the", "array", "NOTIFIERS", "Mail", "in", "lib", "backup", "NUMBER", "rb", "That", "should", "be", "enough", "to", "get", "the", "Twitter", "notifier", "up", "and", "run", "NUMBER", "You", "can", "use", "lib", "notifier", "mail", "NUMBER", "rb", "as", "an", "example", "file", "NUMBER", "It", "s", "pretty", "minimalistic", "NUMBER", "Let", "me", "know", "if", "you", "have", "any", "further", "question", "Thanks", "Forgot", "to", "mention", "NUMBER", "things", "that", "you", "ll", "also", "want", "to", "do", "NUMBER", "Being", "able", "to", "set", "defaults", "for", "the", "Twitter", "notifier", "NUMBER", "To", "do", "this", "you", "simply", "need", "to", "create", "this", "file", "lib", "backup", "configuration", "notifier", "twitter", "NUMBER", "rb", "Just", "copy", "the", "lib", "backup", "configuration", "notifier", "mail", "NUMBER", "rb", "and", "change", "the", "attributes", "to", "for", "example", "the", "Twitter", "credentials", "and", "it", "should", "work", "out", "of", "the", "box", "NUMBER", "And", "don", "t", "forget", "to", "autoload", "Again", "inside", "lib", "backup", "NUMBER", "rb", "you", "see", "a", "lot", "of", "autoload", "lines", "NUMBER", "Be", "sure", "to", "add", "the", "paths", "to", "the", "twitter", "NUMBER", "rb", "both", "the", "notifier", "as", "well", "as", "the", "configuration", "file", "so", "they", "be", "be", "required", "NUMBER", "But", "that", "should", "be", "it", "NUMBER", "Again", "let", "me", "know", "if", "you", "need", "any", "help", "or", "have", "any", "question", "NUMBER", "Thanks", "a", "lot", "Glad", "to", "hear", "that", "And", "no", "problem", "re", "open", "the", "ticket", "now", "NUMBER", "I", "have", "merge", "your", "branch", "in", "to", "the", "develop", "branch", "cleaned", "up", "the", "code", "and", "comments", "a", "bit", "NUMBER", "Going", "to", "to", "add", "the", "Twitter", "notifier", "to", "the", "Wiki", "NUMBER", "Thanks", "for", "your", "contribution", "Strange", "NUMBER", "Seems", "to", "be", "fail", "over", "something", "very", "simple", "NUMBER", "At", "a", "first", "glace", "it", "seems", "to", "try", "to", "allocate", "NUMBER", "gig", "of", "data", "in", "to", "memory", "NUMBER", "Then", "later", "it", "looks", "like", "it", "has", "issue", "determining", "where", "the", "rm", "command", "be", "located", "NUMBER", "I", "will", "try", "to", "reproduce", "this", "error", "NUMBER", "If", "you", "have", "time", "and", "if", "possible", "could", "you", "try", "this", "in", "Ruby", "NUMBER", "and", "see", "if", "the", "error", "gets", "raise", "here", "as", "well", "I", "notice", "the", "above", "error", "might", "possibly", "a", "bug", "in", "Ruby", "NUMBER", "Thanks", "I", "ll", "post", "here", "if", "I", "find", "anything", "I", "think", "I", "find", "the", "issue", "NUMBER", "Ouch", "I", "attempted", "to", "upload", "a", "file", "around", "NUMBER", "gb", "and", "look", "at", "the", "memory", "consumption", "NUMBER", "Weird", "NUMBER", "This", "happens", "once", "it", "begins", "transferring", "to", "Amazon", "S", "NUMBER", "It", "try", "to", "allocate", "to", "allocate", "the", "whole", "file", "in", "memory", "NUMBER", "I", "ll", "look", "in", "to", "this", "use", "the", "Fog", "library", "as", "I", "thought", "it", "support", "streaming", "rather", "than", "allocating", "everything", "before", "transferring", "NUMBER", "Note", "this", "applies", "to", "Ruby", "NUMBER", "Ruby", "Enterprise", "Edition", "I", "find", "the", "issue", "and", "I", "ll", "apply", "the", "patch", "for", "version", "NUMBER", "I", "ll", "go", "through", "all", "the", "storage", "methods", "to", "see", "if", "the", "bug", "applies", "to", "the", "other", "protocols", "and", "fix", "these", "as", "well", "and", "this", "memory", "issue", "should", "be", "fix", "as", "of", "NUMBER", "which", "i", "ll", "release", "today", "NUMBER", "Thanks", "for", "your", "feedback", "You", "re", "welcome", "Note", "to", "self", "Amazon", "S", "NUMBER", "allocation", "issue", "fix", "Rackspace", "Cloud", "Files", "seems", "like", "it", "doesn", "t", "support", "streaming", "ask", "Fog", "gem", "author", "Dropbox", "do", "stream", "The", "Amazon", "S", "NUMBER", "memory", "allocation", "issue", "has", "be", "patched", "in", "Backup", "NUMBER", "which", "be", "now", "available", "NUMBER", "gem", "install", "backup", "About", "Rackspace", "Cloud", "Files", "I", "spoke", "with", "Wesley", "Beary", "of", "the", "Fog", "gem", "and", "it", "seem", "there", "was", "a", "small", "bug", "in", "the", "Rackspace", "Cloud", "Files", "storage", "adapter", "which", "led", "to", "the", "same", "issue", "I", "produced", "but", "from", "the", "Backup", "gem", "s", "side", "that", "it", "allocates", "memory", "for", "the", "whole", "file", "and", "doesn", "t", "stream", "NUMBER", "Wesley", "has", "patched", "this", "issue", "here", "LINK", "Once", "he", "release", "a", "new", "gem", "I", "ll", "update", "the", "Backup", "gemspec", "and", "add", "his", "new", "gem", "as", "a", "dependency", "so", "that", "the", "latest", "version", "gets", "install", "that", "include", "the", "Rackspace", "CF", "patch", "NUMBER", "Hi", "I", "actually", "test", "this", "before", "hand", "and", "had", "encryption", "come", "before", "compression", "but", "it", "turned", "out", "that", "the", "more", "data", "you", "had", "to", "encrypt", "the", "larger", "the", "file", "became", "NUMBER", "So", "for", "this", "reason", "I", "actually", "let", "it", "encrypt", "before", "compress", "NUMBER", "I", "had", "it", "the", "way", "you", "describe", "it", "prior", "to", "that", "NUMBER", "However", "I", "only", "test", "that", "on", "file", "around", "NUMBER", "NUMBER", "mb", "in", "size", "so", "maybe", "if", "you", "re", "dealing", "with", "larger", "file", "NUMBER", "NUMBER", "NUMBER", "mb", "that", "doesn", "t", "apply", "anymore", "Thanks", "for", "your", "feedback", "I", "ll", "double", "check", "it", "soon", "NUMBER", "Gotcha", "NUMBER", "Thank", "you", "both", "for", "point", "this", "out", "and", "provide", "me", "with", "that", "link", "NUMBER", "I", "ll", "push", "out", "a", "new", "version", "soon", "v", "NUMBER", "that", "change", "the", "order", "to", "Compression", "Encryption", "NUMBER", "Released", "Backup", "NUMBER", "which", "change", "the", "order", "to", "Compression", "Encryption", "NUMBER", "Hi", "Pat", "Thanks", "for", "your", "work", "on", "this", "NUMBER", "Although", "it", "hasn", "t", "be", "pull", "I", "took", "your", "idea", "for", "failure", "notifications", "in", "to", "Backup", "NUMBER", "the", "upcoming", "huge", "NUMBER", "rewrite", "release", "NUMBER", "This", "release", "should", "be", "out", "soon", "and", "will", "enable", "both", "notifications", "on", "success", "and", "failure", "NUMBER", "See", "the", "new", "DSL", "here", "LINK", "see", "line", "NUMBER", "for", "Mail", "notifications", "NUMBER", "Thanks", "Also", "Backup", "NUMBER", "be", "on", "the", "develop", "branch", "here", "for", "additional", "information", "LINK"], "text_count": [0, 10839, 2859, 1287, 766, 53, 1029, 8, 58, 1570, 1468, 2759, 1444, 1259, 1259, 302, 0, 0, 0, 0, 3133, 900, 517, 493, 701, 546, 0, 0, 0, 0, 5491, 3726, 1807, 59, 880, 363, 0, 0, 0, 0, 6487, 18, 2678, 2438, 2002, 0, 0, 0, 0, 0, 1972, 731, 859, 556, 866, 480, 821, 0, 0, 0, 4803, 365, 3858, 284, 0, 0, 0, 0, 0, 0, 3280, 377, 2402, 886, 379, 0, 0, 0, 0, 0, 5986, 2920, 544, 2207, 336, 248, 0, 0, 0, 0, 427, 2131, 321, 0, 0, 0, 0, 0, 0, 0, 6840, 1305, 3939, 1780, 0, 0, 0, 0, 0, 0, 10454, 19598, 241, 778, 285, 443, 0, 0, 0, 0, 27059, 87, 20934, 399, 4973, 5317]}, {"repo": "backup", "type": "nonelite", "title": "", "number of text": 647, "text": "  Pushover provides an API through which you can push notifications to registered applications. This change is to support notification via this API. It uses the [Pushover Gem](https://github.com/erniebrodeur/pushover) to do this.\n the code looks strong. anyone here using pushover and willing to give it a test drive?\n so, can you add a commit that reverts version to 3.0.25 and squash them all into one? also please rebase with current master, otherwise the latest mocha will show your build as broken.\n Sure. Only after I did the change did I read that you wanted branches from the develop branch. D'oh!\n ouch, didn't know about it -- my glacier work (#380) is also based off master \n OK, so I've made the change and squashed the commits into one. I'm afraid I'm a little new to Git, so I'm not sure what you want me to do next (my profound apologies!). Should I create a new pull request? And, how do I rebase my branch with the current master? Sorry.\n don't worry with rebasing yet (your work should merge cleanly). as for squashed commits, just do a push --force into the same branch that you made this pull request from.\n OK. Done.\n it fails the tests on ruby 1.8.7 because you're using the new 1.9-only hash syntax. we want this gem 1.8-compatible, so please fix it:\nhttps://travis-ci.org/meskyanichi/backup/jobs/3152933\n OK, after some reading of the Pro Git book and a couple of aborted attempts to get 1.8.7 to build on OSX (!), I've managed to get a squashed commit which builds. This required removing the dependency on the Pushover gem which doesn't support 1.8.7. However, we didn't need all the bells and whistles provided by the gem, it's just a post to a REST API with a JSON payload. This has gone green in CI: https://travis-ci.org/meskyanichi/backup/builds/3186845\n awesome, you're the man!\n\nso, any objections people, or can we merge this? :)\n Sure. I'll update as soon as I'm back in front of a computer :). Should probably also update the readme\n  `Encryptor::GPG` has been updated to support 3 modes of operation:\n`:asymmetric` (default), `:symmetric` or `:both`.\n\nIn `:asymmetric` mode (or `:both`), multiple recipients are now supported.\nRecipient's public keys are setup in the `#keys` hash, then specified using `#recipients`. \n\nIn `:symmetric` mode (or `:both`), the passphrase may specified in `#passphrase` or using a `#passphrase_file`. \n\nOptions are also available for using a specific GnuPG home directory (--homedir) and supplying a specific configuration (--options).\n\nThe single `#key` setting has been deprecated.\nThis will still work, but you'll get a log warning until your configuration has been updated.\n\nSee `lib/backup/encryptor/gpg.rb` for the full documentation.\n Woo-hoo! :beers:\n appreciate the multiple recipients, thanks!\n   Can it be included to new gem release for Rails 3.2.6 compatibility?\n  [According to the wiki](https://github.com/meskyanichi/backup/wiki/Encryptors) the openssl decrypting should working with a password instead of a password file. However, in the [CLI Utility](https://github.com/meskyanichi/backup/blob/master/lib/backup/cli/utility.rb#L172), openssl is given `-pass file:#{options[:password_file]}`. If a password is specified directly rather then through a file, the option for openssl should be `pass:#{options[:password_file]}`\n\nI suggest letting the user specify _pass:..._ or _file:..._\n\nWhat do you think?\n\nRobin\n The `backup decrypt` command only has a `--password-file` option. I think you're just misreading the wiki :)\nWith that said, there's a bug in that command which was just patched (#323).\nUntil the next gem release, that command will only work if you actually use the `--password-file` option.\nSo, you'll have to use `openssl` directly if you want to enter a password.\n\n```\nopenssl aes-256-cbc -d -base64 -salt -in /path/to/backup.tar.enc -out /path/to/backup.tar.gz\n```\n\nYou don't want a `--password` option for this command, as you'd be typing it in the clear and it could be stored in your bash history.\n True, I misunderstood _You can also use --password-file to provide the password._. Maybe we should change this in _to provide the password file_.\n\nHowever, then this issue is a feature request. I run backup from a Chef Recipe, so I would like s.th. non-interactive. Openssl supports  `openssl -pass pass:[PASSWORD]`, so why shouldn't backup? The user that runs backup clears the history automatically when logging out.\n     +1!\n +1\n +1\n Yes, please. +1\n +1\n +1\n +1\n +1\n +1\n Updated Fog to 1.4.0 and squashed the commits.  The specs are passing and backup is working for my S3 configuration.  \n\nI also removed the Gemfile.lock file as it's not necessary for developing the gem:  http://yehudakatz.com/2010/12/16/clarifying-the-roles-of-the-gemspec-and-gemfile/\n Opened: https://github.com/meskyanichi/backup/pull/339\n   +1\n  With backup 3.0.24, I recently started getting a backup error :\n\n[2012/04/27 19:51:44][warning] ConfigurationError: [DEPRECATION WARNING]\n[2012/04/27 19:51:44][warning]   Backup::Compressor::Gzip.best has been deprecated as of backup v.3.0.24\n[2012/04/27 19:51:44][warning]   This setting has been replaced with:\n[2012/04/27 19:51:44][warning]   Backup::Compressor::Gzip.level\n[2012/04/27 19:51:44][warning] Backup::Compressor::Gzip.level is being set to '9'\n[2012/04/27 19:51:44][warning] ConfigurationError: [DEPRECATION WARNING]\n[2012/04/27 19:51:44][warning]   Backup::Compressor::Gzip.fast has been deprecated as of backup v.3.0.24\n[2012/04/27 19:51:44][warning]   This setting has been replaced with:\n[2012/04/27 19:51:44][warning]   Backup::Compressor::Gzip.level\n[2012/04/27 19:51:44][error] Dependency::LoadError: Dependency missing\n[2012/04/27 19:51:44][error]   Dependency required for:\n[2012/04/27 19:51:44][error]   Amazon S3, Rackspace Cloud Files (S3, CloudFiles Storages)\n[2012/04/27 19:51:44][error]   To install the gem, issue the following command:\n[2012/04/27 19:51:44][error]   > gem install fog -v '~> 1.1.0'\n[2012/04/27 19:51:44][error]   Please try again after installing the missing dependency.\n\nWhen I revert to 3.0.23, everything works fine. In both cases fog 1.3.1 in installed.\n The `~> 1.1.0` means it has to be version `1.1.x` so `1.3.x` is too high. Does it still not work when installing Fog 1.1.x?\n Guess I must have another gem which uses fog, and requires the latest version.\n\nWhy does backup 3.0.24 need an older version of fog than 3.0.23, and shouldn't bundler either force 1.1.x, or flag a fog version conflict ?\n\nNot sure I want to revert to fog 1.1.x, as if might affect the other gems which use fog. I'll stick with backup 3.0.23 for now.\n You would be better off keeping the gems for backup with a project.\nFor example, if you stick with the default location of `~/Backup`, you can do the following:\n\n``` text\n$ cd ~/Backup\n$ bundle init\n$ echo \"gem 'backup'\" >> Gemfile\n$ bundle install --path vendor/bundle --binstubs\n```\n\nYou would want to add whatever gem dependencies you need for backup in your Gemfile.\nSo, to add `fog`, you would:\n\n``` text\n$ echo \"gem 'fog', '~> 1.1.0'\" >> Gemfile\n$ bundle install\n```\n\nYou can then keep your `~/Backup` folder under SCM.\n\n``` text\n$ git init\n$ cat > .gitignore <<EOF\n> vendor/bundle\n> bin/\n> .tmp/\n> data/\n> log/\n> EOF\n$ git add .\n$ git commit -m 'initial commit'\n```\n\nI usually ignore `.bundle/`, but since this would not be a shared project, you may want to keep this.\nYou'll want to keep `.cache/` if you use Dropbox.  \n\nTo generate a model: \n`$ ~/Backup/bin/backup generate:model --trigger my_backup (...etc)`\nTo run the job:\n`$ ~/Backup/bin/backup perform --trigger my_backup`\n\nIf you choose a different folder than `~/Backup`, then you'll need to use the `--root-path` option.\nIn which case you would run:\n`/other/folder/bin/backup perform --trigger my_backup --root-path /other/folder`\nOr, say from a cron job:\n`bash -l -c 'cd /other/folder; bin/backup perform --trigger my_backup --root-path .'`\n +1 for updating Fog dependency to 1.3.1\n +2\n +1 for Fog 1.3.1 I ran into the same issue, and it's due to airbrake requiring a higher version of multi_json than Fog 1.1.x does.\n\n```\n  In Gemfile:\n    fog (~> 1.1.0) ruby depends on\n      multi_json (~> 1.0.3) ruby\n\n    airbrake (>= 0) ruby depends on\n      multi_json (1.3.5)\n```\n\nIn Fog 1.3.1 the multi_json dependency is less strict becoming ~> 1.0 rather than the ~> 1.0.3 that causes issues with other gems depending on a greater version of multi_json than 1.0.x\n +1 for @jdutil's bumping of the fog dependency.\n As far as I understood \"jdutil\" has found the problem and made the corrections. So the need is to do the pull and merge to master branch.\nThe question is, will it be done in master branch or should we go by ourselves?\n\nTks.\n +100500   @ischuster\n @burns your comment seem to suggest that keeping backup dependencies in the same Gemfile as your rails project is a bad idea. backup should really exist as separate project, with separate repository. If so, performing backup using this gem just got a lot harder than before. Now, do we have a separate capistrano deploy to push this backup config to production environment?!\n Instead of trying to manage dependency outside of bundler (lib/backup/dependency.rb), could we split the optional gems related functinoality (s3 backup using fog, for example) as a separate gem - call it backup-s3. This is similar to how omniauth manages individual plugins. They have add-on gems called omniauth-facebook, omniauth-openid and such. This will allow us to upgrade individual optional plugins without having to roll forward for each minor upgrade to these gems.\n Fair enough. I don't think this fact of keeping backup outside of rails project has been clear in communication enough. I have been using backup for over 1.5 years and always worked inside of rails even with Gemfile. I believe, people just assume that it all works until it doesn't. Lately though, dependency graph of backup gem has expanded and it causes such conflicts to occur often.\n\nAbout extracting optional functionality as plugin, I believe, it is a matter of runtime vs. build time convenience. Sure, it will be more work to maintain 30 separate gems as opposed to one. But most end users use only 2-3 of those optional features and will be just happy to install those and go their way.\n\nSome warning to rails folks to keep backup separate from Gemfile will help.\n Personally I believe you should be able to bundle backup with your Rails app.  I set require false within the Gemfile so that it isn't being loaded with the app.\n\nThe reason I do this is so that I can keep all my application dependencies within the project.  That includes services you may not consider part of the application such as Whenever, Backup, Capistrano, God, and anything else I am relying on for my application.\n\nWhile it may make sense for you to use Backup outside the context of your application it simply causes more work, more documentation, more organization, and more processes to manage.  I'm just working on some small apps, and it works much better to keep everything I need within the application repository.  It helps new developers bootstrap the application, and have everything they need in one place.  It also allows me to have my Capistrano deployment scripts manage updating my Backup configuration when necessary.\n\nWhile I understand you not wanting to always support dependency updates I think it's foolish not to update this Fog dependency to please the dozen or so people in favor of it.  More time is being spent debating whether or not to update Backup to better support cloud storage than it would take to simply update it when I've already submitted and tested a pull request for it.\n\nIt is going to benefit everyone.  Yourselves and the other developers like myself that enjoy the simplicity of keeping all their dependencies in one place.  Besides simply leaving Backup out of your Gemfile does not prevent this error from happening to people.  Bundler was created to help alleviate these issues.  \n\nIt is very plausible that someone trying to use Backup even separately from their application could still run into this dependency error if they have multiple versions of different Gems installed.  So to me the argument that this should be kept separate from the Rails app doesn't hold much weight personally.\n Agreed 100% to Jeff  \"More time is being spent debating whether or not to\nupdate Backup to better support cloud storage than it would take to simply\nupdate ...\"\nGemfile, bundle, ... were made to keep things simple and easy. Why do not\nuse them?\nMaybe it brings some extra work. But that's the strength of social coding.\nYou don't have to do all by yourself.\nIs this case in particular we've seen this. The solution was given by a\nuser and published in a branch ready to be merged.\n\n2012/6/11 Michael van Rooijen <\nreply@reply.github.com\n\n> > Personally I believe you should be able to bundle backup with your Rails\n> > app. I set require false within the Gemfile so that it isn't being loaded\n> > with the app.\n> \n> But doesn't think still cause dependency issues when running `bundle\n> install`?\n> \n> > The reason I do this is so that I can keep all my application\n> > dependencies within the project. That includes services you may not\n> > consider part of the application such as Whenever, Backup, Capistrano, God,\n> > and anything else I am relying on for my application.\n> \n> Understandable.\n> \n> > While it may make sense for you to use Backup outside the context of\n> > your application it simply causes more work, more documentation, more\n> > organization, and more processes to manage. I'm just working on some small\n> > apps, and it works much better to keep everything I need within the\n> > application repository. It helps new developers bootstrap the application,\n> > and have everything they need in one place. It also allows me to have my\n> > Capistrano deployment scripts manage updating my Backup configuration when\n> > necessary.\n> > \n> > While I understand you not wanting to always support dependency updates\n> > I think it's foolish not to update this Fog dependency to please the dozen\n> > or so people in favor of it. More time is being spent debating whether or\n> > not to update Backup to better support cloud storage than it would take to\n> > simply update it when I've already submitted and tested a pull request for\n> > it.\n> \n> The problem is that Rails (and typically the gems people typically use\n> around Rails) evolve at a rapid pace. If these tools constantly update then\n> people will constantly be coming back to Backup asking for dependency\n> updates because otherwise Bundler is unable to bundle their app due to\n> Backup using an older version of `fog` compared to what another dependency\n> in the app requires.\n> \n> > It is very plausible that someone trying to use Backup even separately\n> > from their application could still run into this dependency error if they\n> > have multiple versions of different Gems installed. So to me the argument\n> > that this should be kept separate from the Rails app doesn't hold much\n> > weight personally.\n> \n> Backup always requires gems through the `gem` function before\n> `require`-ing it, meaning it always loads in the correct gem version and\n> does not conflict even if newer versions are installed. Of course, if\n> you're bundling it along with say Carrierwave in a Rails app which also\n> uses Fog (but a later version) then it will conflict because of Bundler.\n> \n> ---\n> \n> Now, despite all of this, it might be worth trying to just losen the\n> dependencies to a `>=` rather than `~>` where any newer version would work,\n> rather than needing a certain `minor` version of a gem. I think most things\n> are backwards compatible so there would less likely be need for dependency\n> updates when other gem authors update their gems and dependencies.\n> \n> What do other people think of this?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/306#issuecomment-6257330\n\n## \n This is all just a misunderstanding of how to use Bundler.\n\nBundler is not a tool to _package_ all the gems for every application related to your project. \nIt's purpose is to create an isolated environment for your application, which includes the specific versions\nof all the gems your app requires. It's purpose is to solve these dependency issues.\n\nBackup is not a dependency of your Rails application, and therefore should not be in your Gemfile.\nThe only thing you should really keep with your Rails app (and under SCM)\nis the Backup config.rb and Models for backup jobs related to your Rails app.\n\nIf you wish to keep a specific version of Backup with your Rails project,\nthen you can place it in a subdirectory of your project; like `vendor/backup`.\nBut it should have it's own Gemfile, which should only contain those gems which Backup requires.\n(To be clear, don't put `gem 'rails'` in Backup's Gemfile.)\n\nYour cron jobs should run Backup within it's own environment.\n\n```\nbash -l -c 'cd /rails_app/vendor/backup; bundle exec backup perform ...\n```\n\nIf you want a rake task within your Rails application to run a backup job,\nthen you need to create a subshell outside of your app's environment\nso you can run Backup within it's environment.\n\n``` ruby\n# /rails_app/Rakefile\ntask :backup do\n  dir = File.expand_path('../', __FILE__)\n  Bundler.with_clean_env do\n    exec \"cd #{ dir }/vendor/backup/; bundle exec backup perform --config-file #{ dir }/Backup/config.rb ... \"\n  end\nend\n```\n I understand your reservations but shouldn't it also be a goal of backup to continue progressing forward?  There's reasons that backups dependencies release new versions like bug fixes, performance improvements or new features.  I think it's in the best interest of the project to periodically update it's dependencies when there are not upgrade issues. Otherwise it's very short sighted to just say hey guys my setup works so there's no reason to update it.  That's how projects slowly die as everyone else continues moving forward, but the project waits so long to try getting up to date that people move on elsewhere or it becomes more of a hassle to upgrade than it's worth. \n I'm glad we agree on the need to gradually update dependencies.  I just think it's simpler to update them gradually over time like this on a case by case basis.  It's much more likely to cause issues when you attempt to update several gems at once than it is to update each gem on a case by case basis.\n  Hi\n\nI'm getting an error when I try to sync directories using the s3 syncer. First, my particulars:\n\nRed Hat Enterprise Linux Server release 6.2 (Santiago)\nRuby Enterprise Edition (ruby 1.8.7 (2012-02-08 MBARI 8/0x6770 on patchlevel 358))\nBackup 3.0.23\n\nmodel is the generic s3 sync. Only changed to add the location of the s3 bucket and path.\n\nOne last note: the failure works only when I try bigger directories. I made a very small test directory and the s3 sync works great.\n\nHere's the error log. I took a look at the code and it seems to be failing at the point where it tries to create some local files. I'm running as root so I don't think there should be a permissions error.\n\n[2012/04/06 17:45:55][message] Performing Backup for 'Description for snip (snip)'!\n[2012/04/06 17:45:55][message] [ backup 3.0.23 : ruby 1.8.7 (2012-02-08 MBARI 8/0x6770 on patchlevel 358) [x86_64-linux], MBARI 0x6770, Ruby Enterprise Edition 2012.02 ]\n[2012/04/06 17:45:55][message] Backup::Syncer::S3 started the syncing process:\n[2012/04/06 17:45:55][message]   Generating checksums for /home/snip/public_html\n[2012/04/06 17:45:57][error] ModelError: Backup for Description for snip (snip) Failed!\n[2012/04/06 17:45:57][error]   An Error occured which has caused this Backup to abort before completion.\n[2012/04/06 17:45:57][error]   Reason: NoMethodError\n[2012/04/06 17:45:57][error]   undefined method `captures' for nil:NilClass\n[2012/04/06 17:45:57][error] \n[2012/04/06 17:45:57][error] Backtrace:\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:175:in`initialize'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:102:in `new'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:102:in`local_files'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:101:in `collect'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:101:in`local_files'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:93:in `all_file_names'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:79:in`sync!'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:53:in `perform!'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:52:in`each'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/syncer/cloud.rb:52:in `perform!'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/model.rb:351:in`to_proc'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/model.rb:249:in `each'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/model.rb:249:in`perform!'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/cli/utility.rb:74:in `perform'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/cli/utility.rb:65:in`each'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/lib/backup/cli/utility.rb:65:in `perform'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in`send'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/invocation.rb:118:in`invoke_task'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/base.rb:389:in`start'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/backup-3.0.23/bin/backup:11\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise/bin/backup:19:in `load'\n[2012/04/06 17:45:57][error]   /opt/ruby-enterprise/bin/backup:19\n[2012/04/06 17:45:57][message] ModelError: If you have other Backup jobs (triggers) configured to run,\n[2012/04/06 17:45:57][message]   Backup will now attempt to continue...\n I just pushed a new version of the gem (3.0.24) you can try that.\n\nHowever, the thing with the Syncers is that it's very thread-intensive (unless you use processes, which is very memory intensive and not really recommended). In Ruby 1.8.7, we only have green threads and these might be the cause of this when dealing with more files/directories at a higher concurrency level.\n\nYou could try to things real quick:\n\n1) Update the Backup gem to 3.0.24 as there have been some fixes the past 2-3 months, including syncer improvements\n2) Lower the concurrency level (the amount of threads that are spawned)\n3) Try using MRI 1.9.3 instead of 1.8.7 since it uses native threads and does the job extremely well (for me at least)\n\nI just did a run, transferring about 50mb of (a lot) of small files/folders using a concurrency level of 50 (meaning 50 threads) and they all transferred in a matter of seconds.\n You might also try going to the directory that's causing this error and run the following:\n\n```\nfor n in $(find . -type f); do echo -n '.'; openssl md5 $n 2>&1 | tee -a debug.log | grep -v '^MD5.*'; done\n```\n\nThis should produce nothing but dots until finished.\nIf anything else is output, check the full results in `debug.log` to see which file(s) are causing a problem.\n If you are using syncers and any of the added directories contain a filename with character \")\", it will cause this error. For example, if you have added a directory \"uploads\" to a syncer and \"uploads\" contains a file named \"example(2).png\", `backup` command will fail with the posted error.\nThis happens because `Backup::Syncer::Cloud::LocalFile#initialize` uses regular expression `/^MD5\\(([^\\)]+)\\)= (\\w+)$/` which will fail to match such filenames.\nWe might use some look-ahead regular expressions but unfortunately I don't have that much regex proficiency. Another thing I'm thinking of is reversing the string before match (as the right hand side of = is a hash and more regular), chain it to `match()` for `captures` and then `map(&:reverse)` (though I don't know if that would affect binary/unicode string). Or something simpler like this -\n\n``` ruby\n#(untested)\nline = sanitize(line).chomp.gsub(/^MD5\\(/, '')\nline =~ /\\)= (\\w+)$/\n@md5 = $1\n@path = line.gsub(/\\)= (\\w+)$/, '')\n\n```\n Good catch. In this case, it's probably better to just split this line up.\n\n``` rb\ndef initialize(directory, line)\n  @invalid = false\n  @directory = sanitize(directory)\n  line = sanitize(line).chomp\n  @path = line.slice(4..-36)\n  @md5 = line.slice(-32..-1)\n  @relative_path = @path.sub(@directory + '/', '')\nend\n```\n\nETA: I mean `slice`, not `split` :)\n I am having the same issue. but no matter what i do, it will not sync. i am using Backup gem  3.0.24.\n How's the best way to get this into my app? Should I reference the syncer_updates branch in my Gemfile? This is broken for me in a production app...\n @cjohnson You could, but that branch is actually in my fork. I just pushed a new branch based on the 'develop' branch which includes all my pull requests, as well as the latest patch that got merged directly to 'master'. You're welcome to use it until the next gem release.\n\n``` ruby\ngem 'backup',\n  :git => 'git://github.com/burns/backup.git',\n  :branch => 'current'\n```\n Great!\n Hi,\nI'm having the same issue as some of my files have the ( and chinese characters in their name.  I see that the issue has been closed 3 days ago.  How do I get the fix for this, install the latest gem or do I have to do a git clone and build my gem.\n\nAny replies appreciated.\n\nThanks,\nSanjay.\n Same here, please push a new version. Thanks!\n Cool :)\n  Adds support for specifying a key file to use for encrypting with OpenSSL (tests for configuration and encryptor)\nAdds support for --pass_file and --salt options on backup decrypt thor task. (no existing tests for thor tasks)\n Will do!\n Any idea when you plan on bumping the gem version?\n  I'm wondering if it would be hard to implement generating checksum for each archive. If you don't have time to implement it, maybe you have some advice where to put this? Maybe even separate module?\n There are many algorithms generating file checksum, the most popular methods are md5 and sha1 or more advanced variations sha224, sha256, sha384, sha512, most of linux distros use them. But if we have one implementation adding other shouldn't be very hard.\n\nI think that generating checksum at remote machine won't be possible (beside machines with shell access), but we can dump generated checksum to file and upload it to storage space with archive, most important thing is having checksum at all! :)\n\nNow lets talk about tools, ruby has libraries for generating each of mentioned checksum, for example:\n\n``` ruby\n# generating md5\n\nrequire 'digest/md5'\nDigest::MD5.file(\"data-2011-11-30.sql.gz\")\n```\n\n``` ruby\n# generating sha1\n\nrequire 'digest/sha1'\nDigest::SHA1.file(\"data-2011-11-30.sql.gz\")\n```\n\n``` ruby\n# generating sha512\n\nrequire 'digest/sha1'\nDigest::SHA512.file(\"data-2011-11-30.sql.gz\")\n```\n\nEach of above examples will generate you completly portable checksum (generating checksum of the same file will give you the same output at any machine by any tool which implements given algorithm). \n\nOnly minor problem is speed of ruby. Generating sha512 checksum (this the most complex one, it takes most time to compute this) of 1GB file at Intel Core i7 3.33GHz by ruby takes about ~5 seconds, generating one by system tools takes about ~4 seconds. I'm fine with that ;-) but I think that you should now.\n\nAnd last thing, output of checksum should go to file and file should like like below (if we have multiple archives in one task):\n\n``` bash\n04a3e70a42c47df13a47ab0e5ce2a8e3bd5e044fb0e0bf5cb0bf8136d5864ef6c594c0fbcd7424aff90c325ba4cd60038e59fc1898f7ecfebac3bcc79ce1d389  data-2011-11-30.sql.gz\ne4b060a5e5d52664af70d45423733f92aabbf37f502e42456cf81a6c547778cd52feb8ec361f89b4470ed58471aca3fea4a167fa6353acf0ad5fd72e50c71380  data-2011-11-29.sql.gz\n9c361a80e572fcf2b8dda257c7d09ff30730964ee9f25aa5a3c817de284a8802161ba7f8fa82d30fcb43b64d75fc0faee0edc22b5e5bfd2085f01e169df15975  data-2011-11-28.sql.gz\n```\n\nEach lines contains <checksum> <filename>, such structure makes validating data easier for command line tools (test.sha512 is file from above):\n\n``` bash\n$ sha512sum -c test.sha512 \ndata-2011-11-30.sql.gz: OK\ndata-2011-11-29.sql.gz: OK\ndata-2011-11-28.sql.gz: OK\n```\n\nAnd I've forgotten about one thing, command line utils are provided by coreutils package - http://www.gnu.org/software/coreutils/.\n Cool, thanks for the detailed explanation!\n\nThis, and #241 are what I want to get incorporated if possible in one of the future releases of backup. I'll have to look at the possibilities.\n\nA question though as I don't know how to get it working, i'm probably doing something wrong.\n\nI have a file called `foo.rb` and I attach a sha1 string (prefixed) to it with:\n\n```\nmv foo.rb \"$(shasum foo.rb)\"\n```\n\nSo then I have:\n\n```\n57e585af50fec18c1373e26aa679de8386cb0680  foo.rb\n```\n\nNow when I run this:\n\n```\nshasum -c \"57e585af50fec18c1373e26aa679de8386cb0680  foo.rb\"\n```\n\nIt doesn't return anything and stays silent, but when I run it with the `-w` flag (flags: show warnings)\n\n```\nshasum -wc \"57e585af50fec18c1373e26aa679de8386cb0680  foo.rb\"\nshasum: 57e585af50fec18c1373e26aa679de8386cb0680  foo.rb: 1: improperly formatted SHA checksum line\nshasum: 57e585af50fec18c1373e26aa679de8386cb0680  foo.rb: 2: improperly formatted SHA checksum line\nshasum: 57e585af50fec18c1373e26aa679de8386cb0680  foo.rb: 3: improperly formatted SHA checksum line\nshasum: 57e585af50fec18c1373e26aa679de8386cb0680  foo.rb: 4: improperly formatted SHA checksum line\nshasum: 57e585af50fec18c1373e26aa679de8386cb0680  foo.rb: 5: improperly formatted SHA checksum line\nshasum: 57e585af50fec18c1373e26aa679de8386cb0680  foo.rb: 6: improperly formatted SHA checksum line\nshasum: 57e585af50fec18c1373e26aa679de8386cb0680  foo.rb: 7: improperly formatted SHA checksum line\nshasum: 57e585af50fec18c1373e26aa679de8386cb0680  foo.rb: 8: improperly formatted SHA checksum line\n```\n\nAny idea what I'm doing wrong?\n\n```\n\u2192 shasum -h\nUsage: shasum [OPTION] [FILE]...\n   or: shasum [OPTION] --check [FILE]\nPrint or check SHA checksums.\nWith no FILE, or when FILE is -, read standard input.\n\n  -a, --algorithm    1 (default), 224, 256, 384, 512\n  -b, --binary       read files in binary mode (default on DOS/Windows)\n  -c, --check        check SHA sums against given list\n  -p, --portable     read files in portable mode\n                         produces same digest on Windows/Unix/Mac\n  -t, --text         read files in text mode (default)\n\nThe following two options are useful only when verifying checksums:\n  -s, --status       don't output anything, status code shows success\n  -w, --warn         warn about improperly formatted SHA checksum lines\n\n  -h, --help         display this help and exit\n  -v, --version      output version information and exit\n\nThe sums are computed as described in FIPS PUB 180-2.  When checking, the\ninput should be a former output of this program.  The default mode is to\nprint a line with checksum, a character indicating type (`*' for binary,\n`?' for portable, ` ' for text), and name for each FILE.\n```\n I think you misunderstanded me a little. You don't create file '57e585af50fec18c1373e26aa679de8386cb0680 foo.rb' but file foo.sum WITH content:\n\n``` bash\n57e585af50fec18c1373e26aa679de8386cb0680 foo.rb\n```\n\nFull example:\n\n``` bash\n# compute sum and write it to file\n$ shasum foo.rb >> foo.sum\n# check sum\n$ shasum -c foo.sum\nfoo.rb: OK\n```\n Ah, now it works. Yeah I misunderstood that part. So you basically append multiple sums to that single file in the case if backing up a backup in multiple chunks?\n Yes, exactly as you've described. It's easy to check if data is consistent.\n Have you tried to implement this? If not, maybe do you have any ideas where it should be implemented.\n I think @burns might be on to something already. It's something that we'd like to have implemented, but preferably only if it works across all storages (for consistency). We just finally pushed out 3.0.20 so we're now looking in to issue #241 and this.\n @meskyanichi I would add that, if the backup file is being stored locally first and then transferred to remote storage, it's important to generate a checksum on the local disk before uploading to the remote drive. Once it's on the remote drive, a checksum should be generated there as well to verify file integrity.\n\nThat is to say:\n- generate backup file\n- take checksum\n- upload to remote\n- take checksum\n- compare => they should be identical\n I don't know about all the remote storages you have but S3 supports passing an MD5 checksum with the PUT request to save a file: http://aws.amazon.com/articles/1904\n\n\"Amazon S3's REST PUT operation provides the ability to specify an MD5 checksum (http://en.wikipedia.org/wiki/Checksum) for the data being sent to S3. When the request arrives at S3, an MD5 checksum will be recalculated for the object data received and compared to the provided MD5 checksum. If there's a mismatch, the PUT will be failed, preventing data that was corrupted on the wire from being written into S3. At that point, you can retry the PUT.\"\n\n\"MD5 checksums are also returned in the response to REST GET requests and may be used client-side to ensure that the data returned by the GET wasn't corrupted in transit. If you need to ensure that values returned by a GET request are byte-for-byte what was stored in the service, calculate the returned value's MD5 checksum and compare it to the checksum returned along with the value by the service.\"\n  Hi,\n\nI'm working for ragnarson.com and as part of my daily task I've added support for pbzip2 compressor to your backup gem. It's basically copy/paste of bzip2 compressor with added '-p' option (for processors count). This '-p' is optional, by default pbzip2 uses all available cpus. I've also written specs everything runs smoothly, maybe I'll expand it in the future. Only things I haven't edited are gem version and README.md. It would be great if you include my code into gem, we won't have to keep separate gem version at our servers.\n\n---\n\nSzymon\n Great! ;-) I'll update wiki page within an hour.\n  Hey Guys,\n\nAdded Riak database backup support with specs. Tested this out and it works fine. \n\nLet me know if you guys have questions.\n\nThanks,\n\nJoe\n @meskyanichi added to the wiki\n riak-admin backup is currently deprecated and slow as mud.  The only \"good\" way of to backup riak is to snapshot it's file tree (ring files, bitcast data, and search index).\n    The CloudFiles adapter uploads files with the content-type `application/json`. It should upload files with the default content type `application/octet-stream` (unless you want to get tricky and figure out the right content type depending on the encryptor/compressor).\n Fog does not set a default content-type for the rackspace-storage-file model.\n\nIt sets whatever content-type you give it, [if you give it one](https://github.com/fog/fog/blob/v1.1.1/lib/fog/rackspace/models/storage/file.rb#L58).\n  To run mongo backups on heroku, i have uploaded mongodump to /bin folder of the application.\n\nI successfully receive backup to my S3 bucket, the problem is that gem crushes on cleanup step.\n\nHere is stack trace:\n2011-11-27T07:16:48+00:00 app[clock.1]: Triggering db_backup\n2011-11-27T07:16:49+00:00 app[clock.1]: [2011/11/27 07:16:49][message] Performing backup for database backup!\n2011-11-27T07:16:49+00:00 app[clock.1]: [2011/11/27 07:16:49][message] Backup::Database::MongoDB started dumping and archiving \"xxxxxxxxxx\".\n2011-11-27T07:16:50+00:00 app[clock.1]: [2011/11/27 07:16:50][message] Backup::Storage::S3 started transferring \"2011.11.27.07.16.48.db_backup.tar.gz\" to bucket \"xxxxxxx\"\n2011-11-27T07:16:50+00:00 app[clock.1]: [2011/11/27 07:16:50][message] Backup started cleaning up the temporary files.\n2011-11-27T07:16:51+00:00 heroku[clock.1]: Process exited\n Im working on Cedar. I think it is impossible on Bamboo.\n\n> Heroku just says \"Process exited\" right after the cleaning of the tmp files. \n\nNo it crushes. Here is the rest of log:\n\n2011-11-27T07:27:35+00:00 heroku[clock.1]: Process exited\n2011-11-27T07:27:36+00:00 heroku[clock.1]: State changed from up to crashed\n2011-11-27T07:38:03+00:00 heroku[clock.1]: State changed from crashed to created\n2011-11-27T07:38:03+00:00 heroku[clock.1]: State changed from created to starting\n Im spawning clock worker (https://github.com/adamwiggins/clockwork). So crush breaks the scheduling.\n\n```\nevery(6.hour, 'db_backup') do\n  if (Rails.env.production?)\n    exec \"backup perform --trigger db_backup --config_file config/backup.rb\"\n  end \nend\n```\n It's rather strange that it crushes on cleanup. that means that writable access exists since backup files was created. \n\nMay be heroku doesn't allow to delete files from temp folders?\n I've already posted question to them. I'll post results to this thread.\n This is not heroku problem. I have run foreman on my localc machine and it also crushes after the end of backup. May be you killing process from the gem.\n I removed backup job from clockwork process (it is recommended by gem) and put backup execution code to resque job. Now everything works fine.\n\nBTW: Do you know what is the better way to call console command from ruby? Using exec, sh or something else. I don't use whenever so I cannot use command you provided in your wiki.\n Great, thanks.\n  Example: \n  mongodb://user:pass@server:port/db_name\n Fix example uri\n Currently I use mongo driver parser:\n\n```\ndatabase MongoDB do |db|\n  parser = Mongo::URIParser.new(ENV['MONGOLAB_URI'])\n  db.host = parser.nodes[0][0]\n  db.port = parser.nodes[0][1]\n  if (parser.auths[0])\n    db.name = parser.auths[0][\"db_name\"]\n    db.username = parser.auths[0][\"username\"]\n    db.password = parser.auths[0][\"password\"]\n  end\n  db.ipv6               = false\n  db.additional_options = []\n  db.lock               = false\nend\n```\n ```\n  uri = URI.parse(env['uri'])\n  raise InvalidScheme.new('must be mongodb') unless uri.scheme == 'mongodb'\n  {\n    'host'     => uri.host,\n    'port'     => uri.port,\n    'database' => uri.path.gsub(/^\\//, ''),\n    'username' => uri.user,\n    'password' => uri.password,\n  }\n```\n  Move everything from `bin/backup` to `lib/backup/cli.rb`, so that `bin/backup` merely requires `backup/cli` and calls into `Backup::Cli.start`.\n\nThis would make it easier to customize/patch the behavior of backup (it's expected - it's in ruby!) without having to modify the gem's actual files - we just make a new bin script that requires `backup/cli`, makes the patches, and then calls into `Backup::Cli.start`.\n  MongoDB shell 2.0 does not support --db option.\n\n```\n$ mongo --help\nMongoDB shell version: 2.0.1\nusage: mongo [options] [db address] [file names (ending in .js)]\ndb address can be:\n  foo                   foo database on local machine\n  192.169.0.5/foo       foo database on 192.168.0.5 machine\n  192.169.0.5:9999/foo  foo database on 192.168.0.5 machine on port 9999\noptions:\n  --shell               run the shell after executing files\n  --nodb                don't connect to mongod on startup - no 'db address' \n                        arg expected\n  --norc                will not run the \".mongorc.js\" file on start up\n  --quiet               be less chatty\n  --port arg            port to connect to\n  --host arg            server to connect to\n  --eval arg            evaluate javascript\n  -u [ --username ] arg username for authentication\n  -p [ --password ] arg password for authentication\n  -h [ --help ]         show this usage information\n  --version             show version information\n  --verbose             increase verbosity\n  --ipv6                enable IPv6 support (disabled by default)\n\nfile names: a list of files to run. files have to end in .js and will exit after unless --shell is specified\n```\n\nIf there is a db (Backup::MongoDB#name), and _only if_, then it should try to connect using the command line:\n\n```\nmongo HOST:PORT/DB --other-options...\n```\n\nIf there is no db, then it should try to connect using the command line:\n\n```\nmongo HOST:PORT --other-options...\n```\n\nWhen I pass the option `--db`, I get:\n\n```\nException that got raised:\nBackup::Exception::CommandFailed - Failed to run \"echo\" on \"x86_64-linux\".\nThe status code returned was pid 4540 exit 2\nSTDOUT was:\nERROR: unknown option db\n```\n\nNote: I initially monkey-patched my copy of backup to only include the `--db` option if there is a `#name`, and to skip the `--db` option if there is no `#name`, because I wanted to try backup with `--oplog` (which doesn't support single-database mode).\n `mongodump` continues to take a `--db` parameter, so that's fine.\n\nI'm just talking about `mongo`, which is called when:\n\n```\ndatabase MongoDB do |resource|\n  resource.lock = true\nend\n```\n\nin order to perform the locking/unlocking before and after.\n Now that I'm looking at it:\n\n```\n  def lock_database\n    lock_command = <<-EOS\n      echo 'use admin\n      db.runCommand({\"fsync\" : 1, \"lock\" : 1})' | #{mongo_shell}\n    EOS\n\n    run(lock_command)\n  end\n```\n\nThis just uses the `admin` database anyway. It seems there's no reason to pass a database name in. (Unless for some reason the 1.8 version requires a `--db` parameter, but I don't have that installed.)\n yep, that was me (and @imanel ) because of this very reason. i'll find the\noriginal discussion after getting home.\n\nTomash\nsent from my htc desire\n26-11-2011 22:18 u\u017cytkownik \"Michael van Rooijen\" <\nreply@reply.github.com>\nnapisa\u0142:\n\n> We would have to ask @tomash - I think he was the one that implemented the\n> (un)lock feature because MongoDB didn't support it at that time.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/230#issuecomment-2883978\n Original discussion was in #107, and my pull request was #109.\n @yfeldblum if looks like bug in my code - obviously it should lock target database instead of admin(but it's worth to check - it was over half year ago and I don't remember if there wasn't some rationale)\n Ok - found [this](http://www.mongodb.org/display/DOCS/fsync+Command#fsyncCommand-ShellHelpers). It looks that you must run it on admin(v2.0 methods don't accept params but auto-switch to admin database) so probably we should leave this as it was.\n  In archive.rb, method \"def perform!\", maybe there should be some validation that each paths does exists. If one doesn't, it crashes saying something like this:\n\n\"Backup::Exception::CommandFailed - Failed to run \"tar\" on \"i686-linux\".\"\n\nThat is a simple suggestion.\n Is it on the master only? Not 100% sure (not @ work) but I think I did not have the STDERR details...am I wrong?\n Well, I feel stupid. Sorry for bothering you! Must be me...:s\n  The CloudFiles adapter should support a rackspace server talking to rackspace cloud files over the datacenter's internal LAN (known as ServiceNet). This LAN is significantly faster and is not billed.\n\nThe Fog key for the this, which should be passed to `Fog::Storage.new`, is `:rackspace_servicenet`. Only a value of `true` (`TrueClass`) is accepted as signifying to use ServiceNet, so the CloudFiles adapter should pass `:rackspace_servicenet => true` if the model config file says to use ServiceNet.\n [Yes](https://github.com/fog/fog/blob/v1.1.1/lib/fog/rackspace/storage.rb#L91).\n\nSo long as the server you are transferring _from_ is in the same region (datacenter) as the cloud files system you are transferring _to_. But that's just a detail that's beside the point when it comes to meskyanichi/backup.\n  The Fog storage provider would merge the S3, CloudFiles, and Ninefold providers behind a common interface. It would also automatically permit storage to any object storage service supported by Fog, of which there are many.\n\n```\nstore_with Fog do |storage|\n  storage.provider = \"rackspace\"\n  storage.directory = \"container_or_bucket_name\"\n  # etc\nend\n```\n :+1:\n  When a failure to upload a backup to CloudFiles occurs, the CloudFiles adapter [prints an error and exits immediately](https://github.com/meskyanichi/backup/blob/3.0.19/lib/backup/storage/cloudfiles.rb#L79-82).\n\nIn this case, the notifiers are not invoked.\n\nThe notifiers should be invoked on every failure, including failure to transfer to storage.\n The entire backtrace should also be logged.\n Thanks!\n  Permit strings instead of symbols, including for:\n- triggers\n- archives\n- etc\n\nIf a symbol is given, automatically convert to & store as a string.\n\nReason: easily to support names that are awkward as symbols.\n There's nothing stopping us from storing any arbitrary text as a symbol.\n\n```\n$ rvm 1.8.7 exec ruby -e 'puts \"hi bobby!\".to_sym.inspect'\n:\"hi bobby!\"\n\n$ rvm 1.9.3 exec ruby -e 'puts \"hi bobby!\".to_sym.inspect'\n:\"hi bobby!\"\n```\n\nBetter to perform validation on the trigger name, if it's really really necessary:\n\n```\nclass Backup::Model\n  def initialize(trigger, label, &block)\n    @trigger = trigger.to_s\n    raise unless @trigger =~ /^[\\w-]+$/\n    # continue on as before ...\n  end\nend\n```\n\nHowever, I would prefer not to actually enforce that, since if my trigger names come from an outside source (are not hardcoded in the config.rb file) then I don't want backup to fail just because the trigger name doesn't match the rule.\n  Hi there,\n\nI'm attaching a syncer implementation based on svnsync, with accompanying passing tests.\n\nThe implementation has also been tested in a production environment.\n\nBest regards!\n Hello @meskyanichi\n\nYou may not backup a SVN repository by copying all files from the filesystem because yoy may cause corruption on both the copy and the actual (master) repository.\n\nThe correct approach to backup a SVN repository is to create an slave repository and configure it as \"linked with the master repo\". Then you can call the command 'svn sync' on the slave and it will fetch all commits, including author, chmod and a lot of stuff from SVN.\n\nThis functionality will be helpful if you want to backup a project manager app like chiliproject or trac.\n\nThanks for this awesome gem.\nBest regards,\nFrancisco\n Interesting. I have only used SVN for a short while so I'm not too familiar with how it works. Any idea if this is also the case with Git itself? Or is it safe to just RSync a whole Git repository?\n\nAlso, looking at the code it seems that this is also intended to \"pull\" data from a production box, rather than push it to the Backup server. Am I right? And it would allow any protocol/host/port so you could sync the SVN repository from a public/protected http server, but are there any other protocols that don't go through an HTTP server that can be used?\n\nI'm thinking of how we should separate \"Pushing\" and \"Pulling\" data with for example the RSync Syncer. What should such a thing be called, and would we really need two separate classes to handle it instead of a flag within the same class, etc. (I haven't thought about backing up this way so I'll have to see what the possibilities are, and otherwise we'll have to do two separate classes like you're already doing, if the code gets too messy in a single class).\n\nI definitely like the idea of being able to pull stuff from multiple production boxes to a single backup server with a single backup installation so I'll be looking in to it now and see what can be done.\n Oh, so what I also wanted to know is whether SVNSyncer can both PULL and PUSH data? Or is this only pulling it? I prefer to keep some consistency with the gem. Either everything can pull, everything can push, or everything can do both. Otherwise people might expect certain behavior to be there and then it turns out there isn't.\n\nCheers!\n Hi there!\n\nI also worked on this pull request.\n\n\"Any idea if this is also the case with Git itself? Or is it safe to just RSync a whole Git repository?\"\n\nI believe that git, being distributed, is better prepared for backup copies than subversion. I would not use rsync to duplicate a git repo, though. I'd use git itself - a git pull or fetch, with a git clone initial git clone if needed. It is actually our plan to create another branch for git repo syncing.\n\nRegarding Pushing & Pulling:\n\nThis idea of \"pushing and pulling\" is something that you plan to do, right? Not implemented yet.\n\nIt seems to me that at least the current RSync syncer is unidirectional - push only. That's why we created InverseRsync - to be able to pull (By the way, push and pull look like much more descriptive than \"normal\" and \"inverse\")\n\nI confess I haven't tried to use svnsync to \"push\" changes to a server - only to \"pull\" from them. By looking at the documentation, it seems possible, although it doesn't seem like the most usual case. There doesn't seem to be an obvious difference between the \"source\" repo and the \"mirror\". The only requirement is that the user has write access to the mirror.\n\nHowever, our implementation is pull only - the first step is creating a local subversion repository with svnadmin, and that command is restricted to folders. If there is a way to create remote subversion repositories, we don't know about it, or could not think about it.\n\nI hope this clarifies your questions. Regards!\n Thanks for clarifying.\n\nSo generally speaking people tend to \"pull\" in the case of SVNSync. If barely anyone actually \"pushes\" to keep mirrors (usually, same like with database replication to mirror, slaves only pull), then I don't mind implementing a \"push-only\" variant.\n\nAs for the InverseRSync, I'm thinking that it might be better to name it to RSyncServer because it resides on the Backup server and not client (production box). What do you think? I'm willing to pull in both pull requests, but I'm always a bit cautious when it comes to \"what most people do\" and \"what to name things to be as descriptive, but good-looking and consistent as possible\".\n\nSo you would have:\n- RSync (Client)\n- RSyncServer (Server)\n- SVNSync (Server)\n\nBut maybe it might be better to name them like so:\n- RSyncClient\n- RSyncServer\n- SVNSyncServer\n\nSo that means we'd have to change the naming on `RSync -> RSyncClient` and `S3 -> S3Client`, which seems fine to me as long as things are consistent.\n\nThe suffix \"Server\" would indicate whether this should be run from the Server (Backup server), rather than the Client (production server).\n\nIf you have any suggestions/feedback/comments on such naming, please let me know.\n\nCheers!\n\nNote: If you get around to implementing a Git-equivalent (GitSync?) that would be great.\n Or maybe it should be split in to two different types of Syncers:\n\n``` ruby\nsync_with Client::RSync do |rsync|\nend\n\nsync_with Server::RSync do |rsync|\nend\n```\n\nSomething like that perhaps and let it's namespace determine whether it's push or pull. But this might be inconsistent with the rest of the Backup configuration file. So maybe:\n\n``` ruby\nsync_with RSyncClient do |rsync|\nend\n\nsync_with RSyncServer do |rsync|\nend\n```\n I really like this idea!\n\nI'll add the Git support and contact you again.\n\nDo you want me to split the server/client syncer?\n\nBest regards,\nFrancisco de Juan\n\nEl 02/12/2011, a las 22:26, Michael van Rooijen\nreply@reply.github.com\nescribi\u00f3:\n\n> Or maybe it should be split in to two different types of Syncers:\n> \n> ``` ruby\n> sync_with Client::RSync do |rsync|\n> end\n> \n> sync_with Server::RSync do |rsync|\n> end\n> ```\n> \n> Something like that perhaps and let it's namespace determine whether it's push or pull.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/pull/224#issuecomment-2996063\n Was thinking that maybe namespacing with modules isn't a bad idea ( `Server::RSync` ) because the whole `sync_with` section has no relation to the rest of the backup procedure. It's mainly just a wrapper around unix utilities and doesn't follow any procedure. (But it does of course support email notifications on fail and such.)\n\nWhat do you think of doing this?\n\n``` ruby\nmodule Backup\n  module Syncer\n    module Client\n      class RSync\n        ...\n      end\n    end\n  end\nend\n```\n\n``` ruby\nmodule Backup\n  module Syncer\n    module Server\n      class RSync\n        ...\n      end\n    end\n  end\nend\n```\n\n``` ruby\nmodule Backup\n  module Syncer\n    module Server\n      class SVNSync\n        ...\n      end\n    end\n  end\nend\n```\n\nNo Client for SVNSync because people are likely to use it as a Server, rather than Client in real world use cases?\n\n``` ruby\nmodule Backup\n  module Syncer\n    module Server\n      class GitSync\n        ...\n      end\n    end\n  end\nend\n```\n\nNo Client for GitSync because people are likely to use it as a Server, rather than Client in real world use cases?\n\n``` ruby\nmodule Backup\n  module Syncer\n    module S3\n      class Client\n        ...\n      end\n    end\n  end\nend\n```\n\nNo \"Server\" for S3 because you can't install Backup on S3.\n\nThe folder structure would look like this:\n\n```\n./lib/backup/syncers/client/rsync.rb\n./lib/backup/syncers/client/s3.rb\n./lib/backup/syncers/server/gitsync.rb\n./lib/backup/syncers/server/rsync.rb\n./lib/backup/syncers/server/svnsync.rb\n```\n\nAnd the DSL in the backup config file would look like this:\n\n``` ruby\nsync_with Client::RSync {}\nsync_with Client::S3 {}\nsync_with Server::GitSync {}\nsync_with Server::RSync {}\nsync_with Server::SVNSync {}\n```\n\nWhat do you think?\n I like the modules approach but there is no such dual behavior for S3, SVN or Git. How about?\n\nsync_with RSync::Client {}\nsync_with RSync::Server {}\nsync_with S3 {}\nsync_with Git {}\nsync_with SVNSync {}\n\nRegarding the names, there's always a lot of servers and it may be confusing the client/server usage.\n\nWhat do you thing about next?\n- RSync::Push => For syncing some directories from the server that executes the backup to a remote sever.\n- RSync::Pull => If you want to backup a folder from a remote server to the one that executes the backup.\n- RSync::Local => If the two folders that you want to keep synced are on the same server (instead of using a flag on RSync::Push)\n\nI would also change the name from GitSync to Git because there is no gitsync utility like svnsync\n\nFrancisco de Juan\n Thanks Francisco,\n\nYou bring up great points and I think that all that you said is the way to go. If you have time feel free to do it this way:\n\n``` ruby\nsync_with RSync::Push {}\nsync_with RSync::Pull {}\nsync_with RSync::Local {}\nsync_with S3 {}\nsync_with Git {}\nsync_with SVNSync {}\n```\n\nSo the folder structure would be like this:\n\n```\n./lib/backup/syncers/rsync/local.rb\n./lib/backup/syncers/rsync/push.rb\n./lib/backup/syncers/rsync/pull.rb\n./lib/backup/syncers/s3.rb\n./lib/backup/syncers/git.rb\n./lib/backup/syncers/svnsync.rb\n```\n\nI believe?\n If you could implement that in your two pull requests (and rebase with current develop so you're up to date and are able to merge it right in with develop) that would be great. Meanwhile I can go finish other tickets right now. Then hopefully in the next few days we can go ahead and release version 3.0.20 which includes your pull requests, and also the Git syncer if you're able to incorporate it in time.\n Perfect!\n\nNext Monday I'll include this development on my company's planning and send you an estimated date of release.\n\nThere's a lot of people using this gem and this change may break their configuration. Do we need backward compatibility? IMHO we should not, but maybe you think different.\n Nah doesn't need to be backwards compatible if it's for the better, and it is. If people want to upgrade and benefit from the great features provided by 3.0.20 they will simply have to update the configuration which takes a few seconds. Maybe more if they spread it across 10+ servers. But if they are logging in to 10 servers to update all 10 gems, then updating the config real quick can't hurt.\n\nI try to avoid backwards incompatibility but sometimes things really need to be updated for better consistency and what not. Plus, 3.0.20 will also break cycling as it currently stands since we're introducing \"chunking\" backups in to multiple archives which caused there to be an overhaul in the whole cycling process. Also, I want to get most of the DSL changes/backwards incompatibility going now before releasing Backup 3.1 at some point so by that time people are already used to the changes and we can call it a solid 3.1 release. But, before that, I would of course like to run 3.0.20 for a while (and maybe release a few gems quickly after it to patch any potential issues that might pop up) and then see how that goes for a while.\n\nSo I'd say just implement it as discussed, making it backwards incompatible. People will either have to stay on 3.0.19 or upgrade to 3.0.20 and update their config. :)\n Also: Thanks for your help!\n We took a while to do this, but I've finally been able to do something on this regard. I'll do the svnsync part next ( but probably next week)\n Hi there!\n\nI have been working on this branch again - a bit later than I anticipated ;)\n\nI updated our SVNSync branch with the latest changes from your \"develop\" branch. I had to make some changes in order to do this: replaced \"Exception::xxx\" with \"Error::xxx\" here and there, mkdir is now only available via FileUtils.\n\nWith these changes, it should be very easily to merge it into \"develop\".\n\nI also realized that we forgot to include a template for this pull request. It is included now.\n\nIt is also worth noting that this is a PULL-only backup. You can't use svnsync to sync a repo in a remote server. You have to be in the server where the backup is being stored in order to use it. We did not call it \"SVNSyncPull\" or something similar, because you can't use SVNSync in any other way. We have also included a note about this particularity in the template.\n\nLet me know if you think anything else is required. Regards!\n I don't recommend using this request any more. Instead, use this one:\n\nhttps://github.com/meskyanichi/backup/pull/276\n\nThat one backs up git and SVN, and it's better designed and tested.\n\nPlease close this pull request.\n As kikito said, this commit has been improved at https://github.com/meskyanichi/backup/pull/276\n  I.e.\n\n```\nload(config)\n```\n\nThis way, the config file can do tricky ruby tricks such as figure out its own filename with `__FILE__`.\n\nAlso, if there are any problems, the backtraces will contain the correct filenames.\n\nLooking at the source of `Backup::Finder`, i don't see any compelling reason for `#instance_eval` that would prevent using `#load` instead.\n Hmmm....\n\nPerhaps something like:\n\n```\nbackup_binding = (module ::Backup ; binding end)\neval(File.read(config), backup_binding, config, 1)\n```\n This worked for me on 1.8.7 and 1.9.3 with a very simple test case config.\n\n```\nconfig_code = File.read(config)\nbackup_binding = Backup.module_exec{binding}\neval(config_code, backup_binding, config, 1)\n```\n Of course this would be way simpler and also works on 1.8.7 and 1.9.3:\n\n```\nBackup.module_eval(File.read(config), config, 1)\n```\n +1 for changing this behavior\n-1 for the currently proposed changes.\n\nUsing any sort of eval instead of require/load causes the __FILE__ constant to not be available, which helps load other configuration files (like my database.yml).  To get around this, I implement this nasty little hack at the top:\n\n```\nconfig_path = if self.is_a? Backup::Finder\n  File.dirname(self.config)  # \nelse\n  File.dirname(__FILE__)\nend\n```\n\nThen I can load my other files, which I know the location of in relation to the backup configuration:\n\n```\nDB_CONFIG = ::YAML.load_file(File.join(config_path, 'database.yml'))\nBACKUP_CONFIG = ::YAML.load_file(File.join(config_path, 'backups.yml'))\n\nBackup::Model.new(:database, 'full database backup') do\n\n  database MySQL do |database|\n    database.host               = DB_CONFIG['host']\n    database.name               = DB_CONFIG['database']\n    database.username           = DB_CONFIG['username']\n    database.password           = DB_CONFIG['password']\n    database.additional_options = ['--single-transaction']\n  end\n\n  store_with Local do |local|\n    local.path         = BACKUP_CONFIG['mount_point']\n    local.keep         = BACKUP_CONFIG['number_to_keep'].to_i\n  end\nend\n\n```\n The change is supposed to make `__FILE__` work.\n\nSee:\n- [Kernel#eval](http://rubydoc.info/stdlib/core/1.8.7/Kernel:eval)\n- [Object#instance_eval](http://rubydoc.info/stdlib/core/1.8.7/Object:instance_eval)\n- [Kernel#module_eval](http://rubydoc.info/stdlib/core/1.8.7/Module:module_eval)\n\nTry:\n\n```\n$ irb\n> eval(\"__FILE__\", binding, \"asdf\", 1)\n> instance_eval(\"__FILE__\", \"asdf\", 1)\n> Object.module_eval(\"__FILE__\", \"asdf\", 1)\n```\n Awesome, I wasn't aware of that behavior Kernel#module_eval. \n\n+1\n  This adds a notifier for Hipchat and includes the ability to change the color of the notifications messages.\n\nI can write an example to put in the wiki, but here is one anyway:\n\n```  notify_by Hipchat do |hip|\n    hip.token = 'token'\n    hip.from = 'DB Backup'\n    hip.rooms_notified = ['activity']\n    hip.on_success = true\n    hip.on_failure = true\n    hip.success_color = 'green'\n    hip.failure_color = 'red'\n  end\n\n```\n```\n Cool !\n Thanks guys! I added this to our [integrations list](https://www.hipchat.com/help/category/integrations).\n I've updated the Wiki.\n\nThanks!\n I am on Backup 3.0.19, but could not make hipchat notifier work\n\n/var/lib/gems/1.8/gems/backup-3.0.19/lib/backup/finder.rb:76:in `load_config!': (eval):78:in`load_config!': uninitialized constant Backup::Finder::Hipchat (NameError)\n        from /var/lib/gems/1.8/gems/backup-3.0.19/lib/backup/model.rb:110:in `instance_eval'\n        from /var/lib/gems/1.8/gems/backup-3.0.19/lib/backup/model.rb:110:in`initialize'\n        from (eval):16:in `new'\n        from (eval):16:in`load_config!'\n        from /var/lib/gems/1.8/gems/backup-3.0.19/lib/backup/finder.rb:24:in `find'\n        from /var/lib/gems/1.8/gems/backup-3.0.19/bin/backup:125:in`perform'\n        from /var/lib/gems/1.8/gems/backup-3.0.19/bin/backup:109:in `each'\n        from /var/lib/gems/1.8/gems/backup-3.0.19/bin/backup:109:in`perform'\n        from /var/lib/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in `send'\n        from /var/lib/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in`run'\n        from /var/lib/gems/1.8/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n        from /var/lib/gems/1.8/gems/thor-0.14.6/lib/thor.rb:263:in`dispatch'\n        from /var/lib/gems/1.8/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n        from /var/lib/gems/1.8/gems/backup-3.0.19/bin/backup:288\n        from /var/lib/gems/1.8/bin/backup:19:in`load'\n        from /var/lib/gems/1.8/bin/backup:19\n\nDoes that mean Hipchat integration is not available on 3.0.19 yet ?\n Nope. Presumably it will be in the next release of the backup gem. I built the gem and added that to our repo for the time being.\n The gem will be released pretty soon. We are reviewing all our documentation and applying the final tweaks. Hope to get it out this week.\n Also, we're going to split the README and Wiki in to two separate branches: develop and master. This will ensure that the README and Wiki only display functionality that is available in the latest gem release, not the current HEAD.\n  Hello!\n\nI've set up my dropbox app (its access type is full dropbox, with an in \"development\" app status). I'm saving to the same account as my app developer account, so the development app status should be fine, right? I've added my credentials to the config.rb file backup needs, but when I run the command I get this:\n\n[bandega@cp39 (ruby-1.8.7) bd]$ /home/bandega/ruby/gems/gems/backup-3.0.19/bin/backup perform --trigger my_backup --config_file '/home/bandega/apps/stage/bd/lib/Backup/config.rb'\n[2011/11/17 21:00:46][message] Performing backup for My Backup!\n[2011/11/17 21:00:46][message] Backup::Database::MySQL started dumping and archiving \"bandega_production\".\n[2011/11/17 21:00:50][message] Backup started packaging everything to a single archive file.\n[2011/11/17 21:00:50][message] Backup::Compressor::Gzip started compressing the archive.\n[2011/11/17 21:00:54][message] Backup::Storage::Dropbox started transferring \"2011.11.17.21.00.45.my_backup.tar.gz\".\n[2011/11/17 21:00:54][message] Creating a new session!\n# [2011/11/17 21:00:54][message] Backup started cleaning up the temporary files.\n\nException that got raised:\n# OAuth::Unauthorized - 401 Unauthorized\n\n/home/bandega/ruby/gems/gems/oauth-0.4.5/lib/oauth/consumer.rb:219:in `token_request'\n/home/bandega/ruby/gems/gems/oauth-0.4.5/lib/oauth/consumer.rb:139:in`get_request_token'\n/home/bandega/ruby/gems/gems/dropbox-1.3.0/lib/dropbox/session.rb:70:in `initialize'\n/home/bandega/ruby/gems/gems/backup-3.0.19/lib/backup/storage/dropbox.rb:102:in`new'\n/home/bandega/ruby/gems/gems/backup-3.0.19/lib/backup/storage/dropbox.rb:102:in `create_write_and_return_new_session!'\n/home/bandega/ruby/gems/gems/backup-3.0.19/lib/backup/storage/dropbox.rb:78:in`connection'\n/home/bandega/ruby/gems/gems/backup-3.0.19/lib/backup/storage/dropbox.rb:85:in `transfer!'\n/home/bandega/ruby/gems/gems/backup-3.0.19/lib/backup/storage/dropbox.rb:51:in`perform!'\n/home/bandega/ruby/gems/gems/backup-3.0.19/lib/backup/model.rb:222:in `perform!'\n/home/bandega/ruby/gems/gems/backup-3.0.19/lib/backup/model.rb:222:in`each'\n/home/bandega/ruby/gems/gems/backup-3.0.19/lib/backup/model.rb:222:in `perform!'\n/home/bandega/ruby/gems/gems/backup-3.0.19/bin/backup:130:in`perform'\n/home/bandega/ruby/gems/gems/backup-3.0.19/bin/backup:109:in `each'\n/home/bandega/ruby/gems/gems/backup-3.0.19/bin/backup:109:in`perform'\n/home/bandega/ruby/gems/gems/thor-0.14.6/lib/thor/task.rb:22:in `send'\n/home/bandega/ruby/gems/gems/thor-0.14.6/lib/thor/task.rb:22:in`run'\n/home/bandega/ruby/gems/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/home/bandega/ruby/gems/gems/thor-0.14.6/lib/thor.rb:263:in`dispatch'\n/home/bandega/ruby/gems/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n# /home/bandega/ruby/gems/gems/backup-3.0.19/bin/backup:288\n\nYou are running Backup version \"3.0.19\" and Ruby version \"1.8.7 (patchlevel 249)\" on platform \"x86_64-linux\".\nIf you've setup a \"Notification\" in your configuration file, the above error will have been sent.\n\nThe weird thing is, it never asks me to visit a url to authorize anything, which is what your wiki was saying should happen. Any ideas what I should do? :) Thanks!\n I tried using the dropbox gem in IRB and got the same error:\n\nruby-1.8.7-p249 > require 'dropbox'\n => true\nruby-1.8.7-p249 > session = Dropbox::Session.new('hidden', 'hidden')\nOAuth::Unauthorized: 401 Unauthorized\n        from /home/bandega/ruby/gems/gems/oauth-0.4.5/lib/oauth/consumer.rb:219:in `token_request'\n        from /home/bandega/ruby/gems/gems/oauth-0.4.5/lib/oauth/consumer.rb:139:in`get_request_token'\n        from /home/bandega/ruby/gems/gems/dropbox-1.3.0/lib/dropbox/session.rb:70:in `initialize'\n        from (irb):3:in`new'\n        from (irb):3\n Thanks, I'll try the new version when it comes out. And thanks for creating such a great gem!\n Hey @meskyanichi, just wanted to confirm that I had the same problem. Thanks for your super-quick support in this thread!\n I just tried running Dropbox from Backup 3.0.19 (latest release) and I still don't have any issues. Are you using the latest Dropbox gem? (version: 1.3.0)\n\nBecause I am really not having any trouble getting myself authorized. Files also transfer without any issues.\n Hmm...Yeah, unfortunately, I'm still getting this issue with both of those versions as you mentioned.\n\nPerhaps I've added the wrong value for `path`? I have it set to `/` to try to store it in the root directory of my dropbox.  Although I can't see how that would be related to the oauth authorization.\n\nFor reference, my `gem list --local` is:\n\n```\n[root@permabox Backup]# gem list --local\n\n*** LOCAL GEMS ***\n\nbackup (3.0.19)\nbuilder (3.0.0)\nbundler (1.0.21 ruby)\ndropbox (1.3.0)\nexcon (0.7.9)\nfog (1.1.1)\nformatador (0.2.1)\ngod (0.11.0)\njson (1.6.2)\nmime-types (1.17.2)\nmulti_json (1.0.4)\nmultipart-post (1.1.4)\nnet-scp (1.0.4)\nnet-ssh (2.2.1)\nnokogiri (1.5.0)\noauth (0.4.5)\nopen4 (1.3.0)\nPlatform (0.4.0)\nPOpen4 (0.1.4)\npopen4 (0.1.2)\nrake (0.9.2)\nruby-hmac (0.4.0)\nthor (0.14.6)\n```\n Is the dropbox gem itself the problem? https://github.com/RISCfuture/dropbox/issues/45\n What about using this? https://github.com/futuresimple/dropbox-api I saw it commented on one of the RISCfuture/dropbox forks. Apparently the dropbox gem is out of date since the step to dropbox API v1\n This resolved it for me:\n\nYou can also just manually install the gem from git they talk about on [that issue page](https://github.com/RISCfuture/dropbox/issues/45):\n\n```\ngem uninstall dropbox\ngit clone git://github.com/tonywok/dropbox.git\ncd dropbox/\ngit checkout v1\ngem build dropbox.gemspec\ngem install dropbox-1.3.0.gem\n```\n\nthen perform your backups.\n Thought it might be something like that. Hope they update the gem soon to incorporate the changes.\n Agreed. Thanks for your help!\n  Hi,\n\nmight it be, that you require POpen4 in your develop-branch in a wrong way?\n\n```\nvim bin/backup\n\n# Load Thor for the CLI and POpen4 for reading unix process status\nbegin\n  require 'thor'\n  require 'POpen4'\nrescue LoadError\n  puts \"\\nBackup requires Thor to load the CLI (Command Line Interface) and POpen4 to determine the status of unix processes.\"\n  puts \"Please install both Thor and POpen4 first:\\n\\ngem install thor -v '~> 0.14.6'\\ngem install POpen4 -v '~> 0.1.4'\"\n  exit 1\nend\n```\n\nI installed the gem yesterday and found, that you need to require it lowercase.\n\n```\n gem contents POpen4\n[...]\n/home/user/.rvm/gems/ruby-1.9.2-p290@backup/gems/POpen4-0.1.4/lib/popen4.rb\n[...]\n```\n\nCheers,\nmaxmeyer\n Hi Michael,\n\nI installed POpen4 (uppercase) as well. But if you do a \n\n```\ngem content POpen4 \n```\n\nyou will see, that the lib itself is lowercase\n\n```\n gem contents POpen4\n```\n\n```\n[...]\n/home/user/.rvm/gems/ruby-1.9.2-p290@backup/gems/POpen4-0.1.4/lib/popen4.rb\n[...]\n```\n\nThat's why I think you should do\n\nrequire 'popen4'\n\nin your backup-script as a require should expand to [...] popen4>>.rb<<.\n\nCheers,\nmaxmeyer\n Actually you can require the correct gem by using the gem method from the rubygems require.\n\n```\ngem 'POpen4'\n```\n\nYou can specify a version with the second parameter a la:\n\n```\ngem 'POpen4', '~> 0.1.4'\n```\n It just sets the target lib to require instead of the default.\n\nYou will have to have a `require` still.\n\nThis means that you can do something like:\n\n```\ngem 'POpen4', '~> 0.1.4'\nrequire 'popen4'\n```\n\nIt will use the POpen4 lib even though the file to require ('popen4.rb') is lower-cased.\n Hi Michael,\n\nI just found http://weblog.rubyonrails.org/2009/9/1/gem-packaging-best-practices . You might want to consider that:\n\n```\n  # Bad\n  begin\n    gem \"rack\" \n    require \"rack\" \n  rescue Gem::LoadError\n    puts \"Could not load 'rack'\" \n    exit\n  end\n\n\n  # Good\n  begin\n    require \"rack\" \n  rescue LoadError\n    puts \"Could not load 'rack'\" \n    exit\n  end\n```\n\nCheers\nmaxmeyer\n  Hi there,\n\ncould you please look at\n\n```\nspec/archive_spec.rb\n```\n\nYou missed some backslashes at line 67 in your develop branch.\n\n--exclude='/home/rspecuser/wrongdir/' \n '/home/rspecuser/logs/'\n '/home/rspecuser/dotfiles/'\n\nBTW: I'm still wainting for authorization :-( Asked them again at the beginning of this week.\n\nCheers,\nmaxmeyer\n Hi Michael,\n\nI send you a pull-request highlighting those lines.\n\nCheers,\nmaxmeyer\n  The invoke save option for Redis backups is not working. Currently it is using the `run` command and assuming that this function returns the STDOUT of the shell command.\n\nThis is not the case so have replaced the call to `run` with a standard ruby backtick command.\n I'm still getting this error, even though when invoke_save is turneed on, and I see that SAVE was called in my redis log, I still get the following error:\n\n[2012/05/25 17:41:03][message] Database::Redis started dumping and archiving 'dump'.\n[2012/05/25 17:41:03][message] Running system utility 'redis-cli'...\n[2012/05/25 17:41:03][message] redis-cli:STDOUT: OK\n[2012/05/25 17:41:03][error] ModelError: Backup for Description for db_backup (db_backup) Failed!\n[2012/05/25 17:41:03][error]   An Error occured which has caused this Backup to abort before completion.\n[2012/05/25 17:41:03][error]   Reason: Database::Redis::CommandError\n[2012/05/25 17:41:03][error]   Could not invoke the Redis SAVE command.\n[2012/05/25 17:41:03][error]   The dump.rdb file might not contain the most recent data.\n[2012/05/25 17:41:03][error]   Please check if the server is running, the credentials (if any) are correct,\n[2012/05/25 17:41:03][error]   and the host/port/socket are correct.\n[2012/05/25 17:41:03][error]  \n[2012/05/25 17:41:03][error]   Redis CLI response:\n[2012/05/25 17:41:03][error] \n[2012/05/25 17:41:03][error] Backtrace:\n\nIt looks like redis-cli gives the correct response (\"OK\"), but that error is still being thrown. \n\nI also noticed that this pull request isn't in the latest version, could that be the issue?\n This is correct, there is a regression here. Submitting a pull request to fix it.\n  Hi, \n\nOn a project in which I use backup, I start some resque runners with 'god'. This fails because backup assumes that the HOME environment var is set, which is not the case when god is started as a daemon (here is a detailed writeup if you're interested: http://t.co/lH5dfXu9 )\n\nI have patched this and verified that the patch works. Note that I have not changed the use of ENV['HOME'] in backup/storage/local.rb because I'm unsure about what is safe to assume in that context. \n\nThanks for this great gem!\n\n/Jacob\n Yes, meaning the working directory AFAIK. I couldn't think of a more reasonable default. \n Great, thanks!\n\nOn Wed, Nov 16, 2011 at 11:02 PM, Michael van Rooijen <\nreply@reply.github.com\n\n> wrote:\n> \n> Yeah I just fixed the issue with\n> https://github.com/meskyanichi/backup/commit/dae99930ad816348aab2a807d32c710b03ba2fb8\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/pull/216#issuecomment-2768707\n Odd, I'm receiving the following now, however my HOME var is set.\n\n```\n/home/deploy/apps/dashboard/shared/bundle/ruby/1.9.1/gems/backup-3.0.19/lib/backup.rb:42:in `join': can't convert nil into String (TypeError)\n```\n Very strange. How do you invoke the Ruby process that raises the error? In other words, are you absolutely sure that HOME is set in the process that spawns the ruby interpreter? \n  Hello there,\n\nI needed to be able to use the backup gem from my backup server directly, instead of installing it on the \"backed up\" ones.\n\nThe only thing I couldn't do with the gem was rsyncing ; on its current form, it assumes that the backup gem is on the \"backed up\" server.\n\nI've created an additional Syncer called InverseRSync, that inherits from RSync, but reversing the source and destination folders.\n\nI've also created the spec for it, and it seems to be passing (they are _very_ based on the RSync one).\n\nThanks for this wonderful gem, and best regards! \n I think he do. \n\nBtw: I would love to see this in backup.gem as well. Im running backup locally with \"storage/local.rb\" storing backups encrypted (openssl). Then running rsync on the backup box to transfer them from the prod box to the backup one. But that solution lack support of sending emails. But the backup-gem has email-support included.\n\nCheers,\nMaxmeyer\n Yes! This is the main idea.\n\nI have several servers that I'd like to backup and I didn't want to install and configure the backup gem on all of them.\n\nWith this approach I have a single backup server that can take care of all my production servers.\n\nBest regards,\nFrancisco\n Thank you!! This is exactly what I need as well. In fact it really isn't clear in the docs anywhere that backup is meant to be initiated from the application server instead of a single backup server.\n\nRegarding the patch, wouldn't it make more sense to keep the code for adding directories:\n\n```\nrsync.directories do |directory|\n  directory.add '/rails_apps/drugbank/shared/system'\nend\n```\n\nAnd backup each of those directories as remote directories (overriding the `perform!`) instead of adding the `remote_path` option?\n\nIf you agree I can put together a patch.\n\nRegards,\nCraig\n Hi cknoxrun,\n\nI've started working today on a new version of this pull request that separates the rsync syncer into three concerns: pull, push and local (for syncs in the same computer), as suggested by meskyanichi in #224 .\n\nI liked your suggestion of using the already existing `directories` instead of adding `remote_path`. Could you please explain how the new `perform!` method would look? I'm not sure about how to use `directories` inside it. A simple comment with the relevant line is ok, I don't need a pull request or anything like that.\n\nThanks!\n\nEDIT: I coded some stuff here: https://github.com/splendeo/backup/blob/push_pull/lib/backup/syncer/rsync/pull.rb#L16\n\nIs this, more or less, what you wanted to do?\n Hi kikito,\n\nSorry for the late reply! I was away for the last 3 weeks. This looks like a great solution, thanks so much!\n\nCraig\n  I use the SCP storage option and recently changed the password on the remote machine.\nI changed the password in the backup configuration file, but started getting failure notifications.\nIt turned out the error was with Storage::Base#cycle! attempting to remove the older backup.\nThe storage objects loaded from the YAML file had the old settings and were not being updated,\nwhich was causing an SSH::Authentication failure.\n\nThe quick solution was simply to update the data file manually.\nHowever, I did spend some time today looking into this and came up \nwith a draft proposal for a solution that would solve this.\nburns@aa3653567148c69930c2b288f9cd4144f679c053\n OK. Just wanted to make you aware of the issue, since changing the credentials for the storage connection would be a common task. And, since the error only stated there was an SSH::Authentication Error, it took some time to figure out what was happening. Not sure how changes to the actual transfer of the files would affect the code determining what files need transferring/removing and the credentials to be used for those actions. The commit I referenced **was** my summary.\n Your statements sound correct.\nAs for updating `@path`, I would agree that it would be expected that the older archives would be moved to the new location as well. If not, the user would simply get a warning that the cycling operation could not remove the old file - correct? Also, it could be the old `@path` may not even be valid with the new credentials, and possibly cause some other errors... so, I would say update `@path` for all the older backups in the YAML file - and if they don't exist, let the user receive the warning.\nI've rebased that commit so it would apply cleanly. burns@1b18ce137a862f61c3566745fad34ee3374f4af6\nYou may want to check it out and test it - maybe even cherry-pick it :)\n Yeah, `#each` will do :) lol\nI've also thought that, since the config/credentials are being reloaded now, it's not really necessary to store anything other than the `#filename`. Meaning, you could clear out the others as well - perhaps at minimum the password. I think this would require each storage object type to have it's own cleanup method to do this though. I haven't spent a lot of time thinking about this, but it did cross my mind while I was in there :)\n\nWas just looking at #208 too... will let you know if I come up with any ideas.\n In that case, I would consider doing something to at least clear the password from this persisted data.\n\n``` diff\ndiff --git a/lib/backup/storage/object.rb b/lib/backup/storage/object.rb\nindex de117f1..292658e 100644\n--- a/lib/backup/storage/object.rb\n+++ b/lib/backup/storage/object.rb\n@@ -35,6 +36,7 @@ module Backup\n       # Takes the provided objects and converts it to YAML format.\n       # The YAML data gets written to the storage file\n       def write(objects)\n+        objects.each {|obj| obj.clean_persisted_data }\n         File.open(storage_file, 'w') do |file|\n           file.write(objects.to_yaml)\n         end\n\n# then, in each storage...\ndiff --git a/lib/backup/storage/sftp.rb b/lib/backup/storage/sftp.rb\nindex d7a2bb7..f2b60a9 100644\n--- a/lib/backup/storage/sftp.rb\n+++ b/lib/backup/storage/sftp.rb\n@@ -34,6 +34,10 @@ module Backup\n         cycle!\n       end\n\n+      def clean_persisted_data\n+        @password = nil\n+      end\n+\n     private\n\n       ##\n```\n Fixed.\n\n> 62eb2fdddc18bbf07cbe5756e13ab88777b4b53a\n> update storage objects in YAML file when cycling (draft proposal) \n> - use #initialize in Storage::Base and remove from subclasses\n> - use #configure_block accessor to temporarily store the optional\n>   configuration block passed to construct new objects\n> - use a #configure! method in Storage::Base to be shared by\n>   #initialize and #cycle! to update storage objects\n> - use #pre_configure/#post_configure methods in Storage::Base\n>   to set configuration defaults before evaluating the optional\n>   configuration block, then afterwards to adjust\n> - use #pre_configure/#post_configure within each storage subclass\n>   to perform specific changes for each storage type, calling super()\n>   first for shared changes from Storage::Base\n> - remove option hash from Configuration::Helpers#load_defaults!\n> \n> 627d806e4472c8a50a8816fc52f697cd26d6aad6\n> only store attributes needed for cycling \n  Heroku, when i use this gem, rased this exception:\n\n```\nException that got raised:\nBackup::Exception::CommandFailed - Failed to run \"mongodump\" on \"x86_64-linux\".\nThe status code returned was pid 10 exit 127  \nSTDOUT was: \nSTDERR was:\nsh: mongodump: not found\n```\n\nCan I use this gem with heroku?\n meskyanichi you are wrong. it is possible.\n\nTo run mongo backups on heroku, i have uploaded mongodump to /bin folder of the application that solves the problem.\n perhaps you should add this info to wiki, i think many other guys will find it useful. mongodump binary could be downloaded from mongodb website. http://www.mongodb.org/downloads. For Heroku x64 Linux binaries should be used.\n @lexer were you able to get the command to work on Heroku? I uploaded to /bin and get a correct response for:\n\nsystem \"which mongodump\"\n\nBut any attempt to use it with our MongoHQ instance doesn't do anything...\n Yes I have included mongodump to my repo and pushed it to heroku. Im using Mongolab and it works fine. I don't think that mongohq is the problem\n With the command, what output directory do you use for Heroku?\n I don't configure anything. Just use gem default settings.\n It stop working after recent updates. I get following error:\n\n2011-12-08T02:14:29+00:00 app[worker.1]: [2011/12/08 02:14:29][message] Performing backup for database backup!\n2011-12-08T02:14:29+00:00 app[worker.1]: [2011/12/08 02:14:29][message] Backup::Database::MongoDB started dumping and archiving \"myapp-production\".\n2011-12-08T02:14:30+00:00 app[worker.1]: [2011/12/08 02:14:30][message] Backup started packaging everything to a single archive file.\n2011-12-08T02:14:30+00:00 app[worker.1]: [2011/12/08 02:14:30][message] Backup::Compressor::Gzip started compressing the archive.\n2011-12-08T02:14:33+00:00 app[worker.1]: [2011/12/08 02:14:31][message] Backup::Storage::S3 started transferring \"2011.12.08.02.14.23.db_backup.tar.gz\" to bucket \"my_app\"\n2011-12-08T02:14:33+00:00 app[worker.1]: [2011/12/08 02:14:33][message] Backup started cleaning up the temporary files.\n2012-02-14T07:04:41+00:00 app[worker.1]: [2012/02/14 07:04:41][error] CLIError: CLI::UtilityNotFoundError: Path to 'mongo' could not be found.\n2012-02-14T07:04:41+00:00 app[worker.1]: [2012/02/14 07:04:41][error]   Make sure the specified utility is installed\n2012-02-14T07:04:41+00:00 app[worker.1]: [2012/02/14 07:04:41][error]   and available in your system's $PATH.\n2012-02-14T07:04:41+00:00 app[worker.1]: [2012/02/14 07:04:41][error]   If this is a database utility, you may need to specify the full path\n2012-02-14T07:04:41+00:00 app[worker.1]: [2012/02/14 07:04:41][error]   using the Database's '<utility_name>_utility' configuration setting.\n We changed the `utility_path` since it was causing issues when using multiple ones in a single database.\n\nYou need to set the path to your mongodump utility with:\n\n``` ruby\ndatabase MongoDB do |db|\n  # ...\n  db.mongodump_utility = '/opt/local/bin/mongodump'\n  db.mongo_utility     = '/opt/local/bin/mongo' # and this if you need to use the mongo utility for locking the db\nend\n```\n\nBut of course, point them at the location you have them stored on Heroku. That should fix it.\n I've add mongo binary to heroku and it start working. Do I need both dump and mongo binaries?\n Are you saying you are using just the mongo utility, and not the mongodump utility? I'd think it's the other way around. As ar as I know you need `mongodump` to dump the database from MongoHQ, and if you want to \"lock\" the database before dumping (which is an option you can set in the `database MongoDB`) then you also need the `mongo` utility.\n Before patch I have only mongodump binary. Now I have put both mongodump and mongo to make it work.\n\nBTW: I have lock option set to false. But it still requires mongo binary to finish the job.\n  Is it passable using uri in Backup:Model for MongoDB?\n\nLike this:\n\n```\nrequire 'yaml'\ndatabase_yml = File.expand_path('../config/mongoid.yml',  __FILE__)\nRAILS_ENV    = ENV['RAILS_ENV'] || 'development'\nconfig = YAML.load_file(database_yml)\n\nBackup::Model.new(:db_backup, 'database backup') do\n  database MongoDB do |db|\n  db.uri                = config[RAILS_ENV][\"uri\"]\n  db.only_collections   = ['collection1', 'collection2' 'collection3','collection4']\n  db.additional_options = []\n  db.lock               = false\nend\n\nstore_with Dropbox do |db|\n   db.email      = 'foo@email'\n   db.password   = 'password'\n   db.api_key    = 'api key'\n   db.api_secret = 'secret'\n   db.timeout    = 300\n   db.path       = '/myapp'\n   db.keep       = 25\nend\n\n compress_with Gzip do |compression|\n   compression.best = true\n   compression.fast = false\n end\nend\n```\n\nmongoid.yml\n\n```\nproduction:\n  uri: <%= ENV['MONGOLAB_URI'] %>\n```\n  Hi,\n\nMaybe I missed something but isn't it possible to use SSH-backed storages without password, using public key authentication instead ?\n\nThanks.\n Thanks, that's right.\n  ```\n$ gem list | grep\nfogfog (1.0.0)\n$ backup perform --trigger general_backup\n[2011/11/04 10:16:35][error] Dependency missing.\n\nDependency required for:\n\n  Amazon S3, Rackspace Cloud Files (S3, CloudFiles Storages)\n\nTo install the gem, issue the following command:\n\n  gem install fog -v '>= 0.11.0'\n\nPlease try again after installing the missing dependency.\n```\n\nWhat's wrong? I use REE with gemsets.\n My ruby gems version is latest: 1.8.11\n ruby 1.8.7 (2011-02-18 patchlevel 334) [x86_64-linux], MBARI 0x6770, Ruby Enterprise Edition 2011.03\n Yep, I use RVM and bundler.\n What OS? \n Ubuntu server 10.04\n I have the same issue, cant perform backup because of missing fog dependency. I'm on debian 6 32bit, ruby 1.9.3 rubygems 1.8.15 with no bundler and gem dependency tools.\n I'm on a different x86_64 distribution, but it seemed installing ruby-devel package was the solution for me.\n @0x570x690x6c0x6c there is no ruby-devel package for Ubuntu.\n Like I said, I'm using a different distribution that's RHEL-esq. For Ubuntu, it might be ruby-dev: http://packages.ubuntu.com/search?keywords=ruby-dev \n\nYou may also want to consider looking here: http://nokogiri.org/tutorials/installing_nokogiri.html \n\nUbuntu doesn\u2019t come with the Ruby development packages that are required for building gems with C extensions. Here are the commands to install everything you might need:\n\n# ruby developer packages\n\nsudo apt-get install ruby1.8-dev ruby1.8 ri1.8 rdoc1.8 irb1.8\nsudo apt-get install libreadline-ruby1.8 libruby1.8 libopenssl-ruby\n\n# nokogiri requirements\n\nsudo apt-get install libxslt-dev libxml2-dev\nsudo gem install nokogiri\n I have RVM, so it's not possible to use use ruby1.8 from Ubuntu packages\n  Hi,\nMy config looks like:\n\n``` ruby\nBackup::Model.new(:\"#{label}\", \"Backup for #{label}\") do\n  database PostgreSQL do |database|\n    database.name               = name\n    database.host                  = host\n    database.username           = user\n    database.password           = password\n    database.additional_options = ['--clean', '--no-acl', '--no-owner']\n  end\n\n  compress_with Gzip do |compression|\n    compression.best = true\n  end\n\n  store_with SFTP do |server|\n    server.username = \"user\"\n    server.ip       = \"serwer.one\"\n    server.port     = 22\n    server.path     = \"/backup/databases\"\n    server.keep     = 30\n  end\n  store_with SFTP do |server|\n    server.username = \"user\"\n    server.ip       = \"server.two\"\n    server.port     = 22\n    server.path     = \"/backup/databases\"\n    server.keep     = 30\n  end\n\n```\n\nThe problem is that it will keep 15 backups on each server. I can solve this by setting `server.keep = 60` but that's not the point.\nI think it should keep the amount of backups I set for specific server.\nI'm using 3.0.18 version.\n The simplest thing may be to allow the user to define an optional identifier.\nHere's an **untested** example:\n\n``` diff\ndiff --git a/lib/backup/storage/base.rb b/lib/backup/storage/base.rb\nindex db86b9d..d84d94f 100644\n--- a/lib/backup/storage/base.rb\n+++ b/lib/backup/storage/base.rb\n@@ -27,6 +27,10 @@ module Backup\n       attr_accessor :chunk_suffixes\n\n       ##\n+      # optional user-defined identifier for this storage\n+      attr_accessor :storage_id\n+\n+      ##\n       # Super method for the child classes' perform! method. \"super\" should\n       # always be invoked from the child classes' perform! method to ensure that the\n       # @chunk_suffixes array gets set to the storage object, which will be used to transfer all the\n@@ -140,7 +144,7 @@ module Backup\n       def cycle!\n         return unless keep.to_i > 0\n         type           = self.class.name.split(\"::\").last\n-        storage_object = Backup::Storage::Object.new(type)\n+        storage_object = Backup::Storage::Object.new(type, storage_id)\n         objects        = storage_object.load\n         objects.map! do |obj|\n           obj.instance_exec(@configure_block) do |block|\ndiff --git a/lib/backup/storage/object.rb b/lib/backup/storage/object.rb\nindex de117f1..cd9ae58 100644\n--- a/lib/backup/storage/object.rb\n+++ b/lib/backup/storage/object.rb\n@@ -11,8 +11,9 @@ module Backup\n       ##\n       # Instantiates a new Backup::Storage::Object and stores the\n       # full path to the storage file (yaml) in the @storage_file attribute\n-      def initialize(type)\n-        @storage_file = File.join(DATA_PATH, TRIGGER, \"#{type}.yml\")\n+      def initialize(type, storage_id)\n+        filename = storage_id ? \"#{type}-#{storage_id}.yml\" : \"#{type}.yml\"\n+        @storage_file = File.join(DATA_PATH, TRIGGER, filename)\n       end\n\n       ##\n```\n\n**ETA:** Basing an identifier on other configuration parameters would cause a new YAML file to be used if any settings changed, which you wouldn't want - particularly given the updates from #214 allowing cycling to adapt to changes of credentials or location.\nYou could automatically assign something based on it's array position when loaded, but this would be governed by the position of the call within the config file, which the user may not be aware of - and would require a bit more changes in the code.\n Fixed in 13a31f11b5249e840cee47d2413eb08ae4963849 & 2142ff711b59c10da7440ba3cbae41096ba638eb\n\n> use optional `storage_id` to suffix YAML filename\n> \n> Lets user uniquely identify storage configurations.\n> This allows multiple storages of the same type to be configured,\n> while keeping the cycling data seperate.\n The DSL has been updated for this. \n89a684d3ba0e4c25199caafb9b511a373e7b94c8 optional storage_id parameter for store_with block\n\nSo, from your example, you can now use:\n\n``` rb\n  store_with SFTP, 'Server #1' do |server|\n    server.username = \"user\"\n    server.ip       = \"server.one\"\n    server.port     = 22\n    server.path     = \"/backup/databases\"\n    server.keep     = 30\n  end\n  store_with SFTP, 'Server #2' do |server|\n    server.username = \"user\"\n    server.ip       = \"server.two\"\n    server.port     = 22\n    server.path     = \"/backup/databases\"\n    server.keep     = 30\n  end\n```\n  The rsync prcocess was stalling after 70-91MB being transferred from a Mac client to a Linux server. Manually issuing the rsync command between these two machines worked without a hitch.\n\nNoticed that Backup was using the partial flag in ps. Removing the P flag in syncer/rsync.rb allowed the sync to complete.\n\n```\nrun(\"#{ utility(:rsync) } -vh #{ options } #{ directories } '#{ username }@#{ ip }:#{ path }'\")\n```\n\nBackup 3.0.19\n  This feature does not work, to replicate, see the following.\n\nWith this config:\n\n``` ruby\n$mysql_config = {\n  :username => 'bla',\n  :password => 'bla',\n  :host => 'bla'\n}\nBackup::Configuration::Database::MySQL.defaults do |db|\n  db.username           = $mysql_config[:username]\n  db.password           = $mysql_config[:password]\n  db.host               = $mysql_config[:host]\n#   db.additional_options = ['--quick', '--single-transaction']\nend\nBackup::Model.new(\"mysql_a\".to_sym, \"Backup for db a\") do\n  database MySQL do |db|\n    db.name               = 'a'\n  end\n  store_with SCP do |server|\n  end\nend\nBackup::Model.new(\"mysql_b\".to_sym, \"Backup for db a\") do\n  database MySQL do |db|\n    db.name               = 'b'\n  end\n  store_with SCP do |server|\n  end\nend\n```\n\nand this command:\n\n```\nbackup perform --triggers=mysql_* -c config.rb\n```\n\nYou get:\n\n```\nuninitialized constant Backup::Database::Base::TRIGGER (NameError)\n```\n\nAt:\n\n```\nlib/backup/database/base.rb:21:in `prepare!': \n```\n\nThis feature was built in reference to:\n\nhttps://github.com/meskyanichi/backup/pull/137\nhttps://github.com/meskyanichi/backup/issues/136\n\nI also confirmed the issue manifests agains the current head (5e848a873e9bfabbd8195c1fb53311bb9075c822)\n calling #prepare! after database config initialization feels really wrong\n\ni would suggest to move all #prepare! calls before or inside #perform!\n Great work. Thanks.\n Indeed--thanks for the crazy-fast turn-around!\n\nGiven that this functionality is not released as a gem yet, do you recommend I simply submodule the devel branch \"backup\" repo into my project thats using the gem (and reference it via :path in a Gemfile)? \n  Hi, it's me again. I ran in a issue with old backup files. \n\nAny idea how / where to implement a warning which the script shows if there are any unknown objects within the storage directory: files which are not listed in the Local.yml.\n\nFirst shot\n\nhttps://github.com/meskyanichi/backup/blob/develop/lib/backup/storage/local.rb\n\n``` ruby\n##                            \n# Performs the backup transfer\ndef perform!\n  transfer!\n  unknown_files_in_storage_dir?\n  cycle!\nend\n```\n\nhttps://github.com/meskyanichi/backup/blob/develop/lib/backup/storage/base.rb\n\n``` ruby\n      def unknown_files_in_storage_dir?\n        type = self.class.name.split(\"::\").last\n        #maybe load it only once -> cycle!\n        storage_object = Backup::Storage::Object.new(type)\n        objects = storage_object.load\n\n        [...] get and show differences between objects in yaml-file and storage dir [...]\n      end\n```\n Unfortunately not, I use the Storage::Local-part of your gem a lot. Today I've no use case for the remote storages, so I don't know what has to be done to implement it with that services.\n  Hi there,\n\nwhat about changing\n\n``` ruby\n\n @path = path.sub(/^\\~\\//, \"#{ENV['HOME']}/\")\n```\n\nto \n\n``` ruby\n\n @path = File.expand_path(path)\n```\n\n at https://github.com/meskyanichi/backup/blob/develop/lib/backup/storage/local.rb#L73 ?\n\nAnd \n\n``` ruby\n    ##\n    # Adds new paths to the @paths instance variable array\n    def add(path)\n      @paths << path\n    end\n\n    ##\n    # Adds new paths to the @excludes instance variable array\n    def exclude(path)\n      @excludes << path\n    end\n```\n\n``` ruby\n    ##\n    # Adds new paths to the @paths instance variable array\n    def add(path)\n      @paths << File.expand_path(path)\n    end\n\n    ##\n    # Adds new paths to the @excludes instance variable array\n    def exclude(path)\n      @excludes << File.expand_path(path)\n    end\n```\n\nat https://github.com/meskyanichi/backup/blob/develop/lib/backup/archive.rb#L36 . I'm not quite sure what to do with relative paths in the configuration file. \n\n/deg\n  ``` ruby\n[2011/10/21 12:34:44][message] Performing backup for ausfahrt6.de backup!\n[2011/10/21 12:34:44][message] Backup::Database::MySQL started dumping and archiving \"ausfahrt6_development\".\n\n[2011/10/21 12:34:44][message] Backup::Archive started packaging and archiving \"/usr/local/rails/sharedfiles/ausfahrt6/shared\".\n[2011/10/21 12:34:44][message] Backup started cleaning up the temporary files.\n===========================================================================\nException that got raised:\nBackup::Exception::CommandFailed - Failed to run \"tar\" on \"x86_64-linux\".\nThe status code returned was pid 15858 exit 2\nSTDOUT was:\nSTDERR was:\n\n===========================================================================\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/cli.rb:100:in `raise_if_command_failed!'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/cli.rb:34:in `run'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/archive.rb:52:in `perform!'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/model.rb:218:in `block in perform!'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/model.rb:218:in `each'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/model.rb:218:in `perform!'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:130:in `block in perform'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:109:in `each'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:109:in `perform'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:288:in `<top (required)>'\n/usr/local/ruby/bin/backup:19:in `load'\n/usr/local/ruby/bin/backup:19:in `<main>'\n===========================================================================\n\nYou are running Backup version \"3.0.19\" and Ruby version \"1.9.2 (patchlevel 0)\" on platform \"x86_64-linux\".\nIf you've setup a \"Notification\" in your configuration file, the above error will have been sent\n```\n see https://github.com/meskyanichi/backup/issues/194 . should be helpful to find the reason for your problem.\n Please see below: Are you sure the files/directories you would like to backup exist? BTW: I edited the sources to get the stderr output (Please see comment above)\n\n```\nBackup::Exception::CommandFailed - Failed to run \"tar\" on \"i686-linux\".\nThe status code returned was pid 4360 exit 2\nSTDOUT was:\nSTDERR was:\n/bin/tar: ~/tmp/backup-test: Cannot stat: No such file or directory\n/bin/tar: Exiting with failure status due to previous errors\n```\n I think it's this line which cause that confusion:\n\n``` ruby\nrun(\"#{ utility(:tar) } -c -f '#{ File.join(archive_path, \"#{name}.tar\") }' #{ paths_to_exclude } #{ paths_to_package } 2> /dev/null\")\n```\n\nI suppose you should leave out \n\n``` ruby\n2> /dev/null \n```\n\nin\n\nhttps://github.com/meskyanichi/backup/blob/develop/spec/archive_spec.rb\nhttps://github.com/meskyanichi/backup/blob/5e848a873e9bfabbd8195c1fb53311bb9075c822/lib/backup/archive.rb\n\nand everything should be fine. Maybe you missed when changing output handling to popen4.\n\nSorry for not posting a pull request for that. It's in the queue, but I prepared it for a project at work and I'm still waiting for the authorization of the legal department.\n I'm using a patched version which doesn't cause any noise. It works quite good with the removed stderr redirection (tar). :)\n When do you plan to release a new version that includes this commit?\n Within a few days hopefully. Just getting the last few commits and pull requests in and it should be ready.\n Ok, great!\n If you need to run current changes before the next release, you can do this by adding `backup` as a git submodule to your project.\nYou can also do this using [Bundler](http://gembundler.com/man/gemfile.5.html)\nIn your Gemfile, you can use:\n\n``` ruby\ngem 'backup', :git => 'git://github.com/meskyanichi/backup.git', :branch => 'develop'\n```\n\nYou can then run `bundle update backup` whenever you want to pull more changes.\nOr, you can specify the actual commit:\n\n``` ruby\ngem 'backup', :git => 'git://github.com/meskyanichi/backup.git', :ref => '6a16d85aca'\n```\n I tried to use the develop branch like that but ran into some other issues.\nI don't know if they had to do with my app, though, so I'll rather wait until a new version is out and try it then. :)\n Tried checking out the develop branch but its not working for me... \n\n```\n[2012/01/17 14:47:05][error] CLIError: NameError: uninitialized constant Backup::CONFIG_FILE\n```\n\nAny idea when this issue is going to be actually fixed? \n That looks like a different error than the one described in the initial post. Did you try installing the latest gem?\n I tried 3.0.20, is there another one I should be trying?\n\n-John\n\nOn Tue, Jan 17, 2012 at 9:58 AM, Michael van Rooijen <\nreply@reply.github.com\n\n> wrote:\n> \n> That looks like a different error than the one described in the initial\n> post. Did you try installing the latest gem?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/203#issuecomment-3528968\n Hey @johntdyer \nIf you want to checkout the 'develop' branch, you just need to update your `config.rb` file by changing the reference to `Backup::CONFIG_FILE` to `Config.config_file`, like so:\n\n```\n##\n# Load all models from the models directory (after the above global configuration blocks)\n# Dir[File.join(File.dirname(Backup::CONFIG_FILE), \"models\", \"*.rb\")].each do |model|\nDir[File.join(File.dirname(Config.config_file), \"models\", \"*.rb\")].each do |model|\n  instance_eval(File.read(model))\nend\n```\n Seems to be fixed in 3.0.21, thanks!\n\nOn Tue, Jan 17, 2012 at 12:53 PM, burns <\nreply@reply.github.com\n\n> wrote:\n> \n> Hey @johntdyer\n> If you want to checkout the 'develop' branch, you just need to update your\n> `config.rb` file by changing the reference to `Backup::CONFIG_FILE` to\n> `Config.config_file`, like so:\n> \n> ```\n> ##\n> # Load all models from the models directory (after the above global\n> configuration blocks)\n> # Dir[File.join(File.dirname(Backup::CONFIG_FILE), \"models\", \"*.rb\")].each\n> do |model|\n> Dir[File.join(File.dirname(Config.config_file), \"models\", \"*.rb\")].each do\n> |model|\n>  instance_eval(File.read(model))\n> end\n> ```\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/203#issuecomment-3532290\n  hi\n\nplease find a new notifier for backup attached to this pull request.\nusing the prowler gem, the notifier sends its messages to an iOS push notification gateway (http://www.prowlapp.com/)\n\nhope you like it :)\n\ncheers,\nmanu\n of course. just added :-)\n  This could solve mail gem dependency version issue\n  When giving mail as a dependency in Gemfile like below, \n\ngem \"backup\"\ngem \"fog\", \"1.0.0\"\ngem \"mail\", '~> 2.3.0'\n\nI get this error while installing/updating the gems.\n\nBundler could not find compatible versions for gem \"mail\":\n  In Gemfile:\n    rails (= 3.0.5) depends on\n      mail (~> 2.2.15)\n\n```\nmail (2.3.0)\n```\n\nI saw this dependency in lib/backup/dependency.rb file. One of your previous commits use 2.2.15 though. Is there any way I can solve this and move forward in installing the gem...?? \n same same\n\n``` ruby\nBundler could not find compatible versions for gem \"mail\":\n  In Gemfile:\n    rails depends on\n      mail (~> 2.2.19)\n\n    mail (2.3.0)\n\n```\n  Fixes the second issue reported in https://github.com/meskyanichi/backup/issues/198\n  I'm getting this error after upgrading to Rails 3.1 (which does not necessarily mean that's the cause, lots of Gems were updated and other changes):\n\n```\n===========================================================================\nException that got raised:\nNoMethodError - undefined method `write' for #<Syck::Emitter:0x0000001531c508> \n===========================================================================\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/emitter.rb:17:in `end_document'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/emitter.rb:17:in `visit_Psych_Nodes_Document'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/visitor.rb:10:in `accept'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/emitter.rb:10:in `block in visit_Psych_Nodes_Stream'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/emitter.rb:10:in `each'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/emitter.rb:10:in `visit_Psych_Nodes_Stream'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/visitor.rb:11:in `accept'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/nodes/node.rb:36:in `to_yaml'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych.rb:166:in `dump'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/core_ext.rb:13:in `psych_to_yaml'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck/rubytypes.rb:114:in `node_export'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck/rubytypes.rb:114:in `add'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck/rubytypes.rb:114:in `block (3 levels) in to_yaml'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck/rubytypes.rb:113:in `each'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck/rubytypes.rb:113:in `block (2 levels) in to_yaml'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck/rubytypes.rb:112:in `seq'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck/rubytypes.rb:112:in `block in to_yaml'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck.rb:401:in `call'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck.rb:401:in `emit'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck.rb:401:in `quick_emit'\n/home/rails/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/syck/rubytypes.rb:111:in `to_yaml'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/lib/backup/storage/object.rb:39:in `block in write'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/lib/backup/storage/object.rb:38:in `open'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/lib/backup/storage/object.rb:38:in `write'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/lib/backup/storage/base.rb:62:in `cycle!'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/lib/backup/storage/s3.rb:56:in `perform!'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/lib/backup/model.rb:222:in `block in perform!'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/lib/backup/model.rb:222:in `each'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/lib/backup/model.rb:222:in `perform!'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/bin/backup:130:in `block in perform'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/bin/backup:109:in `each'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/bin/backup:109:in `perform'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/gems/backup-3.0.18/bin/backup:288:in `<top (required)>'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/bin/backup:19:in `load'\n/home/rails/.rvm/gems/ruby-1.9.2-p290@rails-3.1/bin/backup:19:in `<main>'\n===========================================================================\n```\n This error happens after these lines:\n\n```\n[2011/10/14 22:20:50][message] Backup started cleaning up the temporary files.\n[2011/10/14 22:20:50][message] Backup::Notifier::Mail started notifying about the process.\n```\n If I execute the `backup` command via `bundle exec` I get a different error:\n\n```\n\n[2011/10/14 22:31:31][message] Backup started cleaning up the temporary files.\n[2011/10/14 22:31:31][message] Backup::Notifier::Mail started notifying about the process.\n===========================================================================\nException that got raised:\nNoMethodError - undefined method `sort' for false:FalseClass \n===========================================================================\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/lib/backup/storage/object.rb:28:in `load'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/lib/backup/storage/base.rb:53:in `cycle!'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/lib/backup/storage/s3.rb:56:in `perform!'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/lib/backup/model.rb:222:in `block in perform!'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/lib/backup/model.rb:222:in `each'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/lib/backup/model.rb:222:in `perform!'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/bin/backup:130:in `block in perform'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/bin/backup:109:in `each'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/bin/backup:109:in `perform'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/gems/backup-3.0.18/bin/backup:288:in `<top (required)>'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/bin/backup:19:in `load'\n/home/rails/apps/myapp/shared/bundle/ruby/1.9.1/bin/backup:19:in `<main>'\n===========================================================================\n```\n so it seems to be caused by either syck or psych, or both. i'll investigate in the upcoming week.\n Yes, for the first error the accepted solution seems to be to `require psych` early on so it takes precedence over Syck.\n I fixed the last error. The issue was that there was a empty S3.yml in my data folder, for whatever reason. That is why, in `object.rb`, it recognized that the file existed but returned `false` as the content.\n  I can't get the archive directory method to work\n\nIf I use\n```  archive :logs do |archive|\n    archive.add     \"#{APP_CONFIG['app_root']}/log/\"\n  end\n\n``````\nall I get is a file called log containing the text \"/home/.../log\"\n\nIf I use\n```  archive :logs do |archive|\n    archive.add     \"#{APP_CONFIG['app_root']}/log/newrelic_agent.log\"\n    archive.add     \"#{APP_CONFIG['app_root']}/log/\"\n  end\n``````\n\nI also get the correct newrelic_agent.log file, as  expected.\n\nHow do I make it archive an entire directory ?\n Maybe it's helpful to add a \"puts command\" in https://github.com/meskyanichi/backup/blob/develop/lib/backup/cli.rb to find out what's going on.\n\ndef run(command)\n puts command\n[...]\nend\n\nAnother way to find out something would be the use of pry (see https://github.com/pry/pry for documentation).\n\ngem install pry\n\n---- https://github.com/meskyanichi/backup/blob/develop/lib/backup/cli.rb \nrequire 'pry'\n\ndef run(command)\n  binding.pry\n[...]\nend\n  Is it possible to run a backup within a rails using a method call, rather than a system call ?\n  When I set db.lock = true for postgresql I get :\n\n`/home/zzz/ruby/1.8/gems/backup-3.0.18/lib/backup/finder.rb:76:in `load_config!': undefined method `lock=' for #<Backup::Database::PostgreSQL:0xb706509c> (NoMethodError)\n        from /home/zzz/ruby/1.8/gems/backup-3.0.18/lib/backup/database/postgresql.rb:42:in `instance_eval'`\n\nIs lock not supported for postgresql ?\n  I'm getting the following error during backup :\n\n`Exception that got raised:\nBackup::Exception::CommandFailed - Failed to run \"tar\" on \"i686-linux\".\nThe status code returned was 512\nSTDOUT was:\nSTDERR was:`\n\nThe database backup stage prior to this seems to work. What could be causing this ?\n I found what the problem was - I had a bad path in an archive.add.\n\nI found this out by modifying this line in archive.rb to remove the write to dev/null :\n\n`run(\"#{ utility(:tar) } -c -f '#{ File.join(archive_path, \"#{name}.tar\") }' #{ paths_to_exclude } #{ paths_to_package } 2> /dev/null\")`\n\nIt might be an idea to modify backup so that any errors here are more visible / logged.\n Be aware to change the test as well if you release a pull request:\nhttps://github.com/meskyanichi/backup/blob/develop/spec/archive_spec.rb\n  Let me know what you think about this.\n\nI did not inject the split behavior in a central place yet. Reason is, that really only the call to 'split!' can be centralized into lib/backup/model.rb or so. Everything that happens inside the loop of transferring or removing the backup files looks rather specific for every storage to me.\n\nThere is also no 'assemble' command yet. All it takes to assemble the parts back into the complete archive is 'cat chunk-\\* > whole' so I figured we do not need a Ruby wrapper for cat :-).\n I've added two new attributes to backup/configuration/storage/base.rb to enable splitting and configure the chunk size in MB. I have not tried it, but I guess it would split three times if three storages are configured because every storage calls split! again on transfer. \nThat split! should probably be extracted from the storage and put into a separate phase. I just could not figure out how to do this and still keep all my splitting logic together in one module. If you can advise, I'll be happy to make the change.\n Neat! I like your implementation way better than mine. Thanks a lot for this awesome feature. I look forward to replacing my crummy version with this one! \n  Using fog 1.0.0, backup 3.0.18, ruby 1.9.2p290, I get the following error: \n\n``` ruby\nExcon::Errors::SocketError - Broken pipe\n===========================================================================\n/usr/local/rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/openssl/buffering.rb:292:in `syswrite_nonblock'\n/usr/local/rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/openssl/buffering.rb:292:in `write_nonblock'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/excon-0.7.6/lib/excon/socket.rb:81:in `write'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/excon-0.7.6/lib/excon/connection.rb:172:in `request'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/fog-1.0.0/lib/fog/core/connection.rb:20:in `request'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/fog-1.0.0/lib/fog/aws/storage.rb:366:in `request'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/fog-1.0.0/lib/fog/aws/requests/storage/put_object.rb:43:in `put_object'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/backup-3.0.18/lib/backup/storage/s3.rb:82:in `transfer!'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/backup-3.0.18/lib/backup/storage/s3.rb:55:in `perform!'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/backup-3.0.18/lib/backup/model.rb:222:in `block in perform!'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/backup-3.0.18/lib/backup/model.rb:222:in `each'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/backup-3.0.18/lib/backup/model.rb:222:in `perform!'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/backup-3.0.18/bin/backup:130:in `block in perform'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/backup-3.0.18/bin/backup:109:in `each'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/backup-3.0.18/bin/backup:109:in `perform'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n/usr/local/rvm/gems/ruby-1.9.2-p290@backup_util/gems/backup-3.0.18/bin/backup:288:in `<top (required)>'\n```\n\nReminiscent of issue 154: https://github.com/meskyanichi/backup/issues/154\n\nIn 154, it was said to reopen if the issue pops up again so that's what I'm doing. Could be a one time thing, but because of its significan presence in the past, I doubt it. \n I will check all of these things for you when I get home this evening. It is indeed happening with a file much larger than 100mb. I haven't checked the file size for exact numbers, but it shouldn't be any larger than 3gigs. I'll double check the size, as well. \n\nIf it is a size issue, fog should at least return a proper error message, but again, I don't think that's true in my case. \n I had exactly the same issue and noticed I hadn't set my S3 region correctly.\nAfter changing\n\n``` ruby\nBackup::Configuration::Storage::S3.defaults do |s3|\n  s3.region = 'us-east-1'\nend\n```\n\nto\n\n``` ruby\nBackup::Configuration::Storage::S3.defaults do |s3|\n  s3.region = 'eu-west-1'\nend\n```\n\nthe issue is solved.\n\n@billywatson, maybe check if you're region is set correctly...?\n No, it's set properly because when I try with a really small file, it works and upload properly.\n Okay, was just checking because I had the same issue today.\nThen it indeed seems to be a Fog/connection issue...\n Okay. I'm comfortable closing the issue. I think it may be due to too large of a file. I don't like the cryptic error message, but I'm not sure there's a lot to be done about that.\n I'm using Splitter with a 250mb size and getting this same error. On S3 I can see the directories and even .tar file created but its 0 bytes.\n\n```\n[2012/04/05 12:54:48][message] Storage::S3 started transferring '2012.04.05.12.53.26.unirondack.tar-aa' to bucket 'unirondack'.\n[2012/04/05 12:54:50][error] ModelError: Backup for Unirondack Backup (unirondack) Failed!\n[2012/04/05 12:54:50][error]   An Error occured which has caused this Backup to abort before completion.\n[2012/04/05 12:54:50][error]   Reason: Excon::Errors::SocketError\n[2012/04/05 12:54:50][error]   Broken pipe\n[2012/04/05 12:54:50][error] \n[2012/04/05 12:54:50][error] Backtrace:\n[2012/04/05 12:54:50][error]   /usr/lib/ruby/1.8/openssl/buffering.rb:179:in `syswrite'\n[2012/04/05 12:54:50][error]   /usr/lib/ruby/1.8/openssl/buffering.rb:179:in `do_write'\n[2012/04/05 12:54:50][error]   /usr/lib/ruby/1.8/openssl/buffering.rb:193:in `write'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/excon-0.13.3/lib/excon/connection.rb:239:in `request_kernel'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/excon-0.13.3/lib/excon/connection.rb:97:in `request'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/fog-1.3.1/lib/fog/core/connection.rb:20:in `request'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/fog-1.3.1/lib/fog/aws/storage.rb:359:in `request'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/fog-1.3.1/lib/fog/aws/requests/storage/put_object.rb:43:in `put_object'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/storage/s3.rb:68:in `transfer!'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/storage/s3.rb:67:in `open'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/storage/s3.rb:67:in `transfer!'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/storage/base.rb:79:in `files_to_transfer_for'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/storage/base.rb:78:in `each'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/storage/base.rb:78:in `files_to_transfer_for'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/storage/s3.rb:63:in `transfer!'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/storage/base.rb:33:in `perform!'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/open4-1.3.0/lib/open4.rb:121:in `to_proc'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/model.rb:245:in `each'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/model.rb:245:in `perform!'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/model.rb:243:in `each'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/model.rb:243:in `perform!'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/cli/utility.rb:74:in `perform'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/cli/utility.rb:65:in `each'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/lib/backup/cli/utility.rb:65:in `perform'\n[2012/04/05 12:54:50][error]   /usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in `send'\n[2012/04/05 12:54:50][error]   /usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n[2012/04/05 12:54:50][error]   /usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n[2012/04/05 12:54:50][error]   /usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n[2012/04/05 12:54:50][error]   /usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/gems/backup-3.0.23/bin/backup:11\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/bin/backup:19:in `load'\n[2012/04/05 12:54:50][error]   /home/unirondack/.gems/bin/backup:19\n```\n  Hi,\n\nI tried to write a way to have extendable model. I wanted to do such a config possible:\n\n``` ruby\nBackup::Model.new(:db_backup, 'My Backup', '') do\n\n  database MySQL do |db|\n    db.name               = \"firstdb\"\n    db.username           = \"firstdb\"\n    db.password           = \"firstdb\"\n    db.host               = \"localhost\"\n    db.port               = 3306\n    db.socket             = \"/var/run/mysqld/mysqld.sock\"\n  end\n\n  database MySQL do |db|\n    db.name               = \"seconddb\"\n    db.username           = \"seconddb\"\n    db.password           = \"seconddb\"\n    db.host               = \"localhost\"\n    db.port               = 3306\n    db.socket             = \"/var/run/mysqld/mysqld.sock\"\n  end\n\n  compress_with Gzip do |compression|\n    compression.best = true\n    compression.fast = false\n  end\n\nend\n\nBackup::Model.new(:daily, 'My Backup', :db_backup) do\n\n  store_with S3 do |s3|\n    s3.access_key_id      = 'my_access_key_id'\n    s3.secret_access_key  = 'my_secret_access_key'\n    s3.region             = 'us-east-1'\n    s3.bucket             = 'bucket-name'\n    s3.path               = '/path/to/my/daily-backups'\n    s3.keep               = 10\n  end\n\nend\n\nBackup::Model.new(:weekly, 'My Backup', :db_backup) do\n\n  store_with S3 do |s3|\n    s3.access_key_id      = 'my_access_key_id'\n    s3.secret_access_key  = 'my_secret_access_key'\n    s3.region             = 'us-east-1'\n    s3.bucket             = 'bucket-name'\n    s3.path               = '/path/to/my/weekly-backups'\n    s3.keep               = 10\n  end\n\nend\n\nBackup::Model.new(:monthly, 'My Backup', :db_backup) do\n\n  store_with S3 do |s3|\n    s3.access_key_id      = 'my_access_key_id'\n    s3.secret_access_key  = 'my_secret_access_key'\n    s3.region             = 'us-east-1'\n    s3.bucket             = 'bucket-name'\n    s3.path               = '/path/to/my/monthly-backups'\n    s3.keep               = 10\n  end\n\nend\n\n```\n\nI'm very new in ruby, so feel free to make a better implementation if you want to keep this feature.\n single pipe should be replaced with double pipe\nthere should be test\n\nand i'm not sure this is a good approach. why not just clone the parent model and call store_with again within the context of the new/cloned one?\n Sorry, I don't know what do you mean with double pipe. I try to change \n\n``` ruby\n@databases   = self.databases   | model.databases\n```\n\nby \n\n``` ruby\n@databases   = self.databases   || model.databases\n```\n\nIt does not work, but again, I'm a newbie in Ruby :p\n\nI also try to make a clone of the parent and also to call store_with. I try something like that:\n\n``` ruby\n\nbase = Backup::Model.new(:db_backup, 'My Backup', '') do\n   ....\nend\n\nweekly = base.clone\nweekly.trigger = :weekly\nweekly.store_with S3 do |s3|\n    s3.access_key_id      = 'my_access_key_id'\n    s3.secret_access_key  = 'my_secret_access_key'\n    s3.region             = 'us-east-1'\n    s3.bucket             = 'bucket-name'\n    s3.path               = '/path/to/my/backups'\n    s3.keep               = 10\nend\nBackup::Model.all << weekly\n```\n\nAnd it works. I think it's a bit tricky because it needs to take a look at the backup's code but it's ok for my purpose.\n\nThanks :)\n Aaah, ok, you use single pipe to combine arrays, not to choose the non-empty one.\n I am also looking for \"right\" way of storing dayly/weekly/monlty backups using your gem. This seems like great idea. Or is there any other functions that allows me to reorder backup based on time/date?\n :+1:\n How did you make the @cbou's example work?\n`trigger` is an `attr_reader` and therefore throws the `NoMethodError: undefined method 'trigger=' for #<Backup::Model:0xb6abb8e4>` for me.\n\nI could use `weekly.instance_variable_set(:@trigger, \"weekly\")` even though it looks hackish but it throws `undefined method 'basename' for nil:NilClass` at `/var/lib/gems/1.8/gems/backup-3.0.25/lib/backup/splitter.rb:39`\n  Need to make sure the shell knows about exceptions / problems. This helps when running backup from another app.\n We also have been looking for something like this!! Thanks Crim!\n\nWe use the backup gem as part of an automated backup system and rely on exit codes to report failure/success.  But right now, they will always report success.  This patch should help quite a bit.\n  It seems as if only rsync through ssh is supported. I want to rsync to my dropbox folder and I did not find a way to with Backup. is that not supported?\n- Marcelo.\n ``` ruby\nBackup::Model.new(:my_backup, 'My Backup') do\n\n  sync_with RSync do |rsync|\n    rsync.ip       = \"127.0.0.1\"\n    rsync.port     = 22\n    rsync.username = \"user\"\n    rsync.path     = \"~/Dropbox/data/\"\n\n    rsync.directories do |directory|\n      directory.add \"/var/lib/data/\"\n    end\n  end\n\nend\n```\n\nThis works for me with my public key in ~/.ssh/authorized_keys.\n  Hi there,\n\nyesterday I faced a issue using backup-gem: If you backup a directory and some files were changed during backup, tar will exit with 1 afterwards. This will cause backup to exit before finishing the backup cycle. It might be worth to change the way how tar runs are handled.\n\nI thought of two different ways to handle it:\n1. \"begin rescue\" around tar-run\n2. Adding an optional parameter to the run()-Method to tell it, which exit codes are good, e.g. run( command, %W[ 1 2 3 ]).\n\nhttp://www.gnu.org/software/automake/manual/tar/Synopsis.html\n\n> If tar was given \u2018--create\u2019, \u2018--append\u2019 or \u2018--update\u2019 option, this exit code means that some files were changed while being >archived and so the resulting archive does not contain the exact copy of the file set. \n\nCheers,\ndeg\n Michael,\n\nI will get to it soon. Please stay tuned. :)\n\nCheers,\ndeg\n Patch finished. Waiting for internal authorization to release it (Update: Legal department is involved, I'm still waiting. the lady in charge is busy unfortunately).\n Hi there,\n\nI talked to my boss at the beginning of this week. He told me that he's still waiting for a response of the legal department.\n\n> I assume it does not corrupt the archive if files on the filesystem changed (or added/removed) during the tar archiving process?\n\nI didn't have any issues with that. I learnt that tar is a utility that was made to write data to tapes: I writes files one after another. I think that's why \n\n``` sh\n tar -cf - /etc | tar -xf - -C / \n```\n\nworks.\n\n> Am I right to say that the exit(1) code only implies that it's not an exact copy anymore since there were changes to the file system, but the archive was properly put together?\n\nThat's why I think it should be no problem. Maybe I find the time to check this in a secure manner and/or ask the developers of gnu tar. BTW: I'm not sure if other unix' tar-utilities return 1 if a file has been changed during backup. Perhaps you better leave the decision to the users of your gem - e.g. via an option in the configuration file: If they're paranoid they might want to stop the backup process every time there's a exit status != 0.\n You are writing to the wrong \"DEG\".\n\nDavid\n\nMichael van Rooijen reply@reply.github.com wrote:\n\n@deg I went ahead and implemented it myself as I was doing some basic householding in the app in general. Started out with some basic snippets and turned out the implemented was fairly simple so I went ahead and did it.\n\nThis is what I have now:\n\n``` ruby\n\n# encoding: utf-8\n\nmodule Backup\n  module CLI\n\n    ##\n    # Runs a given command in an isolated (sub) process using POpen4.\n    # The STDOUT, STDERR and the returned exit code of the utility will be stored in the process_data Hash.\n    #\n    # If a command returns an exit code other than 0, an exception will raise and the backup process will abort.\n    # Some utilities return exit codes other than 0 which aren't an issue in Backup's context. If this is the case,\n    # you can pass in an array of exit codes to ignore (whitelist), for example:\n    #\n    #   run(\"tar -cf /output.tar /some/folder\", :ignore_exit_codes => [1])\n    #\n    # So if the `tar` utility returns in this case 1, Backup will consider it an acceptable return code.\n    #\n    # Note: Exit code 0 is always automatically added to the :ignore_exit_codes array, regardless of whether you specify an\n    #       array to ignore or not.\n    def run(command, options = {})\n      command.gsub!(/^\\s+/, \"\")\n\n      process_data                     = Hash.new\n      pid, stdin, stdout, stderr       = Open4::popen4(command)\n      ignored, process_data[:status]   = Process::waitpid2(pid)\n      process_data[:stdout]            = stdout.read\n      process_data[:stderr]            = stderr.read\n      process_data[:ignore_exit_codes] = ((options[:ignore_exit_codes] || Array.new) << 0).uniq\n\n      raise_if_command_failed!(command_name(command), process_data)\n    end\n\n    ##\n    # Wrapper method for FileUtils.mkdir_p to create directories\n    # through a ruby method. This helps with test coverage and\n    # improves readability\n    def mkdir(path)\n      FileUtils.mkdir_p(path)\n    end\n\n    ##\n    # Wrapper for the FileUtils.rm_rf to remove files and folders\n    # through a ruby method. This helps with test coverage and\n    # improves readability\n    def rm(path)\n      FileUtils.rm_rf(path)\n    end\n\n    ##\n    # Tries to find the full path of the specified utility. If the full\n    # path is found, it'll return that. Otherwise it'll just return the\n    # name of the utility. If the 'utility_path' is defined, it'll check\n    # to see if it isn't an empty string, and if it isn't, it'll go ahead and\n    # always use that path rather than auto-detecting it\n    def utility(name)\n      if respond_to?(:utility_path)\n        if utility_path.is_a?(String) and not utility_path.empty?\n          return utility_path\n        end\n      end\n\n      if path = %x[which #{name}].chomp and not path.empty?\n        return path\n      end\n      name\n    end\n\n    ##\n    # Returns the name of the command\n    def command_name(command)\n      command.slice(0, command.index(/\\s/)).split('/')[-1]\n    end\n\n    ##\n    # Inspects the exit code returned from the POpen4 child process. If the exit code isn't listed\n    # in the process_data[:ignore_exit_codes] array, an exception will be raised, aborting the backup process.\n    #\n    # Information regarding the error ( EXIT CODE and STDERR ) will be returned to the shell so the user can\n    # investigate the issue.\n    #\n    # The \"Exception::CommandFailed\" exception will be raised.\n    def raise_if_command_failed!(utility, process_data)\n      unless process_data[:ignore_exit_codes].include?(process_data[:status].to_i)\n        exception_string =  \"Failed to run \\\"#{ utility }\\\" on \\\"#{ RUBY_PLATFORM }\\\".\\n\\n\" +\n                            \"Exit code was:\\n\\n\\s\\s#{ process_data[:status].to_i }\\n\\n\"\n        exception_string << \"STDOUT was:\\n\\n\\s\\s#{ process_data[:stdout].gsub(\"\\n\", \"\\n\\s\\s\") }\" unless process_data[:stdout].empty?\n        exception_string << \"STDERR was:\\n\\n\\s\\s#{ process_data[:stderr].gsub(\"\\n\", \"\\n\\s\\s\") }\" unless process_data[:stderr].empty?\n\n        raise Exception::CommandFailed, exception_string\n      end\n    end\n\n  end\nend\n```\n\nAlso, what exit codes should be ignored for the archiver's `tar` operation? `[0, 1]`? I assume it does not corrupt the archive if files on the filesystem changed (or added/removed) during the `tar` archiving process? Am I right to say that the exit(1) code only implies that it's not an exact copy anymore since there were changes to the file system, but the archive was properly put together?\n\nThanks!\n\nNote: I also got rid of the old CommandNotFound exception since the CommandFailed exception we're already using already picks that up when trying to run a command that doesn't exist, since that'd return a non-0 error code from the `sh` utility.\n\nCheers\n\n## \n\nReply to this email directly or view it on GitHub:\nhttps://github.com/meskyanichi/backup/issues/185#issuecomment-2547352\n  An extra `auth_url` attribute has been added to the cloudfiles config.\n\nThis allows you to specify auth urls for different regions (e.g. to use\nthe London cloudfiles api you use \"lon.auth.api.rackspacecloud.com\"\n Done, thanks for merging!\n  Hi,\n\nThank you for such a great tool!\n\nAnyway, I have set backup to sync to S3 and I'm using Ruby 1.8.7, and while it copies some of the files (the total is 357MB) it just hangs forever. I have a 10Mbps internet connection, 5Mbps outbound, and I left it a whole night and in the morning it was still hanging at:\n\n[timestamp][message] Performing backup for fullofcaffeine_backup!\n[timestamp][message] Backup::Syncer::S3 started syncing '~/workspace'.\n\nAny ideas?\n- Marcelo.\n Got the same problem.  Had it going overnight trying to do 800 meg.  Seems to have only done a few 10s of megs.\n Michael,\n\nWhat would be the current workaround for syncing to S3? I'm willing to upgrade to Ruby 1.9.2 if needed.\n- Marcelo.\n Have you tried 1.9 with the aproxacs-s3sync gem?\n No, I'd try that, but I already setup rsync with Dropbox. End result: It works great and is cheaper than S3. I'm still using Backup for other kind of backups. Keep up the great work guys.\n\nCheers,\n- Marcelo.\n having the exact same problem with 1.8.7 ( REE )  with a directory with only 53MB\n I'm having a similar problem with Ruby 1.9.2. I'm able to use aproxacs-s3sync from the command line, but it just hangs when I try to use it with Backup of directories over a certain size.\n This also happened to me while syncing a directory 66MB in size with Ruby 1.8.7 on Ubuntu 10.04. \n I have the same issue with 1.8.7 and I see that there is 15 min timeout, maybe  on the s3sync level. Trying to understand how can I manage this timeout.  \n reopening, since it seems to remain unsolved.\n\nso, what are our options? working around s3sync? switching to fog?\n What about using https://github.com/fredwu/ssync? Envato uses ssync in production and it's supposedly more efficient than s3sync.\n Currently I used s3fs http://code.google.com/p/s3fs/wiki/FuseOverAmazon quite tricky but it's work for me. \n subscribe...\n Same issue on backup 3.0.21 : ruby 1.9.2p290. \n eventually I used rsync with s3fs, work flawlessly, but take a lot of effort to setup.\n Check out this for now guys and gals: http://freelancing-gods.com/posts/backing_up_with_backup\n\nThis is something we want to incorporate in to Backup itself once we have time. Essentially his fork provides syncing to Amazon S3 and Rackspace Cloud Files. It uses the Fog gem (which we use) as it's only dependency, unlike the current Backup release, we use external CLI dependencies which kind of sucks.\n\nPat Allan has done a nice job with his current work, but there are a few things still missing:\n- Use threads to boost up performance dramatically.\n  - His single-threaded solution works, but you can easily spawn 50+ threads to dramatically reduce the process time\n- Doesn't mirror yet\n- It isn't up to date (last I checked) with the current Backup release. The code-base he forked is I think 2 releases off, which is a lot considering we completely overhauled the internals and how things work.\n\nWe want to get this done, but lacking the time to do so right now. It will definitely make it in at some point though.\n Same problem. According to strace it hungs when writing something (to s3?):\n\n```\nmunmap(0x7fb52fa0a000, 4096)            = 0\nstat(\"/srv/gitosis/repositories/repo.git/objects/d5/4d2bbb00c80c3cdf099f79b0770d1775f25a3c\", {st_mode=S_IFREG|0444, st_size=2077, ...}) = 0\nwrite(1, \"positories/repo.git/objects/d3\"..., 4096\n```\n  For your consideration.  This is \"ruckus-matte\" (of the popen bug issue) but this is my personal account.  The other is for work.  I like forking from here.  :)\n\nI couldn't figure out how to allow setting whether SMTP or Sendmail was to be used for the Mail notifier so this is a quick hack using a dedicated Sendmail notifier class.  It might also be suggested to allow for setting the location of the sendmail command but I couldn't figure that out either.  I did try to configure it using a \"via\" attribute but my ruby-fu must not be good enough.  :)  There is a fork at https://github.com/bazzel/backup that allows sendmail using a \"via\" attribute but it's based on really old code and I don't have the time to try and figure it out.\n\nUsing gemsets for testing seems more polite. no clobbering of anything the user might already have set up.\n\nBack to Mail gem v2.2.x.  Rails 3.1 adds v2.3 requirement but Rails 3.0 requires v2.2.x\n\n(e)\n Sendmail is installed on many unix servers.  I don't know how widespread though.  It's always been on any server I've managed.  Just a daemon running on the system that accepts mail from the local host.  I'm not a unix guru so I don't know the security restrictions but I'd hope the developer using Backup would know about it before using it.  the Mail gem defaults to SMTP but supports Sendmail.\n\nhttps://github.com/mikel/mail/blob/master/lib/mail/network/delivery_methods/sendmail.rb\n\nAnd the downgrade of the Mail version was due to my 3.0.10 app bailing with a gem dependency error when I specify a Mail notifier.  The error saying that Backup requires v2.3.0 of the Mail gem.  However when I tried to force that in my app Gemfile, bundler errored because rails 3.0.10 has a Mail dependency of \"~> 2.2.x\".\n\nRails 3.1 supports Mail v2.3.\n\nA bit of a jumble of changes, sorry.  I can separate them out if needed.\n\n(e)\n It's probably because of my just starting to explore Backup. I found a few articles of people using it with Rails and storing their config info in their app.  I'll explore it as a standalone option.  That would make sense.  No pollution of repos and need for gitignore stuff.\n\nI am using it as a tool in my deployment scripts.  Backup before migration.  Had an ugly several line script that did that and now I just call your gem.  It's also something I need to set up as a recurring job.\n\nThe delay in replying has fuzzed my mind on all this but it's coming back to me.  May explore soon again.\n Sendmail support has been added in 664547e83c41cf50ffa1d316ca2d465a0994f382\n  I've just bundle installed the gem and am running the generator for the first time per the quick start instructions.  I'm receiving this error ... \n\n```\n[2011/09/12 16:09:43][error] Dependency missing.\n/Users/matte/.rvm/gems/ruby-1.8.7-p352@wwwadmin/gems/backup-3.0.17/lib/backup/logger.rb:60:in `initialize': No such file or directory - /Users/matte/Backup/log/backup.log (Errno::ENOENT)\n```\n\nIt happens no matter what backup command I run, even \"backup help\".  Nowhere in the instructions does it mention the need for that directory.\n\nI've created the ~/Backup/log and the backup.log file.  That removed that error however now it's telling me that the dependency popen4 is not installed.  It appears that the dependencies weren't checked or installed.\n\nFYI.\n\n(e)\n No worries.  I was looking through more of the documentation and noticed the mention that it does not install all the dependencies but mentions when you need any particular ones after running from the cmd line.  That's nice though perhaps a quick mention of that in the Quick Start might be warranted.\n\nI've updated my Gemfile to contain the necessary dependencies.\n\nI'm sad it took me so long to get started with this gem.  Really enjoying it even after such a short time using it.  :)\n\n(e)\n  I very much like the Dropbox storage option, it really only has the flaw that maximum file size is 300MB.\n\nNow, I am working on a project that will shortly hit this limitation. Dropbox is still cool as storage so I am getting ready to provide an impl for a feature to split up the backup file. \n\nIn the first place, I am curious if anybody has thoughts/advise in this direction and, of course, whether this feature exists and I am just not finding it. I also found that somebody already implemented this feature a while ago (https://github.com/square/backup/commit/b9db056969d637e49b3411d3e7925a6747d6d821). Any particular reason why this never its way back to the main branch?\n Understood. I also like the splitter class but was thinking about a solution that is more contained in the storage package.\n\nFrom a quick look at the code, my approach would be like this:\n- Create the splitter module.\n- Include the splitter module into storage base and extend the base storage configuration.\n- Provide a new split! method in base that the storage impls should call from perform!. This method splits if applicable using the Splitter class and returns the list of resulting files.\n- The storage impls would have to be changed to upload all files returned from split!. For simple cycling, the filenames of the chunk would just get a running extension (.1, .2 etc).\n- Change the storage impls so that remove! can also remove the chunks.\n\nSo, splitting would remain a concern of only the storage package. \n\nSound reasonable?\n Just two general questions as I get ready to implement the feature:\n- Running 'bundle exec guard start' works fine, it just does not print any errors. Not even when I introduce a bug that should be caught be a spec. It recognizes the changes in the file system, though. This is the first time I am using Guard, so I might be doing something fundamentally wrong here.\n- Running specs from the directory fails some with messages like:\n  - Mocha::ExpectationError: unexpected invocation: \n    File.open('/home/matthias/Backup/.tmp/2011.09.11.21.02.28.myapp.tar.enc')\n  - unsatisfied expectations:\n    - expected exactly once, not yet invoked: #Mock:Fog::Storage.put_object('my-bucket', 'backups/myapp/2011.09.11.21.02.28.myapp.tar',#Mock:Backup::Storage::S3::File)\n    - expected exactly once, not yet invoked: File.open('/home/matthias/Backup/.tmp/2011.09.11.21.02.28.myapp.tar')\n\nI am running with ruby 1.9.2 by default but installed all the rubies as you advised in the 'want to contribute?' section.\n\nAny idea what I am doing wrong?\n Alright. I have no idea why guard did not work (it does now, in a new shell), probably something screwed up on my box.\n\nThe other issue appears only when running all specs together in a certain order (open_ssl_spec before the storage specs)  The open_ssl_spec alters the Backup::Model.extension to be 'tar.enc' which is not what the other specs expect. I have added\n\n``` ruby\nafter(:each) do\n  Backup::Model.extension = 'tar'\nend\n```\n\nto open_ssl_spec.rb and now I have a green bar (well several of them actually :-). I start to like Guard).\n Oh, and yes, I agree with your notes. Will do it that way!\n Just checking on the status of this new feature, it's the only thing missing from a true enterprisey backup tool.  Currently we backup locally and use a split script and upload script instead.\n I'm still working on it, just did not have time to get to this during the last weeks. Maybe I have something later this weekend. I'll keep you posted.\n Alright, this is the very first cut for the splitter and the integration with the Dropbox storage.\n\nhttps://github.com/m4/backup/commit/7d9e33421d3b62015b8762cc29019aa57087dc51\n\nI still need to update all the other storage implementations and provide the assemble command.\n\nLet me know what you guys think!\n @m4 the code looks good, at least the first skim. i like it! :) \n\nmaybe instead of updating all the storage implementations you could just inject the splitting stuff somewhere in the \"prepare before storing\" flow?\n @tomash I fully agree. I was actually searching for a way to somehow inject the handling of multiple files but couldn't find tthe one place where it can just made work automagically for all storage impls. Any specific ideas? \n\nOtherwise, the dropbox impl now runs happily on my server. No manual upgrade was required, it seems to be backward compatible. I might have some time tomorrow to complete the feature.\n i'd look in lib/backup/model.rb, there seems to be at least a few places we could use. not sure though.\n Just placed the pull request: https://github.com/meskyanichi/backup/pull/193.\n\nI am happy to work a little more on your latest suggestions but will need some more context as to what should be done (see pull request description).\n new branch to have it tested and smoothed is a great idea. i'd love to have that feature (and will test it!), but that's quite a change to the codebase.\n  Hi there,\nI keep getting 'Dependency missing' for fog on Ubuntu 10.04.3 even though it is installed. I have tried removing every gem and reinstalling fog and backup but it does the same. It works straight away on my Mac...\n Yep, the latest gems from rubygems.org. I am running it as a different user but have to run gem install as sudo. And no I'm not using RVM. But I still have access to the gems.\n Turns out I had RubyGems version 1.3.5. Updating to the latest version (1.8.10) fixed the problem.\n  How do I go about backing up all the databases on the server?\n Ah that's great. Will give it a go, thanks.\n you can also pass \"--all-databases\" to the additional_options (`mysqldump` is used behind the scenes) and make the name a blank string. \n\nThis does have the side effect of when downloading the file to restore, the name is \".sql\", which makes it invisible (at least in the Finder on a Mac), which can cause severe panic. :) \n MongoDB: http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-Example%3ADumpingEverything\nPostgres: http://www.postgresql.org/docs/8.1/static/app-pg-dumpall.html (uses a separate command, I remember trying to do this with the backup gem and had to do individual dbs since I didn't have time to implement this.)\n\nI'm ok with either syntax, though the 2nd might be easier to implement.\n What would the files that are saved be called? date.all.tar.gz?  I guess the `db.name` setting wouldn't make much sense anymore.\n This is good to find. Has this been implemented yet?\n Just asking again, was this ever implemented?\n Has this been implemented in Backup v3?\n See https://github.com/meskyanichi/backup/pull/266.\n Excellent, hopefully that gets merged, thanks :)\n Looks like this has been merged - https://github.com/meskyanichi/backup/pull/266#issuecomment-3855523\nThanks!\n  Allow logging to syslog or to other logger objects rather than the built-in one.\n I opened this because I'm trying to get everything possible to log to syslog (using http://graylog2.org/ to collect everything.)\n\nThe standard ruby logger (http://www.ruby-doc.org/stdlib/libdoc/logger/rdoc/classes/Logger.html) defines an API for a logger object, and there are other gems that follow this API (https://github.com/crohr/syslogger seems to be the best/most active for syslog.) I opened this after seeing how chef can do it: http://tickets.opscode.com/browse/CHEF-273?focusedCommentId=16619&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16619 , by specifying in a configuration file an object that will act as the logger. Let me know if that doesn't make any sense.\n Closing this because of the fix above (thanks @antonlindstrom!)\n\nIf you're using logstash, you can use the backup log file for an input and output to just about anything.\n  [2011/09/09 09:32:12][message] Performing backup for Backup for winnie-test.postgres!\n[2011/09/09 09:32:12][message] Backup::Database::PostgreSQL started dumping and archiving \"winnie-test\".\nsh: pg_dump: not found\n[2011/09/09 09:32:12][message] Backup started packaging everything to a single archive file.\n[2011/09/09 09:32:12][message] Backup::Compressor::Gzip started compressing the archive.\n[2011/09/09 09:32:12][message] Backup::Storage::SFTP started transferring \"2011.09.09.09.32.12.winnie-test.postgres.tar.gz\".\n[2011/09/09 09:32:13][message] Backup started cleaning up the temporary files.\n\nWe also had Mail notifier set, and we didn't get any failure notifications. I think it should rise an error when dumping database and send email about failure.\n  Using the relatively new support in Fog for Ninefold, added in storage support for it. I've been using this for over three weeks, no issues, cycling works, all fine.\n +1 from me. any objections? if none, i'll merge it within a day or two.\n  Dropbox::Session#authorize! has been removed as of Dropbox 1.3.0 in favor of following the OAuth-ish convention of caching OAuth session credentials.\n\nProblems solved::  \n- Based on the method signature and object name, I guessed that backup actually depended on Open4, not POpen4 which requires a block\n- Given that Open4::popen4 is used in Backup::CLI#run I added it as a production gem dependency in the gemspec.  \n- A helper has been added to the executable to simplify the process of caching Dropbox credentials.  \n\nProblems not solved:  \n- I wasn't sure how I wanted to go about providing deprecation warnings for api_key and api_secret.  \n- I don't like the command name for the backup executable I used. Unfortunately I can't think of anything better. \n\nThis may relate to / help with meskyanichi/backup#164\n wow, a lot of work. thanks!\ni should have some time the upcoming weekend to test this (anyone else also? please? the more eyeballs, the better), if this makes dropbox backups work again then of course i'm merging this one in.\n I may have discovered an issue when cycling backups. I'll be investigating tomorrow.\n Oh, has nothing to do with cycling backups. Has everything to do with old versions of serialized backup information not having references to the new serialized_session file path.\n I'll start work on a migration path for existing Dropbox YAML object caches tomorrow.\nI can either bundle it with this pull request or it could come separately.\n\nJust let me know which you'd prefer.\n Moved dropbox stuff into it's own command. New command provides a turn-key solution for fetching a serialized Dropbox OAuth session as well as a helper which will migrate old DATA_DIR/Dropbox.yml files to match the new settings in an updated config file.  \n\nPlease review! I wasn't sure how to go about testing the executable functionality. :(\n Thanks, great work !\nI had a look at the code, it looks ok. I'll give it a try when I have time (probably this week end)\n Thanks for your time! I've been running this in production on a side project of mine for a while now and it hasn't given me any trouble yet.\n Just tried a one-off backup and it worked perfectly. I'll look more into it this week end.\n i haven't had the time last weekend, but i should have some tonight. if no cataclysm happens, it seems like we can merge this one :) \n\n(and then i'll be working on fixing the test suite...)\n Cool. Is there a Wiki article with the types of fixes you're looking for in regards to the test suite? If you're looking for greater test coverage, or a different system, or a different type of coverage, you might get some hep. I may or may not have time over the next two weekends, but I could always use more practice writing tests. ;)\n the only current problem with the test suite is that while all the tests pass while ran separately and/or using infinity_test, they basically fail when ran all together using rake task or rspec spec/. \nsee #116 for details.\n @meskyanichi Short answer: With my current solution, yes. It's the bare minimum implementation to negotiate an OAuth session.  \n\nThe long answer is it could probably be automated using something like mechanize, which I believe is exactly what the old version of the Dropbox gem used. It was, however, dropped from the Dropbox gem due to the fragility of the solution (Edit: and more specifically it being out of scope for the gem). Every time the Dropbox OAuth approval page is modified it can potentially break the mechanized solution.  \n\nRelated Dropbox commit: RISCfuture/dropbox@1b3447be49\n @meskyanichi That sounds like it might work. FWIW, with the current solution you can re-use the serialized session across triggers. Just create your serialized session file using the executable, and modify your triggers to point to that same serialized session.  \n\nThe only reason I took authorization out of line was to minimize the number of times it was necessary to store credentials while leaning on the Dropbox gem as much as possible. Whatever you think is best works for me. :)\n @meskyanichi This means that people will have to either copy around Backup cache files on deployment or run an interactive backup from the command line once before they can run it in a non-interactive context right?  \n\nExample:  \n\n  Lets say I've installed Backup on an instance somewhere and I deploy my configuration to it without copying the cache file. I forget to run it interactively and it gets run via a cron job. Does the cron job just hang there forever waiting for an input (from the gets) which will never happen?  \n\nI guess my concern is that we're potentially mixing concepts.  \nThe Dropbox gem wants to store the serialized session in .cache so the user doesn't need to be aware of the serialized session. But the user needs to be aware that a serialized session is necessary because otherwise the backup goes from a non-interactive to an interactive process.  \n\nEdit: \n\nP.S. Thanks for all your input and help, especially in clearing out those other failing tests! I probably should have fixed those before I started development on this change. Much appreciation abound. :)\n OK that timeout helps a lot. It would allow the notifications to be sent out instead of hanging indefinitely.  \n\nTesting configurations is the awesome way to do things and most people probably do exactly that. My concern was for people running in a multi-instance setup, they may have a staging/testing instance that they test on before deploying to production. It will be important to note in the wiki that deployment configurations will either have to be modified to copy over the backup cached session, or someone will have to log onto the production instance after upgrading Backup to perform this interactive configuration.  \n\nThis is all less of an issue now that there's a timeout on the gets... because it means that when the gets times out I'll get an error in my inbox/twitter feed which lets me know I forgot a step.  \n\nPersonally, given my deployments I prefer my implementation because I can ship the serialized OAuth session with my backup config (which I store along with my site deployments), and just fire and forget to any instance I chose once I've approved the OAuth session in development. I don't generally package the contents of my Backup data and cache directory because that data is very instance specific.  \n\nHowever, if you prefer your implementation I can make it work with my deployments.\n Yeah I can understand that. I'll just have to change my backup configuration so that the `$HOME/Backup` directory is stored in a deployment specific location instead of in $HOME. No biggie!  \n\nDoes the cache directory store only authorized sessions right now? If not, could I put in a vote to place it in something more visible like `$HOME/Backup/auth` or something like that? I'm not sure what sort of other things backup caches since I only learned enough to get Dropbox 1.3.0 working for me. :P\n @meskyanichi Just a thought (no idea why I didn't think about this earlier). Is it possible to just store the serialized session as a part of the backup config file? This would completely remove the need for a cache and make it a teeny bit more fire and forget. I have no idea what would have to go into making something like that work and I won't have time to look into it until much later.  \n\nI'd say keep going with your solution. I can always hack something together if I ever get time.  \n\nCheers!\n @meskyanichi Sounds great! I'll stop message-bombing you now. :D\n  It would be nice, if one could define incremental database backups. A solution for MySQL can be found here: https://github.com/airblade/mysql_s3_backup\n I don't think he's talking about incremental file changes, like rsync does, but about point in time recovery (http://dev.mysql.com/doc/refman/5.0/en/point-in-time-recovery.html)\n\nSo you take a \"regular\" backup with mysqldump, then after that backup the binlog files. When you recover, you restore the regular backup, then apply the changes since then from the binlogs.\n\nUsing Percona XtraBackup, if available, might be a kick-ass option too http://www.percona.com/software/percona-xtrabackup/\n Yes, you are right. I was talking about a less regular dump backup and more regular binlog files backup.\n Hi, I'm evaluating options also but I'd need incremental backsup due to the size fo the DB (to S3). I'm assuming that it's not supported from this thread?\n\nCan't see any forks in the network but please shout if you know any other options - I've seen the first post..\n I would love to have this too. And we could start this as a feature available to mysql databases, and expand as needed. This post outlines an approach similar to what mysql_s3_backup seems to be doing. \n\nDo the current maintainers of this gem have thoughts/comments on this?\n +1 for XtraBackup support!\n  we have this config:\n\n``` ruby\nBackup::Model.new(:konvenit_database_hourly, 'Konvenit database hourly') do\n\n  archive :konvenit_backup do |archive|\n   archive.add  '/var/backup/my_file.sql'\n  end\n\n\n```\n\nwe call this with:\n\n```\nsudo /usr/bin/backup perform --trigger konvenit_database_hourly --config_file /etc/backup/hourly.rb\n```\n\ni got this stack trace:\n\n```\n\n/usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/lib/backup/finder.rb:25:in `instance_eval': undefined method `add' for nil:NilClass (NoMethodError)\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/lib/backup/archive.rb:31:in `instance_eval'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/lib/backup/archive.rb:31:in `initialize'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/lib/backup/model.rb:127:in `new'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/lib/backup/model.rb:127:in `archive'\n    from (eval):3:in `block in find'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/lib/backup/model.rb:110:in `instance_eval'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/lib/backup/model.rb:110:in `initialize'\n    from (eval):1:in `new'\n    from (eval):1:in `find'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/lib/backup/finder.rb:25:in `instance_eval'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/lib/backup/finder.rb:25:in `find'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/bin/backup:104:in `block in perform'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/bin/backup:88:in `each'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/bin/backup:88:in `perform'\n    from /usr/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n    from /usr/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n    from /usr/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n    from /usr/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.16/bin/backup:267:in `<top (required)>'\n    from /usr/bin/backup:19:in `load'\n    from /usr/bin/backup:19:in `<main>'\n\n```\n\nwe use:\n\nruby 1.9.1p378 (2010-01-10 revision 26273) [x86_64-linux]\n ruby 1.9.1 wasn't, is not, and will never be supported. it's basically a buggy development release, not meant for serious use.\n\nplease upgrade to 1.9.2 and see if the problem persists.\n  I've moved the CLI command to use the popen4 gem, which allows better tracking of the status codes and stdout and stderr messages.  Essential for tracking commands that actually fail.  Before this I was getting successful notifications when my pgdump was failing with database permission errors.\n looks good to me. any other opinions?\n  When I add a folder to be archived like this:\n\n``` ruby\n  archive :files do |archive|\n    archive.add File.expand_path \"#{File.join(Rails.root, '..', '..', 'shared', 'files')}/\"\n  end\n```\n\nAnd the folder is missing, backup says the backup succeeded. Shouldn't it fail?\n\nI am on backup 3.0.16 and ruby 1.8.7/1.9,2 \n\nAm I doing something wrong?\n\nCheers,\n\nRoberto\n I don't know. Would you like it to fail?\n Well imagine you are in production, someone deletes you valuable data. You are happy making backups, then your customer informs you about the missing data.You look at your backups (that were all green) and see, that the data is missing in all of your remaining backups.....not that good.....\n\nWhat do you think?\n I have same issue.\n @meskyanichi Thanks\n  Hi,\n\nI'm, using 3.0.16 on ruby 1.8.7.\n\nI have a rails application with a symlinked \"files\" folder. When I use the symlink as Archive target like this:\n\n``` ruby\n  archive :files do |archive|\n    archive.add \"#{rails_root}/files/\"\n  end\n```\n\nI get the symlink as a single file but not the content. IMHO, as symlinking is a often used practice in rails + capistrano environments this should be fixed or there should be an option, to follow symlinks.\n\nCheers,\n\nRoberto\n This is a feature, of course, as automatically following symlinks is a bad idea and non-unix approach. They're symlinks, not hardlinks, for a reason.\n\nHaving a \"follow symlinks\" options is, however, quite reasonable. That's how Dropbox rolls.\n rsync:\n        -l, --links                 copy symlinks as symlinks\n        -L, --copy-links            transform symlink into referent file/dir\n            --copy-unsafe-links     only \"unsafe\" symlinks are transformed\n            --safe-links            ignore symlinks that point outside the tree\n        -k, --copy-dirlinks         transform symlink to dir into referent dir\n        -K, --keep-dirlinks         treat symlinked dir on receiver as dir\n +1 for this feature\n +1 from me as well. the question is: given all the information here, is anyone willing to do this feature and submit a pullreq? i'm not sure whether i'll have time to do it myself in the upcoming days.\n not really being a Ruby programmer, is it as straight-forward as checking to see if the directory passed in archive.add method is a symlink, and if it is, doing a readlink() to get its absolute path?  What isn't clear to me is if the readlink() call would fail on Windows (and thus would need to be handled), and if readlink() can be used with a path and not just a file.\n\nhttp://ruby-doc.org/core-1.9.2/File.html#method-c-readlink\n wait, anybody here using backup gem on windows?\n Yes, that is how I would use it. I'm not sure how tar handles sym links, but\nI will take what it gives me.\n\nI dont think windows supports done things,certainly not sym links...\nOn Oct 28, 2011 12:58 PM, \"Michael van Rooijen\" <\nreply@reply.github.com>\nwrote:\n\n> I'm not sure if backup runs on windows at all to be honest, does Windows\n> also have the unix utilities we use at all, like `tar` and `cp` and what\n> not?\n> \n> In any case, using `File.symlink?(file)` should work fine I think. I'll\n> check out the rest of the Ruby File API and see what I can use. In any case\n> you basically want it to follow symlinks and include them in the archive if\n> one of the folders you've added to the archive happens to contain symlinks\n> to other folders.\n> \n> So you're basically looking for some functionality that you could possible\n> enable like so?\n> \n> ``` ruby\n> archive :my_files do |archive|\n>   archive.follow_symlinks = true # default false\n>   archive.add \"/path/to/some/folder\"\n> end\n> ```\n> \n> Let me know.\n> Cheers\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/169#issuecomment-2559133\n Ahh. okay, thanks for looking.\nOn Oct 28, 2011 1:06 PM, \"Michael van Rooijen\" <\nreply@reply.github.com>\nwrote:\n\n> Turns out that `File.realpath(symlink_file)` is only available in Ruby 1.9\n> which is a problem. Looking in to way to get the same behavior in Ruby\n> 1.8.7.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/169#issuecomment-2559213\n For tar & following links, look at the -H and -L options:\nhttp://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/tar.1.html\n Yes, I like it.  My whole archive.add is a symlink, and I have plenty of subdirectories, plenty of layers deep, so it will be a good test!\n Very much ok.\nOn Oct 28, 2011 4:46 PM, \"Michael van Rooijen\" <\nreply@reply.github.com>\nwrote:\n\n> Sweet. I'll probably implement the feature in to Backup today or tomorrow,\n> then you can try it out by cloning the git repo and running backup from it.\n> (no need to wait on a new gem to try it out).\n> \n> I'll probably go ahead and implement the method i built instead of using\n> the tar flags and it's happened to me a few times that some flags differ\n> depending on the distributor type (GNU, BSD, or w/e). Like with the\n> `split()` utility im working with in the Splitter branch, it cant split into\n> numeric suffixes on OSX, only on Linux. So whenever possible I try to stick\n> with pure Ruby implementations of specific functionality like the symlink\n> following to ensure it works cross-platform.\n> \n> Ill let you know when I push this to the develop branch so you can clone\n> and test it out before I finally release it as a gem. That cool with you\n> @coreyt?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/169#issuecomment-2561610\n I gave it a try...\n- branch symlink\n- added the line to the config to follow sym_link\n\nIt does not throw an error (like earlier versions did), but it seems to\nonly be backing up the symlink file itself.\n\nCorey\n\nOn Mon, Oct 31, 2011 at 7:18 AM, Michael van Rooijen <\nreply@reply.github.com>wrote:\n\n> @coreyt just pushed an update in the **symlink** branch at commit\n> ffc28876947556c41ccccdeb46fcdb13be385a7b.\n> \n> You can try it out by doing the following:\n> \n> ```\n> git clone git://github.com/meskyanichi/backup.git\n> cd backup\n> git checkout symlink\n> ./bin/backup perform -t my_backup\n> ```\n> \n> be sure to enable symlink following:\n> \n> ``` ruby\n> archive :my_archive do |archive|\n>  archive.follow_symlinks = true\n>  archive.add \"~/some_folder\"\n> end\n> ```\n> \n> Let me know how it works out :) Haven't added any tests yet, wanted to see\n> if it works at all on your end with your series of (nested) symlinks. If it\n> all works well then I'll go ahead and apply the tests and merge it to the\n> the main develop branch.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/169#issuecomment-2576183\n Yes, no other files.  What might be different is that I am actually setting \n\n<pre> archive.add \"xxx/yyy/zzz\" </pre>\n\n\nwhere my zzz is a symlink'd directory.  Not so much backing up symlinks underneath zzz.\n +1 for this.\n\nUseful to backup /current, which is setup by capistrano to be a softlink by default.  \n Sorry guys, haven't had time to look at this. We might have to go with using `tar` flags seeing as it does seem to be available as @coreyt pointed out. I'm not entirely sure how easy it is to go about doing a pure ruby implementation of this within Backup.\n\nWould the `tar` flag utilities be sufficient? I have never used used the follow symlink flags so please let me know if it does the trick, even with deeply nested symlinks.\n\n@benbruscella any idea if the flag would be sufficient for the `/current` directory you speak of with Capistrano? Like I said I haven't used any flags for such purposes before.\n\nI assume Linux's `tar` also has the flags to follow symlinks?\n Actually, I think the current behaviour is OK.\n\nCapistrano sets up softlinks to a shared directory which is meant to host things like images, logs, etc.\n\nSo I've change my backup script to point to those directories instead and it works great.\n\nThanks again for a great gem!\n Bad solution with shared backup. If I have a few servers (production, beta, staging) with different real paths, I should use switch-case for path definition. So sad.\n When I do deployments, I put it into a date-specific directory: say\n\"1_1_2011\" is an earlier deployment, and \"1_10_2011\" is a later deployment.\n Then I symbolic link 'ln -s 1_10_2011 production'\n\nThis way, if there is a problem, my rollbacks are very easy - I just change\nthe link, and I don't need to change any other system configurations that\nlook for the 'production' directory...\n\nEvery time I do a deployment today, I need to edit my backup configs to\npoint to the  1_10_2011 or new deployment directory.  (sad face)\n\nI'm not as interested in having someone argue with me about the above\nprocess as much as I would really like backup to just handle these sym\nlinks. (!)\n\nIt seemed that we were on the right path with the earlier attempt - that\nRuby has facilities for interpreting a sym link and using the directory\nname when calling tar.  It seems that we could have tar follow sym links\ntoo - either way works for me.  It isn't like any \"follow sym link\" option\nneeds to be default, but for those of us who might need it, it would be a\ngreat option.\n An option has been added to allow you to specify additional flags to the `tar` command for each Archive.\nRef: df28ccfe1d8c9a1042ebc7d4a0f8081cb02d41fc\n\nSo, to have `tar` follow symlinks, use:\n\n``` rb\narchive :my_archive do |archive|\n  archive.add '/path/to/a/file.rb'\n  archive.tar_options '-h'\nend\n```\n\nOr, whatever flags your system's `tar` command uses.\n\nAlso... I know some of you will be tempted to add `-z` in there, or similar. Yes, it will work, **however**, be aware that the next version will be piping the archive's `tar` command through any configured Compressor specified with `compress_with`. Also, you'll end up with a compressed archive with a plain `.tar` extension inside your final packaged archive. :)\n   good catch, +1 from me. anyone objecting?\n  I just added Lzma support for a better compression.\n  Remote host ssh listen on a non standard port but:\n\nssh: connect to host xxxxxxxx port 22: Connection timed out\nrsync: connection unexpectedly closed (0 bytes received so far) [sender]\nrsync error: unexplained error (code 255) at io.c(635) [sender=3.0.3]\n\n``` ruby\nBackup::Model.new(:xxxx, \"My Backup\") \n  sync_with RSync do |rsync|\n     rsync.port     = 222 \n      rsync.path = \"/srv/backup/xxx/\"\n      rsync.username = 'root'\n      rsync.ip       = 'xxxxxxx'\n      rsync.directories do |directory|\n        directory.add \"/var/www/\"\n      end\n    end\n end \n```\n  Hi, i have tried to find, but couldn't: set up archive directory.\n\nFor example, for backup structure:\n\nOn FTP:\n\n```\n../webapp_backup/\n     /files/\n            /01\n            /02\n            /..\n    /server/last_release\n```\n\ni want to separate files of server from files.\n  A four years ago the perform backup is raising this error\nBefore this 4 days ago, it's was working perfectly\n\nException that got raised:\nOAuth::Unauthorized - 403 Forbidden \n\nMy command is: backup perform -t backup_gc\n I have the same error. \n\nSeems to occur when doing session.authorize!\n\nOAuth::Unauthorized: 403 Forbidden\n    from /usr/lib/ruby/gems/1.8/gems/oauth-0.4.4/lib/oauth/consumer.rb:217:in `token_request'\n    from /usr/lib/ruby/gems/1.8/gems/oauth-0.4.4/lib/oauth/tokens/request_token.rb:18:in`get_access_token'\n    from /usr/lib/ruby/gems/1.8/gems/dropbox-1.2.3/lib/dropbox/session.rb:111:in `authorize'\n    from /usr/lib/ruby/gems/1.8/gems/dropbox-1.2.3/lib/dropbox/session.rb:145:in`authorize!'\n According to this issue https://github.com/RISCfuture/dropbox/issues/38, `authorize!` is not a recommended way of login.\n `authorize!` has been removed : https://github.com/RISCfuture/dropbox/commit/1b3447be4917f3de611a56543ebc781071c1bfbf\n Yep, just ran into this also. 403 forbidden. Looks like you have to authorize with authorize_url first before it will work.\n If automating the Dropbox login process is out, then perhaps using the new Local Storage option with the Linux Dropbox client would work.\n\nhttps://www.dropbox.com/downloading?os=lnx\n Confirmed - dropbox storage has also stopped working. Any idea on the best way to fix this / make the backup gem use dropbox gem version 1.3.0 (which includes the fix)\n I've just issued a pull request issue #174 which uses Dropbox 1.3.0 and stored/serialized OAuth credentials instead of e-mail password combos.\n\nIf anybody has a moment the code could use some eyeballs. It's late and I'm tired.\n if @coderjoe's fork has this bug solved, i'd be happy to close this issue\n  This patch allows me to split backups into multiple files if needed so that I can use remote storages that have maximum file sizes and I have a huge backup (S3, FAT-32, and Ext being prime examples).\n Looks interesting. As @tomash says though, please provide tests to cover this functionality.\n\nAlso, does it still record these multiple files to the YAML format (Backup::Storage::Object) so it can cycle and remove old backups from the remote locations? I don't have time to look in to it so if you could let me know that'd be great.\n\nCheers\n @tomash: Yes, the definitely should have tests. I suppose I was a bit overzealous with the pull request, but I wanted to share what I was working on.\n\n@meskyanichi: Indeed, the YAML serialization of the backups was broken in this branch. Taking a copy of \"backup_files\" and Array#shift'ing it ended up being destructive. So, I ended up having them only get defined once and Array#zip'ing \"local_files\" and \"remote_files\" as a more explicit way of mapping local to remote names.\n i'd merge this one, but it's quite a patch and i'd like @meskyanichi blessing before that.\n\n@jof, could you rebase to current master?\n  This patches Backup::Model and most of the Backup::Storage subclasses to support uploading more than one file to a remote destination.\n\nThis is a prerequisite for another branch of mine (jof-split_backups).\n so the idea is that we should merge #162 first and then #163 afterwards?\n  There exists a race condition where the GPG public key to be crypted to is written out, but if our backup.rb-running user has a permissive umask for file creation, a malicious user could overwrite the key before the key is imported.\n\nThis just chowns and chmods the temporary file to be more restrictive to prevent this.\n  Hey Guys,\n\nOK. So I ended up rewriting the \"local backups\" code and moving it into the Rsync storage class. Things seem to be working well on OSX and our CentOS servers. I also did my best to update the spec tests accordingly, although it might be worth glancing over my changes.\n\nIf this pull request gets accepted, I'll add the information into the Wiki.\n\nI think the result is quite graceful:\n\n```\nBackup::Model.new(:example, 'Example') do\n\n  # \n  # ##\n  # # RSync [Storage]\n  # #\n  store_with RSync do |server|\n    server.local    = true \n    server.path     = '/path/to/local/backups/'\n  end\n\nend\n```\n\nLet me know if you have any questions or problems. If accepted, this will be my first Github pull request, so I'm sorry if anything is out of sorts.\n @tomash thanks!\n\nThis seems like a good addition. Where does the mkdir() method come from though? Does it come from FileUtils? If so then you might want to use mkdir_p() instead since it'll raise an exception if it's a directory tree that doesn't exist.\n\nIf this works though, feel free to pull it, @tomash\n\nCheers.\n Looks like mkdir is taken from cli.rb\n\n```\n##\n# Wrapper method for FileUtils.mkdir_p to create directories\n# through a ruby method. This helps with test coverage and\n# improves readability\ndef mkdir(path)\n  FileUtils.mkdir_p(path)\nend\n```\n\nI didn't write any tests for local directory creation. I wasn't sure if it was needed as this is a built in Ruby method and I also figured that mkdir was probably already being tested elsewhere.\n Ah pardon, yes, looks good then! Thanks :)\n That brings me great happiness. First official pull request :-D\n  Hi,\n\nmy network setup only allows FTP with passive mode. I implemented this in my fork. Feel free to pull.\n\nBy the way, this is my first pull request on Github. Not sure I did it right ;-) Just let me know if you'd like me to change things before you pull.\n\nCheers,\nSimon\n  I needed an easy to to store local backups for some of our client work. Maybe there is a better way to do this, but I ended up adding an option to the Archive class. It looks like this:\n\n```\narchive :archive do |archive|\n    archive.local true\n    archive.add '/directory/to/save/'\nend\n```\n\nIf the local option is true, Backup will save a timestamped .tar archive into:\n\n```\nFile.join(DATA_PATH, TRIGGER, 'archive', \"#{TIME}.#{name}.tar\")\n\n#=> /data/triggername/2011.06.29.15.50.38.archive.tar\n```\n\n**note:** The local option does not support gzipping at the moment, I'll look into adding it soon though.\n**also:**  I could use some help writing the tests, I'm still learning.\n\nLet me know if there are any questions/concerns,\nKindly,\nEmerson\n Going to rework this in a more intelligent way. Maybe I'll use Rsync to handle local backups instead of Archive.\n Went the rsync route and it seems to be working fine. I'll try to write up some tests, although I'm still pretty new to that world. I want to learn :-D\n  Hey Everyone,\n\nUsing 3.0.16 with Ruby 1.9.2 on Mac OSX (10.6) and I'm having some issues with the Archive functionality. Specifically, everything works perfectly, and my archive is copied into my .tmp folder... but then it is deleted.\n\nI'm assuming it's supposed to be copied out during the \"cleanup\" process. Any idea why this isn't happening? Thanks for any help...\n To clarify, I'm actually just trying to save some timestamped assets onto the local disk. For some reason I assumed the Archive option would allow this, but I could be mistaken.\n Yeah, I actually ended up writing it myself. I have a small fix I need to do this week, but as far as I know, the gem is still working well on my production box.\n  I got some dep-warnings:\n\n`warning: 'smtp' is deprecated; use 'via_options' instead.\nwarning: 'tls' is deprecated; use 'enable_starttls_auto' instead.\nwarning: 'user' is deprecated; use 'user_name' instead.\nwarning: 'auth' is deprecated; use 'authentication' instead.\nwarning: 'host' is deprecated; use 'address' instead.`\n\nafter updating my config file, I get errors like:\n\n`undefined method 'enable_starttls_auto' for #<Backup::Configuration::SMTP:0x7fdb9b4976d0> (NoMethodError)\nundefined method 'address' for #<Backup::Configuration::SMTP:0x7f8665da5690> (NoMethodError)`\n\nbackup (2.4.5.1)\n  Switching from backup 2.4.0 to 3.0.4 I now get an error when writing to S3. Region eu-west-1\n# \n\nException that got raised:\n# Excon::Errors::SocketError - Broken pipe \n\n/usr/lib/ruby/1.8/openssl/buffering.rb:179:in `syswrite'\n/usr/lib/ruby/1.8/openssl/buffering.rb:179:in`do_write'\n/usr/lib/ruby/1.8/openssl/buffering.rb:193:in `write'\n/usr/lib/ruby/gems/1.8/gems/excon-0.6.3/lib/excon/connection.rb:157:in`request'\n/usr/lib/ruby/gems/1.8/gems/fog-0.7.2/lib/fog/core/connection.rb:20:in `request'\n/usr/lib/ruby/gems/1.8/gems/fog-0.7.2/lib/fog/storage/aws.rb:323:in`request'\n/usr/lib/ruby/gems/1.8/gems/fog-0.7.2/lib/fog/storage/requests/aws/put_object.rb:43:in `put_object'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/storage/s3.rb:82:in`transfer!'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/storage/s3.rb:55:in `perform!'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/model.rb:222:in`perform!'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/model.rb:222:in `each'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/model.rb:222:in`perform!'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/bin/backup:109:in `perform'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/bin/backup:88:in`each'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/bin/backup:88:in `perform'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in`send'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/invocation.rb:118:in`invoke_task'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/base.rb:389:in`start'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/bin/backup:267\n/usr/bin/backup:19:in `load'\n# /usr/bin/backup:19\n\nYou are running Backup version \"3.0.16\" and Ruby version \"1.8.7 (patchlevel 302)\" on platform \"x86_64-linux\".\n It looks like it's trying to use fog 0.7.2. The minimum version required for backup 3 looks to be 0.8.2. Try running \n\n`backup dependencies --install fog`\n That's the one it specified and installed itself ''~> 0.7.0'' \n Weird, because https://github.com/meskyanichi/backup/blob/develop/lib/backup/dependency.rb specifies \">= 0.8.2\". @meskyanichi?\n That is the development branch. I just installed through 'gem install backup' and got master with a ~> 0.7.0 dependency.\n\nI just installed from development branch and got the same result:\n\n`Exception that got raised:\n\n# Excon::Errors::SocketError - Broken pipe \n\n/usr/lib/ruby/1.8/openssl/buffering.rb:179:in `syswrite'\n/usr/lib/ruby/1.8/openssl/buffering.rb:179:in`do_write'\n/usr/lib/ruby/1.8/openssl/buffering.rb:193:in `write'\n/usr/lib/ruby/gems/1.8/gems/excon-0.6.3/lib/excon/connection.rb:157:in`request'\n/usr/lib/ruby/gems/1.8/gems/fog-0.8.2/lib/fog/core/connection.rb:20:in `request'\n/usr/lib/ruby/gems/1.8/gems/fog-0.8.2/lib/fog/storage/aws.rb:329:in`request'\n/usr/lib/ruby/gems/1.8/gems/fog-0.8.2/lib/fog/storage/requests/aws/put_object.rb:43:in `put_object'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/storage/s3.rb:82:in`transfer!'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/storage/s3.rb:55:in `perform!'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/model.rb:222:in`perform!'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/model.rb:222:in `each'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/lib/backup/model.rb:222:in`perform!'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/bin/backup:120:in `perform'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/bin/backup:99:in`each'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/bin/backup:99:in `perform'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in`send'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/invocation.rb:118:in`invoke_task'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/usr/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/base.rb:389:in`start'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.16/bin/backup:278\n/usr/bin/backup:19:in `load'\n\n# /usr/bin/backup:19\n\nYou are running Backup version \"3.0.16\" and Ruby version \"1.8.7 (patchlevel 302)\" on platform \"x86_64-linux\".\n Hi guys,\n\nI've also had this issue a few times in some of my backups. I'm backing up daily and once in a while I get this error. Any idea what might be causing it?\n\nAnyway most of the times the backup works. I think that most of the times it fails is with a database with 400MB of size. I wonder if it is because of the size?\n\nCheers!\n Hi Michael, \n\nthanks for your reply, I'll keep an eye on this, and will update as soon as the new gem is out.\n I have this issue. \n\nHere is the trace\n\n# \n\nException that got raised:\n\n# Excon::Errors::SocketError - Broken pipe\n\n/usr/local/lib/ruby/site_ruby/1.9.1/openssl/buffering.rb:292:in `syswrite_nonblock'\n/usr/local/lib/ruby/site_ruby/1.9.1/openssl/buffering.rb:292:in`write_nonblock'\n/usr/local/lib/ruby/gems/1.9.1/gems/excon-0.7.6/lib/excon/socket.rb:81:in `write'\n/usr/local/lib/ruby/gems/1.9.1/gems/excon-0.7.6/lib/excon/connection.rb:172:in`request'\n/usr/local/lib/ruby/gems/1.9.1/gems/fog-1.0.0/lib/fog/core/connection.rb:20:in `request'\n/usr/local/lib/ruby/gems/1.9.1/gems/fog-1.0.0/lib/fog/aws/storage.rb:366:in`request'\n/usr/local/lib/ruby/gems/1.9.1/gems/fog-1.0.0/lib/fog/aws/requests/storage/put_object.rb:43:in `put_object'\n/usr/local/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/storage/s3.rb:82:in`transfer!'\n/usr/local/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/storage/s3.rb:55:in `perform!'\n/usr/local/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/model.rb:222:in`block in perform!'\n/usr/local/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/model.rb:222:in `each'\n/usr/local/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/model.rb:222:in`perform!'\n/usr/local/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:130:in `block in perform'\n/usr/local/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:109:in`each'\n/usr/local/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:109:in `perform'\n/usr/local/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/task.rb:22:in`run'\n/usr/local/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/usr/local/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor.rb:263:in`dispatch'\n/usr/local/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n/usr/local/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:288:in`<top (required)>'\n/usr/local/bin/backup:19:in `load'\n\n# /usr/local/bin/backup:19:in `<main>'\n\nYou are running Backup version:\n3.0.19\n\nYou are running Ruby version:\n1.9.2 (patchlevel 180)\n\nOn platform:\nx86_64-linux\n i also had this warning \n\n[WARNING] fog: the specified s3 bucket name(da-backup/backups) is not a valid dns name, which will negatively impact performance.  For details see: http://docs.amazonwebservices.com/AmazonS3/latest/dev/BucketRestrictions.html\n I'm running into this still with backup 3.0.20, fog 1.1.2, and ruby 1.9.2p290. It also appears that backup 3.0.17 that was cited as having a fix was since yanked from rubygems.org.\n\n**Edit**: I also tried with fog 0.11.0 that was listed as the minimal version, and 1.0.0, with the same result. I also confirmed the tarball getting upload only clocked in at 4M, well below the limit.\n\n**Edit2**: It turned out to be a misconfigured bucket, or rather, that the configured bucket didn't exist. So, looks like this is another case of S3 and/or fog being pretty picky without specifying what's wrong.\n I had a similar problem and the issue was that I had accidentally missed a character in my S3 credentials. Kind of a crummy error message to match that problem, but at least this thread helped me figure it out.\n  I implemented multipart upload function that using fog library.\nhttps://github.com/meskyanichi/backup/issues/120\n Did this get merged in? Can't find the commit.\n +1\n  Is there any technical reason why backup can't work with the 0.8 series of the \"fog\" gem? Just noticed that backup complains for recent versions of fog:\n\n```\nDependency missing. Please install fog version ~> 0.7.0 and try again.\n```\n The Fog dependency hasn't been updated since it was added because everything still works. Any particular reason it should be updated though?\n No problem either way. Is there a possibility of making fog an explicit dependency so that I don't need to put a specific version of fog in my Gemfile?\n\nOn 2011-06-04, at 8:19 PM, meskyanichireply@reply.github.com wrote:\n\n> The Fog dependency hasn't been updated since it was added because everything still works. Any particular reason it should be updated though?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/139#comment_1301258\n Explicit in the sense that when you install the backup gem that it automatically installs fog as well?\n\nNo, sorry, because that would mean we'd have to do it for all the other dependencies as well. Here's a list of our dependencies:\n\n```\nfog\n--------------------------------------------------\nversion:       ~> 0.7.0\nlib required:  fog\nused for:      Amazon S3, Rackspace Cloud Files (S3, CloudFiles Storages)\n\ndropbox\n--------------------------------------------------\nversion:       ~> 1.2.3\nlib required:  dropbox\nused for:      Dropbox Web Service (Dropbox Storage)\n\nnet-sftp\n--------------------------------------------------\nversion:       ~> 2.0.5\nlib required:  net/sftp\nused for:      SFTP Protocol (SFTP Storage)\n\nnet-scp\n--------------------------------------------------\nversion:       ~> 1.0.4\nlib required:  net/scp\nused for:      SCP Protocol (SCP Storage)\n\nnet-ssh\n--------------------------------------------------\nversion:       ~> 2.1.3\nlib required:  net/ssh\nused for:      SSH Protocol (SSH Storage)\n\nmail\n--------------------------------------------------\nversion:       ~> 2.2.15\nlib required:  mail\nused for:      Sending Emails (Mail Notifier)\n\ntwitter\n--------------------------------------------------\nversion:       ~> 1.1.2\nlib required:  twitter\nused for:      Sending Twitter Updates (Twitter Notifier)\n\nhttparty\n--------------------------------------------------\nversion:       ~> 0.7.4\nlib required:  httparty\nused for:      Sending Http Updates\n\njson\n--------------------------------------------------\nversion:       ~> 1.5.1\nlib required:  json\nused for:      Parsing JSON for HTTParty\n```\n\nIf we'd have to add all that then it'd add a lot of unnecessary bloat, high memory consumption and perhaps even conflicts when bundled with other applications even if you don't need the gem (this was the case with Backup 2) You probably dont need httparty, net-ssh, net-scp net-sftp, dropbox etc but all of that would be included as well.\n\nSo for this reason I removed hard dependencies and added my own little dependency manager to ensure you'll be up and running with only the necessary gems.\n Sure, understand your reasoning. I only mentioned it because it wasn't a \"smooth\" update when I did a \"bundle update\", as I rely on fog (without a version specified) for a few other gems as well, and backup requires ~> 0.7.0 but of course bundler doesn't know that, so backup complains at run-time.\n\nNot sure if there's another way around it other than putting an explicit version in my Gemfile - might be worth adding to the Readme? As anyone using \"gem 'fog'\" is going to be broken as of now...\n Maybe setting the dependency to fog >= 0.7 would be better in this case.\n\n## \n\nMichael van Rooijen\nhttp://twitter.com/#!/meskyanichi\nhttps://github.com/meskyanichi\n\nOn Sunday, June 5, 2011 at 1:25 AM, brady8 wrote:\n\n> Sure, understand your reasoning. I only mentioned it because it wasn't a \"smooth\" update when I did a \"bundle update\", as I rely on fog (without a version specified) for a few other gems as well, and backup requires ~> 0.7.0 but of course bundler doesn't know that, so backup complains at run-time.\n> \n> Not sure if there's another way around it other than putting an explicit version in my Gemfile - might be worth adding to the Readme? As anyone using \"gem 'fog'\" is going to be broken as of now...\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/139#comment_1303043\n ## That would be great, but didn't want to suggest as such in case there's a real reason that fog 0.8.x breaks backup (or visa versa)... but I really doubt that. Thanks for your attention on this issue!\n\nBraden (Brady) Bouchard\nbrady@ldawn.com\nlunardawn studios\n\nOn 2011-06-05, at 9:27 AM, meskyanichi wrote:\n\n> Maybe setting the dependency to fog >= 0.7 would be better in this case.\n> \n> ## \n> \n> Michael van Rooijen\n> http://twitter.com/#!/meskyanichi\n> https://github.com/meskyanichi\n> \n> On Sunday, June 5, 2011 at 1:25 AM, brady8 wrote:\n> \n> > Sure, understand your reasoning. I only mentioned it because it wasn't a \"smooth\" update when I did a \"bundle update\", as I rely on fog (without a version specified) for a few other gems as well, and backup requires ~> 0.7.0 but of course bundler doesn't know that, so backup complains at run-time.\n> > \n> > Not sure if there's another way around it other than putting an explicit version in my Gemfile - might be worth adding to the Readme? As anyone using \"gem 'fog'\" is going to be broken as of now...\n> > \n> > ## \n> > \n> > Reply to this email directly or view it on GitHub:\n> > https://github.com/meskyanichi/backup/issues/139#comment_1303043\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/139#comment_1303044\n I guess since it's an API thing, it's probably best to have the latest version since if Amazon or Rackspace change their API, Fog must also update their calls. I'll let you know what i do. Thanks!\n Well. I think the Fog gem had to be updated cause it was throwing exceptions in Backup 3.0.16. When I updated the Fog gem to the latest version it just worked. I'll be updating the dependency for the next release!\n ## Glad to hear it, thanks!\n\nBraden (Brady) Bouchard\nbrady@ldawn.com\nlunardawn studios\n\nOn 2011-06-05, at 9:27 PM, meskyanichi wrote:\n\n> Well. I think the Fog gem had to be updated cause it was throwing exceptions in Backup 3.0.16. When I updated the Fog gem to the latest version it just worked. I'll be updating the dependency for the next release!\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/meskyanichi/backup/issues/139#comment_1304224\n ```\nTrying to install the fog gem for you.. please wait.\nOnce installed, retry the backup procedure.\n\nSuccessfully installed fog-0.7.2\n1 gem installed\n```\n\nA gem shouldn't be making assumptions about how I handle my dependencies. In my case, having run this on my development machine, under rvm and bundler, I can't even find where this gem was installed to. Seriously, this infuriates me. \n This looks like it's been fixed in https://github.com/meskyanichi/backup/commit/5d80880d7c2d3fe8db9847f5287ba8e658e74686\n ``` ruby\nt@k:~/rails/ausfahrt6$ backup perform --trigger db_backup --config_file config/backup.rb\n[2011/10/21 12:09:38][error] Dependency missing.\n\nDependency required for:\n\n  Amazon S3, Rackspace Cloud Files (S3, CloudFiles Storages)\n\nTo install the gem, issue the following command:\n\n  gem install fog -v '>= 0.11.0'\n\nPlease try again after installing the missing dependency.\n```\n\n``` ruby\nt@k:~/rails/ausfahrt6$ sudo gem install fog -v '>=0.11.0' --no-ri --no-rdoc\n```\n\n``` ruby\nt@k:~/rails/ausfahrt6$ gem list | grep fog\nfog (1.0.0)\n```\n\n``` ruby\nt@k:~/rails/ausfahrt6$ backup perform --trigger db_backup --config_file config/backup.rb\n[2011/10/21 12:14:35][error] Dependency missing.\n\nDependency required for:\n\n  Amazon S3, Rackspace Cloud Files (S3, CloudFiles Storages)\n\nTo install the gem, issue the following command:\n\n  gem install fog -v '>= 0.11.0'\n\nPlease try again after installing the missing dependency.\n```\n\nhuh?  anyone help`\n Are you using rvm and/or bundler? There might be bundle or gemset trickery going on.\n bundle, ubuntu 10.10\n with bundle exec it works, but i get dependency fail for mail. i need mail 2.3 and rails require mail 2.2.x\n Looks like the dependencies (see https://github.com/meskyanichi/backup/blob/develop/lib/backup/dependency.rb#L49-53) require mail 2.3. Rails 3.1.1 installs that version, but older versions of rails apparently need mail 2.2.x.\n\nWhat happens if you try installing both versions of mail?\n i have both version installed, but the error also appears. i updated the gem to 2.3 and then rails fail, because it required 2.2\n on another project it seems like i get it running but\n\n``` ruby\nt@k:~/rails/bankrollking$ bundle exec backup perform -t backup -c 'config/backup.rb'\n[2011/10/22 16:25:37][message] Performing backup for Bankrollking.com!\n[2011/10/22 16:25:37][message] Backup::Archive started packaging and archiving \"/var/www/testfiles\".\n[2011/10/22 16:25:37][message] Backup started cleaning up the temporary files.\n===========================================================================\nException that got raised:\nBackup::Exception::CommandFailed - Failed to run \"tar\" on \"x86_64-linux\".\nThe status code returned was pid 9020 exit 2\nSTDOUT was:\nSTDERR was:\n\n===========================================================================\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/cli.rb:100:in `raise_if_command_failed!'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/cli.rb:34:in `run'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/archive.rb:52:in `perform!'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/model.rb:218:in `block in perform!'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/model.rb:218:in `each'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/lib/backup/model.rb:218:in `perform!'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:130:in `block in perform'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:109:in `each'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:109:in `perform'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n/usr/local/ruby/lib/ruby/gems/1.9.1/gems/backup-3.0.19/bin/backup:288:in `<top (required)>'\n/usr/local/ruby/bin/backup:19:in `load'\n/usr/local/ruby/bin/backup:19:in `<main>'\n===========================================================================\n\nYou are running Backup version \"3.0.19\" and Ruby version \"1.9.2 (patchlevel 0)\" on platform \"x86_64-linux\".\nIf you've setup a \"Notification\" in your configuration file, the above error will have been sent.\nt@k:~/rails/bankrollking$ \n\n```\n\n``` ruby\nBackup::Model.new(:backup, 'Bankrollking.com') do\n\n  archive :files do |archive|\n    archive.add '/var/www/testfiles'\n  end\n\n\n\n  store_with S3 do |s3|\n    s3.access_key_id      = 'my_access_key_id'\n    s3.secret_access_key  = 'my_secret_access_key'\n    s3.region             = 'us-east-1'\n    s3.bucket             = 'bucket-name'\n    s3.path               = '/path/to/my/backups'\n    s3.keep               = 10\n  end\n\n  compress_with Gzip do |compression|\n    compression.best = true\n    compression.fast = false\n  end\n\nend\n\n```\n I get the same error with my last backup.\n\n`Backup::Exception::CommandFailed - Failed to run \"tar\" on \"x86_64-linux\".`\n I am also receiving the 'Failed to run \"tar\" on \"x86_64-linux\".' error:\n\nAny thoughts?\n\n<pre>\nubuntu@domU-12-31-39-09-F6-9B:~$ /[path]/.rvm/gems/ruby-1.9.2-p290/bin/backup perform -t production -c /[path]/Backup/hourly_config.rb\n[2011/10/28 04:03:32][message] Performing backup for ....\n[2011/10/28 04:03:32][message] Backup::Database::MongoDB started dumping and archiving ....\n[2011/10/28 04:03:33][message] Backup::Archive started packaging and archiving ....\n[2011/10/28 04:03:33][message] Backup started cleaning up the temporary files.\n[2011/10/28 04:03:33][message] Backup::Notifier::Mail started notifying about the process.\n===========================================================================\nException that got raised:\nBackup::Exception::CommandFailed - Failed to run \"tar\" on \"x86_64-linux\".\nThe status code returned was pid 700 exit 2\nSTDOUT was:\nSTDERR was:\n\n===========================================================================\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/lib/backup/cli.rb:100:in `raise_if_command_failed!'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/lib/backup/cli.rb:34:in `run'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/lib/backup/archive.rb:52:in `perform!'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/lib/backup/model.rb:218:in `block in perform!'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/lib/backup/model.rb:218:in `each'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/lib/backup/model.rb:218:in `perform!'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/bin/backup:130:in `block in perform'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/bin/backup:109:in `each'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/bin/backup:109:in `perform'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n/[path]/.rvm/gems/ruby-1.9.2-p290/gems/backup-3.0.19/bin/backup:288:in `<top (required)>'\n/[path]/.rvm/gems/ruby-1.9.2-p290/bin/backup:19:in `load'\n/[path]/.rvm/gems/ruby-1.9.2-p290/bin/backup:19:in `<main>'\n===========================================================================\n\nYou are running Backup version \"3.0.19\" and Ruby version \"1.9.2 (patchlevel 290)\" on platform \"x86_64-linux\".\nIf you've setup a \"Notification\" in your configuration file, the above error will have been sent.\n\n</pre>\n Thanks for that - my problem was that the directory I was trying to backup no longer exists. Output certainly helped!\nFeeling < brilliant though!\n I completely understand that automatically pulling in all 9-ish dependencies (see https://github.com/meskyanichi/backup/issues/139#issuecomment-1301446) is a bad idea. Still, I find the dependency handling of backup broken. If a project needs a gem for part of the backup procedure, it's a dependency of the project (or, alternatively, a dedicated satellite project for backing up), and that should be reflected in the (at least, some) Gemfile, explicitly or implicitly by having backup depend on the needed gems. The current handling fights the framework, duplicates functionality for which there already exists a good tool (bundler) and introduces friction in the dependency management process. It forces me to solve dependency issues by hand or interfere with the deployment process heavily if I want to consider backing up a deployment as part of the project.\n\nOther projects solve this by splitting up into a core project and a handful of provider gems which pull in the individual dependencies. Users would be forced then to explicitly depend on, say, backup and backup-s3 if they need the s3 method, and this would depend on fog and nothing else (oversimplifying quite a bit here).\n\nI have found no place where this has been discussed before, maybe I missed it. I really would like to see this adressed, but I wouldn't bother filing a separate issue if I'm the only one having these needs.\n  I've implemented feature #136. \n\nTested against all 3 Rubies and working.\n Great, this will make it for Backup 3.1 which I'll be releasing quite soon as I finish cleaning up the issue log! Thanks!\n Thanks.\n\nBtw It would be great to have spec to BackupCLI.\n I had same idea yesterday. Create CLI class and test it directly. I think that is best way to do it.\nIf you need to fake filesystem there is fakefs gem.\n @meskyanichi - http://hectcastro.me/2011/10/25/testing-command-line-applications-with-aruba.html\nanother way how to do it\n  Hi,\n\nI'm trying to rsync some directory to my backup server and I'm getting following error message when running the backup.\nMy command:\n\n```\nbackup perform -t images_backup\n```\n\nAnd the error:\n\n```\n[2011/05/25 16:36:27][message] Performing backup for Images Backup!\n[2011/05/25 16:36:27][message] Backup::Syncer::RSync started syncing '/my/images'.\nThe --password-file option may only be used when accessing an rsync daemon.\nrsync error: syntax or usage error (code 1) at main.c(1259) [sender=3.0.7]\n```\n\nHere is my backup config:\n\n```\nBackup::Model.new(:images_backup, 'Images Backup') do\n    sync_with RSync do |rsync|\n        rsync.ip        = \"my.correct.backup.ip\"\n        rsync.port      = 22\n        rsync.username  = \"user\"\n        rsync.password  = \"password\"\n        rsync.path      = \"~/backups/images\"\n        rsync.mirror    = true\n        rsync.compress  = true\n\n        rsync.directories do |directory|\n            directory.add \"/my/images\"\n        end\n    end\nend\n```\n\nPlease let me know if I'm doing something wrong.\n\nThanks,\nMarek\n As addition, when I run the rsync command manually, it works, please see the command below:\n\n```\nrsync -e ssh -av /my/images user@my.correct.backup.ip:backups/images\n```\n\nThanks,\nMarek\n Hi,\n\nI'm using password - I specify my password in here:\n    rsync.password = \"password\"\nI thought this setting is just my backup server user's password... With this setting the backup will not ask me for password every time or am I wrong?\n\nThanks,\nMarek\n OK, I removed the line:\n\n```\nrsync.password = \"password\"\n```\n\nit works now, but now it asks for password...\nHow can I set it up to run using whenever and cron without providing the password? Is SSH key the only way?\nThanks,\nMarek\n OK, I'm closing the issue, I set up SSH key and it is working fine.\n\nThanks,\nMarek\n  I do not want to receive an e-mail on success, but I can not turn them off. This is my configuration:\n\n```\nnotify_by Mail do |mail|\n  mail.on_failure           = true\n  mail.on_success           = false\n\n  mail.from                 = \"mail@example.com\"\n  mail.to                   = \"mail@example.com\"\n  mail.address              = \"smtp.example.com\"\n  mail.port                 = 25\n  mail.domain               = \"example.com\"\n  mail.user_name            = \"mail@example.com\"\n  mail.password             = \"secret\"\n  mail.authentication       = \"login\"\n  mail.enable_starttls_auto = false\nend\n```\n\nAfter every successful Backup I receive the on_success mail  with the subject \"[Backup::Succeeded] Daily Backup (daily)\". \n\nThis is the output when I start the backup form the command line instead of cron:\n\n```\n$ backup perform -t daily\n[2011/05/25 13:59:50][message] Performing backup for Daily Backup!\n[2011/05/25 13:59:50][message] Backup::Database::MySQL started dumping and archiving \"diana\".\n[2011/05/25 13:59:50][message] Backup::Archive started packaging and archiving \"/home/diana/www/shared/system\".\n[2011/05/25 13:59:50][message] Backup::Archive started packaging and archiving \"/home/diana/www/shared/log\".\n[2011/05/25 13:59:50][message] Backup started packaging everything to a single archive file.\n[2011/05/25 13:59:50][message] Backup::Compressor::Gzip started compressing the archive.\n[2011/05/25 13:59:51][message] Backup::Storage::Dropbox started transferring \"2011.05.25.13.59.49.daily.tar.gz\".\n[2011/05/25 14:00:04][message] Backup started cleaning up the temporary files.\n[2011/05/25 14:00:04][message] Backup::Notifier::Mail started notifying about the process.\n```\n\nI tried leaving out the mail.on_success line with no luck. This is my only notifier.\n I forgot: I use Backup 3.0.15\n This is really strange. I am unable to reproduce your error on Ruby 1.9.2, 1.8.7 and REE. Also the RSpec tests are all passing regarding this issue and it seems they are all properly written.\n\nMy output is simply this:\n\n```\nMichael:develop ~/Desktop/backup\n\u2192 ./bin/backup perform -t my_backup\n[2011/06/03 14:56:55][message] Performing backup for My Backup!\n[2011/06/03 14:56:55][message] Backup::Archive started packaging and archiving \"/Users/Michael/Desktop/somefile.mdown\".\n[2011/06/03 14:56:55][message] Backup started packaging everything to a single archive file.\n[2011/06/03 14:56:55][message] Backup started cleaning up the temporary files.\n```\n\nIt doesn't attempt to send me a message when `on_success = false` and it does work when I set it to `true`.. So this is really odd.\n Thank you! I still get the emails daily, but I have gotten used them :-)\n  would you be open to adding 'nice' in Backup::CLI#run?  some of the commands can really peg the CPU, and on large files or datasets, they are not quick.  making it as low a priority as possible would be helpful for cases where a separate backup machine isn't feasible (like backing up log files from a web-app server)\n\nif you are ok with that, I'll submit a patch.\n sure.  So in Backup::CLI#run, you would replace:\n    output = %x[#{command}]\nwith \n    output = %x[nice -n 20 #{command}]\n\nthat will put it at the lowest priority.  Unfortunately there is not a way to say only use upto 20% of a cpu, or 15% of disk IO (well, there is, but I believe that util is only available on debian).  Nice is a general way to allow other processes, if they come into contention, to take precedence.  And it is old, so all unix systems should have it.\n\nwhat ya think?\n Interesting. Think you could come up with a pull request for that (making it optional of course, and having it off by default)? This seems like a nice addition for large backups and heavy traffic applications.\n Hey,\n\nwhy would you _not_ want this to be on by default?  If there is not much going on it will take as much CPU as possible but the moment there are other processes requesting CPU it will throttle back (boy, I wish we could do the same with IO?)\n\nthe other reason I ask is from a practical model.  The way configuration are setup there is no Backup.config{&block) for general purpose configs and adding it to every model as an option doesn't always show up in the Backup::CLI mixin.\n\nif you are ok with it always running under nice I'll throw in a patch (and a test of course).\n Sounds reasonable. I'd say go ahead in that case. :)\n see #142\n  So I developed a script on my dev box (ubuntu 10.04) that will backup all the databases on the server (MySQL). But when I try to run the backup gem on the production server (ubuntu server 10.10), I get the following error:\n\n```\n/usr/lib/ruby/gems/1.9.1/gems/backup-3.0.15/lib/backup/finder.rb:25:in `instance_eval': uninitialized constant Backup::Model::MySQL (NameError)\n    from (eval):19:in `each'\n    from (eval):19:in `block in find'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.15/lib/backup/model.rb:110:in `instance_eval'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.15/lib/backup/model.rb:110:in `initialize'\n    from (eval):16:in `new'\n    from (eval):16:in `find'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.15/lib/backup/finder.rb:25:in `instance_eval'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.15/lib/backup/finder.rb:25:in `find'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.15/bin/backup:104:in `block in perform'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.15/bin/backup:88:in `each'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.15/bin/backup:88:in `perform'\n    from /usr/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n    from /usr/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n    from /usr/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n    from /usr/lib/ruby/gems/1.9.1/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n    from /usr/lib/ruby/gems/1.9.1/gems/backup-3.0.15/bin/backup:267:in `<top (required)>'\n    from /usr/bin/backup:19:in `load'\n    from /usr/bin/backup:19:in `<main>'\n```\n\nApart from the different versions of Linux, the only other difference I can see is that my dev box runs Ruby 1.9.2 and the production server run 1.9.1\n\nDoes anyone have any idea where to start looking? I've been searching the whole afternoon, but I just can't seem to get it right.\n\nMany thanks.\n here's a tip: don't use ruby 1.9.1. nobody uses it, it's not considered stable.\n\nand gods forbid you from using debian/ubuntu bundled ruby 1.9, it's terribly outdated. system ruby 1.8.7 and then rvm on top of that for all the other versions.\n @kukkuk the fact there's \"1.9.1\" in those gem paths doesn't mean you've got ruby 1.9.1 installed. Proof? Here:\n\n```\n\u2570\u2500$ find ~/.rvm -name 1.9.1 -type d                                                                                                   130 \u21b5\n/home/solnic/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1\n/home/solnic/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1\n/home/solnic/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1\n/home/solnic/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/vendor_ruby/1.9.1\n```\n\nGo and do ruby -v to make sure tho.\n good point, @solnic -- the gem paths remain in 1.9.2 as if it was 1.9.1.\n\nbut @kukkuk is using ubuntu 10.04, and (I'm using same ubuntu version as well) there the only provided 1.9.x rubies are 1.9.0.5-1ubuntu1 and 1.9.1.378-1.\n Wow. Thanks for all the feedback. I never realized that 1.9.1 was considered bad for my server's health. @tomash is right. I'm just using the ruby that comes with 10.04. I thought the fewer things I install on the server, the better.\n\nBut I guess today I'll be install rvm and 1.9.2. I'll report back as soon as I've done that.\n Ok. Installed RVM. Installed ruby 1.9.2. All working perfectly. Thanks for the input, people. Much appreciated.\n  I'm having a problem with my Redis db not being backed up and I can't figure out what's wrong.\nThis is my config:\n\n``` ruby\nBackup::Configuration::Storage::S3.defaults do |s3|\n  s3.region = 'us-east-1'\nend\n\nBackup::Configuration::Database::Redis.defaults do |db|\n  db.path         = '/home/rails/redis-dumps'\n  db.host         = 'localhost'\n  db.utility_path = '/usr/local/bin/redis-cli'\n  db.invoke_save  = true\nend\n\nBackup::Configuration::Compressor::Gzip.defaults do |compression|\n  compression.best = true\nend\n\nBackup::Configuration::Storage::S3.defaults do |s3|\n  s3.keep = 30\n  s3.path = ''\nend\n\nBackup::Model.new :backup, 'Backup' do\n  database Redis do |db|\n    db.name = 'redis-myapp'\n    db.port = 6380\n  end\n\n  store_with S3 do |s3|\n    s3.bucket            = 'mybucket'\n    s3.access_key_id     = 'secret'\n    s3.secret_access_key = 'secret'\n  end\n\n  compress_with Gzip\nend\n```\n\nand this is the output:\n\n```\n[2011/05/22 18:39:45][message] Performing backup for Backup!\n[2011/05/22 18:39:45][message] Backup::Database::Redis started dumping and archiving \"redis-myapp\".\n[2011/05/22 18:39:46][message] /usr/local/bin/redis-cli  -h 'localhost' -p '6380'  SAVE\nCould not connect to Redis at 127.0.0.1:6379: Connection refused\n[2011/05/22 18:39:46][message] Backup started packaging everything to a single archive file.\n[2011/05/22 18:39:46][message] Backup::Compressor::Gzip started compressing the archive.\n[2011/05/22 18:39:46][message] Backup::Storage::S3 started transferring \"2011.05.22.18.39.44.backup.tar.gz\".\n[2011/05/22 18:39:47][message] Backup started cleaning up the temporary files.\n```\n\nThe backed up file contains a Redis folder, but that folder is empty.\nI verified that the Redis dump file indeed lives in `/home/rails/redis-dumps` and is named `redis-myapp.rdb`.\nWhy does it try to connect to Redis on port 6379 even though I specified 6380 as the port? That connection attempt also happens when I set `db.invoke_save` to `false`.\nThe command `/usr/local/bin/redis-cli  -h 'localhost' -p '6380'  SAVE` works fine.\n Great, thanks! I also noticed that, most likely because of the connection attempt on port 6379, the whole backup command exits with a non-zero exit status.\n The error is happening because `db.utility_path` is being set. The Redis class is calling `utility(:cp)` in its `copy!` method, and `utility` is returning `/usr/local/bin/redis-cli` instead of the normal `cp` path, and hence the error. To debug this I added a Logger entry in the CLI#run method:\n\n```\n[2011/05/23 17:09:23][message] Performing backup for Backup!\n[2011/05/23 17:09:23][message] Backup::Database::Redis started dumping and archiving \"dump\".\n[2011/05/23 17:09:23][message] /usr/local/bin/redis-cli  -h 'localhost' -p '6380'  SAVE\n[2011/05/23 17:09:23][message] /usr/local/bin/redis-cli '/usr/local/var/db/redis/dump.rdb' '/Users/tsigo/Backup/.tmp/backup/Redis/dump.rdb'\nCould not connect to Redis at 127.0.0.1:6379: Connection refused\n[2011/05/23 17:09:23][message] Backup started packaging everything to a single archive file.\n[2011/05/23 17:09:23][message] /usr/bin/tar -c -f '/Users/tsigo/Backup/.tmp/2011.05.23.17.09.23.backup.tar' -C '/Users/tsigo/Backup/.tmp' 'backup'\n[2011/05/23 17:09:23][message] Backup::Compressor::Gzip started compressing the archive.\n[2011/05/23 17:09:23][message] /usr/bin/gzip --best '/Users/tsigo/Backup/.tmp/2011.05.23.17.09.23.backup.tar'\n[2011/05/23 17:09:23][message] Backup started cleaning up the temporary files.\n[2011/05/23 17:09:23][message] /bin/rm -rf '/Users/tsigo/Backup/.tmp/backup' '/Users/tsigo/Backup/.tmp/2011.05.23.17.09.23.backup.tar.gz'\n```\n Wow, thanks for investigating this bug so thoroughly, tsigo!\nmeskyanichi, do you think these errors are easy to fix?\n Actually, I was wrong about the last part of my comment, which I've removed. The sequence should complete successfully once we get rid of the redis-cli error.\n\nTry removing your `db.utility_path` assignment completely, which should remove the \"Could not connect\" error, and see if you get a valid backup file.\n It works without the `db.utility_path` when I execute the backup command from the command line.\nI had it packaged up in a Rake task, in which case it doesn't work because `redis-cli` cannot be found (that is why I added the `db.utility_path` in the first place).\nBut from the command line the backup works fine and it includes the Redis dump file.\n Ah. Yeah... for a Rake task and/or a Cron job you may want to just modify `$PATH` to include /usr/local/bin, so that `which` can find it.\n\nOn Backup's end, it might be best to just hard-code the `cp` path, since if that can't be found we probably have bigger problems. I'll wait to see what @meskyanichi thinks.\n Yeah, I think if you want to maintain the ability to customize the `redis-cli` path via `utility_path`, hard-coding the cp path is the easiest fix.\n\nOn the other hand I'm not entirely convinced this is an actual bug. As noted above, modifying the shell $PATH variable should fix the issue as well.\n I think I won't consider this a Backup issue since, as @tsigo pointed out, it's more an issue with load paths ($PATH). Try exporting (extending) the load path with the necessary paths prior to running the rake task. I think you can also do this from within the `.rake` file using `$:` or something.\n Also @manuelmeurer were you able to get it working at all now, by fixing the load paths and such?\n Yep, as long as I don't set the `utility_path`, it works fine.\n\nI don't really understand why you wouldn't consider the fact that backup tries to connect to Redis on a standard port when the `utility_path` is set a Backup bug, though. Sure, not setting it avoids the error, but the way it is used (see @tsigo's first comment) is incorrect, no?\n Whoops. Good catch.You're right.\n So I think we're back to hard-coding the `cp` path. I'll submit a pull request.\n  Hi, I am trying to use the backup gem in my rails 3 app. I have added it to my Gemfile and installed it, but when I try to run\n\nrails g backup\n\nI get:\n\nCould not find generator backup.\n\nI know the docs say Rails 3 is supported, but to what extent?\n\nRails  3.0.7 and Ruby 1.8.7\n\nTIA\n  I found problem with Archive#exclude on Ubuntu 10.04. In my environment it just ignored these definitions. So I've modified syntax to use multiple --exclude definitions instead. Spec modified too.\n\nTested on Ubuntu 10.04 and Mac OS X 10.6.\nGNU tar 1.22\nbsdtar 2.6.2\n Yes. Two tests checking tar archive command. I've modified them too. \n  In the [transfer! method](https://github.com/meskyanichi/backup/blob/develop/lib/backup/storage/s3.rb#L78) of the S3 storage, is there any reason why the exceptions are silently swallowed and followed by an exit() ?\n\nThis is (from my admittedly limited point of view) quite annoying because the notifiers and syncers won't be run, and the cleanup won't be done. I like neat and tidy things, one of my many faults :-) .\n I suppose that catching `Excon::Errors::NotFound` would be better then. I did a quick test and it looks like it's the one that's raised instead of `Excon::Errors::SocketError`.\n\nWould catching it, adding the message about checking the bucket existence and re-raising the exception be an acceptable solution?\n Looks fine to me, do you want a pull request for this? I know what it's like to be short on time, and every bit helps.\n  The [run method](https://github.com/meskyanichi/backup/blob/develop/lib/backup/cli.rb#L23) doesn't check the return code of the tar command.\n\nThis means an incomplete archive file (due to insufficient disk space or whatever) will get uploaded just fine and guarantees cries and tears when trying to restore your precious (but now useless) backup.\n The exit codes of tar are described here (bottom of the page): http://www.gnu.org/software/tar/manual/html_section/Synopsis.html\n\nI can try to dig up info about other commands if you're short on time, just tell me what info is needed.\n   Let me know if I can do anything to clean up the pull request\n Sorry for the long wait. I finally got my work-load out of the way and am now looking in to Backup's issue log.\n Your code-base looks very clean. Thanks for writing it up! Merging now.\n  I've installed backup successfully, but generator doesn't work.\n\n<pre><code>./script/generate backup\nCouldn't find 'backup' generator</pre><c/ode>\n\nIs this gem depends on Rails version or something?\nI've tried 2.3.8 and 2.2.2 and both failed.\n\nThanks in advance.\n Hi thanks for reply.\n\nOfcourse `backup generate` works fine, but I've read Wiki about [Getting Started(Ruby on Rails)](http://github.com/meskyanichi/backup/wiki/~-Backup-2%29-Getting-Started-%28Ruby-on-Rails%29) and want to manage back up with Capistrano and  Whenever.\nSo I need to create migration and rake task.\n\nAny suggestions?\n Oh I see. I'll try later.\nThanks for your help and information !\n  Amazon now supports multipart uploads, and we need a tool that supports syncing directories that contain files larger than 5.3GB.\n I have a 3TB+ directory tree that I want to sync to S3. Many of the files are larger than 5.3GB (Some upwards of 10GB). In the past I have used s3sync for directories with smaller files, but s3sync doesn't support multipart uploads for files larger than 5.3GB and it is no longer in active development. I have been searching for a replacement tool to handle this for a few days now, but most people still use s3sync. \n\nI had hoped that since backup was using fog, it might support the new larger 5TB filesize limit. (As I understand Fog supports multipart uploads). Currently the only options I believe are GUI based tools, or shipping drives to Amazon for import.\n Correction, I have found one command line tool that can do this, but it is written in java and requires Java 1.6. (Which doesn't come with OS X Tiger Server). The jets3t Java library comes with a sample synchronization.sh script, that supports the multipart uploads while syncing. More info here: http://jets3t.s3.amazonaws.com/applications/synchronize.html I am currently installing OpenJDK6 from macports at the moment and am going to try this, but I do still think \"backup\" needs to support this. (I would really prefer a ruby tool like backup to support this, since we already have ruby as a dependency in all of our environments.)\n\nUPDATE: OpenJDK6 fails to build on Tiger. I need to dig in further later.. \n Hi guys,\n\nI had a bit of code in my old backup2 fork.  I haven't moved this over, mostly because I can't test it, but it would look something like this (for backup/storage/s3.rb):\n\n```\nMAX_S3_FILE_SIZE = 5368709120 - 1\n##\n# Transfers the archived file to the specified Amazon S3 bucket\ndef transfer!\n  begin\n    Logger.message(\"#{ self.class } started transferring \\\"#{ remote_file }\\\".\")\n    store_files = []\n    local_file_path = File.join(local_path, local_file)\n    if File.stat(local_file_path).size >= MAX_S3_FILE_SIZE\n      #we need to split!\n      `split -b #{MAX_S3_FILE_SIZE}  #{local_path} #{local_path}.`\n      store_files += `ls  #{local_path}.*`.split\n      Logger.message(\"Splitting '#{local_file}' into #{store_files.length} parts as it is too large for s3.\")\n    else\n      store_files << local_file_path\n    end\n\n\n    connection.sync_clock\n    store_files.each do |tmp_file|\n      connection.put_object(\n        bucket,\n        File.join(remote_path, remote_file),\n        File.open(tmp_file)\n      )\n    end\n  rescue Excon::Errors::SocketError\n    puts \"\\nAn error occurred while trying to transfer the backup.\"\n    puts \"Make sure the bucket exists, and that you specified the correct bucket region.\\n\\n\"\n    puts \"The available regions are:\\n\\n\"\n    puts %w[eu-west-1 us-east-1 ap-southeast-1 us-west-1].map{ |region| \"\\s\\s* #{region}\" }.join(\"\\n\")\n    exit\n  end\nend\n```\n I just started using http://www.s3rsync.com/ and I'm happy about it. I've used S3sync before but reconsidered it after I got first bill from Amazon. I was backing up git repositories and s3sync made insane number of requests. S3rsync is efficent on both sides (compressed rsync transfer and saving output to s3 as multi tar)\n I sent pull request.\nPlease confirm it.\nhttps://github.com/interu/backup/commit/fef512d9f7d646858b56002c890c42be0b92a2ef\n Duplicate of #153.\n  Hi,\nI've tring to use backup but i've got this error \n\n> > backup perform --trigger lsv_bckp --config_file '/root/Backup/config.rb'\n\n[2011/05/11 22:28:09][error] Dependency missing. Please install fog version ~> 0.7.0 and try again.\n  gem install fog -v '~> 0.7.0'\nDependency required for:\n  Amazon S3, Rackspace Cloud Files (S3, CloudFiles Storages)\nTrying to install the fog gem for you.. please wait.\n\nIf i do : gem list --local \nI've got this list :\n\n**\\* LOCAL GEMS ***\n\nbackup (3.0.15)\nbuilder (3.0.0)\nexcon (0.6.3)\nfog (0.7.2)\nformatador (0.1.3)\njson (1.5.1)\nmime-types (1.16)\nnet-ssh (2.1.4)\nnokogiri (1.4.4)\nruby-hmac (0.4.0)\nthor (0.14.6)\n\nI don't understand why \"backup\" doesn't find fog 0.7.2....\n\nCould you help me ?\nthanks.\n I had the same problem with net-ssh and it was related with openssl that was not properly compiled into ruby. The way I discovered the problem was through irb trying to require 'net/ssh'.\n\nJuan.\n meskyanichi : I've installed ruby with  aptitude install ruby1.9.1-full\n jschwindt : I will try to follow tips on openssl bug and reinstall ruby with rvm... (http://cjohansen.no/en/ruby/ruby_version_manager_ubuntu_and_openssl)\n This is how it happened to me: I installed ruby 1.9.2 using RVM in a CentosOS 5 server where no openssl-devel package was installed. I had to remove ruby, yum install openssl-devel and finally re-install ruby through RVM.\n Hmm I don't think this will help with your situation because you are already using 0.7.2 but I also got this error when I was using fog 0.8.1. Once i specified version 0.7.2 in my gem file it worked.\n Ok, it'works !\nI've reinstalled ruby with rvm and follow instructions for openssl and reinstalled backup. \nThanks !\n  Using Backup 3.0.15 on Ubuntu 10.10 or OS X, I have the following exception when Backup tries to parse/import my public key:\n\n``` ruby\n===========================================================================\nException that got raised:\nNoMethodError - undefined method `match' for nil:NilClass \n===========================================================================\nbackup-3.0.15/lib/backup/encryptor/gpg.rb:73:in `extract_encryption_key_id!'\nbackup-3.0.15/lib/backup/encryptor/gpg.rb:42:in `perform!'\n==========================\n```\n\nYou are running Backup version \"3.0.15\" and Ruby version \"1.8.7 (patchlevel 253)\" on platform \"x86_64-linux\".\n\nThis is my the GPG part of my config:\n\n``` ruby\nencrypt_with GPG do |encryption|\n      encryption.key = <<-KEY\n        -----BEGIN PGP PUBLIC KEY BLOCK-----\n        Version: GnuPG v1.4.10 (GNU/Linux)\n\n        mQENBE3IU1IBCADCaG+j05D0xlGvujldM5RJp9j5reKu4oR78z96H9lKZa3iPwss\n        ssrWVJvvBd4xfYHR2p6GCyhAlISDdhh3OInhp9vZG+GtzOaHMtbS9XXeP8bKbuA5\n        VO0xifSgyaHeDTCwKah9e95X1Gb8vzfwmEVI39BE3wL906L+LBOCMNEbYXdu+EE2\n        t5RICOmPI59b/NVQbxo7msB1lVS8re7w5vBA1aawp7ZIj4YT7SJhaoOUhRf/tJfF\n        3WHNthn7F+Dy1nhw3hGgDX0C8q7a3oleLdNz950CkNxKHU8ja/627ysGb1f/oq9P\n        Tx6hMRMoL2RQsFIWPZCnP2YHriP0kKxXPOz9ABEBAAG0H0RhdmlkIFBpdG1hbiA8\n        ZGF2aWRAc3BvdHplLmNvbT6JATgEEwECACIFAk3IU1ICGwMGCwkIBwMCBhUIAgkK\n        CwQWAgMBAh4BAheAAAoJED2AMH3H7Odni+oIALd/Oi2C2jxAUr1+WulonUoxFpra\n        N8dyUSmtLym4g6w8PXUFDNKDnVEKi5D3L8J9ezKj5HWxGno/ywh226biY+ExygMA\n        u235Gb/yNMfqkRWz2rSpSeuLTV4qV5eQ0Tb6UW1g9n6MvzguIQ7GNMHpFz+GB9i9\n        7Snq13mvJTtpy2NAx0XzgIHmaB4NSWbXx2RDrpBUNzeCY1pNPRFRh++GRVSCo59j\n        q5cBhX28voW2xbQj3V4NHpbINanKrSnIivzM5Bs3ANeMh0isGLmgPJRfjoUBeBvh\n        +9kko+5v9ov5zS+GJn6TPjtKUnypQi8f8hbuToKcq4O1B+HqRL2Spu5fjjW5AQ0E\n        TchTUgEIAMJqNnYS3Ev8JMec7FWIhsFK2IYNy2fCrWsj+eYHCXkpYK0dAJ8P/Key\n        6AxM4ghL9J7NMBRzat/PZyMpDea8iKuZoKqiU2nUExhLXiCuZxgRKeEWxkqpcnmY\n        iPpZ3wxxQ8wJfc+W7Ut6biPp/GPbtt5dUMnkKdm9jFjV3q50LkKMI1AOhzyeI+fs\n        cJGTaa+T7z46/rFLdTzhR3n2qjTdHmSzfaoW8fNiEtFzcU+JNOwrWyzxu+GKoy98\n        vFB+mxLq5+Ax1WkjvxxQPMLg0ak6a2tuHbhETgt+IE7T+4HCBlA3Yasplcyt3lUN\n        IX/qyRV6+Z1nsV/0ktv6AOGpGh4ubw0AEQEAAYkBHwQYAQIACQUCTchTUgIbDAAK\n        CRA9gDB9x+znZ5vWCACinrnrmFHgOSX7z17cHmpwuGZB/HsBl493FzTYv6wfc5jj\n        p3L6/OUKeRfSfkO+oLP6HRKapTl2qKzI2n+L9LQyAY1zo995HzPXHzrVl9IyXkjX\n        4Yu5CEbS5xc3hbpMvrgBmxZ95U0dzqmb8YpgVY8Op9oiWmgtlQazyWxcaRmgspOl\n        9ELSEMsll739xPPZKq36LvfXtQ5ca5k5b6w3jJg14PM3Y22V5gjo2/Ev+o4VJntG\n        AU8F0qhZLZmaoCPHbV5l8zcEnPGdWwcU1KIlACU6ldhfoEBQXEhoAt17psZ24T68\n        1jXooJyvAmju+sLTdtkmJSZ1Cgt0+Mv9LfCSbJys\n        =2gOp\n        -----END PGP PUBLIC KEY BLOCK-----\n      KEY\n    end\n```\n\nI've reproduced the command that is executed on extract_encryption_key_id!' in IRB in both OSX (10.6 w/ GPG 1.4.11) and Ubuntu 10.10 (GPG 1.4.10)  and run into the same issue, so I am fairly confident the problem is in how the GPG output is being matched and not an empty tmp file. The GPG output looks like:\n\n```\ndpitman@durandal:~/$ gpg --import tmpfile \ngpg: key <key id>:<key name/email> not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1\n```\n the dev branch solved my issues!\n Thanks for pointing that out! @skippy\n I have the same issue with the following config:\n\"You are running Backup version \"3.0.18\" and Ruby version \"1.8.7 (patchlevel 334)\" on platform \"x86_64-linux\".\"\n\nHas the fix been merged to 3.0.18 or do I need to use the dev branch?\n This used to work for me on 3.0.21 on 1.9.2-p290, but now on 3.0.24 and 1.9.3-p194 it fails. I'm getting the exactly same behaviour as initially reported by @edave, so the gpg import statement tested on the command line passes. It seems there's a bug in the run method not returning any output so the mail extraction fails.\n @colszowka This was just recently fixed in #315\n  like the title says -- i've added support for bzip2 compressor. not a lot of work, the backup gem api is a pleasure to work with and bzip2 command has gzip-compatible syntax anyway.\n\nspecs pass, also tested in real life already.\n  I'm doing the usual drill after forking and before fiddling with actual code:\n\n```\nrvm use 187\nbundle install\nrspec spec/\n```\n\nAnd getting lots of failures and errors, whereas running directories/specs separately is green:\nhttps://gist.github.com/957184\n\nWhat am I doing wrong?\n nope, but haven't worked with that since my bzip2 pull request. it would be nice to have a test suite running as whole, though. were you able to reproduce?\n infinity_test? oooh, shiny! let me check...\n  This looks like an elegant tool, but how do we restore the backups created?  At the very least there should be a complete restore-and-compare function to test that the backup is being generated correctly, and that it can in fact be restored in production.\n\nA broader issue is how does this maintain consistency e.g. between databases and the file system?  Locking the database is problematic in practice and also does not solve the cross-database consistency. \n\nIt seems like it would be appropriate to use volume-level snapshotting to create a consistent target for backup to run against. Any chance of baking this into the gem since it would be a common requirement?   \n  Hi meskyanichi,\n\nI've changed the instruction of the generated file.\n\nbackup perform -t\n\ninstead of\n\nbackup -t\n\nThanks,\nJo\u00e3o Vitor Lacerda Guimar\u00e3es\n Thanks for you fast response. I'm going to remove my fork.\n  Hi meskyanichi,\n\nI've changed the default parameters used on pg_dump (--quick and --single-transaction are not valid)\n\nThanks,\nJo\u00e3o Vitor Lacerda Guimar\u00e3es\n Thanks for your fast response. I'm going to remove my fork.\n  This one is pretty obvious. I'd love to have other (as in: better than gzip) compression methods, namely bzip2 and lzma. Especially when backing up to S3 (which I do), which means charging for storage and transfer.\n\nMichael, are you working on it at the moment, or should I just do it myself and file a pull request? :)\n  Hi,\n\nI came across two bugs while setting up backup-3.0.15 in my app.\n\nFirstly, <code>Backup::CLI#run</code> did not return the output of the command, as expected in various other places (notably the GPG Encryptor module).\n\nSecondly, the GPG encryptor made use of a regex to strip initial whitespace from lines in the supplied key. This had the side-effect of completely removing any lines with only whitespace, breaking the gpg import command:\n\n```\nirb> \"     \\n\".gsub(/^(\\s|\\t)+/,'')\n=> \"\"\n```\n\nThe attached commits fix these issues. I've also altered the unit test for the GPG encryptor relating to the whitespace-stripping regex so that it doesn't use the same code as the section it's testing.\n\nHope this is of use...\n\nCheers,\nSimon\n  mongodump does not have a --port argument \nSee:\nhttp://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongodump\n\nI'm currently working around this issue by passing the port into the host param:\ndb.host    = \"somehost.com:27091\"\n\nOne side effect of this patch is that the host argument always gets a value. If no host is set the param is --host='localhost'\n\nI'm not sure if there is anything wrong with that but I thought I should be upfront about this change.\n I guess I'm running 1.2.2 which seems pretty old. I just installed with apt-get on ubuntu. It looks like there is an install guide for more recent releases: http://www.mongodb.org/display/DOCS/Ubuntu+and+Debian+packages\n\nI'm currently using Backup 3.0.14 successfully with my work-around (host = 'host:port') so no pressure to pull this patch in.\n\n```\n # mongo --version\n MongoDB shell version: 1.2.2\n # mongodump --help \n options:\n   --help                   produce help message\n   -h [ --host ] arg        mongo host to connect to\n   -d [ --db ] arg          database to use\n   -c [ --collection ] arg  collection to use (some commands)\n   -u [ --username ] arg    username\n   -p [ --password ] arg    password\n   --dbpath arg             directly access mongod data files in this path, \n                       instead of connecting to a mongod instance\n   -v [ --verbose ]         be more verbose (include multiple times for more \n                       verbosity e.g. -vvvvv)\n   -o [ --out ] arg (=dump) output directory\n```\n Cool, thanks for the help - i'm actually hosting mongo at mongohq so I just needed the mongodump utility on my install.\n\nI'll probably upgrade anyway.  Thanks for Backup, it rocks!\n  Hi,\n\nFirst, thanks for writing this gem; it's appreciated. I just wanted to point out a potential scenario with backing up MongoDB databases. From the MongoDB [backup page](http://www.mongodb.org/display/DOCS/Backups)\n\n\"A word of warning: it's not safe to back up the mongod data files (by default in /data/db/) while the database is running and writes are occurring; such a backup may turn out to be corrupt.  See the fsync option below for a way around that.\"\n\nThere's an [fsync](http://www.mongodb.org/display/DOCS/fsync+Command#fsyncCommand-Caveats) page which describes the command to use when backing up the db. It would probably be helpful to modify this backup gem to execute those commands in order to reduce that chance.\n\nI plan on creating a fork and trying to add those myself, but a bit of guidance in terms of the best place to make those additions would be helpful. Thanks in advance,\n\nMark\n I have an idea to make a special locking mongodump executable, which will be just a bash script wrapping mongodump with fsync&lock, and of course unlock after the actual dump. something like this scenario described here:\nhttp://www.snailinaturtleneck.com/blog/2010/07/26/mongodb-backups-corn-on-the-cob-in-10-minutes/\n\nmichael, are you open to pull requests with such features?\n @tomash @meskyanichi What about running the fsync command from Ruby itself. [Here's](http://api.mongodb.org/ruby/1.2.4/file.FAQ.html) an example from the Mongo Ruby FAQ.\n @trystant: it's not only about the fsync -- fsync guarantees you have the latest db state at the moment of starting the dump. to ensure the data won't change _while_ dumping, a lock must be issued.\n\nalso backup doesn't use any ruby gems for accesing the databases, it's a wrapper around commandline tools these dbs provide.\n\n@meskyanichi: i think the wrapped mongodump version should not be a default one, but one triggered by config -- like \"lock = true\" in db configuration block.\n @tomash Good points; whereas the lock command could be added, the fact that the gem calls out to system commands requires a wrapper around mongodump. Now, where to host the mongodump wrapper? Make it a separate script, or part of this backup gem?\n pretty simple, if you're in for some shell hacking. have two files, mongo_lock and mongo_unlock.\n\nmongo_lock:\n\n```\nuse admin\ndb.runCommand({'fsync' : 1, 'lock' : 1})\n```\n\nmongo_unlock:\n\n```\nuse admin \ndb.$cmd.sys.unlock.findOne()\n```\n\nand then wrap mongodump with locking & unlocking stuff:\n\n```\n/opt/mongodb-linux-i686-1.6.5/bin/mongo dbname < ~/ruby_apps/backup/tmp/mongo_lock\n/opt/mongodb-linux-i686-1.6.5/bin/mongodump dbname\n/opt/mongodb-linux-i686-1.6.5/bin/mongo dbname < ~/ruby_apps/backup/tmp/mongo_unlock\n```\n\ndirty? maybe. working? yes, perfectly!\n there's an easier way probably, using the power of pipes, but it makes the unlocking part bork on $cmd piece (putting empty string there and thus not executing successfully)\n Yup, that fixes the problem. Those shell scripts can be placed in the bin directory, and that'll be a bit less dirty.\n Actually we can do it without files - just using pipes:\n\n```\n$ echo 'use admin\n> db.runCommand({\"fsync\" : 1, \"lock\" : 1})' | ./mongo dbname\n$ mongodump dbname\n$ echo 'use admin \n> db.$cmd.sys.unlock.findOne()' | ./mongo dbname\n```\n\nRemember to use ' instead of \" or shell will evaluate $cmd to nil.\n https://github.com/meskyanichi/backup/pull/108\n Please do not replace the current functionality. Make the lock an option.\n\n> \"A word of warning: it's not safe to back up the mongod data files (by default in /data/db/) while the database is running and writes are occurring; such a backup may turn out to be corrupt. See the fsync option below for a way around that.\"\n\nI believe this only applies when backing up the mongod data files manually. mongodump is intended for doing hot backups as mentioned in the docs. Instead of copying the files it makes an actual mongo connection to the database and dumps the BSON through the connection. It's a little slower than dumping the files by hand, but it's perfectly safe. mongodump does not require a lock to generate a working dump. It only requires one to generate a \"point in time\" snapshot.\n\n> mongodump\n> This takes a database and outputs it in a binary representation. This is used for doing (hot) backups of a database\n\nI have verified this myself and I have never had any problems with backup corruption when using mongodump.\n\nEDIT: mongodump does not provide a \"point in time\" snapshot without a lock, but it is consistent and safe and will always provide a working backup. Whether or not you need a \"point in time\" snapshot should be up to the user and not the default functionality. \n MongoDB is fire-and-forget/non-transactional by nature and most of the MongoDB apps I have worked with do not rely on the atomicity of multiple updates. There's always a possibility that some updates won't get to the DB in the first place and your app has to be ready for that situation. Same applies to a hot mongodump. It may be missing or have some extra updates, but ultimately it's no different from how it works at runtime. This is what I mean by \"point in time\" snapshot.\n\nWhether your app can or cannot handle these situations determines whether you need a \"point in time\" snapshot or not. This is why mongodump will have an optional \"--lock\" flag in the future according to this bug report [SERVER-2279](https://jira.mongodb.org/browse/SERVER-2279)\n\nSorry for the long brain dump, but I find this gem very useful and I just don't want locking to be the default. :-)\n @lapluviosilla: I haven't made the safe/locked dump default -- quite the opposite, @safe it initialized with false.\n\nThe part in the README was written to explain why this option was added at all. Just like you read, mongodump doesn't guarantee consistency of data. There is a suggestion to add --lock option to mongodb, however it won't be here until at least 1.9:\nhttps://jira.mongodb.org/browse/SERVER-1588\n\n@meskyanichi: I'd gladly use mongodump --lock if it was available in the first place ;) I agree that using vendor-provided functionality would be a lot better than hacking around it. But until it becomes a part of mongo, I'd love to have lock-unlock wrapping in my backup strategy.\n\nAlso, when mongo 1.9 is released with mongodump --lock support, we can make Backup use it when backing up mongodb 1.9+. I don't know when that will happen and not everybody jumps onto latest mongodb version, I just need to work with what I've been given.\n Yeah, looks like tomash is right about it not being implemented soon. It's not a high priority feature for the MongoDB team.\n\n@tomash: Sorry, didn't look at the pull request closely. From the way the conversation was going I assumed it was going to be the default. A lock option would be just fine. One suggestion if I may: To keep things consistent could we name the option \"lock\" instead of \"safe\"? This is what it will be called on the mongodump once they get around to implementing that.\n You're right, \"lock\" sounds a lot better. Imanel will have it renamed in the refactored and improved code he'll soon issue a pull request with.\n There is a new feature in 1.8.1 (mongodump) that allows servers backed up with an oplog to be consistent at the end of the backup.\n\nThe mongodump runs and then when it's done with the dump, it replays the oplog to get all the changes made since the backup started.\n\nFor this to work... you need an oplog. If you have a single node, you can start the node as a master or as a replica with one node in the cluster. \n\nIf you don't have an oplog... this doesn't work and there is a chance that your backup will be inconsistent at the end of the mongodump.\n Ok - pushed new version as #109. It's disabled at default and should be easy to change in future so it support native lock\n Here's the feedback I received from my 10gen friend:\n\n\"ok\u2026 so here is the problem with running without a lock. it is ok to do so\u2026 but the problem is that data might not be consistent. for instance\u2026 an object in collection A is modified to point to collection B, collection A is backed up with the object still pointing to collection C.\nthere is a new feature in 1.8.1 to fix this\u2026\nuse the \u2014oplog in mongodump.\nthis requires an oplog though...\nwhat it does is that it records the position in the oplog and then does the mongodump. when the dump is done, it replays the oplog so that at the end of the backup, everything is consistent.\"\n\nSo in order to implement this, one could either a replica set (which would also obviate any concerns with backing up the Mongo server; one could just backup the slave and block writes to it while keeping the master intact. Or even simpler, have a one node replica set.\n\nThe fact that the corruption \"may\" happen as opposed to being guaranteed to happen can sometimes convince people that it's not necessary to prevent against that measure...until it happens (see AWS and region failover). I'd like to put something in so that people could configure to guard against this scenario, but whether it's the default or whether it's configurable is up to @meskyanichi primarily. I know I plan on listening to people who work at the company in charge of the product being used and configuring accordingly.\n\n.02\n\nAh, rgnitz already responded. I didn't notice that before. My mistake\n Well... This is working for me and @tomash and we believe that it's fairy complete. About comment - I have no idea how to test raising exception in mocha (in 'normal' rspec I would use should_raise but it's not working here...) but this code should work in every scenario...\n awesome! thanks :)\n  Hello, this is a support request!\n\nIs possible to backup from a remote host to the local host with installed backup gem? I'm trying to achive this but I'm not able to... The error displayed is \"The source and destination cannot both be remote\". But how can I specify a remote source and a local destination??\n\nThanks, great work :)\n Actually I need to backup files and folders...\n\nBut in the future if is possible I'd like to backup also databases....\n Thanks for the support! I'll wait for this feature!\n  It would be nice if we could setup a \"local storage\" for our backups. We would like to keep copies of our backups on both Amazon S3 and our local server for easy access. \n\nA workaround is to use SCP and set the ip/host to be 127.0.0.1, but then you have to configure valid credentials for it to work if being run from cron and it's still sort of a hack.\n Would be cool to add to this feature the possibility to not use remote storage but only local ones...\n\nSo that we can have a single backup machine which pull datas from production server!\n is it in progress, or are you waiting for a pull request? :) \n Heres a quick version I whipped up that is working for us.  Right now we just require this file in our config.rb.  I wasn't sure about the `cycle!`, but I tried to copy how other adapters worked.  If this looks good I can work on adding some specs and integrating it into the repo.\n\nhttps://gist.github.com/987506\n Local storage has been added. Closed by cfa33d20d33e8d12d114b7faee8e11541d0e83a0\n  Just adding reference to where someone's already attempted this.\n\nhttp://outofti.me/post/4159686269/backup-with-pgbackups \n +1. Heroku PostgreSQL database support should be added (using both pgbackups and the dedicated pg database tools).\n For the record, @andyvb brought this up today in #255\n @burns, I do not see any reference to Heroku in the issue referenced, though I'm assuming you're referring to the act of customizing Backup to support specific solutions.\n\nThe real followup question I have is:\n\n  Should we extend Backup by forking and adding our extended functionality and then submitting a pull request, or by creating a new gem (backup_heroku) that provides the monkey patch? What will be the method for doing this moving forward that the project will officially sanction?\n He posted the same URL that was referenced above - that's what he was working with.\nI don't see why this couldn't be added as another database adapter, similar to the current Database::PostgreSQL.\nI'll have to discuss it with @meskyanichi as he's more familiar with Heroku than I.\n @meskyanichi @burns @kevinelliott anyone working on this?\n Would be very handful :)\n  Silences STDOUT output from Backup::Logger\n\nIt wasn't clear to me how you go about testing `bin/backup`, so I haven't done anything with that beyond making sure the option shows up in help output.\n\nWritten to fix #101\n  \"When a program has nothing surprising to say, it should say nothing.\" //  _The Art of Unix Programming_\n\nBackup writes detailed information about process and it is good by default, but for for production mode silent mode would be very usefull. \n\nCron, for example,  considers any program output as error and sends it to administrator email. It can be silenced of course, but when real problem happens - nobody will notified. In silent mode only if problem happens backup/OS/ruby will print message and administrator will be notified.\n Submitted a pull request to add this; See #102\n  I get the following message:\n_Command 'backup' is available in '/usr/local/bin/backup'_\n\nIf I copy the generated line:\n/bin/bash -l -i -c 'backup perform -t rx_db --config_file '\\''/var/rapp/diglife_rx/config/backup.rb'\\'' >> /var/rapp/diglife_rx/log/cron.log 2>&1'\n\nThe cronjob works as expected. Any idea why it is not working from the cron itself?\n Jesus you mean I need to find out where my gems are installed? :) Ok will check it out and report back. Unfortunately I can't make use of RVM on the server it just refuses to be used. Says something about not being able to blah blah for system rubies. This is not the place for that discussion though!\n That works great, ad no idea about the which command that is true awesome sauce!\n\nThanks a bunch!\n Backup did ran fine tonight :)\n\nThanks again for all the help!\n  Since SQLite3 DBs are just a single file, can't this be done pretty easily with an `archive` directive?\n tsigo, even though it's only one file, to avoid corrupt result if your db is online, you must use the sqlite api to make a backup:\nAPI: http://www.sqlite.org/c3ref/backup_finish.html\n\nCLI: http://www.sqlite.org/sqlite.html\n Ah, good point. I hadn't thought of the potential problems if the DB was \"online\".\n  Hello.\n\nHere goes my current config for backup:\n\n<pre>\nBackup::Model.new(:lapik, 'Backup laptopa') do\n  sync_with RSync do |rsync|\n    rsync.ip       = \"192.168.200.101\"\n    rsync.port     = 22\n    rsync.username = \"backup\"\n    rsync.password = \"correct_password\"\n    rsync.path     = \"~/\"\n    rsync.mirror   = true\n    rsync.compress = true\n\n    rsync.directories do |directory|\n      directory.add \"/home/fenio\"\n    end\n  end\nend\n</pre>\n\nWhen I run it with backup perform -t lapik I got question about password:\n\nfenio@lapik:~$ sudo /var/lib/gems/1.8/bin/backup perform -t lapik\n[sudo] password for fenio: \n[2011/04/06 15:23:46][message] Performing backup for Backup laptopa!\n[2011/04/06 15:23:46][message] Backup::Syncer::RSync started syncing '/home/fenio'.\nbackup@192.168.200.101's password: \n\nWhen I paste there correct_password it starts rsyncing files. \nSo I can't use it from cron right now. Any hints how to solve it?\n\nregards\nfEnIo\n I didn't know I can simply use keys with rsync syncer. Wiki pages doesn't mention about that.\nYou wrote about keys only wrt s3/rackspace/dropbox and I suppose that these keys aren't equivalents of ssh priv/pub keys, but credentials of these services.\n\nFirst of all I was quite surprised that rsync examples use 22 port instead of 873, but I guess you're using mainly rsync over ssh in such case. \n To be honest I'm pretty surprised you're emphasize on \"exotic\" kinds of storages like s3/rackspace/dropbox and other cloud-related things. \n\nThis gem has potential to be really helpful for sysadmins (I was searching for such thing for a long time) but seems it's focused on backups on desktops. I would really like to see more storage targets around rsync based solutions like duplicity/rdiff-backup or something like that. Incremental backups based on rsync would be great.\n\nRight now rsync storage it's quite useless when it's used in normal scenario. In fact I don't have space in /tmp/ to be able to create tgz file and _then_ send it via rsync to some target.\nBut that's probably things I should submit as other issues ;)\nAnyway, thanks for very good piece of software ;)\n I'm using Syncer as you saw in my report but I would like to keep let's say 10 last days instead of one copy. Would be great to keep full copy from now()-10days and only changed files for now()-9days, now()-8 days and so on.\nrsync + hardlinks can make it very space efficient backups, just see how it's done in rdiff-backup.\n\nBut what I was always searching for is one solution for backups of all the thing I got. Right now I have complex set of scripts which mixes different solutions for databases, files, repositories and so on. Aproach of Storage in this gem is great for databases, but for large set of files is not so cool, especially if you want to make full rsync on weekend and only differences on normal days of week.\n I mentioned rdiff-backup and duplicity. Both are python based and uses librsync. There is also rsnapshot utility based on perl and librsync.\nBut there is also much simpler aproach which uses `cp -al` and default behaviour of rsync which unlinks hard link before modifing destination file.\nhttp://www.mikerubel.org/computers/rsync_snapshots/#Incremental\n\nNot sure which aproach will be the easiest to implement, cause I'm ordinary sysadmin and writing more than a bash script or oneliner in perl is beyond my skills ;)\n  Mysql backup will fails when run from cron FreeBSD 8.2 with error \"mysqldump: not found\". Even when that has failed backup will send a notification that it \"finished without any errors\".\n\nThis is happening because on FreeBSD mysqldump is installed in /usr/local/bin/ and that folder is not in cron's PATH for security reasons.\n\nThere should be some kind of auto detection of mysqldump's location or backup should report the error in the (email) notification.\n Works fine\n\nBackup::Exception::CommandNotFound - Could not find the utility \"mysqldump\" on \"amd64-freebsd8\".\n\nThanks. Maybe a mention of mysqldump.utility_path in documentation or the templates?\n  In my config, i was cycling 20 files but due to a filled up dropbox, i had to cleanup and remove files from my dropbox. Now backup execution fails as it is attempting to remove non-existing files from dropbox. I saw that it reads then internally manged Dropbox.yml file. My workaround was to cleanup the offending entries from that file. \n\nIt would be nice however, if the exception was caught and ignored.\n\nWant patch? Havent built as yet, but can. \n  I have done this here. \n\nYou may want to merge this.\n\nIf merged we will update the wiki pages.\n Hey,\n\nThanks, I have written it so quickly so code looks not so good.\n\nYeah i also thought of moving that class some where else but couldn't find the place.\n  it's here. \n\nhttps://github.com/meskyanichi/backup/pull/95\n  Hello Michael!\n\nI changed only one line in your \"archive.rb\", cause it rose an error on my FreeBSD machines. The installed \"tar\"-utility (which is distributed with the base system) has a nasty default for output:\n\n(look at the \"-f\" parameter)\n\n<pre>\n[root@www1 ~]# tar --help\ntar(bsdtar): manipulate archive files\nFirst option must be a mode specifier:\n  -c Create  -r Add/Replace  -t List  -u Update  -x Extract\nCommon Options:\n  -b #  Use # 512-byte records per I/O block\n  -f <filename>  Location of archive (default /dev/sa0)\n  -v    Verbose\n  -w    Interactive\n(...)\nbsdtar 2.7.0 - libarchive 2.7.0\n</pre>\n\n\nThe correspondenting error:\n\n<pre>\n[root@www1 ~]# tar -c . 1> bla.tar\ntar: Failed to open '/dev/sa0'\n[root@www1 ~]# tar -c -f bla.tar .          \n[root@www1 ~]# \n</pre>\n\n\nHope this finds the way back in your nice piece of software.\n\nKind regards, Stefan\n Ah ... I forgot to say that I tested this on several Linux machines too; every version of tar known by me support the \"-f\" parm but there may exist versions that won't handle this. This should be reviewed by someone else, who is more in the Linux business. ;-)\n  It seems that Backup is using more than 3 ftp connections to do its job ... Not sure how to debug this ...\n\nstacktrace:\n\nException that got raised:\n421 I can't accept more than 3 connections as the same user\n# \n\n/usr/lib/ruby/1.8/net/ftp.rb:241:in `getresp'\n/usr/lib/ruby/1.8/net/ftp.rb:264:in`sendcmd'\n/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'\n/usr/lib/ruby/1.8/net/ftp.rb:262:in`sendcmd'\n/usr/lib/ruby/1.8/net/ftp.rb:381:in `login'\n/usr/lib/ruby/1.8/monitor.rb:242:in`synchronize'\n/usr/lib/ruby/1.8/net/ftp.rb:378:in `login'\n/usr/lib/ruby/1.8/net/ftp.rb:138:in`initialize'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.10/lib/backup/storage/ftp.rb:69:in `new'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.10/lib/backup/storage/ftp.rb:69:in`connection'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.10/lib/backup/storage/ftp.rb:77:in `transfer!'\n/usr/lib/ruby/gems/1.8/gems/backup-3.0.10/lib/backup/storage/ftp.rb:48:in`perform!'\n  Thanks for this excellent tool! I dig the elegant simplicity of this DSL.\n\nI'm have almost everything working, but I'm having an issue with SCP via cron.  I'm using backup version 3.0.10 and Ruby 1.9.2-p180, and I have backup configured with SCP as the storage option.  When I run backup from the command line, it works fine, and I see the resulting tar file successfully copied on the remote server.  When I run the same configuration via cron (using the whenever gem), I get the error shown below.  Any suggestions you can offer are appreciated.\n# Configuration\n\n```\nstore_with SCP do |server|\n  server.username = 'redacted'\n  server.ip       = 'redacted'\n  server.port     = 22\n  server.path     = '~/backups'\n  server.keep     = 5\nend\n```\n# Results Via Command Line\n\n```\n$ backup perform --trigger stratify_backup\n\n[2011/03/20 20:33:02][message] Performing backup for Stratify Backup!\n[2011/03/20 20:33:02][message] Backup::Database::MongoDB started dumping and archiving \"stratify_production\".\n[2011/03/20 20:33:02][message] Backup started packaging everything to a single archive file.\n[2011/03/20 20:33:02][message] Backup::Compressor::Gzip started compressing the archive.\n[2011/03/20 20:33:02][message] Backup::Encryptor::OpenSSL started encrypting the archive.\n[2011/03/20 20:33:02][message] Backup::Storage::SCP started transferring \"2011.03.20.20.33.00.stratify_backup.tar.gz.enc\".\n[2011/03/20 20:33:09][message] Backup started cleaning up the temporary files.\n[2011/03/20 20:33:09][message] Backup::Notifier::Mail started notifying about the process.\n```\n\nSuccess!!\n# Results Via cron (with whenever)\n\n**Setup**\n\n```\n$ cat config/schedule.rb \n\nset :output, \"#{path}/log/cron.log\"\n\nevery 1.minute do\n  command \"backup perform --trigger stratify_backup\"\nend\n\n$ whenever --update-crontab backup\n[write] crontab file updated\n\n$ crontab -l \n\n# Begin Whenever generated tasks for: backup\n* * * * * /bin/bash -l -c 'backup perform --trigger stratify_backup >> /Users/jason/Backup/log/cron.log 2>&1'\n\n# End Whenever generated tasks for: backup\n```\n\n**Results**\n\n```\n$ cat log/cron.log\n\n[2011/03/20 20:32:02][\u001b[32mmessage\u001b[0m] Performing backup for Stratify Backup!\n[2011/03/20 20:32:02][\u001b[32mmessage\u001b[0m] Backup::Database::MongoDB started dumping and archiving \"stratify_production\".\n[2011/03/20 20:32:02][\u001b[32mmessage\u001b[0m] Backup started packaging everything to a single archive file.\n[2011/03/20 20:32:02][\u001b[32mmessage\u001b[0m] Backup::Compressor::Gzip started compressing the archive.\n[2011/03/20 20:32:03][\u001b[32mmessage\u001b[0m] Backup::Encryptor::OpenSSL started encrypting the archive.\n[2011/03/20 20:32:03][\u001b[32mmessage\u001b[0m] Backup::Storage::SCP started transferring \"2011.03.20.20.32.01.stratify_backup.tar.gz.enc\".\nEnter passphrase for /Users/jason/.ssh/id_rsa: stty: stdin isn't a terminal\nstty: stdin isn't a terminal\nstty: stdin isn't a terminal\n\nEnter passphrase for /Users/jason/.ssh/id_rsa: stty: stdin isn't a terminal\nstty: stdin isn't a terminal\nstty: stdin isn't a terminal\n\nEnter passphrase for /Users/jason/.ssh/id_rsa: stty: stdin isn't a terminal\nstty: stdin isn't a terminal\nstty: stdin isn't a terminal\n\n[2011/03/20 20:32:04][\u001b[32mmessage\u001b[0m] Backup started cleaning up the temporary files.\n[2011/03/20 20:32:04][\u001b[32mmessage\u001b[0m] Backup::Notifier::Mail started notifying about the process.\n===========================================================================\nException that got raised:\nthe given identity is known, but the private key could not be loaded: OpenSSL::PKey::RSAError (Neither PUB key nor PRIV key:: nested asn1 error)\n===========================================================================\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/key_manager.rb:139:in `rescue in sign'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/key_manager.rb:136:in `sign'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/methods/publickey.rb:62:in `authenticate_with'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/methods/publickey.rb:20:in `block in authenticate'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/key_manager.rb:117:in `block in each_identity'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/key_manager.rb:114:in `each'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/key_manager.rb:114:in `each_identity'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/methods/publickey.rb:19:in `authenticate'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/session.rb:73:in `block in authenticate'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/session.rb:65:in `each'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh/authentication/session.rb:65:in `authenticate'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/net-ssh-2.1.3/lib/net/ssh.rb:187:in `start'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/lib/backup/storage/scp.rb:66:in `connection'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/lib/backup/storage/scp.rb:100:in `block in create_remote_directories!'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/lib/backup/storage/scp.rb:98:in `each'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/lib/backup/storage/scp.rb:98:in `create_remote_directories!'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/lib/backup/storage/scp.rb:73:in `transfer!'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/lib/backup/storage/scp.rb:51:in `perform!'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/lib/backup/model.rb:222:in `block in perform!'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/lib/backup/model.rb:222:in `each'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/lib/backup/model.rb:222:in `perform!'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/bin/backup:102:in `block in perform'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/bin/backup:81:in `each'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/bin/backup:81:in `perform'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/gems/backup-3.0.10/bin/backup:260:in `<top (required)>'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/bin/backup:19:in `load'\n/Users/jason/.rvm/gems/ruby-1.9.2-p180/bin/backup:19:in `<main>'\n===========================================================================\n\nYou are running Backup version \"3.0.10\" and Ruby version \"ruby-1.9.2-p180\".\nIf you've setup a \"Notification\" in your configuration file, the above error will have been sent.\n```\n Thanks for the quick reply.  In response to your questions ...\n\nThe cron job triggering Backup is indeed from the same user that was triggering Backup from the command line.\n\nI'm using OS X.\n\nI do have a passphrase set up for my ssh key.  (Good catch.  This is almost certainly the issue.)  I don't have to enter the passphrase from the command line, because it's stored in my keychain.  I suspect the cron job doesn't have access to my keychain.  :-/\n\nI wonder if I could just make SCP use username and password to log in instead of using the ssh key.  I added the password to the SCP block, in hopes that this would do the trick.  However, I still get the same error.  \n\n```\nstore_with SCP do |server|\n  server.username = 'redacted'\n  server.password = 'redacted'\n  server.ip       = 'redacted'\n  server.port     = 22\n  server.path     = '~/backups'\n  server.keep     = 5\nend\n```\n\nI wonder if there's a way I can force it to use the username and password (and ignore the ssh key).  Any suggestions you can offer are appreciated.\n Thanks for the suggestion.  I'm not comfortable with my _main_ SSH key [not having a passphrase](http://help.github.com/working-with-key-passphrases), but I really wanna use Backup.  So, as you suggested, I created another SSH key and I omitted the passphrase.  (I'll only use this new key for connecting to my backup server\u2014not for connecting to all the other servers I work with\u2014so that lessens the security concern significantly.)  Then I followed [this tip](http://help.github.com/multiple-keys/#configuring_ssh) for using multiple SSH keys on the same system.  This solves the problem.  SCP via Backup now works from the command line and via cron.  Thanks.\n Sorry to comment on a issue a year ago, but since I didn't find elsewhere related to the ssh key which has a passphrase, is this possible now?\n  This is done so you can add in options like the exclude or additional parameters you might need.\n  It would be great if there was support for s3sync and s3cmd http://www.s3sync.net/wiki\n i dont think it has been updated in a while.  I've been using 1.2.6 for the past 3 years.  I think it's been abandoned.  Let me look to see if I can get it working under 1.9.x in the next few weeks.\n Awesome thanks for the fast response!\n Took me a while to figure this out.  Could you add it to the wiki for S3?\n Erk.  Right you are.  I must be blind.\n  You may want to have a look at this commit of mine.\n\nhttps://github.com/asanghi/backup/commit/f892a4a2159f30e0d69933fa828a88f6b935898a\n\nThor says the list is space separated.\n  I know you mentioned it's in your TODO list. But if this looks like, feel free to pull it in.\n  I think we should probably make the timeout in Dropbox upload configurable. It's hard-coded to 300 at the moment. I'm getting broken pipe exception occasionally when uploading to Dropbox.\n My file is only 12.7Mb. I've seen this happen occasionally (it's happened 2 twice on the weekend over 20 invocations). I cant think of anything other than a timeout. \n\nException -> \nhttps://gist.github.com/869281\n It seems i've scheduled 7 different backups at the same time and they all get kicked off in parallel. \n\nhttps://gist.github.com/a7c546e54bc53fe7baf6\n\nPerhaps there is a problem hitting Dropbox with too many connections? \n\nI could stagger my backup easily by a few minutes but is it possible to chain backups in perform? Something like backup perform -t type1,type2,type3 ?\n  Unless we let the user customize the status message or allow date to be included in the tweet it likely we'll come across errors from twitter.\n\nThere seemed to be a problem backing up My Project (myproject).\n# \n\nException that got raised:\n# POST https://api.twitter.com/1/statuses/update.json: 403: Status is a duplicate.\n\n/usr/local/ruby-enterprise/lib/ruby/gems/1.8/gems/twitter-1.1.2/lib/faraday/raise_http_4xx.rb:15:in `register_on_complete'\n/usr/local/ruby-enterprise/lib/ruby/gems/1.8/gems/faraday-0.5.7/lib/faraday/response.rb:47:in`call'\n/usr/local/ruby-enterprise/lib/ruby/gems/1.8/gems/faraday-0.5.7/lib/faraday/response.rb:47:in `finish'\n No Twitter seems to compare the tweet with tweets sent previously. Backup at 11am worked fine, but the one at 4pm failed because it's text was the same.\n Looks great Michael! This is better than Time.now\n\nI was also thinking we could let the user set a Hashtag on the tweet. That doesn't solve this particular problem but allows a bit of control for the user.\n It could possibly allow the user to classify tweets and/or share them with other members. Haven't completely thought it thru :) \n  Hello,\n\nI've added support for excluding files and directories from tar archives.\n  Hi Michael,\n\nSo here's the first attempt at getting the Twitter notifier in place.\nThe basic infrastructure is in place. Now we can aim for goodies like configurable tweet content etc.\nLooking forward to your comments.\n\nCheers,\nAditya\n  It would be nice to have twitter based notification on success/error. I can help implement if you think it'll be cool?\n Thanks! Your design is absolutely amazing. \nI had one look at the code base and worked out exactly what had to be done but thanks for the pointers above. I should be able to send you a pull soon with tests.\nI must compliment you on your wiki as well. I've yet to come across clearer documentation to get stuff done in any other project i've seen.\n Didnt mean to close the ticket!\n  Hey, trying to do postgres database backup. Getting:\n\n```\n[2011/03/09 18:17:28][message] Performing backup for Postgresql Data Backup!\n[2011/03/09 18:17:28][message] Backup::Database::PostgreSQL started dumping and archiving \"eggroll_prod\".\n[2011/03/09 18:28:39][message] Backup started packaging everything to a single archive file.\n[2011/03/09 18:30:19][message] Backup::Compressor::Gzip started compressing the archive.\n[2011/03/09 18:32:35][message] Backup::Storage::S3 started transferring \"2011.03.09.18.17.26.pg_data_backup.tar.gz\".\ntcmalloc: large alloc 1124073472 bytes == (nil) @ \n[2011/03/09 18:32:53][message] Backup started cleaning up the temporary files.\n/usr/local/lib/ruby/gems/1.8/gems/activesupport-3.0.5/lib/active_support/core_ext/kernel/agnostics.rb:7:in ``': Cannot allocate memory - which rm (Errno::ENOMEM)\n    from /usr/local/lib/ruby/gems/1.8/gems/activesupport-3.0.5/lib/active_support/core_ext/kernel/agnostics.rb:7:in ``'\n    from /usr/local/lib/ruby/gems/1.8/gems/backup-3.0.0/lib/backup/cli.rb:43:in `utility'\n    from /usr/local/lib/ruby/gems/1.8/gems/backup-3.0.0/lib/backup/model.rb:227:in `clean!'\n    from /usr/local/lib/ruby/gems/1.8/gems/backup-3.0.0/lib/backup/model.rb:206:in `perform!'\n    from /usr/local/lib/ruby/gems/1.8/gems/backup-3.0.0/bin/backup:92:in `perform'\n    from /usr/local/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in `send'\n    from /usr/local/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'\n    from /usr/local/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'\n    from /usr/local/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'\n    from /usr/local/lib/ruby/gems/1.8/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'\n    from /usr/local/lib/ruby/gems/1.8/gems/backup-3.0.0/bin/backup:179\n    from /usr/local/bin/backup:19:in `load'\n    from /usr/local/bin/backup:19\n```\n\nConfiguration is more or less the defaults. Ran it with:\n\n```\nbackup perform -t pg_data_backup -c /opt/backup/config.rb\n```\n\nAny ideas what is wrong? Happy to gist my config files if necessary. Using latest version of REE with tuned GC params.\n\nConfiguration is:\n\n```\nBackup::Model.new(:pg_data_backup, 'Postgresql Data Backup') do\n  database PostgreSQL do |db|\n    db.name               = ...\n    db.username           = ...\n    db.password           = ...\n    db.host               = ...\n    db.port               = ...\n    db.additional_options = ['--quick', '--single-transaction']\n  end\n\n  store_with S3 do |s3|\n    s3.access_key_id      = ...\n    s3.secret_access_key  = ...\n    s3.bucket             = 'pg-data-backups'\n    s3.keep               = 5\n  end\n\n  compress_with Gzip do |compression|\n    compression.best = false\n    compression.fast = true\n  end\n\n  notify_by Mail do |mail|\n    mail.on_success           = true\n    mail.on_failure           = true\n    mail.port                 = 25\n    mail.host                 = ...\n    mail.domain               = ...\n    mail.user_name            = nil\n    mail.password             = nil\n    mail.authentication       = nil\n    mail.enable_starttls_auto = false\n  end\nend\n```\n Thanks for the fast response! Look forward to happily using this library. Thanks so much for this, using it to backup all of our production data. So much better than cobbling together my own hacky scripts.\n Yep all fixed again and working great. Thanks!\n  The readme says encryption is applied before compression.  I bet you'll get much better compression if those are reversed.  (Encrypted data probably doesn't compress much at all.)\n I think mikegee is correct... [compressing encrypted files is not efficient](http://x5.net/faqs/crypto/q62.html)\n  Hi there,\n\nI added a feature so that an email notification will be sent when the backup errors out if the 'notify' config setting is set to to true or :only_errors.  I think it would be useful to other people, and it's a must-have for our scenario, so it would be awesome if you pulled in this change and I could switch back to the main fork!\n\nThanks,\nPat Gannon\nPatrickJosephGannon@yahoo.com\n@patgannon\n", "text_all_count": 44675, "text_word_token": ["Pushover", "provides", "an", "API", "through", "which", "you", "can", "push", "notifications", "to", "registered", "applications", "NUMBER", "This", "change", "be", "to", "support", "notification", "via", "this", "API", "NUMBER", "It", "uses", "the", "Pushover", "Gem", "LINK", "to", "do", "this", "NUMBER", "the", "code", "looks", "strong", "NUMBER", "anyone", "here", "use", "pushover", "and", "willing", "to", "give", "it", "a", "test", "drive", "so", "can", "you", "add", "a", "commit", "that", "revert", "version", "to", "NUMBER", "and", "squash", "them", "all", "into", "one", "also", "please", "rebase", "with", "current", "master", "otherwise", "the", "latest", "mocha", "will", "show", "your", "build", "as", "broken", "NUMBER", "Sure", "NUMBER", "Only", "after", "I", "did", "the", "change", "did", "I", "read", "that", "you", "wanted", "branch", "from", "the", "develop", "branch", "NUMBER", "D", "oh", "ouch", "didn", "t", "know", "about", "it", "my", "glacier", "work", "NUMBER", "be", "also", "based", "off", "master", "OK", "so", "I", "ve", "made", "the", "change", "and", "squashed", "the", "commit", "into", "one", "NUMBER", "I", "m", "afraid", "I", "m", "a", "little", "new", "to", "Git", "so", "I", "m", "not", "sure", "what", "you", "want", "me", "to", "do", "next", "my", "profound", "apologies", "NUMBER", "Should", "I", "create", "a", "new", "pull", "request", "And", "how", "do", "I", "rebase", "my", "branch", "with", "the", "current", "master", "Sorry", "NUMBER", "don", "t", "worry", "with", "rebasing", "yet", "your", "work", "should", "merge", "cleanly", "NUMBER", "as", "for", "squashed", "commit", "just", "do", "a", "push", "force", "into", "the", "same", "branch", "that", "you", "made", "this", "pull", "request", "from", "NUMBER", "OK", "NUMBER", "Done", "NUMBER", "it", "fail", "the", "test", "on", "ruby", "NUMBER", "because", "you", "re", "use", "the", "new", "NUMBER", "only", "hash", "syntax", "NUMBER", "we", "want", "this", "gem", "NUMBER", "compatible", "so", "please", "fix", "it", "LINK", "ci", "NUMBER", "org", "meskyanichi", "backup", "jobs", "NUMBER", "OK", "after", "some", "reading", "of", "the", "Pro", "Git", "book", "and", "a", "couple", "of", "abort", "attempts", "to", "get", "NUMBER", "to", "build", "on", "OSX", "I", "ve", "managed", "to", "get", "a", "squashed", "commit", "which", "build", "NUMBER", "This", "required", "remove", "the", "dependency", "on", "the", "Pushover", "gem", "which", "doesn", "t", "support", "NUMBER", "However", "we", "didn", "t", "need", "all", "the", "bells", "and", "whistles", "provide", "by", "the", "gem", "it", "s", "just", "a", "post", "to", "a", "REST", "API", "with", "a", "JSON", "payload", "NUMBER", "This", "has", "gone", "green", "in", "CI", "LINK", "ci", "NUMBER", "org", "meskyanichi", "backup", "build", "NUMBER", "awesome", "you", "re", "the", "man", "so", "any", "objections", "people", "or", "can", "we", "merge", "this", "Sure", "NUMBER", "I", "ll", "update", "as", "soon", "as", "I", "m", "back", "in", "front", "of", "a", "computer", "NUMBER", "Should", "probably", "also", "update", "the", "readme", "Encryptor", "GPG", "has", "be", "update", "to", "support", "NUMBER", "modes", "of", "operation", "asymmetric", "default", "symmetric", "or", "both", "NUMBER", "In", "asymmetric", "mode", "or", "both", "multiple", "recipients", "be", "now", "support", "NUMBER", "Recipient", "s", "public", "keys", "be", "setup", "in", "the", "keys", "hash", "then", "specified", "use", "recipients", "NUMBER", "In", "symmetric", "mode", "or", "both", "the", "passphrase", "may", "specified", "in", "passphrase", "or", "use", "a", "passphrase_file", "NUMBER", "Options", "be", "also", "available", "for", "use", "a", "specific", "GnuPG", "home", "directory", "homedir", "and", "supplying", "a", "specific", "configuration", "options", "NUMBER", "The", "single", "key", "setting", "has", "be", "deprecate", "NUMBER", "This", "will", "still", "work", "but", "you", "ll", "get", "a", "log", "warning", "until", "your", "configuration", "has", "be", "update", "NUMBER", "See", "lib", "backup", "encryptor", "gpg", "NUMBER", "rb", "for", "the", "full", "documentation", "NUMBER", "Woo", "hoo", "beers", "appreciate", "the", "multiple", "recipients", "thanks", "Can", "it", "be", "include", "to", "new", "gem", "release", "for", "Rails", "NUMBER", "compatibility", "According", "to", "the", "wiki", "LINK", "the", "openssl", "decrypting", "should", "work", "with", "a", "password", "instead", "of", "a", "password", "file", "NUMBER", "However", "in", "the", "CLI", "Utility", "LINK", "L", "NUMBER", "openssl", "be", "given", "pass", "file", "options", "password_file", "NUMBER", "If", "a", "password", "be", "specified", "directly", "rather", "then", "through", "a", "file", "the", "option", "for", "openssl", "should", "be", "pass", "options", "password_file", "I", "suggest", "letting", "the", "user", "specify", "_pass", "NUMBER", "_", "or", "_file", "NUMBER", "_", "What", "do", "you", "think", "Robin", "The", "backup", "decrypt", "command", "only", "has", "a", "password", "file", "option", "NUMBER", "I", "think", "you", "re", "just", "misreading", "the", "wiki", "With", "that", "said", "there", "s", "a", "bug", "in", "that", "command", "which", "was", "just", "patched", "NUMBER", "NUMBER", "Until", "the", "next", "gem", "release", "that", "command", "will", "only", "work", "if", "you", "actually", "use", "the", "password", "file", "option", "NUMBER", "So", "you", "ll", "have", "to", "use", "openssl", "directly", "if", "you", "want", "to", "enter", "a", "password", "NUMBER", "openssl", "aes", "NUMBER", "cbc", "d", "base", "NUMBER", "salt", "in", "path", "to", "backup", "NUMBER", "tar", "NUMBER", "enc", "out", "path", "to", "backup", "NUMBER", "tar", "NUMBER", "gz", "You", "don", "t", "want", "a", "password", "option", "for", "this", "command", "as", "you", "d", "be", "typing", "it", "in", "the", "clear", "and", "it", "could", "be", "stored", "in", "your", "bash", "history", "NUMBER", "True", "I", "misunderstood", "_You", "can", "also", "use", "password", "file", "to", "provide", "the", "password", "NUMBER", "_", "NUMBER", "Maybe", "we", "should", "change", "this", "in", "_to", "provide", "the", "password", "file_", "NUMBER", "However", "then", "this", "issue", "be", "a", "feature", "request", "NUMBER", "I", "run", "backup", "from", "a", "Chef", "Recipe", "so", "I", "would", "like", "s", "NUMBER", "NUMBER", "non", "interactive", "NUMBER", "Openssl", "support", "openssl", "pass", "pass", "PASSWORD", "so", "why", "shouldn", "t", "backup", "The", "user", "that", "runs", "backup", "clears", "the", "history", "automatically", "when", "logging", "out", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Yes", "please", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Updated", "Fog", "to", "NUMBER", "and", "squashed", "the", "commit", "NUMBER", "The", "specs", "be", "passing", "and", "backup", "be", "work", "for", "my", "S", "NUMBER", "configuration", "NUMBER", "I", "also", "remove", "the", "Gemfile", "NUMBER", "lock", "file", "as", "it", "s", "not", "necessary", "for", "developing", "the", "gem", "LINK", "the", "roles", "of", "the", "gemspec", "and", "gemfile", "Opened", "LINK", "NUMBER", "With", "backup", "NUMBER", "I", "recently", "start", "get", "a", "backup", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warning", "ConfigurationError", "DEPRECATION", "WARNING", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warning", "Backup", "Compressor", "Gzip", "NUMBER", "best", "has", "be", "deprecate", "as", "of", "backup", "v", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warning", "This", "setting", "has", "be", "replaced", "with", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warning", "Backup", "Compressor", "Gzip", "NUMBER", "level", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warning", "Backup", "Compressor", "Gzip", "NUMBER", "level", "be", "be", "set", "to", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warning", "ConfigurationError", "DEPRECATION", "WARNING", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warning", "Backup", "Compressor", "Gzip", "NUMBER", "fast", "has", "be", "deprecate", "as", "of", "backup", "v", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warning", "This", "setting", "has", "be", "replaced", "with", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "warning", "Backup", "Compressor", "Gzip", "NUMBER", "level", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dependency", "LoadError", "Dependency", "miss", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dependency", "required", "for", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Amazon", "S", "NUMBER", "Rackspace", "Cloud", "Files", "S", "NUMBER", "CloudFiles", "Storages", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "To", "install", "the", "gem", "issue", "the", "following", "command", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "gem", "install", "fog", "v", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Please", "try", "again", "after", "installing", "the", "miss", "dependency", "NUMBER", "When", "I", "revert", "to", "NUMBER", "everything", "works", "fine", "NUMBER", "In", "both", "cases", "fog", "NUMBER", "in", "install", "NUMBER", "The", "NUMBER", "means", "it", "has", "to", "be", "version", "NUMBER", "x", "so", "NUMBER", "x", "be", "too", "high", "NUMBER", "Does", "it", "still", "not", "work", "when", "installing", "Fog", "NUMBER", "x", "Guess", "I", "must", "have", "another", "gem", "which", "uses", "fog", "and", "requires", "the", "latest", "version", "NUMBER", "Why", "do", "backup", "NUMBER", "need", "an", "older", "version", "of", "fog", "than", "NUMBER", "and", "shouldn", "t", "bundler", "either", "force", "NUMBER", "x", "or", "flag", "a", "fog", "version", "conflict", "Not", "sure", "I", "want", "to", "revert", "to", "fog", "NUMBER", "x", "as", "if", "might", "affect", "the", "other", "gems", "which", "use", "fog", "NUMBER", "I", "ll", "stick", "with", "backup", "NUMBER", "for", "now", "NUMBER", "You", "would", "be", "better", "off", "keep", "the", "gems", "for", "backup", "with", "a", "project", "NUMBER", "For", "example", "if", "you", "stick", "with", "the", "default", "location", "of", "Backup", "you", "can", "do", "the", "following", "text", "cd", "Backup", "bundle", "init", "echo", "gem", "backup", "Gemfile", "bundle", "install", "path", "vendor", "bundle", "binstubs", "You", "would", "want", "to", "add", "whatever", "gem", "dependencies", "you", "need", "for", "backup", "in", "your", "Gemfile", "NUMBER", "So", "to", "add", "fog", "you", "would", "text", "echo", "gem", "fog", "NUMBER", "Gemfile", "bundle", "install", "You", "can", "then", "keep", "your", "Backup", "folder", "under", "SCM", "NUMBER", "text", "git", "init", "cat", "NUMBER", "gitignore", "TAG", "vendor", "bundle", "bin", "NUMBER", "tmp", "data", "log", "EOF", "git", "add", "NUMBER", "git", "commit", "m", "initial", "commit", "I", "usually", "ignore", "NUMBER", "bundle", "but", "since", "this", "would", "not", "be", "a", "shared", "project", "you", "may", "want", "to", "keep", "this", "NUMBER", "You", "ll", "want", "to", "keep", "NUMBER", "cache", "if", "you", "use", "Dropbox", "NUMBER", "To", "generate", "a", "model", "Backup", "bin", "backup", "generate", "model", "trigger", "my_backup", "NUMBER", "etc", "To", "run", "the", "job", "Backup", "bin", "backup", "perform", "trigger", "my_backup", "If", "you", "choose", "a", "different", "folder", "than", "Backup", "then", "you", "ll", "need", "to", "use", "the", "root", "path", "option", "NUMBER", "In", "which", "case", "you", "would", "run", "other", "folder", "bin", "backup", "perform", "trigger", "my_backup", "root", "path", "other", "folder", "Or", "say", "from", "a", "cron", "job", "bash", "l", "c", "cd", "other", "folder", "bin", "backup", "perform", "trigger", "my_backup", "root", "path", "NUMBER", "NUMBER", "for", "update", "Fog", "dependency", "to", "NUMBER", "NUMBER", "NUMBER", "for", "Fog", "NUMBER", "I", "run", "into", "the", "same", "issue", "and", "it", "s", "due", "to", "airbrake", "requiring", "a", "higher", "version", "of", "multi_json", "than", "Fog", "NUMBER", "x", "do", "NUMBER", "In", "Gemfile", "fog", "NUMBER", "ruby", "depends", "on", "multi_json", "NUMBER", "ruby", "airbrake", "NUMBER", "ruby", "depends", "on", "multi_json", "NUMBER", "In", "Fog", "NUMBER", "the", "multi_json", "dependency", "be", "less", "strict", "becoming", "NUMBER", "rather", "than", "the", "NUMBER", "that", "causes", "issue", "with", "other", "gems", "depending", "on", "a", "greater", "version", "of", "multi_json", "than", "NUMBER", "x", "NUMBER", "for", "jdutil", "s", "bumping", "of", "the", "fog", "dependency", "NUMBER", "As", "far", "as", "I", "understood", "jdutil", "has", "find", "the", "problem", "and", "made", "the", "corrections", "NUMBER", "So", "the", "need", "be", "to", "do", "the", "pull", "and", "merge", "to", "master", "branch", "NUMBER", "The", "question", "be", "will", "it", "be", "do", "in", "master", "branch", "or", "should", "we", "go", "by", "ourselves", "Tks", "NUMBER", "NUMBER", "ischuster", "burns", "your", "comment", "seem", "to", "suggest", "that", "keep", "backup", "dependencies", "in", "the", "same", "Gemfile", "as", "your", "rails", "project", "be", "a", "bad", "idea", "NUMBER", "backup", "should", "really", "exist", "as", "separate", "project", "with", "separate", "repository", "NUMBER", "If", "so", "performing", "backup", "use", "this", "gem", "just", "get", "a", "lot", "harder", "than", "before", "NUMBER", "Now", "do", "we", "have", "a", "separate", "capistrano", "deploy", "to", "push", "this", "backup", "config", "to", "production", "environment", "Instead", "of", "trying", "to", "manage", "dependency", "outside", "of", "bundler", "lib", "backup", "dependency", "NUMBER", "rb", "could", "we", "split", "the", "optional", "gems", "relate", "functinoality", "s", "NUMBER", "backup", "use", "fog", "for", "example", "as", "a", "separate", "gem", "call", "it", "backup", "s", "NUMBER", "This", "be", "similar", "to", "how", "omniauth", "manages", "individual", "plugins", "NUMBER", "They", "have", "add", "on", "gems", "call", "omniauth", "facebook", "omniauth", "openid", "and", "such", "NUMBER", "This", "will", "allow", "us", "to", "upgrade", "individual", "optional", "plugins", "without", "having", "to", "roll", "forward", "for", "each", "minor", "upgrade", "to", "these", "gems", "NUMBER", "Fair", "enough", "NUMBER", "I", "don", "t", "think", "this", "fact", "of", "keep", "backup", "outside", "of", "rails", "project", "has", "be", "clear", "in", "communication", "enough", "NUMBER", "I", "have", "be", "use", "backup", "for", "over", "NUMBER", "years", "and", "always", "worked", "inside", "of", "rails", "even", "with", "Gemfile", "NUMBER", "I", "believe", "people", "just", "assume", "that", "it", "all", "works", "until", "it", "doesn", "t", "NUMBER", "Lately", "though", "dependency", "graph", "of", "backup", "gem", "has", "expanded", "and", "it", "causes", "such", "conflict", "to", "occur", "often", "NUMBER", "About", "extracting", "optional", "functionality", "as", "plugin", "I", "believe", "it", "be", "a", "matter", "of", "runtime", "vs", "NUMBER", "build", "time", "convenience", "NUMBER", "Sure", "it", "will", "be", "more", "work", "to", "maintain", "NUMBER", "separate", "gems", "as", "oppose", "to", "one", "NUMBER", "But", "most", "end", "users", "use", "only", "NUMBER", "NUMBER", "of", "those", "optional", "features", "and", "will", "be", "just", "happy", "to", "install", "those", "and", "go", "their", "way", "NUMBER", "Some", "warning", "to", "rails", "folks", "to", "keep", "backup", "separate", "from", "Gemfile", "will", "help", "NUMBER", "Personally", "I", "believe", "you", "should", "be", "able", "to", "bundle", "backup", "with", "your", "Rails", "app", "NUMBER", "I", "set", "require", "false", "within", "the", "Gemfile", "so", "that", "it", "isn", "t", "be", "loaded", "with", "the", "app", "NUMBER", "The", "reason", "I", "do", "this", "be", "so", "that", "I", "can", "keep", "all", "my", "application", "dependencies", "within", "the", "project", "NUMBER", "That", "include", "services", "you", "may", "not", "consider", "part", "of", "the", "application", "such", "as", "Whenever", "Backup", "Capistrano", "God", "and", "anything", "else", "I", "be", "relying", "on", "for", "my", "application", "NUMBER", "While", "it", "may", "make", "sense", "for", "you", "to", "use", "Backup", "outside", "the", "context", "of", "your", "application", "it", "simply", "causes", "more", "work", "more", "documentation", "more", "organization", "and", "more", "processes", "to", "manage", "NUMBER", "I", "m", "just", "work", "on", "some", "small", "apps", "and", "it", "works", "much", "better", "to", "keep", "everything", "I", "need", "within", "the", "application", "repository", "NUMBER", "It", "helps", "new", "developers", "bootstrap", "the", "application", "and", "have", "everything", "they", "need", "in", "one", "place", "NUMBER", "It", "also", "allows", "me", "to", "have", "my", "Capistrano", "deployment", "scripts", "manage", "update", "my", "Backup", "configuration", "when", "necessary", "NUMBER", "While", "I", "understand", "you", "not", "wanting", "to", "always", "support", "dependency", "update", "I", "think", "it", "s", "foolish", "not", "to", "update", "this", "Fog", "dependency", "to", "please", "the", "dozen", "or", "so", "people", "in", "favor", "of", "it", "NUMBER", "More", "time", "be", "be", "spent", "debating", "whether", "or", "not", "to", "update", "Backup", "to", "better", "support", "cloud", "storage", "than", "it", "would", "take", "to", "simply", "update", "it", "when", "I", "ve", "already", "submitted", "and", "test", "a", "pull", "request", "for", "it", "NUMBER", "It", "be", "going", "to", "benefit", "everyone", "NUMBER", "Yourselves", "and", "the", "other", "developers", "like", "myself", "that", "enjoy", "the", "simplicity", "of", "keep", "all", "their", "dependencies", "in", "one", "place", "NUMBER", "Besides", "simply", "leaving", "Backup", "out", "of", "your", "Gemfile", "do", "not", "prevent", "this", "error", "from", "happening", "to", "people", "NUMBER", "Bundler", "was", "created", "to", "help", "alleviate", "these", "issue", "NUMBER", "It", "be", "very", "plausible", "that", "someone", "trying", "to", "use", "Backup", "even", "separately", "from", "their", "application", "could", "still", "run", "into", "this", "dependency", "error", "if", "they", "have", "multiple", "version", "of", "different", "Gems", "install", "NUMBER", "So", "to", "me", "the", "argument", "that", "this", "should", "be", "keep", "separate", "from", "the", "Rails", "app", "doesn", "t", "hold", "much", "weight", "personally", "NUMBER", "Agreed", "NUMBER", "to", "Jeff", "More", "time", "be", "be", "spent", "debating", "whether", "or", "not", "to", "update", "Backup", "to", "better", "support", "cloud", "storage", "than", "it", "would", "take", "to", "simply", "update", "NUMBER", "Gemfile", "bundle", "NUMBER", "were", "made", "to", "keep", "things", "simple", "and", "easy", "NUMBER", "Why", "do", "not", "use", "them", "Maybe", "it", "brings", "some", "extra", "work", "NUMBER", "But", "that", "s", "the", "strength", "of", "social", "code", "NUMBER", "You", "don", "t", "have", "to", "do", "all", "by", "yourself", "NUMBER", "Is", "this", "case", "in", "particular", "we", "ve", "seen", "this", "NUMBER", "The", "solution", "was", "given", "by", "a", "user", "and", "publish", "in", "a", "branch", "ready", "to", "be", "merge", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Michael", "van", "Rooijen", "TAG", "Personally", "I", "believe", "you", "should", "be", "able", "to", "bundle", "backup", "with", "your", "Rails", "app", "NUMBER", "I", "set", "require", "false", "within", "the", "Gemfile", "so", "that", "it", "isn", "t", "be", "loaded", "with", "the", "app", "NUMBER", "But", "doesn", "t", "think", "still", "cause", "dependency", "issue", "when", "run", "bundle", "install", "The", "reason", "I", "do", "this", "be", "so", "that", "I", "can", "keep", "all", "my", "application", "dependencies", "within", "the", "project", "NUMBER", "That", "include", "services", "you", "may", "not", "consider", "part", "of", "the", "application", "such", "as", "Whenever", "Backup", "Capistrano", "God", "and", "anything", "else", "I", "be", "relying", "on", "for", "my", "application", "NUMBER", "Understandable", "NUMBER", "While", "it", "may", "make", "sense", "for", "you", "to", "use", "Backup", "outside", "the", "context", "of", "your", "application", "it", "simply", "causes", "more", "work", "more", "documentation", "more", "organization", "and", "more", "processes", "to", "manage", "NUMBER", "I", "m", "just", "work", "on", "some", "small", "apps", "and", "it", "works", "much", "better", "to", "keep", "everything", "I", "need", "within", "the", "application", "repository", "NUMBER", "It", "helps", "new", "developers", "bootstrap", "the", "application", "and", "have", "everything", "they", "need", "in", "one", "place", "NUMBER", "It", "also", "allows", "me", "to", "have", "my", "Capistrano", "deployment", "scripts", "manage", "update", "my", "Backup", "configuration", "when", "necessary", "NUMBER", "While", "I", "understand", "you", "not", "wanting", "to", "always", "support", "dependency", "update", "I", "think", "it", "s", "foolish", "not", "to", "update", "this", "Fog", "dependency", "to", "please", "the", "dozen", "or", "so", "people", "in", "favor", "of", "it", "NUMBER", "More", "time", "be", "be", "spent", "debating", "whether", "or", "not", "to", "update", "Backup", "to", "better", "support", "cloud", "storage", "than", "it", "would", "take", "to", "simply", "update", "it", "when", "I", "ve", "already", "submitted", "and", "test", "a", "pull", "request", "for", "it", "NUMBER", "The", "problem", "be", "that", "Rails", "and", "typically", "the", "gems", "people", "typically", "use", "around", "Rails", "evolve", "at", "a", "rapid", "pace", "NUMBER", "If", "these", "tool", "constantly", "update", "then", "people", "will", "constantly", "be", "come", "back", "to", "Backup", "ask", "for", "dependency", "update", "because", "otherwise", "Bundler", "be", "unable", "to", "bundle", "their", "app", "due", "to", "Backup", "use", "an", "older", "version", "of", "fog", "compared", "to", "what", "another", "dependency", "in", "the", "app", "requires", "NUMBER", "It", "be", "very", "plausible", "that", "someone", "trying", "to", "use", "Backup", "even", "separately", "from", "their", "application", "could", "still", "run", "into", "this", "dependency", "error", "if", "they", "have", "multiple", "version", "of", "different", "Gems", "install", "NUMBER", "So", "to", "me", "the", "argument", "that", "this", "should", "be", "keep", "separate", "from", "the", "Rails", "app", "doesn", "t", "hold", "much", "weight", "personally", "NUMBER", "Backup", "always", "requires", "gems", "through", "the", "gem", "function", "before", "require", "ing", "it", "meaning", "it", "always", "loads", "in", "the", "correct", "gem", "version", "and", "do", "not", "conflict", "even", "if", "newer", "version", "be", "install", "NUMBER", "Of", "course", "if", "you", "re", "bundling", "it", "along", "with", "say", "Carrierwave", "in", "a", "Rails", "app", "which", "also", "uses", "Fog", "but", "a", "later", "version", "then", "it", "will", "conflict", "because", "of", "Bundler", "NUMBER", "Now", "despite", "all", "of", "this", "it", "might", "be", "worth", "trying", "to", "just", "losen", "the", "dependencies", "to", "a", "rather", "than", "where", "any", "newer", "version", "would", "work", "rather", "than", "needing", "a", "certain", "minor", "version", "of", "a", "gem", "NUMBER", "I", "think", "most", "things", "be", "backwards", "compatible", "so", "there", "would", "less", "likely", "be", "need", "for", "dependency", "update", "when", "other", "gem", "authors", "update", "their", "gems", "and", "dependencies", "NUMBER", "What", "do", "other", "people", "think", "of", "this", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "This", "be", "all", "just", "a", "misunderstanding", "of", "how", "to", "use", "Bundler", "NUMBER", "Bundler", "be", "not", "a", "tool", "to", "_package_", "all", "the", "gems", "for", "every", "application", "relate", "to", "your", "project", "NUMBER", "It", "s", "purpose", "be", "to", "create", "an", "isolated", "environment", "for", "your", "application", "which", "include", "the", "specific", "version", "of", "all", "the", "gems", "your", "app", "requires", "NUMBER", "It", "s", "purpose", "be", "to", "solve", "these", "dependency", "issue", "NUMBER", "Backup", "be", "not", "a", "dependency", "of", "your", "Rails", "application", "and", "therefore", "should", "not", "be", "in", "your", "Gemfile", "NUMBER", "The", "only", "thing", "you", "should", "really", "keep", "with", "your", "Rails", "app", "and", "under", "SCM", "be", "the", "Backup", "config", "NUMBER", "rb", "and", "Models", "for", "backup", "jobs", "relate", "to", "your", "Rails", "app", "NUMBER", "If", "you", "wish", "to", "keep", "a", "specific", "version", "of", "Backup", "with", "your", "Rails", "project", "then", "you", "can", "place", "it", "in", "a", "subdirectory", "of", "your", "project", "like", "vendor", "backup", "NUMBER", "But", "it", "should", "have", "it", "s", "own", "Gemfile", "which", "should", "only", "contain", "those", "gems", "which", "Backup", "requires", "NUMBER", "To", "be", "clear", "don", "t", "put", "gem", "rails", "in", "Backup", "s", "Gemfile", "NUMBER", "Your", "cron", "jobs", "should", "run", "Backup", "within", "it", "s", "own", "environment", "NUMBER", "bash", "l", "c", "cd", "rails_app", "vendor", "backup", "bundle", "exec", "backup", "perform", "NUMBER", "If", "you", "want", "a", "rake", "task", "within", "your", "Rails", "application", "to", "run", "a", "backup", "job", "then", "you", "need", "to", "create", "a", "subshell", "outside", "of", "your", "app", "s", "environment", "so", "you", "can", "run", "Backup", "within", "it", "s", "environment", "NUMBER", "ruby", "rails_app", "Rakefile", "task", "backup", "do", "dir", "File", "NUMBER", "expand_path", "NUMBER", "__FILE__", "Bundler", "NUMBER", "with_clean_env", "do", "exec", "cd", "dir", "vendor", "backup", "bundle", "exec", "backup", "perform", "config", "file", "dir", "Backup", "config", "NUMBER", "rb", "NUMBER", "end", "end", "I", "understand", "your", "reservations", "but", "shouldn", "t", "it", "also", "be", "a", "goal", "of", "backup", "to", "continue", "progressing", "forward", "There", "s", "reasons", "that", "backups", "dependencies", "release", "new", "version", "like", "bug", "fix", "performance", "improvement", "or", "new", "features", "NUMBER", "I", "think", "it", "s", "in", "the", "best", "interest", "of", "the", "project", "to", "periodically", "update", "it", "s", "dependencies", "when", "there", "be", "not", "upgrade", "issue", "NUMBER", "Otherwise", "it", "s", "very", "short", "sighted", "to", "just", "say", "hey", "guys", "my", "setup", "works", "so", "there", "s", "no", "reason", "to", "update", "it", "NUMBER", "That", "s", "how", "projects", "slowly", "die", "as", "everyone", "else", "continues", "moving", "forward", "but", "the", "project", "waits", "so", "long", "to", "try", "get", "up", "to", "date", "that", "people", "move", "on", "elsewhere", "or", "it", "becomes", "more", "of", "a", "hassle", "to", "upgrade", "than", "it", "s", "worth", "NUMBER", "I", "m", "glad", "we", "agree", "on", "the", "need", "to", "gradually", "update", "dependencies", "NUMBER", "I", "just", "think", "it", "s", "simpler", "to", "update", "them", "gradually", "over", "time", "like", "this", "on", "a", "case", "by", "case", "basis", "NUMBER", "It", "s", "much", "more", "likely", "to", "cause", "issue", "when", "you", "attempt", "to", "update", "several", "gems", "at", "once", "than", "it", "be", "to", "update", "each", "gem", "on", "a", "case", "by", "case", "basis", "NUMBER", "Hi", "I", "m", "get", "an", "error", "when", "I", "try", "to", "sync", "directories", "use", "the", "s", "NUMBER", "syncer", "NUMBER", "First", "my", "particulars", "Red", "Hat", "Enterprise", "Linux", "Server", "release", "NUMBER", "Santiago", "Ruby", "Enterprise", "Edition", "ruby", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "MBARI", "NUMBER", "NUMBER", "x", "NUMBER", "on", "patchlevel", "NUMBER", "Backup", "NUMBER", "model", "be", "the", "generic", "s", "NUMBER", "sync", "NUMBER", "Only", "change", "to", "add", "the", "location", "of", "the", "s", "NUMBER", "bucket", "and", "path", "NUMBER", "One", "last", "note", "the", "failure", "works", "only", "when", "I", "try", "bigger", "directories", "NUMBER", "I", "made", "a", "very", "small", "test", "directory", "and", "the", "s", "NUMBER", "sync", "works", "great", "NUMBER", "Here", "s", "the", "error", "log", "NUMBER", "I", "took", "a", "look", "at", "the", "code", "and", "it", "seems", "to", "be", "fail", "at", "the", "point", "where", "it", "try", "to", "create", "some", "local", "file", "NUMBER", "I", "m", "run", "as", "root", "so", "I", "don", "t", "think", "there", "should", "be", "a", "permissions", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "Backup", "for", "Description", "for", "snip", "snip", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "backup", "NUMBER", "ruby", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "MBARI", "NUMBER", "NUMBER", "x", "NUMBER", "on", "patchlevel", "NUMBER", "x", "NUMBER", "_", "NUMBER", "linux", "MBARI", "NUMBER", "x", "NUMBER", "Ruby", "Enterprise", "Edition", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Syncer", "S", "NUMBER", "start", "the", "syncing", "process", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Generating", "checksums", "for", "home", "snip", "public_html", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "ModelError", "Backup", "for", "Description", "for", "snip", "snip", "Failed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "An", "Error", "occured", "which", "has", "cause", "this", "Backup", "to", "abort", "before", "completion", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Reason", "NoMethodError", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "undefined", "method", "captures", "for", "nil", "NilClass", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Backtrace", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "initialize", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "new", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "local_files", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "collect", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "local_files", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "all_file_names", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "sync", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "syncer", "cloud", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "to_proc", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "cli", "utility", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "cli", "utility", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "cli", "utility", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "send", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "NUMBER", "NUMBER", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "bin", "backup", "NUMBER", "in", "load", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "opt", "ruby", "enterprise", "bin", "backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "ModelError", "If", "you", "have", "other", "Backup", "jobs", "triggers", "configured", "to", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "will", "now", "attempt", "to", "continue", "NUMBER", "I", "just", "push", "a", "new", "version", "of", "the", "gem", "NUMBER", "you", "can", "try", "that", "NUMBER", "However", "the", "thing", "with", "the", "Syncers", "be", "that", "it", "s", "very", "thread", "intensive", "unless", "you", "use", "processes", "which", "be", "very", "memory", "intensive", "and", "not", "really", "recommended", "NUMBER", "In", "Ruby", "NUMBER", "we", "only", "have", "green", "threads", "and", "these", "might", "be", "the", "cause", "of", "this", "when", "dealing", "with", "more", "file", "directories", "at", "a", "higher", "concurrency", "level", "NUMBER", "You", "could", "try", "to", "things", "real", "quick", "NUMBER", "Update", "the", "Backup", "gem", "to", "NUMBER", "as", "there", "have", "be", "some", "fix", "the", "past", "NUMBER", "NUMBER", "months", "including", "syncer", "improvement", "NUMBER", "Lower", "the", "concurrency", "level", "the", "amount", "of", "threads", "that", "be", "spawned", "NUMBER", "Try", "use", "MRI", "NUMBER", "instead", "of", "NUMBER", "since", "it", "uses", "native", "threads", "and", "do", "the", "job", "extremely", "well", "for", "me", "at", "least", "I", "just", "did", "a", "run", "transferring", "about", "NUMBER", "mb", "of", "a", "lot", "of", "small", "file", "folders", "use", "a", "concurrency", "level", "of", "NUMBER", "meaning", "NUMBER", "threads", "and", "they", "all", "transferred", "in", "a", "matter", "of", "seconds", "NUMBER", "You", "might", "also", "try", "going", "to", "the", "directory", "that", "s", "cause", "this", "error", "and", "run", "the", "following", "for", "n", "in", "find", "NUMBER", "type", "f", "do", "echo", "n", "NUMBER", "openssl", "md", "NUMBER", "n", "NUMBER", "NUMBER", "tee", "a", "debug", "NUMBER", "log", "grep", "v", "MD", "NUMBER", "do", "This", "should", "produce", "nothing", "but", "dots", "until", "finished", "NUMBER", "If", "anything", "else", "be", "output", "check", "the", "full", "results", "in", "debug", "NUMBER", "log", "to", "see", "which", "file", "s", "be", "cause", "a", "problem", "NUMBER", "If", "you", "be", "use", "syncers", "and", "any", "of", "the", "add", "directories", "contain", "a", "filename", "with", "character", "it", "will", "cause", "this", "error", "NUMBER", "For", "example", "if", "you", "have", "add", "a", "directory", "uploads", "to", "a", "syncer", "and", "uploads", "contains", "a", "file", "named", "example", "NUMBER", "NUMBER", "png", "backup", "command", "will", "fail", "with", "the", "posted", "error", "NUMBER", "This", "happens", "because", "Backup", "Syncer", "Cloud", "LocalFile", "initialize", "uses", "regular", "expression", "MD", "NUMBER", "w", "which", "will", "fail", "to", "match", "such", "filenames", "NUMBER", "We", "might", "use", "some", "look", "ahead", "regular", "expressions", "but", "unfortunately", "I", "don", "t", "have", "that", "much", "regex", "proficiency", "NUMBER", "Another", "thing", "I", "m", "thinking", "of", "be", "reversing", "the", "string", "before", "match", "as", "the", "right", "hand", "side", "of", "be", "a", "hash", "and", "more", "regular", "chain", "it", "to", "match", "for", "captures", "and", "then", "map", "reverse", "though", "I", "don", "t", "know", "if", "that", "would", "affect", "binary", "unicode", "string", "NUMBER", "Or", "something", "simpler", "like", "this", "ruby", "untested", "line", "sanitize", "line", "NUMBER", "chomp", "NUMBER", "gsub", "MD", "NUMBER", "line", "w", "md", "NUMBER", "NUMBER", "path", "line", "NUMBER", "gsub", "w", "Good", "catch", "NUMBER", "In", "this", "case", "it", "s", "probably", "better", "to", "just", "split", "this", "line", "up", "NUMBER", "rb", "def", "initialize", "directory", "line", "invalid", "false", "directory", "sanitize", "directory", "line", "sanitize", "line", "NUMBER", "chomp", "path", "line", "NUMBER", "slice", "NUMBER", "NUMBER", "md", "NUMBER", "line", "NUMBER", "slice", "NUMBER", "NUMBER", "relative_path", "path", "NUMBER", "sub", "directory", "end", "ETA", "I", "mean", "slice", "not", "split", "I", "be", "having", "the", "same", "issue", "NUMBER", "but", "no", "matter", "what", "i", "do", "it", "will", "not", "sync", "NUMBER", "i", "be", "use", "Backup", "gem", "NUMBER", "How", "s", "the", "best", "way", "to", "get", "this", "into", "my", "app", "Should", "I", "reference", "the", "syncer_updates", "branch", "in", "my", "Gemfile", "This", "be", "broken", "for", "me", "in", "a", "production", "app", "NUMBER", "cjohnson", "You", "could", "but", "that", "branch", "be", "actually", "in", "my", "fork", "NUMBER", "I", "just", "push", "a", "new", "branch", "based", "on", "the", "develop", "branch", "which", "include", "all", "my", "pull", "request", "as", "well", "as", "the", "latest", "patch", "that", "get", "merge", "directly", "to", "master", "NUMBER", "You", "re", "welcome", "to", "use", "it", "until", "the", "next", "gem", "release", "NUMBER", "ruby", "gem", "backup", "git", "git", "github", "NUMBER", "com", "burns", "backup", "NUMBER", "git", "branch", "current", "Great", "Hi", "I", "m", "having", "the", "same", "issue", "as", "some", "of", "my", "file", "have", "the", "and", "chinese", "characters", "in", "their", "name", "NUMBER", "I", "see", "that", "the", "issue", "has", "be", "close", "NUMBER", "days", "ago", "NUMBER", "How", "do", "I", "get", "the", "fix", "for", "this", "install", "the", "latest", "gem", "or", "do", "I", "have", "to", "do", "a", "git", "clone", "and", "build", "my", "gem", "NUMBER", "Any", "replies", "appreciated", "NUMBER", "Thanks", "Sanjay", "NUMBER", "Same", "here", "please", "push", "a", "new", "version", "NUMBER", "Thanks", "Cool", "Adds", "support", "for", "specify", "a", "key", "file", "to", "use", "for", "encrypting", "with", "OpenSSL", "test", "for", "configuration", "and", "encryptor", "Adds", "support", "for", "pass_file", "and", "salt", "options", "on", "backup", "decrypt", "thor", "task", "NUMBER", "no", "exist", "test", "for", "thor", "tasks", "Will", "do", "Any", "idea", "when", "you", "plan", "on", "bumping", "the", "gem", "version", "I", "m", "wondering", "if", "it", "would", "be", "hard", "to", "implement", "generating", "checksum", "for", "each", "archive", "NUMBER", "If", "you", "don", "t", "have", "time", "to", "implement", "it", "maybe", "you", "have", "some", "advice", "where", "to", "put", "this", "Maybe", "even", "separate", "module", "There", "be", "many", "algorithms", "generating", "file", "checksum", "the", "most", "popular", "methods", "be", "md", "NUMBER", "and", "sha", "NUMBER", "or", "more", "advance", "variations", "sha", "NUMBER", "sha", "NUMBER", "sha", "NUMBER", "sha", "NUMBER", "most", "of", "linux", "distros", "use", "them", "NUMBER", "But", "if", "we", "have", "one", "implementation", "add", "other", "shouldn", "t", "be", "very", "hard", "NUMBER", "I", "think", "that", "generating", "checksum", "at", "remote", "machine", "won", "t", "be", "possible", "beside", "machines", "with", "shell", "access", "but", "we", "can", "dump", "generate", "checksum", "to", "file", "and", "upload", "it", "to", "storage", "space", "with", "archive", "most", "important", "thing", "be", "having", "checksum", "at", "all", "Now", "lets", "talk", "about", "tool", "ruby", "has", "libraries", "for", "generating", "each", "of", "mention", "checksum", "for", "example", "ruby", "generating", "md", "NUMBER", "require", "digest", "md", "NUMBER", "Digest", "MD", "NUMBER", "file", "data", "NUMBER", "NUMBER", "NUMBER", "sql", "NUMBER", "gz", "ruby", "generating", "sha", "NUMBER", "require", "digest", "sha", "NUMBER", "Digest", "SHA", "NUMBER", "file", "data", "NUMBER", "NUMBER", "NUMBER", "sql", "NUMBER", "gz", "ruby", "generating", "sha", "NUMBER", "require", "digest", "sha", "NUMBER", "Digest", "SHA", "NUMBER", "file", "data", "NUMBER", "NUMBER", "NUMBER", "sql", "NUMBER", "gz", "Each", "of", "above", "examples", "will", "generate", "you", "completly", "portable", "checksum", "generating", "checksum", "of", "the", "same", "file", "will", "give", "you", "the", "same", "output", "at", "any", "machine", "by", "any", "tool", "which", "implement", "given", "algorithm", "NUMBER", "Only", "minor", "problem", "be", "speed", "of", "ruby", "NUMBER", "Generating", "sha", "NUMBER", "checksum", "this", "the", "most", "complex", "one", "it", "takes", "most", "time", "to", "compute", "this", "of", "NUMBER", "GB", "file", "at", "Intel", "Core", "i", "NUMBER", "NUMBER", "GHz", "by", "ruby", "takes", "about", "NUMBER", "seconds", "generating", "one", "by", "system", "tool", "takes", "about", "NUMBER", "seconds", "NUMBER", "I", "m", "fine", "with", "that", "but", "I", "think", "that", "you", "should", "now", "NUMBER", "And", "last", "thing", "output", "of", "checksum", "should", "go", "to", "file", "and", "file", "should", "like", "like", "below", "if", "we", "have", "multiple", "archives", "in", "one", "task", "bash", "NUMBER", "a", "NUMBER", "e", "NUMBER", "a", "NUMBER", "c", "NUMBER", "df", "NUMBER", "a", "NUMBER", "ab", "NUMBER", "e", "NUMBER", "ce", "NUMBER", "a", "NUMBER", "e", "NUMBER", "bd", "NUMBER", "e", "NUMBER", "fb", "NUMBER", "e", "NUMBER", "bf", "NUMBER", "cb", "NUMBER", "bf", "NUMBER", "d", "NUMBER", "ef", "NUMBER", "c", "NUMBER", "c", "NUMBER", "fbcd", "NUMBER", "aff", "NUMBER", "c", "NUMBER", "ba", "NUMBER", "cd", "NUMBER", "e", "NUMBER", "fc", "NUMBER", "f", "NUMBER", "ecfebac", "NUMBER", "bcc", "NUMBER", "ce", "NUMBER", "d", "NUMBER", "data", "NUMBER", "NUMBER", "NUMBER", "sql", "NUMBER", "gz", "e", "NUMBER", "b", "NUMBER", "a", "NUMBER", "e", "NUMBER", "d", "NUMBER", "af", "NUMBER", "d", "NUMBER", "f", "NUMBER", "aabbf", "NUMBER", "f", "NUMBER", "e", "NUMBER", "cf", "NUMBER", "a", "NUMBER", "c", "NUMBER", "cd", "NUMBER", "feb", "NUMBER", "ec", "NUMBER", "f", "NUMBER", "b", "NUMBER", "ed", "NUMBER", "aca", "NUMBER", "fea", "NUMBER", "a", "NUMBER", "fa", "NUMBER", "acf", "NUMBER", "ad", "NUMBER", "fd", "NUMBER", "e", "NUMBER", "c", "NUMBER", "data", "NUMBER", "NUMBER", "NUMBER", "sql", "NUMBER", "gz", "NUMBER", "c", "NUMBER", "a", "NUMBER", "e", "NUMBER", "fcf", "NUMBER", "b", "NUMBER", "dda", "NUMBER", "c", "NUMBER", "d", "NUMBER", "ff", "NUMBER", "ee", "NUMBER", "f", "NUMBER", "aa", "NUMBER", "a", "NUMBER", "c", "NUMBER", "de", "NUMBER", "a", "NUMBER", "ba", "NUMBER", "f", "NUMBER", "fa", "NUMBER", "d", "NUMBER", "fcb", "NUMBER", "b", "NUMBER", "d", "NUMBER", "fc", "NUMBER", "faee", "NUMBER", "edc", "NUMBER", "b", "NUMBER", "e", "NUMBER", "bfd", "NUMBER", "f", "NUMBER", "e", "NUMBER", "df", "NUMBER", "data", "NUMBER", "NUMBER", "NUMBER", "sql", "NUMBER", "gz", "Each", "lines", "contains", "TAG", "TAG", "such", "structure", "makes", "validating", "data", "easier", "for", "command", "line", "tool", "test", "NUMBER", "sha", "NUMBER", "be", "file", "from", "above", "bash", "sha", "NUMBER", "sum", "c", "test", "NUMBER", "sha", "NUMBER", "data", "NUMBER", "NUMBER", "NUMBER", "sql", "NUMBER", "gz", "OK", "data", "NUMBER", "NUMBER", "NUMBER", "sql", "NUMBER", "gz", "OK", "data", "NUMBER", "NUMBER", "NUMBER", "sql", "NUMBER", "gz", "OK", "And", "I", "ve", "forgotten", "about", "one", "thing", "command", "line", "utils", "be", "provide", "by", "coreutils", "package", "LINK", "Cool", "thanks", "for", "the", "detailed", "explanation", "This", "and", "NUMBER", "be", "what", "I", "want", "to", "get", "incorporated", "if", "possible", "in", "one", "of", "the", "future", "release", "of", "backup", "NUMBER", "I", "ll", "have", "to", "look", "at", "the", "possibilities", "NUMBER", "A", "question", "though", "as", "I", "don", "t", "know", "how", "to", "get", "it", "work", "i", "m", "probably", "doing", "something", "wrong", "NUMBER", "I", "have", "a", "file", "call", "foo", "NUMBER", "rb", "and", "I", "attach", "a", "sha", "NUMBER", "string", "prefixed", "to", "it", "with", "mv", "foo", "NUMBER", "rb", "shasum", "foo", "NUMBER", "rb", "So", "then", "I", "have", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "Now", "when", "I", "run", "this", "shasum", "c", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "It", "doesn", "t", "return", "anything", "and", "stays", "silent", "but", "when", "I", "run", "it", "with", "the", "w", "flag", "flags", "show", "warnings", "shasum", "wc", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "shasum", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "NUMBER", "improperly", "formatted", "SHA", "checksum", "line", "shasum", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "NUMBER", "improperly", "formatted", "SHA", "checksum", "line", "shasum", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "NUMBER", "improperly", "formatted", "SHA", "checksum", "line", "shasum", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "NUMBER", "improperly", "formatted", "SHA", "checksum", "line", "shasum", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "NUMBER", "improperly", "formatted", "SHA", "checksum", "line", "shasum", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "NUMBER", "improperly", "formatted", "SHA", "checksum", "line", "shasum", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "NUMBER", "improperly", "formatted", "SHA", "checksum", "line", "shasum", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "NUMBER", "improperly", "formatted", "SHA", "checksum", "line", "Any", "idea", "what", "I", "m", "doing", "wrong", "shasum", "h", "Usage", "shasum", "OPTION", "FILE", "NUMBER", "or", "shasum", "OPTION", "check", "FILE", "Print", "or", "check", "SHA", "checksums", "NUMBER", "With", "no", "FILE", "or", "when", "FILE", "be", "read", "standard", "input", "NUMBER", "a", "algorithm", "NUMBER", "default", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "b", "binary", "read", "file", "in", "binary", "mode", "default", "on", "DOS", "Windows", "c", "check", "check", "SHA", "sums", "against", "given", "list", "p", "portable", "read", "file", "in", "portable", "mode", "produces", "same", "digest", "on", "Windows", "Unix", "Mac", "t", "text", "read", "file", "in", "text", "mode", "default", "The", "following", "two", "options", "be", "useful", "only", "when", "verifying", "checksums", "s", "status", "don", "t", "output", "anything", "status", "code", "shows", "success", "w", "warn", "warn", "about", "improperly", "formatted", "SHA", "checksum", "lines", "h", "help", "display", "this", "help", "and", "exit", "v", "version", "output", "version", "information", "and", "exit", "The", "sums", "be", "computed", "as", "describe", "in", "FIPS", "PUB", "NUMBER", "NUMBER", "When", "checking", "the", "input", "should", "be", "a", "former", "output", "of", "this", "program", "NUMBER", "The", "default", "mode", "be", "to", "print", "a", "line", "with", "checksum", "a", "character", "indicating", "type", "for", "binary", "for", "portable", "for", "text", "and", "name", "for", "each", "FILE", "NUMBER", "I", "think", "you", "misunderstanded", "me", "a", "little", "NUMBER", "You", "don", "t", "create", "file", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "but", "file", "foo", "NUMBER", "sum", "WITH", "content", "bash", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fec", "NUMBER", "c", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "de", "NUMBER", "cb", "NUMBER", "foo", "NUMBER", "rb", "Full", "example", "bash", "compute", "sum", "and", "write", "it", "to", "file", "shasum", "foo", "NUMBER", "rb", "foo", "NUMBER", "sum", "check", "sum", "shasum", "c", "foo", "NUMBER", "sum", "foo", "NUMBER", "rb", "OK", "Ah", "now", "it", "works", "NUMBER", "Yeah", "I", "misunderstood", "that", "part", "NUMBER", "So", "you", "basically", "append", "multiple", "sums", "to", "that", "single", "file", "in", "the", "case", "if", "backing", "up", "a", "backup", "in", "multiple", "chunks", "Yes", "exactly", "as", "you", "ve", "describe", "NUMBER", "It", "s", "easy", "to", "check", "if", "data", "be", "consistent", "NUMBER", "Have", "you", "tried", "to", "implement", "this", "If", "not", "maybe", "do", "you", "have", "any", "ideas", "where", "it", "should", "be", "implement", "NUMBER", "I", "think", "burns", "might", "be", "on", "to", "something", "already", "NUMBER", "It", "s", "something", "that", "we", "d", "like", "to", "have", "implement", "but", "preferably", "only", "if", "it", "works", "across", "all", "storages", "for", "consistency", "NUMBER", "We", "just", "finally", "push", "out", "NUMBER", "so", "we", "re", "now", "looking", "in", "to", "issue", "NUMBER", "and", "this", "NUMBER", "meskyanichi", "I", "would", "add", "that", "if", "the", "backup", "file", "be", "be", "stored", "locally", "first", "and", "then", "transferred", "to", "remote", "storage", "it", "s", "important", "to", "generate", "a", "checksum", "on", "the", "local", "disk", "before", "uploading", "to", "the", "remote", "drive", "NUMBER", "Once", "it", "s", "on", "the", "remote", "drive", "a", "checksum", "should", "be", "generate", "there", "as", "well", "to", "verify", "file", "integrity", "NUMBER", "That", "be", "to", "say", "generate", "backup", "file", "take", "checksum", "upload", "to", "remote", "take", "checksum", "compare", "they", "should", "be", "identical", "I", "don", "t", "know", "about", "all", "the", "remote", "storages", "you", "have", "but", "S", "NUMBER", "support", "passing", "an", "MD", "NUMBER", "checksum", "with", "the", "PUT", "request", "to", "save", "a", "file", "LINK", "Amazon", "S", "NUMBER", "s", "REST", "PUT", "operation", "provides", "the", "ability", "to", "specify", "an", "MD", "NUMBER", "checksum", "LINK", "for", "the", "data", "be", "sent", "to", "S", "NUMBER", "When", "the", "request", "arrives", "at", "S", "NUMBER", "an", "MD", "NUMBER", "checksum", "will", "be", "recalculated", "for", "the", "object", "data", "received", "and", "compared", "to", "the", "provide", "MD", "NUMBER", "checksum", "NUMBER", "If", "there", "s", "a", "mismatch", "the", "PUT", "will", "be", "fail", "preventing", "data", "that", "was", "corrupted", "on", "the", "wire", "from", "be", "write", "into", "S", "NUMBER", "At", "that", "point", "you", "can", "retry", "the", "PUT", "NUMBER", "MD", "NUMBER", "checksums", "be", "also", "returned", "in", "the", "response", "to", "REST", "GET", "request", "and", "may", "be", "use", "client", "side", "to", "ensure", "that", "the", "data", "returned", "by", "the", "GET", "wasn", "t", "corrupted", "in", "transit", "NUMBER", "If", "you", "need", "to", "ensure", "that", "values", "returned", "by", "a", "GET", "request", "be", "byte", "for", "byte", "what", "was", "stored", "in", "the", "service", "calculate", "the", "returned", "value", "s", "MD", "NUMBER", "checksum", "and", "compare", "it", "to", "the", "checksum", "returned", "along", "with", "the", "value", "by", "the", "service", "NUMBER", "Hi", "I", "m", "work", "for", "ragnarson", "NUMBER", "com", "and", "as", "part", "of", "my", "daily", "task", "I", "ve", "add", "support", "for", "pbzip", "NUMBER", "compressor", "to", "your", "backup", "gem", "NUMBER", "It", "s", "basically", "copy", "paste", "of", "bzip", "NUMBER", "compressor", "with", "add", "p", "option", "for", "processors", "count", "NUMBER", "This", "p", "be", "optional", "by", "default", "pbzip", "NUMBER", "uses", "all", "available", "cpus", "NUMBER", "I", "ve", "also", "write", "specs", "everything", "runs", "smoothly", "maybe", "I", "ll", "expand", "it", "in", "the", "future", "NUMBER", "Only", "things", "I", "haven", "t", "edit", "be", "gem", "version", "and", "README", "NUMBER", "md", "NUMBER", "It", "would", "be", "great", "if", "you", "include", "my", "code", "into", "gem", "we", "won", "t", "have", "to", "keep", "separate", "gem", "version", "at", "our", "servers", "NUMBER", "Szymon", "Great", "I", "ll", "update", "wiki", "page", "within", "an", "hour", "NUMBER", "Hey", "Guys", "Added", "Riak", "database", "backup", "support", "with", "specs", "NUMBER", "Tested", "this", "out", "and", "it", "works", "fine", "NUMBER", "Let", "me", "know", "if", "you", "guys", "have", "question", "NUMBER", "Thanks", "Joe", "meskyanichi", "add", "to", "the", "wiki", "riak", "admin", "backup", "be", "currently", "deprecate", "and", "slow", "as", "mud", "NUMBER", "The", "only", "good", "way", "of", "to", "backup", "riak", "be", "to", "snapshot", "it", "s", "file", "tree", "ring", "file", "bitcast", "data", "and", "search", "index", "NUMBER", "The", "CloudFiles", "adapter", "uploads", "file", "with", "the", "content", "type", "application", "json", "NUMBER", "It", "should", "upload", "file", "with", "the", "default", "content", "type", "application", "octet", "stream", "unless", "you", "want", "to", "get", "tricky", "and", "figure", "out", "the", "right", "content", "type", "depending", "on", "the", "encryptor", "compressor", "NUMBER", "Fog", "do", "not", "set", "a", "default", "content", "type", "for", "the", "rackspace", "storage", "file", "model", "NUMBER", "It", "sets", "whatever", "content", "type", "you", "give", "it", "if", "you", "give", "it", "one", "LINK", "L", "NUMBER", "NUMBER", "To", "run", "mongo", "backups", "on", "heroku", "i", "have", "uploaded", "mongodump", "to", "bin", "folder", "of", "the", "application", "NUMBER", "I", "successfully", "receive", "backup", "to", "my", "S", "NUMBER", "bucket", "the", "problem", "be", "that", "gem", "crushes", "on", "cleanup", "step", "NUMBER", "Here", "be", "stack", "trace", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "clock", "NUMBER", "Triggering", "db_backup", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "clock", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "database", "backup", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "clock", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Database", "MongoDB", "start", "dumping", "and", "archiving", "xxxxxxxxxx", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "clock", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "db_backup", "NUMBER", "tar", "NUMBER", "gz", "to", "bucket", "xxxxxxx", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "clock", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "heroku", "clock", "NUMBER", "Process", "exited", "Im", "work", "on", "Cedar", "NUMBER", "I", "think", "it", "be", "impossible", "on", "Bamboo", "NUMBER", "Heroku", "just", "says", "Process", "exited", "right", "after", "the", "cleaning", "of", "the", "tmp", "file", "NUMBER", "No", "it", "crushes", "NUMBER", "Here", "be", "the", "rest", "of", "log", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "heroku", "clock", "NUMBER", "Process", "exited", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "heroku", "clock", "NUMBER", "State", "change", "from", "up", "to", "crashed", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "heroku", "clock", "NUMBER", "State", "change", "from", "crashed", "to", "created", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "heroku", "clock", "NUMBER", "State", "change", "from", "created", "to", "starting", "Im", "spawning", "clock", "worker", "LINK", "NUMBER", "So", "crush", "breaks", "the", "scheduling", "NUMBER", "every", "NUMBER", "hour", "db_backup", "do", "if", "Rails", "NUMBER", "env", "NUMBER", "production", "exec", "backup", "perform", "trigger", "db_backup", "config_file", "config", "backup", "NUMBER", "rb", "end", "end", "It", "s", "rather", "strange", "that", "it", "crushes", "on", "cleanup", "NUMBER", "that", "means", "that", "writable", "access", "exists", "since", "backup", "file", "was", "created", "NUMBER", "May", "be", "heroku", "doesn", "t", "allow", "to", "delete", "file", "from", "temp", "folders", "I", "ve", "already", "posted", "question", "to", "them", "NUMBER", "I", "ll", "post", "results", "to", "this", "thread", "NUMBER", "This", "be", "not", "heroku", "problem", "NUMBER", "I", "have", "run", "foreman", "on", "my", "localc", "machine", "and", "it", "also", "crushes", "after", "the", "end", "of", "backup", "NUMBER", "May", "be", "you", "killing", "process", "from", "the", "gem", "NUMBER", "I", "remove", "backup", "job", "from", "clockwork", "process", "it", "be", "recommended", "by", "gem", "and", "put", "backup", "execution", "code", "to", "resque", "job", "NUMBER", "Now", "everything", "works", "fine", "NUMBER", "BTW", "Do", "you", "know", "what", "be", "the", "better", "way", "to", "call", "console", "command", "from", "ruby", "Using", "exec", "sh", "or", "something", "else", "NUMBER", "I", "don", "t", "use", "whenever", "so", "I", "cannot", "use", "command", "you", "provide", "in", "your", "wiki", "NUMBER", "Great", "thanks", "NUMBER", "Example", "mongodb", "user", "pass", "server", "port", "db_name", "Fix", "example", "uri", "Currently", "I", "use", "mongo", "driver", "parser", "database", "MongoDB", "do", "db", "parser", "Mongo", "URIParser", "NUMBER", "new", "ENV", "MONGOLAB_URI", "db", "NUMBER", "host", "parser", "NUMBER", "nodes", "NUMBER", "NUMBER", "db", "NUMBER", "port", "parser", "NUMBER", "nodes", "NUMBER", "NUMBER", "if", "parser", "NUMBER", "auths", "NUMBER", "db", "NUMBER", "name", "parser", "NUMBER", "auths", "NUMBER", "db_name", "db", "NUMBER", "username", "parser", "NUMBER", "auths", "NUMBER", "username", "db", "NUMBER", "password", "parser", "NUMBER", "auths", "NUMBER", "password", "end", "db", "NUMBER", "ipv", "NUMBER", "false", "db", "NUMBER", "additional_options", "db", "NUMBER", "lock", "false", "end", "uri", "URI", "NUMBER", "parse", "env", "uri", "raise", "InvalidScheme", "NUMBER", "new", "must", "be", "mongodb", "unless", "uri", "NUMBER", "scheme", "mongodb", "host", "uri", "NUMBER", "host", "port", "uri", "NUMBER", "port", "database", "uri", "NUMBER", "path", "NUMBER", "gsub", "username", "uri", "NUMBER", "user", "password", "uri", "NUMBER", "password", "Move", "everything", "from", "bin", "backup", "to", "lib", "backup", "cli", "NUMBER", "rb", "so", "that", "bin", "backup", "merely", "requires", "backup", "cli", "and", "calls", "into", "Backup", "Cli", "NUMBER", "art", "NUMBER", "This", "would", "make", "it", "easier", "to", "customize", "patch", "the", "behavior", "of", "backup", "it", "s", "expected", "it", "s", "in", "ruby", "without", "having", "to", "modify", "the", "gem", "s", "actual", "file", "we", "just", "make", "a", "new", "bin", "script", "that", "requires", "backup", "cli", "makes", "the", "patches", "and", "then", "calls", "into", "Backup", "Cli", "NUMBER", "art", "NUMBER", "MongoDB", "shell", "NUMBER", "do", "not", "support", "db", "option", "NUMBER", "mongo", "help", "MongoDB", "shell", "version", "NUMBER", "usage", "mongo", "options", "db", "address", "file", "names", "ending", "in", "NUMBER", "js", "db", "address", "can", "be", "foo", "foo", "database", "on", "local", "machine", "NUMBER", "foo", "foo", "database", "on", "NUMBER", "machine", "NUMBER", "NUMBER", "foo", "foo", "database", "on", "NUMBER", "machine", "on", "port", "NUMBER", "options", "shell", "run", "the", "shell", "after", "executing", "file", "nodb", "don", "t", "connect", "to", "mongod", "on", "startup", "no", "db", "address", "arg", "expected", "norc", "will", "not", "run", "the", "NUMBER", "mongorc", "NUMBER", "js", "file", "on", "start", "up", "quiet", "be", "less", "chatty", "port", "arg", "port", "to", "connect", "to", "host", "arg", "server", "to", "connect", "to", "eval", "arg", "evaluate", "javascript", "u", "username", "arg", "username", "for", "authentication", "p", "password", "arg", "password", "for", "authentication", "h", "help", "show", "this", "usage", "information", "version", "show", "version", "information", "verbose", "increase", "verbosity", "ipv", "NUMBER", "enable", "IPv", "NUMBER", "support", "disabled", "by", "default", "file", "names", "a", "list", "of", "file", "to", "run", "NUMBER", "file", "have", "to", "end", "in", "NUMBER", "js", "and", "will", "exit", "after", "unless", "shell", "be", "specified", "If", "there", "be", "a", "db", "Backup", "MongoDB", "name", "and", "_only", "if_", "then", "it", "should", "try", "to", "connect", "use", "the", "command", "line", "mongo", "HOST", "PORT", "DB", "other", "options", "NUMBER", "If", "there", "be", "no", "db", "then", "it", "should", "try", "to", "connect", "use", "the", "command", "line", "mongo", "HOST", "PORT", "other", "options", "NUMBER", "When", "I", "pass", "the", "option", "db", "I", "get", "Exception", "that", "get", "raise", "Backup", "Exception", "CommandFailed", "Failed", "to", "run", "echo", "on", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "The", "status", "code", "returned", "was", "pid", "NUMBER", "exit", "NUMBER", "STDOUT", "was", "ERROR", "unknown", "option", "db", "Note", "I", "initially", "monkey", "patched", "my", "copy", "of", "backup", "to", "only", "include", "the", "db", "option", "if", "there", "be", "a", "name", "and", "to", "skip", "the", "db", "option", "if", "there", "be", "no", "name", "because", "I", "wanted", "to", "try", "backup", "with", "oplog", "which", "doesn", "t", "support", "single", "database", "mode", "NUMBER", "mongodump", "continues", "to", "take", "a", "db", "parameter", "so", "that", "s", "fine", "NUMBER", "I", "m", "just", "talking", "about", "mongo", "which", "be", "call", "when", "database", "MongoDB", "do", "resource", "resource", "NUMBER", "lock", "true", "end", "in", "order", "to", "perform", "the", "locking", "unlocking", "before", "and", "after", "NUMBER", "Now", "that", "I", "m", "looking", "at", "it", "def", "lock_database", "lock_command", "TAG", "napisa\u0142", "We", "would", "have", "to", "ask", "tomash", "I", "think", "he", "was", "the", "one", "that", "implement", "the", "un", "lock", "feature", "because", "MongoDB", "didn", "t", "support", "it", "at", "that", "time", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Original", "discussion", "was", "in", "NUMBER", "and", "my", "pull", "request", "was", "NUMBER", "yfeldblum", "if", "looks", "like", "bug", "in", "my", "code", "obviously", "it", "should", "lock", "target", "database", "instead", "of", "admin", "but", "it", "s", "worth", "to", "check", "it", "was", "over", "half", "year", "ago", "and", "I", "don", "t", "remember", "if", "there", "wasn", "t", "some", "rationale", "Ok", "find", "this", "LINK", "Command", "fsyncCommand", "ShellHelpers", "NUMBER", "It", "looks", "that", "you", "must", "run", "it", "on", "admin", "v", "NUMBER", "methods", "don", "t", "accept", "params", "but", "auto", "switch", "to", "admin", "database", "so", "probably", "we", "should", "leave", "this", "as", "it", "was", "NUMBER", "In", "archive", "NUMBER", "rb", "method", "def", "perform", "maybe", "there", "should", "be", "some", "validation", "that", "each", "paths", "do", "exists", "NUMBER", "If", "one", "doesn", "t", "it", "crashes", "saying", "something", "like", "this", "Backup", "Exception", "CommandFailed", "Failed", "to", "run", "tar", "on", "i", "NUMBER", "linux", "NUMBER", "That", "be", "a", "simple", "suggestion", "NUMBER", "Is", "it", "on", "the", "master", "only", "Not", "NUMBER", "sure", "not", "work", "but", "I", "think", "I", "did", "not", "have", "the", "STDERR", "details", "NUMBER", "be", "I", "wrong", "Well", "I", "feel", "stupid", "NUMBER", "Sorry", "for", "bothering", "you", "Must", "be", "me", "NUMBER", "s", "The", "CloudFiles", "adapter", "should", "support", "a", "rackspace", "server", "talking", "to", "rackspace", "cloud", "file", "over", "the", "datacenter", "s", "internal", "LAN", "know", "as", "ServiceNet", "NUMBER", "This", "LAN", "be", "significantly", "faster", "and", "be", "not", "billed", "NUMBER", "The", "Fog", "key", "for", "the", "this", "which", "should", "be", "pass", "to", "Fog", "Storage", "NUMBER", "new", "be", "rackspace_servicenet", "NUMBER", "Only", "a", "value", "of", "true", "TrueClass", "be", "accepted", "as", "signifying", "to", "use", "ServiceNet", "so", "the", "CloudFiles", "adapter", "should", "pass", "rackspace_servicenet", "true", "if", "the", "model", "config", "file", "says", "to", "use", "ServiceNet", "NUMBER", "Yes", "LINK", "L", "NUMBER", "NUMBER", "So", "long", "as", "the", "server", "you", "be", "transferring", "_from_", "be", "in", "the", "same", "region", "datacenter", "as", "the", "cloud", "file", "system", "you", "be", "transferring", "_to_", "NUMBER", "But", "that", "s", "just", "a", "detail", "that", "s", "beside", "the", "point", "when", "it", "comes", "to", "meskyanichi", "backup", "NUMBER", "The", "Fog", "storage", "provider", "would", "merge", "the", "S", "NUMBER", "CloudFiles", "and", "Ninefold", "providers", "behind", "a", "common", "interface", "NUMBER", "It", "would", "also", "automatically", "permit", "storage", "to", "any", "object", "storage", "service", "support", "by", "Fog", "of", "which", "there", "be", "many", "NUMBER", "store_with", "Fog", "do", "storage", "storage", "NUMBER", "provider", "rackspace", "storage", "NUMBER", "directory", "container_or_bucket_name", "etc", "end", "NUMBER", "When", "a", "failure", "to", "upload", "a", "backup", "to", "CloudFiles", "occur", "the", "CloudFiles", "adapter", "prints", "an", "error", "and", "exits", "immediately", "LINK", "L", "NUMBER", "NUMBER", "NUMBER", "In", "this", "case", "the", "notifiers", "be", "not", "invoked", "NUMBER", "The", "notifiers", "should", "be", "invoked", "on", "every", "failure", "including", "failure", "to", "transfer", "to", "storage", "NUMBER", "The", "entire", "backtrace", "should", "also", "be", "logged", "NUMBER", "Thanks", "Permit", "strings", "instead", "of", "symbols", "including", "for", "triggers", "archives", "etc", "If", "a", "symbol", "be", "given", "automatically", "convert", "to", "store", "as", "a", "string", "NUMBER", "Reason", "easily", "to", "support", "names", "that", "be", "awkward", "as", "symbols", "NUMBER", "There", "s", "nothing", "stopping", "us", "from", "storing", "any", "arbitrary", "text", "as", "a", "symbol", "NUMBER", "rvm", "NUMBER", "exec", "ruby", "e", "puts", "hi", "bobby", "NUMBER", "to_sym", "NUMBER", "inspect", "hi", "bobby", "rvm", "NUMBER", "exec", "ruby", "e", "puts", "hi", "bobby", "NUMBER", "to_sym", "NUMBER", "inspect", "hi", "bobby", "Better", "to", "perform", "validation", "on", "the", "trigger", "name", "if", "it", "s", "really", "really", "necessary", "class", "Backup", "Model", "def", "initialize", "trigger", "label", "block", "trigger", "trigger", "NUMBER", "to_s", "raise", "unless", "trigger", "w", "continue", "on", "as", "before", "NUMBER", "end", "end", "However", "I", "would", "prefer", "not", "to", "actually", "enforce", "that", "since", "if", "my", "trigger", "names", "come", "from", "an", "outside", "source", "be", "not", "hardcoded", "in", "the", "config", "NUMBER", "rb", "file", "then", "I", "don", "t", "want", "backup", "to", "fail", "just", "because", "the", "trigger", "name", "doesn", "t", "match", "the", "rule", "NUMBER", "Hi", "there", "I", "m", "attaching", "a", "syncer", "implementation", "based", "on", "svnsync", "with", "accompanying", "passing", "test", "NUMBER", "The", "implementation", "has", "also", "be", "test", "in", "a", "production", "environment", "NUMBER", "Best", "regards", "Hello", "meskyanichi", "You", "may", "not", "backup", "a", "SVN", "repository", "by", "copying", "all", "file", "from", "the", "filesystem", "because", "yoy", "may", "cause", "corruption", "on", "both", "the", "copy", "and", "the", "actual", "master", "repository", "NUMBER", "The", "correct", "approach", "to", "backup", "a", "SVN", "repository", "be", "to", "create", "an", "slave", "repository", "and", "configure", "it", "as", "linked", "with", "the", "master", "repo", "NUMBER", "Then", "you", "can", "call", "the", "command", "svn", "sync", "on", "the", "slave", "and", "it", "will", "fetch", "all", "commit", "including", "author", "chmod", "and", "a", "lot", "of", "stuff", "from", "SVN", "NUMBER", "This", "functionality", "will", "be", "helpful", "if", "you", "want", "to", "backup", "a", "project", "manager", "app", "like", "chiliproject", "or", "trac", "NUMBER", "Thanks", "for", "this", "awesome", "gem", "NUMBER", "Best", "regards", "Francisco", "Interesting", "NUMBER", "I", "have", "only", "use", "SVN", "for", "a", "short", "while", "so", "I", "m", "not", "too", "familiar", "with", "how", "it", "works", "NUMBER", "Any", "idea", "if", "this", "be", "also", "the", "case", "with", "Git", "itself", "Or", "be", "it", "safe", "to", "just", "RSync", "a", "whole", "Git", "repository", "Also", "looking", "at", "the", "code", "it", "seems", "that", "this", "be", "also", "intended", "to", "pull", "data", "from", "a", "production", "box", "rather", "than", "push", "it", "to", "the", "Backup", "server", "NUMBER", "Am", "I", "right", "And", "it", "would", "allow", "any", "protocol", "host", "port", "so", "you", "could", "sync", "the", "SVN", "repository", "from", "a", "public", "protected", "http", "server", "but", "be", "there", "any", "other", "protocols", "that", "don", "t", "go", "through", "an", "HTTP", "server", "that", "can", "be", "use", "I", "m", "thinking", "of", "how", "we", "should", "separate", "Pushing", "and", "Pulling", "data", "with", "for", "example", "the", "RSync", "Syncer", "NUMBER", "What", "should", "such", "a", "thing", "be", "call", "and", "would", "we", "really", "need", "two", "separate", "classes", "to", "handle", "it", "instead", "of", "a", "flag", "within", "the", "same", "class", "etc", "NUMBER", "I", "haven", "t", "thought", "about", "backing", "up", "this", "way", "so", "I", "ll", "have", "to", "see", "what", "the", "possibilities", "be", "and", "otherwise", "we", "ll", "have", "to", "do", "two", "separate", "classes", "like", "you", "re", "already", "doing", "if", "the", "code", "gets", "too", "messy", "in", "a", "single", "class", "NUMBER", "I", "definitely", "like", "the", "idea", "of", "be", "able", "to", "pull", "stuff", "from", "multiple", "production", "boxes", "to", "a", "single", "backup", "server", "with", "a", "single", "backup", "installation", "so", "I", "ll", "be", "looking", "in", "to", "it", "now", "and", "see", "what", "can", "be", "do", "NUMBER", "Oh", "so", "what", "I", "also", "wanted", "to", "know", "be", "whether", "SVNSyncer", "can", "both", "PULL", "and", "PUSH", "data", "Or", "be", "this", "only", "pulling", "it", "I", "prefer", "to", "keep", "some", "consistency", "with", "the", "gem", "NUMBER", "Either", "everything", "can", "pull", "everything", "can", "push", "or", "everything", "can", "do", "both", "NUMBER", "Otherwise", "people", "might", "expect", "certain", "behavior", "to", "be", "there", "and", "then", "it", "turns", "out", "there", "isn", "t", "NUMBER", "Cheers", "Hi", "there", "I", "also", "worked", "on", "this", "pull", "request", "NUMBER", "Any", "idea", "if", "this", "be", "also", "the", "case", "with", "Git", "itself", "Or", "be", "it", "safe", "to", "just", "RSync", "a", "whole", "Git", "repository", "I", "believe", "that", "git", "be", "distributed", "be", "better", "prepared", "for", "backup", "copies", "than", "subversion", "NUMBER", "I", "would", "not", "use", "rsync", "to", "duplicate", "a", "git", "repo", "though", "NUMBER", "I", "d", "use", "git", "itself", "a", "git", "pull", "or", "fetch", "with", "a", "git", "clone", "initial", "git", "clone", "if", "needed", "NUMBER", "It", "be", "actually", "our", "plan", "to", "create", "another", "branch", "for", "git", "repo", "syncing", "NUMBER", "Regarding", "Pushing", "Pulling", "This", "idea", "of", "push", "and", "pulling", "be", "something", "that", "you", "plan", "to", "do", "right", "Not", "implement", "yet", "NUMBER", "It", "seems", "to", "me", "that", "at", "least", "the", "current", "RSync", "syncer", "be", "unidirectional", "push", "only", "NUMBER", "That", "s", "why", "we", "created", "InverseRsync", "to", "be", "able", "to", "pull", "By", "the", "way", "push", "and", "pull", "look", "like", "much", "more", "descriptive", "than", "normal", "and", "inverse", "I", "confess", "I", "haven", "t", "tried", "to", "use", "svnsync", "to", "push", "change", "to", "a", "server", "only", "to", "pull", "from", "them", "NUMBER", "By", "looking", "at", "the", "documentation", "it", "seems", "possible", "although", "it", "doesn", "t", "seem", "like", "the", "most", "usual", "case", "NUMBER", "There", "doesn", "t", "seem", "to", "be", "an", "obvious", "difference", "between", "the", "source", "repo", "and", "the", "mirror", "NUMBER", "The", "only", "requirement", "be", "that", "the", "user", "has", "write", "access", "to", "the", "mirror", "NUMBER", "However", "our", "implementation", "be", "pull", "only", "the", "first", "step", "be", "creating", "a", "local", "subversion", "repository", "with", "svnadmin", "and", "that", "command", "be", "restricted", "to", "folders", "NUMBER", "If", "there", "be", "a", "way", "to", "create", "remote", "subversion", "repositories", "we", "don", "t", "know", "about", "it", "or", "could", "not", "think", "about", "it", "NUMBER", "I", "hope", "this", "clarifies", "your", "question", "NUMBER", "Regards", "Thanks", "for", "clarifying", "NUMBER", "So", "generally", "speaking", "people", "tend", "to", "pull", "in", "the", "case", "of", "SVNSync", "NUMBER", "If", "barely", "anyone", "actually", "pushes", "to", "keep", "mirrors", "usually", "same", "like", "with", "database", "replication", "to", "mirror", "slaves", "only", "pull", "then", "I", "don", "t", "mind", "implement", "a", "push", "only", "variant", "NUMBER", "As", "for", "the", "InverseRSync", "I", "m", "thinking", "that", "it", "might", "be", "better", "to", "name", "it", "to", "RSyncServer", "because", "it", "resides", "on", "the", "Backup", "server", "and", "not", "client", "production", "box", "NUMBER", "What", "do", "you", "think", "I", "m", "willing", "to", "pull", "in", "both", "pull", "request", "but", "I", "m", "always", "a", "bit", "cautious", "when", "it", "comes", "to", "what", "most", "people", "do", "and", "what", "to", "name", "things", "to", "be", "as", "descriptive", "but", "good", "looking", "and", "consistent", "as", "possible", "NUMBER", "So", "you", "would", "have", "RSync", "Client", "RSyncServer", "Server", "SVNSync", "Server", "But", "maybe", "it", "might", "be", "better", "to", "name", "them", "like", "so", "RSyncClient", "RSyncServer", "SVNSyncServer", "So", "that", "means", "we", "d", "have", "to", "change", "the", "naming", "on", "RSync", "RSyncClient", "and", "S", "NUMBER", "S", "NUMBER", "Client", "which", "seems", "fine", "to", "me", "as", "long", "as", "things", "be", "consistent", "NUMBER", "The", "suffix", "Server", "would", "indicate", "whether", "this", "should", "be", "run", "from", "the", "Server", "Backup", "server", "rather", "than", "the", "Client", "production", "server", "NUMBER", "If", "you", "have", "any", "suggestions", "feedback", "comments", "on", "such", "naming", "please", "let", "me", "know", "NUMBER", "Cheers", "Note", "If", "you", "get", "around", "to", "implement", "a", "Git", "equivalent", "GitSync", "that", "would", "be", "great", "NUMBER", "Or", "maybe", "it", "should", "be", "split", "in", "to", "two", "different", "types", "of", "Syncers", "ruby", "sync_with", "Client", "RSync", "do", "rsync", "end", "sync_with", "Server", "RSync", "do", "rsync", "end", "Something", "like", "that", "perhaps", "and", "let", "it", "s", "namespace", "determine", "whether", "it", "s", "push", "or", "pull", "NUMBER", "But", "this", "might", "be", "inconsistent", "with", "the", "rest", "of", "the", "Backup", "configuration", "file", "NUMBER", "So", "maybe", "ruby", "sync_with", "RSyncClient", "do", "rsync", "end", "sync_with", "RSyncServer", "do", "rsync", "end", "I", "really", "like", "this", "idea", "I", "ll", "add", "the", "Git", "support", "and", "contact", "you", "again", "NUMBER", "Do", "you", "want", "me", "to", "split", "the", "server", "client", "syncer", "Best", "regards", "Francisco", "de", "Juan", "El", "NUMBER", "NUMBER", "NUMBER", "a", "las", "NUMBER", "NUMBER", "Michael", "van", "Rooijen", "reply", "reply", "NUMBER", "github", "NUMBER", "com", "escribi\u00f3", "Or", "maybe", "it", "should", "be", "split", "in", "to", "two", "different", "types", "of", "Syncers", "ruby", "sync_with", "Client", "RSync", "do", "rsync", "end", "sync_with", "Server", "RSync", "do", "rsync", "end", "Something", "like", "that", "perhaps", "and", "let", "it", "s", "namespace", "determine", "whether", "it", "s", "push", "or", "pull", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Was", "thinking", "that", "maybe", "namespacing", "with", "modules", "isn", "t", "a", "bad", "idea", "Server", "RSync", "because", "the", "whole", "sync_with", "section", "has", "no", "relation", "to", "the", "rest", "of", "the", "backup", "procedure", "NUMBER", "It", "s", "mainly", "just", "a", "wrapper", "around", "unix", "utilities", "and", "doesn", "t", "follow", "any", "procedure", "NUMBER", "But", "it", "do", "of", "course", "support", "email", "notifications", "on", "fail", "and", "such", "NUMBER", "What", "do", "you", "think", "of", "doing", "this", "ruby", "module", "Backup", "module", "Syncer", "module", "Client", "class", "RSync", "NUMBER", "end", "end", "end", "end", "ruby", "module", "Backup", "module", "Syncer", "module", "Server", "class", "RSync", "NUMBER", "end", "end", "end", "end", "ruby", "module", "Backup", "module", "Syncer", "module", "Server", "class", "SVNSync", "NUMBER", "end", "end", "end", "end", "No", "Client", "for", "SVNSync", "because", "people", "be", "likely", "to", "use", "it", "as", "a", "Server", "rather", "than", "Client", "in", "real", "world", "use", "cases", "ruby", "module", "Backup", "module", "Syncer", "module", "Server", "class", "GitSync", "NUMBER", "end", "end", "end", "end", "No", "Client", "for", "GitSync", "because", "people", "be", "likely", "to", "use", "it", "as", "a", "Server", "rather", "than", "Client", "in", "real", "world", "use", "cases", "ruby", "module", "Backup", "module", "Syncer", "module", "S", "NUMBER", "class", "Client", "NUMBER", "end", "end", "end", "end", "No", "Server", "for", "S", "NUMBER", "because", "you", "can", "t", "install", "Backup", "on", "S", "NUMBER", "The", "folder", "structure", "would", "look", "like", "this", "NUMBER", "lib", "backup", "syncers", "client", "rsync", "NUMBER", "rb", "NUMBER", "lib", "backup", "syncers", "client", "s", "NUMBER", "rb", "NUMBER", "lib", "backup", "syncers", "server", "gitsync", "NUMBER", "rb", "NUMBER", "lib", "backup", "syncers", "server", "rsync", "NUMBER", "rb", "NUMBER", "lib", "backup", "syncers", "server", "svnsync", "NUMBER", "rb", "And", "the", "DSL", "in", "the", "backup", "config", "file", "would", "look", "like", "this", "ruby", "sync_with", "Client", "RSync", "sync_with", "Client", "S", "NUMBER", "sync_with", "Server", "GitSync", "sync_with", "Server", "RSync", "sync_with", "Server", "SVNSync", "What", "do", "you", "think", "I", "like", "the", "modules", "approach", "but", "there", "be", "no", "such", "dual", "behavior", "for", "S", "NUMBER", "SVN", "or", "Git", "NUMBER", "How", "about", "sync_with", "RSync", "Client", "sync_with", "RSync", "Server", "sync_with", "S", "NUMBER", "sync_with", "Git", "sync_with", "SVNSync", "Regarding", "the", "names", "there", "s", "always", "a", "lot", "of", "servers", "and", "it", "may", "be", "confusing", "the", "client", "server", "usage", "NUMBER", "What", "do", "you", "thing", "about", "next", "RSync", "Push", "For", "syncing", "some", "directories", "from", "the", "server", "that", "executes", "the", "backup", "to", "a", "remote", "sever", "NUMBER", "RSync", "Pull", "If", "you", "want", "to", "backup", "a", "folder", "from", "a", "remote", "server", "to", "the", "one", "that", "executes", "the", "backup", "NUMBER", "RSync", "Local", "If", "the", "two", "folders", "that", "you", "want", "to", "keep", "synced", "be", "on", "the", "same", "server", "instead", "of", "use", "a", "flag", "on", "RSync", "Push", "I", "would", "also", "change", "the", "name", "from", "GitSync", "to", "Git", "because", "there", "be", "no", "gitsync", "utility", "like", "svnsync", "Francisco", "de", "Juan", "Thanks", "Francisco", "You", "bring", "up", "great", "points", "and", "I", "think", "that", "all", "that", "you", "said", "be", "the", "way", "to", "go", "NUMBER", "If", "you", "have", "time", "feel", "free", "to", "do", "it", "this", "way", "ruby", "sync_with", "RSync", "Push", "sync_with", "RSync", "Pull", "sync_with", "RSync", "Local", "sync_with", "S", "NUMBER", "sync_with", "Git", "sync_with", "SVNSync", "So", "the", "folder", "structure", "would", "be", "like", "this", "NUMBER", "lib", "backup", "syncers", "rsync", "local", "NUMBER", "rb", "NUMBER", "lib", "backup", "syncers", "rsync", "push", "NUMBER", "rb", "NUMBER", "lib", "backup", "syncers", "rsync", "pull", "NUMBER", "rb", "NUMBER", "lib", "backup", "syncers", "s", "NUMBER", "rb", "NUMBER", "lib", "backup", "syncers", "git", "NUMBER", "rb", "NUMBER", "lib", "backup", "syncers", "svnsync", "NUMBER", "rb", "I", "believe", "If", "you", "could", "implement", "that", "in", "your", "two", "pull", "request", "and", "rebase", "with", "current", "develop", "so", "you", "re", "up", "to", "date", "and", "be", "able", "to", "merge", "it", "right", "in", "with", "develop", "that", "would", "be", "great", "NUMBER", "Meanwhile", "I", "can", "go", "finish", "other", "tickets", "right", "now", "NUMBER", "Then", "hopefully", "in", "the", "next", "few", "days", "we", "can", "go", "ahead", "and", "release", "version", "NUMBER", "which", "include", "your", "pull", "request", "and", "also", "the", "Git", "syncer", "if", "you", "re", "able", "to", "incorporate", "it", "in", "time", "NUMBER", "Perfect", "Next", "Monday", "I", "ll", "include", "this", "development", "on", "my", "company", "s", "planning", "and", "send", "you", "an", "estimated", "date", "of", "release", "NUMBER", "There", "s", "a", "lot", "of", "people", "use", "this", "gem", "and", "this", "change", "may", "break", "their", "configuration", "NUMBER", "Do", "we", "need", "backward", "compatibility", "IMHO", "we", "should", "not", "but", "maybe", "you", "think", "different", "NUMBER", "Nah", "doesn", "t", "need", "to", "be", "backwards", "compatible", "if", "it", "s", "for", "the", "better", "and", "it", "be", "NUMBER", "If", "people", "want", "to", "upgrade", "and", "benefit", "from", "the", "great", "features", "provide", "by", "NUMBER", "they", "will", "simply", "have", "to", "update", "the", "configuration", "which", "takes", "a", "few", "seconds", "NUMBER", "Maybe", "more", "if", "they", "spread", "it", "across", "NUMBER", "servers", "NUMBER", "But", "if", "they", "be", "logging", "in", "to", "NUMBER", "servers", "to", "update", "all", "NUMBER", "gems", "then", "update", "the", "config", "real", "quick", "can", "t", "hurt", "NUMBER", "I", "try", "to", "avoid", "backwards", "incompatibility", "but", "sometimes", "things", "really", "need", "to", "be", "update", "for", "better", "consistency", "and", "what", "not", "NUMBER", "Plus", "NUMBER", "will", "also", "break", "cycling", "as", "it", "currently", "stands", "since", "we", "re", "introduce", "chunking", "backups", "in", "to", "multiple", "archives", "which", "cause", "there", "to", "be", "an", "overhaul", "in", "the", "whole", "cycling", "process", "NUMBER", "Also", "I", "want", "to", "get", "most", "of", "the", "DSL", "change", "backwards", "incompatibility", "going", "now", "before", "release", "Backup", "NUMBER", "at", "some", "point", "so", "by", "that", "time", "people", "be", "already", "use", "to", "the", "change", "and", "we", "can", "call", "it", "a", "solid", "NUMBER", "release", "NUMBER", "But", "before", "that", "I", "would", "of", "course", "like", "to", "run", "NUMBER", "for", "a", "while", "and", "maybe", "release", "a", "few", "gems", "quickly", "after", "it", "to", "patch", "any", "potential", "issue", "that", "might", "pop", "up", "and", "then", "see", "how", "that", "goes", "for", "a", "while", "NUMBER", "So", "I", "d", "say", "just", "implement", "it", "as", "discussed", "make", "it", "backwards", "incompatible", "NUMBER", "People", "will", "either", "have", "to", "stay", "on", "NUMBER", "or", "upgrade", "to", "NUMBER", "and", "update", "their", "config", "NUMBER", "Also", "Thanks", "for", "your", "help", "We", "took", "a", "while", "to", "do", "this", "but", "I", "ve", "finally", "be", "able", "to", "do", "something", "on", "this", "regard", "NUMBER", "I", "ll", "do", "the", "svnsync", "part", "next", "but", "probably", "next", "week", "Hi", "there", "I", "have", "be", "work", "on", "this", "branch", "again", "a", "bit", "later", "than", "I", "anticipated", "I", "update", "our", "SVNSync", "branch", "with", "the", "latest", "change", "from", "your", "develop", "branch", "NUMBER", "I", "had", "to", "make", "some", "change", "in", "order", "to", "do", "this", "replaced", "Exception", "xxx", "with", "Error", "xxx", "here", "and", "there", "mkdir", "be", "now", "only", "available", "via", "FileUtils", "NUMBER", "With", "these", "change", "it", "should", "be", "very", "easily", "to", "merge", "it", "into", "develop", "NUMBER", "I", "also", "realized", "that", "we", "forgot", "to", "include", "a", "template", "for", "this", "pull", "request", "NUMBER", "It", "be", "include", "now", "NUMBER", "It", "be", "also", "worth", "noting", "that", "this", "be", "a", "PULL", "only", "backup", "NUMBER", "You", "can", "t", "use", "svnsync", "to", "sync", "a", "repo", "in", "a", "remote", "server", "NUMBER", "You", "have", "to", "be", "in", "the", "server", "where", "the", "backup", "be", "be", "stored", "in", "order", "to", "use", "it", "NUMBER", "We", "did", "not", "call", "it", "SVNSyncPull", "or", "something", "similar", "because", "you", "can", "t", "use", "SVNSync", "in", "any", "other", "way", "NUMBER", "We", "have", "also", "include", "a", "note", "about", "this", "particularity", "in", "the", "template", "NUMBER", "Let", "me", "know", "if", "you", "think", "anything", "else", "be", "required", "NUMBER", "Regards", "I", "don", "t", "recommend", "use", "this", "request", "any", "more", "NUMBER", "Instead", "use", "this", "one", "LINK", "That", "one", "backs", "up", "git", "and", "SVN", "and", "it", "s", "better", "designed", "and", "test", "NUMBER", "Please", "close", "this", "pull", "request", "NUMBER", "As", "kikito", "said", "this", "commit", "has", "be", "improved", "at", "LINK", "I", "NUMBER", "e", "NUMBER", "load", "config", "This", "way", "the", "config", "file", "can", "do", "tricky", "ruby", "tricks", "such", "as", "figure", "out", "its", "own", "filename", "with", "__FILE__", "NUMBER", "Also", "if", "there", "be", "any", "problem", "the", "backtraces", "will", "contain", "the", "correct", "filenames", "NUMBER", "Looking", "at", "the", "source", "of", "Backup", "Finder", "i", "don", "t", "see", "any", "compelling", "reason", "for", "instance_eval", "that", "would", "prevent", "use", "load", "instead", "NUMBER", "Hmmm", "NUMBER", "Perhaps", "something", "like", "backup_binding", "module", "Backup", "binding", "end", "eval", "File", "NUMBER", "read", "config", "backup_binding", "config", "NUMBER", "This", "worked", "for", "me", "on", "NUMBER", "and", "NUMBER", "with", "a", "very", "simple", "test", "case", "config", "NUMBER", "config_code", "File", "NUMBER", "read", "config", "backup_binding", "Backup", "NUMBER", "module_exec", "binding", "eval", "config_code", "backup_binding", "config", "NUMBER", "Of", "course", "this", "would", "be", "way", "simpler", "and", "also", "works", "on", "NUMBER", "and", "NUMBER", "Backup", "NUMBER", "module_eval", "File", "NUMBER", "read", "config", "config", "NUMBER", "NUMBER", "for", "change", "this", "behavior", "NUMBER", "for", "the", "currently", "propose", "change", "NUMBER", "Using", "any", "sort", "of", "eval", "instead", "of", "require", "load", "causes", "the", "__FILE__", "constant", "to", "not", "be", "available", "which", "helps", "load", "other", "configuration", "file", "like", "my", "database", "NUMBER", "yml", "NUMBER", "To", "get", "around", "this", "I", "implement", "this", "nasty", "little", "hack", "at", "the", "top", "config_path", "if", "self", "NUMBER", "is_a", "Backup", "Finder", "File", "NUMBER", "dirname", "self", "NUMBER", "config", "else", "File", "NUMBER", "dirname", "__FILE__", "end", "Then", "I", "can", "load", "my", "other", "file", "which", "I", "know", "the", "location", "of", "in", "relation", "to", "the", "backup", "configuration", "DB_CONFIG", "YAML", "NUMBER", "load_file", "File", "NUMBER", "join", "config_path", "database", "NUMBER", "yml", "BACKUP_CONFIG", "YAML", "NUMBER", "load_file", "File", "NUMBER", "join", "config_path", "backups", "NUMBER", "yml", "Backup", "Model", "NUMBER", "new", "database", "full", "database", "backup", "do", "database", "MySQL", "do", "database", "database", "NUMBER", "host", "DB_CONFIG", "host", "database", "NUMBER", "name", "DB_CONFIG", "database", "database", "NUMBER", "username", "DB_CONFIG", "username", "database", "NUMBER", "password", "DB_CONFIG", "password", "database", "NUMBER", "additional_options", "single", "transaction", "end", "store_with", "Local", "do", "local", "local", "NUMBER", "path", "BACKUP_CONFIG", "mount_point", "local", "NUMBER", "keep", "BACKUP_CONFIG", "number_to_keep", "NUMBER", "to_i", "end", "end", "The", "change", "be", "supposed", "to", "make", "__FILE__", "work", "NUMBER", "See", "Kernel", "eval", "LINK", "Object", "instance_eval", "LINK", "_eval", "Kernel", "module_eval", "LINK", "_eval", "Try", "irb", "eval", "__FILE__", "binding", "asdf", "NUMBER", "instance_eval", "__FILE__", "asdf", "NUMBER", "Object", "NUMBER", "module_eval", "__FILE__", "asdf", "NUMBER", "Awesome", "I", "wasn", "t", "aware", "of", "that", "behavior", "Kernel", "module_eval", "NUMBER", "NUMBER", "This", "add", "a", "notifier", "for", "Hipchat", "and", "include", "the", "ability", "to", "change", "the", "color", "of", "the", "notifications", "message", "NUMBER", "I", "can", "write", "an", "example", "to", "put", "in", "the", "wiki", "but", "here", "be", "one", "anyway", "notify_by", "Hipchat", "do", "hip", "hip", "NUMBER", "token", "token", "hip", "NUMBER", "from", "DB", "Backup", "hip", "NUMBER", "rooms_notified", "activity", "hip", "NUMBER", "on_success", "true", "hip", "NUMBER", "on_failure", "true", "hip", "NUMBER", "success_color", "green", "hip", "NUMBER", "failure_color", "red", "end", "Cool", "Thanks", "guys", "I", "add", "this", "to", "our", "integrations", "list", "LINK", "NUMBER", "I", "ve", "update", "the", "Wiki", "NUMBER", "Thanks", "I", "be", "on", "Backup", "NUMBER", "but", "could", "not", "make", "hipchat", "notifier", "work", "var", "lib", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "load_config", "eval", "NUMBER", "in", "load_config", "uninitialized", "constant", "Backup", "Finder", "Hipchat", "NameError", "from", "var", "lib", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "instance_eval", "from", "var", "lib", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "initialize", "from", "eval", "NUMBER", "in", "new", "from", "eval", "NUMBER", "in", "load_config", "from", "var", "lib", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "find", "from", "var", "lib", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "from", "var", "lib", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "from", "var", "lib", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "from", "var", "lib", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "send", "from", "var", "lib", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "from", "var", "lib", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "from", "var", "lib", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "from", "var", "lib", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "from", "var", "lib", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "from", "var", "lib", "gems", "NUMBER", "bin", "backup", "NUMBER", "in", "load", "from", "var", "lib", "gems", "NUMBER", "bin", "backup", "NUMBER", "Does", "that", "mean", "Hipchat", "integration", "be", "not", "available", "on", "NUMBER", "yet", "Nope", "NUMBER", "Presumably", "it", "will", "be", "in", "the", "next", "release", "of", "the", "backup", "gem", "NUMBER", "I", "build", "the", "gem", "and", "add", "that", "to", "our", "repo", "for", "the", "time", "be", "NUMBER", "The", "gem", "will", "be", "release", "pretty", "soon", "NUMBER", "We", "be", "reviewing", "all", "our", "documentation", "and", "applying", "the", "final", "tweak", "NUMBER", "Hope", "to", "get", "it", "out", "this", "week", "NUMBER", "Also", "we", "re", "going", "to", "split", "the", "README", "and", "Wiki", "in", "to", "two", "separate", "branch", "develop", "and", "master", "NUMBER", "This", "will", "ensure", "that", "the", "README", "and", "Wiki", "only", "display", "functionality", "that", "be", "available", "in", "the", "latest", "gem", "release", "not", "the", "current", "HEAD", "NUMBER", "Hello", "I", "ve", "set", "up", "my", "dropbox", "app", "its", "access", "type", "be", "full", "dropbox", "with", "an", "in", "development", "app", "status", "NUMBER", "I", "m", "saving", "to", "the", "same", "account", "as", "my", "app", "developer", "account", "so", "the", "development", "app", "status", "should", "be", "fine", "right", "I", "ve", "add", "my", "credentials", "to", "the", "config", "NUMBER", "rb", "file", "backup", "needs", "but", "when", "I", "run", "the", "command", "I", "get", "this", "bandega", "cp", "NUMBER", "ruby", "NUMBER", "bd", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "bin", "backup", "perform", "trigger", "my_backup", "config_file", "home", "bandega", "apps", "stage", "bd", "lib", "Backup", "config", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "My", "Backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Database", "MySQL", "start", "dumping", "and", "archiving", "bandega_production", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "packaging", "everything", "to", "a", "single", "archive", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Compressor", "Gzip", "start", "compressing", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "Dropbox", "start", "transferring", "NUMBER", "my_backup", "NUMBER", "tar", "NUMBER", "gz", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Creating", "a", "new", "session", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "Exception", "that", "get", "raise", "OAuth", "Unauthorized", "NUMBER", "Unauthorized", "home", "bandega", "ruby", "gems", "gems", "oauth", "NUMBER", "lib", "oauth", "consumer", "NUMBER", "rb", "NUMBER", "in", "token_request", "home", "bandega", "ruby", "gems", "gems", "oauth", "NUMBER", "lib", "oauth", "consumer", "NUMBER", "rb", "NUMBER", "in", "get_request_token", "home", "bandega", "ruby", "gems", "gems", "dropbox", "NUMBER", "lib", "dropbox", "session", "NUMBER", "rb", "NUMBER", "in", "initialize", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "dropbox", "NUMBER", "rb", "NUMBER", "in", "new", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "dropbox", "NUMBER", "rb", "NUMBER", "in", "create_write_and_return_new_session", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "dropbox", "NUMBER", "rb", "NUMBER", "in", "connection", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "dropbox", "NUMBER", "rb", "NUMBER", "in", "transfer", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "dropbox", "NUMBER", "rb", "NUMBER", "in", "perform", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "home", "bandega", "ruby", "gems", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "send", "home", "bandega", "ruby", "gems", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "home", "bandega", "ruby", "gems", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "home", "bandega", "ruby", "gems", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "home", "bandega", "ruby", "gems", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "home", "bandega", "ruby", "gems", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "on", "platform", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "If", "you", "ve", "setup", "a", "Notification", "in", "your", "configuration", "file", "the", "above", "error", "will", "have", "be", "sent", "NUMBER", "The", "weird", "thing", "be", "it", "never", "asks", "me", "to", "visit", "a", "url", "to", "authorize", "anything", "which", "be", "what", "your", "wiki", "was", "saying", "should", "happen", "NUMBER", "Any", "ideas", "what", "I", "should", "do", "Thanks", "I", "tried", "use", "the", "dropbox", "gem", "in", "IRB", "and", "get", "the", "same", "error", "ruby", "NUMBER", "p", "NUMBER", "require", "dropbox", "true", "ruby", "NUMBER", "p", "NUMBER", "session", "Dropbox", "Session", "NUMBER", "new", "hidden", "hidden", "OAuth", "Unauthorized", "NUMBER", "Unauthorized", "from", "home", "bandega", "ruby", "gems", "gems", "oauth", "NUMBER", "lib", "oauth", "consumer", "NUMBER", "rb", "NUMBER", "in", "token_request", "from", "home", "bandega", "ruby", "gems", "gems", "oauth", "NUMBER", "lib", "oauth", "consumer", "NUMBER", "rb", "NUMBER", "in", "get_request_token", "from", "home", "bandega", "ruby", "gems", "gems", "dropbox", "NUMBER", "lib", "dropbox", "session", "NUMBER", "rb", "NUMBER", "in", "initialize", "from", "irb", "NUMBER", "in", "new", "from", "irb", "NUMBER", "Thanks", "I", "ll", "try", "the", "new", "version", "when", "it", "comes", "out", "NUMBER", "And", "thanks", "for", "creating", "such", "a", "great", "gem", "Hey", "meskyanichi", "just", "wanted", "to", "confirm", "that", "I", "had", "the", "same", "problem", "NUMBER", "Thanks", "for", "your", "super", "quick", "support", "in", "this", "thread", "I", "just", "tried", "run", "Dropbox", "from", "Backup", "NUMBER", "latest", "release", "and", "I", "still", "don", "t", "have", "any", "issue", "NUMBER", "Are", "you", "use", "the", "latest", "Dropbox", "gem", "version", "NUMBER", "Because", "I", "be", "really", "not", "having", "any", "trouble", "get", "myself", "authorized", "NUMBER", "Files", "also", "transfer", "without", "any", "issue", "NUMBER", "Hmm", "NUMBER", "Yeah", "unfortunately", "I", "m", "still", "get", "this", "issue", "with", "both", "of", "those", "version", "as", "you", "mention", "NUMBER", "Perhaps", "I", "ve", "add", "the", "wrong", "value", "for", "path", "I", "have", "it", "set", "to", "to", "try", "to", "store", "it", "in", "the", "root", "directory", "of", "my", "dropbox", "NUMBER", "Although", "I", "can", "t", "see", "how", "that", "would", "be", "relate", "to", "the", "oauth", "authorization", "NUMBER", "For", "reference", "my", "gem", "list", "local", "be", "root", "permabox", "Backup", "gem", "list", "local", "LOCAL", "GEMS", "backup", "NUMBER", "builder", "NUMBER", "bundler", "NUMBER", "ruby", "dropbox", "NUMBER", "excon", "NUMBER", "fog", "NUMBER", "formatador", "NUMBER", "god", "NUMBER", "json", "NUMBER", "mime", "types", "NUMBER", "multi_json", "NUMBER", "multipart", "post", "NUMBER", "net", "scp", "NUMBER", "net", "ssh", "NUMBER", "nokogiri", "NUMBER", "oauth", "NUMBER", "open", "NUMBER", "NUMBER", "Platform", "NUMBER", "POpen", "NUMBER", "NUMBER", "popen", "NUMBER", "NUMBER", "rake", "NUMBER", "ruby", "hmac", "NUMBER", "thor", "NUMBER", "Is", "the", "dropbox", "gem", "itself", "the", "problem", "LINK", "What", "about", "use", "this", "LINK", "api", "I", "saw", "it", "commented", "on", "one", "of", "the", "RISCfuture", "dropbox", "forks", "NUMBER", "Apparently", "the", "dropbox", "gem", "be", "out", "of", "date", "since", "the", "step", "to", "dropbox", "API", "v", "NUMBER", "This", "resolve", "it", "for", "me", "You", "can", "also", "just", "manually", "install", "the", "gem", "from", "git", "they", "talk", "about", "on", "that", "issue", "page", "LINK", "gem", "uninstall", "dropbox", "git", "clone", "git", "github", "NUMBER", "com", "tonywok", "dropbox", "NUMBER", "git", "cd", "dropbox", "git", "checkout", "v", "NUMBER", "gem", "build", "dropbox", "NUMBER", "gemspec", "gem", "install", "dropbox", "NUMBER", "gem", "then", "perform", "your", "backups", "NUMBER", "Thought", "it", "might", "be", "something", "like", "that", "NUMBER", "Hope", "they", "update", "the", "gem", "soon", "to", "incorporate", "the", "change", "NUMBER", "Agreed", "NUMBER", "Thanks", "for", "your", "help", "Hi", "might", "it", "be", "that", "you", "require", "POpen", "NUMBER", "in", "your", "develop", "branch", "in", "a", "wrong", "way", "vim", "bin", "backup", "Load", "Thor", "for", "the", "CLI", "and", "POpen", "NUMBER", "for", "reading", "unix", "process", "status", "begin", "require", "thor", "require", "POpen", "NUMBER", "rescue", "LoadError", "puts", "nBackup", "requires", "Thor", "to", "load", "the", "CLI", "Command", "Line", "Interface", "and", "POpen", "NUMBER", "to", "determine", "the", "status", "of", "unix", "processes", "NUMBER", "puts", "Please", "install", "both", "Thor", "and", "POpen", "NUMBER", "first", "n", "ngem", "install", "thor", "v", "NUMBER", "ngem", "install", "POpen", "NUMBER", "v", "NUMBER", "exit", "NUMBER", "end", "I", "install", "the", "gem", "yesterday", "and", "find", "that", "you", "need", "to", "require", "it", "lowercase", "NUMBER", "gem", "contents", "POpen", "NUMBER", "NUMBER", "home", "user", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup", "gems", "POpen", "NUMBER", "NUMBER", "lib", "popen", "NUMBER", "rb", "NUMBER", "Cheers", "maxmeyer", "Hi", "Michael", "I", "install", "POpen", "NUMBER", "uppercase", "as", "well", "NUMBER", "But", "if", "you", "do", "a", "gem", "content", "POpen", "NUMBER", "you", "will", "see", "that", "the", "lib", "itself", "be", "lowercase", "gem", "contents", "POpen", "NUMBER", "NUMBER", "home", "user", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup", "gems", "POpen", "NUMBER", "NUMBER", "lib", "popen", "NUMBER", "rb", "NUMBER", "That", "s", "why", "I", "think", "you", "should", "do", "require", "popen", "NUMBER", "in", "your", "backup", "script", "as", "a", "require", "should", "expand", "to", "NUMBER", "popen", "NUMBER", "NUMBER", "rb", "TAG", "NUMBER", "It", "just", "sets", "the", "target", "lib", "to", "require", "instead", "of", "the", "default", "NUMBER", "You", "will", "have", "to", "have", "a", "require", "still", "NUMBER", "This", "means", "that", "you", "can", "do", "something", "like", "gem", "POpen", "NUMBER", "NUMBER", "require", "popen", "NUMBER", "It", "will", "use", "the", "POpen", "NUMBER", "lib", "even", "though", "the", "file", "to", "require", "popen", "NUMBER", "rb", "be", "lower", "cased", "NUMBER", "Hi", "Michael", "I", "just", "find", "LINK", "packaging", "best", "practices", "NUMBER", "You", "might", "want", "to", "consider", "that", "Bad", "begin", "gem", "rack", "require", "rack", "rescue", "Gem", "LoadError", "puts", "Could", "not", "load", "rack", "exit", "end", "Good", "begin", "require", "rack", "rescue", "LoadError", "puts", "Could", "not", "load", "rack", "exit", "end", "Cheers", "maxmeyer", "Hi", "there", "could", "you", "please", "look", "at", "spec", "archive_spec", "NUMBER", "rb", "You", "miss", "some", "backslashes", "at", "line", "NUMBER", "in", "your", "develop", "branch", "NUMBER", "exclude", "home", "rspecuser", "wrongdir", "home", "rspecuser", "logs", "home", "rspecuser", "dotfiles", "BTW", "I", "m", "still", "wainting", "for", "authorization", "Asked", "them", "again", "at", "the", "beginning", "of", "this", "week", "NUMBER", "Cheers", "maxmeyer", "Hi", "Michael", "I", "send", "you", "a", "pull", "request", "highlight", "those", "lines", "NUMBER", "Cheers", "maxmeyer", "The", "invoke", "save", "option", "for", "Redis", "backups", "be", "not", "work", "NUMBER", "Currently", "it", "be", "use", "the", "run", "command", "and", "assuming", "that", "this", "function", "returns", "the", "STDOUT", "of", "the", "shell", "command", "NUMBER", "This", "be", "not", "the", "case", "so", "have", "replaced", "the", "call", "to", "run", "with", "a", "standard", "ruby", "backtick", "command", "NUMBER", "I", "m", "still", "get", "this", "error", "even", "though", "when", "invoke_save", "be", "turneed", "on", "and", "I", "see", "that", "SAVE", "was", "call", "in", "my", "redis", "log", "I", "still", "get", "the", "following", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Database", "Redis", "start", "dumping", "and", "archiving", "dump", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Running", "system", "utility", "redis", "cli", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "redis", "cli", "STDOUT", "OK", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "ModelError", "Backup", "for", "Description", "for", "db_backup", "db_backup", "Failed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "An", "Error", "occured", "which", "has", "cause", "this", "Backup", "to", "abort", "before", "completion", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Reason", "Database", "Redis", "CommandError", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Could", "not", "invoke", "the", "Redis", "SAVE", "command", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "The", "dump", "NUMBER", "b", "file", "might", "not", "contain", "the", "most", "recent", "data", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Please", "check", "if", "the", "server", "be", "run", "the", "credentials", "if", "any", "be", "correct", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "and", "the", "host", "port", "socket", "be", "correct", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Redis", "CLI", "response", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Backtrace", "It", "looks", "like", "redis", "cli", "gives", "the", "correct", "response", "OK", "but", "that", "error", "be", "still", "be", "throw", "NUMBER", "I", "also", "notice", "that", "this", "pull", "request", "isn", "t", "in", "the", "latest", "version", "could", "that", "be", "the", "issue", "This", "be", "correct", "there", "be", "a", "regression", "here", "NUMBER", "Submitting", "a", "pull", "request", "to", "fix", "it", "NUMBER", "Hi", "On", "a", "project", "in", "which", "I", "use", "backup", "I", "start", "some", "resque", "runners", "with", "god", "NUMBER", "This", "fail", "because", "backup", "assumes", "that", "the", "HOME", "environment", "var", "be", "set", "which", "be", "not", "the", "case", "when", "god", "be", "start", "as", "a", "daemon", "here", "be", "a", "detailed", "writeup", "if", "you", "re", "interested", "LINK", "I", "have", "patched", "this", "and", "verify", "that", "the", "patch", "works", "NUMBER", "Note", "that", "I", "have", "not", "change", "the", "use", "of", "ENV", "HOME", "in", "backup", "storage", "local", "NUMBER", "rb", "because", "I", "m", "unsure", "about", "what", "be", "safe", "to", "assume", "in", "that", "context", "NUMBER", "Thanks", "for", "this", "great", "gem", "Jacob", "Yes", "meaning", "the", "work", "directory", "AFAIK", "NUMBER", "I", "couldn", "t", "think", "of", "a", "more", "reasonable", "default", "NUMBER", "Great", "thanks", "On", "Wed", "Nov", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Michael", "van", "Rooijen", "TAG", "write", "Yeah", "I", "just", "fix", "the", "issue", "with", "LINK", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Odd", "I", "m", "receiving", "the", "following", "now", "however", "my", "HOME", "var", "be", "set", "NUMBER", "home", "deploy", "apps", "dashboard", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "NUMBER", "rb", "NUMBER", "in", "join", "can", "t", "convert", "nil", "into", "String", "TypeError", "Very", "strange", "NUMBER", "How", "do", "you", "invoke", "the", "Ruby", "process", "that", "raises", "the", "error", "In", "other", "words", "be", "you", "absolutely", "sure", "that", "HOME", "be", "set", "in", "the", "process", "that", "spawns", "the", "ruby", "interpreter", "Hello", "there", "I", "needed", "to", "be", "able", "to", "use", "the", "backup", "gem", "from", "my", "backup", "server", "directly", "instead", "of", "installing", "it", "on", "the", "backed", "up", "ones", "NUMBER", "The", "only", "thing", "I", "couldn", "t", "do", "with", "the", "gem", "was", "rsyncing", "on", "its", "current", "form", "it", "assumes", "that", "the", "backup", "gem", "be", "on", "the", "backed", "up", "server", "NUMBER", "I", "ve", "created", "an", "additional", "Syncer", "call", "InverseRSync", "that", "inherits", "from", "RSync", "but", "reversing", "the", "source", "and", "destination", "folders", "NUMBER", "I", "ve", "also", "created", "the", "spec", "for", "it", "and", "it", "seems", "to", "be", "passing", "they", "be", "_very_", "based", "on", "the", "RSync", "one", "NUMBER", "Thanks", "for", "this", "wonderful", "gem", "and", "best", "regards", "I", "think", "he", "do", "NUMBER", "Btw", "I", "would", "love", "to", "see", "this", "in", "backup", "NUMBER", "gem", "as", "well", "NUMBER", "Im", "run", "backup", "locally", "with", "storage", "local", "NUMBER", "rb", "storing", "backups", "encrypted", "openssl", "NUMBER", "Then", "run", "rsync", "on", "the", "backup", "box", "to", "transfer", "them", "from", "the", "prod", "box", "to", "the", "backup", "one", "NUMBER", "But", "that", "solution", "lack", "support", "of", "sending", "emails", "NUMBER", "But", "the", "backup", "gem", "has", "email", "support", "include", "NUMBER", "Cheers", "Maxmeyer", "Yes", "This", "be", "the", "main", "idea", "NUMBER", "I", "have", "several", "servers", "that", "I", "d", "like", "to", "backup", "and", "I", "didn", "t", "want", "to", "install", "and", "configure", "the", "backup", "gem", "on", "all", "of", "them", "NUMBER", "With", "this", "approach", "I", "have", "a", "single", "backup", "server", "that", "can", "take", "care", "of", "all", "my", "production", "servers", "NUMBER", "Best", "regards", "Francisco", "Thank", "you", "This", "be", "exactly", "what", "I", "need", "as", "well", "NUMBER", "In", "fact", "it", "really", "isn", "t", "clear", "in", "the", "docs", "anywhere", "that", "backup", "be", "meant", "to", "be", "initiated", "from", "the", "application", "server", "instead", "of", "a", "single", "backup", "server", "NUMBER", "Regarding", "the", "patch", "wouldn", "t", "it", "make", "more", "sense", "to", "keep", "the", "code", "for", "add", "directories", "rsync", "NUMBER", "directories", "do", "directory", "directory", "NUMBER", "add", "rails_apps", "drugbank", "shared", "system", "end", "And", "backup", "each", "of", "those", "directories", "as", "remote", "directories", "overriding", "the", "perform", "instead", "of", "add", "the", "remote_path", "option", "If", "you", "agree", "I", "can", "put", "together", "a", "patch", "NUMBER", "Regards", "Craig", "Hi", "cknoxrun", "I", "ve", "start", "work", "today", "on", "a", "new", "version", "of", "this", "pull", "request", "that", "separates", "the", "rsync", "syncer", "into", "three", "concerns", "pull", "push", "and", "local", "for", "syncs", "in", "the", "same", "computer", "as", "suggested", "by", "meskyanichi", "in", "NUMBER", "NUMBER", "I", "liked", "your", "suggestion", "of", "use", "the", "already", "exist", "directories", "instead", "of", "add", "remote_path", "NUMBER", "Could", "you", "please", "explain", "how", "the", "new", "perform", "method", "would", "look", "I", "m", "not", "sure", "about", "how", "to", "use", "directories", "inside", "it", "NUMBER", "A", "simple", "comment", "with", "the", "relevant", "line", "be", "ok", "I", "don", "t", "need", "a", "pull", "request", "or", "anything", "like", "that", "NUMBER", "Thanks", "EDIT", "I", "code", "some", "stuff", "here", "LINK", "_pull", "lib", "backup", "syncer", "rsync", "pull", "NUMBER", "rb", "L", "NUMBER", "Is", "this", "more", "or", "less", "what", "you", "wanted", "to", "do", "Hi", "kikito", "Sorry", "for", "the", "late", "reply", "I", "was", "away", "for", "the", "last", "NUMBER", "weeks", "NUMBER", "This", "looks", "like", "a", "great", "solution", "thanks", "so", "much", "Craig", "I", "use", "the", "SCP", "storage", "option", "and", "recently", "change", "the", "password", "on", "the", "remote", "machine", "NUMBER", "I", "change", "the", "password", "in", "the", "backup", "configuration", "file", "but", "start", "get", "failure", "notifications", "NUMBER", "It", "turned", "out", "the", "error", "was", "with", "Storage", "Base", "cycle", "attempting", "to", "remove", "the", "older", "backup", "NUMBER", "The", "storage", "objects", "loaded", "from", "the", "YAML", "file", "had", "the", "old", "settings", "and", "were", "not", "be", "update", "which", "was", "cause", "an", "SSH", "Authentication", "failure", "NUMBER", "The", "quick", "solution", "was", "simply", "to", "update", "the", "data", "file", "manually", "NUMBER", "However", "I", "did", "spend", "some", "time", "today", "looking", "into", "this", "and", "came", "up", "with", "a", "draft", "proposal", "for", "a", "solution", "that", "would", "solve", "this", "NUMBER", "burns", "aa", "NUMBER", "c", "NUMBER", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "cd", "NUMBER", "f", "NUMBER", "c", "NUMBER", "OK", "NUMBER", "Just", "wanted", "to", "make", "you", "aware", "of", "the", "issue", "since", "change", "the", "credentials", "for", "the", "storage", "connection", "would", "be", "a", "common", "task", "NUMBER", "And", "since", "the", "error", "only", "stated", "there", "was", "an", "SSH", "Authentication", "Error", "it", "took", "some", "time", "to", "figure", "out", "what", "was", "happening", "NUMBER", "Not", "sure", "how", "change", "to", "the", "actual", "transfer", "of", "the", "file", "would", "affect", "the", "code", "determining", "what", "file", "need", "transferring", "remove", "and", "the", "credentials", "to", "be", "use", "for", "those", "actions", "NUMBER", "The", "commit", "I", "referenced", "was", "my", "summary", "NUMBER", "Your", "statements", "sound", "correct", "NUMBER", "As", "for", "update", "path", "I", "would", "agree", "that", "it", "would", "be", "expected", "that", "the", "older", "archives", "would", "be", "moved", "to", "the", "new", "location", "as", "well", "NUMBER", "If", "not", "the", "user", "would", "simply", "get", "a", "warning", "that", "the", "cycling", "operation", "could", "not", "remove", "the", "old", "file", "correct", "Also", "it", "could", "be", "the", "old", "path", "may", "not", "even", "be", "valid", "with", "the", "new", "credentials", "and", "possibly", "cause", "some", "other", "error", "NUMBER", "so", "I", "would", "say", "update", "path", "for", "all", "the", "older", "backups", "in", "the", "YAML", "file", "and", "if", "they", "don", "t", "exist", "let", "the", "user", "receive", "the", "warning", "NUMBER", "I", "ve", "rebased", "that", "commit", "so", "it", "would", "apply", "cleanly", "NUMBER", "burns", "NUMBER", "b", "NUMBER", "ce", "NUMBER", "a", "NUMBER", "f", "NUMBER", "c", "NUMBER", "fad", "NUMBER", "ee", "NUMBER", "f", "NUMBER", "af", "NUMBER", "You", "may", "want", "to", "check", "it", "out", "and", "test", "it", "maybe", "even", "cherry", "pick", "it", "Yeah", "each", "will", "do", "lol", "I", "ve", "also", "thought", "that", "since", "the", "config", "credentials", "be", "be", "reloaded", "now", "it", "s", "not", "really", "necessary", "to", "store", "anything", "other", "than", "the", "filename", "NUMBER", "Meaning", "you", "could", "clear", "out", "the", "others", "as", "well", "perhaps", "at", "minimum", "the", "password", "NUMBER", "I", "think", "this", "would", "require", "each", "storage", "object", "type", "to", "have", "it", "s", "own", "cleanup", "method", "to", "do", "this", "though", "NUMBER", "I", "haven", "t", "spent", "a", "lot", "of", "time", "thinking", "about", "this", "but", "it", "did", "cross", "my", "mind", "while", "I", "was", "in", "there", "Was", "just", "looking", "at", "NUMBER", "too", "NUMBER", "will", "let", "you", "know", "if", "I", "come", "up", "with", "any", "ideas", "NUMBER", "In", "that", "case", "I", "would", "consider", "doing", "something", "to", "at", "least", "clear", "the", "password", "from", "this", "persisted", "data", "NUMBER", "diff", "diff", "git", "a", "lib", "backup", "storage", "object", "NUMBER", "rb", "b", "lib", "backup", "storage", "object", "NUMBER", "rb", "index", "de", "NUMBER", "f", "NUMBER", "e", "NUMBER", "a", "lib", "backup", "storage", "object", "NUMBER", "rb", "b", "lib", "backup", "storage", "object", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "module", "Backup", "Takes", "the", "provide", "objects", "and", "converts", "it", "to", "YAML", "format", "NUMBER", "The", "YAML", "data", "gets", "write", "to", "the", "storage", "file", "def", "write", "objects", "objects", "NUMBER", "each", "obj", "obj", "NUMBER", "clean_persisted_data", "File", "NUMBER", "open", "storage_file", "w", "do", "file", "file", "NUMBER", "write", "objects", "NUMBER", "to_yaml", "end", "then", "in", "each", "storage", "NUMBER", "diff", "git", "a", "lib", "backup", "storage", "sftp", "NUMBER", "rb", "b", "lib", "backup", "storage", "sftp", "NUMBER", "rb", "index", "d", "NUMBER", "a", "NUMBER", "bb", "NUMBER", "f", "NUMBER", "b", "NUMBER", "a", "NUMBER", "NUMBER", "a", "lib", "backup", "storage", "sftp", "NUMBER", "rb", "b", "lib", "backup", "storage", "sftp", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "module", "Backup", "cycle", "end", "def", "clean_persisted_data", "password", "nil", "end", "private", "Fixed", "NUMBER", "NUMBER", "eb", "NUMBER", "fdddc", "NUMBER", "bbf", "NUMBER", "cbe", "NUMBER", "e", "NUMBER", "ab", "NUMBER", "b", "NUMBER", "b", "NUMBER", "a", "update", "storage", "objects", "in", "YAML", "file", "when", "cycling", "draft", "proposal", "use", "initialize", "in", "Storage", "Base", "and", "remove", "from", "subclasses", "use", "configure_block", "accessor", "to", "temporarily", "store", "the", "optional", "configuration", "block", "pass", "to", "construct", "new", "objects", "use", "a", "configure", "method", "in", "Storage", "Base", "to", "be", "shared", "by", "initialize", "and", "cycle", "to", "update", "storage", "objects", "use", "pre_configure", "post_configure", "methods", "in", "Storage", "Base", "to", "set", "configuration", "defaults", "before", "evaluating", "the", "optional", "configuration", "block", "then", "afterwards", "to", "adjust", "use", "pre_configure", "post_configure", "within", "each", "storage", "subclass", "to", "perform", "specific", "change", "for", "each", "storage", "type", "calling", "super", "first", "for", "shared", "change", "from", "Storage", "Base", "remove", "option", "hash", "from", "Configuration", "Helpers", "load_defaults", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "a", "NUMBER", "a", "NUMBER", "fc", "NUMBER", "f", "NUMBER", "cd", "NUMBER", "d", "NUMBER", "aad", "NUMBER", "only", "store", "attributes", "needed", "for", "cycling", "Heroku", "when", "i", "use", "this", "gem", "rased", "this", "exception", "Exception", "that", "get", "raise", "Backup", "Exception", "CommandFailed", "Failed", "to", "run", "mongodump", "on", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "The", "status", "code", "returned", "was", "pid", "NUMBER", "exit", "NUMBER", "STDOUT", "was", "STDERR", "was", "sh", "mongodump", "not", "find", "Can", "I", "use", "this", "gem", "with", "heroku", "meskyanichi", "you", "be", "wrong", "NUMBER", "it", "be", "possible", "NUMBER", "To", "run", "mongo", "backups", "on", "heroku", "i", "have", "uploaded", "mongodump", "to", "bin", "folder", "of", "the", "application", "that", "solves", "the", "problem", "NUMBER", "perhaps", "you", "should", "add", "this", "info", "to", "wiki", "i", "think", "many", "other", "guys", "will", "find", "it", "useful", "NUMBER", "mongodump", "binary", "could", "be", "downloaded", "from", "mongodb", "website", "NUMBER", "LINK", "For", "Heroku", "x", "NUMBER", "Linux", "binaries", "should", "be", "use", "NUMBER", "lexer", "were", "you", "able", "to", "get", "the", "command", "to", "work", "on", "Heroku", "I", "uploaded", "to", "bin", "and", "get", "a", "correct", "response", "for", "system", "which", "mongodump", "But", "any", "attempt", "to", "use", "it", "with", "our", "MongoHQ", "instance", "doesn", "t", "do", "anything", "NUMBER", "Yes", "I", "have", "include", "mongodump", "to", "my", "repo", "and", "push", "it", "to", "heroku", "NUMBER", "Im", "use", "Mongolab", "and", "it", "works", "fine", "NUMBER", "I", "don", "t", "think", "that", "mongohq", "be", "the", "problem", "With", "the", "command", "what", "output", "directory", "do", "you", "use", "for", "Heroku", "I", "don", "t", "configure", "anything", "NUMBER", "Just", "use", "gem", "default", "settings", "NUMBER", "It", "stop", "work", "after", "recent", "update", "NUMBER", "I", "get", "following", "error", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "database", "backup", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Database", "MongoDB", "start", "dumping", "and", "archiving", "myapp", "production", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "packaging", "everything", "to", "a", "single", "archive", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Compressor", "Gzip", "start", "compressing", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "db_backup", "NUMBER", "tar", "NUMBER", "gz", "to", "bucket", "my_app", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "CLIError", "CLI", "UtilityNotFoundError", "Path", "to", "mongo", "could", "not", "be", "find", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Make", "sure", "the", "specified", "utility", "be", "install", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "and", "available", "in", "your", "system", "s", "PATH", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "If", "this", "be", "a", "database", "utility", "you", "may", "need", "to", "specify", "the", "full", "path", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "app", "worker", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "use", "the", "Database", "s", "TAG", "_utility", "configuration", "setting", "NUMBER", "We", "change", "the", "utility_path", "since", "it", "was", "cause", "issue", "when", "use", "multiple", "ones", "in", "a", "single", "database", "NUMBER", "You", "need", "to", "set", "the", "path", "to", "your", "mongodump", "utility", "with", "ruby", "database", "MongoDB", "do", "db", "NUMBER", "db", "NUMBER", "mongodump_utility", "opt", "local", "bin", "mongodump", "db", "NUMBER", "mongo_utility", "opt", "local", "bin", "mongo", "and", "this", "if", "you", "need", "to", "use", "the", "mongo", "utility", "for", "locking", "the", "db", "end", "But", "of", "course", "point", "them", "at", "the", "location", "you", "have", "them", "stored", "on", "Heroku", "NUMBER", "That", "should", "fix", "it", "NUMBER", "I", "ve", "add", "mongo", "binary", "to", "heroku", "and", "it", "start", "work", "NUMBER", "Do", "I", "need", "both", "dump", "and", "mongo", "binaries", "Are", "you", "saying", "you", "be", "use", "just", "the", "mongo", "utility", "and", "not", "the", "mongodump", "utility", "I", "d", "think", "it", "s", "the", "other", "way", "around", "NUMBER", "As", "ar", "as", "I", "know", "you", "need", "mongodump", "to", "dump", "the", "database", "from", "MongoHQ", "and", "if", "you", "want", "to", "lock", "the", "database", "before", "dumping", "which", "be", "an", "option", "you", "can", "set", "in", "the", "database", "MongoDB", "then", "you", "also", "need", "the", "mongo", "utility", "NUMBER", "Before", "patch", "I", "have", "only", "mongodump", "binary", "NUMBER", "Now", "I", "have", "put", "both", "mongodump", "and", "mongo", "to", "make", "it", "work", "NUMBER", "BTW", "I", "have", "lock", "option", "set", "to", "false", "NUMBER", "But", "it", "still", "requires", "mongo", "binary", "to", "finish", "the", "job", "NUMBER", "Is", "it", "passable", "use", "uri", "in", "Backup", "Model", "for", "MongoDB", "Like", "this", "require", "yaml", "database_yml", "File", "NUMBER", "expand_path", "NUMBER", "config", "mongoid", "NUMBER", "yml", "__FILE__", "RAILS_ENV", "ENV", "RAILS_ENV", "development", "config", "YAML", "NUMBER", "load_file", "database_yml", "Backup", "Model", "NUMBER", "new", "db_backup", "database", "backup", "do", "database", "MongoDB", "do", "db", "db", "NUMBER", "uri", "config", "RAILS_ENV", "uri", "db", "NUMBER", "only_collections", "collection", "NUMBER", "collection", "NUMBER", "collection", "NUMBER", "collection", "NUMBER", "db", "NUMBER", "additional_options", "db", "NUMBER", "lock", "false", "end", "store_with", "Dropbox", "do", "db", "db", "NUMBER", "email", "foo", "email", "db", "NUMBER", "password", "password", "db", "NUMBER", "api_key", "api", "key", "db", "NUMBER", "api_secret", "secret", "db", "NUMBER", "timeout", "NUMBER", "db", "NUMBER", "path", "myapp", "db", "NUMBER", "keep", "NUMBER", "end", "compress_with", "Gzip", "do", "compression", "compression", "NUMBER", "best", "true", "compression", "NUMBER", "fast", "false", "end", "end", "mongoid", "NUMBER", "yml", "production", "uri", "TAG", "Hi", "Maybe", "I", "miss", "something", "but", "isn", "t", "it", "possible", "to", "use", "SSH", "backed", "storages", "without", "password", "use", "public", "key", "authentication", "instead", "Thanks", "NUMBER", "Thanks", "that", "s", "right", "NUMBER", "gem", "list", "grep", "fogfog", "NUMBER", "backup", "perform", "trigger", "general_backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dependency", "miss", "NUMBER", "Dependency", "required", "for", "Amazon", "S", "NUMBER", "Rackspace", "Cloud", "Files", "S", "NUMBER", "CloudFiles", "Storages", "To", "install", "the", "gem", "issue", "the", "following", "command", "gem", "install", "fog", "v", "NUMBER", "Please", "try", "again", "after", "installing", "the", "miss", "dependency", "NUMBER", "What", "s", "wrong", "I", "use", "REE", "with", "gemsets", "NUMBER", "My", "ruby", "gems", "version", "be", "latest", "NUMBER", "ruby", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "patchlevel", "NUMBER", "x", "NUMBER", "_", "NUMBER", "linux", "MBARI", "NUMBER", "x", "NUMBER", "Ruby", "Enterprise", "Edition", "NUMBER", "Yep", "I", "use", "RVM", "and", "bundler", "NUMBER", "What", "OS", "Ubuntu", "server", "NUMBER", "I", "have", "the", "same", "issue", "cant", "perform", "backup", "because", "of", "miss", "fog", "dependency", "NUMBER", "I", "m", "on", "debian", "NUMBER", "NUMBER", "bit", "ruby", "NUMBER", "rubygems", "NUMBER", "with", "no", "bundler", "and", "gem", "dependency", "tool", "NUMBER", "I", "m", "on", "a", "different", "x", "NUMBER", "_", "NUMBER", "distribution", "but", "it", "seem", "installing", "ruby", "devel", "package", "was", "the", "solution", "for", "me", "NUMBER", "NUMBER", "x", "NUMBER", "x", "NUMBER", "x", "NUMBER", "c", "NUMBER", "x", "NUMBER", "c", "there", "be", "no", "ruby", "devel", "package", "for", "Ubuntu", "NUMBER", "Like", "I", "said", "I", "m", "use", "a", "different", "distribution", "that", "s", "RHEL", "esq", "NUMBER", "For", "Ubuntu", "it", "might", "be", "ruby", "dev", "LINK", "ruby", "dev", "You", "may", "also", "want", "to", "consider", "looking", "here", "LINK", "_nokogiri", "NUMBER", "html", "Ubuntu", "doesn", "t", "come", "with", "the", "Ruby", "development", "package", "that", "be", "required", "for", "build", "gems", "with", "C", "extensions", "NUMBER", "Here", "be", "the", "commands", "to", "install", "everything", "you", "might", "need", "ruby", "developer", "package", "sudo", "apt", "get", "install", "ruby", "NUMBER", "dev", "ruby", "NUMBER", "ri", "NUMBER", "rdoc", "NUMBER", "irb", "NUMBER", "sudo", "apt", "get", "install", "libreadline", "ruby", "NUMBER", "libruby", "NUMBER", "libopenssl", "ruby", "nokogiri", "requirements", "sudo", "apt", "get", "install", "libxslt", "dev", "libxml", "NUMBER", "dev", "sudo", "gem", "install", "nokogiri", "I", "have", "RVM", "so", "it", "s", "not", "possible", "to", "use", "use", "ruby", "NUMBER", "from", "Ubuntu", "package", "Hi", "My", "config", "looks", "like", "ruby", "Backup", "Model", "NUMBER", "new", "label", "Backup", "for", "label", "do", "database", "PostgreSQL", "do", "database", "database", "NUMBER", "name", "name", "database", "NUMBER", "host", "host", "database", "NUMBER", "username", "user", "database", "NUMBER", "password", "password", "database", "NUMBER", "additional_options", "clean", "no", "acl", "no", "owner", "end", "compress_with", "Gzip", "do", "compression", "compression", "NUMBER", "best", "true", "end", "store_with", "SFTP", "do", "server", "server", "NUMBER", "username", "user", "server", "NUMBER", "ip", "serwer", "NUMBER", "one", "server", "NUMBER", "port", "NUMBER", "server", "NUMBER", "path", "backup", "databases", "server", "NUMBER", "keep", "NUMBER", "end", "store_with", "SFTP", "do", "server", "server", "NUMBER", "username", "user", "server", "NUMBER", "ip", "server", "NUMBER", "two", "server", "NUMBER", "port", "NUMBER", "server", "NUMBER", "path", "backup", "databases", "server", "NUMBER", "keep", "NUMBER", "end", "The", "problem", "be", "that", "it", "will", "keep", "NUMBER", "backups", "on", "each", "server", "NUMBER", "I", "can", "solve", "this", "by", "setting", "server", "NUMBER", "keep", "NUMBER", "but", "that", "s", "not", "the", "point", "NUMBER", "I", "think", "it", "should", "keep", "the", "amount", "of", "backups", "I", "set", "for", "specific", "server", "NUMBER", "I", "m", "use", "NUMBER", "version", "NUMBER", "The", "simplest", "thing", "may", "be", "to", "allow", "the", "user", "to", "define", "an", "optional", "identifier", "NUMBER", "Here", "s", "an", "untested", "example", "diff", "diff", "git", "a", "lib", "backup", "storage", "base", "NUMBER", "rb", "b", "lib", "backup", "storage", "base", "NUMBER", "rb", "index", "db", "NUMBER", "b", "NUMBER", "d", "NUMBER", "d", "NUMBER", "d", "NUMBER", "f", "NUMBER", "a", "lib", "backup", "storage", "base", "NUMBER", "rb", "b", "lib", "backup", "storage", "base", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "module", "Backup", "attr_accessor", "chunk_suffixes", "optional", "user", "defined", "identifier", "for", "this", "storage", "attr_accessor", "storage_id", "Super", "method", "for", "the", "child", "classes", "perform", "method", "NUMBER", "super", "should", "always", "be", "invoked", "from", "the", "child", "classes", "perform", "method", "to", "ensure", "that", "the", "chunk_suffixes", "array", "gets", "set", "to", "the", "storage", "object", "which", "will", "be", "use", "to", "transfer", "all", "the", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "module", "Backup", "def", "cycle", "return", "unless", "keep", "NUMBER", "to_i", "NUMBER", "type", "self", "NUMBER", "class", "NUMBER", "name", "NUMBER", "split", "NUMBER", "last", "storage_object", "Backup", "Storage", "Object", "NUMBER", "new", "type", "storage_object", "Backup", "Storage", "Object", "NUMBER", "new", "type", "storage_id", "objects", "storage_object", "NUMBER", "load", "objects", "NUMBER", "map", "do", "obj", "obj", "NUMBER", "instance_exec", "configure_block", "do", "block", "diff", "git", "a", "lib", "backup", "storage", "object", "NUMBER", "rb", "b", "lib", "backup", "storage", "object", "NUMBER", "rb", "index", "de", "NUMBER", "f", "NUMBER", "cd", "NUMBER", "ae", "NUMBER", "NUMBER", "a", "lib", "backup", "storage", "object", "NUMBER", "rb", "b", "lib", "backup", "storage", "object", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "module", "Backup", "Instantiates", "a", "new", "Backup", "Storage", "Object", "and", "stores", "the", "full", "path", "to", "the", "storage", "file", "yaml", "in", "the", "storage_file", "attribute", "def", "initialize", "type", "storage_file", "File", "NUMBER", "join", "DATA_PATH", "TRIGGER", "type", "NUMBER", "yml", "def", "initialize", "type", "storage_id", "filename", "storage_id", "type", "storage_id", "NUMBER", "yml", "type", "NUMBER", "yml", "storage_file", "File", "NUMBER", "join", "DATA_PATH", "TRIGGER", "filename", "end", "ETA", "Basing", "an", "identifier", "on", "other", "configuration", "parameters", "would", "cause", "a", "new", "YAML", "file", "to", "be", "use", "if", "any", "settings", "change", "which", "you", "wouldn", "t", "want", "particularly", "given", "the", "update", "from", "NUMBER", "allowing", "cycling", "to", "adapt", "to", "change", "of", "credentials", "or", "location", "NUMBER", "You", "could", "automatically", "assign", "something", "based", "on", "it", "s", "array", "position", "when", "loaded", "but", "this", "would", "be", "governed", "by", "the", "position", "of", "the", "call", "within", "the", "config", "file", "which", "the", "user", "may", "not", "be", "aware", "of", "and", "would", "require", "a", "bit", "more", "change", "in", "the", "code", "NUMBER", "Fixed", "in", "NUMBER", "a", "NUMBER", "f", "NUMBER", "b", "NUMBER", "e", "NUMBER", "cee", "NUMBER", "d", "NUMBER", "eb", "NUMBER", "ae", "NUMBER", "NUMBER", "ff", "NUMBER", "b", "NUMBER", "c", "NUMBER", "da", "NUMBER", "ba", "NUMBER", "cbae", "NUMBER", "ba", "NUMBER", "eb", "use", "optional", "storage_id", "to", "suffix", "YAML", "filename", "Lets", "user", "uniquely", "identify", "storage", "configurations", "NUMBER", "This", "allows", "multiple", "storages", "of", "the", "same", "type", "to", "be", "configured", "while", "keep", "the", "cycling", "data", "seperate", "NUMBER", "The", "DSL", "has", "be", "update", "for", "this", "NUMBER", "NUMBER", "a", "NUMBER", "d", "NUMBER", "ba", "NUMBER", "e", "NUMBER", "c", "NUMBER", "caafb", "NUMBER", "b", "NUMBER", "a", "NUMBER", "e", "NUMBER", "b", "NUMBER", "c", "NUMBER", "optional", "storage_id", "parameter", "for", "store_with", "block", "So", "from", "your", "example", "you", "can", "now", "use", "rb", "store_with", "SFTP", "Server", "NUMBER", "do", "server", "server", "NUMBER", "username", "user", "server", "NUMBER", "ip", "server", "NUMBER", "one", "server", "NUMBER", "port", "NUMBER", "server", "NUMBER", "path", "backup", "databases", "server", "NUMBER", "keep", "NUMBER", "end", "store_with", "SFTP", "Server", "NUMBER", "do", "server", "server", "NUMBER", "username", "user", "server", "NUMBER", "ip", "server", "NUMBER", "two", "server", "NUMBER", "port", "NUMBER", "server", "NUMBER", "path", "backup", "databases", "server", "NUMBER", "keep", "NUMBER", "end", "The", "rsync", "prcocess", "was", "stalling", "after", "NUMBER", "NUMBER", "MB", "be", "transferred", "from", "a", "Mac", "client", "to", "a", "Linux", "server", "NUMBER", "Manually", "issue", "the", "rsync", "command", "between", "these", "two", "machines", "worked", "without", "a", "hitch", "NUMBER", "Noticed", "that", "Backup", "was", "use", "the", "partial", "flag", "in", "ps", "NUMBER", "Removing", "the", "P", "flag", "in", "syncer", "rsync", "NUMBER", "rb", "allow", "the", "sync", "to", "complete", "NUMBER", "run", "utility", "rsync", "vh", "options", "directories", "username", "ip", "path", "Backup", "NUMBER", "This", "feature", "do", "not", "work", "to", "replicate", "see", "the", "following", "NUMBER", "With", "this", "config", "ruby", "mysql_config", "username", "bla", "password", "bla", "host", "bla", "Backup", "Configuration", "Database", "MySQL", "NUMBER", "defaults", "do", "db", "db", "NUMBER", "username", "mysql_config", "username", "db", "NUMBER", "password", "mysql_config", "password", "db", "NUMBER", "host", "mysql_config", "host", "db", "NUMBER", "additional_options", "quick", "single", "transaction", "end", "Backup", "Model", "NUMBER", "new", "mysql_a", "NUMBER", "to_sym", "Backup", "for", "db", "a", "do", "database", "MySQL", "do", "db", "db", "NUMBER", "name", "a", "end", "store_with", "SCP", "do", "server", "end", "end", "Backup", "Model", "NUMBER", "new", "mysql_b", "NUMBER", "to_sym", "Backup", "for", "db", "a", "do", "database", "MySQL", "do", "db", "db", "NUMBER", "name", "b", "end", "store_with", "SCP", "do", "server", "end", "end", "and", "this", "command", "backup", "perform", "triggers", "mysql_", "c", "config", "NUMBER", "rb", "You", "get", "uninitialized", "constant", "Backup", "Database", "Base", "TRIGGER", "NameError", "At", "lib", "backup", "database", "base", "NUMBER", "rb", "NUMBER", "in", "prepare", "This", "feature", "was", "build", "in", "reference", "to", "LINK", "LINK", "I", "also", "confirmed", "the", "issue", "manifests", "agains", "the", "current", "head", "NUMBER", "e", "NUMBER", "a", "NUMBER", "e", "NUMBER", "bfabbd", "NUMBER", "c", "NUMBER", "fb", "NUMBER", "bb", "NUMBER", "c", "NUMBER", "calling", "prepare", "after", "database", "config", "initialization", "feels", "really", "wrong", "i", "would", "suggest", "to", "move", "all", "prepare", "calls", "before", "or", "inside", "perform", "Great", "work", "NUMBER", "Thanks", "NUMBER", "Indeed", "thanks", "for", "the", "crazy", "fast", "turn", "around", "Given", "that", "this", "functionality", "be", "not", "release", "as", "a", "gem", "yet", "do", "you", "recommend", "I", "simply", "submodule", "the", "devel", "branch", "backup", "repo", "into", "my", "project", "thats", "use", "the", "gem", "and", "reference", "it", "via", "path", "in", "a", "Gemfile", "Hi", "it", "s", "me", "again", "NUMBER", "I", "run", "in", "a", "issue", "with", "old", "backup", "file", "NUMBER", "Any", "idea", "how", "where", "to", "implement", "a", "warning", "which", "the", "script", "shows", "if", "there", "be", "any", "unknown", "objects", "within", "the", "storage", "directory", "file", "which", "be", "not", "listed", "in", "the", "Local", "NUMBER", "yml", "NUMBER", "First", "shot", "LINK", "ruby", "Performs", "the", "backup", "transfer", "def", "perform", "transfer", "unknown_files_in_storage_dir", "cycle", "end", "LINK", "ruby", "def", "unknown_files_in_storage_dir", "type", "self", "NUMBER", "class", "NUMBER", "name", "NUMBER", "split", "NUMBER", "last", "maybe", "load", "it", "only", "once", "cycle", "storage_object", "Backup", "Storage", "Object", "NUMBER", "new", "type", "objects", "storage_object", "NUMBER", "load", "NUMBER", "get", "and", "show", "differences", "between", "objects", "in", "yaml", "file", "and", "storage", "dir", "NUMBER", "end", "Unfortunately", "not", "I", "use", "the", "Storage", "Local", "part", "of", "your", "gem", "a", "lot", "NUMBER", "Today", "I", "ve", "no", "use", "case", "for", "the", "remote", "storages", "so", "I", "don", "t", "know", "what", "has", "to", "be", "do", "to", "implement", "it", "with", "that", "services", "NUMBER", "Hi", "there", "what", "about", "change", "ruby", "path", "path", "NUMBER", "sub", "ENV", "HOME", "to", "ruby", "path", "File", "NUMBER", "expand_path", "path", "at", "LINK", "L", "NUMBER", "And", "ruby", "Adds", "new", "paths", "to", "the", "paths", "instance", "variable", "array", "def", "add", "path", "paths", "TAG", "usr", "local", "ruby", "bin", "backup", "NUMBER", "in", "load", "usr", "local", "ruby", "bin", "backup", "NUMBER", "in", "TAG", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "on", "platform", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "If", "you", "ve", "setup", "a", "Notification", "in", "your", "configuration", "file", "the", "above", "error", "will", "have", "be", "sent", "see", "LINK", "NUMBER", "should", "be", "helpful", "to", "find", "the", "reason", "for", "your", "problem", "NUMBER", "Please", "see", "below", "Are", "you", "sure", "the", "file", "directories", "you", "would", "like", "to", "backup", "exist", "BTW", "I", "edit", "the", "sources", "to", "get", "the", "stderr", "output", "Please", "see", "comment", "above", "Backup", "Exception", "CommandFailed", "Failed", "to", "run", "tar", "on", "i", "NUMBER", "linux", "NUMBER", "The", "status", "code", "returned", "was", "pid", "NUMBER", "exit", "NUMBER", "STDOUT", "was", "STDERR", "was", "bin", "tar", "tmp", "backup", "test", "Cannot", "stat", "No", "such", "file", "or", "directory", "bin", "tar", "Exiting", "with", "failure", "status", "due", "to", "previous", "error", "I", "think", "it", "s", "this", "line", "which", "cause", "that", "confusion", "ruby", "run", "utility", "tar", "c", "f", "File", "NUMBER", "join", "archive_path", "name", "NUMBER", "tar", "paths_to_exclude", "paths_to_package", "NUMBER", "dev", "null", "I", "suppose", "you", "should", "leave", "out", "ruby", "NUMBER", "dev", "null", "in", "LINK", "_spec", "NUMBER", "rb", "LINK", "and", "everything", "should", "be", "fine", "NUMBER", "Maybe", "you", "miss", "when", "change", "output", "handle", "to", "popen", "NUMBER", "Sorry", "for", "not", "posting", "a", "pull", "request", "for", "that", "NUMBER", "It", "s", "in", "the", "queue", "but", "I", "prepared", "it", "for", "a", "project", "at", "work", "and", "I", "m", "still", "waiting", "for", "the", "authorization", "of", "the", "legal", "department", "NUMBER", "I", "m", "use", "a", "patched", "version", "which", "doesn", "t", "cause", "any", "noise", "NUMBER", "It", "works", "quite", "good", "with", "the", "remove", "stderr", "redirection", "tar", "NUMBER", "When", "do", "you", "plan", "to", "release", "a", "new", "version", "that", "include", "this", "commit", "Within", "a", "few", "days", "hopefully", "NUMBER", "Just", "get", "the", "last", "few", "commit", "and", "pull", "request", "in", "and", "it", "should", "be", "ready", "NUMBER", "Ok", "great", "If", "you", "need", "to", "run", "current", "change", "before", "the", "next", "release", "you", "can", "do", "this", "by", "add", "backup", "as", "a", "git", "submodule", "to", "your", "project", "NUMBER", "You", "can", "also", "do", "this", "use", "Bundler", "LINK", "In", "your", "Gemfile", "you", "can", "use", "ruby", "gem", "backup", "git", "git", "github", "NUMBER", "com", "meskyanichi", "backup", "NUMBER", "git", "branch", "develop", "You", "can", "then", "run", "bundle", "update", "backup", "whenever", "you", "want", "to", "pull", "more", "change", "NUMBER", "Or", "you", "can", "specify", "the", "actual", "commit", "ruby", "gem", "backup", "git", "git", "github", "NUMBER", "com", "meskyanichi", "backup", "NUMBER", "git", "ref", "NUMBER", "a", "NUMBER", "d", "NUMBER", "aca", "I", "tried", "to", "use", "the", "develop", "branch", "like", "that", "but", "run", "into", "some", "other", "issue", "NUMBER", "I", "don", "t", "know", "if", "they", "had", "to", "do", "with", "my", "app", "though", "so", "I", "ll", "rather", "wait", "until", "a", "new", "version", "be", "out", "and", "try", "it", "then", "NUMBER", "Tried", "checking", "out", "the", "develop", "branch", "but", "its", "not", "work", "for", "me", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "CLIError", "NameError", "uninitialized", "constant", "Backup", "CONFIG_FILE", "Any", "idea", "when", "this", "issue", "be", "going", "to", "be", "actually", "fix", "That", "looks", "like", "a", "different", "error", "than", "the", "one", "describe", "in", "the", "initial", "post", "NUMBER", "Did", "you", "try", "installing", "the", "latest", "gem", "I", "tried", "NUMBER", "be", "there", "another", "one", "I", "should", "be", "trying", "John", "On", "Tue", "Jan", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "Michael", "van", "Rooijen", "TAG", "write", "That", "looks", "like", "a", "different", "error", "than", "the", "one", "describe", "in", "the", "initial", "post", "NUMBER", "Did", "you", "try", "installing", "the", "latest", "gem", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Hey", "johntdyer", "If", "you", "want", "to", "checkout", "the", "develop", "branch", "you", "just", "need", "to", "update", "your", "config", "NUMBER", "rb", "file", "by", "change", "the", "reference", "to", "Backup", "CONFIG_FILE", "to", "Config", "NUMBER", "config_file", "like", "so", "Load", "all", "models", "from", "the", "models", "directory", "after", "the", "above", "global", "configuration", "blocks", "Dir", "File", "NUMBER", "join", "File", "NUMBER", "dirname", "Backup", "CONFIG_FILE", "models", "NUMBER", "rb", "NUMBER", "each", "do", "model", "Dir", "File", "NUMBER", "join", "File", "NUMBER", "dirname", "Config", "NUMBER", "config_file", "models", "NUMBER", "rb", "NUMBER", "each", "do", "model", "instance_eval", "File", "NUMBER", "read", "model", "end", "Seems", "to", "be", "fix", "in", "NUMBER", "thanks", "On", "Tue", "Jan", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "burns", "TAG", "write", "Hey", "johntdyer", "If", "you", "want", "to", "checkout", "the", "develop", "branch", "you", "just", "need", "to", "update", "your", "config", "NUMBER", "rb", "file", "by", "change", "the", "reference", "to", "Backup", "CONFIG_FILE", "to", "Config", "NUMBER", "config_file", "like", "so", "Load", "all", "models", "from", "the", "models", "directory", "after", "the", "above", "global", "configuration", "blocks", "Dir", "File", "NUMBER", "join", "File", "NUMBER", "dirname", "Backup", "CONFIG_FILE", "models", "NUMBER", "rb", "NUMBER", "each", "do", "model", "Dir", "File", "NUMBER", "join", "File", "NUMBER", "dirname", "Config", "NUMBER", "config_file", "models", "NUMBER", "rb", "NUMBER", "each", "do", "model", "instance_eval", "File", "NUMBER", "read", "model", "end", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "hi", "please", "find", "a", "new", "notifier", "for", "backup", "attached", "to", "this", "pull", "request", "NUMBER", "use", "the", "prowler", "gem", "the", "notifier", "sends", "its", "message", "to", "an", "iOS", "push", "notification", "gateway", "LINK", "hope", "you", "like", "it", "cheer", "manu", "of", "course", "NUMBER", "just", "add", "This", "could", "solve", "mail", "gem", "dependency", "version", "issue", "When", "giving", "mail", "as", "a", "dependency", "in", "Gemfile", "like", "below", "gem", "backup", "gem", "fog", "NUMBER", "gem", "mail", "NUMBER", "I", "get", "this", "error", "while", "installing", "update", "the", "gems", "NUMBER", "Bundler", "could", "not", "find", "compatible", "version", "for", "gem", "mail", "In", "Gemfile", "rails", "NUMBER", "depends", "on", "mail", "NUMBER", "mail", "NUMBER", "I", "saw", "this", "dependency", "in", "lib", "backup", "dependency", "NUMBER", "rb", "file", "NUMBER", "One", "of", "your", "previous", "commit", "use", "NUMBER", "though", "NUMBER", "Is", "there", "any", "way", "I", "can", "solve", "this", "and", "move", "forward", "in", "installing", "the", "gem", "NUMBER", "same", "same", "ruby", "Bundler", "could", "not", "find", "compatible", "version", "for", "gem", "mail", "In", "Gemfile", "rails", "depends", "on", "mail", "NUMBER", "mail", "NUMBER", "Fixes", "the", "second", "issue", "report", "in", "LINK", "I", "m", "get", "this", "error", "after", "upgrading", "to", "Rails", "NUMBER", "which", "do", "not", "necessarily", "mean", "that", "s", "the", "cause", "lots", "of", "Gems", "were", "update", "and", "other", "change", "Exception", "that", "get", "raise", "NoMethodError", "undefined", "method", "write", "for", "TAG", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "emitter", "NUMBER", "rb", "NUMBER", "in", "end_document", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "emitter", "NUMBER", "rb", "NUMBER", "in", "visit_Psych_Nodes_Document", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "visitor", "NUMBER", "rb", "NUMBER", "in", "accept", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "emitter", "NUMBER", "rb", "NUMBER", "in", "block", "in", "visit_Psych_Nodes_Stream", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "emitter", "NUMBER", "rb", "NUMBER", "in", "each", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "emitter", "NUMBER", "rb", "NUMBER", "in", "visit_Psych_Nodes_Stream", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "visitors", "visitor", "NUMBER", "rb", "NUMBER", "in", "accept", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "nodes", "node", "NUMBER", "rb", "NUMBER", "in", "to_yaml", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "NUMBER", "rb", "NUMBER", "in", "dump", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "psych", "core_ext", "NUMBER", "rb", "NUMBER", "in", "psych_to_yaml", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "rubytypes", "NUMBER", "rb", "NUMBER", "in", "node_export", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "rubytypes", "NUMBER", "rb", "NUMBER", "in", "add", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "rubytypes", "NUMBER", "rb", "NUMBER", "in", "block", "NUMBER", "levels", "in", "to_yaml", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "rubytypes", "NUMBER", "rb", "NUMBER", "in", "each", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "rubytypes", "NUMBER", "rb", "NUMBER", "in", "block", "NUMBER", "levels", "in", "to_yaml", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "rubytypes", "NUMBER", "rb", "NUMBER", "in", "seq", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "rubytypes", "NUMBER", "rb", "NUMBER", "in", "block", "in", "to_yaml", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "NUMBER", "rb", "NUMBER", "in", "call", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "NUMBER", "rb", "NUMBER", "in", "emit", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "NUMBER", "rb", "NUMBER", "in", "quick_emit", "home", "rails", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "syck", "rubytypes", "NUMBER", "rb", "NUMBER", "in", "to_yaml", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "object", "NUMBER", "rb", "NUMBER", "in", "block", "in", "write", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "object", "NUMBER", "rb", "NUMBER", "in", "open", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "object", "NUMBER", "rb", "NUMBER", "in", "write", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "base", "NUMBER", "rb", "NUMBER", "in", "cycle", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "perform", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "block", "in", "perform", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "bin", "backup", "NUMBER", "in", "load", "home", "rails", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "rails", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "This", "error", "happens", "after", "these", "lines", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Notifier", "Mail", "start", "notifying", "about", "the", "process", "NUMBER", "If", "I", "execute", "the", "backup", "command", "via", "bundle", "exec", "I", "get", "a", "different", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Notifier", "Mail", "start", "notifying", "about", "the", "process", "NUMBER", "Exception", "that", "get", "raise", "NoMethodError", "undefined", "method", "sort", "for", "false", "FalseClass", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "object", "NUMBER", "rb", "NUMBER", "in", "load", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "base", "NUMBER", "rb", "NUMBER", "in", "cycle", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "perform", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "block", "in", "perform", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "bin", "backup", "NUMBER", "in", "load", "home", "rails", "apps", "myapp", "shared", "bundle", "ruby", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "so", "it", "seems", "to", "be", "cause", "by", "either", "syck", "or", "psych", "or", "both", "NUMBER", "i", "ll", "investigate", "in", "the", "upcoming", "week", "NUMBER", "Yes", "for", "the", "first", "error", "the", "accepted", "solution", "seems", "to", "be", "to", "require", "psych", "early", "on", "so", "it", "takes", "precedence", "over", "Syck", "NUMBER", "I", "fix", "the", "last", "error", "NUMBER", "The", "issue", "was", "that", "there", "was", "a", "empty", "S", "NUMBER", "yml", "in", "my", "data", "folder", "for", "whatever", "reason", "NUMBER", "That", "be", "why", "in", "object", "NUMBER", "rb", "it", "recognized", "that", "the", "file", "existed", "but", "returned", "false", "as", "the", "content", "NUMBER", "I", "can", "t", "get", "the", "archive", "directory", "method", "to", "work", "If", "I", "use", "archive", "logs", "do", "archive", "archive", "NUMBER", "add", "APP_CONFIG", "app_root", "log", "end", "all", "I", "get", "be", "a", "file", "call", "log", "containing", "the", "text", "home", "NUMBER", "log", "If", "I", "use", "archive", "logs", "do", "archive", "archive", "NUMBER", "add", "APP_CONFIG", "app_root", "log", "newrelic_agent", "NUMBER", "log", "archive", "NUMBER", "add", "APP_CONFIG", "app_root", "log", "end", "I", "also", "get", "the", "correct", "newrelic_agent", "NUMBER", "log", "file", "as", "expected", "NUMBER", "How", "do", "I", "make", "it", "archive", "an", "entire", "directory", "Maybe", "it", "s", "helpful", "to", "add", "a", "puts", "command", "in", "LINK", "to", "find", "out", "what", "s", "going", "on", "NUMBER", "def", "run", "command", "puts", "command", "NUMBER", "end", "Another", "way", "to", "find", "out", "something", "would", "be", "the", "use", "of", "pry", "see", "LINK", "for", "documentation", "NUMBER", "gem", "install", "pry", "LINK", "require", "pry", "def", "run", "command", "binding", "NUMBER", "pry", "NUMBER", "end", "Is", "it", "possible", "to", "run", "a", "backup", "within", "a", "rails", "use", "a", "method", "call", "rather", "than", "a", "system", "call", "When", "I", "set", "db", "NUMBER", "lock", "true", "for", "postgresql", "I", "get", "home", "zzz", "ruby", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "load_config", "undefined", "method", "lock", "for", "TAG", "NoMethodError", "from", "home", "zzz", "ruby", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "database", "postgresql", "NUMBER", "rb", "NUMBER", "in", "instance_eval", "Is", "lock", "not", "support", "for", "postgresql", "I", "m", "get", "the", "following", "error", "during", "backup", "Exception", "that", "get", "raise", "Backup", "Exception", "CommandFailed", "Failed", "to", "run", "tar", "on", "i", "NUMBER", "linux", "NUMBER", "The", "status", "code", "returned", "was", "NUMBER", "STDOUT", "was", "STDERR", "was", "The", "database", "backup", "stage", "prior", "to", "this", "seems", "to", "work", "NUMBER", "What", "could", "be", "cause", "this", "I", "find", "what", "the", "problem", "was", "I", "had", "a", "bad", "path", "in", "an", "archive", "NUMBER", "add", "NUMBER", "I", "find", "this", "out", "by", "modifying", "this", "line", "in", "archive", "NUMBER", "rb", "to", "remove", "the", "write", "to", "dev", "null", "run", "utility", "tar", "c", "f", "File", "NUMBER", "join", "archive_path", "name", "NUMBER", "tar", "paths_to_exclude", "paths_to_package", "NUMBER", "dev", "null", "It", "might", "be", "an", "idea", "to", "modify", "backup", "so", "that", "any", "error", "here", "be", "more", "visible", "logged", "NUMBER", "Be", "aware", "to", "change", "the", "test", "as", "well", "if", "you", "release", "a", "pull", "request", "LINK", "_spec", "NUMBER", "rb", "Let", "me", "know", "what", "you", "think", "about", "this", "NUMBER", "I", "did", "not", "inject", "the", "split", "behavior", "in", "a", "central", "place", "yet", "NUMBER", "Reason", "be", "that", "really", "only", "the", "call", "to", "split", "can", "be", "centralized", "into", "lib", "backup", "model", "NUMBER", "rb", "or", "so", "NUMBER", "Everything", "that", "happens", "inside", "the", "loop", "of", "transferring", "or", "remove", "the", "backup", "file", "looks", "rather", "specific", "for", "every", "storage", "to", "me", "NUMBER", "There", "be", "also", "no", "assemble", "command", "yet", "NUMBER", "All", "it", "takes", "to", "assemble", "the", "parts", "back", "into", "the", "complete", "archive", "be", "cat", "chunk", "whole", "so", "I", "figured", "we", "do", "not", "need", "a", "Ruby", "wrapper", "for", "cat", "NUMBER", "I", "ve", "add", "two", "new", "attributes", "to", "backup", "configuration", "storage", "base", "NUMBER", "rb", "to", "enable", "splitting", "and", "configure", "the", "chunk", "size", "in", "MB", "NUMBER", "I", "have", "not", "tried", "it", "but", "I", "guess", "it", "would", "split", "three", "times", "if", "three", "storages", "be", "configured", "because", "every", "storage", "calls", "split", "again", "on", "transfer", "NUMBER", "That", "split", "should", "probably", "be", "extracted", "from", "the", "storage", "and", "put", "into", "a", "separate", "phase", "NUMBER", "I", "just", "could", "not", "figure", "out", "how", "to", "do", "this", "and", "still", "keep", "all", "my", "splitting", "logic", "together", "in", "one", "module", "NUMBER", "If", "you", "can", "advise", "I", "ll", "be", "happy", "to", "make", "the", "change", "NUMBER", "Neat", "I", "like", "your", "implementation", "way", "better", "than", "mine", "NUMBER", "Thanks", "a", "lot", "for", "this", "awesome", "feature", "NUMBER", "I", "look", "forward", "to", "replacing", "my", "crummy", "version", "with", "this", "one", "Using", "fog", "NUMBER", "backup", "NUMBER", "ruby", "NUMBER", "p", "NUMBER", "I", "get", "the", "following", "error", "ruby", "Excon", "Errors", "SocketError", "Broken", "pipe", "usr", "local", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "syswrite_nonblock", "usr", "local", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "write_nonblock", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "excon", "NUMBER", "lib", "excon", "socket", "NUMBER", "rb", "NUMBER", "in", "write", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "excon", "NUMBER", "lib", "excon", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "fog", "NUMBER", "lib", "fog", "core", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "fog", "NUMBER", "lib", "fog", "aws", "storage", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "fog", "NUMBER", "lib", "fog", "aws", "request", "storage", "put_object", "NUMBER", "rb", "NUMBER", "in", "put_object", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "transfer", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "block", "in", "perform", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "usr", "local", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "backup_util", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "Reminiscent", "of", "issue", "NUMBER", "LINK", "In", "NUMBER", "it", "was", "said", "to", "reopen", "if", "the", "issue", "pops", "up", "again", "so", "that", "s", "what", "I", "m", "doing", "NUMBER", "Could", "be", "a", "one", "time", "thing", "but", "because", "of", "its", "significan", "presence", "in", "the", "past", "I", "doubt", "it", "NUMBER", "I", "will", "check", "all", "of", "these", "things", "for", "you", "when", "I", "get", "home", "this", "evening", "NUMBER", "It", "be", "indeed", "happening", "with", "a", "file", "much", "larger", "than", "NUMBER", "mb", "NUMBER", "I", "haven", "t", "checked", "the", "file", "size", "for", "exact", "numbers", "but", "it", "shouldn", "t", "be", "any", "larger", "than", "NUMBER", "gigs", "NUMBER", "I", "ll", "double", "check", "the", "size", "as", "well", "NUMBER", "If", "it", "be", "a", "size", "issue", "fog", "should", "at", "least", "return", "a", "proper", "error", "message", "but", "again", "I", "don", "t", "think", "that", "s", "true", "in", "my", "case", "NUMBER", "I", "had", "exactly", "the", "same", "issue", "and", "notice", "I", "hadn", "t", "set", "my", "S", "NUMBER", "region", "correctly", "NUMBER", "After", "change", "ruby", "Backup", "Configuration", "Storage", "S", "NUMBER", "defaults", "do", "s", "NUMBER", "s", "NUMBER", "region", "us", "east", "NUMBER", "end", "to", "ruby", "Backup", "Configuration", "Storage", "S", "NUMBER", "defaults", "do", "s", "NUMBER", "s", "NUMBER", "region", "eu", "west", "NUMBER", "end", "the", "issue", "be", "solve", "NUMBER", "billywatson", "maybe", "check", "if", "you", "re", "region", "be", "set", "correctly", "NUMBER", "No", "it", "s", "set", "properly", "because", "when", "I", "try", "with", "a", "really", "small", "file", "it", "works", "and", "upload", "properly", "NUMBER", "Okay", "was", "just", "checking", "because", "I", "had", "the", "same", "issue", "today", "NUMBER", "Then", "it", "indeed", "seems", "to", "be", "a", "Fog", "connection", "issue", "NUMBER", "Okay", "NUMBER", "I", "m", "comfortable", "closing", "the", "issue", "NUMBER", "I", "think", "it", "may", "be", "due", "to", "too", "large", "of", "a", "file", "NUMBER", "I", "don", "t", "like", "the", "cryptic", "error", "message", "but", "I", "m", "not", "sure", "there", "s", "a", "lot", "to", "be", "do", "about", "that", "NUMBER", "I", "m", "use", "Splitter", "with", "a", "NUMBER", "mb", "size", "and", "get", "this", "same", "error", "NUMBER", "On", "S", "NUMBER", "I", "can", "see", "the", "directories", "and", "even", "NUMBER", "tar", "file", "created", "but", "its", "NUMBER", "bytes", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "unirondack", "NUMBER", "tar", "aa", "to", "bucket", "unirondack", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "ModelError", "Backup", "for", "Unirondack", "Backup", "unirondack", "Failed", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "An", "Error", "occured", "which", "has", "cause", "this", "Backup", "to", "abort", "before", "completion", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Reason", "Excon", "Errors", "SocketError", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Broken", "pipe", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Backtrace", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "syswrite", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "do_write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "write", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "excon", "NUMBER", "lib", "excon", "connection", "NUMBER", "rb", "NUMBER", "in", "request_kernel", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "excon", "NUMBER", "lib", "excon", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "fog", "NUMBER", "lib", "fog", "core", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "fog", "NUMBER", "lib", "fog", "aws", "storage", "NUMBER", "rb", "NUMBER", "in", "request", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "fog", "NUMBER", "lib", "fog", "aws", "request", "storage", "put_object", "NUMBER", "rb", "NUMBER", "in", "put_object", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "transfer", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "open", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "transfer", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "base", "NUMBER", "rb", "NUMBER", "in", "files_to_transfer_for", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "base", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "base", "NUMBER", "rb", "NUMBER", "in", "files_to_transfer_for", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "transfer", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "storage", "base", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "open", "NUMBER", "NUMBER", "lib", "open", "NUMBER", "rb", "NUMBER", "in", "to_proc", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "cli", "utility", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "cli", "utility", "NUMBER", "rb", "NUMBER", "in", "each", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "lib", "backup", "cli", "utility", "NUMBER", "rb", "NUMBER", "in", "perform", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "send", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "bin", "backup", "NUMBER", "in", "load", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "home", "unirondack", "NUMBER", "gems", "bin", "backup", "NUMBER", "Hi", "I", "tried", "to", "write", "a", "way", "to", "have", "extendable", "model", "NUMBER", "I", "wanted", "to", "do", "such", "a", "config", "possible", "ruby", "Backup", "Model", "NUMBER", "new", "db_backup", "My", "Backup", "do", "database", "MySQL", "do", "db", "db", "NUMBER", "name", "firstdb", "db", "NUMBER", "username", "firstdb", "db", "NUMBER", "password", "firstdb", "db", "NUMBER", "host", "localhost", "db", "NUMBER", "port", "NUMBER", "db", "NUMBER", "socket", "var", "run", "mysqld", "mysqld", "NUMBER", "sock", "end", "database", "MySQL", "do", "db", "db", "NUMBER", "name", "seconddb", "db", "NUMBER", "username", "seconddb", "db", "NUMBER", "password", "seconddb", "db", "NUMBER", "host", "localhost", "db", "NUMBER", "port", "NUMBER", "db", "NUMBER", "socket", "var", "run", "mysqld", "mysqld", "NUMBER", "sock", "end", "compress_with", "Gzip", "do", "compression", "compression", "NUMBER", "best", "true", "compression", "NUMBER", "fast", "false", "end", "end", "Backup", "Model", "NUMBER", "new", "daily", "My", "Backup", "db_backup", "do", "store_with", "S", "NUMBER", "do", "s", "NUMBER", "s", "NUMBER", "access_key_id", "my_access_key_id", "s", "NUMBER", "secret_access_key", "my_secret_access_key", "s", "NUMBER", "region", "us", "east", "NUMBER", "s", "NUMBER", "bucket", "bucket", "name", "s", "NUMBER", "path", "path", "to", "my", "daily", "backups", "s", "NUMBER", "keep", "NUMBER", "end", "end", "Backup", "Model", "NUMBER", "new", "weekly", "My", "Backup", "db_backup", "do", "store_with", "S", "NUMBER", "do", "s", "NUMBER", "s", "NUMBER", "access_key_id", "my_access_key_id", "s", "NUMBER", "secret_access_key", "my_secret_access_key", "s", "NUMBER", "region", "us", "east", "NUMBER", "s", "NUMBER", "bucket", "bucket", "name", "s", "NUMBER", "path", "path", "to", "my", "weekly", "backups", "s", "NUMBER", "keep", "NUMBER", "end", "end", "Backup", "Model", "NUMBER", "new", "monthly", "My", "Backup", "db_backup", "do", "store_with", "S", "NUMBER", "do", "s", "NUMBER", "s", "NUMBER", "access_key_id", "my_access_key_id", "s", "NUMBER", "secret_access_key", "my_secret_access_key", "s", "NUMBER", "region", "us", "east", "NUMBER", "s", "NUMBER", "bucket", "bucket", "name", "s", "NUMBER", "path", "path", "to", "my", "monthly", "backups", "s", "NUMBER", "keep", "NUMBER", "end", "end", "I", "m", "very", "new", "in", "ruby", "so", "feel", "free", "to", "make", "a", "better", "implementation", "if", "you", "want", "to", "keep", "this", "feature", "NUMBER", "single", "pipe", "should", "be", "replaced", "with", "double", "pipe", "there", "should", "be", "test", "and", "i", "m", "not", "sure", "this", "be", "a", "good", "approach", "NUMBER", "why", "not", "just", "clone", "the", "parent", "model", "and", "call", "store_with", "again", "within", "the", "context", "of", "the", "new", "cloned", "one", "Sorry", "I", "don", "t", "know", "what", "do", "you", "mean", "with", "double", "pipe", "NUMBER", "I", "try", "to", "change", "ruby", "databases", "self", "NUMBER", "databases", "model", "NUMBER", "databases", "by", "ruby", "databases", "self", "NUMBER", "databases", "model", "NUMBER", "databases", "It", "do", "not", "work", "but", "again", "I", "m", "a", "newbie", "in", "Ruby", "p", "I", "also", "try", "to", "make", "a", "clone", "of", "the", "parent", "and", "also", "to", "call", "store_with", "NUMBER", "I", "try", "something", "like", "that", "ruby", "base", "Backup", "Model", "NUMBER", "new", "db_backup", "My", "Backup", "do", "NUMBER", "end", "weekly", "base", "NUMBER", "clone", "weekly", "NUMBER", "trigger", "weekly", "weekly", "NUMBER", "ore_with", "S", "NUMBER", "do", "s", "NUMBER", "s", "NUMBER", "access_key_id", "my_access_key_id", "s", "NUMBER", "secret_access_key", "my_secret_access_key", "s", "NUMBER", "region", "us", "east", "NUMBER", "s", "NUMBER", "bucket", "bucket", "name", "s", "NUMBER", "path", "path", "to", "my", "backups", "s", "NUMBER", "keep", "NUMBER", "end", "Backup", "Model", "NUMBER", "all", "TAG", "for", "me", "NUMBER", "I", "could", "use", "weekly", "NUMBER", "instance_variable_set", "trigger", "weekly", "even", "though", "it", "looks", "hackish", "but", "it", "throw", "undefined", "method", "basename", "for", "nil", "NilClass", "at", "var", "lib", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "splitter", "NUMBER", "rb", "NUMBER", "Need", "to", "make", "sure", "the", "shell", "knows", "about", "exception", "problem", "NUMBER", "This", "helps", "when", "run", "backup", "from", "another", "app", "NUMBER", "We", "also", "have", "be", "looking", "for", "something", "like", "this", "Thanks", "Crim", "We", "use", "the", "backup", "gem", "as", "part", "of", "an", "automate", "backup", "system", "and", "rely", "on", "exit", "code", "to", "report", "failure", "success", "NUMBER", "But", "right", "now", "they", "will", "always", "report", "success", "NUMBER", "This", "patch", "should", "help", "quite", "a", "bit", "NUMBER", "It", "seems", "as", "if", "only", "rsync", "through", "ssh", "be", "support", "NUMBER", "I", "want", "to", "rsync", "to", "my", "dropbox", "folder", "and", "I", "did", "not", "find", "a", "way", "to", "with", "Backup", "NUMBER", "be", "that", "not", "support", "Marcelo", "NUMBER", "ruby", "Backup", "Model", "NUMBER", "new", "my_backup", "My", "Backup", "do", "sync_with", "RSync", "do", "rsync", "rsync", "NUMBER", "ip", "NUMBER", "rsync", "NUMBER", "port", "NUMBER", "rsync", "NUMBER", "username", "user", "rsync", "NUMBER", "path", "Dropbox", "data", "rsync", "NUMBER", "directories", "do", "directory", "directory", "NUMBER", "add", "var", "lib", "data", "end", "end", "end", "This", "works", "for", "me", "with", "my", "public", "key", "in", "NUMBER", "ssh", "authorized_keys", "NUMBER", "Hi", "there", "yesterday", "I", "faced", "a", "issue", "use", "backup", "gem", "If", "you", "backup", "a", "directory", "and", "some", "file", "were", "change", "during", "backup", "tar", "will", "exit", "with", "NUMBER", "afterwards", "NUMBER", "This", "will", "cause", "backup", "to", "exit", "before", "finishing", "the", "backup", "cycle", "NUMBER", "It", "might", "be", "worth", "to", "change", "the", "way", "how", "tar", "runs", "be", "handle", "NUMBER", "I", "thought", "of", "two", "different", "ways", "to", "handle", "it", "NUMBER", "begin", "rescue", "around", "tar", "run", "NUMBER", "Adding", "an", "optional", "parameter", "to", "the", "run", "Method", "to", "tell", "it", "which", "exit", "code", "be", "good", "e", "NUMBER", "g", "NUMBER", "run", "command", "W", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "LINK", "If", "tar", "was", "given", "create", "append", "or", "update", "option", "this", "exit", "code", "means", "that", "some", "file", "were", "change", "while", "be", "archived", "and", "so", "the", "resulting", "archive", "do", "not", "contain", "the", "exact", "copy", "of", "the", "file", "set", "NUMBER", "Cheers", "deg", "Michael", "I", "will", "get", "to", "it", "soon", "NUMBER", "Please", "stay", "tuned", "NUMBER", "Cheers", "deg", "Patch", "finished", "NUMBER", "Waiting", "for", "internal", "authorization", "to", "release", "it", "Update", "Legal", "department", "be", "involved", "I", "m", "still", "waiting", "NUMBER", "the", "lady", "in", "charge", "be", "busy", "unfortunately", "NUMBER", "Hi", "there", "I", "talked", "to", "my", "boss", "at", "the", "beginning", "of", "this", "week", "NUMBER", "He", "told", "me", "that", "he", "s", "still", "waiting", "for", "a", "response", "of", "the", "legal", "department", "NUMBER", "I", "assume", "it", "do", "not", "corrupt", "the", "archive", "if", "file", "on", "the", "filesystem", "change", "or", "add", "remove", "during", "the", "tar", "archiving", "process", "I", "didn", "t", "have", "any", "issue", "with", "that", "NUMBER", "I", "learnt", "that", "tar", "be", "a", "utility", "that", "was", "made", "to", "write", "data", "to", "tapes", "I", "writes", "file", "one", "after", "another", "NUMBER", "I", "think", "that", "s", "why", "sh", "tar", "cf", "etc", "tar", "xf", "C", "works", "NUMBER", "Am", "I", "right", "to", "say", "that", "the", "exit", "NUMBER", "code", "only", "implies", "that", "it", "s", "not", "an", "exact", "copy", "anymore", "since", "there", "were", "change", "to", "the", "file", "system", "but", "the", "archive", "was", "properly", "put", "together", "That", "s", "why", "I", "think", "it", "should", "be", "no", "problem", "NUMBER", "Maybe", "I", "find", "the", "time", "to", "check", "this", "in", "a", "secure", "manner", "and", "or", "ask", "the", "developers", "of", "gnu", "tar", "NUMBER", "BTW", "I", "m", "not", "sure", "if", "other", "unix", "tar", "utilities", "return", "NUMBER", "if", "a", "file", "has", "be", "change", "during", "backup", "NUMBER", "Perhaps", "you", "better", "leave", "the", "decision", "to", "the", "users", "of", "your", "gem", "e", "NUMBER", "g", "NUMBER", "via", "an", "option", "in", "the", "configuration", "file", "If", "they", "re", "paranoid", "they", "might", "want", "to", "stop", "the", "backup", "process", "every", "time", "there", "s", "a", "exit", "status", "NUMBER", "You", "be", "write", "to", "the", "wrong", "DEG", "NUMBER", "David", "Michael", "van", "Rooijen", "reply", "reply", "NUMBER", "github", "NUMBER", "com", "write", "deg", "I", "went", "ahead", "and", "implement", "it", "myself", "as", "I", "was", "doing", "some", "basic", "householding", "in", "the", "app", "in", "general", "NUMBER", "Started", "out", "with", "some", "basic", "snippets", "and", "turned", "out", "the", "implement", "was", "fairly", "simple", "so", "I", "went", "ahead", "and", "did", "it", "NUMBER", "This", "be", "what", "I", "have", "now", "ruby", "encoding", "utf", "NUMBER", "module", "Backup", "module", "CLI", "Runs", "a", "given", "command", "in", "an", "isolated", "sub", "process", "use", "POpen", "NUMBER", "The", "STDOUT", "STDERR", "and", "the", "returned", "exit", "code", "of", "the", "utility", "will", "be", "stored", "in", "the", "process_data", "Hash", "NUMBER", "If", "a", "command", "returns", "an", "exit", "code", "other", "than", "NUMBER", "an", "exception", "will", "raise", "and", "the", "backup", "process", "will", "abort", "NUMBER", "Some", "utilities", "return", "exit", "code", "other", "than", "NUMBER", "which", "aren", "t", "an", "issue", "in", "Backup", "s", "context", "NUMBER", "If", "this", "be", "the", "case", "you", "can", "pass", "in", "an", "array", "of", "exit", "code", "to", "ignore", "whitelist", "for", "example", "run", "tar", "cf", "output", "NUMBER", "tar", "some", "folder", "ignore_exit_codes", "NUMBER", "So", "if", "the", "tar", "utility", "returns", "in", "this", "case", "NUMBER", "Backup", "will", "consider", "it", "an", "acceptable", "return", "code", "NUMBER", "Note", "Exit", "code", "NUMBER", "be", "always", "automatically", "add", "to", "the", "ignore_exit_codes", "array", "regardless", "of", "whether", "you", "specify", "an", "array", "to", "ignore", "or", "not", "NUMBER", "def", "run", "command", "options", "command", "NUMBER", "gsub", "s", "process_data", "Hash", "NUMBER", "new", "pid", "stdin", "stdout", "stderr", "Open", "NUMBER", "popen", "NUMBER", "command", "ignored", "process_data", "status", "Process", "waitpid", "NUMBER", "pid", "process_data", "stdout", "stdout", "NUMBER", "read", "process_data", "stderr", "stderr", "NUMBER", "read", "process_data", "ignore_exit_codes", "options", "ignore_exit_codes", "Array", "NUMBER", "new", "TAG", "NUMBER", "x", "NUMBER", "Rails", "NUMBER", "support", "Mail", "v", "NUMBER", "A", "bit", "of", "a", "jumble", "of", "change", "sorry", "NUMBER", "I", "can", "separate", "them", "out", "if", "needed", "NUMBER", "e", "It", "s", "probably", "because", "of", "my", "just", "starting", "to", "explore", "Backup", "NUMBER", "I", "find", "a", "few", "articles", "of", "people", "use", "it", "with", "Rails", "and", "storing", "their", "config", "info", "in", "their", "app", "NUMBER", "I", "ll", "explore", "it", "as", "a", "standalone", "option", "NUMBER", "That", "would", "make", "sense", "NUMBER", "No", "pollution", "of", "repos", "and", "need", "for", "gitignore", "stuff", "NUMBER", "I", "be", "use", "it", "as", "a", "tool", "in", "my", "deployment", "scripts", "NUMBER", "Backup", "before", "migration", "NUMBER", "Had", "an", "ugly", "several", "line", "script", "that", "did", "that", "and", "now", "I", "just", "call", "your", "gem", "NUMBER", "It", "s", "also", "something", "I", "need", "to", "set", "up", "as", "a", "recurring", "job", "NUMBER", "The", "delay", "in", "replying", "has", "fuzzed", "my", "mind", "on", "all", "this", "but", "it", "s", "come", "back", "to", "me", "NUMBER", "May", "explore", "soon", "again", "NUMBER", "Sendmail", "support", "has", "be", "add", "in", "NUMBER", "e", "NUMBER", "c", "NUMBER", "cf", "NUMBER", "ffa", "NUMBER", "d", "NUMBER", "ca", "NUMBER", "d", "NUMBER", "a", "NUMBER", "f", "NUMBER", "I", "ve", "just", "bundle", "install", "the", "gem", "and", "be", "run", "the", "generator", "for", "the", "first", "time", "per", "the", "quick", "start", "instructions", "NUMBER", "I", "m", "receiving", "this", "error", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dependency", "miss", "NUMBER", "Users", "matte", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "wwwadmin", "gems", "backup", "NUMBER", "lib", "backup", "logger", "NUMBER", "rb", "NUMBER", "in", "initialize", "No", "such", "file", "or", "directory", "Users", "matte", "Backup", "log", "backup", "NUMBER", "log", "Errno", "ENOENT", "It", "happens", "no", "matter", "what", "backup", "command", "I", "run", "even", "backup", "help", "NUMBER", "Nowhere", "in", "the", "instructions", "do", "it", "mention", "the", "need", "for", "that", "directory", "NUMBER", "I", "ve", "created", "the", "Backup", "log", "and", "the", "backup", "NUMBER", "log", "file", "NUMBER", "That", "remove", "that", "error", "however", "now", "it", "s", "telling", "me", "that", "the", "dependency", "popen", "NUMBER", "be", "not", "install", "NUMBER", "It", "appears", "that", "the", "dependencies", "weren", "t", "checked", "or", "install", "NUMBER", "FYI", "NUMBER", "e", "No", "worries", "NUMBER", "I", "was", "looking", "through", "more", "of", "the", "documentation", "and", "notice", "the", "mention", "that", "it", "do", "not", "install", "all", "the", "dependencies", "but", "mentions", "when", "you", "need", "any", "particular", "ones", "after", "run", "from", "the", "cmd", "line", "NUMBER", "That", "s", "nice", "though", "perhaps", "a", "quick", "mention", "of", "that", "in", "the", "Quick", "Start", "might", "be", "warranted", "NUMBER", "I", "ve", "update", "my", "Gemfile", "to", "contain", "the", "necessary", "dependencies", "NUMBER", "I", "m", "sad", "it", "took", "me", "so", "long", "to", "get", "start", "with", "this", "gem", "NUMBER", "Really", "enjoying", "it", "even", "after", "such", "a", "short", "time", "use", "it", "NUMBER", "e", "I", "very", "much", "like", "the", "Dropbox", "storage", "option", "it", "really", "only", "has", "the", "flaw", "that", "maximum", "file", "size", "be", "NUMBER", "MB", "NUMBER", "Now", "I", "be", "work", "on", "a", "project", "that", "will", "shortly", "hit", "this", "limitation", "NUMBER", "Dropbox", "be", "still", "cool", "as", "storage", "so", "I", "be", "get", "ready", "to", "provide", "an", "impl", "for", "a", "feature", "to", "split", "up", "the", "backup", "file", "NUMBER", "In", "the", "first", "place", "I", "be", "curious", "if", "anybody", "has", "thoughts", "advise", "in", "this", "direction", "and", "of", "course", "whether", "this", "feature", "exists", "and", "I", "be", "just", "not", "finding", "it", "NUMBER", "I", "also", "find", "that", "somebody", "already", "implement", "this", "feature", "a", "while", "ago", "LINK", "NUMBER", "Any", "particular", "reason", "why", "this", "never", "its", "way", "back", "to", "the", "main", "branch", "Understood", "NUMBER", "I", "also", "like", "the", "splitter", "class", "but", "was", "thinking", "about", "a", "solution", "that", "be", "more", "contained", "in", "the", "storage", "package", "NUMBER", "From", "a", "quick", "look", "at", "the", "code", "my", "approach", "would", "be", "like", "this", "Create", "the", "splitter", "module", "NUMBER", "Include", "the", "splitter", "module", "into", "storage", "base", "and", "extend", "the", "base", "storage", "configuration", "NUMBER", "Provide", "a", "new", "split", "method", "in", "base", "that", "the", "storage", "impls", "should", "call", "from", "perform", "NUMBER", "This", "method", "splits", "if", "applicable", "use", "the", "Splitter", "class", "and", "returns", "the", "list", "of", "resulting", "file", "NUMBER", "The", "storage", "impls", "would", "have", "to", "be", "change", "to", "upload", "all", "file", "returned", "from", "split", "NUMBER", "For", "simple", "cycling", "the", "filenames", "of", "the", "chunk", "would", "just", "get", "a", "run", "extension", "NUMBER", "NUMBER", "etc", "NUMBER", "Change", "the", "storage", "impls", "so", "that", "remove", "can", "also", "remove", "the", "chunks", "NUMBER", "So", "splitting", "would", "remain", "a", "concern", "of", "only", "the", "storage", "package", "NUMBER", "Sound", "reasonable", "Just", "two", "general", "question", "as", "I", "get", "ready", "to", "implement", "the", "feature", "Running", "bundle", "exec", "guard", "start", "works", "fine", "it", "just", "do", "not", "print", "any", "error", "NUMBER", "Not", "even", "when", "I", "introduce", "a", "bug", "that", "should", "be", "caught", "be", "a", "spec", "NUMBER", "It", "recognizes", "the", "change", "in", "the", "file", "system", "though", "NUMBER", "This", "be", "the", "first", "time", "I", "be", "use", "Guard", "so", "I", "might", "be", "doing", "something", "fundamentally", "wrong", "here", "NUMBER", "Running", "specs", "from", "the", "directory", "fail", "some", "with", "message", "like", "Mocha", "ExpectationError", "unexpect", "invocation", "File", "NUMBER", "open", "home", "matthias", "Backup", "NUMBER", "tmp", "NUMBER", "myapp", "NUMBER", "tar", "NUMBER", "enc", "unsatisfied", "expectations", "expected", "exactly", "once", "not", "yet", "invoked", "Mock", "Fog", "Storage", "NUMBER", "put_object", "my", "bucket", "backups", "myapp", "NUMBER", "myapp", "NUMBER", "tar", "Mock", "Backup", "Storage", "S", "NUMBER", "File", "expected", "exactly", "once", "not", "yet", "invoked", "File", "NUMBER", "open", "home", "matthias", "Backup", "NUMBER", "tmp", "NUMBER", "myapp", "NUMBER", "tar", "I", "be", "run", "with", "ruby", "NUMBER", "by", "default", "but", "install", "all", "the", "rubies", "as", "you", "advised", "in", "the", "want", "to", "contribute", "section", "NUMBER", "Any", "idea", "what", "I", "be", "doing", "wrong", "Alright", "NUMBER", "I", "have", "no", "idea", "why", "guard", "did", "not", "work", "it", "do", "now", "in", "a", "new", "shell", "probably", "something", "screwed", "up", "on", "my", "box", "NUMBER", "The", "other", "issue", "appears", "only", "when", "run", "all", "specs", "together", "in", "a", "certain", "order", "open_ssl_spec", "before", "the", "storage", "specs", "The", "open_ssl_spec", "alters", "the", "Backup", "Model", "NUMBER", "extension", "to", "be", "tar", "NUMBER", "enc", "which", "be", "not", "what", "the", "other", "specs", "expect", "NUMBER", "I", "have", "add", "ruby", "after", "each", "do", "Backup", "Model", "NUMBER", "extension", "tar", "end", "to", "open_ssl_spec", "NUMBER", "rb", "and", "now", "I", "have", "a", "green", "bar", "well", "several", "of", "them", "actually", "NUMBER", "I", "start", "to", "like", "Guard", "NUMBER", "Oh", "and", "yes", "I", "agree", "with", "your", "note", "NUMBER", "Will", "do", "it", "that", "way", "Just", "checking", "on", "the", "status", "of", "this", "new", "feature", "it", "s", "the", "only", "thing", "miss", "from", "a", "true", "enterprisey", "backup", "tool", "NUMBER", "Currently", "we", "backup", "locally", "and", "use", "a", "split", "script", "and", "upload", "script", "instead", "NUMBER", "I", "m", "still", "work", "on", "it", "just", "did", "not", "have", "time", "to", "get", "to", "this", "during", "the", "last", "weeks", "NUMBER", "Maybe", "I", "have", "something", "later", "this", "weekend", "NUMBER", "I", "ll", "keep", "you", "posted", "NUMBER", "Alright", "this", "be", "the", "very", "first", "cut", "for", "the", "splitter", "and", "the", "integration", "with", "the", "Dropbox", "storage", "NUMBER", "LINK", "I", "still", "need", "to", "update", "all", "the", "other", "storage", "implementations", "and", "provide", "the", "assemble", "command", "NUMBER", "Let", "me", "know", "what", "you", "guys", "think", "m", "NUMBER", "the", "code", "looks", "good", "at", "least", "the", "first", "skim", "NUMBER", "i", "like", "it", "maybe", "instead", "of", "update", "all", "the", "storage", "implementations", "you", "could", "just", "inject", "the", "splitting", "stuff", "somewhere", "in", "the", "prepare", "before", "storing", "flow", "tomash", "I", "fully", "agree", "NUMBER", "I", "was", "actually", "searching", "for", "a", "way", "to", "somehow", "inject", "the", "handle", "of", "multiple", "file", "but", "couldn", "t", "find", "tthe", "one", "place", "where", "it", "can", "just", "made", "work", "automagically", "for", "all", "storage", "impls", "NUMBER", "Any", "specific", "ideas", "Otherwise", "the", "dropbox", "impl", "now", "runs", "happily", "on", "my", "server", "NUMBER", "No", "manual", "upgrade", "was", "required", "it", "seems", "to", "be", "backward", "compatible", "NUMBER", "I", "might", "have", "some", "time", "tomorrow", "to", "complete", "the", "feature", "NUMBER", "i", "d", "look", "in", "lib", "backup", "model", "NUMBER", "rb", "there", "seems", "to", "be", "at", "least", "a", "few", "places", "we", "could", "use", "NUMBER", "not", "sure", "though", "NUMBER", "Just", "placed", "the", "pull", "request", "LINK", "I", "be", "happy", "to", "work", "a", "little", "more", "on", "your", "latest", "suggestions", "but", "will", "need", "some", "more", "context", "as", "to", "what", "should", "be", "do", "see", "pull", "request", "description", "NUMBER", "new", "branch", "to", "have", "it", "test", "and", "smoothed", "be", "a", "great", "idea", "NUMBER", "i", "d", "love", "to", "have", "that", "feature", "and", "will", "test", "it", "but", "that", "s", "quite", "a", "change", "to", "the", "codebase", "NUMBER", "Hi", "there", "I", "keep", "get", "Dependency", "miss", "for", "fog", "on", "Ubuntu", "NUMBER", "even", "though", "it", "be", "install", "NUMBER", "I", "have", "tried", "remove", "every", "gem", "and", "reinstalling", "fog", "and", "backup", "but", "it", "do", "the", "same", "NUMBER", "It", "works", "straight", "away", "on", "my", "Mac", "NUMBER", "Yep", "the", "latest", "gems", "from", "rubygems", "NUMBER", "org", "NUMBER", "I", "be", "run", "it", "as", "a", "different", "user", "but", "have", "to", "run", "gem", "install", "as", "sudo", "NUMBER", "And", "no", "I", "m", "not", "use", "RVM", "NUMBER", "But", "I", "still", "have", "access", "to", "the", "gems", "NUMBER", "Turns", "out", "I", "had", "RubyGems", "version", "NUMBER", "Updating", "to", "the", "latest", "version", "NUMBER", "fix", "the", "problem", "NUMBER", "How", "do", "I", "go", "about", "backing", "up", "all", "the", "databases", "on", "the", "server", "Ah", "that", "s", "great", "NUMBER", "Will", "give", "it", "a", "go", "thanks", "NUMBER", "you", "can", "also", "pass", "all", "databases", "to", "the", "additional_options", "mysqldump", "be", "use", "behind", "the", "scenes", "and", "make", "the", "name", "a", "blank", "string", "NUMBER", "This", "do", "have", "the", "side", "effect", "of", "when", "downloading", "the", "file", "to", "restore", "the", "name", "be", "NUMBER", "sql", "which", "makes", "it", "invisible", "at", "least", "in", "the", "Finder", "on", "a", "Mac", "which", "can", "cause", "severe", "panic", "NUMBER", "MongoDB", "LINK", "Export", "Tools", "ImportExportTools", "Example", "NUMBER", "ADumpingEverything", "Postgres", "LINK", "pg", "dumpall", "NUMBER", "html", "uses", "a", "separate", "command", "I", "remember", "trying", "to", "do", "this", "with", "the", "backup", "gem", "and", "had", "to", "do", "individual", "dbs", "since", "I", "didn", "t", "have", "time", "to", "implement", "this", "NUMBER", "I", "m", "ok", "with", "either", "syntax", "though", "the", "NUMBER", "might", "be", "easier", "to", "implement", "NUMBER", "What", "would", "the", "file", "that", "be", "saved", "be", "call", "date", "NUMBER", "all", "NUMBER", "tar", "NUMBER", "gz", "I", "guess", "the", "db", "NUMBER", "name", "setting", "wouldn", "t", "make", "much", "sense", "anymore", "NUMBER", "This", "be", "good", "to", "find", "NUMBER", "Has", "this", "be", "implement", "yet", "Just", "ask", "again", "was", "this", "ever", "implement", "Has", "this", "be", "implement", "in", "Backup", "v", "NUMBER", "See", "LINK", "Excellent", "hopefully", "that", "gets", "merge", "thanks", "Looks", "like", "this", "has", "be", "merge", "LINK", "issuecomment", "NUMBER", "Thanks", "Allow", "logging", "to", "syslog", "or", "to", "other", "logger", "objects", "rather", "than", "the", "build", "in", "one", "NUMBER", "I", "opened", "this", "because", "I", "m", "trying", "to", "get", "everything", "possible", "to", "log", "to", "syslog", "use", "LINK", "to", "collect", "everything", "NUMBER", "The", "standard", "ruby", "logger", "LINK", "doc", "NUMBER", "org", "stdlib", "libdoc", "logger", "rdoc", "classes", "Logger", "NUMBER", "html", "defines", "an", "API", "for", "a", "logger", "object", "and", "there", "be", "other", "gems", "that", "follow", "this", "API", "LINK", "seems", "to", "be", "the", "best", "most", "active", "for", "syslog", "NUMBER", "I", "opened", "this", "after", "seeing", "how", "chef", "can", "do", "it", "LINK", "NUMBER", "focusedCommentId", "NUMBER", "page", "com", "NUMBER", "atlassian", "NUMBER", "jira", "NUMBER", "plugin", "NUMBER", "system", "NUMBER", "issuetabpanels", "comment", "tabpanel", "comment", "NUMBER", "by", "specify", "in", "a", "configuration", "file", "an", "object", "that", "will", "act", "as", "the", "logger", "NUMBER", "Let", "me", "know", "if", "that", "doesn", "t", "make", "any", "sense", "NUMBER", "Closing", "this", "because", "of", "the", "fix", "above", "thanks", "antonlindstrom", "If", "you", "re", "use", "logstash", "you", "can", "use", "the", "backup", "log", "file", "for", "an", "input", "and", "output", "to", "just", "about", "anything", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "Backup", "for", "winnie", "test", "NUMBER", "postgres", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Database", "PostgreSQL", "start", "dumping", "and", "archiving", "winnie", "test", "NUMBER", "sh", "pg_dump", "not", "find", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "packaging", "everything", "to", "a", "single", "archive", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Compressor", "Gzip", "start", "compressing", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "SFTP", "start", "transferring", "NUMBER", "winnie", "test", "NUMBER", "postgres", "NUMBER", "tar", "NUMBER", "gz", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "We", "also", "had", "Mail", "notifier", "set", "and", "we", "didn", "t", "get", "any", "failure", "notifications", "NUMBER", "I", "think", "it", "should", "rise", "an", "error", "when", "dumping", "database", "and", "send", "email", "about", "failure", "NUMBER", "Using", "the", "relatively", "new", "support", "in", "Fog", "for", "Ninefold", "add", "in", "storage", "support", "for", "it", "NUMBER", "I", "ve", "be", "use", "this", "for", "over", "three", "weeks", "no", "issue", "cycling", "works", "all", "fine", "NUMBER", "NUMBER", "from", "me", "NUMBER", "any", "objections", "if", "none", "i", "ll", "merge", "it", "within", "a", "day", "or", "two", "NUMBER", "Dropbox", "Session", "authorize", "has", "be", "remove", "as", "of", "Dropbox", "NUMBER", "in", "favor", "of", "following", "the", "OAuth", "ish", "convention", "of", "caching", "OAuth", "session", "credentials", "NUMBER", "Problems", "solve", "Based", "on", "the", "method", "signature", "and", "object", "name", "I", "guessed", "that", "backup", "actually", "depended", "on", "Open", "NUMBER", "not", "POpen", "NUMBER", "which", "requires", "a", "block", "Given", "that", "Open", "NUMBER", "popen", "NUMBER", "be", "use", "in", "Backup", "CLI", "run", "I", "add", "it", "as", "a", "production", "gem", "dependency", "in", "the", "gemspec", "NUMBER", "A", "helper", "has", "be", "add", "to", "the", "executable", "to", "simplify", "the", "process", "of", "caching", "Dropbox", "credentials", "NUMBER", "Problems", "not", "solve", "I", "wasn", "t", "sure", "how", "I", "wanted", "to", "go", "about", "provide", "deprecation", "warnings", "for", "api_key", "and", "api_secret", "NUMBER", "I", "don", "t", "like", "the", "command", "name", "for", "the", "backup", "executable", "I", "use", "NUMBER", "Unfortunately", "I", "can", "t", "think", "of", "anything", "better", "NUMBER", "This", "may", "relate", "to", "help", "with", "meskyanichi", "backup", "NUMBER", "wow", "a", "lot", "of", "work", "NUMBER", "thanks", "i", "should", "have", "some", "time", "the", "upcoming", "weekend", "to", "test", "this", "anyone", "else", "also", "please", "the", "more", "eyeballs", "the", "better", "if", "this", "makes", "dropbox", "backups", "work", "again", "then", "of", "course", "i", "m", "merge", "this", "one", "in", "NUMBER", "I", "may", "have", "discover", "an", "issue", "when", "cycling", "backups", "NUMBER", "I", "ll", "be", "investigating", "tomorrow", "NUMBER", "Oh", "has", "nothing", "to", "do", "with", "cycling", "backups", "NUMBER", "Has", "everything", "to", "do", "with", "old", "version", "of", "serialized", "backup", "information", "not", "having", "references", "to", "the", "new", "serialized_session", "file", "path", "NUMBER", "I", "ll", "start", "work", "on", "a", "migration", "path", "for", "exist", "Dropbox", "YAML", "object", "caches", "tomorrow", "NUMBER", "I", "can", "either", "bundle", "it", "with", "this", "pull", "request", "or", "it", "could", "come", "separately", "NUMBER", "Just", "let", "me", "know", "which", "you", "d", "prefer", "NUMBER", "Moved", "dropbox", "stuff", "into", "it", "s", "own", "command", "NUMBER", "New", "command", "provides", "a", "turn", "key", "solution", "for", "fetching", "a", "serialized", "Dropbox", "OAuth", "session", "as", "well", "as", "a", "helper", "which", "will", "migrate", "old", "DATA_DIR", "Dropbox", "NUMBER", "yml", "file", "to", "match", "the", "new", "settings", "in", "an", "update", "config", "file", "NUMBER", "Please", "review", "I", "wasn", "t", "sure", "how", "to", "go", "about", "test", "the", "executable", "functionality", "NUMBER", "Thanks", "great", "work", "I", "had", "a", "look", "at", "the", "code", "it", "looks", "ok", "NUMBER", "I", "ll", "give", "it", "a", "try", "when", "I", "have", "time", "probably", "this", "week", "end", "Thanks", "for", "your", "time", "I", "ve", "be", "run", "this", "in", "production", "on", "a", "side", "project", "of", "mine", "for", "a", "while", "now", "and", "it", "hasn", "t", "given", "me", "any", "trouble", "yet", "NUMBER", "Just", "tried", "a", "one", "off", "backup", "and", "it", "worked", "perfectly", "NUMBER", "I", "ll", "look", "more", "into", "it", "this", "week", "end", "NUMBER", "i", "haven", "t", "had", "the", "time", "last", "weekend", "but", "i", "should", "have", "some", "tonight", "NUMBER", "if", "no", "cataclysm", "happens", "it", "seems", "like", "we", "can", "merge", "this", "one", "and", "then", "i", "ll", "be", "work", "on", "fix", "the", "test", "suite", "NUMBER", "Cool", "NUMBER", "Is", "there", "a", "Wiki", "article", "with", "the", "types", "of", "fix", "you", "re", "looking", "for", "in", "regards", "to", "the", "test", "suite", "If", "you", "re", "looking", "for", "greater", "test", "coverage", "or", "a", "different", "system", "or", "a", "different", "type", "of", "coverage", "you", "might", "get", "some", "hep", "NUMBER", "I", "may", "or", "may", "not", "have", "time", "over", "the", "next", "two", "weekends", "but", "I", "could", "always", "use", "more", "practice", "write", "test", "NUMBER", "the", "only", "current", "problem", "with", "the", "test", "suite", "be", "that", "while", "all", "the", "test", "pass", "while", "run", "separately", "and", "or", "use", "infinity_test", "they", "basically", "fail", "when", "run", "all", "together", "use", "rake", "task", "or", "rspec", "spec", "NUMBER", "see", "NUMBER", "for", "details", "NUMBER", "meskyanichi", "Short", "answer", "With", "my", "current", "solution", "yes", "NUMBER", "It", "s", "the", "bare", "minimum", "implementation", "to", "negotiate", "an", "OAuth", "session", "NUMBER", "The", "long", "answer", "be", "it", "could", "probably", "be", "automate", "use", "something", "like", "mechanize", "which", "I", "believe", "be", "exactly", "what", "the", "old", "version", "of", "the", "Dropbox", "gem", "use", "NUMBER", "It", "was", "however", "drop", "from", "the", "Dropbox", "gem", "due", "to", "the", "fragility", "of", "the", "solution", "Edit", "and", "more", "specifically", "it", "be", "out", "of", "scope", "for", "the", "gem", "NUMBER", "Every", "time", "the", "Dropbox", "OAuth", "approval", "page", "be", "modify", "it", "can", "potentially", "break", "the", "mechanized", "solution", "NUMBER", "Related", "Dropbox", "commit", "RISCfuture", "dropbox", "NUMBER", "b", "NUMBER", "be", "NUMBER", "meskyanichi", "That", "sounds", "like", "it", "might", "work", "NUMBER", "FWIW", "with", "the", "current", "solution", "you", "can", "re", "use", "the", "serialized", "session", "across", "triggers", "NUMBER", "Just", "create", "your", "serialized", "session", "file", "use", "the", "executable", "and", "modify", "your", "triggers", "to", "point", "to", "that", "same", "serialized", "session", "NUMBER", "The", "only", "reason", "I", "took", "authorization", "out", "of", "line", "was", "to", "minimize", "the", "number", "of", "times", "it", "was", "necessary", "to", "store", "credentials", "while", "leaning", "on", "the", "Dropbox", "gem", "as", "much", "as", "possible", "NUMBER", "Whatever", "you", "think", "be", "best", "works", "for", "me", "NUMBER", "meskyanichi", "This", "means", "that", "people", "will", "have", "to", "either", "copy", "around", "Backup", "cache", "file", "on", "deployment", "or", "run", "an", "interactive", "backup", "from", "the", "command", "line", "once", "before", "they", "can", "run", "it", "in", "a", "non", "interactive", "context", "right", "Example", "Lets", "say", "I", "ve", "install", "Backup", "on", "an", "instance", "somewhere", "and", "I", "deploy", "my", "configuration", "to", "it", "without", "copying", "the", "cache", "file", "NUMBER", "I", "forget", "to", "run", "it", "interactively", "and", "it", "gets", "run", "via", "a", "cron", "job", "NUMBER", "Does", "the", "cron", "job", "just", "hang", "there", "forever", "waiting", "for", "an", "input", "from", "the", "gets", "which", "will", "never", "happen", "I", "guess", "my", "concern", "be", "that", "we", "re", "potentially", "mixing", "concepts", "NUMBER", "The", "Dropbox", "gem", "wants", "to", "store", "the", "serialized", "session", "in", "NUMBER", "cache", "so", "the", "user", "doesn", "t", "need", "to", "be", "aware", "of", "the", "serialized", "session", "NUMBER", "But", "the", "user", "needs", "to", "be", "aware", "that", "a", "serialized", "session", "be", "necessary", "because", "otherwise", "the", "backup", "goes", "from", "a", "non", "interactive", "to", "an", "interactive", "process", "NUMBER", "Edit", "P", "NUMBER", "S", "NUMBER", "Thanks", "for", "all", "your", "input", "and", "help", "especially", "in", "clearing", "out", "those", "other", "fail", "test", "I", "probably", "should", "have", "fix", "those", "before", "I", "start", "development", "on", "this", "change", "NUMBER", "Much", "appreciation", "abound", "NUMBER", "OK", "that", "timeout", "helps", "a", "lot", "NUMBER", "It", "would", "allow", "the", "notifications", "to", "be", "sent", "out", "instead", "of", "hanging", "indefinitely", "NUMBER", "Testing", "configurations", "be", "the", "awesome", "way", "to", "do", "things", "and", "most", "people", "probably", "do", "exactly", "that", "NUMBER", "My", "concern", "was", "for", "people", "run", "in", "a", "multi", "instance", "setup", "they", "may", "have", "a", "staging", "test", "instance", "that", "they", "test", "on", "before", "deploying", "to", "production", "NUMBER", "It", "will", "be", "important", "to", "note", "in", "the", "wiki", "that", "deployment", "configurations", "will", "either", "have", "to", "be", "modify", "to", "copy", "over", "the", "backup", "cached", "session", "or", "someone", "will", "have", "to", "log", "onto", "the", "production", "instance", "after", "upgrading", "Backup", "to", "perform", "this", "interactive", "configuration", "NUMBER", "This", "be", "all", "less", "of", "an", "issue", "now", "that", "there", "s", "a", "timeout", "on", "the", "gets", "NUMBER", "because", "it", "means", "that", "when", "the", "gets", "times", "out", "I", "ll", "get", "an", "error", "in", "my", "inbox", "twitter", "feed", "which", "lets", "me", "know", "I", "forgot", "a", "step", "NUMBER", "Personally", "given", "my", "deployments", "I", "prefer", "my", "implementation", "because", "I", "can", "ship", "the", "serialized", "OAuth", "session", "with", "my", "backup", "config", "which", "I", "store", "along", "with", "my", "site", "deployments", "and", "just", "fire", "and", "forget", "to", "any", "instance", "I", "chose", "once", "I", "ve", "approved", "the", "OAuth", "session", "in", "development", "NUMBER", "I", "don", "t", "generally", "package", "the", "contents", "of", "my", "Backup", "data", "and", "cache", "directory", "because", "that", "data", "be", "very", "instance", "specific", "NUMBER", "However", "if", "you", "prefer", "your", "implementation", "I", "can", "make", "it", "work", "with", "my", "deployments", "NUMBER", "Yeah", "I", "can", "understand", "that", "NUMBER", "I", "ll", "just", "have", "to", "change", "my", "backup", "configuration", "so", "that", "the", "HOME", "Backup", "directory", "be", "stored", "in", "a", "deployment", "specific", "location", "instead", "of", "in", "HOME", "NUMBER", "No", "biggie", "Does", "the", "cache", "directory", "store", "only", "authorized", "sessions", "right", "now", "If", "not", "could", "I", "put", "in", "a", "vote", "to", "place", "it", "in", "something", "more", "visible", "like", "HOME", "Backup", "auth", "or", "something", "like", "that", "I", "m", "not", "sure", "what", "sort", "of", "other", "things", "backup", "caches", "since", "I", "only", "learned", "enough", "to", "get", "Dropbox", "NUMBER", "work", "for", "me", "NUMBER", "P", "meskyanichi", "Just", "a", "thought", "no", "idea", "why", "I", "didn", "t", "think", "about", "this", "earlier", "NUMBER", "Is", "it", "possible", "to", "just", "store", "the", "serialized", "session", "as", "a", "part", "of", "the", "backup", "config", "file", "This", "would", "completely", "remove", "the", "need", "for", "a", "cache", "and", "make", "it", "a", "teeny", "bit", "more", "fire", "and", "forget", "NUMBER", "I", "have", "no", "idea", "what", "would", "have", "to", "go", "into", "make", "something", "like", "that", "work", "and", "I", "won", "t", "have", "time", "to", "look", "into", "it", "until", "much", "later", "NUMBER", "I", "d", "say", "keep", "going", "with", "your", "solution", "NUMBER", "I", "can", "always", "hack", "something", "together", "if", "I", "ever", "get", "time", "NUMBER", "Cheers", "meskyanichi", "Sounds", "great", "I", "ll", "stop", "message", "bombing", "you", "now", "NUMBER", "D", "It", "would", "be", "nice", "if", "one", "could", "define", "incremental", "database", "backups", "NUMBER", "A", "solution", "for", "MySQL", "can", "be", "find", "here", "LINK", "_s", "NUMBER", "_backup", "I", "don", "t", "think", "he", "s", "talking", "about", "incremental", "file", "change", "like", "rsync", "do", "but", "about", "point", "in", "time", "recovery", "LINK", "in", "time", "recovery", "NUMBER", "html", "So", "you", "take", "a", "regular", "backup", "with", "mysqldump", "then", "after", "that", "backup", "the", "binlog", "file", "NUMBER", "When", "you", "recover", "you", "restore", "the", "regular", "backup", "then", "apply", "the", "change", "since", "then", "from", "the", "binlogs", "NUMBER", "Using", "Percona", "XtraBackup", "if", "available", "might", "be", "a", "kick", "ass", "option", "too", "LINK", "xtrabackup", "Yes", "you", "be", "right", "NUMBER", "I", "was", "talking", "about", "a", "less", "regular", "dump", "backup", "and", "more", "regular", "binlog", "file", "backup", "NUMBER", "Hi", "I", "m", "evaluating", "options", "also", "but", "I", "d", "need", "incremental", "backsup", "due", "to", "the", "size", "fo", "the", "DB", "to", "S", "NUMBER", "NUMBER", "I", "m", "assuming", "that", "it", "s", "not", "support", "from", "this", "thread", "Can", "t", "see", "any", "forks", "in", "the", "network", "but", "please", "shout", "if", "you", "know", "any", "other", "options", "I", "ve", "seen", "the", "first", "post", "NUMBER", "I", "would", "love", "to", "have", "this", "too", "NUMBER", "And", "we", "could", "start", "this", "as", "a", "feature", "available", "to", "mysql", "databases", "and", "expand", "as", "needed", "NUMBER", "This", "post", "outlines", "an", "approach", "similar", "to", "what", "mysql_s", "NUMBER", "_backup", "seems", "to", "be", "doing", "NUMBER", "Do", "the", "current", "maintainers", "of", "this", "gem", "have", "thoughts", "comments", "on", "this", "NUMBER", "for", "XtraBackup", "support", "we", "have", "this", "config", "ruby", "Backup", "Model", "NUMBER", "new", "konvenit_database_hourly", "Konvenit", "database", "hourly", "do", "archive", "konvenit_backup", "do", "archive", "archive", "NUMBER", "add", "var", "backup", "my_file", "NUMBER", "sql", "end", "we", "call", "this", "with", "sudo", "usr", "bin", "backup", "perform", "trigger", "konvenit_database_hourly", "config_file", "etc", "backup", "hourly", "NUMBER", "rb", "i", "get", "this", "stack", "trace", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "instance_eval", "undefined", "method", "add", "for", "nil", "NilClass", "NoMethodError", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "archive", "NUMBER", "rb", "NUMBER", "in", "instance_eval", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "archive", "NUMBER", "rb", "NUMBER", "in", "initialize", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "new", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "archive", "from", "eval", "NUMBER", "in", "block", "in", "find", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "instance_eval", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "initialize", "from", "eval", "NUMBER", "in", "new", "from", "eval", "NUMBER", "in", "find", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "instance_eval", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "finder", "NUMBER", "rb", "NUMBER", "in", "find", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "from", "usr", "bin", "backup", "NUMBER", "in", "load", "from", "usr", "bin", "backup", "NUMBER", "in", "TAG", "we", "use", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "revision", "NUMBER", "x", "NUMBER", "_", "NUMBER", "linux", "ruby", "NUMBER", "wasn", "t", "be", "not", "and", "will", "never", "be", "support", "NUMBER", "it", "s", "basically", "a", "buggy", "development", "release", "not", "meant", "for", "serious", "use", "NUMBER", "please", "upgrade", "to", "NUMBER", "and", "see", "if", "the", "problem", "persists", "NUMBER", "I", "ve", "moved", "the", "CLI", "command", "to", "use", "the", "popen", "NUMBER", "gem", "which", "allows", "better", "track", "of", "the", "status", "code", "and", "stdout", "and", "stderr", "message", "NUMBER", "Essential", "for", "track", "commands", "that", "actually", "fail", "NUMBER", "Before", "this", "I", "was", "get", "successful", "notifications", "when", "my", "pgdump", "was", "fail", "with", "database", "permission", "error", "NUMBER", "looks", "good", "to", "me", "NUMBER", "any", "other", "opinions", "When", "I", "add", "a", "folder", "to", "be", "archived", "like", "this", "ruby", "archive", "file", "do", "archive", "archive", "NUMBER", "add", "File", "NUMBER", "expand_path", "File", "NUMBER", "join", "Rails", "NUMBER", "root", "NUMBER", "NUMBER", "shared", "file", "end", "And", "the", "folder", "be", "miss", "backup", "says", "the", "backup", "succeeded", "NUMBER", "Shouldn", "t", "it", "fail", "I", "be", "on", "backup", "NUMBER", "and", "ruby", "NUMBER", "NUMBER", "NUMBER", "Am", "I", "doing", "something", "wrong", "Cheers", "Roberto", "I", "don", "t", "know", "NUMBER", "Would", "you", "like", "it", "to", "fail", "Well", "imagine", "you", "be", "in", "production", "someone", "deletes", "you", "valuable", "data", "NUMBER", "You", "be", "happy", "make", "backups", "then", "your", "customer", "informs", "you", "about", "the", "miss", "data", "NUMBER", "You", "look", "at", "your", "backups", "that", "were", "all", "green", "and", "see", "that", "the", "data", "be", "miss", "in", "all", "of", "your", "remaining", "backups", "NUMBER", "not", "that", "good", "NUMBER", "What", "do", "you", "think", "I", "have", "same", "issue", "NUMBER", "meskyanichi", "Thanks", "Hi", "I", "m", "use", "NUMBER", "on", "ruby", "NUMBER", "I", "have", "a", "rails", "application", "with", "a", "symlinked", "file", "folder", "NUMBER", "When", "I", "use", "the", "symlink", "as", "Archive", "target", "like", "this", "ruby", "archive", "file", "do", "archive", "archive", "NUMBER", "add", "rails_root", "file", "end", "I", "get", "the", "symlink", "as", "a", "single", "file", "but", "not", "the", "content", "NUMBER", "IMHO", "as", "symlinking", "be", "a", "often", "use", "practice", "in", "rails", "capistrano", "environments", "this", "should", "be", "fix", "or", "there", "should", "be", "an", "option", "to", "follow", "symlinks", "NUMBER", "Cheers", "Roberto", "This", "be", "a", "feature", "of", "course", "as", "automatically", "following", "symlinks", "be", "a", "bad", "idea", "and", "non", "unix", "approach", "NUMBER", "They", "re", "symlinks", "not", "hardlinks", "for", "a", "reason", "NUMBER", "Having", "a", "follow", "symlinks", "options", "be", "however", "quite", "reasonable", "NUMBER", "That", "s", "how", "Dropbox", "rolls", "NUMBER", "rsync", "l", "links", "copy", "symlinks", "as", "symlinks", "L", "copy", "links", "transform", "symlink", "into", "referent", "file", "dir", "copy", "unsafe", "links", "only", "unsafe", "symlinks", "be", "transformed", "safe", "links", "ignore", "symlinks", "that", "point", "outside", "the", "tree", "k", "copy", "dirlinks", "transform", "symlink", "to", "dir", "into", "referent", "dir", "K", "keep", "dirlinks", "treat", "symlinked", "dir", "on", "receiver", "as", "dir", "NUMBER", "for", "this", "feature", "NUMBER", "from", "me", "as", "well", "NUMBER", "the", "question", "be", "given", "all", "the", "information", "here", "be", "anyone", "willing", "to", "do", "this", "feature", "and", "submit", "a", "pullreq", "i", "m", "not", "sure", "whether", "i", "ll", "have", "time", "to", "do", "it", "myself", "in", "the", "upcoming", "days", "NUMBER", "not", "really", "be", "a", "Ruby", "programmer", "be", "it", "as", "straight", "forward", "as", "checking", "to", "see", "if", "the", "directory", "pass", "in", "archive", "NUMBER", "add", "method", "be", "a", "symlink", "and", "if", "it", "be", "doing", "a", "readlink", "to", "get", "its", "absolute", "path", "What", "isn", "t", "clear", "to", "me", "be", "if", "the", "readlink", "call", "would", "fail", "on", "Windows", "and", "thus", "would", "need", "to", "be", "handle", "and", "if", "readlink", "can", "be", "use", "with", "a", "path", "and", "not", "just", "a", "file", "NUMBER", "LINK", "doc", "NUMBER", "org", "core", "NUMBER", "File", "NUMBER", "html", "method", "c", "readlink", "wait", "anybody", "here", "use", "backup", "gem", "on", "windows", "Yes", "that", "be", "how", "I", "would", "use", "it", "NUMBER", "I", "m", "not", "sure", "how", "tar", "handles", "sym", "links", "but", "I", "will", "take", "what", "it", "gives", "me", "NUMBER", "I", "dont", "think", "windows", "support", "do", "things", "certainly", "not", "sym", "links", "NUMBER", "On", "Oct", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "Michael", "van", "Rooijen", "TAG", "write", "I", "m", "not", "sure", "if", "backup", "runs", "on", "windows", "at", "all", "to", "be", "honest", "do", "Windows", "also", "have", "the", "unix", "utilities", "we", "use", "at", "all", "like", "tar", "and", "cp", "and", "what", "not", "In", "any", "case", "use", "File", "NUMBER", "symlink", "file", "should", "work", "fine", "I", "think", "NUMBER", "I", "ll", "check", "out", "the", "rest", "of", "the", "Ruby", "File", "API", "and", "see", "what", "I", "can", "use", "NUMBER", "In", "any", "case", "you", "basically", "want", "it", "to", "follow", "symlinks", "and", "include", "them", "in", "the", "archive", "if", "one", "of", "the", "folders", "you", "ve", "add", "to", "the", "archive", "happens", "to", "contain", "symlinks", "to", "other", "folders", "NUMBER", "So", "you", "re", "basically", "looking", "for", "some", "functionality", "that", "you", "could", "possible", "enable", "like", "so", "ruby", "archive", "my_files", "do", "archive", "archive", "NUMBER", "follow_symlinks", "true", "default", "false", "archive", "NUMBER", "add", "path", "to", "some", "folder", "end", "Let", "me", "know", "NUMBER", "Cheers", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Ahh", "NUMBER", "okay", "thanks", "for", "looking", "NUMBER", "On", "Oct", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "Michael", "van", "Rooijen", "TAG", "write", "Turns", "out", "that", "File", "NUMBER", "realpath", "symlink_file", "be", "only", "available", "in", "Ruby", "NUMBER", "which", "be", "a", "problem", "NUMBER", "Looking", "in", "to", "way", "to", "get", "the", "same", "behavior", "in", "Ruby", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "For", "tar", "following", "links", "look", "at", "the", "H", "and", "L", "options", "LINK", "documentation", "Darwin", "Reference", "Manpages", "man", "NUMBER", "tar", "NUMBER", "html", "Yes", "I", "like", "it", "NUMBER", "My", "whole", "archive", "NUMBER", "add", "be", "a", "symlink", "and", "I", "have", "plenty", "of", "subdirectories", "plenty", "of", "layers", "deep", "so", "it", "will", "be", "a", "good", "test", "Very", "much", "ok", "NUMBER", "On", "Oct", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "Michael", "van", "Rooijen", "TAG", "write", "Sweet", "NUMBER", "I", "ll", "probably", "implement", "the", "feature", "in", "to", "Backup", "today", "or", "tomorrow", "then", "you", "can", "try", "it", "out", "by", "cloning", "the", "git", "repo", "and", "run", "backup", "from", "it", "NUMBER", "no", "need", "to", "wait", "on", "a", "new", "gem", "to", "try", "it", "out", "NUMBER", "I", "ll", "probably", "go", "ahead", "and", "implement", "the", "method", "i", "build", "instead", "of", "use", "the", "tar", "flags", "and", "it", "s", "happened", "to", "me", "a", "few", "times", "that", "some", "flags", "differ", "depending", "on", "the", "distributor", "type", "GNU", "BSD", "or", "w", "e", "NUMBER", "Like", "with", "the", "split", "utility", "im", "work", "with", "in", "the", "Splitter", "branch", "it", "cant", "split", "into", "numeric", "suffixes", "on", "OSX", "only", "on", "Linux", "NUMBER", "So", "whenever", "possible", "I", "try", "to", "stick", "with", "pure", "Ruby", "implementations", "of", "specific", "functionality", "like", "the", "symlink", "following", "to", "ensure", "it", "works", "cross", "platform", "NUMBER", "Ill", "let", "you", "know", "when", "I", "push", "this", "to", "the", "develop", "branch", "so", "you", "can", "clone", "and", "test", "it", "out", "before", "I", "finally", "release", "it", "as", "a", "gem", "NUMBER", "That", "cool", "with", "you", "coreyt", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "I", "gave", "it", "a", "try", "NUMBER", "branch", "symlink", "add", "the", "line", "to", "the", "config", "to", "follow", "sym_link", "It", "do", "not", "throw", "an", "error", "like", "earlier", "version", "did", "but", "it", "seems", "to", "only", "be", "backing", "up", "the", "symlink", "file", "itself", "NUMBER", "Corey", "On", "Mon", "Oct", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "Michael", "van", "Rooijen", "TAG", "write", "coreyt", "just", "push", "an", "update", "in", "the", "symlink", "branch", "at", "commit", "ffc", "NUMBER", "c", "NUMBER", "ccccdeb", "NUMBER", "fcdb", "NUMBER", "be", "NUMBER", "a", "NUMBER", "b", "NUMBER", "You", "can", "try", "it", "out", "by", "doing", "the", "following", "git", "clone", "git", "github", "NUMBER", "com", "meskyanichi", "backup", "NUMBER", "git", "cd", "backup", "git", "checkout", "symlink", "NUMBER", "bin", "backup", "perform", "t", "my_backup", "be", "sure", "to", "enable", "symlink", "following", "ruby", "archive", "my_archive", "do", "archive", "archive", "NUMBER", "follow_symlinks", "true", "archive", "NUMBER", "add", "some_folder", "end", "Let", "me", "know", "how", "it", "works", "out", "Haven", "t", "add", "any", "test", "yet", "wanted", "to", "see", "if", "it", "works", "at", "all", "on", "your", "end", "with", "your", "series", "of", "nested", "symlinks", "NUMBER", "If", "it", "all", "works", "well", "then", "I", "ll", "go", "ahead", "and", "apply", "the", "test", "and", "merge", "it", "to", "the", "the", "main", "develop", "branch", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Yes", "no", "other", "file", "NUMBER", "What", "might", "be", "different", "be", "that", "I", "be", "actually", "setting", "TAG", "archive", "NUMBER", "add", "xxx", "yyy", "zzz", "TAG", "where", "my", "zzz", "be", "a", "symlink", "d", "directory", "NUMBER", "Not", "so", "much", "backing", "up", "symlinks", "underneath", "zzz", "NUMBER", "NUMBER", "for", "this", "NUMBER", "Useful", "to", "backup", "current", "which", "be", "setup", "by", "capistrano", "to", "be", "a", "softlink", "by", "default", "NUMBER", "Sorry", "guys", "haven", "t", "had", "time", "to", "look", "at", "this", "NUMBER", "We", "might", "have", "to", "go", "with", "use", "tar", "flags", "seeing", "as", "it", "do", "seem", "to", "be", "available", "as", "coreyt", "point", "out", "NUMBER", "I", "m", "not", "entirely", "sure", "how", "easy", "it", "be", "to", "go", "about", "doing", "a", "pure", "ruby", "implementation", "of", "this", "within", "Backup", "NUMBER", "Would", "the", "tar", "flag", "utilities", "be", "sufficient", "I", "have", "never", "use", "use", "the", "follow", "symlink", "flags", "so", "please", "let", "me", "know", "if", "it", "do", "the", "trick", "even", "with", "deeply", "nested", "symlinks", "NUMBER", "benbruscella", "any", "idea", "if", "the", "flag", "would", "be", "sufficient", "for", "the", "current", "directory", "you", "speak", "of", "with", "Capistrano", "Like", "I", "said", "I", "haven", "t", "use", "any", "flags", "for", "such", "purposes", "before", "NUMBER", "I", "assume", "Linux", "s", "tar", "also", "has", "the", "flags", "to", "follow", "symlinks", "Actually", "I", "think", "the", "current", "behaviour", "be", "OK", "NUMBER", "Capistrano", "sets", "up", "softlinks", "to", "a", "shared", "directory", "which", "be", "meant", "to", "host", "things", "like", "images", "logs", "etc", "NUMBER", "So", "I", "ve", "change", "my", "backup", "script", "to", "point", "to", "those", "directories", "instead", "and", "it", "works", "great", "NUMBER", "Thanks", "again", "for", "a", "great", "gem", "Bad", "solution", "with", "shared", "backup", "NUMBER", "If", "I", "have", "a", "few", "servers", "production", "beta", "staging", "with", "different", "real", "paths", "I", "should", "use", "switch", "case", "for", "path", "definition", "NUMBER", "So", "sad", "NUMBER", "When", "I", "do", "deployments", "I", "put", "it", "into", "a", "date", "specific", "directory", "say", "NUMBER", "_", "NUMBER", "_", "NUMBER", "be", "an", "earlier", "deployment", "and", "NUMBER", "_", "NUMBER", "_", "NUMBER", "be", "a", "later", "deployment", "NUMBER", "Then", "I", "symbolic", "link", "ln", "s", "NUMBER", "_", "NUMBER", "_", "NUMBER", "production", "This", "way", "if", "there", "be", "a", "problem", "my", "rollbacks", "be", "very", "easy", "I", "just", "change", "the", "link", "and", "I", "don", "t", "need", "to", "change", "any", "other", "system", "configurations", "that", "look", "for", "the", "production", "directory", "NUMBER", "Every", "time", "I", "do", "a", "deployment", "today", "I", "need", "to", "edit", "my", "backup", "configs", "to", "point", "to", "the", "NUMBER", "_", "NUMBER", "_", "NUMBER", "or", "new", "deployment", "directory", "NUMBER", "sad", "face", "I", "m", "not", "as", "interested", "in", "having", "someone", "argue", "with", "me", "about", "the", "above", "process", "as", "much", "as", "I", "would", "really", "like", "backup", "to", "just", "handle", "these", "sym", "links", "NUMBER", "It", "seem", "that", "we", "were", "on", "the", "right", "path", "with", "the", "earlier", "attempt", "that", "Ruby", "has", "facilities", "for", "interpreting", "a", "sym", "link", "and", "use", "the", "directory", "name", "when", "calling", "tar", "NUMBER", "It", "seems", "that", "we", "could", "have", "tar", "follow", "sym", "links", "too", "either", "way", "works", "for", "me", "NUMBER", "It", "isn", "t", "like", "any", "follow", "sym", "link", "option", "needs", "to", "be", "default", "but", "for", "those", "of", "us", "who", "might", "need", "it", "it", "would", "be", "a", "great", "option", "NUMBER", "An", "option", "has", "be", "add", "to", "allow", "you", "to", "specify", "additional", "flags", "to", "the", "tar", "command", "for", "each", "Archive", "NUMBER", "Ref", "df", "NUMBER", "ccfe", "NUMBER", "d", "NUMBER", "c", "NUMBER", "a", "NUMBER", "ebc", "NUMBER", "d", "NUMBER", "a", "NUMBER", "f", "NUMBER", "cb", "NUMBER", "d", "NUMBER", "fc", "So", "to", "have", "tar", "follow", "symlinks", "use", "rb", "archive", "my_archive", "do", "archive", "archive", "NUMBER", "add", "path", "to", "a", "file", "NUMBER", "rb", "archive", "NUMBER", "tar_options", "h", "end", "Or", "whatever", "flags", "your", "system", "s", "tar", "command", "uses", "NUMBER", "Also", "NUMBER", "I", "know", "some", "of", "you", "will", "be", "tempted", "to", "add", "z", "in", "there", "or", "similar", "NUMBER", "Yes", "it", "will", "work", "however", "be", "aware", "that", "the", "next", "version", "will", "be", "piping", "the", "archive", "s", "tar", "command", "through", "any", "configured", "Compressor", "specified", "with", "compress_with", "NUMBER", "Also", "you", "ll", "end", "up", "with", "a", "compressed", "archive", "with", "a", "plain", "NUMBER", "tar", "extension", "inside", "your", "final", "packaged", "archive", "NUMBER", "good", "catch", "NUMBER", "from", "me", "NUMBER", "anyone", "objecting", "I", "just", "add", "Lzma", "support", "for", "a", "better", "compression", "NUMBER", "Remote", "host", "ssh", "listen", "on", "a", "non", "standard", "port", "but", "ssh", "connect", "to", "host", "xxxxxxxx", "port", "NUMBER", "Connection", "timed", "out", "rsync", "connection", "unexpectedly", "close", "NUMBER", "bytes", "received", "so", "far", "sender", "rsync", "error", "unexplained", "error", "code", "NUMBER", "at", "io", "NUMBER", "c", "NUMBER", "sender", "NUMBER", "ruby", "Backup", "Model", "NUMBER", "new", "xxxx", "My", "Backup", "sync_with", "RSync", "do", "rsync", "rsync", "NUMBER", "port", "NUMBER", "rsync", "NUMBER", "path", "srv", "backup", "xxx", "rsync", "NUMBER", "username", "root", "rsync", "NUMBER", "ip", "xxxxxxx", "rsync", "NUMBER", "directories", "do", "directory", "directory", "NUMBER", "add", "var", "www", "end", "end", "end", "Hi", "i", "have", "tried", "to", "find", "but", "couldn", "t", "set", "up", "archive", "directory", "NUMBER", "For", "example", "for", "backup", "structure", "On", "FTP", "NUMBER", "webapp_backup", "file", "NUMBER", "NUMBER", "NUMBER", "server", "last_release", "i", "want", "to", "separate", "file", "of", "server", "from", "file", "NUMBER", "A", "four", "years", "ago", "the", "perform", "backup", "be", "raising", "this", "error", "Before", "this", "NUMBER", "days", "ago", "it", "s", "was", "work", "perfectly", "Exception", "that", "get", "raise", "OAuth", "Unauthorized", "NUMBER", "Forbidden", "My", "command", "be", "backup", "perform", "t", "backup_gc", "I", "have", "the", "same", "error", "NUMBER", "Seems", "to", "occur", "when", "doing", "session", "NUMBER", "authorize", "OAuth", "Unauthorized", "NUMBER", "Forbidden", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "oauth", "NUMBER", "lib", "oauth", "consumer", "NUMBER", "rb", "NUMBER", "in", "token_request", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "oauth", "NUMBER", "lib", "oauth", "tokens", "request_token", "NUMBER", "rb", "NUMBER", "in", "get_access_token", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "dropbox", "NUMBER", "lib", "dropbox", "session", "NUMBER", "rb", "NUMBER", "in", "authorize", "from", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "dropbox", "NUMBER", "lib", "dropbox", "session", "NUMBER", "rb", "NUMBER", "in", "authorize", "According", "to", "this", "issue", "LINK", "authorize", "be", "not", "a", "recommended", "way", "of", "login", "NUMBER", "authorize", "has", "be", "remove", "LINK", "Yep", "just", "run", "into", "this", "also", "NUMBER", "NUMBER", "forbidden", "NUMBER", "Looks", "like", "you", "have", "to", "authorize", "with", "authorize_url", "first", "before", "it", "will", "work", "NUMBER", "If", "automating", "the", "Dropbox", "login", "process", "be", "out", "then", "perhaps", "use", "the", "new", "Local", "Storage", "option", "with", "the", "Linux", "Dropbox", "client", "would", "work", "NUMBER", "LINK", "lnx", "Confirmed", "dropbox", "storage", "has", "also", "stopped", "work", "NUMBER", "Any", "idea", "on", "the", "best", "way", "to", "fix", "this", "make", "the", "backup", "gem", "use", "dropbox", "gem", "version", "NUMBER", "which", "include", "the", "fix", "I", "ve", "just", "issue", "a", "pull", "request", "issue", "NUMBER", "which", "uses", "Dropbox", "NUMBER", "and", "stored", "serialized", "OAuth", "credentials", "instead", "of", "e", "mail", "password", "combos", "NUMBER", "If", "anybody", "has", "a", "moment", "the", "code", "could", "use", "some", "eyeballs", "NUMBER", "It", "s", "late", "and", "I", "m", "tired", "NUMBER", "if", "coderjoe", "s", "fork", "has", "this", "bug", "solve", "i", "d", "be", "happy", "to", "close", "this", "issue", "This", "patch", "allows", "me", "to", "split", "backups", "into", "multiple", "file", "if", "needed", "so", "that", "I", "can", "use", "remote", "storages", "that", "have", "maximum", "file", "sizes", "and", "I", "have", "a", "huge", "backup", "S", "NUMBER", "FAT", "NUMBER", "and", "Ext", "be", "prime", "examples", "NUMBER", "Looks", "interesting", "NUMBER", "As", "tomash", "says", "though", "please", "provide", "test", "to", "cover", "this", "functionality", "NUMBER", "Also", "do", "it", "still", "record", "these", "multiple", "file", "to", "the", "YAML", "format", "Backup", "Storage", "Object", "so", "it", "can", "cycle", "and", "remove", "old", "backups", "from", "the", "remote", "locations", "I", "don", "t", "have", "time", "to", "look", "in", "to", "it", "so", "if", "you", "could", "let", "me", "know", "that", "d", "be", "great", "NUMBER", "Cheers", "tomash", "Yes", "the", "definitely", "should", "have", "test", "NUMBER", "I", "suppose", "I", "was", "a", "bit", "overzealous", "with", "the", "pull", "request", "but", "I", "wanted", "to", "share", "what", "I", "was", "work", "on", "NUMBER", "meskyanichi", "Indeed", "the", "YAML", "serialization", "of", "the", "backups", "was", "broken", "in", "this", "branch", "NUMBER", "Taking", "a", "copy", "of", "backup_files", "and", "Array", "shift", "ing", "it", "ended", "up", "be", "destructive", "NUMBER", "So", "I", "ended", "up", "having", "them", "only", "get", "defined", "once", "and", "Array", "zip", "ing", "local_files", "and", "remote_files", "as", "a", "more", "explicit", "way", "of", "mapping", "local", "to", "remote", "names", "NUMBER", "i", "d", "merge", "this", "one", "but", "it", "s", "quite", "a", "patch", "and", "i", "d", "like", "meskyanichi", "blessing", "before", "that", "NUMBER", "jof", "could", "you", "rebase", "to", "current", "master", "This", "patches", "Backup", "Model", "and", "most", "of", "the", "Backup", "Storage", "subclasses", "to", "support", "uploading", "more", "than", "one", "file", "to", "a", "remote", "destination", "NUMBER", "This", "be", "a", "prerequisite", "for", "another", "branch", "of", "mine", "jof", "split_backups", "NUMBER", "so", "the", "idea", "be", "that", "we", "should", "merge", "NUMBER", "first", "and", "then", "NUMBER", "afterwards", "There", "exists", "a", "race", "condition", "where", "the", "GPG", "public", "key", "to", "be", "crypted", "to", "be", "write", "out", "but", "if", "our", "backup", "NUMBER", "rb", "run", "user", "has", "a", "permissive", "umask", "for", "file", "creation", "a", "malicious", "user", "could", "overwrite", "the", "key", "before", "the", "key", "be", "imported", "NUMBER", "This", "just", "chowns", "and", "chmods", "the", "temporary", "file", "to", "be", "more", "restrictive", "to", "prevent", "this", "NUMBER", "Hey", "Guys", "OK", "NUMBER", "So", "I", "ended", "up", "rewriting", "the", "local", "backups", "code", "and", "moving", "it", "into", "the", "Rsync", "storage", "class", "NUMBER", "Things", "seem", "to", "be", "work", "well", "on", "OSX", "and", "our", "CentOS", "servers", "NUMBER", "I", "also", "did", "my", "best", "to", "update", "the", "spec", "test", "accordingly", "although", "it", "might", "be", "worth", "glancing", "over", "my", "change", "NUMBER", "If", "this", "pull", "request", "gets", "accepted", "I", "ll", "add", "the", "information", "into", "the", "Wiki", "NUMBER", "I", "think", "the", "result", "be", "quite", "graceful", "Backup", "Model", "NUMBER", "new", "example", "Example", "do", "RSync", "Storage", "store_with", "RSync", "do", "server", "server", "NUMBER", "local", "true", "server", "NUMBER", "path", "path", "to", "local", "backups", "end", "end", "Let", "me", "know", "if", "you", "have", "any", "question", "or", "problem", "NUMBER", "If", "accepted", "this", "will", "be", "my", "first", "Github", "pull", "request", "so", "I", "m", "sorry", "if", "anything", "be", "out", "of", "sorts", "NUMBER", "tomash", "thanks", "This", "seems", "like", "a", "good", "addition", "NUMBER", "Where", "do", "the", "mkdir", "method", "come", "from", "though", "Does", "it", "come", "from", "FileUtils", "If", "so", "then", "you", "might", "want", "to", "use", "mkdir_p", "instead", "since", "it", "ll", "raise", "an", "exception", "if", "it", "s", "a", "directory", "tree", "that", "doesn", "t", "exist", "NUMBER", "If", "this", "works", "though", "feel", "free", "to", "pull", "it", "tomash", "Cheers", "NUMBER", "Looks", "like", "mkdir", "be", "taken", "from", "cli", "NUMBER", "rb", "Wrapper", "method", "for", "FileUtils", "NUMBER", "mkdir_p", "to", "create", "directories", "through", "a", "ruby", "method", "NUMBER", "This", "helps", "with", "test", "coverage", "and", "improves", "readability", "def", "mkdir", "path", "FileUtils", "NUMBER", "mkdir_p", "path", "end", "I", "didn", "t", "write", "any", "test", "for", "local", "directory", "creation", "NUMBER", "I", "wasn", "t", "sure", "if", "it", "was", "needed", "as", "this", "be", "a", "build", "in", "Ruby", "method", "and", "I", "also", "figured", "that", "mkdir", "was", "probably", "already", "be", "test", "elsewhere", "NUMBER", "Ah", "pardon", "yes", "looks", "good", "then", "Thanks", "That", "brings", "me", "great", "happiness", "NUMBER", "First", "official", "pull", "request", "D", "Hi", "my", "network", "setup", "only", "allows", "FTP", "with", "passive", "mode", "NUMBER", "I", "implement", "this", "in", "my", "fork", "NUMBER", "Feel", "free", "to", "pull", "NUMBER", "By", "the", "way", "this", "be", "my", "first", "pull", "request", "on", "Github", "NUMBER", "Not", "sure", "I", "did", "it", "right", "Just", "let", "me", "know", "if", "you", "d", "like", "me", "to", "change", "things", "before", "you", "pull", "NUMBER", "Cheers", "Simon", "I", "needed", "an", "easy", "to", "to", "store", "local", "backups", "for", "some", "of", "our", "client", "work", "NUMBER", "Maybe", "there", "be", "a", "better", "way", "to", "do", "this", "but", "I", "ended", "up", "add", "an", "option", "to", "the", "Archive", "class", "NUMBER", "It", "looks", "like", "this", "archive", "archive", "do", "archive", "archive", "NUMBER", "local", "true", "archive", "NUMBER", "add", "directory", "to", "save", "end", "If", "the", "local", "option", "be", "true", "Backup", "will", "save", "a", "timestamped", "NUMBER", "tar", "archive", "into", "File", "NUMBER", "join", "DATA_PATH", "TRIGGER", "archive", "TIME", "NUMBER", "name", "NUMBER", "tar", "data", "triggername", "NUMBER", "archive", "NUMBER", "tar", "note", "The", "local", "option", "do", "not", "support", "gzipping", "at", "the", "moment", "I", "ll", "look", "into", "add", "it", "soon", "though", "NUMBER", "also", "I", "could", "use", "some", "help", "write", "the", "test", "I", "m", "still", "learning", "NUMBER", "Let", "me", "know", "if", "there", "be", "any", "question", "concerns", "Kindly", "Emerson", "Going", "to", "rework", "this", "in", "a", "more", "intelligent", "way", "NUMBER", "Maybe", "I", "ll", "use", "Rsync", "to", "handle", "local", "backups", "instead", "of", "Archive", "NUMBER", "Went", "the", "rsync", "route", "and", "it", "seems", "to", "be", "work", "fine", "NUMBER", "I", "ll", "try", "to", "write", "up", "some", "test", "although", "I", "m", "still", "pretty", "new", "to", "that", "world", "NUMBER", "I", "want", "to", "learn", "D", "Hey", "Everyone", "Using", "NUMBER", "with", "Ruby", "NUMBER", "on", "Mac", "OSX", "NUMBER", "and", "I", "m", "having", "some", "issue", "with", "the", "Archive", "functionality", "NUMBER", "Specifically", "everything", "works", "perfectly", "and", "my", "archive", "be", "copied", "into", "my", "NUMBER", "tmp", "folder", "NUMBER", "but", "then", "it", "be", "delete", "NUMBER", "I", "m", "assuming", "it", "s", "supposed", "to", "be", "copied", "out", "during", "the", "cleanup", "process", "NUMBER", "Any", "idea", "why", "this", "isn", "t", "happening", "Thanks", "for", "any", "help", "NUMBER", "To", "clarify", "I", "m", "actually", "just", "trying", "to", "save", "some", "timestamped", "assets", "onto", "the", "local", "disk", "NUMBER", "For", "some", "reason", "I", "assumed", "the", "Archive", "option", "would", "allow", "this", "but", "I", "could", "be", "mistaken", "NUMBER", "Yeah", "I", "actually", "ended", "up", "write", "it", "myself", "NUMBER", "I", "have", "a", "small", "fix", "I", "need", "to", "do", "this", "week", "but", "as", "far", "as", "I", "know", "the", "gem", "be", "still", "work", "well", "on", "my", "production", "box", "NUMBER", "I", "get", "some", "dep", "warnings", "warning", "smtp", "be", "deprecate", "use", "via_options", "instead", "NUMBER", "warning", "tls", "be", "deprecate", "use", "enable_starttls_auto", "instead", "NUMBER", "warning", "user", "be", "deprecate", "use", "user_name", "instead", "NUMBER", "warning", "auth", "be", "deprecate", "use", "authentication", "instead", "NUMBER", "warning", "host", "be", "deprecate", "use", "address", "instead", "NUMBER", "after", "update", "my", "config", "file", "I", "get", "error", "like", "undefined", "method", "enable_starttls_auto", "for", "TAG", "NoMethodError", "undefined", "method", "address", "for", "TAG", "NoMethodError", "backup", "NUMBER", "Switching", "from", "backup", "NUMBER", "to", "NUMBER", "I", "now", "get", "an", "error", "when", "write", "to", "S", "NUMBER", "Region", "eu", "west", "NUMBER", "Exception", "that", "get", "raise", "Excon", "Errors", "SocketError", "Broken", "pipe", "usr", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "syswrite", "usr", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "do_write", "usr", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "write", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "excon", "NUMBER", "lib", "excon", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fog", "NUMBER", "lib", "fog", "core", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fog", "NUMBER", "lib", "fog", "storage", "aws", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fog", "NUMBER", "lib", "fog", "storage", "request", "aws", "put_object", "NUMBER", "rb", "NUMBER", "in", "put_object", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "transfer", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "send", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "usr", "bin", "backup", "NUMBER", "in", "load", "usr", "bin", "backup", "NUMBER", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "on", "platform", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "It", "looks", "like", "it", "s", "trying", "to", "use", "fog", "NUMBER", "The", "minimum", "version", "required", "for", "backup", "NUMBER", "looks", "to", "be", "NUMBER", "Try", "run", "backup", "dependencies", "install", "fog", "That", "s", "the", "one", "it", "specified", "and", "install", "itself", "NUMBER", "Weird", "because", "LINK", "specifies", "NUMBER", "NUMBER", "meskyanichi", "That", "be", "the", "development", "branch", "NUMBER", "I", "just", "install", "through", "gem", "install", "backup", "and", "get", "master", "with", "a", "NUMBER", "dependency", "NUMBER", "I", "just", "install", "from", "development", "branch", "and", "get", "the", "same", "result", "Exception", "that", "get", "raise", "Excon", "Errors", "SocketError", "Broken", "pipe", "usr", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "syswrite", "usr", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "do_write", "usr", "lib", "ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "write", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "excon", "NUMBER", "lib", "excon", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fog", "NUMBER", "lib", "fog", "core", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fog", "NUMBER", "lib", "fog", "storage", "aws", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "fog", "NUMBER", "lib", "fog", "storage", "request", "aws", "put_object", "NUMBER", "rb", "NUMBER", "in", "put_object", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "transfer", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "send", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "usr", "bin", "backup", "NUMBER", "in", "load", "usr", "bin", "backup", "NUMBER", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "on", "platform", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "Hi", "guys", "I", "ve", "also", "had", "this", "issue", "a", "few", "times", "in", "some", "of", "my", "backups", "NUMBER", "I", "m", "backing", "up", "daily", "and", "once", "in", "a", "while", "I", "get", "this", "error", "NUMBER", "Any", "idea", "what", "might", "be", "cause", "it", "Anyway", "most", "of", "the", "times", "the", "backup", "works", "NUMBER", "I", "think", "that", "most", "of", "the", "times", "it", "fail", "be", "with", "a", "database", "with", "NUMBER", "MB", "of", "size", "NUMBER", "I", "wonder", "if", "it", "be", "because", "of", "the", "size", "Cheers", "Hi", "Michael", "thanks", "for", "your", "reply", "I", "ll", "keep", "an", "eye", "on", "this", "and", "will", "update", "as", "soon", "as", "the", "new", "gem", "be", "out", "NUMBER", "I", "have", "this", "issue", "NUMBER", "Here", "be", "the", "trace", "Exception", "that", "get", "raise", "Excon", "Errors", "SocketError", "Broken", "pipe", "usr", "local", "lib", "ruby", "site_ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "syswrite_nonblock", "usr", "local", "lib", "ruby", "site_ruby", "NUMBER", "openssl", "buffering", "NUMBER", "rb", "NUMBER", "in", "write_nonblock", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "excon", "NUMBER", "lib", "excon", "socket", "NUMBER", "rb", "NUMBER", "in", "write", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "excon", "NUMBER", "lib", "excon", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "fog", "NUMBER", "lib", "fog", "core", "connection", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "fog", "NUMBER", "lib", "fog", "aws", "storage", "NUMBER", "rb", "NUMBER", "in", "request", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "fog", "NUMBER", "lib", "fog", "aws", "request", "storage", "put_object", "NUMBER", "rb", "NUMBER", "in", "put_object", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "transfer", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "s", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "block", "in", "perform", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "usr", "local", "bin", "backup", "NUMBER", "in", "load", "usr", "local", "bin", "backup", "NUMBER", "in", "TAG", "You", "be", "run", "Backup", "version", "NUMBER", "You", "be", "run", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "On", "platform", "x", "NUMBER", "_", "NUMBER", "linux", "i", "also", "had", "this", "warning", "WARNING", "fog", "the", "specified", "s", "NUMBER", "bucket", "name", "da", "backup", "backups", "be", "not", "a", "valid", "dns", "name", "which", "will", "negatively", "impact", "performance", "NUMBER", "For", "details", "see", "LINK", "I", "m", "run", "into", "this", "still", "with", "backup", "NUMBER", "fog", "NUMBER", "and", "ruby", "NUMBER", "p", "NUMBER", "It", "also", "appears", "that", "backup", "NUMBER", "that", "was", "cited", "as", "having", "a", "fix", "was", "since", "yanked", "from", "rubygems", "NUMBER", "org", "NUMBER", "Edit", "I", "also", "tried", "with", "fog", "NUMBER", "that", "was", "listed", "as", "the", "minimal", "version", "and", "NUMBER", "with", "the", "same", "result", "NUMBER", "I", "also", "confirmed", "the", "tarball", "get", "upload", "only", "clocked", "in", "at", "NUMBER", "M", "well", "below", "the", "limit", "NUMBER", "Edit", "NUMBER", "It", "turned", "out", "to", "be", "a", "misconfigured", "bucket", "or", "rather", "that", "the", "configured", "bucket", "didn", "t", "exist", "NUMBER", "So", "looks", "like", "this", "be", "another", "case", "of", "S", "NUMBER", "and", "or", "fog", "be", "pretty", "picky", "without", "specify", "what", "s", "wrong", "NUMBER", "I", "had", "a", "similar", "problem", "and", "the", "issue", "was", "that", "I", "had", "accidentally", "miss", "a", "character", "in", "my", "S", "NUMBER", "credentials", "NUMBER", "Kind", "of", "a", "crummy", "error", "message", "to", "match", "that", "problem", "but", "at", "least", "this", "thread", "helped", "me", "figure", "it", "out", "NUMBER", "I", "implement", "multipart", "upload", "function", "that", "use", "fog", "library", "NUMBER", "LINK", "Did", "this", "get", "merge", "in", "Can", "t", "find", "the", "commit", "NUMBER", "NUMBER", "Is", "there", "any", "technical", "reason", "why", "backup", "can", "t", "work", "with", "the", "NUMBER", "series", "of", "the", "fog", "gem", "Just", "notice", "that", "backup", "complains", "for", "recent", "version", "of", "fog", "Dependency", "miss", "NUMBER", "Please", "install", "fog", "version", "NUMBER", "and", "try", "again", "NUMBER", "The", "Fog", "dependency", "hasn", "t", "be", "update", "since", "it", "was", "add", "because", "everything", "still", "works", "NUMBER", "Any", "particular", "reason", "it", "should", "be", "update", "though", "No", "problem", "either", "way", "NUMBER", "Is", "there", "a", "possibility", "of", "make", "fog", "an", "explicit", "dependency", "so", "that", "I", "don", "t", "need", "to", "put", "a", "specific", "version", "of", "fog", "in", "my", "Gemfile", "On", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "meskyanichireply", "reply", "NUMBER", "github", "NUMBER", "com", "write", "The", "Fog", "dependency", "hasn", "t", "be", "update", "since", "it", "was", "add", "because", "everything", "still", "works", "NUMBER", "Any", "particular", "reason", "it", "should", "be", "update", "though", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "comment_", "NUMBER", "Explicit", "in", "the", "sense", "that", "when", "you", "install", "the", "backup", "gem", "that", "it", "automatically", "installs", "fog", "as", "well", "No", "sorry", "because", "that", "would", "mean", "we", "d", "have", "to", "do", "it", "for", "all", "the", "other", "dependencies", "as", "well", "NUMBER", "Here", "s", "a", "list", "of", "our", "dependencies", "fog", "version", "NUMBER", "lib", "required", "fog", "use", "for", "Amazon", "S", "NUMBER", "Rackspace", "Cloud", "Files", "S", "NUMBER", "CloudFiles", "Storages", "dropbox", "version", "NUMBER", "lib", "required", "dropbox", "use", "for", "Dropbox", "Web", "Service", "Dropbox", "Storage", "net", "sftp", "version", "NUMBER", "lib", "required", "net", "sftp", "use", "for", "SFTP", "Protocol", "SFTP", "Storage", "net", "scp", "version", "NUMBER", "lib", "required", "net", "scp", "use", "for", "SCP", "Protocol", "SCP", "Storage", "net", "ssh", "version", "NUMBER", "lib", "required", "net", "ssh", "use", "for", "SSH", "Protocol", "SSH", "Storage", "mail", "version", "NUMBER", "lib", "required", "mail", "use", "for", "Sending", "Emails", "Mail", "Notifier", "twitter", "version", "NUMBER", "lib", "required", "twitter", "use", "for", "Sending", "Twitter", "Updates", "Twitter", "Notifier", "httparty", "version", "NUMBER", "lib", "required", "httparty", "use", "for", "Sending", "Http", "Updates", "json", "version", "NUMBER", "lib", "required", "json", "use", "for", "Parsing", "JSON", "for", "HTTParty", "If", "we", "d", "have", "to", "add", "all", "that", "then", "it", "d", "add", "a", "lot", "of", "unnecessary", "bloat", "high", "memory", "consumption", "and", "perhaps", "even", "conflict", "when", "bundled", "with", "other", "applications", "even", "if", "you", "don", "t", "need", "the", "gem", "this", "was", "the", "case", "with", "Backup", "NUMBER", "You", "probably", "dont", "need", "httparty", "net", "ssh", "net", "scp", "net", "sftp", "dropbox", "etc", "but", "all", "of", "that", "would", "be", "include", "as", "well", "NUMBER", "So", "for", "this", "reason", "I", "remove", "hard", "dependencies", "and", "add", "my", "own", "little", "dependency", "manager", "to", "ensure", "you", "ll", "be", "up", "and", "run", "with", "only", "the", "necessary", "gems", "NUMBER", "Sure", "understand", "your", "reasoning", "NUMBER", "I", "only", "mention", "it", "because", "it", "wasn", "t", "a", "smooth", "update", "when", "I", "did", "a", "bundle", "update", "as", "I", "rely", "on", "fog", "without", "a", "version", "specified", "for", "a", "few", "other", "gems", "as", "well", "and", "backup", "requires", "NUMBER", "but", "of", "course", "bundler", "doesn", "t", "know", "that", "so", "backup", "complains", "at", "run", "time", "NUMBER", "Not", "sure", "if", "there", "s", "another", "way", "around", "it", "other", "than", "putting", "an", "explicit", "version", "in", "my", "Gemfile", "might", "be", "worth", "add", "to", "the", "Readme", "As", "anyone", "use", "gem", "fog", "be", "going", "to", "be", "broken", "as", "of", "now", "NUMBER", "Maybe", "setting", "the", "dependency", "to", "fog", "NUMBER", "would", "be", "better", "in", "this", "case", "NUMBER", "Michael", "van", "Rooijen", "LINK", "meskyanichi", "LINK", "On", "Sunday", "June", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "brady", "NUMBER", "write", "Sure", "understand", "your", "reasoning", "NUMBER", "I", "only", "mention", "it", "because", "it", "wasn", "t", "a", "smooth", "update", "when", "I", "did", "a", "bundle", "update", "as", "I", "rely", "on", "fog", "without", "a", "version", "specified", "for", "a", "few", "other", "gems", "as", "well", "and", "backup", "requires", "NUMBER", "but", "of", "course", "bundler", "doesn", "t", "know", "that", "so", "backup", "complains", "at", "run", "time", "NUMBER", "Not", "sure", "if", "there", "s", "another", "way", "around", "it", "other", "than", "putting", "an", "explicit", "version", "in", "my", "Gemfile", "might", "be", "worth", "add", "to", "the", "Readme", "As", "anyone", "use", "gem", "fog", "be", "going", "to", "be", "broken", "as", "of", "now", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "comment_", "NUMBER", "That", "would", "be", "great", "but", "didn", "t", "want", "to", "suggest", "as", "such", "in", "case", "there", "s", "a", "real", "reason", "that", "fog", "NUMBER", "x", "breaks", "backup", "or", "visa", "versa", "NUMBER", "but", "I", "really", "doubt", "that", "NUMBER", "Thanks", "for", "your", "attention", "on", "this", "issue", "Braden", "Brady", "Bouchard", "brady", "ldawn", "NUMBER", "com", "lunardawn", "studios", "On", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "meskyanichi", "write", "Maybe", "setting", "the", "dependency", "to", "fog", "NUMBER", "would", "be", "better", "in", "this", "case", "NUMBER", "Michael", "van", "Rooijen", "LINK", "meskyanichi", "LINK", "On", "Sunday", "June", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "brady", "NUMBER", "write", "Sure", "understand", "your", "reasoning", "NUMBER", "I", "only", "mention", "it", "because", "it", "wasn", "t", "a", "smooth", "update", "when", "I", "did", "a", "bundle", "update", "as", "I", "rely", "on", "fog", "without", "a", "version", "specified", "for", "a", "few", "other", "gems", "as", "well", "and", "backup", "requires", "NUMBER", "but", "of", "course", "bundler", "doesn", "t", "know", "that", "so", "backup", "complains", "at", "run", "time", "NUMBER", "Not", "sure", "if", "there", "s", "another", "way", "around", "it", "other", "than", "putting", "an", "explicit", "version", "in", "my", "Gemfile", "might", "be", "worth", "add", "to", "the", "Readme", "As", "anyone", "use", "gem", "fog", "be", "going", "to", "be", "broken", "as", "of", "now", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "comment_", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "comment_", "NUMBER", "I", "guess", "since", "it", "s", "an", "API", "thing", "it", "s", "probably", "best", "to", "have", "the", "latest", "version", "since", "if", "Amazon", "or", "Rackspace", "change", "their", "API", "Fog", "must", "also", "update", "their", "calls", "NUMBER", "I", "ll", "let", "you", "know", "what", "i", "do", "NUMBER", "Thanks", "Well", "NUMBER", "I", "think", "the", "Fog", "gem", "had", "to", "be", "update", "cause", "it", "was", "throw", "exception", "in", "Backup", "NUMBER", "When", "I", "update", "the", "Fog", "gem", "to", "the", "latest", "version", "it", "just", "worked", "NUMBER", "I", "ll", "be", "update", "the", "dependency", "for", "the", "next", "release", "Glad", "to", "hear", "it", "thanks", "Braden", "Brady", "Bouchard", "brady", "ldawn", "NUMBER", "com", "lunardawn", "studios", "On", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "meskyanichi", "write", "Well", "NUMBER", "I", "think", "the", "Fog", "gem", "had", "to", "be", "update", "cause", "it", "was", "throw", "exception", "in", "Backup", "NUMBER", "When", "I", "update", "the", "Fog", "gem", "to", "the", "latest", "version", "it", "just", "worked", "NUMBER", "I", "ll", "be", "update", "the", "dependency", "for", "the", "next", "release", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "comment_", "NUMBER", "Trying", "to", "install", "the", "fog", "gem", "for", "you", "NUMBER", "please", "wait", "NUMBER", "Once", "install", "retry", "the", "backup", "procedure", "NUMBER", "Successfully", "install", "fog", "NUMBER", "NUMBER", "gem", "install", "A", "gem", "shouldn", "t", "be", "make", "assumptions", "about", "how", "I", "handle", "my", "dependencies", "NUMBER", "In", "my", "case", "having", "run", "this", "on", "my", "development", "machine", "under", "rvm", "and", "bundler", "I", "can", "t", "even", "find", "where", "this", "gem", "was", "install", "to", "NUMBER", "Seriously", "this", "infuriates", "me", "NUMBER", "This", "looks", "like", "it", "s", "be", "fix", "in", "LINK", "ruby", "t", "k", "rails", "ausfahrt", "NUMBER", "backup", "perform", "trigger", "db_backup", "config_file", "config", "backup", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dependency", "miss", "NUMBER", "Dependency", "required", "for", "Amazon", "S", "NUMBER", "Rackspace", "Cloud", "Files", "S", "NUMBER", "CloudFiles", "Storages", "To", "install", "the", "gem", "issue", "the", "following", "command", "gem", "install", "fog", "v", "NUMBER", "Please", "try", "again", "after", "installing", "the", "miss", "dependency", "NUMBER", "ruby", "t", "k", "rails", "ausfahrt", "NUMBER", "sudo", "gem", "install", "fog", "v", "NUMBER", "no", "ri", "no", "rdoc", "ruby", "t", "k", "rails", "ausfahrt", "NUMBER", "gem", "list", "grep", "fog", "fog", "NUMBER", "ruby", "t", "k", "rails", "ausfahrt", "NUMBER", "backup", "perform", "trigger", "db_backup", "config_file", "config", "backup", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dependency", "miss", "NUMBER", "Dependency", "required", "for", "Amazon", "S", "NUMBER", "Rackspace", "Cloud", "Files", "S", "NUMBER", "CloudFiles", "Storages", "To", "install", "the", "gem", "issue", "the", "following", "command", "gem", "install", "fog", "v", "NUMBER", "Please", "try", "again", "after", "installing", "the", "miss", "dependency", "NUMBER", "huh", "anyone", "help", "Are", "you", "use", "rvm", "and", "or", "bundler", "There", "might", "be", "bundle", "or", "gemset", "trickery", "going", "on", "NUMBER", "bundle", "ubuntu", "NUMBER", "with", "bundle", "exec", "it", "works", "but", "i", "get", "dependency", "fail", "for", "mail", "NUMBER", "i", "need", "mail", "NUMBER", "and", "rails", "require", "mail", "NUMBER", "x", "Looks", "like", "the", "dependencies", "see", "LINK", "L", "NUMBER", "NUMBER", "require", "mail", "NUMBER", "Rails", "NUMBER", "installs", "that", "version", "but", "older", "version", "of", "rails", "apparently", "need", "mail", "NUMBER", "x", "NUMBER", "What", "happens", "if", "you", "try", "installing", "both", "version", "of", "mail", "i", "have", "both", "version", "install", "but", "the", "error", "also", "appears", "NUMBER", "i", "update", "the", "gem", "to", "NUMBER", "and", "then", "rails", "fail", "because", "it", "required", "NUMBER", "on", "another", "project", "it", "seems", "like", "i", "get", "it", "run", "but", "ruby", "t", "k", "rails", "bankrollking", "bundle", "exec", "backup", "perform", "t", "backup", "c", "config", "backup", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "Bankrollking", "NUMBER", "com", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Archive", "start", "packaging", "and", "archiving", "var", "www", "testfiles", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "Exception", "that", "get", "raise", "Backup", "Exception", "CommandFailed", "Failed", "to", "run", "tar", "on", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "The", "status", "code", "returned", "was", "pid", "NUMBER", "exit", "NUMBER", "STDOUT", "was", "STDERR", "was", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "cli", "NUMBER", "rb", "NUMBER", "in", "raise_if_command_failed", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "cli", "NUMBER", "rb", "NUMBER", "in", "run", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "archive", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "block", "in", "perform", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "usr", "local", "ruby", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "usr", "local", "ruby", "bin", "backup", "NUMBER", "in", "load", "usr", "local", "ruby", "bin", "backup", "NUMBER", "in", "TAG", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "on", "platform", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "If", "you", "ve", "setup", "a", "Notification", "in", "your", "configuration", "file", "the", "above", "error", "will", "have", "be", "sent", "NUMBER", "t", "k", "rails", "bankrollking", "ruby", "Backup", "Model", "NUMBER", "new", "backup", "Bankrollking", "NUMBER", "com", "do", "archive", "file", "do", "archive", "archive", "NUMBER", "add", "var", "www", "testfiles", "end", "store_with", "S", "NUMBER", "do", "s", "NUMBER", "s", "NUMBER", "access_key_id", "my_access_key_id", "s", "NUMBER", "secret_access_key", "my_secret_access_key", "s", "NUMBER", "region", "us", "east", "NUMBER", "s", "NUMBER", "bucket", "bucket", "name", "s", "NUMBER", "path", "path", "to", "my", "backups", "s", "NUMBER", "keep", "NUMBER", "end", "compress_with", "Gzip", "do", "compression", "compression", "NUMBER", "best", "true", "compression", "NUMBER", "fast", "false", "end", "end", "I", "get", "the", "same", "error", "with", "my", "last", "backup", "NUMBER", "Backup", "Exception", "CommandFailed", "Failed", "to", "run", "tar", "on", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "I", "be", "also", "receiving", "the", "Failed", "to", "run", "tar", "on", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "error", "Any", "thoughts", "TAG", "ubuntu", "domU", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "F", "NUMBER", "NUMBER", "B", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "bin", "backup", "perform", "t", "production", "c", "path", "Backup", "hourly_config", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Database", "MongoDB", "start", "dumping", "and", "archiving", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Archive", "start", "packaging", "and", "archiving", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Notifier", "Mail", "start", "notifying", "about", "the", "process", "NUMBER", "Exception", "that", "get", "raise", "Backup", "Exception", "CommandFailed", "Failed", "to", "run", "tar", "on", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "The", "status", "code", "returned", "was", "pid", "NUMBER", "exit", "NUMBER", "STDOUT", "was", "STDERR", "was", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "cli", "NUMBER", "rb", "NUMBER", "in", "raise_if_command_failed", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "cli", "NUMBER", "rb", "NUMBER", "in", "run", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "archive", "NUMBER", "rb", "NUMBER", "in", "perform", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "block", "in", "perform", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "bin", "backup", "NUMBER", "in", "load", "path", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "on", "platform", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "If", "you", "ve", "setup", "a", "Notification", "in", "your", "configuration", "file", "the", "above", "error", "will", "have", "be", "sent", "NUMBER", "TAG", "Thanks", "for", "that", "my", "problem", "was", "that", "the", "directory", "I", "was", "trying", "to", "backup", "no", "longer", "exists", "NUMBER", "Output", "certainly", "helped", "Feeling", "TAG", "from", "usr", "bin", "backup", "NUMBER", "in", "load", "from", "usr", "bin", "backup", "NUMBER", "in", "TAG", "Apart", "from", "the", "different", "version", "of", "Linux", "the", "only", "other", "difference", "I", "can", "see", "be", "that", "my", "dev", "box", "runs", "Ruby", "NUMBER", "and", "the", "production", "server", "run", "NUMBER", "Does", "anyone", "have", "any", "idea", "where", "to", "start", "looking", "I", "ve", "be", "searching", "the", "whole", "afternoon", "but", "I", "just", "can", "t", "seem", "to", "get", "it", "right", "NUMBER", "Many", "thanks", "NUMBER", "here", "s", "a", "tip", "don", "t", "use", "ruby", "NUMBER", "nobody", "uses", "it", "it", "s", "not", "considered", "stable", "NUMBER", "and", "gods", "forbid", "you", "from", "use", "debian", "ubuntu", "bundled", "ruby", "NUMBER", "it", "s", "terribly", "outdate", "NUMBER", "system", "ruby", "NUMBER", "and", "then", "rvm", "on", "top", "of", "that", "for", "all", "the", "other", "version", "NUMBER", "kukkuk", "the", "fact", "there", "s", "NUMBER", "in", "those", "gem", "paths", "doesn", "t", "mean", "you", "ve", "get", "ruby", "NUMBER", "install", "NUMBER", "Proof", "Here", "find", "NUMBER", "rvm", "name", "NUMBER", "type", "d", "NUMBER", "home", "solnic", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "site_ruby", "NUMBER", "home", "solnic", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "gems", "NUMBER", "home", "solnic", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "NUMBER", "home", "solnic", "NUMBER", "rvm", "rubies", "ruby", "NUMBER", "p", "NUMBER", "lib", "ruby", "vendor_ruby", "NUMBER", "Go", "and", "do", "ruby", "v", "to", "make", "sure", "tho", "NUMBER", "good", "point", "solnic", "the", "gem", "paths", "remain", "in", "NUMBER", "as", "if", "it", "was", "NUMBER", "but", "kukkuk", "be", "use", "ubuntu", "NUMBER", "and", "I", "m", "use", "same", "ubuntu", "version", "as", "well", "there", "the", "only", "provide", "NUMBER", "x", "rubies", "be", "NUMBER", "NUMBER", "ubuntu", "NUMBER", "and", "NUMBER", "NUMBER", "Wow", "NUMBER", "Thanks", "for", "all", "the", "feedback", "NUMBER", "I", "never", "realized", "that", "NUMBER", "was", "considered", "bad", "for", "my", "server", "s", "health", "NUMBER", "tomash", "be", "right", "NUMBER", "I", "m", "just", "use", "the", "ruby", "that", "comes", "with", "NUMBER", "I", "thought", "the", "fewer", "things", "I", "install", "on", "the", "server", "the", "better", "NUMBER", "But", "I", "guess", "today", "I", "ll", "be", "install", "rvm", "and", "NUMBER", "I", "ll", "report", "back", "as", "soon", "as", "I", "ve", "do", "that", "NUMBER", "Ok", "NUMBER", "Installed", "RVM", "NUMBER", "Installed", "ruby", "NUMBER", "All", "work", "perfectly", "NUMBER", "Thanks", "for", "the", "input", "people", "NUMBER", "Much", "appreciated", "NUMBER", "I", "m", "having", "a", "problem", "with", "my", "Redis", "db", "not", "be", "backed", "up", "and", "I", "can", "t", "figure", "out", "what", "s", "wrong", "NUMBER", "This", "be", "my", "config", "ruby", "Backup", "Configuration", "Storage", "S", "NUMBER", "defaults", "do", "s", "NUMBER", "s", "NUMBER", "region", "us", "east", "NUMBER", "end", "Backup", "Configuration", "Database", "Redis", "NUMBER", "defaults", "do", "db", "db", "NUMBER", "path", "home", "rails", "redis", "dumps", "db", "NUMBER", "host", "localhost", "db", "NUMBER", "utility_path", "usr", "local", "bin", "redis", "cli", "db", "NUMBER", "invoke_save", "true", "end", "Backup", "Configuration", "Compressor", "Gzip", "NUMBER", "defaults", "do", "compression", "compression", "NUMBER", "best", "true", "end", "Backup", "Configuration", "Storage", "S", "NUMBER", "defaults", "do", "s", "NUMBER", "s", "NUMBER", "keep", "NUMBER", "s", "NUMBER", "path", "end", "Backup", "Model", "NUMBER", "new", "backup", "Backup", "do", "database", "Redis", "do", "db", "db", "NUMBER", "name", "redis", "myapp", "db", "NUMBER", "port", "NUMBER", "end", "store_with", "S", "NUMBER", "do", "s", "NUMBER", "s", "NUMBER", "bucket", "mybucket", "s", "NUMBER", "access_key_id", "secret", "s", "NUMBER", "secret_access_key", "secret", "end", "compress_with", "Gzip", "end", "and", "this", "be", "the", "output", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "Backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Database", "Redis", "start", "dumping", "and", "archiving", "redis", "myapp", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "usr", "local", "bin", "redis", "cli", "h", "localhost", "p", "NUMBER", "SAVE", "Could", "not", "connect", "to", "Redis", "at", "NUMBER", "NUMBER", "Connection", "refused", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "packaging", "everything", "to", "a", "single", "archive", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Compressor", "Gzip", "start", "compressing", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "backup", "NUMBER", "tar", "NUMBER", "gz", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "The", "backed", "up", "file", "contains", "a", "Redis", "folder", "but", "that", "folder", "be", "empty", "NUMBER", "I", "verify", "that", "the", "Redis", "dump", "file", "indeed", "lives", "in", "home", "rails", "redis", "dumps", "and", "be", "named", "redis", "myapp", "NUMBER", "b", "NUMBER", "Why", "do", "it", "try", "to", "connect", "to", "Redis", "on", "port", "NUMBER", "even", "though", "I", "specified", "NUMBER", "as", "the", "port", "That", "connection", "attempt", "also", "happens", "when", "I", "set", "db", "NUMBER", "invoke_save", "to", "false", "NUMBER", "The", "command", "usr", "local", "bin", "redis", "cli", "h", "localhost", "p", "NUMBER", "SAVE", "works", "fine", "NUMBER", "Great", "thanks", "I", "also", "notice", "that", "most", "likely", "because", "of", "the", "connection", "attempt", "on", "port", "NUMBER", "the", "whole", "backup", "command", "exits", "with", "a", "non", "zero", "exit", "status", "NUMBER", "The", "error", "be", "happening", "because", "db", "NUMBER", "utility_path", "be", "be", "set", "NUMBER", "The", "Redis", "class", "be", "calling", "utility", "cp", "in", "its", "copy", "method", "and", "utility", "be", "returning", "usr", "local", "bin", "redis", "cli", "instead", "of", "the", "normal", "cp", "path", "and", "hence", "the", "error", "NUMBER", "To", "debug", "this", "I", "add", "a", "Logger", "entry", "in", "the", "CLI", "run", "method", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "Backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Database", "Redis", "start", "dumping", "and", "archiving", "dump", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "usr", "local", "bin", "redis", "cli", "h", "localhost", "p", "NUMBER", "SAVE", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "usr", "local", "bin", "redis", "cli", "usr", "local", "var", "db", "redis", "dump", "NUMBER", "b", "Users", "tsigo", "Backup", "NUMBER", "tmp", "backup", "Redis", "dump", "NUMBER", "b", "Could", "not", "connect", "to", "Redis", "at", "NUMBER", "NUMBER", "Connection", "refused", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "packaging", "everything", "to", "a", "single", "archive", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "usr", "bin", "tar", "c", "f", "Users", "tsigo", "Backup", "NUMBER", "tmp", "NUMBER", "backup", "NUMBER", "tar", "C", "Users", "tsigo", "Backup", "NUMBER", "tmp", "backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Compressor", "Gzip", "start", "compressing", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "usr", "bin", "gzip", "best", "Users", "tsigo", "Backup", "NUMBER", "tmp", "NUMBER", "backup", "NUMBER", "tar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "bin", "rm", "rf", "Users", "tsigo", "Backup", "NUMBER", "tmp", "backup", "Users", "tsigo", "Backup", "NUMBER", "tmp", "NUMBER", "backup", "NUMBER", "tar", "NUMBER", "gz", "Wow", "thanks", "for", "investigating", "this", "bug", "so", "thoroughly", "tsigo", "meskyanichi", "do", "you", "think", "these", "error", "be", "easy", "to", "fix", "Actually", "I", "was", "wrong", "about", "the", "last", "part", "of", "my", "comment", "which", "I", "ve", "remove", "NUMBER", "The", "sequence", "should", "complete", "successfully", "once", "we", "get", "rid", "of", "the", "redis", "cli", "error", "NUMBER", "Try", "remove", "your", "db", "NUMBER", "utility_path", "assignment", "completely", "which", "should", "remove", "the", "Could", "not", "connect", "error", "and", "see", "if", "you", "get", "a", "valid", "backup", "file", "NUMBER", "It", "works", "without", "the", "db", "NUMBER", "utility_path", "when", "I", "execute", "the", "backup", "command", "from", "the", "command", "line", "NUMBER", "I", "had", "it", "packaged", "up", "in", "a", "Rake", "task", "in", "which", "case", "it", "doesn", "t", "work", "because", "redis", "cli", "cannot", "be", "find", "that", "be", "why", "I", "add", "the", "db", "NUMBER", "utility_path", "in", "the", "first", "place", "NUMBER", "But", "from", "the", "command", "line", "the", "backup", "works", "fine", "and", "it", "include", "the", "Redis", "dump", "file", "NUMBER", "Ah", "NUMBER", "Yeah", "NUMBER", "for", "a", "Rake", "task", "and", "or", "a", "Cron", "job", "you", "may", "want", "to", "just", "modify", "PATH", "to", "include", "usr", "local", "bin", "so", "that", "which", "can", "find", "it", "NUMBER", "On", "Backup", "s", "end", "it", "might", "be", "best", "to", "just", "hard", "code", "the", "cp", "path", "since", "if", "that", "can", "t", "be", "find", "we", "probably", "have", "bigger", "problem", "NUMBER", "I", "ll", "wait", "to", "see", "what", "meskyanichi", "thinks", "NUMBER", "Yeah", "I", "think", "if", "you", "want", "to", "maintain", "the", "ability", "to", "customize", "the", "redis", "cli", "path", "via", "utility_path", "hard", "code", "the", "cp", "path", "be", "the", "easiest", "fix", "NUMBER", "On", "the", "other", "hand", "I", "m", "not", "entirely", "convinced", "this", "be", "an", "actual", "bug", "NUMBER", "As", "noted", "above", "modifying", "the", "shell", "PATH", "variable", "should", "fix", "the", "issue", "as", "well", "NUMBER", "I", "think", "I", "won", "t", "consider", "this", "a", "Backup", "issue", "since", "as", "tsigo", "point", "out", "it", "s", "more", "an", "issue", "with", "load", "paths", "PATH", "NUMBER", "Try", "exporting", "extending", "the", "load", "path", "with", "the", "necessary", "paths", "prior", "to", "run", "the", "rake", "task", "NUMBER", "I", "think", "you", "can", "also", "do", "this", "from", "within", "the", "NUMBER", "rake", "file", "use", "or", "something", "NUMBER", "Also", "manuelmeurer", "were", "you", "able", "to", "get", "it", "work", "at", "all", "now", "by", "fix", "the", "load", "paths", "and", "such", "Yep", "as", "long", "as", "I", "don", "t", "set", "the", "utility_path", "it", "works", "fine", "NUMBER", "I", "don", "t", "really", "understand", "why", "you", "wouldn", "t", "consider", "the", "fact", "that", "backup", "try", "to", "connect", "to", "Redis", "on", "a", "standard", "port", "when", "the", "utility_path", "be", "set", "a", "Backup", "bug", "though", "NUMBER", "Sure", "not", "setting", "it", "avoids", "the", "error", "but", "the", "way", "it", "be", "use", "see", "tsigo", "s", "first", "comment", "be", "incorrect", "no", "Whoops", "NUMBER", "Good", "catch", "NUMBER", "You", "re", "right", "NUMBER", "So", "I", "think", "we", "re", "back", "to", "hard", "code", "the", "cp", "path", "NUMBER", "I", "ll", "submit", "a", "pull", "request", "NUMBER", "Hi", "I", "be", "trying", "to", "use", "the", "backup", "gem", "in", "my", "rails", "NUMBER", "app", "NUMBER", "I", "have", "add", "it", "to", "my", "Gemfile", "and", "install", "it", "but", "when", "I", "try", "to", "run", "rails", "g", "backup", "I", "get", "Could", "not", "find", "generator", "backup", "NUMBER", "I", "know", "the", "docs", "say", "Rails", "NUMBER", "be", "support", "but", "to", "what", "extent", "Rails", "NUMBER", "and", "Ruby", "NUMBER", "TIA", "I", "find", "problem", "with", "Archive", "exclude", "on", "Ubuntu", "NUMBER", "In", "my", "environment", "it", "just", "ignored", "these", "definitions", "NUMBER", "So", "I", "ve", "modify", "syntax", "to", "use", "multiple", "exclude", "definitions", "instead", "NUMBER", "Spec", "modify", "too", "NUMBER", "Tested", "on", "Ubuntu", "NUMBER", "and", "Mac", "OS", "X", "NUMBER", "GNU", "tar", "NUMBER", "bsdtar", "NUMBER", "Yes", "NUMBER", "Two", "test", "checking", "tar", "archive", "command", "NUMBER", "I", "ve", "modify", "them", "too", "NUMBER", "In", "the", "transfer", "method", "LINK", "L", "NUMBER", "of", "the", "S", "NUMBER", "storage", "be", "there", "any", "reason", "why", "the", "exception", "be", "silently", "swallowed", "and", "followed", "by", "an", "exit", "This", "be", "from", "my", "admittedly", "limited", "point", "of", "view", "quite", "annoying", "because", "the", "notifiers", "and", "syncers", "won", "t", "be", "run", "and", "the", "cleanup", "won", "t", "be", "do", "NUMBER", "I", "like", "neat", "and", "tidy", "things", "one", "of", "my", "many", "faults", "NUMBER", "I", "suppose", "that", "catching", "Excon", "Errors", "NotFound", "would", "be", "better", "then", "NUMBER", "I", "did", "a", "quick", "test", "and", "it", "looks", "like", "it", "s", "the", "one", "that", "s", "raise", "instead", "of", "Excon", "Errors", "SocketError", "NUMBER", "Would", "catching", "it", "add", "the", "message", "about", "checking", "the", "bucket", "existence", "and", "re", "raising", "the", "exception", "be", "an", "acceptable", "solution", "Looks", "fine", "to", "me", "do", "you", "want", "a", "pull", "request", "for", "this", "I", "know", "what", "it", "s", "like", "to", "be", "short", "on", "time", "and", "every", "bit", "helps", "NUMBER", "The", "run", "method", "LINK", "L", "NUMBER", "doesn", "t", "check", "the", "return", "code", "of", "the", "tar", "command", "NUMBER", "This", "means", "an", "incomplete", "archive", "file", "due", "to", "insufficient", "disk", "space", "or", "whatever", "will", "get", "uploaded", "just", "fine", "and", "guarantees", "cries", "and", "tears", "when", "trying", "to", "restore", "your", "precious", "but", "now", "useless", "backup", "NUMBER", "The", "exit", "code", "of", "tar", "be", "describe", "here", "bottom", "of", "the", "page", "LINK", "_section", "Synopsis", "NUMBER", "html", "I", "can", "try", "to", "dig", "up", "info", "about", "other", "commands", "if", "you", "re", "short", "on", "time", "just", "tell", "me", "what", "info", "be", "needed", "NUMBER", "Let", "me", "know", "if", "I", "can", "do", "anything", "to", "clean", "up", "the", "pull", "request", "Sorry", "for", "the", "long", "wait", "NUMBER", "I", "finally", "get", "my", "work", "load", "out", "of", "the", "way", "and", "be", "now", "looking", "in", "to", "Backup", "s", "issue", "log", "NUMBER", "Your", "code", "base", "looks", "very", "clean", "NUMBER", "Thanks", "for", "write", "it", "up", "Merging", "now", "NUMBER", "I", "ve", "install", "backup", "successfully", "but", "generator", "doesn", "t", "work", "NUMBER", "TAG", "TAG", "NUMBER", "script", "generate", "backup", "Couldn", "t", "find", "backup", "generator", "TAG", "TAG", "Is", "this", "gem", "depends", "on", "Rails", "version", "or", "something", "I", "ve", "tried", "NUMBER", "and", "NUMBER", "and", "both", "fail", "NUMBER", "Thanks", "in", "advance", "NUMBER", "Hi", "thanks", "for", "reply", "NUMBER", "Ofcourse", "backup", "generate", "works", "fine", "but", "I", "ve", "read", "Wiki", "about", "Getting", "Started", "Ruby", "on", "Rails", "LINK", "Backup", "NUMBER", "NUMBER", "Getting", "Started", "NUMBER", "Ruby", "on", "Rails", "NUMBER", "and", "want", "to", "manage", "back", "up", "with", "Capistrano", "and", "Whenever", "NUMBER", "So", "I", "need", "to", "create", "migration", "and", "rake", "task", "NUMBER", "Any", "suggestions", "Oh", "I", "see", "NUMBER", "I", "ll", "try", "later", "NUMBER", "Thanks", "for", "your", "help", "and", "information", "Amazon", "now", "support", "multipart", "uploads", "and", "we", "need", "a", "tool", "that", "support", "syncing", "directories", "that", "contain", "file", "larger", "than", "NUMBER", "GB", "NUMBER", "I", "have", "a", "NUMBER", "TB", "directory", "tree", "that", "I", "want", "to", "sync", "to", "S", "NUMBER", "Many", "of", "the", "file", "be", "larger", "than", "NUMBER", "GB", "Some", "upwards", "of", "NUMBER", "GB", "NUMBER", "In", "the", "past", "I", "have", "use", "s", "NUMBER", "sync", "for", "directories", "with", "smaller", "file", "but", "s", "NUMBER", "sync", "doesn", "t", "support", "multipart", "uploads", "for", "file", "larger", "than", "NUMBER", "GB", "and", "it", "be", "no", "longer", "in", "active", "development", "NUMBER", "I", "have", "be", "searching", "for", "a", "replacement", "tool", "to", "handle", "this", "for", "a", "few", "days", "now", "but", "most", "people", "still", "use", "s", "NUMBER", "sync", "NUMBER", "I", "had", "hoped", "that", "since", "backup", "was", "use", "fog", "it", "might", "support", "the", "new", "larger", "NUMBER", "TB", "filesize", "limit", "NUMBER", "As", "I", "understand", "Fog", "support", "multipart", "uploads", "NUMBER", "Currently", "the", "only", "options", "I", "believe", "be", "GUI", "based", "tool", "or", "shipping", "drives", "to", "Amazon", "for", "import", "NUMBER", "Correction", "I", "have", "find", "one", "command", "line", "tool", "that", "can", "do", "this", "but", "it", "be", "write", "in", "java", "and", "requires", "Java", "NUMBER", "Which", "doesn", "t", "come", "with", "OS", "X", "Tiger", "Server", "NUMBER", "The", "jets", "NUMBER", "t", "Java", "library", "comes", "with", "a", "sample", "synchronization", "NUMBER", "sh", "script", "that", "support", "the", "multipart", "uploads", "while", "syncing", "NUMBER", "More", "info", "here", "LINK", "I", "be", "currently", "installing", "OpenJDK", "NUMBER", "from", "macports", "at", "the", "moment", "and", "be", "going", "to", "try", "this", "but", "I", "do", "still", "think", "backup", "needs", "to", "support", "this", "NUMBER", "I", "would", "really", "prefer", "a", "ruby", "tool", "like", "backup", "to", "support", "this", "since", "we", "already", "have", "ruby", "as", "a", "dependency", "in", "all", "of", "our", "environments", "NUMBER", "UPDATE", "OpenJDK", "NUMBER", "fail", "to", "build", "on", "Tiger", "NUMBER", "I", "need", "to", "dig", "in", "further", "later", "NUMBER", "Hi", "guys", "I", "had", "a", "bit", "of", "code", "in", "my", "old", "backup", "NUMBER", "fork", "NUMBER", "I", "haven", "t", "moved", "this", "over", "mostly", "because", "I", "can", "t", "test", "it", "but", "it", "would", "look", "something", "like", "this", "for", "backup", "storage", "s", "NUMBER", "rb", "MAX_S", "NUMBER", "_FILE_SIZE", "NUMBER", "NUMBER", "Transfers", "the", "archived", "file", "to", "the", "specified", "Amazon", "S", "NUMBER", "bucket", "def", "transfer", "begin", "Logger", "NUMBER", "message", "self", "NUMBER", "class", "start", "transferring", "remote_file", "NUMBER", "store_files", "local_file_path", "File", "NUMBER", "join", "local_path", "local_file", "if", "File", "NUMBER", "at", "local_file_path", "NUMBER", "size", "MAX_S", "NUMBER", "_FILE_SIZE", "we", "need", "to", "split", "split", "b", "MAX_S", "NUMBER", "_FILE_SIZE", "local_path", "local_path", "NUMBER", "store_files", "ls", "local_path", "NUMBER", "NUMBER", "split", "Logger", "NUMBER", "message", "Splitting", "local_file", "into", "store_files", "NUMBER", "length", "parts", "as", "it", "be", "too", "large", "for", "s", "NUMBER", "else", "store_files", "TAG", "backup", "perform", "trigger", "lsv_bckp", "config_file", "root", "Backup", "config", "NUMBER", "rb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "error", "Dependency", "miss", "NUMBER", "Please", "install", "fog", "version", "NUMBER", "and", "try", "again", "NUMBER", "gem", "install", "fog", "v", "NUMBER", "Dependency", "required", "for", "Amazon", "S", "NUMBER", "Rackspace", "Cloud", "Files", "S", "NUMBER", "CloudFiles", "Storages", "Trying", "to", "install", "the", "fog", "gem", "for", "you", "NUMBER", "please", "wait", "NUMBER", "If", "i", "do", "gem", "list", "local", "I", "ve", "get", "this", "list", "LOCAL", "GEMS", "backup", "NUMBER", "builder", "NUMBER", "excon", "NUMBER", "fog", "NUMBER", "formatador", "NUMBER", "json", "NUMBER", "mime", "types", "NUMBER", "net", "ssh", "NUMBER", "nokogiri", "NUMBER", "ruby", "hmac", "NUMBER", "thor", "NUMBER", "I", "don", "t", "understand", "why", "backup", "doesn", "t", "find", "fog", "NUMBER", "Could", "you", "help", "me", "thanks", "NUMBER", "I", "had", "the", "same", "problem", "with", "net", "ssh", "and", "it", "was", "relate", "with", "openssl", "that", "was", "not", "properly", "compiled", "into", "ruby", "NUMBER", "The", "way", "I", "discover", "the", "problem", "was", "through", "irb", "trying", "to", "require", "net", "ssh", "NUMBER", "Juan", "NUMBER", "meskyanichi", "I", "ve", "install", "ruby", "with", "aptitude", "install", "ruby", "NUMBER", "full", "jschwindt", "I", "will", "try", "to", "follow", "tips", "on", "openssl", "bug", "and", "reinstall", "ruby", "with", "rvm", "NUMBER", "LINK", "_version_manager_ubuntu_and_openssl", "This", "be", "how", "it", "happened", "to", "me", "I", "install", "ruby", "NUMBER", "use", "RVM", "in", "a", "CentosOS", "NUMBER", "server", "where", "no", "openssl", "devel", "package", "was", "install", "NUMBER", "I", "had", "to", "remove", "ruby", "yum", "install", "openssl", "devel", "and", "finally", "re", "install", "ruby", "through", "RVM", "NUMBER", "Hmm", "I", "don", "t", "think", "this", "will", "help", "with", "your", "situation", "because", "you", "be", "already", "use", "NUMBER", "but", "I", "also", "get", "this", "error", "when", "I", "was", "use", "fog", "NUMBER", "Once", "i", "specified", "version", "NUMBER", "in", "my", "gem", "file", "it", "worked", "NUMBER", "Ok", "it", "works", "I", "ve", "reinstalled", "ruby", "with", "rvm", "and", "follow", "instructions", "for", "openssl", "and", "reinstalled", "backup", "NUMBER", "Thanks", "Using", "Backup", "NUMBER", "on", "Ubuntu", "NUMBER", "or", "OS", "X", "I", "have", "the", "following", "exception", "when", "Backup", "try", "to", "parse", "import", "my", "public", "key", "ruby", "Exception", "that", "get", "raise", "NoMethodError", "undefined", "method", "match", "for", "nil", "NilClass", "backup", "NUMBER", "lib", "backup", "encryptor", "gpg", "NUMBER", "rb", "NUMBER", "in", "extract_encryption_key_id", "backup", "NUMBER", "lib", "backup", "encryptor", "gpg", "NUMBER", "rb", "NUMBER", "in", "perform", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "on", "platform", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "This", "be", "my", "the", "GPG", "part", "of", "my", "config", "ruby", "encrypt_with", "GPG", "do", "encryption", "encryption", "NUMBER", "key", "TAG", "TAG", "not", "change", "gpg", "Total", "number", "processed", "NUMBER", "gpg", "unchanged", "NUMBER", "the", "dev", "branch", "solve", "my", "issue", "Thanks", "for", "point", "that", "out", "skippy", "I", "have", "the", "same", "issue", "with", "the", "following", "config", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "NUMBER", "patchlevel", "NUMBER", "on", "platform", "x", "NUMBER", "_", "NUMBER", "linux", "NUMBER", "Has", "the", "fix", "be", "merge", "to", "NUMBER", "or", "do", "I", "need", "to", "use", "the", "dev", "branch", "This", "use", "to", "work", "for", "me", "on", "NUMBER", "on", "NUMBER", "p", "NUMBER", "but", "now", "on", "NUMBER", "and", "NUMBER", "p", "NUMBER", "it", "fail", "NUMBER", "I", "m", "get", "the", "exactly", "same", "behaviour", "as", "initially", "report", "by", "edave", "so", "the", "gpg", "import", "statement", "test", "on", "the", "command", "line", "pass", "NUMBER", "It", "seems", "there", "s", "a", "bug", "in", "the", "run", "method", "not", "returning", "any", "output", "so", "the", "mail", "extraction", "fail", "NUMBER", "colszowka", "This", "was", "just", "recently", "fix", "in", "NUMBER", "like", "the", "title", "says", "i", "ve", "add", "support", "for", "bzip", "NUMBER", "compressor", "NUMBER", "not", "a", "lot", "of", "work", "the", "backup", "gem", "api", "be", "a", "pleasure", "to", "work", "with", "and", "bzip", "NUMBER", "command", "has", "gzip", "compatible", "syntax", "anyway", "NUMBER", "specs", "pass", "also", "test", "in", "real", "life", "already", "NUMBER", "I", "m", "doing", "the", "usual", "drill", "after", "forking", "and", "before", "fiddling", "with", "actual", "code", "rvm", "use", "NUMBER", "bundle", "install", "rspec", "spec", "And", "get", "lots", "of", "failures", "and", "error", "whereas", "run", "directories", "specs", "separately", "be", "green", "LINK", "What", "be", "I", "doing", "wrong", "nope", "but", "haven", "t", "worked", "with", "that", "since", "my", "bzip", "NUMBER", "pull", "request", "NUMBER", "it", "would", "be", "nice", "to", "have", "a", "test", "suite", "run", "as", "whole", "though", "NUMBER", "were", "you", "able", "to", "reproduce", "infinity_test", "oooh", "shiny", "let", "me", "check", "NUMBER", "This", "looks", "like", "an", "elegant", "tool", "but", "how", "do", "we", "restore", "the", "backups", "created", "At", "the", "very", "least", "there", "should", "be", "a", "complete", "restore", "and", "compare", "function", "to", "test", "that", "the", "backup", "be", "be", "generate", "correctly", "and", "that", "it", "can", "in", "fact", "be", "restored", "in", "production", "NUMBER", "A", "broader", "issue", "be", "how", "do", "this", "maintain", "consistency", "e", "NUMBER", "g", "NUMBER", "between", "databases", "and", "the", "file", "system", "Locking", "the", "database", "be", "problematic", "in", "practice", "and", "also", "do", "not", "solve", "the", "cross", "database", "consistency", "NUMBER", "It", "seems", "like", "it", "would", "be", "appropriate", "to", "use", "volume", "level", "snapshotting", "to", "create", "a", "consistent", "target", "for", "backup", "to", "run", "against", "NUMBER", "Any", "chance", "of", "baking", "this", "into", "the", "gem", "since", "it", "would", "be", "a", "common", "requirement", "Hi", "meskyanichi", "I", "ve", "change", "the", "instruction", "of", "the", "generate", "file", "NUMBER", "backup", "perform", "t", "instead", "of", "backup", "t", "Thanks", "Jo\u00e3o", "Vitor", "Lacerda", "Guimar\u00e3es", "Thanks", "for", "you", "fast", "response", "NUMBER", "I", "m", "going", "to", "remove", "my", "fork", "NUMBER", "Hi", "meskyanichi", "I", "ve", "change", "the", "default", "parameters", "use", "on", "pg_dump", "quick", "and", "single", "transaction", "be", "not", "valid", "Thanks", "Jo\u00e3o", "Vitor", "Lacerda", "Guimar\u00e3es", "Thanks", "for", "your", "fast", "response", "NUMBER", "I", "m", "going", "to", "remove", "my", "fork", "NUMBER", "This", "one", "be", "pretty", "obvious", "NUMBER", "I", "d", "love", "to", "have", "other", "as", "in", "better", "than", "gzip", "compression", "methods", "namely", "bzip", "NUMBER", "and", "lzma", "NUMBER", "Especially", "when", "backing", "up", "to", "S", "NUMBER", "which", "I", "do", "which", "means", "charging", "for", "storage", "and", "transfer", "NUMBER", "Michael", "be", "you", "work", "on", "it", "at", "the", "moment", "or", "should", "I", "just", "do", "it", "myself", "and", "file", "a", "pull", "request", "Hi", "I", "came", "across", "two", "bug", "while", "setting", "up", "backup", "NUMBER", "in", "my", "app", "NUMBER", "Firstly", "TAG", "Backup", "CLI", "run", "TAG", "did", "not", "return", "the", "output", "of", "the", "command", "as", "expected", "in", "various", "other", "places", "notably", "the", "GPG", "Encryptor", "module", "NUMBER", "Secondly", "the", "GPG", "encryptor", "made", "use", "of", "a", "regex", "to", "strip", "initial", "whitespace", "from", "lines", "in", "the", "supplied", "key", "NUMBER", "This", "had", "the", "side", "effect", "of", "completely", "remove", "any", "lines", "with", "only", "whitespace", "breaking", "the", "gpg", "import", "command", "irb", "n", "NUMBER", "gsub", "s", "t", "The", "attached", "commit", "fix", "these", "issue", "NUMBER", "I", "ve", "also", "altered", "the", "unit", "test", "for", "the", "GPG", "encryptor", "relating", "to", "the", "whitespace", "stripping", "regex", "so", "that", "it", "doesn", "t", "use", "the", "same", "code", "as", "the", "section", "it", "s", "test", "NUMBER", "Hope", "this", "be", "of", "use", "NUMBER", "Cheers", "Simon", "mongodump", "do", "not", "have", "a", "port", "argument", "See", "LINK", "Export", "Tools", "ImportExportTools", "mongodump", "I", "m", "currently", "work", "around", "this", "issue", "by", "passing", "the", "port", "into", "the", "host", "param", "db", "NUMBER", "host", "somehost", "NUMBER", "com", "NUMBER", "One", "side", "effect", "of", "this", "patch", "be", "that", "the", "host", "argument", "always", "gets", "a", "value", "NUMBER", "If", "no", "host", "be", "set", "the", "param", "be", "host", "localhost", "I", "m", "not", "sure", "if", "there", "be", "anything", "wrong", "with", "that", "but", "I", "thought", "I", "should", "be", "upfront", "about", "this", "change", "NUMBER", "I", "guess", "I", "m", "run", "NUMBER", "which", "seems", "pretty", "old", "NUMBER", "I", "just", "install", "with", "apt", "get", "on", "ubuntu", "NUMBER", "It", "looks", "like", "there", "be", "an", "install", "guide", "for", "more", "recent", "release", "LINK", "and", "Debian", "package", "I", "m", "currently", "use", "Backup", "NUMBER", "successfully", "with", "my", "work", "around", "host", "host", "port", "so", "no", "pressure", "to", "pull", "this", "patch", "in", "NUMBER", "mongo", "version", "MongoDB", "shell", "version", "NUMBER", "mongodump", "help", "options", "help", "produce", "help", "message", "h", "host", "arg", "mongo", "host", "to", "connect", "to", "d", "db", "arg", "database", "to", "use", "c", "collection", "arg", "collection", "to", "use", "some", "commands", "u", "username", "arg", "username", "p", "password", "arg", "password", "dbpath", "arg", "directly", "access", "mongod", "data", "file", "in", "this", "path", "instead", "of", "connecting", "to", "a", "mongod", "instance", "v", "verbose", "be", "more", "verbose", "include", "multiple", "times", "for", "more", "verbosity", "e", "NUMBER", "g", "NUMBER", "vvvvv", "o", "out", "arg", "dump", "output", "directory", "Cool", "thanks", "for", "the", "help", "i", "m", "actually", "hosting", "mongo", "at", "mongohq", "so", "I", "just", "needed", "the", "mongodump", "utility", "on", "my", "install", "NUMBER", "I", "ll", "probably", "upgrade", "anyway", "NUMBER", "Thanks", "for", "Backup", "it", "rocks", "Hi", "First", "thanks", "for", "write", "this", "gem", "it", "s", "appreciated", "NUMBER", "I", "just", "wanted", "to", "point", "out", "a", "potential", "scenario", "with", "backing", "up", "MongoDB", "databases", "NUMBER", "From", "the", "MongoDB", "backup", "page", "LINK", "A", "word", "of", "warning", "it", "s", "not", "safe", "to", "back", "up", "the", "mongod", "data", "file", "by", "default", "in", "data", "db", "while", "the", "database", "be", "run", "and", "writes", "be", "occurring", "such", "a", "backup", "may", "turn", "out", "to", "be", "corrupt", "NUMBER", "See", "the", "fsync", "option", "below", "for", "a", "way", "around", "that", "NUMBER", "There", "s", "an", "fsync", "LINK", "Command", "fsyncCommand", "Caveats", "page", "which", "describes", "the", "command", "to", "use", "when", "backing", "up", "the", "db", "NUMBER", "It", "would", "probably", "be", "helpful", "to", "modify", "this", "backup", "gem", "to", "execute", "those", "commands", "in", "order", "to", "reduce", "that", "chance", "NUMBER", "I", "plan", "on", "creating", "a", "fork", "and", "trying", "to", "add", "those", "myself", "but", "a", "bit", "of", "guidance", "in", "terms", "of", "the", "best", "place", "to", "make", "those", "additions", "would", "be", "helpful", "NUMBER", "Thanks", "in", "advance", "Mark", "I", "have", "an", "idea", "to", "make", "a", "special", "locking", "mongodump", "executable", "which", "will", "be", "just", "a", "bash", "script", "wrapping", "mongodump", "with", "fsync", "lock", "and", "of", "course", "unlock", "after", "the", "actual", "dump", "NUMBER", "something", "like", "this", "scenario", "describe", "here", "LINK", "backups", "corn", "on", "the", "cob", "in", "NUMBER", "minutes", "michael", "be", "you", "open", "to", "pull", "request", "with", "such", "features", "tomash", "meskyanichi", "What", "about", "run", "the", "fsync", "command", "from", "Ruby", "itself", "NUMBER", "Here", "s", "LINK", "an", "example", "from", "the", "Mongo", "Ruby", "FAQ", "NUMBER", "trystant", "it", "s", "not", "only", "about", "the", "fsync", "fsync", "guarantees", "you", "have", "the", "latest", "db", "state", "at", "the", "moment", "of", "starting", "the", "dump", "NUMBER", "to", "ensure", "the", "data", "won", "t", "change", "_while_", "dumping", "a", "lock", "must", "be", "issue", "NUMBER", "also", "backup", "doesn", "t", "use", "any", "ruby", "gems", "for", "accesing", "the", "databases", "it", "s", "a", "wrapper", "around", "commandline", "tool", "these", "dbs", "provide", "NUMBER", "meskyanichi", "i", "think", "the", "wrapped", "mongodump", "version", "should", "not", "be", "a", "default", "one", "but", "one", "triggered", "by", "config", "like", "lock", "true", "in", "db", "configuration", "block", "NUMBER", "tomash", "Good", "points", "whereas", "the", "lock", "command", "could", "be", "add", "the", "fact", "that", "the", "gem", "calls", "out", "to", "system", "commands", "requires", "a", "wrapper", "around", "mongodump", "NUMBER", "Now", "where", "to", "host", "the", "mongodump", "wrapper", "Make", "it", "a", "separate", "script", "or", "part", "of", "this", "backup", "gem", "pretty", "simple", "if", "you", "re", "in", "for", "some", "shell", "hacking", "NUMBER", "have", "two", "file", "mongo_lock", "and", "mongo_unlock", "NUMBER", "mongo_lock", "use", "admin", "db", "NUMBER", "runCommand", "fsync", "NUMBER", "lock", "NUMBER", "mongo_unlock", "use", "admin", "db", "NUMBER", "cmd", "NUMBER", "sys", "NUMBER", "unlock", "NUMBER", "findOne", "and", "then", "wrap", "mongodump", "with", "locking", "unlocking", "stuff", "opt", "mongodb", "linux", "i", "NUMBER", "NUMBER", "bin", "mongo", "dbname", "TAG", "db", "NUMBER", "runCommand", "fsync", "NUMBER", "lock", "NUMBER", "NUMBER", "mongo", "dbname", "mongodump", "dbname", "echo", "use", "admin", "db", "NUMBER", "cmd", "NUMBER", "sys", "NUMBER", "unlock", "NUMBER", "findOne", "NUMBER", "mongo", "dbname", "Remember", "to", "use", "instead", "of", "or", "shell", "will", "evaluate", "cmd", "to", "nil", "NUMBER", "LINK", "Please", "do", "not", "replace", "the", "current", "functionality", "NUMBER", "Make", "the", "lock", "an", "option", "NUMBER", "A", "word", "of", "warning", "it", "s", "not", "safe", "to", "back", "up", "the", "mongod", "data", "file", "by", "default", "in", "data", "db", "while", "the", "database", "be", "run", "and", "writes", "be", "occurring", "such", "a", "backup", "may", "turn", "out", "to", "be", "corrupt", "NUMBER", "See", "the", "fsync", "option", "below", "for", "a", "way", "around", "that", "NUMBER", "I", "believe", "this", "only", "applies", "when", "backing", "up", "the", "mongod", "data", "file", "manually", "NUMBER", "mongodump", "be", "intended", "for", "doing", "hot", "backups", "as", "mention", "in", "the", "docs", "NUMBER", "Instead", "of", "copying", "the", "file", "it", "makes", "an", "actual", "mongo", "connection", "to", "the", "database", "and", "dumps", "the", "BSON", "through", "the", "connection", "NUMBER", "It", "s", "a", "little", "slower", "than", "dumping", "the", "file", "by", "hand", "but", "it", "s", "perfectly", "safe", "NUMBER", "mongodump", "do", "not", "require", "a", "lock", "to", "generate", "a", "work", "dump", "NUMBER", "It", "only", "requires", "one", "to", "generate", "a", "point", "in", "time", "snapshot", "NUMBER", "mongodump", "This", "takes", "a", "database", "and", "outputs", "it", "in", "a", "binary", "representation", "NUMBER", "This", "be", "use", "for", "doing", "hot", "backups", "of", "a", "database", "I", "have", "verify", "this", "myself", "and", "I", "have", "never", "had", "any", "problem", "with", "backup", "corruption", "when", "use", "mongodump", "NUMBER", "EDIT", "mongodump", "do", "not", "provide", "a", "point", "in", "time", "snapshot", "without", "a", "lock", "but", "it", "be", "consistent", "and", "safe", "and", "will", "always", "provide", "a", "work", "backup", "NUMBER", "Whether", "or", "not", "you", "need", "a", "point", "in", "time", "snapshot", "should", "be", "up", "to", "the", "user", "and", "not", "the", "default", "functionality", "NUMBER", "MongoDB", "be", "fire", "and", "forget", "non", "transactional", "by", "nature", "and", "most", "of", "the", "MongoDB", "apps", "I", "have", "worked", "with", "do", "not", "rely", "on", "the", "atomicity", "of", "multiple", "update", "NUMBER", "There", "s", "always", "a", "possibility", "that", "some", "update", "won", "t", "get", "to", "the", "DB", "in", "the", "first", "place", "and", "your", "app", "has", "to", "be", "ready", "for", "that", "situation", "NUMBER", "Same", "applies", "to", "a", "hot", "mongodump", "NUMBER", "It", "may", "be", "miss", "or", "have", "some", "extra", "update", "but", "ultimately", "it", "s", "no", "different", "from", "how", "it", "works", "at", "runtime", "NUMBER", "This", "be", "what", "I", "mean", "by", "point", "in", "time", "snapshot", "NUMBER", "Whether", "your", "app", "can", "or", "cannot", "handle", "these", "situations", "determines", "whether", "you", "need", "a", "point", "in", "time", "snapshot", "or", "not", "NUMBER", "This", "be", "why", "mongodump", "will", "have", "an", "optional", "lock", "flag", "in", "the", "future", "according", "to", "this", "bug", "report", "SERVER", "NUMBER", "LINK", "NUMBER", "Sorry", "for", "the", "long", "brain", "dump", "but", "I", "find", "this", "gem", "very", "useful", "and", "I", "just", "don", "t", "want", "locking", "to", "be", "the", "default", "NUMBER", "lapluviosilla", "I", "haven", "t", "made", "the", "safe", "locked", "dump", "default", "quite", "the", "opposite", "safe", "it", "initialized", "with", "false", "NUMBER", "The", "part", "in", "the", "README", "was", "write", "to", "explain", "why", "this", "option", "was", "add", "at", "all", "NUMBER", "Just", "like", "you", "read", "mongodump", "doesn", "t", "guarantee", "consistency", "of", "data", "NUMBER", "There", "be", "a", "suggestion", "to", "add", "lock", "option", "to", "mongodb", "however", "it", "won", "t", "be", "here", "until", "at", "least", "NUMBER", "LINK", "NUMBER", "meskyanichi", "I", "d", "gladly", "use", "mongodump", "lock", "if", "it", "was", "available", "in", "the", "first", "place", "I", "agree", "that", "use", "vendor", "provide", "functionality", "would", "be", "a", "lot", "better", "than", "hacking", "around", "it", "NUMBER", "But", "until", "it", "becomes", "a", "part", "of", "mongo", "I", "d", "love", "to", "have", "lock", "unlock", "wrapping", "in", "my", "backup", "strategy", "NUMBER", "Also", "when", "mongo", "NUMBER", "be", "release", "with", "mongodump", "lock", "support", "we", "can", "make", "Backup", "use", "it", "when", "backing", "up", "mongodb", "NUMBER", "NUMBER", "I", "don", "t", "know", "when", "that", "will", "happen", "and", "not", "everybody", "jumps", "onto", "latest", "mongodb", "version", "I", "just", "need", "to", "work", "with", "what", "I", "ve", "be", "given", "NUMBER", "Yeah", "looks", "like", "tomash", "be", "right", "about", "it", "not", "be", "implement", "soon", "NUMBER", "It", "s", "not", "a", "high", "priority", "feature", "for", "the", "MongoDB", "team", "NUMBER", "tomash", "Sorry", "didn", "t", "look", "at", "the", "pull", "request", "closely", "NUMBER", "From", "the", "way", "the", "conversation", "was", "going", "I", "assumed", "it", "was", "going", "to", "be", "the", "default", "NUMBER", "A", "lock", "option", "would", "be", "just", "fine", "NUMBER", "One", "suggestion", "if", "I", "may", "To", "keep", "things", "consistent", "could", "we", "name", "the", "option", "lock", "instead", "of", "safe", "This", "be", "what", "it", "will", "be", "call", "on", "the", "mongodump", "once", "they", "get", "around", "to", "implement", "that", "NUMBER", "You", "re", "right", "lock", "sounds", "a", "lot", "better", "NUMBER", "Imanel", "will", "have", "it", "renamed", "in", "the", "refactored", "and", "improved", "code", "he", "ll", "soon", "issue", "a", "pull", "request", "with", "NUMBER", "There", "be", "a", "new", "feature", "in", "NUMBER", "mongodump", "that", "allows", "servers", "backed", "up", "with", "an", "oplog", "to", "be", "consistent", "at", "the", "end", "of", "the", "backup", "NUMBER", "The", "mongodump", "runs", "and", "then", "when", "it", "s", "do", "with", "the", "dump", "it", "replays", "the", "oplog", "to", "get", "all", "the", "change", "made", "since", "the", "backup", "start", "NUMBER", "For", "this", "to", "work", "NUMBER", "you", "need", "an", "oplog", "NUMBER", "If", "you", "have", "a", "single", "node", "you", "can", "start", "the", "node", "as", "a", "master", "or", "as", "a", "replica", "with", "one", "node", "in", "the", "cluster", "NUMBER", "If", "you", "don", "t", "have", "an", "oplog", "NUMBER", "this", "doesn", "t", "work", "and", "there", "be", "a", "chance", "that", "your", "backup", "will", "be", "inconsistent", "at", "the", "end", "of", "the", "mongodump", "NUMBER", "Ok", "push", "new", "version", "as", "NUMBER", "It", "s", "disabled", "at", "default", "and", "should", "be", "easy", "to", "change", "in", "future", "so", "it", "support", "native", "lock", "Here", "s", "the", "feedback", "I", "received", "from", "my", "NUMBER", "gen", "friend", "ok", "so", "here", "be", "the", "problem", "with", "run", "without", "a", "lock", "NUMBER", "it", "be", "ok", "to", "do", "so", "but", "the", "problem", "be", "that", "data", "might", "not", "be", "consistent", "NUMBER", "for", "instance", "an", "object", "in", "collection", "A", "be", "modify", "to", "point", "to", "collection", "B", "collection", "A", "be", "backed", "up", "with", "the", "object", "still", "point", "to", "collection", "C", "NUMBER", "there", "be", "a", "new", "feature", "in", "NUMBER", "to", "fix", "this", "use", "the", "oplog", "in", "mongodump", "NUMBER", "this", "requires", "an", "oplog", "though", "NUMBER", "what", "it", "do", "be", "that", "it", "records", "the", "position", "in", "the", "oplog", "and", "then", "do", "the", "mongodump", "NUMBER", "when", "the", "dump", "be", "do", "it", "replays", "the", "oplog", "so", "that", "at", "the", "end", "of", "the", "backup", "everything", "be", "consistent", "NUMBER", "So", "in", "order", "to", "implement", "this", "one", "could", "either", "a", "replica", "set", "which", "would", "also", "obviate", "any", "concerns", "with", "backing", "up", "the", "Mongo", "server", "one", "could", "just", "backup", "the", "slave", "and", "block", "writes", "to", "it", "while", "keep", "the", "master", "intact", "NUMBER", "Or", "even", "simpler", "have", "a", "one", "node", "replica", "set", "NUMBER", "The", "fact", "that", "the", "corruption", "may", "happen", "as", "oppose", "to", "be", "guaranteed", "to", "happen", "can", "sometimes", "convince", "people", "that", "it", "s", "not", "necessary", "to", "prevent", "against", "that", "measure", "NUMBER", "until", "it", "happens", "see", "AWS", "and", "region", "failover", "NUMBER", "I", "d", "like", "to", "put", "something", "in", "so", "that", "people", "could", "configure", "to", "guard", "against", "this", "scenario", "but", "whether", "it", "s", "the", "default", "or", "whether", "it", "s", "configurable", "be", "up", "to", "meskyanichi", "primarily", "NUMBER", "I", "know", "I", "plan", "on", "listening", "to", "people", "who", "work", "at", "the", "company", "in", "charge", "of", "the", "product", "be", "use", "and", "configuring", "accordingly", "NUMBER", "NUMBER", "Ah", "rgnitz", "already", "responded", "NUMBER", "I", "didn", "t", "notice", "that", "before", "NUMBER", "My", "mistake", "Well", "NUMBER", "This", "be", "work", "for", "me", "and", "tomash", "and", "we", "believe", "that", "it", "s", "fairy", "complete", "NUMBER", "About", "comment", "I", "have", "no", "idea", "how", "to", "test", "raising", "exception", "in", "mocha", "in", "normal", "rspec", "I", "would", "use", "should_raise", "but", "it", "s", "not", "work", "here", "NUMBER", "but", "this", "code", "should", "work", "in", "every", "scenario", "NUMBER", "awesome", "thanks", "Hello", "this", "be", "a", "support", "request", "Is", "possible", "to", "backup", "from", "a", "remote", "host", "to", "the", "local", "host", "with", "install", "backup", "gem", "I", "m", "trying", "to", "achive", "this", "but", "I", "m", "not", "able", "to", "NUMBER", "The", "error", "display", "be", "The", "source", "and", "destination", "cannot", "both", "be", "remote", "NUMBER", "But", "how", "can", "I", "specify", "a", "remote", "source", "and", "a", "local", "destination", "Thanks", "great", "work", "Actually", "I", "need", "to", "backup", "file", "and", "folders", "NUMBER", "But", "in", "the", "future", "if", "be", "possible", "I", "d", "like", "to", "backup", "also", "databases", "NUMBER", "Thanks", "for", "the", "support", "I", "ll", "wait", "for", "this", "feature", "It", "would", "be", "nice", "if", "we", "could", "setup", "a", "local", "storage", "for", "our", "backups", "NUMBER", "We", "would", "like", "to", "keep", "copies", "of", "our", "backups", "on", "both", "Amazon", "S", "NUMBER", "and", "our", "local", "server", "for", "easy", "access", "NUMBER", "A", "workaround", "be", "to", "use", "SCP", "and", "set", "the", "ip", "host", "to", "be", "NUMBER", "but", "then", "you", "have", "to", "configure", "valid", "credentials", "for", "it", "to", "work", "if", "be", "run", "from", "cron", "and", "it", "s", "still", "sort", "of", "a", "hack", "NUMBER", "Would", "be", "cool", "to", "add", "to", "this", "feature", "the", "possibility", "to", "not", "use", "remote", "storage", "but", "only", "local", "ones", "NUMBER", "So", "that", "we", "can", "have", "a", "single", "backup", "machine", "which", "pull", "datas", "from", "production", "server", "be", "it", "in", "progress", "or", "be", "you", "waiting", "for", "a", "pull", "request", "Heres", "a", "quick", "version", "I", "whipped", "up", "that", "be", "work", "for", "us", "NUMBER", "Right", "now", "we", "just", "require", "this", "file", "in", "our", "config", "NUMBER", "rb", "NUMBER", "I", "wasn", "t", "sure", "about", "the", "cycle", "but", "I", "tried", "to", "copy", "how", "other", "adapters", "worked", "NUMBER", "If", "this", "looks", "good", "I", "can", "work", "on", "add", "some", "specs", "and", "integrating", "it", "into", "the", "repo", "NUMBER", "LINK", "Local", "storage", "has", "be", "add", "NUMBER", "Closed", "by", "cfa", "NUMBER", "d", "NUMBER", "d", "NUMBER", "e", "NUMBER", "d", "NUMBER", "d", "NUMBER", "b", "NUMBER", "faee", "NUMBER", "e", "NUMBER", "d", "NUMBER", "e", "NUMBER", "a", "NUMBER", "Just", "add", "reference", "to", "where", "someone", "s", "already", "attempted", "this", "NUMBER", "LINK", "with", "pgbackups", "NUMBER", "Heroku", "PostgreSQL", "database", "support", "should", "be", "add", "use", "both", "pgbackups", "and", "the", "dedicated", "pg", "database", "tool", "NUMBER", "For", "the", "record", "andyvb", "brought", "this", "up", "today", "in", "NUMBER", "burns", "I", "do", "not", "see", "any", "reference", "to", "Heroku", "in", "the", "issue", "referenced", "though", "I", "m", "assuming", "you", "re", "referring", "to", "the", "act", "of", "customizing", "Backup", "to", "support", "specific", "solutions", "NUMBER", "The", "real", "followup", "question", "I", "have", "be", "Should", "we", "extend", "Backup", "by", "forking", "and", "add", "our", "extend", "functionality", "and", "then", "submit", "a", "pull", "request", "or", "by", "creating", "a", "new", "gem", "backup_heroku", "that", "provides", "the", "monkey", "patch", "What", "will", "be", "the", "method", "for", "doing", "this", "moving", "forward", "that", "the", "project", "will", "officially", "sanction", "He", "posted", "the", "same", "URL", "that", "was", "referenced", "above", "that", "s", "what", "he", "was", "work", "with", "NUMBER", "I", "don", "t", "see", "why", "this", "couldn", "t", "be", "add", "as", "another", "database", "adapter", "similar", "to", "the", "current", "Database", "PostgreSQL", "NUMBER", "I", "ll", "have", "to", "discuss", "it", "with", "meskyanichi", "as", "he", "s", "more", "familiar", "with", "Heroku", "than", "I", "NUMBER", "meskyanichi", "burns", "kevinelliott", "anyone", "work", "on", "this", "Would", "be", "very", "handful", "Silences", "STDOUT", "output", "from", "Backup", "Logger", "It", "wasn", "t", "clear", "to", "me", "how", "you", "go", "about", "test", "bin", "backup", "so", "I", "haven", "t", "do", "anything", "with", "that", "beyond", "make", "sure", "the", "option", "shows", "up", "in", "help", "output", "NUMBER", "Written", "to", "fix", "NUMBER", "When", "a", "program", "has", "nothing", "surprising", "to", "say", "it", "should", "say", "nothing", "NUMBER", "_The", "Art", "of", "Unix", "Programming_", "Backup", "writes", "detailed", "information", "about", "process", "and", "it", "be", "good", "by", "default", "but", "for", "for", "production", "mode", "silent", "mode", "would", "be", "very", "usefull", "NUMBER", "Cron", "for", "example", "considers", "any", "program", "output", "as", "error", "and", "sends", "it", "to", "administrator", "email", "NUMBER", "It", "can", "be", "silenced", "of", "course", "but", "when", "real", "problem", "happens", "nobody", "will", "notified", "NUMBER", "In", "silent", "mode", "only", "if", "problem", "happens", "backup", "OS", "ruby", "will", "print", "message", "and", "administrator", "will", "be", "notified", "NUMBER", "Submitted", "a", "pull", "request", "to", "add", "this", "See", "NUMBER", "I", "get", "the", "following", "message", "_Command", "backup", "be", "available", "in", "usr", "local", "bin", "backup", "_", "If", "I", "copy", "the", "generate", "line", "bin", "bash", "l", "i", "c", "backup", "perform", "t", "rx_db", "config_file", "var", "rapp", "diglife_rx", "config", "backup", "NUMBER", "rb", "var", "rapp", "diglife_rx", "log", "cron", "NUMBER", "log", "NUMBER", "NUMBER", "The", "cronjob", "works", "as", "expected", "NUMBER", "Any", "idea", "why", "it", "be", "not", "work", "from", "the", "cron", "itself", "Jesus", "you", "mean", "I", "need", "to", "find", "out", "where", "my", "gems", "be", "install", "Ok", "will", "check", "it", "out", "and", "report", "back", "NUMBER", "Unfortunately", "I", "can", "t", "make", "use", "of", "RVM", "on", "the", "server", "it", "just", "refuses", "to", "be", "use", "NUMBER", "Says", "something", "about", "not", "be", "able", "to", "blah", "blah", "for", "system", "rubies", "NUMBER", "This", "be", "not", "the", "place", "for", "that", "discussion", "though", "That", "works", "great", "ad", "no", "idea", "about", "the", "which", "command", "that", "be", "true", "awesome", "sauce", "Thanks", "a", "bunch", "Backup", "did", "run", "fine", "tonight", "Thanks", "again", "for", "all", "the", "help", "Since", "SQLite", "NUMBER", "DBs", "be", "just", "a", "single", "file", "can", "t", "this", "be", "do", "pretty", "easily", "with", "an", "archive", "directive", "tsigo", "even", "though", "it", "s", "only", "one", "file", "to", "avoid", "corrupt", "result", "if", "your", "db", "be", "online", "you", "must", "use", "the", "sqlite", "api", "to", "make", "a", "backup", "API", "LINK", "_finish", "NUMBER", "html", "CLI", "LINK", "Ah", "good", "point", "NUMBER", "I", "hadn", "t", "thought", "of", "the", "potential", "problem", "if", "the", "DB", "was", "online", "NUMBER", "Hello", "NUMBER", "Here", "goes", "my", "current", "config", "for", "backup", "TAG", "Backup", "Model", "NUMBER", "new", "lapik", "Backup", "laptopa", "do", "sync_with", "RSync", "do", "rsync", "rsync", "NUMBER", "ip", "NUMBER", "rsync", "NUMBER", "port", "NUMBER", "rsync", "NUMBER", "username", "backup", "rsync", "NUMBER", "password", "correct_password", "rsync", "NUMBER", "path", "rsync", "NUMBER", "mirror", "true", "rsync", "NUMBER", "compress", "true", "rsync", "NUMBER", "directories", "do", "directory", "directory", "NUMBER", "add", "home", "fenio", "end", "end", "end", "TAG", "When", "I", "run", "it", "with", "backup", "perform", "t", "lapik", "I", "get", "question", "about", "password", "fenio", "lapik", "sudo", "var", "lib", "gems", "NUMBER", "bin", "backup", "perform", "t", "lapik", "sudo", "password", "for", "fenio", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "Backup", "laptopa", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Syncer", "RSync", "start", "syncing", "home", "fenio", "NUMBER", "backup", "NUMBER", "s", "password", "When", "I", "paste", "there", "correct_password", "it", "starts", "rsyncing", "file", "NUMBER", "So", "I", "can", "t", "use", "it", "from", "cron", "right", "now", "NUMBER", "Any", "hints", "how", "to", "solve", "it", "regards", "fEnIo", "I", "didn", "t", "know", "I", "can", "simply", "use", "keys", "with", "rsync", "syncer", "NUMBER", "Wiki", "pages", "doesn", "t", "mention", "about", "that", "NUMBER", "You", "write", "about", "keys", "only", "wrt", "s", "NUMBER", "rackspace", "dropbox", "and", "I", "suppose", "that", "these", "keys", "aren", "t", "equivalents", "of", "ssh", "priv", "pub", "keys", "but", "credentials", "of", "these", "services", "NUMBER", "First", "of", "all", "I", "was", "quite", "surprised", "that", "rsync", "examples", "use", "NUMBER", "port", "instead", "of", "NUMBER", "but", "I", "guess", "you", "re", "use", "mainly", "rsync", "over", "ssh", "in", "such", "case", "NUMBER", "To", "be", "honest", "I", "m", "pretty", "surprised", "you", "re", "emphasize", "on", "exotic", "kinds", "of", "storages", "like", "s", "NUMBER", "rackspace", "dropbox", "and", "other", "cloud", "relate", "things", "NUMBER", "This", "gem", "has", "potential", "to", "be", "really", "helpful", "for", "sysadmins", "I", "was", "searching", "for", "such", "thing", "for", "a", "long", "time", "but", "seems", "it", "s", "focused", "on", "backups", "on", "desktops", "NUMBER", "I", "would", "really", "like", "to", "see", "more", "storage", "target", "around", "rsync", "based", "solutions", "like", "duplicity", "rdiff", "backup", "or", "something", "like", "that", "NUMBER", "Incremental", "backups", "based", "on", "rsync", "would", "be", "great", "NUMBER", "Right", "now", "rsync", "storage", "it", "s", "quite", "useless", "when", "it", "s", "use", "in", "normal", "scenario", "NUMBER", "In", "fact", "I", "don", "t", "have", "space", "in", "tmp", "to", "be", "able", "to", "create", "tgz", "file", "and", "_then_", "send", "it", "via", "rsync", "to", "some", "target", "NUMBER", "But", "that", "s", "probably", "things", "I", "should", "submit", "as", "other", "issue", "Anyway", "thanks", "for", "very", "good", "piece", "of", "software", "I", "m", "use", "Syncer", "as", "you", "saw", "in", "my", "report", "but", "I", "would", "like", "to", "keep", "let", "s", "say", "NUMBER", "last", "days", "instead", "of", "one", "copy", "NUMBER", "Would", "be", "great", "to", "keep", "full", "copy", "from", "now", "NUMBER", "days", "and", "only", "change", "file", "for", "now", "NUMBER", "days", "now", "NUMBER", "days", "and", "so", "on", "NUMBER", "rsync", "hardlinks", "can", "make", "it", "very", "space", "efficient", "backups", "just", "see", "how", "it", "s", "do", "in", "rdiff", "backup", "NUMBER", "But", "what", "I", "was", "always", "searching", "for", "be", "one", "solution", "for", "backups", "of", "all", "the", "thing", "I", "get", "NUMBER", "Right", "now", "I", "have", "complex", "set", "of", "scripts", "which", "mixes", "different", "solutions", "for", "databases", "file", "repositories", "and", "so", "on", "NUMBER", "Aproach", "of", "Storage", "in", "this", "gem", "be", "great", "for", "databases", "but", "for", "large", "set", "of", "file", "be", "not", "so", "cool", "especially", "if", "you", "want", "to", "make", "full", "rsync", "on", "weekend", "and", "only", "differences", "on", "normal", "days", "of", "week", "NUMBER", "I", "mention", "rdiff", "backup", "and", "duplicity", "NUMBER", "Both", "be", "python", "based", "and", "uses", "librsync", "NUMBER", "There", "be", "also", "rsnapshot", "utility", "based", "on", "perl", "and", "librsync", "NUMBER", "But", "there", "be", "also", "much", "simpler", "aproach", "which", "uses", "cp", "al", "and", "default", "behaviour", "of", "rsync", "which", "unlinks", "hard", "link", "before", "modifing", "destination", "file", "NUMBER", "LINK", "_snapshots", "Incremental", "Not", "sure", "which", "aproach", "will", "be", "the", "easiest", "to", "implement", "cause", "I", "m", "ordinary", "sysadmin", "and", "write", "more", "than", "a", "bash", "script", "or", "oneliner", "in", "perl", "be", "beyond", "my", "skills", "Mysql", "backup", "will", "fail", "when", "run", "from", "cron", "FreeBSD", "NUMBER", "with", "error", "mysqldump", "not", "find", "NUMBER", "Even", "when", "that", "has", "fail", "backup", "will", "send", "a", "notification", "that", "it", "finished", "without", "any", "error", "NUMBER", "This", "be", "happening", "because", "on", "FreeBSD", "mysqldump", "be", "install", "in", "usr", "local", "bin", "and", "that", "folder", "be", "not", "in", "cron", "s", "PATH", "for", "security", "reasons", "NUMBER", "There", "should", "be", "some", "kind", "of", "auto", "detection", "of", "mysqldump", "s", "location", "or", "backup", "should", "report", "the", "error", "in", "the", "email", "notification", "NUMBER", "Works", "fine", "Backup", "Exception", "CommandNotFound", "Could", "not", "find", "the", "utility", "mysqldump", "on", "amd", "NUMBER", "freebsd", "NUMBER", "NUMBER", "Thanks", "NUMBER", "Maybe", "a", "mention", "of", "mysqldump", "NUMBER", "utility_path", "in", "documentation", "or", "the", "template", "In", "my", "config", "i", "was", "cycling", "NUMBER", "file", "but", "due", "to", "a", "filled", "up", "dropbox", "i", "had", "to", "cleanup", "and", "remove", "file", "from", "my", "dropbox", "NUMBER", "Now", "backup", "execution", "fail", "as", "it", "be", "attempting", "to", "remove", "non", "exist", "file", "from", "dropbox", "NUMBER", "I", "saw", "that", "it", "reads", "then", "internally", "manged", "Dropbox", "NUMBER", "yml", "file", "NUMBER", "My", "workaround", "was", "to", "cleanup", "the", "offending", "entries", "from", "that", "file", "NUMBER", "It", "would", "be", "nice", "however", "if", "the", "exception", "was", "caught", "and", "ignored", "NUMBER", "Want", "patch", "Havent", "build", "as", "yet", "but", "can", "NUMBER", "I", "have", "do", "this", "here", "NUMBER", "You", "may", "want", "to", "merge", "this", "NUMBER", "If", "merge", "we", "will", "update", "the", "wiki", "pages", "NUMBER", "Hey", "Thanks", "I", "have", "write", "it", "so", "quickly", "so", "code", "looks", "not", "so", "good", "NUMBER", "Yeah", "i", "also", "thought", "of", "moving", "that", "class", "some", "where", "else", "but", "couldn", "t", "find", "the", "place", "NUMBER", "it", "s", "here", "NUMBER", "LINK", "Hello", "Michael", "I", "change", "only", "one", "line", "in", "your", "archive", "NUMBER", "rb", "cause", "it", "rose", "an", "error", "on", "my", "FreeBSD", "machines", "NUMBER", "The", "install", "tar", "utility", "which", "be", "distributed", "with", "the", "base", "system", "has", "a", "nasty", "default", "for", "output", "look", "at", "the", "f", "parameter", "TAG", "root", "www", "NUMBER", "tar", "help", "tar", "bsdtar", "manipulate", "archive", "file", "First", "option", "must", "be", "a", "mode", "specifier", "c", "Create", "r", "Add", "Replace", "t", "List", "u", "Update", "x", "Extract", "Common", "Options", "b", "Use", "NUMBER", "byte", "records", "per", "I", "O", "block", "f", "TAG", "Location", "of", "archive", "default", "dev", "sa", "NUMBER", "v", "Verbose", "w", "Interactive", "NUMBER", "bsdtar", "NUMBER", "libarchive", "NUMBER", "TAG", "The", "correspondenting", "error", "TAG", "root", "www", "NUMBER", "tar", "c", "NUMBER", "NUMBER", "bla", "NUMBER", "tar", "tar", "Failed", "to", "open", "dev", "sa", "NUMBER", "root", "www", "NUMBER", "tar", "c", "f", "bla", "NUMBER", "tar", "NUMBER", "root", "www", "NUMBER", "TAG", "Hope", "this", "finds", "the", "way", "back", "in", "your", "nice", "piece", "of", "software", "NUMBER", "Kind", "regards", "Stefan", "Ah", "NUMBER", "I", "forgot", "to", "say", "that", "I", "test", "this", "on", "several", "Linux", "machines", "too", "every", "version", "of", "tar", "know", "by", "me", "support", "the", "f", "parm", "but", "there", "may", "exist", "version", "that", "won", "t", "handle", "this", "NUMBER", "This", "should", "be", "review", "by", "someone", "else", "who", "be", "more", "in", "the", "Linux", "business", "NUMBER", "It", "seems", "that", "Backup", "be", "use", "more", "than", "NUMBER", "ftp", "connections", "to", "do", "its", "job", "NUMBER", "Not", "sure", "how", "to", "debug", "this", "NUMBER", "stacktrace", "Exception", "that", "get", "raise", "NUMBER", "I", "can", "t", "accept", "more", "than", "NUMBER", "connections", "as", "the", "same", "user", "usr", "lib", "ruby", "NUMBER", "net", "ftp", "NUMBER", "rb", "NUMBER", "in", "getresp", "usr", "lib", "ruby", "NUMBER", "net", "ftp", "NUMBER", "rb", "NUMBER", "in", "sendcmd", "usr", "lib", "ruby", "NUMBER", "monitor", "NUMBER", "rb", "NUMBER", "in", "synchronize", "usr", "lib", "ruby", "NUMBER", "net", "ftp", "NUMBER", "rb", "NUMBER", "in", "sendcmd", "usr", "lib", "ruby", "NUMBER", "net", "ftp", "NUMBER", "rb", "NUMBER", "in", "login", "usr", "lib", "ruby", "NUMBER", "monitor", "NUMBER", "rb", "NUMBER", "in", "synchronize", "usr", "lib", "ruby", "NUMBER", "net", "ftp", "NUMBER", "rb", "NUMBER", "in", "login", "usr", "lib", "ruby", "NUMBER", "net", "ftp", "NUMBER", "rb", "NUMBER", "in", "initialize", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "ftp", "NUMBER", "rb", "NUMBER", "in", "new", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "ftp", "NUMBER", "rb", "NUMBER", "in", "connection", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "ftp", "NUMBER", "rb", "NUMBER", "in", "transfer", "usr", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "ftp", "NUMBER", "rb", "NUMBER", "in", "perform", "Thanks", "for", "this", "excellent", "tool", "I", "dig", "the", "elegant", "simplicity", "of", "this", "DSL", "NUMBER", "I", "m", "have", "almost", "everything", "work", "but", "I", "m", "having", "an", "issue", "with", "SCP", "via", "cron", "NUMBER", "I", "m", "use", "backup", "version", "NUMBER", "and", "Ruby", "NUMBER", "p", "NUMBER", "and", "I", "have", "backup", "configured", "with", "SCP", "as", "the", "storage", "option", "NUMBER", "When", "I", "run", "backup", "from", "the", "command", "line", "it", "works", "fine", "and", "I", "see", "the", "resulting", "tar", "file", "successfully", "copied", "on", "the", "remote", "server", "NUMBER", "When", "I", "run", "the", "same", "configuration", "via", "cron", "use", "the", "whenever", "gem", "I", "get", "the", "error", "shown", "below", "NUMBER", "Any", "suggestions", "you", "can", "offer", "be", "appreciated", "NUMBER", "Configuration", "store_with", "SCP", "do", "server", "server", "NUMBER", "username", "redacted", "server", "NUMBER", "ip", "redacted", "server", "NUMBER", "port", "NUMBER", "server", "NUMBER", "path", "backups", "server", "NUMBER", "keep", "NUMBER", "end", "Results", "Via", "Command", "Line", "backup", "perform", "trigger", "stratify_backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "Stratify", "Backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Database", "MongoDB", "start", "dumping", "and", "archiving", "stratify_production", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "packaging", "everything", "to", "a", "single", "archive", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Compressor", "Gzip", "start", "compressing", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Encryptor", "OpenSSL", "start", "encrypting", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "SCP", "start", "transferring", "NUMBER", "ratify_backup", "NUMBER", "tar", "NUMBER", "gz", "NUMBER", "enc", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Notifier", "Mail", "start", "notifying", "about", "the", "process", "NUMBER", "Success", "Results", "Via", "cron", "with", "whenever", "Setup", "cat", "config", "schedule", "NUMBER", "rb", "set", "output", "path", "log", "cron", "NUMBER", "log", "every", "NUMBER", "minute", "do", "command", "backup", "perform", "trigger", "stratify_backup", "end", "whenever", "update", "crontab", "backup", "write", "crontab", "file", "update", "crontab", "l", "Begin", "Whenever", "generate", "tasks", "for", "backup", "bin", "bash", "l", "c", "backup", "perform", "trigger", "stratify_backup", "Users", "jason", "Backup", "log", "cron", "NUMBER", "log", "NUMBER", "NUMBER", "End", "Whenever", "generate", "tasks", "for", "backup", "Results", "cat", "log", "cron", "NUMBER", "log", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "mmessage", "NUMBER", "m", "Performing", "backup", "for", "Stratify", "Backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "mmessage", "NUMBER", "m", "Backup", "Database", "MongoDB", "start", "dumping", "and", "archiving", "stratify_production", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "mmessage", "NUMBER", "m", "Backup", "start", "packaging", "everything", "to", "a", "single", "archive", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "mmessage", "NUMBER", "m", "Backup", "Compressor", "Gzip", "start", "compressing", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "mmessage", "NUMBER", "m", "Backup", "Encryptor", "OpenSSL", "start", "encrypting", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "mmessage", "NUMBER", "m", "Backup", "Storage", "SCP", "start", "transferring", "NUMBER", "ratify_backup", "NUMBER", "tar", "NUMBER", "gz", "NUMBER", "enc", "NUMBER", "Enter", "passphrase", "for", "Users", "jason", "NUMBER", "ssh", "id_rsa", "stty", "stdin", "isn", "t", "a", "terminal", "stty", "stdin", "isn", "t", "a", "terminal", "stty", "stdin", "isn", "t", "a", "terminal", "Enter", "passphrase", "for", "Users", "jason", "NUMBER", "ssh", "id_rsa", "stty", "stdin", "isn", "t", "a", "terminal", "stty", "stdin", "isn", "t", "a", "terminal", "stty", "stdin", "isn", "t", "a", "terminal", "Enter", "passphrase", "for", "Users", "jason", "NUMBER", "ssh", "id_rsa", "stty", "stdin", "isn", "t", "a", "terminal", "stty", "stdin", "isn", "t", "a", "terminal", "stty", "stdin", "isn", "t", "a", "terminal", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "mmessage", "NUMBER", "m", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "mmessage", "NUMBER", "m", "Backup", "Notifier", "Mail", "start", "notifying", "about", "the", "process", "NUMBER", "Exception", "that", "get", "raise", "the", "given", "identity", "be", "know", "but", "the", "private", "key", "could", "not", "be", "loaded", "OpenSSL", "PKey", "RSAError", "Neither", "PUB", "key", "nor", "PRIV", "key", "nested", "asn", "NUMBER", "error", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "key_manager", "NUMBER", "rb", "NUMBER", "in", "rescue", "in", "sign", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "key_manager", "NUMBER", "rb", "NUMBER", "in", "sign", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "methods", "publickey", "NUMBER", "rb", "NUMBER", "in", "authenticate_with", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "methods", "publickey", "NUMBER", "rb", "NUMBER", "in", "block", "in", "authenticate", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "key_manager", "NUMBER", "rb", "NUMBER", "in", "block", "in", "each_identity", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "key_manager", "NUMBER", "rb", "NUMBER", "in", "each", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "key_manager", "NUMBER", "rb", "NUMBER", "in", "each_identity", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "methods", "publickey", "NUMBER", "rb", "NUMBER", "in", "authenticate", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "session", "NUMBER", "rb", "NUMBER", "in", "block", "in", "authenticate", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "session", "NUMBER", "rb", "NUMBER", "in", "each", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "authentication", "session", "NUMBER", "rb", "NUMBER", "in", "authenticate", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "net", "ssh", "NUMBER", "lib", "net", "ssh", "NUMBER", "rb", "NUMBER", "in", "start", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "scp", "NUMBER", "rb", "NUMBER", "in", "connection", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "scp", "NUMBER", "rb", "NUMBER", "in", "block", "in", "create_remote_directories", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "scp", "NUMBER", "rb", "NUMBER", "in", "each", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "scp", "NUMBER", "rb", "NUMBER", "in", "create_remote_directories", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "scp", "NUMBER", "rb", "NUMBER", "in", "transfer", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "storage", "scp", "NUMBER", "rb", "NUMBER", "in", "perform", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "block", "in", "perform", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "each", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "block", "in", "perform", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "each", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "bin", "backup", "NUMBER", "in", "load", "Users", "jason", "NUMBER", "rvm", "gems", "ruby", "NUMBER", "p", "NUMBER", "bin", "backup", "NUMBER", "in", "TAG", "You", "be", "run", "Backup", "version", "NUMBER", "and", "Ruby", "version", "ruby", "NUMBER", "p", "NUMBER", "NUMBER", "If", "you", "ve", "setup", "a", "Notification", "in", "your", "configuration", "file", "the", "above", "error", "will", "have", "be", "sent", "NUMBER", "Thanks", "for", "the", "quick", "reply", "NUMBER", "In", "response", "to", "your", "question", "NUMBER", "The", "cron", "job", "triggering", "Backup", "be", "indeed", "from", "the", "same", "user", "that", "was", "triggering", "Backup", "from", "the", "command", "line", "NUMBER", "I", "m", "use", "OS", "X", "NUMBER", "I", "do", "have", "a", "passphrase", "set", "up", "for", "my", "ssh", "key", "NUMBER", "Good", "catch", "NUMBER", "This", "be", "almost", "certainly", "the", "issue", "NUMBER", "I", "don", "t", "have", "to", "enter", "the", "passphrase", "from", "the", "command", "line", "because", "it", "s", "stored", "in", "my", "keychain", "NUMBER", "I", "suspect", "the", "cron", "job", "doesn", "t", "have", "access", "to", "my", "keychain", "NUMBER", "I", "wonder", "if", "I", "could", "just", "make", "SCP", "use", "username", "and", "password", "to", "log", "in", "instead", "of", "use", "the", "ssh", "key", "NUMBER", "I", "add", "the", "password", "to", "the", "SCP", "block", "in", "hopes", "that", "this", "would", "do", "the", "trick", "NUMBER", "However", "I", "still", "get", "the", "same", "error", "NUMBER", "store_with", "SCP", "do", "server", "server", "NUMBER", "username", "redacted", "server", "NUMBER", "password", "redacted", "server", "NUMBER", "ip", "redacted", "server", "NUMBER", "port", "NUMBER", "server", "NUMBER", "path", "backups", "server", "NUMBER", "keep", "NUMBER", "end", "I", "wonder", "if", "there", "s", "a", "way", "I", "can", "force", "it", "to", "use", "the", "username", "and", "password", "and", "ignore", "the", "ssh", "key", "NUMBER", "Any", "suggestions", "you", "can", "offer", "be", "appreciated", "NUMBER", "Thanks", "for", "the", "suggestion", "NUMBER", "I", "m", "not", "comfortable", "with", "my", "_main_", "SSH", "key", "not", "having", "a", "passphrase", "LINK", "with", "key", "passphrases", "but", "I", "really", "wanna", "use", "Backup", "NUMBER", "So", "as", "you", "suggested", "I", "created", "another", "SSH", "key", "and", "I", "omitted", "the", "passphrase", "NUMBER", "I", "ll", "only", "use", "this", "new", "key", "for", "connecting", "to", "my", "backup", "server", "not", "for", "connecting", "to", "all", "the", "other", "servers", "I", "work", "with", "so", "that", "lessens", "the", "security", "concern", "significantly", "NUMBER", "Then", "I", "followed", "this", "tip", "LINK", "keys", "configuring_ssh", "for", "use", "multiple", "SSH", "keys", "on", "the", "same", "system", "NUMBER", "This", "solves", "the", "problem", "NUMBER", "SCP", "via", "Backup", "now", "works", "from", "the", "command", "line", "and", "via", "cron", "NUMBER", "Thanks", "NUMBER", "Sorry", "to", "comment", "on", "a", "issue", "a", "year", "ago", "but", "since", "I", "didn", "t", "find", "elsewhere", "relate", "to", "the", "ssh", "key", "which", "has", "a", "passphrase", "be", "this", "possible", "now", "This", "be", "do", "so", "you", "can", "add", "in", "options", "like", "the", "exclude", "or", "additional", "parameters", "you", "might", "need", "NUMBER", "It", "would", "be", "great", "if", "there", "was", "support", "for", "s", "NUMBER", "sync", "and", "s", "NUMBER", "cmd", "LINK", "i", "dont", "think", "it", "has", "be", "update", "in", "a", "while", "NUMBER", "I", "ve", "be", "use", "NUMBER", "for", "the", "past", "NUMBER", "years", "NUMBER", "I", "think", "it", "s", "be", "abandoned", "NUMBER", "Let", "me", "look", "to", "see", "if", "I", "can", "get", "it", "work", "under", "NUMBER", "x", "in", "the", "next", "few", "weeks", "NUMBER", "Awesome", "thanks", "for", "the", "fast", "response", "Took", "me", "a", "while", "to", "figure", "this", "out", "NUMBER", "Could", "you", "add", "it", "to", "the", "wiki", "for", "S", "NUMBER", "Erk", "NUMBER", "Right", "you", "be", "NUMBER", "I", "must", "be", "blind", "NUMBER", "You", "may", "want", "to", "have", "a", "look", "at", "this", "commit", "of", "mine", "NUMBER", "LINK", "Thor", "says", "the", "list", "be", "space", "separated", "NUMBER", "I", "know", "you", "mention", "it", "s", "in", "your", "TODO", "list", "NUMBER", "But", "if", "this", "looks", "like", "feel", "free", "to", "pull", "it", "in", "NUMBER", "I", "think", "we", "should", "probably", "make", "the", "timeout", "in", "Dropbox", "upload", "configurable", "NUMBER", "It", "s", "hard", "code", "to", "NUMBER", "at", "the", "moment", "NUMBER", "I", "m", "get", "broken", "pipe", "exception", "occasionally", "when", "uploading", "to", "Dropbox", "NUMBER", "My", "file", "be", "only", "NUMBER", "Mb", "NUMBER", "I", "ve", "seen", "this", "happen", "occasionally", "it", "s", "happened", "NUMBER", "twice", "on", "the", "weekend", "over", "NUMBER", "invocations", "NUMBER", "I", "cant", "think", "of", "anything", "other", "than", "a", "timeout", "NUMBER", "Exception", "LINK", "It", "seems", "i", "ve", "scheduled", "NUMBER", "different", "backups", "at", "the", "same", "time", "and", "they", "all", "get", "kicked", "off", "in", "parallel", "NUMBER", "LINK", "Perhaps", "there", "be", "a", "problem", "hitting", "Dropbox", "with", "too", "many", "connections", "I", "could", "stagger", "my", "backup", "easily", "by", "a", "few", "minutes", "but", "be", "it", "possible", "to", "chain", "backups", "in", "perform", "Something", "like", "backup", "perform", "t", "type", "NUMBER", "type", "NUMBER", "type", "NUMBER", "Unless", "we", "let", "the", "user", "customize", "the", "status", "message", "or", "allow", "date", "to", "be", "include", "in", "the", "tweet", "it", "likely", "we", "ll", "come", "across", "error", "from", "twitter", "NUMBER", "There", "seem", "to", "be", "a", "problem", "backing", "up", "My", "Project", "myproject", "NUMBER", "Exception", "that", "get", "raise", "POST", "LINK", "NUMBER", "Status", "be", "a", "duplicate", "NUMBER", "usr", "local", "ruby", "enterprise", "lib", "ruby", "gems", "NUMBER", "gems", "twitter", "NUMBER", "lib", "faraday", "raise_http_", "NUMBER", "xx", "NUMBER", "rb", "NUMBER", "in", "register_on_complete", "usr", "local", "ruby", "enterprise", "lib", "ruby", "gems", "NUMBER", "gems", "faraday", "NUMBER", "lib", "faraday", "response", "NUMBER", "rb", "NUMBER", "in", "call", "usr", "local", "ruby", "enterprise", "lib", "ruby", "gems", "NUMBER", "gems", "faraday", "NUMBER", "lib", "faraday", "response", "NUMBER", "rb", "NUMBER", "in", "finish", "No", "Twitter", "seems", "to", "compare", "the", "tweet", "with", "tweets", "sent", "previously", "NUMBER", "Backup", "at", "NUMBER", "be", "worked", "fine", "but", "the", "one", "at", "NUMBER", "pm", "fail", "because", "it", "s", "text", "was", "the", "same", "NUMBER", "Looks", "great", "Michael", "This", "be", "better", "than", "Time", "NUMBER", "now", "I", "was", "also", "thinking", "we", "could", "let", "the", "user", "set", "a", "Hashtag", "on", "the", "tweet", "NUMBER", "That", "doesn", "t", "solve", "this", "particular", "problem", "but", "allows", "a", "bit", "of", "control", "for", "the", "user", "NUMBER", "It", "could", "possibly", "allow", "the", "user", "to", "classify", "tweets", "and", "or", "share", "them", "with", "other", "members", "NUMBER", "Haven", "t", "completely", "thought", "it", "thru", "Hello", "I", "ve", "add", "support", "for", "excluding", "file", "and", "directories", "from", "tar", "archives", "NUMBER", "Hi", "Michael", "So", "here", "s", "the", "first", "attempt", "at", "get", "the", "Twitter", "notifier", "in", "place", "NUMBER", "The", "basic", "infrastructure", "be", "in", "place", "NUMBER", "Now", "we", "can", "aim", "for", "goodies", "like", "configurable", "tweet", "content", "etc", "NUMBER", "Looking", "forward", "to", "your", "comments", "NUMBER", "Cheers", "Aditya", "It", "would", "be", "nice", "to", "have", "twitter", "based", "notification", "on", "success", "error", "NUMBER", "I", "can", "help", "implement", "if", "you", "think", "it", "ll", "be", "cool", "Thanks", "Your", "design", "be", "absolutely", "amazing", "NUMBER", "I", "had", "one", "look", "at", "the", "code", "base", "and", "worked", "out", "exactly", "what", "had", "to", "be", "do", "but", "thanks", "for", "the", "pointers", "above", "NUMBER", "I", "should", "be", "able", "to", "send", "you", "a", "pull", "soon", "with", "test", "NUMBER", "I", "must", "compliment", "you", "on", "your", "wiki", "as", "well", "NUMBER", "I", "ve", "yet", "to", "come", "across", "clearer", "documentation", "to", "get", "stuff", "do", "in", "any", "other", "project", "i", "ve", "seen", "NUMBER", "Didnt", "mean", "to", "close", "the", "ticket", "Hey", "trying", "to", "do", "postgres", "database", "backup", "NUMBER", "Getting", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Performing", "backup", "for", "Postgresql", "Data", "Backup", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Database", "PostgreSQL", "start", "dumping", "and", "archiving", "eggroll_prod", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "packaging", "everything", "to", "a", "single", "archive", "file", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Compressor", "Gzip", "start", "compressing", "the", "archive", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "Storage", "S", "NUMBER", "start", "transferring", "NUMBER", "pg_data_backup", "NUMBER", "tar", "NUMBER", "gz", "NUMBER", "tcmalloc", "large", "alloc", "NUMBER", "bytes", "nil", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "message", "Backup", "start", "cleaning", "up", "the", "temporary", "file", "NUMBER", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "activesupport", "NUMBER", "lib", "active_support", "core_ext", "kernel", "agnostics", "NUMBER", "rb", "NUMBER", "in", "Cannot", "allocate", "memory", "which", "rm", "Errno", "ENOMEM", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "activesupport", "NUMBER", "lib", "active_support", "core_ext", "kernel", "agnostics", "NUMBER", "rb", "NUMBER", "in", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "cli", "NUMBER", "rb", "NUMBER", "in", "utility", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "clean", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "lib", "backup", "model", "NUMBER", "rb", "NUMBER", "in", "perform", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "in", "perform", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "send", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "task", "NUMBER", "rb", "NUMBER", "in", "run", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "invocation", "NUMBER", "rb", "NUMBER", "in", "invoke_task", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "NUMBER", "rb", "NUMBER", "in", "dispatch", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "thor", "NUMBER", "lib", "thor", "base", "NUMBER", "rb", "NUMBER", "in", "start", "from", "usr", "local", "lib", "ruby", "gems", "NUMBER", "gems", "backup", "NUMBER", "bin", "backup", "NUMBER", "from", "usr", "local", "bin", "backup", "NUMBER", "in", "load", "from", "usr", "local", "bin", "backup", "NUMBER", "Configuration", "be", "more", "or", "less", "the", "defaults", "NUMBER", "Ran", "it", "with", "backup", "perform", "t", "pg_data_backup", "c", "opt", "backup", "config", "NUMBER", "rb", "Any", "ideas", "what", "be", "wrong", "Happy", "to", "gist", "my", "config", "file", "if", "necessary", "NUMBER", "Using", "latest", "version", "of", "REE", "with", "tuned", "GC", "params", "NUMBER", "Configuration", "be", "Backup", "Model", "NUMBER", "new", "pg_data_backup", "Postgresql", "Data", "Backup", "do", "database", "PostgreSQL", "do", "db", "db", "NUMBER", "name", "NUMBER", "db", "NUMBER", "username", "NUMBER", "db", "NUMBER", "password", "NUMBER", "db", "NUMBER", "host", "NUMBER", "db", "NUMBER", "port", "NUMBER", "db", "NUMBER", "additional_options", "quick", "single", "transaction", "end", "store_with", "S", "NUMBER", "do", "s", "NUMBER", "s", "NUMBER", "access_key_id", "NUMBER", "s", "NUMBER", "secret_access_key", "NUMBER", "s", "NUMBER", "bucket", "pg", "data", "backups", "s", "NUMBER", "keep", "NUMBER", "end", "compress_with", "Gzip", "do", "compression", "compression", "NUMBER", "best", "false", "compression", "NUMBER", "fast", "true", "end", "notify_by", "Mail", "do", "mail", "mail", "NUMBER", "on_success", "true", "mail", "NUMBER", "on_failure", "true", "mail", "NUMBER", "port", "NUMBER", "mail", "NUMBER", "host", "NUMBER", "mail", "NUMBER", "domain", "NUMBER", "mail", "NUMBER", "user_name", "nil", "mail", "NUMBER", "password", "nil", "mail", "NUMBER", "authentication", "nil", "mail", "NUMBER", "enable_starttls_auto", "false", "end", "end", "Thanks", "for", "the", "fast", "response", "Look", "forward", "to", "happily", "use", "this", "library", "NUMBER", "Thanks", "so", "much", "for", "this", "use", "it", "to", "backup", "all", "of", "our", "production", "data", "NUMBER", "So", "much", "better", "than", "cobbling", "together", "my", "own", "hacky", "scripts", "NUMBER", "Yep", "all", "fix", "again", "and", "work", "great", "NUMBER", "Thanks", "The", "readme", "says", "encryption", "be", "applied", "before", "compression", "NUMBER", "I", "bet", "you", "ll", "get", "much", "better", "compression", "if", "those", "be", "reversed", "NUMBER", "Encrypted", "data", "probably", "doesn", "t", "compress", "much", "at", "all", "NUMBER", "I", "think", "mikegee", "be", "correct", "NUMBER", "compressing", "encrypted", "file", "be", "not", "efficient", "LINK", "Hi", "there", "I", "add", "a", "feature", "so", "that", "an", "email", "notification", "will", "be", "sent", "when", "the", "backup", "error", "out", "if", "the", "notify", "config", "setting", "be", "set", "to", "to", "true", "or", "only_errors", "NUMBER", "I", "think", "it", "would", "be", "useful", "to", "other", "people", "and", "it", "s", "a", "must", "have", "for", "our", "scenario", "so", "it", "would", "be", "awesome", "if", "you", "pull", "in", "this", "change", "and", "I", "could", "switch", "back", "to", "the", "main", "fork", "Thanks", "Pat", "Gannon", "PatrickJosephGannon", "yahoo", "NUMBER", "com", "patgannon"], "text_count": [0, 15830, 4042, 2059, 1436, 112, 1571, 10, 60, 1981, 2107, 4349, 2241, 1518, 1758, 540, 0, 0, 0, 0, 5150, 1370, 766, 528, 1000, 711, 0, 0, 0, 0, 9167, 5637, 3598, 198, 1877, 610, 0, 0, 0, 0, 11369, 44, 5231, 4872, 2833, 0, 0, 0, 0, 0, 2798, 1160, 1360, 722, 1157, 526, 1190, 0, 0, 0, 8322, 596, 6860, 438, 0, 0, 0, 0, 0, 0, 5914, 701, 4289, 1826, 650, 0, 0, 0, 0, 0, 11128, 5744, 913, 3943, 604, 436, 0, 0, 0, 0, 871, 3201, 342, 0, 0, 0, 0, 0, 0, 0, 12115, 2203, 7508, 2823, 0, 0, 0, 0, 0, 0, 19826, 33639, 458, 1392, 467, 572, 0, 0, 0, 0, 47435, 155, 34674, 708, 7815, 11162]}]